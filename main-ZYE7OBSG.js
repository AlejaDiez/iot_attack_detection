var Fhe=Object.create;var oy=Object.defineProperty,Phe=Object.defineProperties,JV=Object.getOwnPropertyDescriptor,Bhe=Object.getOwnPropertyDescriptors,Lhe=Object.getOwnPropertyNames,Qb=Object.getOwnPropertySymbols,$he=Object.getPrototypeOf,zN=Object.prototype.hasOwnProperty,e9=Object.prototype.propertyIsEnumerable;var QV=(t,n,e)=>n in t?oy(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,ue=(t,n)=>{for(var e in n||={})zN.call(n,e)&&QV(t,e,n[e]);if(Qb)for(var e of Qb(n))e9.call(n,e)&&QV(t,e,n[e]);return t},pt=(t,n)=>Phe(t,Bhe(n));var iy=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,e)=>(typeof require<"u"?require:n)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Uf=(t,n)=>{var e={};for(var r in t)zN.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&Qb)for(var r of Qb(t))n.indexOf(r)<0&&e9.call(t,r)&&(e[r]=t[r]);return e};var Fo=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Qt=(t,n)=>{for(var e in n)oy(t,e,{get:n[e],enumerable:!0})},Vhe=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of Lhe(n))!zN.call(t,o)&&o!==e&&oy(t,o,{get:()=>n[o],enumerable:!(r=JV(n,o))||r.enumerable});return t};var S2=(t,n,e)=>(e=t!=null?Fhe($he(t)):{},Vhe(n||!t||!t.__esModule?oy(e,"default",{value:t,enumerable:!0}):e,t));var ws=(t,n,e,r)=>{for(var o=r>1?void 0:r?JV(n,e):n,i=t.length-1,s;i>=0;i--)(s=t[i])&&(o=(r?s(n,e,o):s(o))||o);return r&&o&&oy(n,e,o),o};var z=(t,n,e)=>new Promise((r,o)=>{var i=l=>{try{a(e.next(l))}catch(c){o(c)}},s=l=>{try{a(e.throw(l))}catch(c){o(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);a((e=e.apply(t,n)).next())});var aK=Fo((Sot,sK)=>{"use strict";sK.exports=kr;var Sa=null;try{Sa=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function kr(t,n,e){this.low=t|0,this.high=n|0,this.unsigned=!!e}kr.prototype.__isLong__;Object.defineProperty(kr.prototype,"__isLong__",{value:!0});function Os(t){return(t&&t.__isLong__)===!0}kr.isLong=Os;var Yq={},Qq={};function t0(t,n){var e,r,o;return n?(t>>>=0,(o=0<=t&&t<256)&&(r=Qq[t],r)?r:(e=br(t,(t|0)<0?-1:0,!0),o&&(Qq[t]=e),e)):(t|=0,(o=-128<=t&&t<128)&&(r=Yq[t],r)?r:(e=br(t,t<0?-1:0,!1),o&&(Yq[t]=e),e))}kr.fromInt=t0;function Ma(t,n){if(isNaN(t))return n?e0:Ta;if(n){if(t<0)return e0;if(t>=nK)return iK}else{if(t<=-eK)return Rs;if(t+1>=eK)return oK}return t<0?Ma(-t,n).neg():br(t%Z1|0,t/Z1|0,n)}kr.fromNumber=Ma;function br(t,n,e){return new kr(t,n,e)}kr.fromBits=br;var kM=Math.pow;function IF(t,n,e){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ta;if(typeof n=="number"?(e=n,n=!1):n=!!n,e=e||10,e<2||36<e)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return IF(t.substring(1),n,e).neg();for(var o=Ma(kM(e,8)),i=Ta,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),e);if(a<8){var c=Ma(kM(e,a));i=i.mul(c).add(Ma(l))}else i=i.mul(o),i=i.add(Ma(l))}return i.unsigned=n,i}kr.fromString=IF;function bl(t,n){return typeof t=="number"?Ma(t,n):typeof t=="string"?IF(t,n):br(t.low,t.high,typeof n=="boolean"?n:t.unsigned)}kr.fromValue=bl;var Jq=65536,Dke=1<<24,Z1=Jq*Jq,nK=Z1*Z1,eK=nK/2,tK=t0(Dke),Ta=t0(0);kr.ZERO=Ta;var e0=t0(0,!0);kr.UZERO=e0;var K1=t0(1);kr.ONE=K1;var rK=t0(1,!0);kr.UONE=rK;var EF=t0(-1);kr.NEG_ONE=EF;var oK=br(-1,2147483647,!1);kr.MAX_VALUE=oK;var iK=br(-1,-1,!0);kr.MAX_UNSIGNED_VALUE=iK;var Rs=br(0,-2147483648,!1);kr.MIN_VALUE=Rs;var nt=kr.prototype;nt.toInt=function(){return this.unsigned?this.low>>>0:this.low};nt.toNumber=function(){return this.unsigned?(this.high>>>0)*Z1+(this.low>>>0):this.high*Z1+(this.low>>>0)};nt.toString=function(n){if(n=n||10,n<2||36<n)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Rs)){var e=Ma(n),r=this.div(e),o=r.mul(e).sub(this);return r.toString(n)+o.toInt().toString(n)}else return"-"+this.neg().toString(n);for(var i=Ma(kM(n,6),this.unsigned),s=this,a="";;){var l=s.div(i),c=s.sub(l.mul(i)).toInt()>>>0,u=c.toString(n);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};nt.getHighBits=function(){return this.high};nt.getHighBitsUnsigned=function(){return this.high>>>0};nt.getLowBits=function(){return this.low};nt.getLowBitsUnsigned=function(){return this.low>>>0};nt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Rs)?64:this.neg().getNumBitsAbs();for(var n=this.high!=0?this.high:this.low,e=31;e>0&&(n&1<<e)==0;e--);return this.high!=0?e+33:e+1};nt.isZero=function(){return this.high===0&&this.low===0};nt.eqz=nt.isZero;nt.isNegative=function(){return!this.unsigned&&this.high<0};nt.isPositive=function(){return this.unsigned||this.high>=0};nt.isOdd=function(){return(this.low&1)===1};nt.isEven=function(){return(this.low&1)===0};nt.equals=function(n){return Os(n)||(n=bl(n)),this.unsigned!==n.unsigned&&this.high>>>31===1&&n.high>>>31===1?!1:this.high===n.high&&this.low===n.low};nt.eq=nt.equals;nt.notEquals=function(n){return!this.eq(n)};nt.neq=nt.notEquals;nt.ne=nt.notEquals;nt.lessThan=function(n){return this.comp(n)<0};nt.lt=nt.lessThan;nt.lessThanOrEqual=function(n){return this.comp(n)<=0};nt.lte=nt.lessThanOrEqual;nt.le=nt.lessThanOrEqual;nt.greaterThan=function(n){return this.comp(n)>0};nt.gt=nt.greaterThan;nt.greaterThanOrEqual=function(n){return this.comp(n)>=0};nt.gte=nt.greaterThanOrEqual;nt.ge=nt.greaterThanOrEqual;nt.compare=function(n){if(Os(n)||(n=bl(n)),this.eq(n))return 0;var e=this.isNegative(),r=n.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?n.high>>>0>this.high>>>0||n.high===this.high&&n.low>>>0>this.low>>>0?-1:1:this.sub(n).isNegative()?-1:1};nt.comp=nt.compare;nt.negate=function(){return!this.unsigned&&this.eq(Rs)?Rs:this.not().add(K1)};nt.neg=nt.negate;nt.add=function(n){Os(n)||(n=bl(n));var e=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=n.high>>>16,a=n.high&65535,l=n.low>>>16,c=n.low&65535,u=0,d=0,p=0,h=0;return h+=i+c,p+=h>>>16,h&=65535,p+=o+l,d+=p>>>16,p&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=e+s,u&=65535,br(p<<16|h,u<<16|d,this.unsigned)};nt.subtract=function(n){return Os(n)||(n=bl(n)),this.add(n.neg())};nt.sub=nt.subtract;nt.multiply=function(n){if(this.isZero())return Ta;if(Os(n)||(n=bl(n)),Sa){var e=Sa.mul(this.low,this.high,n.low,n.high);return br(e,Sa.get_high(),this.unsigned)}if(n.isZero())return Ta;if(this.eq(Rs))return n.isOdd()?Rs:Ta;if(n.eq(Rs))return this.isOdd()?Rs:Ta;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(tK)&&n.lt(tK))return Ma(this.toNumber()*n.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=n.high>>>16,l=n.high&65535,c=n.low>>>16,u=n.low&65535,d=0,p=0,h=0,f=0;return f+=s*u,h+=f>>>16,f&=65535,h+=i*u,p+=h>>>16,h&=65535,h+=s*c,p+=h>>>16,h&=65535,p+=o*u,d+=p>>>16,p&=65535,p+=i*c,d+=p>>>16,p&=65535,p+=s*l,d+=p>>>16,p&=65535,d+=r*u+o*c+i*l+s*a,d&=65535,br(h<<16|f,d<<16|p,this.unsigned)};nt.mul=nt.multiply;nt.divide=function(n){if(Os(n)||(n=bl(n)),n.isZero())throw Error("division by zero");if(Sa){if(!this.unsigned&&this.high===-2147483648&&n.low===-1&&n.high===-1)return this;var e=(this.unsigned?Sa.div_u:Sa.div_s)(this.low,this.high,n.low,n.high);return br(e,Sa.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e0:Ta;var r,o,i;if(this.unsigned){if(n.unsigned||(n=n.toUnsigned()),n.gt(this))return e0;if(n.gt(this.shru(1)))return rK;i=e0}else{if(this.eq(Rs)){if(n.eq(K1)||n.eq(EF))return Rs;if(n.eq(Rs))return K1;var s=this.shr(1);return r=s.div(n).shl(1),r.eq(Ta)?n.isNegative()?K1:EF:(o=this.sub(n.mul(r)),i=r.add(o.div(n)),i)}else if(n.eq(Rs))return this.unsigned?e0:Ta;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();i=Ta}for(o=this;o.gte(n);){r=Math.max(1,Math.floor(o.toNumber()/n.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:kM(2,a-48),c=Ma(r),u=c.mul(n);u.isNegative()||u.gt(o);)r-=l,c=Ma(r,this.unsigned),u=c.mul(n);c.isZero()&&(c=K1),i=i.add(c),o=o.sub(u)}return i};nt.div=nt.divide;nt.modulo=function(n){if(Os(n)||(n=bl(n)),Sa){var e=(this.unsigned?Sa.rem_u:Sa.rem_s)(this.low,this.high,n.low,n.high);return br(e,Sa.get_high(),this.unsigned)}return this.sub(this.div(n).mul(n))};nt.mod=nt.modulo;nt.rem=nt.modulo;nt.not=function(){return br(~this.low,~this.high,this.unsigned)};nt.and=function(n){return Os(n)||(n=bl(n)),br(this.low&n.low,this.high&n.high,this.unsigned)};nt.or=function(n){return Os(n)||(n=bl(n)),br(this.low|n.low,this.high|n.high,this.unsigned)};nt.xor=function(n){return Os(n)||(n=bl(n)),br(this.low^n.low,this.high^n.high,this.unsigned)};nt.shiftLeft=function(n){return Os(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?br(this.low<<n,this.high<<n|this.low>>>32-n,this.unsigned):br(0,this.low<<n-32,this.unsigned)};nt.shl=nt.shiftLeft;nt.shiftRight=function(n){return Os(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?br(this.low>>>n|this.high<<32-n,this.high>>n,this.unsigned):br(this.high>>n-32,this.high>=0?0:-1,this.unsigned)};nt.shr=nt.shiftRight;nt.shiftRightUnsigned=function(n){if(Os(n)&&(n=n.toInt()),n&=63,n===0)return this;var e=this.high;if(n<32){var r=this.low;return br(r>>>n|e<<32-n,e>>>n,this.unsigned)}else return n===32?br(e,0,this.unsigned):br(e>>>n-32,0,this.unsigned)};nt.shru=nt.shiftRightUnsigned;nt.shr_u=nt.shiftRightUnsigned;nt.toSigned=function(){return this.unsigned?br(this.low,this.high,!1):this};nt.toUnsigned=function(){return this.unsigned?this:br(this.low,this.high,!0)};nt.toBytes=function(n){return n?this.toBytesLE():this.toBytesBE()};nt.toBytesLE=function(){var n=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,n&255,n>>>8&255,n>>>16&255,n>>>24]};nt.toBytesBE=function(){var n=this.high,e=this.low;return[n>>>24,n>>>16&255,n>>>8&255,n&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};kr.fromBytes=function(n,e,r){return r?kr.fromBytesLE(n,e):kr.fromBytesBE(n,e)};kr.fromBytesLE=function(n,e){return new kr(n[0]|n[1]<<8|n[2]<<16|n[3]<<24,n[4]|n[5]<<8|n[6]<<16|n[7]<<24,e)};kr.fromBytesBE=function(n,e){return new kr(n[4]<<24|n[5]<<16|n[6]<<8|n[7],n[0]<<24|n[1]<<16|n[2]<<8|n[3],e)}});var YK=Fo((rv,XK)=>{"use strict";var Cbe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},l0=Cbe();XK.exports=rv=l0.fetch;l0.fetch&&(rv.default=l0.fetch.bind(l0));rv.Headers=l0.Headers;rv.Request=l0.Request;rv.Response=l0.Response});var QK=Fo(()=>{"use strict"});var uZ=Fo((cZ,S6)=>{"use strict";(function(t,n,e){function r(a){var l=this,c=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function i(a,l){var c=new r(a),u=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}function s(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.alea=i})(cZ,typeof S6=="object"&&S6,typeof define=="function"&&define)});var pZ=Fo((dZ,M6)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xor128=i})(dZ,typeof M6=="object"&&M6,typeof define=="function"&&define)});var fZ=Fo((hZ,T6)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xorwow=i})(hZ,typeof T6=="object"&&T6,typeof define=="function"&&define)});var gZ=Fo((mZ,D6)=>{"use strict";(function(t,n,e){function r(s){var a=this;a.next=function(){var c=a.x,u=a.i,d,p,h;return d=c[u],d^=d>>>7,p=d^d<<24,d=c[u+1&7],p^=d^d>>>10,d=c[u+3&7],p^=d^d>>>3,d=c[u+4&7],p^=d^d<<7,d=c[u+7&7],d=d^d<<13,p^=d^d<<9,c[u]=p,a.i=u+1&7,p};function l(c,u){var d,p,h=[];if(u===(u|0))p=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?p=h[7]=-1:p=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.x&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xorshift7=i})(mZ,typeof D6=="object"&&D6,typeof define=="function"&&define)});var wZ=Fo((vZ,E6)=>{"use strict";(function(t,n,e){function r(s){var a=this;a.next=function(){var c=a.w,u=a.X,d=a.i,p,h;return a.w=c=c+1640531527|0,h=u[d+34&127],p=u[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=u[d]=h^p,a.i=d,h+(c^c>>>16)|0};function l(c,u){var d,p,h,f,m,g=[],v=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,v=Math.max(v,u.length)),h=0,f=-32;f<v;++f)u&&(p^=u.charCodeAt((f+32)%u.length)),f===0&&(m=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,f>=0&&(m=m+1640531527|0,d=g[f&127]^=p+m,h=d==0?h+1:0);for(h>=128&&(g[(u&&u.length||0)&127]=-1),h=127,f=4*128;f>0;--f)p=g[h+34&127],d=g[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,g[h]=p^d;c.w=m,c.X=g,c.i=h}l(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.X&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xor4096=i})(vZ,typeof E6=="object"&&E6,typeof define=="function"&&define)});var xZ=Fo((yZ,I6)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.next=function(){var u=a.b,d=a.c,p=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-p|0,a.d=p<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.tychei=i})(yZ,typeof I6=="object"&&I6,typeof define=="function"&&define)});var _Z=Fo(()=>{"use strict"});var bZ=Fo((kZ,$M)=>{"use strict";(function(t,n,e){var r=256,o=6,i=52,s="random",a=e.pow(r,o),l=e.pow(2,i),c=l*2,u=r-1,d;function p(y,_,k){var M=[];_=_==!0?{entropy:!0}:_||{};var E=g(m(_.entropy?[y,w(n)]:y??v(),3),M),A=new h(M),P=function(){for(var N=A.g(o),B=a,S=0;N<l;)N=(N+S)*r,B*=r,S=A.g(1);for(;N>=c;)N/=2,B/=2,S>>>=1;return(N+S)/B};return P.int32=function(){return A.g(4)|0},P.quick=function(){return A.g(4)/4294967296},P.double=P,g(w(A.S),n),(_.pass||k||function(N,B,S,W){return W&&(W.S&&f(W,A),N.state=function(){return f(A,{})}),S?(e[s]=N,B):N})(P,E,"global"in _?_.global:this==e,_.state)}function h(y){var _,k=y.length,M=this,E=0,A=M.i=M.j=0,P=M.S=[];for(k||(y=[k++]);E<r;)P[E]=E++;for(E=0;E<r;E++)P[E]=P[A=u&A+y[E%k]+(_=P[E])],P[A]=_;(M.g=function(N){for(var B,S=0,W=M.i,ie=M.j,Z=M.S;N--;)B=Z[W=u&W+1],S=S*r+Z[u&(Z[W]=Z[ie=u&ie+B])+(Z[ie]=B)];return M.i=W,M.j=ie,S})(r)}function f(y,_){return _.i=y.i,_.j=y.j,_.S=y.S.slice(),_}function m(y,_){var k=[],M=typeof y,E;if(_&&M=="object")for(E in y)try{k.push(m(y[E],_-1))}catch{}return k.length?k:M=="string"?y:y+"\0"}function g(y,_){for(var k=y+"",M,E=0;E<k.length;)_[u&E]=u&(M^=_[u&E]*19)+k.charCodeAt(E++);return w(_)}function v(){try{var y;return d&&(y=d.randomBytes)?y=y(r):(y=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(y)),w(y)}catch{var _=t.navigator,k=_&&_.plugins;return[+new Date,t,k,t.screen,w(n)]}}function w(y){return String.fromCharCode.apply(0,y)}if(g(e.random(),n),typeof $M=="object"&&$M.exports){$M.exports=p;try{d=_Z()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):e["seed"+s]=p})(typeof self<"u"?self:kZ,[],Math)});var P_=Fo((pwt,CZ)=>{"use strict";var cSe=uZ(),uSe=pZ(),dSe=fZ(),pSe=gZ(),hSe=wZ(),fSe=xZ(),y0=bZ();y0.alea=cSe;y0.xor128=uSe;y0.xorwow=dSe;y0.xorshift7=pSe;y0.xor4096=hSe;y0.tychei=fSe;CZ.exports=y0});var qee=Fo(TD=>{"use strict";TD.byteLength=UAe;TD.toByteArray=WAe;TD.fromByteArray=ZAe;var Au=[],za=[],HAe=typeof Uint8Array<"u"?Uint8Array:Array,RB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(G0=0,Gee=RB.length;G0<Gee;++G0)Au[G0]=RB[G0],za[RB.charCodeAt(G0)]=G0;var G0,Gee;za[45]=62;za[95]=63;function Wee(t){var n=t.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");e===-1&&(e=n);var r=e===n?0:4-e%4;return[e,r]}function UAe(t){var n=Wee(t),e=n[0],r=n[1];return(e+r)*3/4-r}function GAe(t,n,e){return(n+e)*3/4-e}function WAe(t){var n,e=Wee(t),r=e[0],o=e[1],i=new HAe(GAe(t,r,o)),s=0,a=o>0?r-4:r,l;for(l=0;l<a;l+=4)n=za[t.charCodeAt(l)]<<18|za[t.charCodeAt(l+1)]<<12|za[t.charCodeAt(l+2)]<<6|za[t.charCodeAt(l+3)],i[s++]=n>>16&255,i[s++]=n>>8&255,i[s++]=n&255;return o===2&&(n=za[t.charCodeAt(l)]<<2|za[t.charCodeAt(l+1)]>>4,i[s++]=n&255),o===1&&(n=za[t.charCodeAt(l)]<<10|za[t.charCodeAt(l+1)]<<4|za[t.charCodeAt(l+2)]>>2,i[s++]=n>>8&255,i[s++]=n&255),i}function qAe(t){return Au[t>>18&63]+Au[t>>12&63]+Au[t>>6&63]+Au[t&63]}function KAe(t,n,e){for(var r,o=[],i=n;i<e;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(qAe(r));return o.join("")}function ZAe(t){for(var n,e=t.length,r=e%3,o=[],i=16383,s=0,a=e-r;s<a;s+=i)o.push(KAe(t,s,s+i>a?a:s+i));return r===1?(n=t[e-1],o.push(Au[n>>2]+Au[n<<4&63]+"==")):r===2&&(n=(t[e-2]<<8)+t[e-1],o.push(Au[n>>10]+Au[n>>4&63]+Au[n<<2&63]+"=")),o.join("")}});var Kee=Fo(OB=>{"use strict";OB.read=function(t,n,e,r,o){var i,s,a=o*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=e?o-1:0,p=e?-1:1,h=t[n+d];for(d+=p,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=i*256+t[n+d],d+=p,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=s*256+t[n+d],d+=p,u-=8);if(i===0)i=1-c;else{if(i===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-c}return(h?-1:1)*s*Math.pow(2,i-r)};OB.write=function(t,n,e,r,o,i){var s,a,l,c=i*8-o-1,u=(1<<c)-1,d=u>>1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,m=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(a=isNaN(n)?1:0,s=u):(s=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?n+=p/l:n+=p*Math.pow(2,1-d),n*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(n*l-1)*Math.pow(2,o),s=s+d):(a=n*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;t[e+h]=a&255,h+=f,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[e+h]=s&255,h+=f,s/=256,c-=8);t[e+h-f]|=m*128}});var ate=Fo(Ov=>{"use strict";var FB=qee(),Rv=Kee(),Zee=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ov.Buffer=De;Ov.SlowBuffer=tRe;Ov.INSPECT_MAX_BYTES=50;var DD=2147483647;Ov.kMaxLength=DD;De.TYPED_ARRAY_SUPPORT=XAe();!De.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function XAe(){try{var t=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(t,n),t.foo()===42}catch{return!1}}Object.defineProperty(De.prototype,"parent",{enumerable:!0,get:function(){if(De.isBuffer(this))return this.buffer}});Object.defineProperty(De.prototype,"offset",{enumerable:!0,get:function(){if(De.isBuffer(this))return this.byteOffset}});function $p(t){if(t>DD)throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=new Uint8Array(t);return Object.setPrototypeOf(n,De.prototype),n}function De(t,n,e){if(typeof t=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return $B(t)}return Qee(t,n,e)}De.poolSize=8192;function Qee(t,n,e){if(typeof t=="string")return QAe(t,n);if(ArrayBuffer.isView(t))return JAe(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ru(t,ArrayBuffer)||t&&Ru(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ru(t,SharedArrayBuffer)||t&&Ru(t.buffer,SharedArrayBuffer)))return BB(t,n,e);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(r!=null&&r!==t)return De.from(r,n,e);var o=eRe(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return De.from(t[Symbol.toPrimitive]("string"),n,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}De.from=function(t,n,e){return Qee(t,n,e)};Object.setPrototypeOf(De.prototype,Uint8Array.prototype);Object.setPrototypeOf(De,Uint8Array);function Jee(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function YAe(t,n,e){return Jee(t),t<=0?$p(t):n!==void 0?typeof e=="string"?$p(t).fill(n,e):$p(t).fill(n):$p(t)}De.alloc=function(t,n,e){return YAe(t,n,e)};function $B(t){return Jee(t),$p(t<0?0:VB(t)|0)}De.allocUnsafe=function(t){return $B(t)};De.allocUnsafeSlow=function(t){return $B(t)};function QAe(t,n){if((typeof n!="string"||n==="")&&(n="utf8"),!De.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var e=ete(t,n)|0,r=$p(e),o=r.write(t,n);return o!==e&&(r=r.slice(0,o)),r}function PB(t){for(var n=t.length<0?0:VB(t.length)|0,e=$p(n),r=0;r<n;r+=1)e[r]=t[r]&255;return e}function JAe(t){if(Ru(t,Uint8Array)){var n=new Uint8Array(t);return BB(n.buffer,n.byteOffset,n.byteLength)}return PB(t)}function BB(t,n,e){if(n<0||t.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<n+(e||0))throw new RangeError('"length" is outside of buffer bounds');var r;return n===void 0&&e===void 0?r=new Uint8Array(t):e===void 0?r=new Uint8Array(t,n):r=new Uint8Array(t,n,e),Object.setPrototypeOf(r,De.prototype),r}function eRe(t){if(De.isBuffer(t)){var n=VB(t.length)|0,e=$p(n);return e.length===0||t.copy(e,0,0,n),e}if(t.length!==void 0)return typeof t.length!="number"||jB(t.length)?$p(0):PB(t);if(t.type==="Buffer"&&Array.isArray(t.data))return PB(t.data)}function VB(t){if(t>=DD)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+DD.toString(16)+" bytes");return t|0}function tRe(t){return+t!=t&&(t=0),De.alloc(+t)}De.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==De.prototype};De.compare=function(n,e){if(Ru(n,Uint8Array)&&(n=De.from(n,n.offset,n.byteLength)),Ru(e,Uint8Array)&&(e=De.from(e,e.offset,e.byteLength)),!De.isBuffer(n)||!De.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===e)return 0;for(var r=n.length,o=e.length,i=0,s=Math.min(r,o);i<s;++i)if(n[i]!==e[i]){r=n[i],o=e[i];break}return r<o?-1:o<r?1:0};De.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};De.concat=function(n,e){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return De.alloc(0);var r;if(e===void 0)for(e=0,r=0;r<n.length;++r)e+=n[r].length;var o=De.allocUnsafe(e),i=0;for(r=0;r<n.length;++r){var s=n[r];if(Ru(s,Uint8Array))i+s.length>o.length?De.from(s).copy(o,i):Uint8Array.prototype.set.call(o,s,i);else if(De.isBuffer(s))s.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=s.length}return o};function ete(t,n){if(De.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ru(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var e=t.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&e===0)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return LB(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return ste(t).length;default:if(o)return r?-1:LB(t).length;n=(""+n).toLowerCase(),o=!0}}De.byteLength=ete;function nRe(t,n,e){var r=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,n>>>=0,e<=n))return"";for(t||(t="utf8");;)switch(t){case"hex":return pRe(this,n,e);case"utf8":case"utf-8":return nte(this,n,e);case"ascii":return uRe(this,n,e);case"latin1":case"binary":return dRe(this,n,e);case"base64":return lRe(this,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return hRe(this,n,e);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}De.prototype._isBuffer=!0;function W0(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}De.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<n;e+=2)W0(this,e,e+1);return this};De.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<n;e+=4)W0(this,e,e+3),W0(this,e+1,e+2);return this};De.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<n;e+=8)W0(this,e,e+7),W0(this,e+1,e+6),W0(this,e+2,e+5),W0(this,e+3,e+4);return this};De.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?nte(this,0,n):nRe.apply(this,arguments)};De.prototype.toLocaleString=De.prototype.toString;De.prototype.equals=function(n){if(!De.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:De.compare(this,n)===0};De.prototype.inspect=function(){var n="",e=Ov.INSPECT_MAX_BYTES;return n=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(n+=" ... "),"<Buffer "+n+">"};Zee&&(De.prototype[Zee]=De.prototype.inspect);De.prototype.compare=function(n,e,r,o,i){if(Ru(n,Uint8Array)&&(n=De.from(n,n.offset,n.byteLength)),!De.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(e===void 0&&(e=0),r===void 0&&(r=n?n.length:0),o===void 0&&(o=0),i===void 0&&(i=this.length),e<0||r>n.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&e>=r)return 0;if(o>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,o>>>=0,i>>>=0,this===n)return 0;for(var s=i-o,a=r-e,l=Math.min(s,a),c=this.slice(o,i),u=n.slice(e,r),d=0;d<l;++d)if(c[d]!==u[d]){s=c[d],a=u[d];break}return s<a?-1:a<s?1:0};function tte(t,n,e,r,o){if(t.length===0)return-1;if(typeof e=="string"?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,jB(e)&&(e=o?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(o)return-1;e=t.length-1}else if(e<0)if(o)e=0;else return-1;if(typeof n=="string"&&(n=De.from(n,r)),De.isBuffer(n))return n.length===0?-1:Xee(t,n,e,r,o);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,n,e):Uint8Array.prototype.lastIndexOf.call(t,n,e):Xee(t,[n],e,r,o);throw new TypeError("val must be string, number or Buffer")}function Xee(t,n,e,r,o){var i=1,s=t.length,a=n.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||n.length<2)return-1;i=2,s/=2,a/=2,e/=2}function l(h,f){return i===1?h[f]:h.readUInt16BE(f*i)}var c;if(o){var u=-1;for(c=e;c<s;c++)if(l(t,c)===l(n,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===a)return u*i}else u!==-1&&(c-=c-u),u=-1}else for(e+a>s&&(e=s-a),c=e;c>=0;c--){for(var d=!0,p=0;p<a;p++)if(l(t,c+p)!==l(n,p)){d=!1;break}if(d)return c}return-1}De.prototype.includes=function(n,e,r){return this.indexOf(n,e,r)!==-1};De.prototype.indexOf=function(n,e,r){return tte(this,n,e,r,!0)};De.prototype.lastIndexOf=function(n,e,r){return tte(this,n,e,r,!1)};function rRe(t,n,e,r){e=Number(e)||0;var o=t.length-e;r?(r=Number(r),r>o&&(r=o)):r=o;var i=n.length;r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(n.substr(s*2,2),16);if(jB(a))return s;t[e+s]=a}return s}function oRe(t,n,e,r){return ED(LB(n,t.length-e),t,e,r)}function iRe(t,n,e,r){return ED(gRe(n),t,e,r)}function sRe(t,n,e,r){return ED(ste(n),t,e,r)}function aRe(t,n,e,r){return ED(vRe(n,t.length-e),t,e,r)}De.prototype.write=function(n,e,r,o){if(e===void 0)o="utf8",r=this.length,e=0;else if(r===void 0&&typeof e=="string")o=e,r=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(r)?(r=r>>>0,o===void 0&&(o="utf8")):(o=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-e;if((r===void 0||r>i)&&(r=i),n.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return rRe(this,n,e,r);case"utf8":case"utf-8":return oRe(this,n,e,r);case"ascii":case"latin1":case"binary":return iRe(this,n,e,r);case"base64":return sRe(this,n,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return aRe(this,n,e,r);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};De.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lRe(t,n,e){return n===0&&e===t.length?FB.fromByteArray(t):FB.fromByteArray(t.slice(n,e))}function nte(t,n,e){e=Math.min(t.length,e);for(var r=[],o=n;o<e;){var i=t[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=e){var l,c,u,d;switch(a){case 1:i<128&&(s=i);break;case 2:l=t[o+1],(l&192)===128&&(d=(i&31)<<6|l&63,d>127&&(s=d));break;case 3:l=t[o+1],c=t[o+2],(l&192)===128&&(c&192)===128&&(d=(i&15)<<12|(l&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:l=t[o+1],c=t[o+2],u=t[o+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(d=(i&15)<<18|(l&63)<<12|(c&63)<<6|u&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),o+=a}return cRe(r)}var Yee=4096;function cRe(t){var n=t.length;if(n<=Yee)return String.fromCharCode.apply(String,t);for(var e="",r=0;r<n;)e+=String.fromCharCode.apply(String,t.slice(r,r+=Yee));return e}function uRe(t,n,e){var r="";e=Math.min(t.length,e);for(var o=n;o<e;++o)r+=String.fromCharCode(t[o]&127);return r}function dRe(t,n,e){var r="";e=Math.min(t.length,e);for(var o=n;o<e;++o)r+=String.fromCharCode(t[o]);return r}function pRe(t,n,e){var r=t.length;(!n||n<0)&&(n=0),(!e||e<0||e>r)&&(e=r);for(var o="",i=n;i<e;++i)o+=wRe[t[i]];return o}function hRe(t,n,e){for(var r=t.slice(n,e),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+r[i+1]*256);return o}De.prototype.slice=function(n,e){var r=this.length;n=~~n,e=e===void 0?r:~~e,n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<n&&(e=n);var o=this.subarray(n,e);return Object.setPrototypeOf(o,De.prototype),o};function hi(t,n,e){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+n>e)throw new RangeError("Trying to access beyond buffer length")}De.prototype.readUintLE=De.prototype.readUIntLE=function(n,e,r){n=n>>>0,e=e>>>0,r||hi(n,e,this.length);for(var o=this[n],i=1,s=0;++s<e&&(i*=256);)o+=this[n+s]*i;return o};De.prototype.readUintBE=De.prototype.readUIntBE=function(n,e,r){n=n>>>0,e=e>>>0,r||hi(n,e,this.length);for(var o=this[n+--e],i=1;e>0&&(i*=256);)o+=this[n+--e]*i;return o};De.prototype.readUint8=De.prototype.readUInt8=function(n,e){return n=n>>>0,e||hi(n,1,this.length),this[n]};De.prototype.readUint16LE=De.prototype.readUInt16LE=function(n,e){return n=n>>>0,e||hi(n,2,this.length),this[n]|this[n+1]<<8};De.prototype.readUint16BE=De.prototype.readUInt16BE=function(n,e){return n=n>>>0,e||hi(n,2,this.length),this[n]<<8|this[n+1]};De.prototype.readUint32LE=De.prototype.readUInt32LE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216};De.prototype.readUint32BE=De.prototype.readUInt32BE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])};De.prototype.readIntLE=function(n,e,r){n=n>>>0,e=e>>>0,r||hi(n,e,this.length);for(var o=this[n],i=1,s=0;++s<e&&(i*=256);)o+=this[n+s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o};De.prototype.readIntBE=function(n,e,r){n=n>>>0,e=e>>>0,r||hi(n,e,this.length);for(var o=e,i=1,s=this[n+--o];o>0&&(i*=256);)s+=this[n+--o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s};De.prototype.readInt8=function(n,e){return n=n>>>0,e||hi(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]};De.prototype.readInt16LE=function(n,e){n=n>>>0,e||hi(n,2,this.length);var r=this[n]|this[n+1]<<8;return r&32768?r|4294901760:r};De.prototype.readInt16BE=function(n,e){n=n>>>0,e||hi(n,2,this.length);var r=this[n+1]|this[n]<<8;return r&32768?r|4294901760:r};De.prototype.readInt32LE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24};De.prototype.readInt32BE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]};De.prototype.readFloatLE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),Rv.read(this,n,!0,23,4)};De.prototype.readFloatBE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),Rv.read(this,n,!1,23,4)};De.prototype.readDoubleLE=function(n,e){return n=n>>>0,e||hi(n,8,this.length),Rv.read(this,n,!0,52,8)};De.prototype.readDoubleBE=function(n,e){return n=n>>>0,e||hi(n,8,this.length),Rv.read(this,n,!1,52,8)};function Ls(t,n,e,r,o,i){if(!De.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<i)throw new RangeError('"value" argument is out of bounds');if(e+r>t.length)throw new RangeError("Index out of range")}De.prototype.writeUintLE=De.prototype.writeUIntLE=function(n,e,r,o){if(n=+n,e=e>>>0,r=r>>>0,!o){var i=Math.pow(2,8*r)-1;Ls(this,n,e,r,i,0)}var s=1,a=0;for(this[e]=n&255;++a<r&&(s*=256);)this[e+a]=n/s&255;return e+r};De.prototype.writeUintBE=De.prototype.writeUIntBE=function(n,e,r,o){if(n=+n,e=e>>>0,r=r>>>0,!o){var i=Math.pow(2,8*r)-1;Ls(this,n,e,r,i,0)}var s=r-1,a=1;for(this[e+s]=n&255;--s>=0&&(a*=256);)this[e+s]=n/a&255;return e+r};De.prototype.writeUint8=De.prototype.writeUInt8=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,1,255,0),this[e]=n&255,e+1};De.prototype.writeUint16LE=De.prototype.writeUInt16LE=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,2,65535,0),this[e]=n&255,this[e+1]=n>>>8,e+2};De.prototype.writeUint16BE=De.prototype.writeUInt16BE=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,2,65535,0),this[e]=n>>>8,this[e+1]=n&255,e+2};De.prototype.writeUint32LE=De.prototype.writeUInt32LE=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,4,4294967295,0),this[e+3]=n>>>24,this[e+2]=n>>>16,this[e+1]=n>>>8,this[e]=n&255,e+4};De.prototype.writeUint32BE=De.prototype.writeUInt32BE=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,4,4294967295,0),this[e]=n>>>24,this[e+1]=n>>>16,this[e+2]=n>>>8,this[e+3]=n&255,e+4};De.prototype.writeIntLE=function(n,e,r,o){if(n=+n,e=e>>>0,!o){var i=Math.pow(2,8*r-1);Ls(this,n,e,r,i-1,-i)}var s=0,a=1,l=0;for(this[e]=n&255;++s<r&&(a*=256);)n<0&&l===0&&this[e+s-1]!==0&&(l=1),this[e+s]=(n/a>>0)-l&255;return e+r};De.prototype.writeIntBE=function(n,e,r,o){if(n=+n,e=e>>>0,!o){var i=Math.pow(2,8*r-1);Ls(this,n,e,r,i-1,-i)}var s=r-1,a=1,l=0;for(this[e+s]=n&255;--s>=0&&(a*=256);)n<0&&l===0&&this[e+s+1]!==0&&(l=1),this[e+s]=(n/a>>0)-l&255;return e+r};De.prototype.writeInt8=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,1,127,-128),n<0&&(n=255+n+1),this[e]=n&255,e+1};De.prototype.writeInt16LE=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,2,32767,-32768),this[e]=n&255,this[e+1]=n>>>8,e+2};De.prototype.writeInt16BE=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,2,32767,-32768),this[e]=n>>>8,this[e+1]=n&255,e+2};De.prototype.writeInt32LE=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,4,2147483647,-2147483648),this[e]=n&255,this[e+1]=n>>>8,this[e+2]=n>>>16,this[e+3]=n>>>24,e+4};De.prototype.writeInt32BE=function(n,e,r){return n=+n,e=e>>>0,r||Ls(this,n,e,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[e]=n>>>24,this[e+1]=n>>>16,this[e+2]=n>>>8,this[e+3]=n&255,e+4};function rte(t,n,e,r,o,i){if(e+r>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function ote(t,n,e,r,o){return n=+n,e=e>>>0,o||rte(t,n,e,4,34028234663852886e22,-34028234663852886e22),Rv.write(t,n,e,r,23,4),e+4}De.prototype.writeFloatLE=function(n,e,r){return ote(this,n,e,!0,r)};De.prototype.writeFloatBE=function(n,e,r){return ote(this,n,e,!1,r)};function ite(t,n,e,r,o){return n=+n,e=e>>>0,o||rte(t,n,e,8,17976931348623157e292,-17976931348623157e292),Rv.write(t,n,e,r,52,8),e+8}De.prototype.writeDoubleLE=function(n,e,r){return ite(this,n,e,!0,r)};De.prototype.writeDoubleBE=function(n,e,r){return ite(this,n,e,!1,r)};De.prototype.copy=function(n,e,r,o){if(!De.isBuffer(n))throw new TypeError("argument should be a Buffer");if(r||(r=0),!o&&o!==0&&(o=this.length),e>=n.length&&(e=n.length),e||(e=0),o>0&&o<r&&(o=r),o===r||n.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),n.length-e<o-r&&(o=n.length-e+r);var i=o-r;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,r,o):Uint8Array.prototype.set.call(n,this.subarray(r,o),e),i};De.prototype.fill=function(n,e,r,o){if(typeof n=="string"){if(typeof e=="string"?(o=e,e=0,r=this.length):typeof r=="string"&&(o=r,r=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!De.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(n.length===1){var i=n.charCodeAt(0);(o==="utf8"&&i<128||o==="latin1")&&(n=i)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e=e>>>0,r=r===void 0?this.length:r>>>0,n||(n=0);var s;if(typeof n=="number")for(s=e;s<r;++s)this[s]=n;else{var a=De.isBuffer(n)?n:De.from(n,o),l=a.length;if(l===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=a[s%l]}return this};var fRe=/[^+/0-9A-Za-z-_]/g;function mRe(t){if(t=t.split("=")[0],t=t.trim().replace(fRe,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function LB(t,n){n=n||1/0;for(var e,r=t.length,o=null,i=[],s=0;s<r;++s){if(e=t.charCodeAt(s),e>55295&&e<57344){if(!o){if(e>56319){(n-=3)>-1&&i.push(239,191,189);continue}else if(s+1===r){(n-=3)>-1&&i.push(239,191,189);continue}o=e;continue}if(e<56320){(n-=3)>-1&&i.push(239,191,189),o=e;continue}e=(o-55296<<10|e-56320)+65536}else o&&(n-=3)>-1&&i.push(239,191,189);if(o=null,e<128){if((n-=1)<0)break;i.push(e)}else if(e<2048){if((n-=2)<0)break;i.push(e>>6|192,e&63|128)}else if(e<65536){if((n-=3)<0)break;i.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((n-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return i}function gRe(t){for(var n=[],e=0;e<t.length;++e)n.push(t.charCodeAt(e)&255);return n}function vRe(t,n){for(var e,r,o,i=[],s=0;s<t.length&&!((n-=2)<0);++s)e=t.charCodeAt(s),r=e>>8,o=e%256,i.push(o),i.push(r);return i}function ste(t){return FB.toByteArray(mRe(t))}function ED(t,n,e,r){for(var o=0;o<r&&!(o+e>=n.length||o>=t.length);++o)n[o+e]=t[o];return o}function Ru(t,n){return t instanceof n||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===n.name}function jB(t){return t!==t}var wRe=function(){for(var t="0123456789abcdef",n=new Array(256),e=0;e<16;++e)for(var r=e*16,o=0;o<16;++o)n[r+o]=t[e]+t[o];return n}()});var ute=Fo((zB,cte)=>{"use strict";var ID=ate(),Ou=ID.Buffer;function lte(t,n){for(var e in t)n[e]=t[e]}Ou.from&&Ou.alloc&&Ou.allocUnsafe&&Ou.allocUnsafeSlow?cte.exports=ID:(lte(ID,zB),zB.Buffer=q0);function q0(t,n,e){return Ou(t,n,e)}q0.prototype=Object.create(Ou.prototype);lte(Ou,q0);q0.from=function(t,n,e){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ou(t,n,e)};q0.alloc=function(t,n,e){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=Ou(t);return n!==void 0?typeof e=="string"?r.fill(n,e):r.fill(n):r.fill(0),r};q0.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ou(t)};q0.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ID.SlowBuffer(t)}});var GB=Fo(pte=>{"use strict";var UB=ute().Buffer,dte=UB.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function yRe(t){if(!t)return"utf8";for(var n;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(n)return;t=(""+t).toLowerCase(),n=!0}}function xRe(t){var n=yRe(t);if(typeof n!="string"&&(UB.isEncoding===dte||!dte(t)))throw new Error("Unknown encoding: "+t);return n||t}pte.StringDecoder=Ck;function Ck(t){this.encoding=xRe(t);var n;switch(this.encoding){case"utf16le":this.text=MRe,this.end=TRe,n=4;break;case"utf8":this.fillLast=bRe,n=4;break;case"base64":this.text=DRe,this.end=ERe,n=3;break;default:this.write=IRe,this.end=NRe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=UB.allocUnsafe(n)}Ck.prototype.write=function(t){if(t.length===0)return"";var n,e;if(this.lastNeed){if(n=this.fillLast(t),n===void 0)return"";e=this.lastNeed,this.lastNeed=0}else e=0;return e<t.length?n?n+this.text(t,e):this.text(t,e):n||""};Ck.prototype.end=SRe;Ck.prototype.text=CRe;Ck.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function HB(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function _Re(t,n,e){var r=n.length-1;if(r<e)return 0;var o=HB(n[r]);return o>=0?(o>0&&(t.lastNeed=o-1),o):--r<e||o===-2?0:(o=HB(n[r]),o>=0?(o>0&&(t.lastNeed=o-2),o):--r<e||o===-2?0:(o=HB(n[r]),o>=0?(o>0&&(o===2?o=0:t.lastNeed=o-3),o):0))}function kRe(t,n,e){if((n[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&n.length>1){if((n[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&n.length>2&&(n[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function bRe(t){var n=this.lastTotal-this.lastNeed,e=kRe(this,t,n);if(e!==void 0)return e;if(this.lastNeed<=t.length)return t.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,n,0,t.length),this.lastNeed-=t.length}function CRe(t,n){var e=_Re(this,t,n);if(!this.lastNeed)return t.toString("utf8",n);this.lastTotal=e;var r=t.length-(e-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",n,r)}function SRe(t){var n=t&&t.length?this.write(t):"";return this.lastNeed?n+"\uFFFD":n}function MRe(t,n){if((t.length-n)%2===0){var e=t.toString("utf16le",n);if(e){var r=e.charCodeAt(e.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",n,t.length-1)}function TRe(t){var n=t&&t.length?this.write(t):"";if(this.lastNeed){var e=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,e)}return n}function DRe(t,n){var e=(t.length-n)%3;return e===0?t.toString("base64",n):(this.lastNeed=3-e,this.lastTotal=3,e===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",n,t.length-e))}function ERe(t){var n=t&&t.length?this.write(t):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function IRe(t){return t.toString(this.encoding)}function NRe(t){return t&&t.length?this.write(t):""}});var Dte=Fo(()=>{"use strict"});var tue=Fo((eue,c$)=>{"use strict";(function(t){typeof eue=="object"&&typeof c$<"u"?c$.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=t()})(function(){return function t(n,e,r){function o(a,l){if(!e[a]){if(!n[a]){var c=typeof iy=="function"&&iy;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=e[a]={exports:{}};n[a][0].call(d.exports,function(p){var h=n[a][1][p];return o(h||p)},d,d.exports,t,n,e,r)}return e[a].exports}for(var i=typeof iy=="function"&&iy,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n,e){"use strict";var r=t("./utils"),o=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var a,l,c,u,d,p,h,f=[],m=0,g=s.length,v=g,w=r.getTypeOf(s)!=="string";m<s.length;)v=g-m,c=w?(a=s[m++],l=m<g?s[m++]:0,m<g?s[m++]:0):(a=s.charCodeAt(m++),l=m<g?s.charCodeAt(m++):0,m<g?s.charCodeAt(m++):0),u=a>>2,d=(3&a)<<4|l>>4,p=1<v?(15&l)<<2|c>>6:64,h=2<v?63&c:64,f.push(i.charAt(u)+i.charAt(d)+i.charAt(p)+i.charAt(h));return f.join("")},e.decode=function(s){var a,l,c,u,d,p,h=0,f=0,m="data:";if(s.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var g,v=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&v--,s.charAt(s.length-2)===i.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=o.uint8array?new Uint8Array(0|v):new Array(0|v);h<s.length;)a=i.indexOf(s.charAt(h++))<<2|(u=i.indexOf(s.charAt(h++)))>>4,l=(15&u)<<4|(d=i.indexOf(s.charAt(h++)))>>2,c=(3&d)<<6|(p=i.indexOf(s.charAt(h++))),g[f++]=a,d!==64&&(g[f++]=l),p!==64&&(g[f++]=c);return g}},{"./support":30,"./utils":32}],2:[function(t,n,e){"use strict";var r=t("./external"),o=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(l,c,u,d,p){this.compressedSize=l,this.uncompressedSize=c,this.crc32=u,this.compression=d,this.compressedContent=p}a.prototype={getContentWorker:function(){var l=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),c=this;return l.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,c,u){return l.pipe(new i).pipe(new s("uncompressedSize")).pipe(c.compressWorker(u)).pipe(new s("compressedSize")).withStreamInfo("compression",c)},n.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,e){"use strict";var r=t("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},e.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,e){"use strict";var r=t("./utils"),o=function(){for(var i,s=[],a=0;a<256;a++){i=a;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;s[a]=i}return s}();n.exports=function(i,s){return i!==void 0&&i.length?r.getTypeOf(i)!=="string"?function(a,l,c,u){var d=o,p=u+c;a^=-1;for(var h=u;h<p;h++)a=a>>>8^d[255&(a^l[h])];return-1^a}(0|s,i,i.length,0):function(a,l,c,u){var d=o,p=u+c;a^=-1;for(var h=u;h<p;h++)a=a>>>8^d[255&(a^l.charCodeAt(h))];return-1^a}(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(t,n,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(t,n,e){"use strict";var r=null;r=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:r}},{lie:37}],7:[function(t,n,e){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),i=t("./utils"),s=t("./stream/GenericWorker"),a=r?"uint8array":"array";function l(c,u){s.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=u,this.meta={}}e.magic="\b\0",i.inherits(l,s),l.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(a,c.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(u){c.push({data:u,meta:c.meta})}},e.compressWorker=function(c){return new l("Deflate",c)},e.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,e){"use strict";function r(d,p){var h,f="";for(h=0;h<p;h++)f+=String.fromCharCode(255&d),d>>>=8;return f}function o(d,p,h,f,m,g){var v,w,y=d.file,_=d.compression,k=g!==a.utf8encode,M=i.transformTo("string",g(y.name)),E=i.transformTo("string",a.utf8encode(y.name)),A=y.comment,P=i.transformTo("string",g(A)),N=i.transformTo("string",a.utf8encode(A)),B=E.length!==y.name.length,S=N.length!==A.length,W="",ie="",Z="",X=y.dir,G=y.date,H={crc32:0,compressedSize:0,uncompressedSize:0};p&&!h||(H.crc32=d.crc32,H.compressedSize=d.compressedSize,H.uncompressedSize=d.uncompressedSize);var V=0;p&&(V|=8),k||!B&&!S||(V|=2048);var K=0,pe=0;X&&(K|=16),m==="UNIX"?(pe=798,K|=function(se,ye){var Ae=se;return se||(Ae=ye?16893:33204),(65535&Ae)<<16}(y.unixPermissions,X)):(pe=20,K|=function(se){return 63&(se||0)}(y.dosPermissions)),v=G.getUTCHours(),v<<=6,v|=G.getUTCMinutes(),v<<=5,v|=G.getUTCSeconds()/2,w=G.getUTCFullYear()-1980,w<<=4,w|=G.getUTCMonth()+1,w<<=5,w|=G.getUTCDate(),B&&(ie=r(1,1)+r(l(M),4)+E,W+="up"+r(ie.length,2)+ie),S&&(Z=r(1,1)+r(l(P),4)+N,W+="uc"+r(Z.length,2)+Z);var le="";return le+=`
\0`,le+=r(V,2),le+=_.magic,le+=r(v,2),le+=r(w,2),le+=r(H.crc32,4),le+=r(H.compressedSize,4),le+=r(H.uncompressedSize,4),le+=r(M.length,2),le+=r(W.length,2),{fileRecord:c.LOCAL_FILE_HEADER+le+M+W,dirRecord:c.CENTRAL_FILE_HEADER+r(pe,2)+le+r(P.length,2)+"\0\0\0\0"+r(K,4)+r(f,4)+M+W+P}}var i=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),l=t("../crc32"),c=t("../signature");function u(d,p,h,f){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=h,this.encodeFileName=f,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,s),u.prototype.push=function(d){var p=d.meta.percent||0,h=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,s.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:h?(p+100*(h-f-1))/h:100}}))},u.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var h=o(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,h=o(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),p)this.push({data:function(f){return c.DATA_DESCRIPTOR+r(f.crc32,4)+r(f.compressedSize,4)+r(f.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var h=this.bytesWritten-d,f=function(m,g,v,w,y){var _=i.transformTo("string",y(w));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(m,2)+r(m,2)+r(g,4)+r(v,4)+r(_.length,2)+_}(this.dirRecords.length,h,d,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(h){p.processChunk(h)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(h){p.error(h)}),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(d){var p=this._sources;if(!s.prototype.error.call(this,d))return!1;for(var h=0;h<p.length;h++)try{p[h].error(d)}catch{}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},n.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,e){"use strict";var r=t("../compressions"),o=t("./ZipFileWorker");e.generateWorker=function(i,s,a){var l=new o(s.streamFiles,a,s.platform,s.encodeFileName),c=0;try{i.forEach(function(u,d){c++;var p=function(g,v){var w=g||v,y=r[w];if(!y)throw new Error(w+" is not a valid compression method !");return y}(d.options.compression,s.compression),h=d.options.compressionOptions||s.compressionOptions||{},f=d.dir,m=d.date;d._compressWorker(p,h).withStreamInfo("file",{name:u,dir:f,date:m,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=c}catch(u){l.error(u)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,e){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var i in this)typeof this[i]!="function"&&(o[i]=this[i]);return o}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(o,i){return new r().loadAsync(o,i)},r.external=t("./external"),n.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,e){"use strict";var r=t("./utils"),o=t("./external"),i=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function c(u){return new o.Promise(function(d,p){var h=u.decompressed.getContentWorker().pipe(new a);h.on("error",function(f){p(f)}).on("end",function(){h.streamInfo.crc32!==u.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(u,d){var p=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(u)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",u,!0,d.optimizedBinaryString,d.base64).then(function(h){var f=new s(d);return f.load(h),f}).then(function(h){var f=[o.Promise.resolve(h)],m=h.files;if(d.checkCRC32)for(var g=0;g<m.length;g++)f.push(c(m[g]));return o.Promise.all(f)}).then(function(h){for(var f=h.shift(),m=f.files,g=0;g<m.length;g++){var v=m[g],w=v.fileNameStr,y=r.resolve(v.fileNameStr);p.file(y,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:d.createFolders}),v.dir||(p.file(y).unsafeOriginalName=w)}return f.zipComment.length&&(p.comment=f.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,e){"use strict";var r=t("../utils"),o=t("../stream/GenericWorker");function i(s,a){o.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}r.inherits(i,o),i.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,e){"use strict";var r=t("readable-stream").Readable;function o(i,s,a){r.call(this,s),this._helper=i;var l=this;i.on("data",function(c,u){l.push(c)||l._helper.pause(),a&&a(u)}).on("error",function(c){l.emit("error",c)}).on("end",function(){l.push(null)})}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,e){"use strict";n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,n,e){"use strict";function r(y,_,k){var M,E=i.getTypeOf(_),A=i.extend(k||{},l);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(y=m(y)),A.createFolders&&(M=f(y))&&g.call(this,M,!0);var P=E==="string"&&A.binary===!1&&A.base64===!1;k&&k.binary!==void 0||(A.binary=!P),(_ instanceof c&&_.uncompressedSize===0||A.dir||!_||_.length===0)&&(A.base64=!1,A.binary=!0,_="",A.compression="STORE",E="string");var N=null;N=_ instanceof c||_ instanceof s?_:p.isNode&&p.isStream(_)?new h(y,_):i.prepareContent(y,_,A.binary,A.optimizedBinaryString,A.base64);var B=new u(y,N,A);this.files[y]=B}var o=t("./utf8"),i=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),l=t("./defaults"),c=t("./compressedObject"),u=t("./zipObject"),d=t("./generate"),p=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),f=function(y){y.slice(-1)==="/"&&(y=y.substring(0,y.length-1));var _=y.lastIndexOf("/");return 0<_?y.substring(0,_):""},m=function(y){return y.slice(-1)!=="/"&&(y+="/"),y},g=function(y,_){return _=_!==void 0?_:l.createFolders,y=m(y),this.files[y]||r.call(this,y,null,{dir:!0,createFolders:_}),this.files[y]};function v(y){return Object.prototype.toString.call(y)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(y){var _,k,M;for(_ in this.files)M=this.files[_],(k=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&y(k,M)},filter:function(y){var _=[];return this.forEach(function(k,M){y(k,M)&&_.push(M)}),_},file:function(y,_,k){if(arguments.length!==1)return y=this.root+y,r.call(this,y,_,k),this;if(v(y)){var M=y;return this.filter(function(A,P){return!P.dir&&M.test(A)})}var E=this.files[this.root+y];return E&&!E.dir?E:null},folder:function(y){if(!y)return this;if(v(y))return this.filter(function(E,A){return A.dir&&y.test(E)});var _=this.root+y,k=g.call(this,_),M=this.clone();return M.root=k.name,M},remove:function(y){y=this.root+y;var _=this.files[y];if(_||(y.slice(-1)!=="/"&&(y+="/"),_=this.files[y]),_&&!_.dir)delete this.files[y];else for(var k=this.filter(function(E,A){return A.name.slice(0,y.length)===y}),M=0;M<k.length;M++)delete this.files[k[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(y){var _,k={};try{if((k=i.extend(y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");i.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var M=k.comment||this.comment||"";_=d.generateWorker(this,k,M)}catch(E){(_=new s("error")).error(E)}return new a(_,k.type||"string",k.mimeType)},generateAsync:function(y,_){return this.generateInternalStream(y).accumulate(_)},generateNodeStream:function(y,_){return(y=y||{}).type||(y.type="nodebuffer"),this.generateInternalStream(y).toNodejsStream(_)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,e){"use strict";n.exports=t("stream")},{stream:void 0}],17:[function(t,n,e){"use strict";var r=t("./DataReader");function o(i){r.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}t("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data[this.zero+i]},o.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),c=i.charCodeAt(3),u=this.length-4;0<=u;--u)if(this.data[u]===s&&this.data[u+1]===a&&this.data[u+2]===l&&this.data[u+3]===c)return u-this.zero;return-1},o.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),c=i.charCodeAt(3),u=this.readData(4);return s===u[0]&&a===u[1]&&l===u[2]&&c===u[3]},o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,e){"use strict";var r=t("../utils");function o(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,a=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=i,a},readString:function(i){return r.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,e){"use strict";var r=t("./Uint8ArrayReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,e){"use strict";var r=t("./DataReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},o.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},o.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,e){"use strict";var r=t("./ArrayReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,e){"use strict";var r=t("../utils"),o=t("../support"),i=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");n.exports=function(c){var u=r.getTypeOf(c);return r.checkSupport(u),u!=="string"||o.uint8array?u==="nodebuffer"?new a(c):o.uint8array?new l(r.transformTo("uint8array",c)):new i(r.transformTo("array",c)):new s(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,e){"use strict";var r=t("./GenericWorker"),o=t("../utils");function i(s){r.call(this,"ConvertWorker to "+s),this.destType=s}o.inherits(i,r),i.prototype.processChunk=function(s){this.push({data:o.transformTo(this.destType,s.data),meta:s.meta})},n.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,e){"use strict";var r=t("./GenericWorker"),o=t("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,r),i.prototype.processChunk=function(s){this.streamInfo.crc32=o(s.data,this.streamInfo.crc32||0),this.push(s)},n.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./GenericWorker");function i(s){o.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}r.inherits(i,o),i.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}o.prototype.processChunk.call(this,s)},n.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./GenericWorker");function i(s){o.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=r.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,e){"use strict";function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,i){return this._listeners[o].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,i){if(this._listeners[o])for(var s=0;s<this._listeners[o].length;s++)this._listeners[o][s].call(this,i)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var i=this;return o.on("data",function(s){i.processChunk(s)}),o.on("end",function(){i.end()}),o.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,i){return this.extraStreamInfo[o]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=r},{}],29:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./ConvertWorker"),i=t("./GenericWorker"),s=t("../base64"),a=t("../support"),l=t("../external"),c=null;if(a.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function u(p,h){return new l.Promise(function(f,m){var g=[],v=p._internalType,w=p._outputType,y=p._mimeType;p.on("data",function(_,k){g.push(_),h&&h(k)}).on("error",function(_){g=[],m(_)}).on("end",function(){try{var _=function(k,M,E){switch(k){case"blob":return r.newBlob(r.transformTo("arraybuffer",M),E);case"base64":return s.encode(M);default:return r.transformTo(k,M)}}(w,function(k,M){var E,A=0,P=null,N=0;for(E=0;E<M.length;E++)N+=M[E].length;switch(k){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(P=new Uint8Array(N),E=0;E<M.length;E++)P.set(M[E],A),A+=M[E].length;return P;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+k+"'")}}(v,g),y);f(_)}catch(k){m(k)}g=[]}).resume()})}function d(p,h,f){var m=h;switch(h){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=h,this._mimeType=f,r.checkSupport(m),this._worker=p.pipe(new o(m)),p.lock()}catch(g){this._worker=new i("error"),this._worker.error(g)}}d.prototype={accumulate:function(p){return u(this,p)},on:function(p,h){var f=this;return p==="data"?this._worker.on(p,function(m){h.call(f,m.data,m.meta)}):this._worker.on(p,function(){r.delay(h,arguments,f)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{var r=new ArrayBuffer(0);try{e.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),e.blob=o.getBlob("application/zip").size===0}catch{e.blob=!1}}}try{e.nodestream=!!t("readable-stream").Readable}catch{e.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,e){"use strict";for(var r=t("./utils"),o=t("./support"),i=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}e.utf8encode=function(d){return o.nodebuffer?i.newBufferFrom(d,"utf-8"):function(p){var h,f,m,g,v,w=p.length,y=0;for(g=0;g<w;g++)(64512&(f=p.charCodeAt(g)))==55296&&g+1<w&&(64512&(m=p.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),g++),y+=f<128?1:f<2048?2:f<65536?3:4;for(h=o.uint8array?new Uint8Array(y):new Array(y),g=v=0;v<y;g++)(64512&(f=p.charCodeAt(g)))==55296&&g+1<w&&(64512&(m=p.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),g++),f<128?h[v++]=f:(f<2048?h[v++]=192|f>>>6:(f<65536?h[v++]=224|f>>>12:(h[v++]=240|f>>>18,h[v++]=128|f>>>12&63),h[v++]=128|f>>>6&63),h[v++]=128|63&f);return h}(d)},e.utf8decode=function(d){return o.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):function(p){var h,f,m,g,v=p.length,w=new Array(2*v);for(h=f=0;h<v;)if((m=p[h++])<128)w[f++]=m;else if(4<(g=a[m]))w[f++]=65533,h+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&h<v;)m=m<<6|63&p[h++],g--;1<g?w[f++]=65533:m<65536?w[f++]=m:(m-=65536,w[f++]=55296|m>>10&1023,w[f++]=56320|1023&m)}return w.length!==f&&(w.subarray?w=w.subarray(0,f):w.length=f),r.applyFromCharCode(w)}(d=r.transformTo(o.uint8array?"uint8array":"array",d))},r.inherits(c,s),c.prototype.processChunk=function(d){var p=r.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var h=p;(p=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),p.set(h,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var f=function(g,v){var w;for((v=v||g.length)>g.length&&(v=g.length),w=v-1;0<=w&&(192&g[w])==128;)w--;return w<0||w===0?v:w+a[g[w]]>v?w:v}(p),m=p;f!==p.length&&(o.uint8array?(m=p.subarray(0,f),this.leftOver=p.subarray(f,p.length)):(m=p.slice(0,f),this.leftOver=p.slice(f,p.length))),this.push({data:e.utf8decode(m),meta:d.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=c,r.inherits(u,s),u.prototype.processChunk=function(d){this.push({data:e.utf8encode(d.data),meta:d.meta})},e.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,e){"use strict";var r=t("./support"),o=t("./base64"),i=t("./nodejsUtils"),s=t("./external");function a(h){return h}function l(h,f){for(var m=0;m<h.length;++m)f[m]=255&h.charCodeAt(m);return f}t("setimmediate"),e.newBlob=function(h,f){e.checkSupport("blob");try{return new Blob([h],{type:f})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(h),m.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(h,f,m){var g=[],v=0,w=h.length;if(w<=m)return String.fromCharCode.apply(null,h);for(;v<w;)f==="array"||f==="nodebuffer"?g.push(String.fromCharCode.apply(null,h.slice(v,Math.min(v+m,w)))):g.push(String.fromCharCode.apply(null,h.subarray(v,Math.min(v+m,w)))),v+=m;return g.join("")},stringifyByChar:function(h){for(var f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);return f},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function u(h){var f=65536,m=e.getTypeOf(h),g=!0;if(m==="uint8array"?g=c.applyCanBeUsed.uint8array:m==="nodebuffer"&&(g=c.applyCanBeUsed.nodebuffer),g)for(;1<f;)try{return c.stringifyByChunk(h,m,f)}catch{f=Math.floor(f/2)}return c.stringifyByChar(h)}function d(h,f){for(var m=0;m<h.length;m++)f[m]=h[m];return f}e.applyFromCharCode=u;var p={};p.string={string:a,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return p.string.uint8array(h).buffer},uint8array:function(h){return l(h,new Uint8Array(h.length))},nodebuffer:function(h){return l(h,i.allocBuffer(h.length))}},p.array={string:u,array:a,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(h)}},p.arraybuffer={string:function(h){return u(new Uint8Array(h))},array:function(h){return d(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:a,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(new Uint8Array(h))}},p.uint8array={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:a,nodebuffer:function(h){return i.newBufferFrom(h)}},p.nodebuffer={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return p.nodebuffer.uint8array(h).buffer},uint8array:function(h){return d(h,new Uint8Array(h.length))},nodebuffer:a},e.transformTo=function(h,f){if(f=f||"",!h)return f;e.checkSupport(h);var m=e.getTypeOf(f);return p[m][h](f)},e.resolve=function(h){for(var f=h.split("/"),m=[],g=0;g<f.length;g++){var v=f[g];v==="."||v===""&&g!==0&&g!==f.length-1||(v===".."?m.pop():m.push(v))}return m.join("/")},e.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":r.nodebuffer&&i.isBuffer(h)?"nodebuffer":r.uint8array&&h instanceof Uint8Array?"uint8array":r.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(h){if(!r[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(h){var f,m,g="";for(m=0;m<(h||"").length;m++)g+="\\x"+((f=h.charCodeAt(m))<16?"0":"")+f.toString(16).toUpperCase();return g},e.delay=function(h,f,m){setImmediate(function(){h.apply(m||null,f||[])})},e.inherits=function(h,f){function m(){}m.prototype=f.prototype,h.prototype=new m},e.extend=function(){var h,f,m={};for(h=0;h<arguments.length;h++)for(f in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],f)&&m[f]===void 0&&(m[f]=arguments[h][f]);return m},e.prepareContent=function(h,f,m,g,v){return s.Promise.resolve(f).then(function(w){return r.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new s.Promise(function(y,_){var k=new FileReader;k.onload=function(M){y(M.target.result)},k.onerror=function(M){_(M.target.error)},k.readAsArrayBuffer(w)}):w}).then(function(w){var y=e.getTypeOf(w);return y?(y==="arraybuffer"?w=e.transformTo("uint8array",w):y==="string"&&(v?w=o.decode(w):m&&g!==!0&&(w=function(_){return l(_,r.uint8array?new Uint8Array(_.length):new Array(_.length))}(w))),w):s.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,e){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./signature"),s=t("./zipEntry"),a=t("./support");function l(c){this.files=[],this.loadOptions=c}l.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var u=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(u)+", expected "+o.pretty(c)+")")}},isSignature:function(c,u){var d=this.reader.index;this.reader.setIndex(c);var p=this.reader.readString(4)===u;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),u=a.uint8array?"uint8array":"array",d=o.transformTo(u,c);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,u,d,p=this.zip64EndOfCentralSize-44;0<p;)c=this.reader.readInt(2),u=this.reader.readInt(4),d=this.reader.readData(u),this.zip64ExtensibleData[c]={id:c,length:u,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,u;for(c=0;c<this.files.length;c++)u=this.files[c],this.reader.setIndex(u.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),u.readLocalPart(this.reader),u.handleUTF8(),u.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(c=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var u=c;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=u-d;if(0<p)this.isSignature(u,i.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(c){this.reader=r(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,e){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),l=t("./compressions"),c=t("./support");function u(d,p){this.options=d,this.loadOptions=p}u.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,h;if(d.skip(22),this.fileNameLength=d.readInt(2),h=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(f){for(var m in l)if(Object.prototype.hasOwnProperty.call(l,m)&&l[m].magic===f)return l[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,h,f,m=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<m;)p=d.readInt(2),h=d.readInt(2),f=d.readData(h),this.extraFields[p]={id:p,length:h,value:f};d.setIndex(m)},handleUTF8:function(){var d=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var h=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var m=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=r(d.value);return p.readInt(1)!==1||s(this.fileName)!==p.readInt(4)?null:a.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=r(d.value);return p.readInt(1)!==1||s(this.fileComment)!==p.readInt(4)?null:a.utf8decode(p.readData(d.length-5))}return null}},n.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,e){"use strict";function r(p,h,f){this.name=p,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=h,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var o=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),l=t("./stream/GenericWorker");r.prototype={internalStream:function(p){var h=null,f="string";try{if(!p)throw new Error("No output type specified.");var m=(f=p.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),h=this._decompressWorker();var g=!this._dataBinary;g&&!m&&(h=h.pipe(new s.Utf8EncodeWorker)),!g&&m&&(h=h.pipe(new s.Utf8DecodeWorker))}catch(v){(h=new l("error")).error(v)}return new o(h,f,"")},async:function(p,h){return this.internalStream(p).accumulate(h)},nodeStream:function(p,h){return this.internalStream(p||"nodebuffer").toNodejsStream(h)},_compressWorker:function(p,h){if(this._data instanceof a&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(f,p,h)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;n.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,e){(function(r){"use strict";var o,i,s=r.MutationObserver||r.WebKitMutationObserver;if(s){var a=0,l=new s(p),c=r.document.createTextNode("");l.observe(c,{characterData:!0}),o=function(){c.data=a=++a%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var h=r.document.createElement("script");h.onreadystatechange=function(){p(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},r.document.documentElement.appendChild(h)}:function(){setTimeout(p,0)};else{var u=new r.MessageChannel;u.port1.onmessage=p,o=function(){u.port2.postMessage(0)}}var d=[];function p(){var h,f;i=!0;for(var m=d.length;m;){for(f=d,d=[],h=-1;++h<m;)f[h]();m=d.length}i=!1}n.exports=function(h){d.push(h)!==1||i||o()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,e){"use strict";var r=t("immediate");function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,m!==o&&h(this,m)}function u(m,g,v){this.promise=m,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function d(m,g,v){r(function(){var w;try{w=g(v)}catch(y){return i.reject(m,y)}w===m?i.reject(m,new TypeError("Cannot resolve promise with itself")):i.resolve(m,w)})}function p(m){var g=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof g=="function")return function(){g.apply(m,arguments)}}function h(m,g){var v=!1;function w(k){v||(v=!0,i.reject(m,k))}function y(k){v||(v=!0,i.resolve(m,k))}var _=f(function(){g(y,w)});_.status==="error"&&w(_.value)}function f(m,g){var v={};try{v.value=m(g),v.status="success"}catch(w){v.status="error",v.value=w}return v}(n.exports=c).prototype.finally=function(m){if(typeof m!="function")return this;var g=this.constructor;return this.then(function(v){return g.resolve(m()).then(function(){return v})},function(v){return g.resolve(m()).then(function(){throw v})})},c.prototype.catch=function(m){return this.then(null,m)},c.prototype.then=function(m,g){if(typeof m!="function"&&this.state===a||typeof g!="function"&&this.state===s)return this;var v=new this.constructor(o);return this.state!==l?d(v,this.state===a?m:g,this.outcome):this.queue.push(new u(v,m,g)),v},u.prototype.callFulfilled=function(m){i.resolve(this.promise,m)},u.prototype.otherCallFulfilled=function(m){d(this.promise,this.onFulfilled,m)},u.prototype.callRejected=function(m){i.reject(this.promise,m)},u.prototype.otherCallRejected=function(m){d(this.promise,this.onRejected,m)},i.resolve=function(m,g){var v=f(p,g);if(v.status==="error")return i.reject(m,v.value);var w=v.value;if(w)h(m,w);else{m.state=a,m.outcome=g;for(var y=-1,_=m.queue.length;++y<_;)m.queue[y].callFulfilled(g)}return m},i.reject=function(m,g){m.state=s,m.outcome=g;for(var v=-1,w=m.queue.length;++v<w;)m.queue[v].callRejected(g);return m},c.resolve=function(m){return m instanceof this?m:i.resolve(new this(o),m)},c.reject=function(m){var g=new this(o);return i.reject(g,m)},c.all=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,w=!1;if(!v)return this.resolve([]);for(var y=new Array(v),_=0,k=-1,M=new this(o);++k<v;)E(m[k],k);return M;function E(A,P){g.resolve(A).then(function(N){y[P]=N,++_!==v||w||(w=!0,i.resolve(M,y))},function(N){w||(w=!0,i.reject(M,N))})}},c.race=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,w=!1;if(!v)return this.resolve([]);for(var y=-1,_=new this(o);++y<v;)k=m[y],g.resolve(k).then(function(M){w||(w=!0,i.resolve(_,M))},function(M){w||(w=!0,i.reject(_,M))});var k;return _}},{immediate:36}],38:[function(t,n,e){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,e){"use strict";var r=t("./zlib/deflate"),o=t("./utils/common"),i=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,p=8;function h(m){if(!(this instanceof h))return new h(m);this.options=o.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},m||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var v=r.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(v!==c)throw new Error(s[v]);if(g.header&&r.deflateSetHeader(this.strm,g.header),g.dictionary){var w;if(w=typeof g.dictionary=="string"?i.string2buf(g.dictionary):l.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(v=r.deflateSetDictionary(this.strm,w))!==c)throw new Error(s[v]);this._dict_set=!0}}function f(m,g){var v=new h(g);if(v.push(m,!0),v.err)throw v.msg||s[v.err];return v.result}h.prototype.push=function(m,g){var v,w,y=this.strm,_=this.options.chunkSize;if(this.ended)return!1;w=g===~~g?g:g===!0?4:0,typeof m=="string"?y.input=i.string2buf(m):l.call(m)==="[object ArrayBuffer]"?y.input=new Uint8Array(m):y.input=m,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new o.Buf8(_),y.next_out=0,y.avail_out=_),(v=r.deflate(y,w))!==1&&v!==c)return this.onEnd(v),!(this.ended=!0);y.avail_out!==0&&(y.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(o.shrinkBuf(y.output,y.next_out))):this.onData(o.shrinkBuf(y.output,y.next_out)))}while((0<y.avail_in||y.avail_out===0)&&v!==1);return w===4?(v=r.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c):w!==2||(this.onEnd(c),!(y.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},e.Deflate=h,e.deflate=f,e.deflateRaw=function(m,g){return(g=g||{}).raw=!0,f(m,g)},e.gzip=function(m,g){return(g=g||{}).gzip=!0,f(m,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,e){"use strict";var r=t("./zlib/inflate"),o=t("./utils/common"),i=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),l=t("./zlib/zstream"),c=t("./zlib/gzheader"),u=Object.prototype.toString;function d(h){if(!(this instanceof d))return new d(h);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},h||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||h&&h.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var m=r.inflateInit2(this.strm,f.windowBits);if(m!==s.Z_OK)throw new Error(a[m]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(h,f){var m=new d(f);if(m.push(h,!0),m.err)throw m.msg||a[m.err];return m.result}d.prototype.push=function(h,f){var m,g,v,w,y,_,k=this.strm,M=this.options.chunkSize,E=this.options.dictionary,A=!1;if(this.ended)return!1;g=f===~~f?f:f===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof h=="string"?k.input=i.binstring2buf(h):u.call(h)==="[object ArrayBuffer]"?k.input=new Uint8Array(h):k.input=h,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(M),k.next_out=0,k.avail_out=M),(m=r.inflate(k,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&E&&(_=typeof E=="string"?i.string2buf(E):u.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,m=r.inflateSetDictionary(this.strm,_)),m===s.Z_BUF_ERROR&&A===!0&&(m=s.Z_OK,A=!1),m!==s.Z_STREAM_END&&m!==s.Z_OK)return this.onEnd(m),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&m!==s.Z_STREAM_END&&(k.avail_in!==0||g!==s.Z_FINISH&&g!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=i.utf8border(k.output,k.next_out),w=k.next_out-v,y=i.buf2string(k.output,v),k.next_out=w,k.avail_out=M-w,w&&o.arraySet(k.output,k.output,v,w,0),this.onData(y)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(A=!0)}while((0<k.avail_in||k.avail_out===0)&&m!==s.Z_STREAM_END);return m===s.Z_STREAM_END&&(g=s.Z_FINISH),g===s.Z_FINISH?(m=r.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===s.Z_OK):g!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(k.avail_out=0))},d.prototype.onData=function(h){this.chunks.push(h)},d.prototype.onEnd=function(h){h===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},e.Inflate=d,e.inflate=p,e.inflateRaw=function(h,f){return(f=f||{}).raw=!0,p(h,f)},e.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,e){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])}}return s},e.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var o={arraySet:function(s,a,l,c,u){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+c),u);else for(var d=0;d<c;d++)s[u+d]=a[l+d]},flattenChunks:function(s){var a,l,c,u,d,p;for(a=c=0,l=s.length;a<l;a++)c+=s[a].length;for(p=new Uint8Array(c),a=u=0,l=s.length;a<l;a++)d=s[a],p.set(d,u),u+=d.length;return p}},i={arraySet:function(s,a,l,c,u){for(var d=0;d<c;d++)s[u+d]=a[l+d]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)},{}],42:[function(t,n,e){"use strict";var r=t("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(c,u){if(u<65537&&(c.subarray&&i||!c.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(c,u));for(var d="",p=0;p<u;p++)d+=String.fromCharCode(c[p]);return d}s[254]=s[254]=1,e.string2buf=function(c){var u,d,p,h,f,m=c.length,g=0;for(h=0;h<m;h++)(64512&(d=c.charCodeAt(h)))==55296&&h+1<m&&(64512&(p=c.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),h++),g+=d<128?1:d<2048?2:d<65536?3:4;for(u=new r.Buf8(g),h=f=0;f<g;h++)(64512&(d=c.charCodeAt(h)))==55296&&h+1<m&&(64512&(p=c.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),h++),d<128?u[f++]=d:(d<2048?u[f++]=192|d>>>6:(d<65536?u[f++]=224|d>>>12:(u[f++]=240|d>>>18,u[f++]=128|d>>>12&63),u[f++]=128|d>>>6&63),u[f++]=128|63&d);return u},e.buf2binstring=function(c){return l(c,c.length)},e.binstring2buf=function(c){for(var u=new r.Buf8(c.length),d=0,p=u.length;d<p;d++)u[d]=c.charCodeAt(d);return u},e.buf2string=function(c,u){var d,p,h,f,m=u||c.length,g=new Array(2*m);for(d=p=0;d<m;)if((h=c[d++])<128)g[p++]=h;else if(4<(f=s[h]))g[p++]=65533,d+=f-1;else{for(h&=f===2?31:f===3?15:7;1<f&&d<m;)h=h<<6|63&c[d++],f--;1<f?g[p++]=65533:h<65536?g[p++]=h:(h-=65536,g[p++]=55296|h>>10&1023,g[p++]=56320|1023&h)}return l(g,p)},e.utf8border=function(c,u){var d;for((u=u||c.length)>c.length&&(u=c.length),d=u-1;0<=d&&(192&c[d])==128;)d--;return d<0||d===0?u:d+s[c[d]]>u?d:u}},{"./common":41}],43:[function(t,n,e){"use strict";n.exports=function(r,o,i,s){for(var a=65535&r|0,l=r>>>16&65535|0,c=0;i!==0;){for(i-=c=2e3<i?2e3:i;l=l+(a=a+o[s++]|0)|0,--c;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(t,n,e){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,e){"use strict";var r=function(){for(var o,i=[],s=0;s<256;s++){o=s;for(var a=0;a<8;a++)o=1&o?3988292384^o>>>1:o>>>1;i[s]=o}return i}();n.exports=function(o,i,s,a){var l=r,c=a+s;o^=-1;for(var u=a;u<c;u++)o=o>>>8^l[255&(o^i[u])];return-1^o}},{}],46:[function(t,n,e){"use strict";var r,o=t("../utils/common"),i=t("./trees"),s=t("./adler32"),a=t("./crc32"),l=t("./messages"),c=0,u=4,d=0,p=-2,h=-1,f=4,m=2,g=8,v=9,w=286,y=30,_=19,k=2*w+1,M=15,E=3,A=258,P=A+E+1,N=42,B=113,S=1,W=2,ie=3,Z=4;function X(T,we){return T.msg=l[we],we}function G(T){return(T<<1)-(4<T?9:0)}function H(T){for(var we=T.length;0<=--we;)T[we]=0}function V(T){var we=T.state,he=we.pending;he>T.avail_out&&(he=T.avail_out),he!==0&&(o.arraySet(T.output,we.pending_buf,we.pending_out,he,T.next_out),T.next_out+=he,we.pending_out+=he,T.total_out+=he,T.avail_out-=he,we.pending-=he,we.pending===0&&(we.pending_out=0))}function K(T,we){i._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,we),T.block_start=T.strstart,V(T.strm)}function pe(T,we){T.pending_buf[T.pending++]=we}function le(T,we){T.pending_buf[T.pending++]=we>>>8&255,T.pending_buf[T.pending++]=255&we}function se(T,we){var he,q,j=T.max_chain_length,oe=T.strstart,xe=T.prev_length,Fe=T.nice_match,ce=T.strstart>T.w_size-P?T.strstart-(T.w_size-P):0,Ue=T.window,tt=T.w_mask,Ke=T.prev,mt=T.strstart+A,kn=Ue[oe+xe-1],ln=Ue[oe+xe];T.prev_length>=T.good_match&&(j>>=2),Fe>T.lookahead&&(Fe=T.lookahead);do if(Ue[(he=we)+xe]===ln&&Ue[he+xe-1]===kn&&Ue[he]===Ue[oe]&&Ue[++he]===Ue[oe+1]){oe+=2,he++;do;while(Ue[++oe]===Ue[++he]&&Ue[++oe]===Ue[++he]&&Ue[++oe]===Ue[++he]&&Ue[++oe]===Ue[++he]&&Ue[++oe]===Ue[++he]&&Ue[++oe]===Ue[++he]&&Ue[++oe]===Ue[++he]&&Ue[++oe]===Ue[++he]&&oe<mt);if(q=A-(mt-oe),oe=mt-A,xe<q){if(T.match_start=we,Fe<=(xe=q))break;kn=Ue[oe+xe-1],ln=Ue[oe+xe]}}while((we=Ke[we&tt])>ce&&--j!=0);return xe<=T.lookahead?xe:T.lookahead}function ye(T){var we,he,q,j,oe,xe,Fe,ce,Ue,tt,Ke=T.w_size;do{if(j=T.window_size-T.lookahead-T.strstart,T.strstart>=Ke+(Ke-P)){for(o.arraySet(T.window,T.window,Ke,Ke,0),T.match_start-=Ke,T.strstart-=Ke,T.block_start-=Ke,we=he=T.hash_size;q=T.head[--we],T.head[we]=Ke<=q?q-Ke:0,--he;);for(we=he=Ke;q=T.prev[--we],T.prev[we]=Ke<=q?q-Ke:0,--he;);j+=Ke}if(T.strm.avail_in===0)break;if(xe=T.strm,Fe=T.window,ce=T.strstart+T.lookahead,Ue=j,tt=void 0,tt=xe.avail_in,Ue<tt&&(tt=Ue),he=tt===0?0:(xe.avail_in-=tt,o.arraySet(Fe,xe.input,xe.next_in,tt,ce),xe.state.wrap===1?xe.adler=s(xe.adler,Fe,tt,ce):xe.state.wrap===2&&(xe.adler=a(xe.adler,Fe,tt,ce)),xe.next_in+=tt,xe.total_in+=tt,tt),T.lookahead+=he,T.lookahead+T.insert>=E)for(oe=T.strstart-T.insert,T.ins_h=T.window[oe],T.ins_h=(T.ins_h<<T.hash_shift^T.window[oe+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[oe+E-1])&T.hash_mask,T.prev[oe&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=oe,oe++,T.insert--,!(T.lookahead+T.insert<E)););}while(T.lookahead<P&&T.strm.avail_in!==0)}function Ae(T,we){for(var he,q;;){if(T.lookahead<P){if(ye(T),T.lookahead<P&&we===c)return S;if(T.lookahead===0)break}if(he=0,T.lookahead>=E&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+E-1])&T.hash_mask,he=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),he!==0&&T.strstart-he<=T.w_size-P&&(T.match_length=se(T,he)),T.match_length>=E)if(q=i._tr_tally(T,T.strstart-T.match_start,T.match_length-E),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=E){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+E-1])&T.hash_mask,he=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else q=i._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(q&&(K(T,!1),T.strm.avail_out===0))return S}return T.insert=T.strstart<E-1?T.strstart:E-1,we===u?(K(T,!0),T.strm.avail_out===0?ie:Z):T.last_lit&&(K(T,!1),T.strm.avail_out===0)?S:W}function Re(T,we){for(var he,q,j;;){if(T.lookahead<P){if(ye(T),T.lookahead<P&&we===c)return S;if(T.lookahead===0)break}if(he=0,T.lookahead>=E&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+E-1])&T.hash_mask,he=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=E-1,he!==0&&T.prev_length<T.max_lazy_match&&T.strstart-he<=T.w_size-P&&(T.match_length=se(T,he),T.match_length<=5&&(T.strategy===1||T.match_length===E&&4096<T.strstart-T.match_start)&&(T.match_length=E-1)),T.prev_length>=E&&T.match_length<=T.prev_length){for(j=T.strstart+T.lookahead-E,q=i._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-E),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=j&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+E-1])&T.hash_mask,he=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=E-1,T.strstart++,q&&(K(T,!1),T.strm.avail_out===0))return S}else if(T.match_available){if((q=i._tr_tally(T,0,T.window[T.strstart-1]))&&K(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return S}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(q=i._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<E-1?T.strstart:E-1,we===u?(K(T,!0),T.strm.avail_out===0?ie:Z):T.last_lit&&(K(T,!1),T.strm.avail_out===0)?S:W}function Ce(T,we,he,q,j){this.good_length=T,this.max_lazy=we,this.nice_length=he,this.max_chain=q,this.func=j}function Je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*y+1)),this.bl_tree=new o.Buf16(2*(2*_+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(M+1),this.heap=new o.Buf16(2*w+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qe(T){var we;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=m,(we=T.state).pending=0,we.pending_out=0,we.wrap<0&&(we.wrap=-we.wrap),we.status=we.wrap?N:B,T.adler=we.wrap===2?0:1,we.last_flush=c,i._tr_init(we),d):X(T,p)}function xt(T){var we=qe(T);return we===d&&function(he){he.window_size=2*he.w_size,H(he.head),he.max_lazy_match=r[he.level].max_lazy,he.good_match=r[he.level].good_length,he.nice_match=r[he.level].nice_length,he.max_chain_length=r[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=E-1,he.match_available=0,he.ins_h=0}(T.state),we}function bt(T,we,he,q,j,oe){if(!T)return p;var xe=1;if(we===h&&(we=6),q<0?(xe=0,q=-q):15<q&&(xe=2,q-=16),j<1||v<j||he!==g||q<8||15<q||we<0||9<we||oe<0||f<oe)return X(T,p);q===8&&(q=9);var Fe=new Je;return(T.state=Fe).strm=T,Fe.wrap=xe,Fe.gzhead=null,Fe.w_bits=q,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=j+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+E-1)/E),Fe.window=new o.Buf8(2*Fe.w_size),Fe.head=new o.Buf16(Fe.hash_size),Fe.prev=new o.Buf16(Fe.w_size),Fe.lit_bufsize=1<<j+6,Fe.pending_buf_size=4*Fe.lit_bufsize,Fe.pending_buf=new o.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=we,Fe.strategy=oe,Fe.method=he,xt(T)}r=[new Ce(0,0,0,0,function(T,we){var he=65535;for(he>T.pending_buf_size-5&&(he=T.pending_buf_size-5);;){if(T.lookahead<=1){if(ye(T),T.lookahead===0&&we===c)return S;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var q=T.block_start+he;if((T.strstart===0||T.strstart>=q)&&(T.lookahead=T.strstart-q,T.strstart=q,K(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-P&&(K(T,!1),T.strm.avail_out===0))return S}return T.insert=0,we===u?(K(T,!0),T.strm.avail_out===0?ie:Z):(T.strstart>T.block_start&&(K(T,!1),T.strm.avail_out),S)}),new Ce(4,4,8,4,Ae),new Ce(4,5,16,8,Ae),new Ce(4,6,32,32,Ae),new Ce(4,4,16,16,Re),new Ce(8,16,32,32,Re),new Ce(8,16,128,128,Re),new Ce(8,32,128,256,Re),new Ce(32,128,258,1024,Re),new Ce(32,258,258,4096,Re)],e.deflateInit=function(T,we){return bt(T,we,g,15,8,0)},e.deflateInit2=bt,e.deflateReset=xt,e.deflateResetKeep=qe,e.deflateSetHeader=function(T,we){return T&&T.state?T.state.wrap!==2?p:(T.state.gzhead=we,d):p},e.deflate=function(T,we){var he,q,j,oe;if(!T||!T.state||5<we||we<0)return T?X(T,p):p;if(q=T.state,!T.output||!T.input&&T.avail_in!==0||q.status===666&&we!==u)return X(T,T.avail_out===0?-5:p);if(q.strm=T,he=q.last_flush,q.last_flush=we,q.status===N)if(q.wrap===2)T.adler=0,pe(q,31),pe(q,139),pe(q,8),q.gzhead?(pe(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),pe(q,255&q.gzhead.time),pe(q,q.gzhead.time>>8&255),pe(q,q.gzhead.time>>16&255),pe(q,q.gzhead.time>>24&255),pe(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),pe(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(pe(q,255&q.gzhead.extra.length),pe(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(T.adler=a(T.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(pe(q,0),pe(q,0),pe(q,0),pe(q,0),pe(q,0),pe(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),pe(q,3),q.status=B);else{var xe=g+(q.w_bits-8<<4)<<8;xe|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(xe|=32),xe+=31-xe%31,q.status=B,le(q,xe),q.strstart!==0&&(le(q,T.adler>>>16),le(q,65535&T.adler)),T.adler=1}if(q.status===69)if(q.gzhead.extra){for(j=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),V(T),j=q.pending,q.pending!==q.pending_buf_size));)pe(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){j=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),V(T),j=q.pending,q.pending===q.pending_buf_size)){oe=1;break}oe=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,pe(q,oe)}while(oe!==0);q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),oe===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){j=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),V(T),j=q.pending,q.pending===q.pending_buf_size)){oe=1;break}oe=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,pe(q,oe)}while(oe!==0);q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),oe===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&V(T),q.pending+2<=q.pending_buf_size&&(pe(q,255&T.adler),pe(q,T.adler>>8&255),T.adler=0,q.status=B)):q.status=B),q.pending!==0){if(V(T),T.avail_out===0)return q.last_flush=-1,d}else if(T.avail_in===0&&G(we)<=G(he)&&we!==u)return X(T,-5);if(q.status===666&&T.avail_in!==0)return X(T,-5);if(T.avail_in!==0||q.lookahead!==0||we!==c&&q.status!==666){var Fe=q.strategy===2?function(ce,Ue){for(var tt;;){if(ce.lookahead===0&&(ye(ce),ce.lookahead===0)){if(Ue===c)return S;break}if(ce.match_length=0,tt=i._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,tt&&(K(ce,!1),ce.strm.avail_out===0))return S}return ce.insert=0,Ue===u?(K(ce,!0),ce.strm.avail_out===0?ie:Z):ce.last_lit&&(K(ce,!1),ce.strm.avail_out===0)?S:W}(q,we):q.strategy===3?function(ce,Ue){for(var tt,Ke,mt,kn,ln=ce.window;;){if(ce.lookahead<=A){if(ye(ce),ce.lookahead<=A&&Ue===c)return S;if(ce.lookahead===0)break}if(ce.match_length=0,ce.lookahead>=E&&0<ce.strstart&&(Ke=ln[mt=ce.strstart-1])===ln[++mt]&&Ke===ln[++mt]&&Ke===ln[++mt]){kn=ce.strstart+A;do;while(Ke===ln[++mt]&&Ke===ln[++mt]&&Ke===ln[++mt]&&Ke===ln[++mt]&&Ke===ln[++mt]&&Ke===ln[++mt]&&Ke===ln[++mt]&&Ke===ln[++mt]&&mt<kn);ce.match_length=A-(kn-mt),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=E?(tt=i._tr_tally(ce,1,ce.match_length-E),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(tt=i._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),tt&&(K(ce,!1),ce.strm.avail_out===0))return S}return ce.insert=0,Ue===u?(K(ce,!0),ce.strm.avail_out===0?ie:Z):ce.last_lit&&(K(ce,!1),ce.strm.avail_out===0)?S:W}(q,we):r[q.level].func(q,we);if(Fe!==ie&&Fe!==Z||(q.status=666),Fe===S||Fe===ie)return T.avail_out===0&&(q.last_flush=-1),d;if(Fe===W&&(we===1?i._tr_align(q):we!==5&&(i._tr_stored_block(q,0,0,!1),we===3&&(H(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),V(T),T.avail_out===0))return q.last_flush=-1,d}return we!==u?d:q.wrap<=0?1:(q.wrap===2?(pe(q,255&T.adler),pe(q,T.adler>>8&255),pe(q,T.adler>>16&255),pe(q,T.adler>>24&255),pe(q,255&T.total_in),pe(q,T.total_in>>8&255),pe(q,T.total_in>>16&255),pe(q,T.total_in>>24&255)):(le(q,T.adler>>>16),le(q,65535&T.adler)),V(T),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?d:1)},e.deflateEnd=function(T){var we;return T&&T.state?(we=T.state.status)!==N&&we!==69&&we!==73&&we!==91&&we!==103&&we!==B&&we!==666?X(T,p):(T.state=null,we===B?X(T,-3):d):p},e.deflateSetDictionary=function(T,we){var he,q,j,oe,xe,Fe,ce,Ue,tt=we.length;if(!T||!T.state||(oe=(he=T.state).wrap)===2||oe===1&&he.status!==N||he.lookahead)return p;for(oe===1&&(T.adler=s(T.adler,we,tt,0)),he.wrap=0,tt>=he.w_size&&(oe===0&&(H(he.head),he.strstart=0,he.block_start=0,he.insert=0),Ue=new o.Buf8(he.w_size),o.arraySet(Ue,we,tt-he.w_size,he.w_size,0),we=Ue,tt=he.w_size),xe=T.avail_in,Fe=T.next_in,ce=T.input,T.avail_in=tt,T.next_in=0,T.input=we,ye(he);he.lookahead>=E;){for(q=he.strstart,j=he.lookahead-(E-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[q+E-1])&he.hash_mask,he.prev[q&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=q,q++,--j;);he.strstart=q,he.lookahead=E-1,ye(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=E-1,he.match_available=0,T.next_in=Fe,T.input=ce,T.avail_in=xe,he.wrap=oe,d},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,e){"use strict";n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,e){"use strict";n.exports=function(r,o){var i,s,a,l,c,u,d,p,h,f,m,g,v,w,y,_,k,M,E,A,P,N,B,S,W;i=r.state,s=r.next_in,S=r.input,a=s+(r.avail_in-5),l=r.next_out,W=r.output,c=l-(o-r.avail_out),u=l+(r.avail_out-257),d=i.dmax,p=i.wsize,h=i.whave,f=i.wnext,m=i.window,g=i.hold,v=i.bits,w=i.lencode,y=i.distcode,_=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{v<15&&(g+=S[s++]<<v,v+=8,g+=S[s++]<<v,v+=8),M=w[g&_];t:for(;;){if(g>>>=E=M>>>24,v-=E,(E=M>>>16&255)===0)W[l++]=65535&M;else{if(!(16&E)){if((64&E)==0){M=w[(65535&M)+(g&(1<<E)-1)];continue t}if(32&E){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}A=65535&M,(E&=15)&&(v<E&&(g+=S[s++]<<v,v+=8),A+=g&(1<<E)-1,g>>>=E,v-=E),v<15&&(g+=S[s++]<<v,v+=8,g+=S[s++]<<v,v+=8),M=y[g&k];n:for(;;){if(g>>>=E=M>>>24,v-=E,!(16&(E=M>>>16&255))){if((64&E)==0){M=y[(65535&M)+(g&(1<<E)-1)];continue n}r.msg="invalid distance code",i.mode=30;break e}if(P=65535&M,v<(E&=15)&&(g+=S[s++]<<v,(v+=8)<E&&(g+=S[s++]<<v,v+=8)),d<(P+=g&(1<<E)-1)){r.msg="invalid distance too far back",i.mode=30;break e}if(g>>>=E,v-=E,(E=l-c)<P){if(h<(E=P-E)&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(B=m,(N=0)===f){if(N+=p-E,E<A){for(A-=E;W[l++]=m[N++],--E;);N=l-P,B=W}}else if(f<E){if(N+=p+f-E,(E-=f)<A){for(A-=E;W[l++]=m[N++],--E;);if(N=0,f<A){for(A-=E=f;W[l++]=m[N++],--E;);N=l-P,B=W}}}else if(N+=f-E,E<A){for(A-=E;W[l++]=m[N++],--E;);N=l-P,B=W}for(;2<A;)W[l++]=B[N++],W[l++]=B[N++],W[l++]=B[N++],A-=3;A&&(W[l++]=B[N++],1<A&&(W[l++]=B[N++]))}else{for(N=l-P;W[l++]=W[N++],W[l++]=W[N++],W[l++]=W[N++],2<(A-=3););A&&(W[l++]=W[N++],1<A&&(W[l++]=W[N++]))}break}}break}}while(s<a&&l<u);s-=A=v>>3,g&=(1<<(v-=A<<3))-1,r.next_in=s,r.next_out=l,r.avail_in=s<a?a-s+5:5-(s-a),r.avail_out=l<u?u-l+257:257-(l-u),i.hold=g,i.bits=v}},{}],49:[function(t,n,e){"use strict";var r=t("../utils/common"),o=t("./adler32"),i=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),l=1,c=2,u=0,d=-2,p=1,h=852,f=592;function m(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(N){var B;return N&&N.state?(B=N.state,N.total_in=N.total_out=B.total=0,N.msg="",B.wrap&&(N.adler=1&B.wrap),B.mode=p,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new r.Buf32(h),B.distcode=B.distdyn=new r.Buf32(f),B.sane=1,B.back=-1,u):d}function w(N){var B;return N&&N.state?((B=N.state).wsize=0,B.whave=0,B.wnext=0,v(N)):d}function y(N,B){var S,W;return N&&N.state?(W=N.state,B<0?(S=0,B=-B):(S=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?d:(W.window!==null&&W.wbits!==B&&(W.window=null),W.wrap=S,W.wbits=B,w(N))):d}function _(N,B){var S,W;return N?(W=new g,(N.state=W).window=null,(S=y(N,B))!==u&&(N.state=null),S):d}var k,M,E=!0;function A(N){if(E){var B;for(k=new r.Buf32(512),M=new r.Buf32(32),B=0;B<144;)N.lens[B++]=8;for(;B<256;)N.lens[B++]=9;for(;B<280;)N.lens[B++]=7;for(;B<288;)N.lens[B++]=8;for(a(l,N.lens,0,288,k,0,N.work,{bits:9}),B=0;B<32;)N.lens[B++]=5;a(c,N.lens,0,32,M,0,N.work,{bits:5}),E=!1}N.lencode=k,N.lenbits=9,N.distcode=M,N.distbits=5}function P(N,B,S,W){var ie,Z=N.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new r.Buf8(Z.wsize)),W>=Z.wsize?(r.arraySet(Z.window,B,S-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(W<(ie=Z.wsize-Z.wnext)&&(ie=W),r.arraySet(Z.window,B,S-W,ie,Z.wnext),(W-=ie)?(r.arraySet(Z.window,B,S-W,W,0),Z.wnext=W,Z.whave=Z.wsize):(Z.wnext+=ie,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=ie))),0}e.inflateReset=w,e.inflateReset2=y,e.inflateResetKeep=v,e.inflateInit=function(N){return _(N,15)},e.inflateInit2=_,e.inflate=function(N,B){var S,W,ie,Z,X,G,H,V,K,pe,le,se,ye,Ae,Re,Ce,Je,qe,xt,bt,T,we,he,q,j=0,oe=new r.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return d;(S=N.state).mode===12&&(S.mode=13),X=N.next_out,ie=N.output,H=N.avail_out,Z=N.next_in,W=N.input,G=N.avail_in,V=S.hold,K=S.bits,pe=G,le=H,we=u;e:for(;;)switch(S.mode){case p:if(S.wrap===0){S.mode=13;break}for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(2&S.wrap&&V===35615){oe[S.check=0]=255&V,oe[1]=V>>>8&255,S.check=i(S.check,oe,2,0),K=V=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&V)<<8)+(V>>8))%31){N.msg="incorrect header check",S.mode=30;break}if((15&V)!=8){N.msg="unknown compression method",S.mode=30;break}if(K-=4,T=8+(15&(V>>>=4)),S.wbits===0)S.wbits=T;else if(T>S.wbits){N.msg="invalid window size",S.mode=30;break}S.dmax=1<<T,N.adler=S.check=1,S.mode=512&V?10:12,K=V=0;break;case 2:for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(S.flags=V,(255&S.flags)!=8){N.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){N.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=V>>8&1),512&S.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,S.check=i(S.check,oe,2,0)),K=V=0,S.mode=3;case 3:for(;K<32;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}S.head&&(S.head.time=V),512&S.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,oe[2]=V>>>16&255,oe[3]=V>>>24&255,S.check=i(S.check,oe,4,0)),K=V=0,S.mode=4;case 4:for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}S.head&&(S.head.xflags=255&V,S.head.os=V>>8),512&S.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,S.check=i(S.check,oe,2,0)),K=V=0,S.mode=5;case 5:if(1024&S.flags){for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}S.length=V,S.head&&(S.head.extra_len=V),512&S.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,S.check=i(S.check,oe,2,0)),K=V=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(G<(se=S.length)&&(se=G),se&&(S.head&&(T=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),r.arraySet(S.head.extra,W,Z,se,T)),512&S.flags&&(S.check=i(S.check,W,se,Z)),G-=se,Z+=se,S.length-=se),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(G===0)break e;for(se=0;T=W[Z+se++],S.head&&T&&S.length<65536&&(S.head.name+=String.fromCharCode(T)),T&&se<G;);if(512&S.flags&&(S.check=i(S.check,W,se,Z)),G-=se,Z+=se,T)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(G===0)break e;for(se=0;T=W[Z+se++],S.head&&T&&S.length<65536&&(S.head.comment+=String.fromCharCode(T)),T&&se<G;);if(512&S.flags&&(S.check=i(S.check,W,se,Z)),G-=se,Z+=se,T)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(V!==(65535&S.check)){N.msg="header crc mismatch",S.mode=30;break}K=V=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),N.adler=S.check=0,S.mode=12;break;case 10:for(;K<32;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}N.adler=S.check=m(V),K=V=0,S.mode=11;case 11:if(S.havedict===0)return N.next_out=X,N.avail_out=H,N.next_in=Z,N.avail_in=G,S.hold=V,S.bits=K,2;N.adler=S.check=1,S.mode=12;case 12:if(B===5||B===6)break e;case 13:if(S.last){V>>>=7&K,K-=7&K,S.mode=27;break}for(;K<3;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}switch(S.last=1&V,K-=1,3&(V>>>=1)){case 0:S.mode=14;break;case 1:if(A(S),S.mode=20,B!==6)break;V>>>=2,K-=2;break e;case 2:S.mode=17;break;case 3:N.msg="invalid block type",S.mode=30}V>>>=2,K-=2;break;case 14:for(V>>>=7&K,K-=7&K;K<32;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if((65535&V)!=(V>>>16^65535)){N.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&V,K=V=0,S.mode=15,B===6)break e;case 15:S.mode=16;case 16:if(se=S.length){if(G<se&&(se=G),H<se&&(se=H),se===0)break e;r.arraySet(ie,W,Z,se,X),G-=se,Z+=se,H-=se,X+=se,S.length-=se;break}S.mode=12;break;case 17:for(;K<14;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(S.nlen=257+(31&V),V>>>=5,K-=5,S.ndist=1+(31&V),V>>>=5,K-=5,S.ncode=4+(15&V),V>>>=4,K-=4,286<S.nlen||30<S.ndist){N.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;K<3;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}S.lens[xe[S.have++]]=7&V,V>>>=3,K-=3}for(;S.have<19;)S.lens[xe[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,he={bits:S.lenbits},we=a(0,S.lens,0,19,S.lencode,0,S.work,he),S.lenbits=he.bits,we){N.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Ce=(j=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,Je=65535&j,!((Re=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(Je<16)V>>>=Re,K-=Re,S.lens[S.have++]=Je;else{if(Je===16){for(q=Re+2;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(V>>>=Re,K-=Re,S.have===0){N.msg="invalid bit length repeat",S.mode=30;break}T=S.lens[S.have-1],se=3+(3&V),V>>>=2,K-=2}else if(Je===17){for(q=Re+3;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}K-=Re,T=0,se=3+(7&(V>>>=Re)),V>>>=3,K-=3}else{for(q=Re+7;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}K-=Re,T=0,se=11+(127&(V>>>=Re)),V>>>=7,K-=7}if(S.have+se>S.nlen+S.ndist){N.msg="invalid bit length repeat",S.mode=30;break}for(;se--;)S.lens[S.have++]=T}}if(S.mode===30)break;if(S.lens[256]===0){N.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,he={bits:S.lenbits},we=a(l,S.lens,0,S.nlen,S.lencode,0,S.work,he),S.lenbits=he.bits,we){N.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,he={bits:S.distbits},we=a(c,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,he),S.distbits=he.bits,we){N.msg="invalid distances set",S.mode=30;break}if(S.mode=20,B===6)break e;case 20:S.mode=21;case 21:if(6<=G&&258<=H){N.next_out=X,N.avail_out=H,N.next_in=Z,N.avail_in=G,S.hold=V,S.bits=K,s(N,le),X=N.next_out,ie=N.output,H=N.avail_out,Z=N.next_in,W=N.input,G=N.avail_in,V=S.hold,K=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Ce=(j=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,Je=65535&j,!((Re=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(Ce&&(240&Ce)==0){for(qe=Re,xt=Ce,bt=Je;Ce=(j=S.lencode[bt+((V&(1<<qe+xt)-1)>>qe)])>>>16&255,Je=65535&j,!(qe+(Re=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}V>>>=qe,K-=qe,S.back+=qe}if(V>>>=Re,K-=Re,S.back+=Re,S.length=Je,Ce===0){S.mode=26;break}if(32&Ce){S.back=-1,S.mode=12;break}if(64&Ce){N.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Ce,S.mode=22;case 22:if(S.extra){for(q=S.extra;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}S.length+=V&(1<<S.extra)-1,V>>>=S.extra,K-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Ce=(j=S.distcode[V&(1<<S.distbits)-1])>>>16&255,Je=65535&j,!((Re=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if((240&Ce)==0){for(qe=Re,xt=Ce,bt=Je;Ce=(j=S.distcode[bt+((V&(1<<qe+xt)-1)>>qe)])>>>16&255,Je=65535&j,!(qe+(Re=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}V>>>=qe,K-=qe,S.back+=qe}if(V>>>=Re,K-=Re,S.back+=Re,64&Ce){N.msg="invalid distance code",S.mode=30;break}S.offset=Je,S.extra=15&Ce,S.mode=24;case 24:if(S.extra){for(q=S.extra;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}S.offset+=V&(1<<S.extra)-1,V>>>=S.extra,K-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){N.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(H===0)break e;if(se=le-H,S.offset>se){if((se=S.offset-se)>S.whave&&S.sane){N.msg="invalid distance too far back",S.mode=30;break}ye=se>S.wnext?(se-=S.wnext,S.wsize-se):S.wnext-se,se>S.length&&(se=S.length),Ae=S.window}else Ae=ie,ye=X-S.offset,se=S.length;for(H<se&&(se=H),H-=se,S.length-=se;ie[X++]=Ae[ye++],--se;);S.length===0&&(S.mode=21);break;case 26:if(H===0)break e;ie[X++]=S.length,H--,S.mode=21;break;case 27:if(S.wrap){for(;K<32;){if(G===0)break e;G--,V|=W[Z++]<<K,K+=8}if(le-=H,N.total_out+=le,S.total+=le,le&&(N.adler=S.check=S.flags?i(S.check,ie,le,X-le):o(S.check,ie,le,X-le)),le=H,(S.flags?V:m(V))!==S.check){N.msg="incorrect data check",S.mode=30;break}K=V=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;K<32;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(V!==(4294967295&S.total)){N.msg="incorrect length check",S.mode=30;break}K=V=0}S.mode=29;case 29:we=1;break e;case 30:we=-3;break e;case 31:return-4;case 32:default:return d}return N.next_out=X,N.avail_out=H,N.next_in=Z,N.avail_in=G,S.hold=V,S.bits=K,(S.wsize||le!==N.avail_out&&S.mode<30&&(S.mode<27||B!==4))&&P(N,N.output,N.next_out,le-N.avail_out)?(S.mode=31,-4):(pe-=N.avail_in,le-=N.avail_out,N.total_in+=pe,N.total_out+=le,S.total+=le,S.wrap&&le&&(N.adler=S.check=S.flags?i(S.check,ie,le,N.next_out-le):o(S.check,ie,le,N.next_out-le)),N.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(pe==0&&le===0||B===4)&&we===u&&(we=-5),we)},e.inflateEnd=function(N){if(!N||!N.state)return d;var B=N.state;return B.window&&(B.window=null),N.state=null,u},e.inflateGetHeader=function(N,B){var S;return N&&N.state?(2&(S=N.state).wrap)==0?d:((S.head=B).done=!1,u):d},e.inflateSetDictionary=function(N,B){var S,W=B.length;return N&&N.state?(S=N.state).wrap!==0&&S.mode!==11?d:S.mode===11&&o(1,B,W,0)!==S.check?-3:P(N,B,W,W)?(S.mode=31,-4):(S.havedict=1,u):d},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,e){"use strict";var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,c,u,d,p,h,f,m){var g,v,w,y,_,k,M,E,A,P=m.bits,N=0,B=0,S=0,W=0,ie=0,Z=0,X=0,G=0,H=0,V=0,K=null,pe=0,le=new r.Buf16(16),se=new r.Buf16(16),ye=null,Ae=0;for(N=0;N<=15;N++)le[N]=0;for(B=0;B<d;B++)le[c[u+B]]++;for(ie=P,W=15;1<=W&&le[W]===0;W--);if(W<ie&&(ie=W),W===0)return p[h++]=20971520,p[h++]=20971520,m.bits=1,0;for(S=1;S<W&&le[S]===0;S++);for(ie<S&&(ie=S),N=G=1;N<=15;N++)if(G<<=1,(G-=le[N])<0)return-1;if(0<G&&(l===0||W!==1))return-1;for(se[1]=0,N=1;N<15;N++)se[N+1]=se[N]+le[N];for(B=0;B<d;B++)c[u+B]!==0&&(f[se[c[u+B]]++]=B);if(k=l===0?(K=ye=f,19):l===1?(K=o,pe-=257,ye=i,Ae-=257,256):(K=s,ye=a,-1),N=S,_=h,X=B=V=0,w=-1,y=(H=1<<(Z=ie))-1,l===1&&852<H||l===2&&592<H)return 1;for(;;){for(M=N-X,A=f[B]<k?(E=0,f[B]):f[B]>k?(E=ye[Ae+f[B]],K[pe+f[B]]):(E=96,0),g=1<<N-X,S=v=1<<Z;p[_+(V>>X)+(v-=g)]=M<<24|E<<16|A|0,v!==0;);for(g=1<<N-1;V&g;)g>>=1;if(g!==0?(V&=g-1,V+=g):V=0,B++,--le[N]==0){if(N===W)break;N=c[u+f[B]]}if(ie<N&&(V&y)!==w){for(X===0&&(X=ie),_+=S,G=1<<(Z=N-X);Z+X<W&&!((G-=le[Z+X])<=0);)Z++,G<<=1;if(H+=1<<Z,l===1&&852<H||l===2&&592<H)return 1;p[w=V&y]=ie<<24|Z<<16|_-h|0}}return V!==0&&(p[_+V]=N-X<<24|64<<16|0),m.bits=ie,0}},{"../utils/common":41}],51:[function(t,n,e){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,e){"use strict";var r=t("../utils/common"),o=0,i=1;function s(j){for(var oe=j.length;0<=--oe;)j[oe]=0}var a=0,l=29,c=256,u=c+1+l,d=30,p=19,h=2*u+1,f=15,m=16,g=7,v=256,w=16,y=17,_=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=new Array(2*(u+2));s(P);var N=new Array(2*d);s(N);var B=new Array(512);s(B);var S=new Array(256);s(S);var W=new Array(l);s(W);var ie,Z,X,G=new Array(d);function H(j,oe,xe,Fe,ce){this.static_tree=j,this.extra_bits=oe,this.extra_base=xe,this.elems=Fe,this.max_length=ce,this.has_stree=j&&j.length}function V(j,oe){this.dyn_tree=j,this.max_code=0,this.stat_desc=oe}function K(j){return j<256?B[j]:B[256+(j>>>7)]}function pe(j,oe){j.pending_buf[j.pending++]=255&oe,j.pending_buf[j.pending++]=oe>>>8&255}function le(j,oe,xe){j.bi_valid>m-xe?(j.bi_buf|=oe<<j.bi_valid&65535,pe(j,j.bi_buf),j.bi_buf=oe>>m-j.bi_valid,j.bi_valid+=xe-m):(j.bi_buf|=oe<<j.bi_valid&65535,j.bi_valid+=xe)}function se(j,oe,xe){le(j,xe[2*oe],xe[2*oe+1])}function ye(j,oe){for(var xe=0;xe|=1&j,j>>>=1,xe<<=1,0<--oe;);return xe>>>1}function Ae(j,oe,xe){var Fe,ce,Ue=new Array(f+1),tt=0;for(Fe=1;Fe<=f;Fe++)Ue[Fe]=tt=tt+xe[Fe-1]<<1;for(ce=0;ce<=oe;ce++){var Ke=j[2*ce+1];Ke!==0&&(j[2*ce]=ye(Ue[Ke]++,Ke))}}function Re(j){var oe;for(oe=0;oe<u;oe++)j.dyn_ltree[2*oe]=0;for(oe=0;oe<d;oe++)j.dyn_dtree[2*oe]=0;for(oe=0;oe<p;oe++)j.bl_tree[2*oe]=0;j.dyn_ltree[2*v]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function Ce(j){8<j.bi_valid?pe(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function Je(j,oe,xe,Fe){var ce=2*oe,Ue=2*xe;return j[ce]<j[Ue]||j[ce]===j[Ue]&&Fe[oe]<=Fe[xe]}function qe(j,oe,xe){for(var Fe=j.heap[xe],ce=xe<<1;ce<=j.heap_len&&(ce<j.heap_len&&Je(oe,j.heap[ce+1],j.heap[ce],j.depth)&&ce++,!Je(oe,Fe,j.heap[ce],j.depth));)j.heap[xe]=j.heap[ce],xe=ce,ce<<=1;j.heap[xe]=Fe}function xt(j,oe,xe){var Fe,ce,Ue,tt,Ke=0;if(j.last_lit!==0)for(;Fe=j.pending_buf[j.d_buf+2*Ke]<<8|j.pending_buf[j.d_buf+2*Ke+1],ce=j.pending_buf[j.l_buf+Ke],Ke++,Fe===0?se(j,ce,oe):(se(j,(Ue=S[ce])+c+1,oe),(tt=k[Ue])!==0&&le(j,ce-=W[Ue],tt),se(j,Ue=K(--Fe),xe),(tt=M[Ue])!==0&&le(j,Fe-=G[Ue],tt)),Ke<j.last_lit;);se(j,v,oe)}function bt(j,oe){var xe,Fe,ce,Ue=oe.dyn_tree,tt=oe.stat_desc.static_tree,Ke=oe.stat_desc.has_stree,mt=oe.stat_desc.elems,kn=-1;for(j.heap_len=0,j.heap_max=h,xe=0;xe<mt;xe++)Ue[2*xe]!==0?(j.heap[++j.heap_len]=kn=xe,j.depth[xe]=0):Ue[2*xe+1]=0;for(;j.heap_len<2;)Ue[2*(ce=j.heap[++j.heap_len]=kn<2?++kn:0)]=1,j.depth[ce]=0,j.opt_len--,Ke&&(j.static_len-=tt[2*ce+1]);for(oe.max_code=kn,xe=j.heap_len>>1;1<=xe;xe--)qe(j,Ue,xe);for(ce=mt;xe=j.heap[1],j.heap[1]=j.heap[j.heap_len--],qe(j,Ue,1),Fe=j.heap[1],j.heap[--j.heap_max]=xe,j.heap[--j.heap_max]=Fe,Ue[2*ce]=Ue[2*xe]+Ue[2*Fe],j.depth[ce]=(j.depth[xe]>=j.depth[Fe]?j.depth[xe]:j.depth[Fe])+1,Ue[2*xe+1]=Ue[2*Fe+1]=ce,j.heap[1]=ce++,qe(j,Ue,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],function(ln,lo){var vs,Ti,Zu,Cr,C2,eh,tl=lo.dyn_tree,Xb=lo.max_code,Ahe=lo.stat_desc.static_tree,Rhe=lo.stat_desc.has_stree,Ohe=lo.stat_desc.extra_bits,YV=lo.stat_desc.extra_base,ry=lo.stat_desc.max_length,Yb=0;for(Cr=0;Cr<=f;Cr++)ln.bl_count[Cr]=0;for(tl[2*ln.heap[ln.heap_max]+1]=0,vs=ln.heap_max+1;vs<h;vs++)ry<(Cr=tl[2*tl[2*(Ti=ln.heap[vs])+1]+1]+1)&&(Cr=ry,Yb++),tl[2*Ti+1]=Cr,Xb<Ti||(ln.bl_count[Cr]++,C2=0,YV<=Ti&&(C2=Ohe[Ti-YV]),eh=tl[2*Ti],ln.opt_len+=eh*(Cr+C2),Rhe&&(ln.static_len+=eh*(Ahe[2*Ti+1]+C2)));if(Yb!==0){do{for(Cr=ry-1;ln.bl_count[Cr]===0;)Cr--;ln.bl_count[Cr]--,ln.bl_count[Cr+1]+=2,ln.bl_count[ry]--,Yb-=2}while(0<Yb);for(Cr=ry;Cr!==0;Cr--)for(Ti=ln.bl_count[Cr];Ti!==0;)Xb<(Zu=ln.heap[--vs])||(tl[2*Zu+1]!==Cr&&(ln.opt_len+=(Cr-tl[2*Zu+1])*tl[2*Zu],tl[2*Zu+1]=Cr),Ti--)}}(j,oe),Ae(Ue,kn,j.bl_count)}function T(j,oe,xe){var Fe,ce,Ue=-1,tt=oe[1],Ke=0,mt=7,kn=4;for(tt===0&&(mt=138,kn=3),oe[2*(xe+1)+1]=65535,Fe=0;Fe<=xe;Fe++)ce=tt,tt=oe[2*(Fe+1)+1],++Ke<mt&&ce===tt||(Ke<kn?j.bl_tree[2*ce]+=Ke:ce!==0?(ce!==Ue&&j.bl_tree[2*ce]++,j.bl_tree[2*w]++):Ke<=10?j.bl_tree[2*y]++:j.bl_tree[2*_]++,Ue=ce,kn=(Ke=0)===tt?(mt=138,3):ce===tt?(mt=6,3):(mt=7,4))}function we(j,oe,xe){var Fe,ce,Ue=-1,tt=oe[1],Ke=0,mt=7,kn=4;for(tt===0&&(mt=138,kn=3),Fe=0;Fe<=xe;Fe++)if(ce=tt,tt=oe[2*(Fe+1)+1],!(++Ke<mt&&ce===tt)){if(Ke<kn)for(;se(j,ce,j.bl_tree),--Ke!=0;);else ce!==0?(ce!==Ue&&(se(j,ce,j.bl_tree),Ke--),se(j,w,j.bl_tree),le(j,Ke-3,2)):Ke<=10?(se(j,y,j.bl_tree),le(j,Ke-3,3)):(se(j,_,j.bl_tree),le(j,Ke-11,7));Ue=ce,kn=(Ke=0)===tt?(mt=138,3):ce===tt?(mt=6,3):(mt=7,4)}}s(G);var he=!1;function q(j,oe,xe,Fe){le(j,(a<<1)+(Fe?1:0),3),function(ce,Ue,tt,Ke){Ce(ce),Ke&&(pe(ce,tt),pe(ce,~tt)),r.arraySet(ce.pending_buf,ce.window,Ue,tt,ce.pending),ce.pending+=tt}(j,oe,xe,!0)}e._tr_init=function(j){he||(function(){var oe,xe,Fe,ce,Ue,tt=new Array(f+1);for(ce=Fe=0;ce<l-1;ce++)for(W[ce]=Fe,oe=0;oe<1<<k[ce];oe++)S[Fe++]=ce;for(S[Fe-1]=ce,ce=Ue=0;ce<16;ce++)for(G[ce]=Ue,oe=0;oe<1<<M[ce];oe++)B[Ue++]=ce;for(Ue>>=7;ce<d;ce++)for(G[ce]=Ue<<7,oe=0;oe<1<<M[ce]-7;oe++)B[256+Ue++]=ce;for(xe=0;xe<=f;xe++)tt[xe]=0;for(oe=0;oe<=143;)P[2*oe+1]=8,oe++,tt[8]++;for(;oe<=255;)P[2*oe+1]=9,oe++,tt[9]++;for(;oe<=279;)P[2*oe+1]=7,oe++,tt[7]++;for(;oe<=287;)P[2*oe+1]=8,oe++,tt[8]++;for(Ae(P,u+1,tt),oe=0;oe<d;oe++)N[2*oe+1]=5,N[2*oe]=ye(oe,5);ie=new H(P,k,c+1,u,f),Z=new H(N,M,0,d,f),X=new H(new Array(0),E,0,p,g)}(),he=!0),j.l_desc=new V(j.dyn_ltree,ie),j.d_desc=new V(j.dyn_dtree,Z),j.bl_desc=new V(j.bl_tree,X),j.bi_buf=0,j.bi_valid=0,Re(j)},e._tr_stored_block=q,e._tr_flush_block=function(j,oe,xe,Fe){var ce,Ue,tt=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=function(Ke){var mt,kn=4093624447;for(mt=0;mt<=31;mt++,kn>>>=1)if(1&kn&&Ke.dyn_ltree[2*mt]!==0)return o;if(Ke.dyn_ltree[18]!==0||Ke.dyn_ltree[20]!==0||Ke.dyn_ltree[26]!==0)return i;for(mt=32;mt<c;mt++)if(Ke.dyn_ltree[2*mt]!==0)return i;return o}(j)),bt(j,j.l_desc),bt(j,j.d_desc),tt=function(Ke){var mt;for(T(Ke,Ke.dyn_ltree,Ke.l_desc.max_code),T(Ke,Ke.dyn_dtree,Ke.d_desc.max_code),bt(Ke,Ke.bl_desc),mt=p-1;3<=mt&&Ke.bl_tree[2*A[mt]+1]===0;mt--);return Ke.opt_len+=3*(mt+1)+5+5+4,mt}(j),ce=j.opt_len+3+7>>>3,(Ue=j.static_len+3+7>>>3)<=ce&&(ce=Ue)):ce=Ue=xe+5,xe+4<=ce&&oe!==-1?q(j,oe,xe,Fe):j.strategy===4||Ue===ce?(le(j,2+(Fe?1:0),3),xt(j,P,N)):(le(j,4+(Fe?1:0),3),function(Ke,mt,kn,ln){var lo;for(le(Ke,mt-257,5),le(Ke,kn-1,5),le(Ke,ln-4,4),lo=0;lo<ln;lo++)le(Ke,Ke.bl_tree[2*A[lo]+1],3);we(Ke,Ke.dyn_ltree,mt-1),we(Ke,Ke.dyn_dtree,kn-1)}(j,j.l_desc.max_code+1,j.d_desc.max_code+1,tt+1),xt(j,j.dyn_ltree,j.dyn_dtree)),Re(j),Fe&&Ce(j)},e._tr_tally=function(j,oe,xe){return j.pending_buf[j.d_buf+2*j.last_lit]=oe>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&oe,j.pending_buf[j.l_buf+j.last_lit]=255&xe,j.last_lit++,oe===0?j.dyn_ltree[2*xe]++:(j.matches++,oe--,j.dyn_ltree[2*(S[xe]+c+1)]++,j.dyn_dtree[2*K(oe)]++),j.last_lit===j.lit_bufsize-1},e._tr_align=function(j){le(j,2,3),se(j,v,P),function(oe){oe.bi_valid===16?(pe(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)}(j)}},{"../utils/common":41}],53:[function(t,n,e){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,e){(function(r){(function(o,i){"use strict";if(!o.setImmediate){var s,a,l,c,u=1,d={},p=!1,h=o.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(o);f=f&&f.setTimeout?f:o,s={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){g(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,y=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=y,w}}()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",v,!1):o.attachEvent("onmessage",v),function(w){o.postMessage(c+w,"*")}):o.MessageChannel?((l=new MessageChannel).port1.onmessage=function(w){g(w.data)},function(w){l.port2.postMessage(w)}):h&&"onreadystatechange"in h.createElement("script")?(a=h.documentElement,function(w){var y=h.createElement("script");y.onreadystatechange=function(){g(w),y.onreadystatechange=null,a.removeChild(y),y=null},a.appendChild(y)}):function(w){setTimeout(g,0,w)},f.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var y=new Array(arguments.length-1),_=0;_<y.length;_++)y[_]=arguments[_+1];var k={callback:w,args:y};return d[u]=k,s(u),u++},f.clearImmediate=m}function m(w){delete d[w]}function g(w){if(p)setTimeout(g,0,w);else{var y=d[w];if(y){p=!0;try{(function(_){var k=_.callback,M=_.args;switch(M.length){case 0:k();break;case 1:k(M[0]);break;case 2:k(M[0],M[1]);break;case 3:k(M[0],M[1],M[2]);break;default:k.apply(i,M)}})(y)}finally{m(w),p=!1}}}}function v(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(c)===0&&g(+w.data.slice(c.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});function eC(t,n){return Object.is(t,n)}var Po=null,Jb=!1,HN=1,ni=Symbol("SIGNAL");function dn(t){let n=Po;return Po=t,n}function UN(){return Po}var Wf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nh(t){if(Jb)throw new Error("");if(Po===null)return;Po.consumerOnSignalRead(t);let n=Po.nextProducerIndex++;if(nC(Po),n<Po.producerNode.length&&Po.producerNode[n]!==t&&ay(Po)){let e=Po.producerNode[n];tC(e,Po.producerIndexOfThis[n])}Po.producerNode[n]!==t&&(Po.producerNode[n]=t,Po.producerIndexOfThis[n]=ay(Po)?n9(t,Po,n):0),Po.producerLastReadVersion[n]=t.version}function t9(){HN++}function T2(t){if(!(ay(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===HN)){if(!t.producerMustRecompute(t)&&!ly(t)){sy(t);return}t.producerRecomputeValue(t),sy(t)}}function GN(t){if(t.liveConsumerNode===void 0)return;let n=Jb;Jb=!0;try{for(let e of t.liveConsumerNode)e.dirty||jhe(e)}finally{Jb=n}}function WN(){return Po?.consumerAllowSignalWrites!==!1}function jhe(t){t.dirty=!0,GN(t),t.consumerMarkedDirty?.(t)}function sy(t){t.dirty=!1,t.lastCleanEpoch=HN}function qf(t){return t&&(t.nextProducerIndex=0),dn(t)}function D2(t,n){if(dn(n),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ay(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)tC(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ly(t){nC(t);for(let n=0;n<t.producerNode.length;n++){let e=t.producerNode[n],r=t.producerLastReadVersion[n];if(r!==e.version||(T2(e),r!==e.version))return!0}return!1}function cy(t){if(nC(t),ay(t))for(let n=0;n<t.producerNode.length;n++)tC(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function n9(t,n,e){if(r9(t),t.liveConsumerNode.length===0&&o9(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=n9(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(e),t.liveConsumerNode.push(n)-1}function tC(t,n){if(r9(t),t.liveConsumerNode.length===1&&o9(t))for(let r=0;r<t.producerNode.length;r++)tC(t.producerNode[r],t.producerIndexOfThis[r]);let e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[n],o=t.liveConsumerNode[n];nC(o),o.producerIndexOfThis[r]=n}}function ay(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function nC(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function r9(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function o9(t){return t.producerNode!==void 0}function rC(t,n){let e=Object.create(zhe);e.computation=t,n!==void 0&&(e.equal=n);let r=()=>{if(T2(e),nh(e),e.value===th)throw e.error;return e.value};return r[ni]=e,r}var Gf=Symbol("UNSET"),M2=Symbol("COMPUTING"),th=Symbol("ERRORED"),zhe=pt(ue({},Wf),{value:Gf,dirty:!0,error:null,equal:eC,kind:"computed",producerMustRecompute(t){return t.value===Gf||t.value===M2},producerRecomputeValue(t){if(t.value===M2)throw new Error("Detected cycle in computations.");let n=t.value;t.value=M2;let e=qf(t),r,o=!1;try{r=t.computation(),dn(null),o=n!==Gf&&n!==th&&r!==th&&t.equal(n,r)}catch(i){r=th,t.error=i}finally{D2(t,e)}if(o){t.value=n;return}t.value=r,t.version++}});function Hhe(){throw new Error}var i9=Hhe;function s9(t){i9(t)}function qN(t){i9=t}var Uhe=null;function KN(t,n){let e=Object.create(uy);e.value=t,n!==void 0&&(e.equal=n);let r=()=>(nh(e),e.value);return r[ni]=e,r}function Kf(t,n){WN()||s9(t),t.equal(t.value,n)||(t.value=n,Ghe(t))}function oC(t,n){WN()||s9(t),Kf(t,n(t.value))}var uy=pt(ue({},Wf),{equal:eC,value:void 0,kind:"signal"});function Ghe(t){t.version++,t9(),GN(t),Uhe?.()}function iC(t,n,e){let r=Object.create(Whe);r.source=t,r.computation=n,e!=null&&(r.equal=e);let i=()=>{if(T2(r),nh(r),r.value===th)throw r.error;return r.value};return i[ni]=r,i}function ZN(t,n){T2(t),Kf(t,n),sy(t)}function XN(t,n){T2(t),oC(t,n),sy(t)}var Whe=pt(ue({},Wf),{value:Gf,dirty:!0,error:null,equal:eC,kind:"linkedSignal",producerMustRecompute(t){return t.value===Gf||t.value===M2},producerRecomputeValue(t){if(t.value===M2)throw new Error("Detected cycle in computations.");let n=t.value;t.value=M2;let e=qf(t),r;try{let o=t.source(),i=n===Gf||n===th?void 0:{source:t.sourceValue,value:n};r=t.computation(o,i),t.sourceValue=o}catch(o){r=th,t.error=o}finally{D2(t,e)}if(n!==Gf&&r!==th&&t.equal(n,r)){t.value=n;return}t.value=r,t.version++}});function YN(t){let n=dn(null);try{return t()}finally{dn(n)}}var QN;function dy(){return QN}function Xu(t){let n=QN;return QN=t,n}var sC=Symbol("NotFound");function Vt(t){return typeof t=="function"}function E2(t){let e=t(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var aC=E2(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Zf(t,n){if(t){let e=t.indexOf(n);0<=e&&t.splice(e,1)}}var On=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let i of e)i.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(Vt(r))try{r()}catch(i){n=i instanceof aC?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{a9(i)}catch(s){n=n??[],s instanceof aC?n=[...n,...s.errors]:n.push(s)}}if(n)throw new aC(n)}}add(n){var e;if(n&&n!==this)if(this.closed)a9(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Zf(e,n)}remove(n){let{_finalizers:e}=this;e&&Zf(e,n),n instanceof t&&n._removeParent(this)}};On.EMPTY=(()=>{let t=new On;return t.closed=!0,t})();var JN=On.EMPTY;function lC(t){return t instanceof On||t&&"closed"in t&&Vt(t.remove)&&Vt(t.add)&&Vt(t.unsubscribe)}function a9(t){Vt(t)?t():t.unsubscribe()}var nl={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var I2={setTimeout(t,n,...e){let{delegate:r}=I2;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){let{delegate:n}=I2;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function cC(t){I2.setTimeout(()=>{let{onUnhandledError:n}=nl;if(n)n(t);else throw t})}function Xf(){}var l9=eA("C",void 0,void 0);function c9(t){return eA("E",void 0,t)}function u9(t){return eA("N",t,void 0)}function eA(t,n,e){return{kind:t,value:n,error:e}}var Yf=null;function N2(t){if(nl.useDeprecatedSynchronousErrorHandling){let n=!Yf;if(n&&(Yf={errorThrown:!1,error:null}),t(),n){let{errorThrown:e,error:r}=Yf;if(Yf=null,e)throw r}}else t()}function d9(t){nl.useDeprecatedSynchronousErrorHandling&&Yf&&(Yf.errorThrown=!0,Yf.error=t)}var Qf=class extends On{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,lC(n)&&n.add(this)):this.destination=Zhe}static create(n,e,r){return new Yu(n,e,r)}next(n){this.isStopped?nA(u9(n),this):this._next(n)}error(n){this.isStopped?nA(c9(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?nA(l9,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qhe=Function.prototype.bind;function tA(t,n){return qhe.call(t,n)}var rA=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){uC(r)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){uC(r)}else uC(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){uC(e)}}},Yu=class extends Qf{constructor(n,e,r){super();let o;if(Vt(n)||!n)o={next:n??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&nl.useDeprecatedNextContext?(i=Object.create(n),i.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&tA(n.next,i),error:n.error&&tA(n.error,i),complete:n.complete&&tA(n.complete,i)}):o=n}this.destination=new rA(o)}};function uC(t){nl.useDeprecatedSynchronousErrorHandling?d9(t):cC(t)}function Khe(t){throw t}function nA(t,n){let{onStoppedNotification:e}=nl;e&&I2.setTimeout(()=>e(t,n))}var Zhe={closed:!0,next:Xf,error:Khe,complete:Xf};var A2=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qi(t){return t}function oA(...t){return iA(t)}function iA(t){return t.length===0?Qi:t.length===1?t[0]:function(e){return t.reduce((r,o)=>o(r),e)}}var Jt=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,o){let i=Yhe(e)?e:new Yu(e,r,o);return N2(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=p9(r),new r((o,i)=>{let s=new Yu({next:a=>{try{e(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[A2](){return this}pipe(...e){return iA(e)(this)}toPromise(e){return e=p9(e),new e((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=n=>new t(n),t})();function p9(t){var n;return(n=t??nl.Promise)!==null&&n!==void 0?n:Promise}function Xhe(t){return t&&Vt(t.next)&&Vt(t.error)&&Vt(t.complete)}function Yhe(t){return t&&t instanceof Qf||Xhe(t)&&lC(t)}function sA(t){return Vt(t?.lift)}function Zt(t){return n=>{if(sA(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Wt(t,n,e,r,o){return new aA(t,n,e,r,o)}var aA=class extends Qf{constructor(n,e,r,o,i,s){super(n),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function R2(){return Zt((t,n)=>{let e=null;t._refCount++;let r=Wt(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){e=null;return}let o=t._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(e=t.connect())})}var rh=class extends Jt{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,sA(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new On;let e=this.getSubject();n.add(this.source.subscribe(Wt(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=On.EMPTY)}return n}refCount(){return R2()(this)}};var h9=E2(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class t extends Jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new dC(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new h9}next(e){N2(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){N2(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){N2(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:o,observers:i}=this;return r||o?JN:(this.currentObservers=null,i.push(e),new On(()=>{this.currentObservers=null,Zf(i,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){let e=new Jt;return e.source=this,e}}return t.create=(n,e)=>new dC(n,e),t})(),dC=class extends ot{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,n)}error(n){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&r!==void 0?r:JN}};var Kn=class extends ot{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var py={now(){return(py.delegate||Date).now()},delegate:void 0};var Qu=class extends ot{constructor(n=1/0,e=1/0,r=py){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){let{isStopped:e,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;e||(r.push(n),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!n.closed;s+=r?1:2)n.next(i[s]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){let{_bufferSize:n,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*n;if(n<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=e.now(),a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}};var pC=class extends On{constructor(n,e){super()}schedule(n,e=0){return this}};var hy={setInterval(t,n,...e){let{delegate:r}=hy;return r?.setInterval?r.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){let{delegate:n}=hy;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var hC=class extends pC{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var r;if(this.closed)return this;this.state=n;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,e),this}requestAsyncId(n,e,r=0){return hy.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&hy.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(n,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r=!1,o;try{this.work(n)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:n,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Zf(r,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}};var O2=class t{constructor(n,e=t.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,r){return new this.schedulerActionCtor(this,n).schedule(r,e)}};O2.now=py.now;var fC=class extends O2{constructor(n,e=O2.now){super(n,e),this.actions=[],this._active=!1}flush(n){let{actions:e}=this;if(this._active){e.push(n);return}let r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=e.shift());if(this._active=!1,r){for(;n=e.shift();)n.unsubscribe();throw r}}};var Ju=new fC(hC),f9=Ju;var ri=new Jt(t=>t.complete());function mC(t){return t&&Vt(t.schedule)}function lA(t){return t[t.length-1]}function gC(t){return Vt(lA(t))?t.pop():void 0}function tc(t){return mC(lA(t))?t.pop():void 0}function m9(t,n){return typeof lA(t)=="number"?t.pop():n}function v9(t,n,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,n||[])).next())})}function g9(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jf(t){return this instanceof Jf?(this.v=t,this):new Jf(t)}function w9(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(t,n||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(f){return Promise.resolve(f).then(h,d)}}function a(h,f){r[h]&&(o[h]=function(m){return new Promise(function(g,v){i.push([h,m,g,v])>1||l(h,m)})},f&&(o[h]=f(o[h])))}function l(h,f){try{c(r[h](f))}catch(m){p(i[0][3],m)}}function c(h){h.value instanceof Jf?Promise.resolve(h.value.v).then(u,d):p(i[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function p(h,f){h(f),i.shift(),i.length&&l(i[0][0],i[0][1])}}function y9(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof g9=="function"?g9(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=t[i]&&function(s){return new Promise(function(a,l){s=t[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}var F2=t=>t&&typeof t.length=="number"&&typeof t!="function";function vC(t){return Vt(t?.then)}function wC(t){return Vt(t[A2])}function yC(t){return Symbol.asyncIterator&&Vt(t?.[Symbol.asyncIterator])}function xC(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Qhe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _C=Qhe();function kC(t){return Vt(t?.[_C])}function bC(t){return w9(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:r,done:o}=yield Jf(e.read());if(o)return yield Jf(void 0);yield yield Jf(r)}}finally{e.releaseLock()}})}function CC(t){return Vt(t?.getReader)}function Dn(t){if(t instanceof Jt)return t;if(t!=null){if(wC(t))return Jhe(t);if(F2(t))return efe(t);if(vC(t))return tfe(t);if(yC(t))return x9(t);if(kC(t))return nfe(t);if(CC(t))return rfe(t)}throw xC(t)}function Jhe(t){return new Jt(n=>{let e=t[A2]();if(Vt(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function efe(t){return new Jt(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}function tfe(t){return new Jt(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,cC)})}function nfe(t){return new Jt(n=>{for(let e of t)if(n.next(e),n.closed)return;n.complete()})}function x9(t){return new Jt(n=>{ofe(t,n).catch(e=>n.error(e))})}function rfe(t){return x9(bC(t))}function ofe(t,n){var e,r,o,i;return v9(this,void 0,void 0,function*(){try{for(e=y9(t);r=yield e.next(),!r.done;){let s=r.value;if(n.next(s),n.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}n.complete()})}function ys(t,n,e,r=0,o=!1){let i=n.schedule(function(){e(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function SC(t,n=0){return Zt((e,r)=>{e.subscribe(Wt(r,o=>ys(r,t,()=>r.next(o),n),()=>ys(r,t,()=>r.complete(),n),o=>ys(r,t,()=>r.error(o),n)))})}function MC(t,n=0){return Zt((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function _9(t,n){return Dn(t).pipe(MC(n),SC(n))}function k9(t,n){return Dn(t).pipe(MC(n),SC(n))}function b9(t,n){return new Jt(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}function C9(t,n){return new Jt(e=>{let r;return ys(e,n,()=>{r=t[_C](),ys(e,n,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){e.error(s);return}i?e.complete():e.next(o)},0,!0)}),()=>Vt(r?.return)&&r.return()})}function TC(t,n){if(!t)throw new Error("Iterable cannot be null");return new Jt(e=>{ys(e,n,()=>{let r=t[Symbol.asyncIterator]();ys(e,n,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function S9(t,n){return TC(bC(t),n)}function M9(t,n){if(t!=null){if(wC(t))return _9(t,n);if(F2(t))return b9(t,n);if(vC(t))return k9(t,n);if(yC(t))return TC(t,n);if(kC(t))return C9(t,n);if(CC(t))return S9(t,n)}throw xC(t)}function Zn(t,n){return n?M9(t,n):Dn(t)}function at(...t){let n=tc(t);return Zn(t,n)}function P2(t,n){let e=Vt(t)?t:()=>t,r=o=>o.error(e());return new Jt(n?o=>n.schedule(r,0,o):r)}function xs(t){return!!t&&(t instanceof Jt||Vt(t.lift)&&Vt(t.subscribe))}var ed=E2(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function T9(t){return t instanceof Date&&!isNaN(t)}function It(t,n){return Zt((e,r)=>{let o=0;e.subscribe(Wt(r,i=>{r.next(t.call(n,i,o++))}))})}var{isArray:ife}=Array;function sfe(t,n){return ife(n)?t(...n):t(n)}function B2(t){return It(n=>sfe(t,n))}var{isArray:afe}=Array,{getPrototypeOf:lfe,prototype:cfe,keys:ufe}=Object;function DC(t){if(t.length===1){let n=t[0];if(afe(n))return{args:n,keys:null};if(dfe(n)){let e=ufe(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}function dfe(t){return t&&typeof t=="object"&&lfe(t)===cfe}function EC(t,n){return t.reduce((e,r,o)=>(e[r]=n[o],e),{})}function fy(...t){let n=tc(t),e=gC(t),{args:r,keys:o}=DC(t);if(r.length===0)return Zn([],n);let i=new Jt(pfe(r,n,o?s=>EC(o,s):Qi));return e?i.pipe(B2(e)):i}function pfe(t,n,e=Qi){return r=>{D9(n,()=>{let{length:o}=t,i=new Array(o),s=o,a=o;for(let l=0;l<o;l++)D9(n,()=>{let c=Zn(t[l],n),u=!1;c.subscribe(Wt(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function D9(t,n,e){t?ys(e,t,n):n()}function E9(t,n,e,r,o,i,s,a){let l=[],c=0,u=0,d=!1,p=()=>{d&&!l.length&&!c&&n.complete()},h=m=>c<r?f(m):l.push(m),f=m=>{i&&n.next(m),c++;let g=!1;Dn(e(m,u++)).subscribe(Wt(n,v=>{o?.(v),i?h(v):n.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){let v=l.shift();s?ys(n,s,()=>f(v)):f(v)}p()}catch(v){n.error(v)}}))};return t.subscribe(Wt(n,h,()=>{d=!0,p()})),()=>{a?.()}}function lr(t,n,e=1/0){return Vt(n)?lr((r,o)=>It((i,s)=>n(r,i,o,s))(Dn(t(r,o))),e):(typeof n=="number"&&(e=n),Zt((r,o)=>E9(r,o,t,e)))}function pa(t=1/0){return lr(Qi,t)}function I9(){return pa(1)}function rl(...t){return I9()(Zn(t,tc(t)))}function td(t){return new Jt(n=>{Dn(t()).subscribe(n)})}function my(...t){let n=gC(t),{args:e,keys:r}=DC(t),o=new Jt(i=>{let{length:s}=e;if(!s){i.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;Dn(e[u]).subscribe(Wt(i,p=>{d||(d=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?EC(r,a):a),i.complete())}))}});return n?o.pipe(B2(n)):o}var hfe=["addListener","removeListener"],ffe=["addEventListener","removeEventListener"],mfe=["on","off"];function ol(t,n,e,r){if(Vt(e)&&(r=e,e=void 0),r)return ol(t,n,e).pipe(B2(r));let[o,i]=wfe(t)?ffe.map(s=>a=>t[s](n,a,e)):gfe(t)?hfe.map(N9(t,n)):vfe(t)?mfe.map(N9(t,n)):[];if(!o&&F2(t))return lr(s=>ol(s,n,e))(Dn(t));if(!o)throw new TypeError("Invalid event target");return new Jt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return o(a),()=>i(a)})}function N9(t,n){return e=>r=>t[e](n,r)}function gfe(t){return Vt(t.addListener)&&Vt(t.removeListener)}function vfe(t){return Vt(t.on)&&Vt(t.off)}function wfe(t){return Vt(t.addEventListener)&&Vt(t.removeEventListener)}function nd(t=0,n,e=f9){let r=-1;return n!=null&&(mC(n)?e=n:r=n),new Jt(o=>{let i=T9(t)?+t-e.now():t;i<0&&(i=0);let s=0;return e.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}function IC(t=0,n=Ju){return t<0&&(t=0),nd(t,t,n)}function nc(...t){let n=tc(t),e=m9(t,1/0),r=t;return r.length?r.length===1?Dn(r[0]):pa(e)(Zn(r,n)):ri}function A9(t,n){return(e,r)=>!t.call(n,e,r)}function xn(t,n){return Zt((e,r)=>{let o=0;e.subscribe(Wt(r,i=>t.call(n,i,o++)&&r.next(i)))})}function cA(t,n,e){return[xn(n,e)(Dn(t)),xn(A9(n,e))(Dn(t))]}function R9(t){return Zt((n,e)=>{let r=!1,o=null,i=null,s=!1,a=()=>{if(i?.unsubscribe(),i=null,r){r=!1;let c=o;o=null,e.next(c)}s&&e.complete()},l=()=>{i=null,s&&e.complete()};n.subscribe(Wt(e,c=>{r=!0,o=c,i||Dn(t(c)).subscribe(i=Wt(e,a,l))},()=>{s=!0,(!r||!i||i.closed)&&e.complete()}))})}function NC(t,n=Ju){return R9(()=>nd(t,n))}function rd(t){return Zt((n,e)=>{let r=null,o=!1,i;r=n.subscribe(Wt(e,void 0,void 0,s=>{i=Dn(t(s,rd(t)(n))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function O9(t,n,e,r,o){return(i,s)=>{let a=e,l=n,c=0;i.subscribe(Wt(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}function ha(t,n){return Vt(n)?lr(t,n,1):lr(t,1)}function fa(t,n=Ju){return Zt((e,r)=>{let o=null,i=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let c=i;i=null,r.next(c)}};function l(){let c=s+t,u=n.now();if(u<c){o=this.schedule(void 0,c-u),r.add(o);return}a()}e.subscribe(Wt(r,c=>{i=c,s=n.now(),o||(o=n.schedule(l,t),r.add(o))},()=>{a(),r.complete()},void 0,()=>{i=o=null}))})}function oh(t){return Zt((n,e)=>{let r=!1;n.subscribe(Wt(e,o=>{r=!0,e.next(o)},()=>{r||e.next(t),e.complete()}))})}function eo(t){return t<=0?()=>ri:Zt((n,e)=>{let r=0;n.subscribe(Wt(e,o=>{++r<=t&&(e.next(o),t<=r&&e.complete())}))})}function F9(){return Zt((t,n)=>{t.subscribe(Wt(n,Xf))})}function gy(t){return It(()=>t)}function uA(t,n){return n?e=>rl(n.pipe(eo(1),F9()),e.pipe(uA(t))):lr((e,r)=>Dn(t(e,r)).pipe(eo(1),gy(e)))}function dA(t,n=Ju){let e=nd(t,n);return uA(()=>e)}function L2(t,n=Qi){return t=t??yfe,Zt((e,r)=>{let o,i=!0;e.subscribe(Wt(r,s=>{let a=n(s);(i||!t(o,a))&&(i=!1,o=a,r.next(s))}))})}function yfe(t,n){return t===n}function AC(t=xfe){return Zt((n,e)=>{let r=!1;n.subscribe(Wt(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(t())))})}function xfe(){return new ed}function em(t){return Zt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function od(t,n){let e=arguments.length>=2;return r=>r.pipe(t?xn((o,i)=>t(o,i,r)):Qi,eo(1),e?oh(n):AC(()=>new ed))}function $2(t){return t<=0?()=>ri:Zt((n,e)=>{let r=[];n.subscribe(Wt(e,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function pA(t,n){let e=arguments.length>=2;return r=>r.pipe(t?xn((o,i)=>t(o,i,r)):Qi,$2(1),e?oh(n):AC(()=>new ed))}function hA(t,n){return Zt(O9(t,n,arguments.length>=2,!0))}function P9(t={}){let{connector:n=()=>new ot,resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,d=!1,p=()=>{a?.unsubscribe(),a=void 0},h=()=>{p(),s=l=void 0,u=d=!1},f=()=>{let m=s;h(),m?.unsubscribe()};return Zt((m,g)=>{c++,!d&&!u&&p();let v=l=l??n();g.add(()=>{c--,c===0&&!d&&!u&&(a=fA(f,o))}),v.subscribe(g),!s&&c>0&&(s=new Yu({next:w=>v.next(w),error:w=>{d=!0,p(),a=fA(h,e,w),v.error(w)},complete:()=>{u=!0,p(),a=fA(h,r),v.complete()}}),Dn(m).subscribe(s))})(i)}}function fA(t,n,...e){if(n===!0){t();return}if(n===!1)return;let r=new Yu({next:()=>{r.unsubscribe(),t()}});return Dn(n(...e)).subscribe(r)}function tm(t,n,e){let r,o=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:n=1/0,refCount:o=!1,scheduler:e}=t:r=t??1/0,P9({connector:()=>new Qu(r,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function nm(t){return xn((n,e)=>t<=e)}function mA(t){return Zt((n,e)=>{let r=!1,o=0;n.subscribe(Wt(e,i=>(r||(r=!t(i,o++)))&&e.next(i)))})}function ma(...t){let n=tc(t);return Zt((e,r)=>{(n?rl(t,e,n):rl(t,e)).subscribe(r)})}function Pr(t,n){return Zt((e,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();e.subscribe(Wt(r,l=>{o?.unsubscribe();let c=0,u=i++;Dn(t(l,u)).subscribe(o=Wt(r,d=>r.next(n?n(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function en(t){return Zt((n,e)=>{Dn(t).subscribe(Wt(e,()=>e.complete(),Xf)),!e.closed&&n.subscribe(e)})}function gA(t,n=!1){return Zt((e,r)=>{let o=0;e.subscribe(Wt(r,i=>{let s=t(i,o++);(s||n)&&r.next(i),!s&&r.complete()}))})}function Bo(t,n,e){let r=Vt(t)||n||e?{next:t,error:n,complete:e}:t;return r?Zt((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Wt(i,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Qi}var Nj="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Ne=class extends Error{code;constructor(n,e){super(FR(n,e)),this.code=n}};function _fe(t){return`NG0${Math.abs(t)}`}function FR(t,n){return`${_fe(t)}${n?": "+n:""}`}var y4=Symbol("InputSignalNode#UNSET"),Aj=pt(ue({},uy),{transformFn:void 0,applyValueToInputSignal(t,n){Kf(t,n)}});function Rj(t,n){let e=Object.create(Aj);e.value=t,e.transformFn=n?.transform;function r(){if(nh(e),e.value===y4){let o=null;throw new Ne(-950,o)}return e.value}return r[ni]=e,r}function Ny(t){return{toString:t}.toString()}var RC="__parameters__";function kfe(t){return function(...e){if(t){let r=t(...e);for(let o in r)this[o]=r[o]}}}function PR(t,n,e){return Ny(()=>{let r=kfe(n);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(RC)?l[RC]:Object.defineProperty(l,RC,{value:[]})[RC];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return o.prototype.ngMetadataName=t,o.annotationCls=o,o})}var om=globalThis;function cr(t){for(let n in t)if(t[n]===cr)return n;throw Error("Could not find renamed property on target object.")}function bfe(t,n){for(let e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function ks(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(ks).join(", ")}]`;if(t==null)return""+t;let n=t.overriddenName||t.name;if(n)return`${n}`;let e=t.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function AA(t,n){return t?n?`${t} ${n}`:t:n||""}var Cfe=cr({__forward_ref__:cr});function vi(t){return t.__forward_ref__=vi,t.toString=function(){return ks(this())},t}function gi(t){return Oj(t)?t():t}function Oj(t){return typeof t=="function"&&t.hasOwnProperty(Cfe)&&t.__forward_ref__===vi}function ke(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Tt(t){return{providers:t.providers||[],imports:t.imports||[]}}function x4(t){return B9(t,Pj)||B9(t,Bj)}function Fj(t){return x4(t)!==null}function B9(t,n){return t.hasOwnProperty(n)?t[n]:null}function Sfe(t){let n=t&&(t[Pj]||t[Bj]);return n||null}function L9(t){return t&&(t.hasOwnProperty($9)||t.hasOwnProperty(Mfe))?t[$9]:null}var Pj=cr({\u0275prov:cr}),$9=cr({\u0275inj:cr}),Bj=cr({ngInjectableDef:cr}),Mfe=cr({ngInjectorDef:cr}),Me=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,e){this._desc=n,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=ke({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Lj(t){return t&&!!t.\u0275providers}var Tfe=cr({\u0275cmp:cr}),Dfe=cr({\u0275dir:cr}),Efe=cr({\u0275pipe:cr}),Ife=cr({\u0275mod:cr}),zC=cr({\u0275fac:cr}),xy=cr({__NG_ELEMENT_ID__:cr}),V9=cr({__NG_ENV_ID__:cr});function _4(t){return typeof t=="string"?t:t==null?"":String(t)}function Nfe(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():_4(t)}function $j(t,n){throw new Ne(-200,t)}function BR(t,n){throw new Ne(-201,!1)}var mn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(mn||{}),RA;function Vj(){return RA}function _s(t){let n=RA;return RA=t,n}function jj(t,n,e){let r=x4(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&mn.Optional)return null;if(n!==void 0)return n;BR(t,"Injector")}var Afe={},im=Afe,OA="__NG_DI_FLAG__",HC=class{injector;constructor(n){this.injector=n}retrieve(n,e){let r=e;return this.injector.get(n,r.optional?sC:im,r)}},UC="ngTempTokenPath",Rfe="ngTokenPath",Ofe=/\n/gm,Ffe="\u0275",j9="__source";function Pfe(t,n=mn.Default){if(dy()===void 0)throw new Ne(-203,!1);if(dy()===null)return jj(t,void 0,n);{let e=dy(),r;return e instanceof HC?r=e.injector:r=e,r.get(t,n&mn.Optional?null:void 0,n)}}function Xe(t,n=mn.Default){return(Vj()||Pfe)(gi(t),n)}function I(t,n=mn.Default){return Xe(t,k4(n))}function k4(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function FA(t){let n=[];for(let e=0;e<t.length;e++){let r=gi(t[e]);if(Array.isArray(r)){if(r.length===0)throw new Ne(900,!1);let o,i=mn.Default;for(let s=0;s<r.length;s++){let a=r[s],l=Bfe(a);typeof l=="number"?l===-1?o=a.token:i|=l:o=a}n.push(Xe(o,i))}else n.push(Xe(r))}return n}function LR(t,n){return t[OA]=n,t.prototype[OA]=n,t}function Bfe(t){return t[OA]}function Lfe(t,n,e,r){let o=t[UC];throw n[j9]&&o.unshift(n[j9]),t.message=$fe(`
`+t.message,o,e,r),t[Rfe]=o,t[UC]=null,t}function $fe(t,n,e,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Ffe?t.slice(2):t;let o=ks(n);if(Array.isArray(n))o=n.map(ks).join(" -> ");else if(typeof n=="object"){let i=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):ks(a)))}o=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${t.replace(Ofe,`
  `)}`}var b4=LR(PR("Inject",t=>({token:t})),-1),r1=LR(PR("Optional"),8);var Ay=LR(PR("SkipSelf"),4);function am(t,n){let e=t.hasOwnProperty(zC);return e?t[zC]:null}function Vfe(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=n[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}function jfe(t){return t.flat(Number.POSITIVE_INFINITY)}function $R(t,n){t.forEach(e=>Array.isArray(e)?$R(e,n):n(e))}function zj(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function GC(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function zfe(t,n){let e=[];for(let r=0;r<t;r++)e.push(n);return e}function Hfe(t,n,e,r){let o=t.length;if(o==n)t.push(e,r);else if(o===1)t.push(r,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;){let i=o-2;t[o]=t[i],o--}t[n]=e,t[n+1]=r}}function Ry(t,n,e){let r=Oy(t,n);return r>=0?t[r|1]=e:(r=~r,Hfe(t,r,n,e)),r}function vA(t,n){let e=Oy(t,n);if(e>=0)return t[e|1]}function Oy(t,n){return Ufe(t,n,1)}function Ufe(t,n,e){let r=0,o=t.length>>e;for(;o!==r;){let i=r+(o-r>>1),s=t[i<<e];if(n===s)return i<<e;s>n?o=i:r=i+1}return~(o<<e)}var oc={},Ji=[],ky=new Me(""),Hj=new Me("",-1),Uj=new Me(""),WC=class{get(n,e=im){if(e===im){let r=new Error(`NullInjectorError: No provider for ${ks(n)}!`);throw r.name="NullInjectorError",r}return e}};function Gj(t,n){let e=t[Ife]||null;if(!e&&n===!0)throw new Error(`Type ${ks(t)} does not have '\u0275mod' property.`);return e}function ah(t){return t[Tfe]||null}function Wj(t){return t[Dfe]||null}function Gfe(t){return t[Efe]||null}function gm(t){return{\u0275providers:t}}function VR(...t){return{\u0275providers:qj(!0,t),\u0275fromNgModule:!0}}function qj(t,...n){let e=[],r=new Set,o,i=s=>{e.push(s)};return $R(n,s=>{let a=s;PA(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&Kj(o,i),e}function Kj(t,n){for(let e=0;e<t.length;e++){let{ngModule:r,providers:o}=t[e];jR(o,i=>{n(i,r)})}}function PA(t,n,e,r){if(t=gi(t),!t)return!1;let o=null,i=L9(t),s=!i&&ah(t);if(!i&&!s){let l=t.ngModule;if(i=L9(l),i)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=t}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)PA(c,n,e,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{$R(i.imports,u=>{PA(u,n,e,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Kj(c,n)}if(!a){let c=am(o)||(()=>new o);n({provide:o,useFactory:c,deps:Ji},o),n({provide:Uj,useValue:o,multi:!0},o),n({provide:ky,useValue:()=>Xe(o),multi:!0},o)}let l=i.providers;if(l!=null&&!a){let c=t;jR(l,u=>{n(u,c)})}}else return!1;return o!==t&&t.providers!==void 0}function jR(t,n){for(let e of t)Lj(e)&&(e=e.\u0275providers),Array.isArray(e)?jR(e,n):n(e)}var Wfe=cr({provide:String,useValue:cr});function Zj(t){return t!==null&&typeof t=="object"&&Wfe in t}function qfe(t){return!!(t&&t.useExisting)}function Kfe(t){return!!(t&&t.useFactory)}function W2(t){return typeof t=="function"}function Zfe(t){return!!t.useClass}var C4=new Me(""),PC={},z9={},wA;function S4(){return wA===void 0&&(wA=new WC),wA}var to=class{},by=class extends to{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,LA(n,s=>this.processProvider(s)),this.records.set(Hj,V2(void 0,this)),o.has("environment")&&this.records.set(to,V2(void 0,this));let i=this.records.get(C4);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Uj,Ji,mn.Self))}retrieve(n,e){let r=e;return this.get(n,r.optional?sC:im,r)}destroy(){wy(this),this._destroyed=!0;let n=dn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),dn(n)}}onDestroy(n){return wy(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){wy(this);let e=Xu(this),r=_s(void 0),o;try{return n()}finally{Xu(e),_s(r)}}get(n,e=im,r=mn.Default){if(wy(this),n.hasOwnProperty(V9))return n[V9](this);r=k4(r);let o,i=Xu(this),s=_s(void 0);try{if(!(r&mn.SkipSelf)){let l=this.records.get(n);if(l===void 0){let c=eme(n)&&x4(n);c&&this.injectableDefInScope(c)?l=V2(BA(n),PC):l=null,this.records.set(n,l)}if(l!=null)return this.hydrate(n,l)}let a=r&mn.Self?S4():this.parent;return e=r&mn.Optional&&e===im?null:e,a.get(n,e)}catch(a){if(a.name==="NullInjectorError"){if((a[UC]=a[UC]||[]).unshift(ks(n)),i)throw a;return Lfe(a,n,"R3InjectorError",this.source)}else throw a}finally{_s(s),Xu(i)}}resolveInjectorInitializers(){let n=dn(null),e=Xu(this),r=_s(void 0),o;try{let i=this.get(ky,Ji,mn.Self);for(let s of i)s()}finally{Xu(e),_s(r),dn(n)}}toString(){let n=[],e=this.records;for(let r of e.keys())n.push(ks(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=gi(n);let e=W2(n)?n:gi(n&&n.provide),r=Yfe(n);if(!W2(n)&&n.multi===!0){let o=this.records.get(e);o||(o=V2(void 0,PC,!0),o.factory=()=>FA(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,r)}hydrate(n,e){let r=dn(null);try{return e.value===z9?$j(ks(n)):e.value===PC&&(e.value=z9,e.value=e.factory()),typeof e.value=="object"&&e.value&&Jfe(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{dn(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=gi(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function BA(t){let n=x4(t),e=n!==null?n.factory:am(t);if(e!==null)return e;if(t instanceof Me)throw new Ne(204,!1);if(t instanceof Function)return Xfe(t);throw new Ne(204,!1)}function Xfe(t){if(t.length>0)throw new Ne(204,!1);let e=Sfe(t);return e!==null?()=>e.factory(t):()=>new t}function Yfe(t){if(Zj(t))return V2(void 0,t.useValue);{let n=Xj(t);return V2(n,PC)}}function Xj(t,n,e){let r;if(W2(t)){let o=gi(t);return am(o)||BA(o)}else if(Zj(t))r=()=>gi(t.useValue);else if(Kfe(t))r=()=>t.useFactory(...FA(t.deps||[]));else if(qfe(t))r=()=>Xe(gi(t.useExisting));else{let o=gi(t&&(t.useClass||t.provide));if(Qfe(t))r=()=>new o(...FA(t.deps));else return am(o)||BA(o)}return r}function wy(t){if(t.destroyed)throw new Ne(205,!1)}function V2(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Qfe(t){return!!t.deps}function Jfe(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function eme(t){return typeof t=="function"||typeof t=="object"&&t instanceof Me}function LA(t,n){for(let e of t)Array.isArray(e)?LA(e,n):e&&Lj(e)?LA(e.\u0275providers,n):n(e)}function Vo(t,n){let e;t instanceof by?(wy(t),e=t):e=new HC(t);let r,o=Xu(e),i=_s(void 0);try{return n()}finally{Xu(o),_s(i)}}function Yj(){return Vj()!==void 0||dy()!=null}function uh(t){if(!Yj())throw new Ne(-203,!1)}function tme(t){return typeof t=="function"}var ad=0,cn=1,tn=2,Ei=3,sl=4,Cs=5,q2=6,qC=7,$o=8,K2=9,id=10,jr=11,Cy=12,H9=13,o1=14,Zs=15,lm=16,j2=17,sd=18,M4=19,Qj=20,ih=21,yA=22,cm=23,ga=24,U2=25,co=26,Jj=1;var um=7,KC=8,Z2=9,Di=10;function sh(t){return Array.isArray(t)&&typeof t[Jj]=="object"}function ld(t){return Array.isArray(t)&&t[Jj]===!0}function zR(t){return(t.flags&4)!==0}function i1(t){return t.componentOffset>-1}function T4(t){return(t.flags&1)===1}function ic(t){return!!t.template}function ZC(t){return(t[tn]&512)!==0}function Fy(t){return(t[tn]&256)===256}var $A=class{previousValue;currentValue;firstChange;constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function ez(t,n,e,r){n!==null?n.applyValueToInputSignal(n,r):t[e]=r}var uo=(()=>{let t=()=>tz;return t.ngInherit=!0,t})();function tz(t){return t.type.prototype.ngOnChanges&&(t.setInput=rme),nme}function nme(){let t=rz(this),n=t?.current;if(n){let e=t.previous;if(e===oc)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function rme(t,n,e,r,o){let i=this.declaredInputs[r],s=rz(t)||ome(t,{previous:oc,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[i];a[i]=new $A(c&&c.currentValue,e,l===oc),ez(t,n,o,e)}var nz="__ngSimpleChanges__";function rz(t){return t[nz]||null}function ome(t,n){return t[nz]=n}var U9=null;var Jn=function(t,n=null,e){U9?.(t,n,e)},oz="svg",ime="math";function sc(t){for(;Array.isArray(t);)t=t[ad];return t}function iz(t,n){return sc(n[t])}function dc(t,n){return sc(n[t.index])}function HR(t,n){return t.data[n]}function Py(t,n){return t[n]}function ac(t,n){let e=n[t];return sh(e)?e:e[ad]}function sme(t){return(t[tn]&4)===4}function UR(t){return(t[tn]&128)===128}function ame(t){return ld(t[Ei])}function lh(t,n){return n==null?null:t[n]}function sz(t){t[j2]=0}function az(t){t[tn]&1024||(t[tn]|=1024,UR(t)&&s1(t))}function lme(t,n){for(;t>0;)n=n[o1],t--;return n}function D4(t){return!!(t[tn]&9216||t[ga]?.dirty)}function VA(t){t[id].changeDetectionScheduler?.notify(8),t[tn]&64&&(t[tn]|=1024),D4(t)&&s1(t)}function s1(t){t[id].changeDetectionScheduler?.notify(0);let n=dm(t);for(;n!==null&&!(n[tn]&8192||(n[tn]|=8192,!UR(n)));)n=dm(n)}function lz(t,n){if(Fy(t))throw new Ne(911,!1);t[ih]===null&&(t[ih]=[]),t[ih].push(n)}function cme(t,n){if(t[ih]===null)return;let e=t[ih].indexOf(n);e!==-1&&t[ih].splice(e,1)}function dm(t){let n=t[Ei];return ld(n)?n[Ei]:n}function GR(t){return t[qC]??=[]}function WR(t){return t.cleanup??=[]}function ume(t,n,e,r){let o=GR(n);o.push(e),t.firstCreatePass&&WR(t).push(r,o.length-1)}var hn={lFrame:mz(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jA=!1;function dme(){return hn.lFrame.elementDepthCount}function pme(){hn.lFrame.elementDepthCount++}function hme(){hn.lFrame.elementDepthCount--}function qR(){return hn.bindingsEnabled}function cz(){return hn.skipHydrationRootTNode!==null}function fme(t){return hn.skipHydrationRootTNode===t}function mme(){hn.skipHydrationRootTNode=null}function jt(){return hn.lFrame.lView}function Hr(){return hn.lFrame.tView}function Ge(t){return hn.lFrame.contextLView=t,t[$o]}function We(t){return hn.lFrame.contextLView=null,t}function Ii(){let t=uz();for(;t!==null&&t.type===64;)t=t.parent;return t}function uz(){return hn.lFrame.currentTNode}function gme(){let t=hn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function vm(t,n){let e=hn.lFrame;e.currentTNode=t,e.isParent=n}function KR(){return hn.lFrame.isParent}function ZR(){hn.lFrame.isParent=!1}function vme(){return hn.lFrame.contextLView}function dz(){return jA}function XC(t){let n=jA;return jA=t,n}function pc(){let t=hn.lFrame,n=t.bindingRootIndex;return n===-1&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function wme(t){return hn.lFrame.bindingIndex=t}function wm(){return hn.lFrame.bindingIndex++}function pz(t){let n=hn.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function yme(){return hn.lFrame.inI18n}function xme(t,n){let e=hn.lFrame;e.bindingIndex=e.bindingRootIndex=t,zA(n)}function _me(){return hn.lFrame.currentDirectiveIndex}function zA(t){hn.lFrame.currentDirectiveIndex=t}function kme(t){let n=hn.lFrame.currentDirectiveIndex;return n===-1?null:t[n]}function XR(){return hn.lFrame.currentQueryIndex}function E4(t){hn.lFrame.currentQueryIndex=t}function bme(t){let n=t[cn];return n.type===2?n.declTNode:n.type===1?t[Cs]:null}function hz(t,n,e){if(e&mn.SkipSelf){let o=n,i=t;for(;o=o.parent,o===null&&!(e&mn.Host);)if(o=bme(i),o===null||(i=i[o1],o.type&10))break;if(o===null)return!1;n=o,t=i}let r=hn.lFrame=fz();return r.currentTNode=n,r.lView=t,!0}function YR(t){let n=fz(),e=t[cn];hn.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function fz(){let t=hn.lFrame,n=t===null?null:t.child;return n===null?mz(t):n}function mz(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function gz(){let t=hn.lFrame;return hn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var vz=gz;function QR(){let t=gz();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Cme(t){return(hn.lFrame.contextLView=lme(t,hn.lFrame.contextLView))[$o]}function dh(){return hn.lFrame.selectedIndex}function pm(t){hn.lFrame.selectedIndex=t}function I4(){let t=hn.lFrame;return HR(t.tView,t.selectedIndex)}function ph(){hn.lFrame.currentNamespace=oz}function Sme(){return hn.lFrame.currentNamespace}var wz=!0;function N4(){return wz}function A4(t){wz=t}function Mme(t,n,e){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=n.type.prototype;if(r){let s=tz(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}o&&(e.preOrderHooks??=[]).push(0-t,o),i&&((e.preOrderHooks??=[]).push(t,i),(e.preOrderCheckHooks??=[]).push(t,i))}function JR(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){let i=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??=[]).push(-e,s),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),u!=null&&(t.destroyHooks??=[]).push(e,u)}}function BC(t,n,e){yz(t,n,3,e)}function LC(t,n,e,r){(t[tn]&3)===e&&yz(t,n,e,r)}function xA(t,n){let e=t[tn];(e&3)===n&&(e&=16383,e+=1,t[tn]=e)}function yz(t,n,e,r){let o=r!==void 0?t[j2]&65535:0,i=r??-1,s=n.length-1,a=0;for(let l=o;l<s;l++)if(typeof n[l+1]=="number"){if(a=n[l],r!=null&&a>=r)break}else n[l]<0&&(t[j2]+=65536),(a<i||i==-1)&&(Tme(t,e,n,l),t[j2]=(t[j2]&4294901760)+l+2),l++}function G9(t,n){Jn(4,t,n);let e=dn(null);try{n.call(t)}finally{dn(e),Jn(5,t,n)}}function Tme(t,n,e,r){let o=e[r]<0,i=e[r+1],s=o?-e[r]:e[r],a=t[s];o?t[tn]>>14<t[j2]>>16&&(t[tn]&3)===n&&(t[tn]+=16384,G9(a,i)):G9(a,i)}var G2=-1,hm=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,e,r){this.factory=n,this.canSeeViewProviders=e,this.injectImpl=r}};function Dme(t){return(t.flags&8)!==0}function Eme(t){return(t.flags&16)!==0}function Ime(t,n,e){let r=0;for(;r<e.length;){let o=e[r];if(typeof o=="number"){if(o!==0)break;r++;let i=e[r++],s=e[r++],a=e[r++];t.setAttribute(n,s,a,i)}else{let i=o,s=e[++r];Nme(i)?t.setProperty(n,i,s):t.setAttribute(n,i,s),r++}}return r}function xz(t){return t===3||t===4||t===6}function Nme(t){return t.charCodeAt(0)===64}function X2(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){let o=n[r];typeof o=="number"?e=o:e===0||(e===-1||e===2?W9(t,e,o,null,n[++r]):W9(t,e,o,null,null))}}return t}function W9(t,n,e,r,o){let i=0,s=t.length;if(n===-1)s=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===n){s=-1;break}else if(a>n){s=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===e){o!==null&&(t[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(t.splice(s,0,n),i=s+1),t.splice(i++,0,e),o!==null&&t.splice(i++,0,o)}function _z(t){return t!==G2}function YC(t){return t&32767}function Ame(t){return t>>16}function QC(t,n){let e=Ame(t),r=n;for(;e>0;)r=r[o1],e--;return r}var HA=!0;function JC(t){let n=HA;return HA=t,n}var Rme=256,kz=Rme-1,bz=5,Ome=0,rc={};function Fme(t,n,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(xy)&&(r=e[xy]),r==null&&(r=e[xy]=Ome++);let o=r&kz,i=1<<o;n.data[t+(o>>bz)]|=i}function e4(t,n){let e=Cz(t,n);if(e!==-1)return e;let r=n[cn];r.firstCreatePass&&(t.injectorIndex=n.length,_A(r.data,t),_A(n,null),_A(r.blueprint,null));let o=e5(t,n),i=t.injectorIndex;if(_z(o)){let s=YC(o),a=QC(o,n),l=a[cn].data;for(let c=0;c<8;c++)n[i+c]=a[s+c]|l[s+c]}return n[i+8]=o,i}function _A(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Cz(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function e5(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let e=0,r=null,o=n;for(;o!==null;){if(r=Ez(o),r===null)return G2;if(e++,o=o[o1],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return G2}function UA(t,n,e){Fme(t,n,e)}function Pme(t,n){if(n==="class")return t.classes;if(n==="style")return t.styles;let e=t.attrs;if(e){let r=e.length,o=0;for(;o<r;){let i=e[o];if(xz(i))break;if(i===0)o=o+2;else if(typeof i=="number")for(o++;o<r&&typeof e[o]=="string";)o++;else{if(i===n)return e[o+1];o=o+2}}}return null}function Sz(t,n,e){if(e&mn.Optional||t!==void 0)return t;BR(n,"NodeInjector")}function Mz(t,n,e,r){if(e&mn.Optional&&r===void 0&&(r=null),(e&(mn.Self|mn.Host))===0){let o=t[K2],i=_s(void 0);try{return o?o.get(n,r,e&mn.Optional):jj(n,r,e&mn.Optional)}finally{_s(i)}}return Sz(r,n,e)}function Tz(t,n,e,r=mn.Default,o){if(t!==null){if(n[tn]&2048&&!(r&mn.Self)){let s=Vme(t,n,e,r,rc);if(s!==rc)return s}let i=Dz(t,n,e,r,rc);if(i!==rc)return i}return Mz(n,e,r,o)}function Dz(t,n,e,r,o){let i=Lme(e);if(typeof i=="function"){if(!hz(n,t,r))return r&mn.Host?Sz(o,e,r):Mz(n,e,r,o);try{let s;if(s=i(r),s==null&&!(r&mn.Optional))BR(e);else return s}finally{vz()}}else if(typeof i=="number"){let s=null,a=Cz(t,n),l=G2,c=r&mn.Host?n[Zs][Cs]:null;for((a===-1||r&mn.SkipSelf)&&(l=a===-1?e5(t,n):n[a+8],l===G2||!K9(r,!1)?a=-1:(s=n[cn],a=YC(l),n=QC(l,n)));a!==-1;){let u=n[cn];if(q9(i,a,u.data)){let d=Bme(a,n,e,s,r,c);if(d!==rc)return d}l=n[a+8],l!==G2&&K9(r,n[cn].data[a+8]===c)&&q9(i,a,n)?(s=u,a=YC(l),n=QC(l,n)):a=-1}}return o}function Bme(t,n,e,r,o,i){let s=n[cn],a=s.data[t+8],l=r==null?i1(a)&&HA:r!=s&&(a.type&3)!==0,c=o&mn.Host&&i===a,u=$C(a,s,e,l,c);return u!==null?Sy(n,s,u,a):rc}function $C(t,n,e,r,o){let i=t.providerIndexes,s=n.data,a=i&1048575,l=t.directiveStart,c=t.directiveEnd,u=i>>20,d=r?a:a+u,p=o?a+u:c;for(let h=d;h<p;h++){let f=s[h];if(h<l&&e===f||h>=l&&f.type===e)return h}if(o){let h=s[l];if(h&&ic(h)&&h.type===e)return l}return null}function Sy(t,n,e,r){let o=t[e],i=n.data;if(o instanceof hm){let s=o;s.resolving&&$j(Nfe(i[e]));let a=JC(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?_s(s.injectImpl):null,u=hz(t,r,mn.Default);try{o=t[e]=s.factory(void 0,i,t,r),n.firstCreatePass&&e>=r.directiveStart&&Mme(e,i[e],n)}finally{c!==null&&_s(c),JC(a),s.resolving=!1,vz()}}return o}function Lme(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(xy)?t[xy]:void 0;return typeof n=="number"?n>=0?n&kz:$me:n}function q9(t,n,e){let r=1<<t;return!!(e[n+(t>>bz)]&r)}function K9(t,n){return!(t&mn.Self)&&!(t&mn.Host&&n)}var sm=class{_tNode;_lView;constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return Tz(this._tNode,this._lView,n,k4(r),e)}};function $me(){return new sm(Ii(),jt())}function Ur(t){return Ny(()=>{let n=t.prototype.constructor,e=n[zC]||GA(n),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[zC]||GA(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function GA(t){return Oj(t)?()=>{let n=GA(gi(t));return n&&n()}:am(t)}function Vme(t,n,e,r,o){let i=t,s=n;for(;i!==null&&s!==null&&s[tn]&2048&&!ZC(s);){let a=Dz(i,s,e,r|mn.Self,rc);if(a!==rc)return a;let l=i.parent;if(!l){let c=s[Qj];if(c){let u=c.get(e,rc,r);if(u!==rc)return u}l=Ez(s),s=s[o1]}i=l}return o}function Ez(t){let n=t[cn],e=n.type;return e===2?n.declTNode:e===1?t[Cs]:null}function R4(t){return Pme(Ii(),t)}function Z9(t,n=null,e=null,r){let o=Iz(t,n,e,r);return o.resolveInjectorInitializers(),o}function Iz(t,n=null,e=null,r,o=new Set){let i=[e||Ji,VR(t)];return r=r||(typeof t=="object"?void 0:ks(t)),new by(i,n||S4(),r||null,o)}var Yt=class t{static THROW_IF_NOT_FOUND=im;static NULL=new WC;static create(n,e){if(Array.isArray(n))return Z9({name:""},e,n,"");{let r=n.name??"";return Z9({name:r},n.parent,n.providers,r)}}static \u0275prov=ke({token:t,providedIn:"any",factory:()=>Xe(Hj)});static __NG_ELEMENT_ID__=-1};var Y2=class{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>R4(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},jme=new Me("");jme.__NG_ELEMENT_ID__=t=>{let n=Ii();if(n===null)throw new Ne(204,!1);if(n.type&2)return n.value;if(t&mn.Optional)return null;throw new Ne(204,!1)};var Nz=!1,jo=(()=>{class t{static __NG_ELEMENT_ID__=zme;static __NG_ENV_ID__=e=>e}return t})(),t4=class extends jo{_lView;constructor(n){super(),this._lView=n}onDestroy(n){return lz(this._lView,n),()=>cme(this._lView,n)}};function zme(){return new t4(jt())}var ch=class{},t5=new Me("",{providedIn:"root",factory:()=>!1});var Az=new Me(""),Rz=new Me(""),hh=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Kn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ke({token:t,providedIn:"root",factory:()=>new t})}return t})();var WA=class extends ot{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,Yj()&&(this.destroyRef=I(jo,{optional:!0})??void 0,this.pendingTasks=I(hh,{optional:!0})??void 0)}emit(n){let e=dn(null);try{super.next(n)}finally{dn(e)}}subscribe(n,e,r){let o=n,i=e||(()=>null),s=r;if(n&&typeof n=="object"){let l=n;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return n instanceof On&&n.add(a),a}wrapInTimeout(n){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{n(e),r!==void 0&&this.pendingTasks?.remove(r)})}}},Xt=WA;function My(...t){}function Oz(t){let n,e;function r(){t=My;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{t(),r()})),()=>r()}function X9(t){return queueMicrotask(()=>t()),()=>{t=My}}var n5="isAngularZone",n4=n5+"_ID",Hme=0,Pt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Xt(!1);onMicrotaskEmpty=new Xt(!1);onStable=new Xt(!1);onError=new Xt(!1);constructor(n){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=Nz}=n;if(typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,Wme(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(n5)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Ne(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,n,Ume,My,My);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}},Ume={};function r5(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Gme(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function n(){Oz(()=>{t.callbackScheduled=!1,qA(t),t.isCheckStableRunning=!0,r5(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{n()}):t._outer.run(()=>{n()}),qA(t)}function Wme(t){let n=()=>{Gme(t)},e=Hme++;t._inner=t._inner.fork({name:"angular",properties:{[n5]:!0,[n4]:e,[n4+e]:!0},onInvokeTask:(r,o,i,s,a,l)=>{if(qme(l))return r.invokeTask(i,s,a,l);try{return Y9(t),r.invokeTask(i,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),Q9(t)}},onInvoke:(r,o,i,s,a,l,c)=>{try{return Y9(t),r.invoke(i,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Kme(l)&&n(),Q9(t)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,qA(t),r5(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function qA(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Y9(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Q9(t){t._nesting--,r5(t)}var KA=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Xt;onMicrotaskEmpty=new Xt;onStable=new Xt;onError=new Xt;run(n,e,r){return n.apply(e,r)}runGuarded(n,e,r){return n.apply(e,r)}runOutsideAngular(n){return n()}runTask(n,e,r,o){return n.apply(e,r)}};function qme(t){return Fz(t,"__ignore_ng_zone__")}function Kme(t){return Fz(t,"__scheduler_tick__")}function Fz(t,n){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[n]===!0}var al=class{_console=console;handleError(n){this._console.error("ERROR",n)}},Zme=new Me("",{providedIn:"root",factory:()=>{let t=I(Pt),n=I(al);return e=>t.runOutsideAngular(()=>n.handleError(e))}}),r4=class{destroyed=!1;listeners=null;errorHandler=I(al,{optional:!0});destroyRef=I(jo);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(n){if(this.destroyed)throw new Ne(953,!1);return(this.listeners??=[]).push(n),{unsubscribe:()=>{let e=this.listeners?.indexOf(n);e!==void 0&&e!==-1&&this.listeners?.splice(e,1)}}}emit(n){if(this.destroyed){console.warn(FR(953,!1));return}if(this.listeners===null)return;let e=dn(null);try{for(let r of this.listeners)try{r(n)}catch(o){this.errorHandler?.handleError(o)}}finally{dn(e)}}};function $n(t){return new r4}function J9(t,n){return Rj(t,n)}function Xme(t){return Rj(y4,t)}var Y=(J9.required=Xme,J9);function Yme(){return a1(Ii(),jt())}function a1(t,n){return new Mt(dc(t,n))}var Mt=(()=>{class t{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=Yme}return t})();function Pz(t){return t instanceof Mt?t.nativeElement:t}function O4(t){return typeof t=="function"&&t[ni]!==void 0}function Ye(t,n){let e=KN(t,n?.equal),r=e[ni];return e.set=o=>Kf(r,o),e.update=o=>oC(r,o),e.asReadonly=o5.bind(e),e}function o5(){let t=this[ni];if(t.readonlyFn===void 0){let n=()=>this();n[ni]=t,t.readonlyFn=n}return t.readonlyFn}function Bz(t){return O4(t)&&typeof t.set=="function"}function Qme(){return this._results[Symbol.iterator]()}var Q2=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ot}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let r=jfe(n);(this._changesDetected=!Vfe(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Qme};function Lz(t){return(t.flags&128)===128}var $z=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}($z||{}),Vz=new Map,Jme=0;function ege(){return Jme++}function tge(t){Vz.set(t[M4],t)}function ZA(t){Vz.delete(t[M4])}var ej="__ngContext__";function l1(t,n){sh(n)?(t[ej]=n[M4],tge(n)):t[ej]=n}function jz(t){return Hz(t[Cy])}function zz(t){return Hz(t[sl])}function Hz(t){for(;t!==null&&!ld(t);)t=t[sl];return t}var XA;function Uz(t){XA=t}function nge(){if(XA!==void 0)return XA;if(typeof document<"u")return document;throw new Ne(210,!1)}var By=new Me("",{providedIn:"root",factory:()=>rge}),rge="ng",i5=new Me(""),xo=new Me("",{providedIn:"platform",factory:()=>"unknown"});var ym=new Me(""),s5=new Me("",{providedIn:"root",factory:()=>nge().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oge="h",ige="b";var Gz=!1,sge=new Me("",{providedIn:"root",factory:()=>Gz});var a5=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(a5||{}),xm=new Me(""),tj=new Set;function cl(t){tj.has(t)||(tj.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var F4=(()=>{class t{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=age}return t})();function age(){return new F4(jt(),Ii())}var z2=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(z2||{}),l5=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=ke({token:t,providedIn:"root",factory:()=>new t})}return t})(),Wz=[z2.EarlyRead,z2.Write,z2.MixedReadWrite,z2.Read],qz=(()=>{class t{ngZone=I(Pt);scheduler=I(ch);errorHandler=I(al,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){I(xm,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Jn(16),this.executing=!0;for(let r of Wz)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=o.hooks[r];return i(o.pipelinedValue)},o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Jn(17)}register(e){let{view:r}=e;r!==void 0?((r[U2]??=[]).push(e),s1(r),r[tn]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(a5.AFTER_NEXT_RENDER,e):e()}static \u0275prov=ke({token:t,providedIn:"root",factory:()=>new t})}return t})(),o4=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,e,r,o,i,s=null){this.impl=n,this.hooks=e,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let n=this.view?.[U2];n&&(this.view[U2]=n.filter(e=>e!==this))}};function c5(t,n){!n?.injector&&uh(c5);let e=n?.injector??I(Yt);return cl("NgAfterRender"),Kz(t,e,n,!1)}function wi(t,n){!n?.injector&&uh(wi);let e=n?.injector??I(Yt);return cl("NgAfterNextRender"),Kz(t,e,n,!0)}function lge(t,n){if(t instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[n]=t,e}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Kz(t,n,e,r){let o=n.get(l5);o.impl??=n.get(qz);let i=n.get(xm,null,{optional:!0}),s=e?.phase??z2.MixedReadWrite,a=e?.manualCleanup!==!0?n.get(jo):null,l=n.get(F4,null,{optional:!0}),c=new o4(o.impl,lge(t,s),l?.view,r,a,i?.snapshot(null));return o.impl.register(c),c}var cge=()=>null;function Zz(t,n,e=!1){return cge(t,n,e)}function Xz(t,n){let e=t.contentQueries;if(e!==null){let r=dn(null);try{for(let o=0;o<e.length;o+=2){let i=e[o],s=e[o+1];if(s!==-1){let a=t.data[s];E4(i),a.contentQueries(2,n[s],s)}}}finally{dn(r)}}}function YA(t,n,e){E4(0);let r=dn(null);try{n(t,e)}finally{dn(r)}}function u5(t,n,e){if(zR(n)){let r=dn(null);try{let o=n.directiveStart,i=n.directiveEnd;for(let s=o;s<i;s++){let a=t.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{dn(r)}}}var lc=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(lc||{});var OC;function uge(){if(OC===void 0&&(OC=null,om.trustedTypes))try{OC=om.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return OC}function nj(t){return uge()?.createScriptURL(t)||t}var i4=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nj})`}};function c1(t){return t instanceof i4?t.changingThisBreaksApplicationSecurity:t}function Yz(t,n){let e=dge(t);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${Nj})`)}return e===n}function dge(t){return t instanceof i4&&t.getTypeName()||null}var pge=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hge(t){return t=String(t),t.match(pge)?t:"unsafe:"+t}var d5=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(d5||{});function fge(t){let n=Jz();return n?n.sanitize(d5.URL,t)||"":Yz(t,"URL")?c1(t):hge(_4(t))}function mge(t){let n=Jz();if(n)return nj(n.sanitize(d5.RESOURCE_URL,t)||"");if(Yz(t,"ResourceURL"))return nj(c1(t));throw new Ne(904,!1)}function gge(t,n){return n==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||n==="href"&&(t==="base"||t==="link")?mge:fge}function Qz(t,n,e){return gge(n,e)(t)}function Jz(){let t=jt();return t&&t[id].sanitizer}var vge=/^>|^->|<!--|-->|--!>|<!-$/g,wge=/(<|>)/g,yge="\u200B$1\u200B";function xge(t){return t.replace(vge,n=>n.replace(wge,yge))}function yi(t){return t.ownerDocument}function eH(t){return t instanceof Function?t():t}function _ge(t,n,e){let r=t.length;for(;;){let o=t.indexOf(n,e);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=n.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}e=o+1}}var tH="ng-template";function kge(t,n,e,r){let o=0;if(r){for(;o<n.length&&typeof n[o]=="string";o+=2)if(n[o]==="class"&&_ge(n[o+1].toLowerCase(),e,0)!==-1)return!0}else if(p5(t))return!1;if(o=n.indexOf(1,o),o>-1){let i;for(;++o<n.length&&typeof(i=n[o])=="string";)if(i.toLowerCase()===e)return!0}return!1}function p5(t){return t.type===4&&t.value!==tH}function bge(t,n,e){let r=t.type===4&&!e?tH:t.value;return n===r}function Cge(t,n,e){let r=4,o=t.attrs,i=o!==null?Tge(o):0,s=!1;for(let a=0;a<n.length;a++){let l=n[a];if(typeof l=="number"){if(!s&&!il(r)&&!il(l))return!1;if(s&&il(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!bge(t,l,e)||l===""&&n.length===1){if(il(r))return!1;s=!0}}else if(r&8){if(o===null||!kge(t,o,l,e)){if(il(r))return!1;s=!0}}else{let c=n[++a],u=Sge(l,o,p5(t),e);if(u===-1){if(il(r))return!1;s=!0;continue}if(c!==""){let d;if(u>i?d="":d=o[u+1].toLowerCase(),r&2&&c!==d){if(il(r))return!1;s=!0}}}}return il(r)||s}function il(t){return(t&1)===0}function Sge(t,n,e,r){if(n===null)return-1;let o=0;if(r||!e){let i=!1;for(;o<n.length;){let s=n[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=n[++o];for(;typeof a=="string";)a=n[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return Dge(n,t)}function nH(t,n,e=!1){for(let r=0;r<n.length;r++)if(Cge(t,n[r],e))return!0;return!1}function Mge(t){let n=t.attrs;if(n!=null){let e=n.indexOf(5);if((e&1)===0)return n[e+1]}return null}function Tge(t){for(let n=0;n<t.length;n++){let e=t[n];if(xz(e))return n}return t.length}function Dge(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){let r=t[e];if(typeof r=="number")return-1;if(r===n)return e;e++}return-1}function Ege(t,n){e:for(let e=0;e<n.length;e++){let r=n[e];if(t.length===r.length){for(let o=0;o<t.length;o++)if(t[o]!==r[o])continue e;return!0}}return!1}function rj(t,n){return t?":not("+n.trim()+")":n}function Ige(t){let n=t[0],e=1,r=2,o="",i=!1;for(;e<t.length;){let s=t[e];if(typeof s=="string")if(r&2){let a=t[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!il(s)&&(n+=rj(i,o),o=""),r=s,i=i||!il(r);e++}return o!==""&&(n+=rj(i,o)),n}function Nge(t){return t.map(Ige).join(",")}function Age(t){let n=[],e=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&n.push(i,t[++r]):o===8&&e.push(i);else{if(!il(o))break;o=i}r++}return e.length&&n.push(1,...e),n}var ul={};function Rge(t,n){return t.createText(n)}function Oge(t,n,e){t.setValue(n,e)}function Fge(t,n){return t.createComment(xge(n))}function rH(t,n,e){return t.createElement(n,e)}function s4(t,n,e,r,o){t.insertBefore(n,e,r,o)}function oH(t,n,e){t.appendChild(n,e)}function oj(t,n,e,r,o){r!==null?s4(t,n,e,r,o):oH(t,n,e)}function Pge(t,n,e){t.removeChild(null,n,e)}function Bge(t,n,e){t.setAttribute(n,"style",e)}function Lge(t,n,e){e===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function iH(t,n,e){let{mergedAttrs:r,classes:o,styles:i}=e;r!==null&&Ime(t,n,r),o!==null&&Lge(t,n,o),i!==null&&Bge(t,n,i)}function h5(t,n,e,r,o,i,s,a,l,c,u){let d=co+r,p=d+o,h=$ge(d,p),f=typeof c=="function"?c():c;return h[cn]={type:t,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:u}}function $ge(t,n){let e=[];for(let r=0;r<n;r++)e.push(r<t?null:ul);return e}function Vge(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=h5(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function f5(t,n,e,r,o,i,s,a,l,c,u){let d=n.blueprint.slice();return d[ad]=o,d[tn]=r|4|128|8|64|1024,(c!==null||t&&t[tn]&2048)&&(d[tn]|=2048),sz(d),d[Ei]=d[o1]=t,d[$o]=e,d[id]=s||t&&t[id],d[jr]=a||t&&t[jr],d[K2]=l||t&&t[K2]||null,d[Cs]=i,d[M4]=ege(),d[q2]=u,d[Qj]=c,d[Zs]=n.type==2?t[Zs]:d,d}function jge(t,n,e){let r=dc(n,t),o=Vge(e),i=t[id].rendererFactory,s=m5(t,f5(t,o,null,sH(e),r,n,null,i.createRenderer(r,e),null,null,null));return t[n.index]=s}function sH(t){let n=16;return t.signals?n=4096:t.onPush&&(n=64),n}function aH(t,n,e,r){if(e===0)return-1;let o=n.length;for(let i=0;i<e;i++)n.push(r),t.blueprint.push(r),t.data.push(null);return o}function m5(t,n){return t[Cy]?t[H9][sl]=n:t[Cy]=n,t[H9]=n,n}function ee(t=1){lH(Hr(),jt(),dh()+t,!1)}function lH(t,n,e,r){if(!r)if((n[tn]&3)===3){let i=t.preOrderCheckHooks;i!==null&&BC(n,i,e)}else{let i=t.preOrderHooks;i!==null&&LC(n,i,0,e)}pm(e)}var P4=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(P4||{});function QA(t,n,e,r){let o=dn(null);try{let[i,s,a]=t.inputs[e],l=null;(s&P4.SignalBased)!==0&&(l=n[i][ni]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(n,r)),t.setInput!==null?t.setInput(n,l,r,e,i):ez(n,l,i,r)}finally{dn(o)}}function cH(t,n,e,r,o){let i=dh(),s=r&2;try{pm(-1),s&&n.length>co&&lH(t,n,co,!1),Jn(s?2:0,o),e(r,o)}finally{pm(i),Jn(s?3:1,o)}}function B4(t,n,e){qge(t,n,e),(e.flags&64)===64&&Kge(t,n,e)}function g5(t,n,e=dc){let r=n.localNames;if(r!==null){let o=n.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?e(n,t):t[s];t[o++]=a}}}function zge(t,n,e,r){let i=r.get(sge,Gz)||e===lc.ShadowDom,s=t.selectRootElement(n,i);return Hge(s),s}function Hge(t){Uge(t)}var Uge=()=>null;function Gge(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function v5(t,n,e,r,o,i,s,a){if(!a&&y5(n,t,e,r,o)){i1(n)&&Wge(e,n.index);return}if(n.type&3){let l=dc(n,e);r=Gge(r),o=s!=null?s(o,n.value||"",r):o,i.setProperty(l,r,o)}else n.type&12}function Wge(t,n){let e=ac(n,t);e[tn]&16||(e[tn]|=64)}function qge(t,n,e){let r=e.directiveStart,o=e.directiveEnd;i1(e)&&jge(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||e4(e,n);let i=e.initialInputs;for(let s=r;s<o;s++){let a=t.data[s],l=Sy(n,t,s,e);if(l1(l,n),i!==null&&Qge(n,s-r,l,a,e,i),ic(a)){let c=ac(e.index,n);c[$o]=Sy(n,t,s,e)}}}function Kge(t,n,e){let r=e.directiveStart,o=e.directiveEnd,i=e.index,s=_me();try{pm(i);for(let a=r;a<o;a++){let l=t.data[a],c=n[a];zA(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Zge(l,c)}}finally{pm(-1),zA(s)}}function Zge(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function w5(t,n){let e=t.directiveRegistry,r=null;if(e)for(let o=0;o<e.length;o++){let i=e[o];nH(n,i.selectors,!1)&&(r??=[],ic(i)?r.unshift(i):r.push(i))}return r}function Xge(t,n,e,r,o,i){let s=dc(t,n);Yge(n[jr],s,i,t.value,e,r,o)}function Yge(t,n,e,r,o,i,s){if(i==null)t.removeAttribute(n,o,e);else{let a=s==null?_4(i):s(i,r||"",o);t.setAttribute(n,o,a,e)}}function Qge(t,n,e,r,o,i){let s=i[n];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];QA(r,e,l,c)}}function Jge(t,n){let e=t[K2],r=e?e.get(al,null):null;r&&r.handleError(n)}function y5(t,n,e,r,o){let i=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=n.data[c];QA(d,e[c],u,o),a=!0}if(i)for(let l of i){let c=e[l],u=n.data[l];QA(u,c,r,o),a=!0}return a}function e0e(t,n){let e=ac(n,t),r=e[cn];t0e(r,e);let o=e[ad];o!==null&&e[q2]===null&&(e[q2]=Zz(o,e[K2])),Jn(18),x5(r,e,e[$o]),Jn(19,e[$o])}function t0e(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}function x5(t,n,e){YR(n);try{let r=t.viewQuery;r!==null&&YA(1,r,e);let o=t.template;o!==null&&cH(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[sd]?.finishViewCreation(t),t.staticContentQueries&&Xz(t,n),t.staticViewQueries&&YA(2,t.viewQuery,e);let i=t.components;i!==null&&n0e(n,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[tn]&=-5,QR()}}function n0e(t,n){for(let e=0;e<n.length;e++)e0e(t,n[e])}function Ly(t,n,e,r){let o=dn(null);try{let i=n.tView,a=t[tn]&4096?4096:16,l=f5(t,i,e,a,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[n.index];l[lm]=c;let u=t[sd];return u!==null&&(l[sd]=u.createEmbeddedView(i)),x5(i,l,e),l}finally{dn(o)}}function J2(t,n){return!n||n.firstChild===null||Lz(t)}var r0e;function _5(t,n){return r0e(t,n)}var cc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(cc||{});function k5(t){return(t.flags&32)===32}function H2(t,n,e,r,o){if(r!=null){let i,s=!1;ld(r)?i=r:sh(r)&&(s=!0,r=r[ad]);let a=sc(r);t===0&&e!==null?o==null?oH(n,e,a):s4(n,e,a,o||null,!0):t===1&&e!==null?s4(n,e,a,o||null,!0):t===2?Pge(n,a,s):t===3&&n.destroyNode(a),i!=null&&h0e(n,t,i,e,o)}}function o0e(t,n){uH(t,n),n[ad]=null,n[Cs]=null}function i0e(t,n,e,r,o,i){r[ad]=o,r[Cs]=n,V4(t,r,e,1,o,i)}function uH(t,n){n[id].changeDetectionScheduler?.notify(9),V4(t,n,n[jr],2,null,null)}function s0e(t){let n=t[Cy];if(!n)return kA(t[cn],t);for(;n;){let e=null;if(sh(n))e=n[Cy];else{let r=n[Di];r&&(e=r)}if(!e){for(;n&&!n[sl]&&n!==t;)sh(n)&&kA(n[cn],n),n=n[Ei];n===null&&(n=t),sh(n)&&kA(n[cn],n),e=n&&n[sl]}n=e}}function b5(t,n){let e=t[Z2],r=e.indexOf(n);e.splice(r,1)}function L4(t,n){if(Fy(n))return;let e=n[jr];e.destroyNode&&V4(t,n,e,3,null,null),s0e(n)}function kA(t,n){if(Fy(n))return;let e=dn(null);try{n[tn]&=-129,n[tn]|=256,n[ga]&&cy(n[ga]),l0e(t,n),a0e(t,n),n[cn].type===1&&n[jr].destroy();let r=n[lm];if(r!==null&&ld(n[Ei])){r!==n[Ei]&&b5(r,n);let o=n[sd];o!==null&&o.detachView(t)}ZA(n)}finally{dn(e)}}function a0e(t,n){let e=t.cleanup,r=n[qC];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(n[qC]=null);let o=n[ih];if(o!==null){n[ih]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=n[cm];if(i!==null){n[cm]=null;for(let s of i)s.destroy()}}function l0e(t,n){let e;if(t!=null&&(e=t.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let o=n[e[r]];if(!(o instanceof hm)){let i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],l=i[s+1];Jn(4,a,l);try{l.call(a)}finally{Jn(5,a,l)}}else{Jn(4,o,i);try{i.call(o)}finally{Jn(5,o,i)}}}}}function dH(t,n,e){return c0e(t,n.parent,e)}function c0e(t,n,e){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return e[ad];if(i1(r)){let{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===lc.None||o===lc.Emulated)return null}return dc(r,e)}function pH(t,n,e){return d0e(t,n,e)}function u0e(t,n,e){return t.type&40?dc(t,e):null}var d0e=u0e,ij;function $4(t,n,e,r){let o=dH(t,r,n),i=n[jr],s=r.parent||n[Cs],a=pH(s,r,n);if(o!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)oj(i,o,e[l],a,!1);else oj(i,o,e,a,!1);ij!==void 0&&ij(i,r,n,e,o)}function yy(t,n){if(n!==null){let e=n.type;if(e&3)return dc(n,t);if(e&4)return JA(-1,t[n.index]);if(e&8){let r=n.child;if(r!==null)return yy(t,r);{let o=t[n.index];return ld(o)?JA(-1,o):sc(o)}}else{if(e&128)return yy(t,n.next);if(e&32)return _5(n,t)()||sc(t[n.index]);{let r=hH(t,n);if(r!==null){if(Array.isArray(r))return r[0];let o=dm(t[Zs]);return yy(o,r)}else return yy(t,n.next)}}}return null}function hH(t,n){if(n!==null){let r=t[Zs][Cs],o=n.projection;return r.projection[o]}return null}function JA(t,n){let e=Di+t+1;if(e<n.length){let r=n[e],o=r[cn].firstChild;if(o!==null)return yy(r,o)}return n[um]}function C5(t,n,e,r,o,i,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],l=e.type;if(s&&n===0&&(a&&l1(sc(a),r),e.flags|=2),!k5(e))if(l&8)C5(t,n,e.child,r,o,i,!1),H2(n,t,o,a,i);else if(l&32){let c=_5(e,r),u;for(;u=c();)H2(n,t,o,u,i);H2(n,t,o,a,i)}else l&16?fH(t,n,r,e,o,i):H2(n,t,o,a,i);e=s?e.projectionNext:e.next}}function V4(t,n,e,r,o,i){C5(e,r,t.firstChild,n,o,i,!1)}function p0e(t,n,e){let r=n[jr],o=dH(t,e,n),i=e.parent||n[Cs],s=pH(i,e,n);fH(r,0,n,e,o,s)}function fH(t,n,e,r,o,i){let s=e[Zs],l=s[Cs].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];H2(n,t,o,u,i)}else{let c=l,u=s[Ei];Lz(r)&&(c.flags|=128),C5(t,n,c,u,o,i,!0)}}function h0e(t,n,e,r,o){let i=e[um],s=sc(e);i!==s&&H2(n,t,r,i,o);for(let a=Di;a<e.length;a++){let l=e[a];V4(l[cn],l,t,n,r,i)}}function f0e(t,n,e,r,o){if(n)o?t.addClass(e,r):t.removeClass(e,r);else{let i=r.indexOf("-")===-1?void 0:cc.DashCase;o==null?t.removeStyle(e,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=cc.Important),t.setStyle(e,r,o,i))}}function a4(t,n,e,r,o=!1){for(;e!==null;){if(e.type===128){e=o?e.projectionNext:e.next;continue}let i=n[e.index];i!==null&&r.push(sc(i)),ld(i)&&m0e(i,r);let s=e.type;if(s&8)a4(t,n,e.child,r);else if(s&32){let a=_5(e,n),l;for(;l=a();)r.push(l)}else if(s&16){let a=hH(n,e);if(Array.isArray(a))r.push(...a);else{let l=dm(n[Zs]);a4(l[cn],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}function m0e(t,n){for(let e=Di;e<t.length;e++){let r=t[e],o=r[cn].firstChild;o!==null&&a4(r[cn],r,o,n)}t[um]!==t[ad]&&n.push(t[um])}function mH(t){if(t[U2]!==null){for(let n of t[U2])n.impl.addSequence(n);t[U2].length=0}}var gH=[];function g0e(t){return t[ga]??v0e(t)}function v0e(t){let n=gH.pop()??Object.create(y0e);return n.lView=t,n}function w0e(t){t.lView[ga]!==t&&(t.lView=null,gH.push(t))}var y0e=pt(ue({},Wf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{s1(t.lView)},consumerOnSignalRead(){this.lView[ga]=this}});function x0e(t){let n=t[ga]??Object.create(_0e);return n.lView=t,n}var _0e=pt(ue({},Wf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let n=dm(t.lView);for(;n&&!vH(n[cn]);)n=dm(n);n&&az(n)},consumerOnSignalRead(){this.lView[ga]=this}});function vH(t){return t.type!==2}function wH(t){if(t[cm]===null)return;let n=!0;for(;n;){let e=!1;for(let r of t[cm])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=e&&!!(t[tn]&8192)}}var k0e=100;function yH(t,n=!0,e=0){let o=t[id].rendererFactory,i=!1;i||o.begin?.();try{b0e(t,e)}catch(s){throw n&&Jge(t,s),s}finally{i||o.end?.()}}function b0e(t,n){let e=dz();try{XC(!0),eR(t,n);let r=0;for(;D4(t);){if(r===k0e)throw new Ne(103,!1);r++,eR(t,1)}}finally{XC(e)}}function C0e(t,n,e,r){if(Fy(n))return;let o=n[tn],i=!1,s=!1;YR(n);let a=!0,l=null,c=null;i||(vH(t)?(c=g0e(n),l=qf(c)):UN()===null?(a=!1,c=x0e(n),l=qf(c)):n[ga]&&(cy(n[ga]),n[ga]=null));try{sz(n),wme(t.bindingStartIndex),e!==null&&cH(t,n,e,2,r);let u=(o&3)===3;if(!i)if(u){let h=t.preOrderCheckHooks;h!==null&&BC(n,h,null)}else{let h=t.preOrderHooks;h!==null&&LC(n,h,0,null),xA(n,0)}if(s||S0e(n),wH(n),xH(n,0),t.contentQueries!==null&&Xz(t,n),!i)if(u){let h=t.contentCheckHooks;h!==null&&BC(n,h)}else{let h=t.contentHooks;h!==null&&LC(n,h,1),xA(n,1)}T0e(t,n);let d=t.components;d!==null&&kH(n,d,0);let p=t.viewQuery;if(p!==null&&YA(2,p,r),!i)if(u){let h=t.viewCheckHooks;h!==null&&BC(n,h)}else{let h=t.viewHooks;h!==null&&LC(n,h,2),xA(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[yA]){for(let h of n[yA])h();n[yA]=null}i||(mH(n),n[tn]&=-73)}catch(u){throw i||s1(n),u}finally{c!==null&&(D2(c,l),a&&w0e(c)),QR()}}function xH(t,n){for(let e=jz(t);e!==null;e=zz(e))for(let r=Di;r<e.length;r++){let o=e[r];_H(o,n)}}function S0e(t){for(let n=jz(t);n!==null;n=zz(n)){if(!(n[tn]&2))continue;let e=n[Z2];for(let r=0;r<e.length;r++){let o=e[r];az(o)}}}function M0e(t,n,e){Jn(18);let r=ac(n,t);_H(r,e),Jn(19,r[$o])}function _H(t,n){UR(t)&&eR(t,n)}function eR(t,n){let r=t[cn],o=t[tn],i=t[ga],s=!!(n===0&&o&16);if(s||=!!(o&64&&n===0),s||=!!(o&1024),s||=!!(i?.dirty&&ly(i)),s||=!1,i&&(i.dirty=!1),t[tn]&=-9217,s)C0e(r,t,r.template,t[$o]);else if(o&8192){wH(t),xH(t,1);let a=r.components;a!==null&&kH(t,a,1),mH(t)}}function kH(t,n,e){for(let r=0;r<n.length;r++)M0e(t,n[r],e)}function T0e(t,n){let e=t.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let o=e[r];if(o<0)pm(~o);else{let i=o,s=e[++r],a=e[++r];xme(s,i);let l=n[i];Jn(24,l),a(2,l),Jn(25,l)}}}finally{pm(-1)}}function S5(t,n){let e=dz()?64:1088;for(t[id].changeDetectionScheduler?.notify(n);t;){t[tn]|=e;let r=dm(t);if(ZC(t)&&!r)return t;t=r}return null}function bH(t,n,e,r){return[t,!0,0,n,null,r,null,e,null,null]}function CH(t,n){let e=Di+n;if(e<t.length)return t[e]}function $y(t,n,e,r=!0){let o=n[cn];if(D0e(o,n,t,e),r){let s=JA(e,t),a=n[jr],l=a.parentNode(t[um]);l!==null&&i0e(o,t[Cs],a,n,l,s)}let i=n[q2];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function SH(t,n){let e=Ty(t,n);return e!==void 0&&L4(e[cn],e),e}function Ty(t,n){if(t.length<=Di)return;let e=Di+n,r=t[e];if(r){let o=r[lm];o!==null&&o!==t&&b5(o,r),n>0&&(t[e-1][sl]=r[sl]);let i=GC(t,Di+n);o0e(r[cn],r);let s=i[sd];s!==null&&s.detachView(i[cn]),r[Ei]=null,r[sl]=null,r[tn]&=-129}return r}function D0e(t,n,e,r){let o=Di+r,i=e.length;r>0&&(e[o-1][sl]=n),r<i-Di?(n[sl]=e[o],zj(e,Di+r,n)):(e.push(n),n[sl]=null),n[Ei]=e;let s=n[lm];s!==null&&e!==s&&MH(s,n);let a=n[sd];a!==null&&a.insertView(t),VA(n),n[tn]|=128}function MH(t,n){let e=t[Z2],r=n[Ei];if(sh(r))t[tn]|=2;else{let o=r[Ei][Zs];n[Zs]!==o&&(t[tn]|=2)}e===null?t[Z2]=[n]:e.push(n)}var Dy=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let n=this._lView,e=n[cn];return a4(e,n,e.firstChild,[])}constructor(n,e,r=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=r}get context(){return this._lView[$o]}set context(n){this._lView[$o]=n}get destroyed(){return Fy(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Ei];if(ld(n)){let e=n[KC],r=e?e.indexOf(this):-1;r>-1&&(Ty(n,r),GC(e,r))}this._attachedToViewContainer=!1}L4(this._lView[cn],this._lView)}onDestroy(n){lz(this._lView,n)}markForCheck(){S5(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[tn]&=-129}reattach(){VA(this._lView),this._lView[tn]|=128}detectChanges(){this._lView[tn]|=1024,yH(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=ZC(this._lView),e=this._lView[lm];e!==null&&!n&&b5(e,this._lView),uH(this._lView[cn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=n;let e=ZC(this._lView),r=this._lView[lm];r!==null&&!e&&MH(r,this._lView),VA(this._lView)}};var er=(()=>{class t{static __NG_ELEMENT_ID__=N0e}return t})(),E0e=er,I0e=class extends E0e{_declarationLView;_declarationTContainer;elementRef;constructor(n,e,r){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,r){let o=Ly(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:r});return new Dy(o)}};function N0e(){return j4(Ii(),jt())}function j4(t,n){return t.type&4?new I0e(n,t,a1(t,n)):null}function Vy(t,n,e,r,o){let i=t.data[n];if(i===null)i=A0e(t,n,e,r,o),yme()&&(i.flags|=32);else if(i.type&64){i.type=e,i.value=r,i.attrs=o;let s=gme();i.injectorIndex=s===null?-1:s.injectorIndex}return vm(i,!0),i}function A0e(t,n,e,r,o){let i=uz(),s=KR(),a=s?i:i&&i.parent,l=t.data[n]=O0e(t,a,e,n,r,o);return R0e(t,l,i,s),l}function R0e(t,n,e,r){t.firstChild===null&&(t.firstChild=n),e!==null&&(r?e.child==null&&n.parent!==null&&(e.child=n):e.next===null&&(e.next=n,n.prev=e))}function O0e(t,n,e,r,o,i){let s=n?n.injectorIndex:-1,a=0;return cz()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var FJe=new RegExp(`^(\\d+)*(${ige}|${oge})*(.*)`);var F0e=()=>null;function e1(t,n){return F0e(t,n)}var P0e=class{},TH=class{},tR=class{resolveComponentFactory(n){throw Error(`No component factory found for ${ks(n)}.`)}},z4=class{static NULL=new tR},yo=class{},po=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>B0e()}return t})();function B0e(){let t=jt(),n=Ii(),e=ac(n.index,t);return(sh(e)?e:t)[jr]}var L0e=(()=>{class t{static \u0275prov=ke({token:t,providedIn:"root",factory:()=>null})}return t})();var bA={},nR=class{injector;parentInjector;constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){r=k4(r);let o=this.injector.get(n,bA,r);return o!==bA||e===bA?o:this.parentInjector.get(n,e,r)}};function rR(t,n,e){let r=e?t.styles:null,o=e?t.classes:null,i=0;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];if(typeof a=="number")i=a;else if(i==1)o=AA(o,a);else if(i==2){let l=a,c=n[++s];r=AA(r,l+": "+c+";")}}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=o:t.classesWithoutHost=o}function Ut(t,n=mn.Default){let e=jt();if(e===null)return Xe(t,n);let r=Ii();return Tz(r,e,gi(t),n)}function DH(){let t="invalid";throw new Error(t)}function M5(t,n,e,r,o){let i=r===null?null:{"":-1},s=o(t,e);if(s!==null){let a,l=null,c=null,u=V0e(s);u===null?a=s:[a,l,c]=u,H0e(t,n,e,a,i,l,c)}i!==null&&r!==null&&$0e(e,r,i)}function $0e(t,n,e){let r=t.localNames=[];for(let o=0;o<n.length;o+=2){let i=e[n[o+1]];if(i==null)throw new Ne(-301,!1);r.push(n[o],i)}}function V0e(t){let n=null,e=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&ic(a)&&(n=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let r=null,o=null,i=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],o??=new Map,i??=new Map,j0e(s,r,i,o)),s===n&&(r??=[],r.push(s));return r!==null?(r.push(...n===null?t:t.slice(1)),[r,o,i]):null}function j0e(t,n,e,r){let o=n.length;t.findHostDirectiveDefs(t,n,r),e.set(t,[o,n.length-1])}function z0e(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function H0e(t,n,e,r,o,i,s){let a=r.length,l=!1;for(let p=0;p<a;p++){let h=r[p];!l&&ic(h)&&(l=!0,z0e(t,e,p)),UA(e4(e,n),t,h.type)}Z0e(e,t.data.length,a);for(let p=0;p<a;p++){let h=r[p];h.providersResolver&&h.providersResolver(h)}let c=!1,u=!1,d=aH(t,n,a,null);a>0&&(e.directiveToIndex=new Map);for(let p=0;p<a;p++){let h=r[p];if(e.mergedAttrs=X2(e.mergedAttrs,h.hostAttrs),G0e(t,e,n,d,h),K0e(d,h,o),s!==null&&s.has(h)){let[m,g]=s.get(h);e.directiveToIndex.set(h.type,[d,m+e.directiveStart,g+e.directiveStart])}else(i===null||!i.has(h))&&e.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(e.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(e.flags|=64);let f=h.type.prototype;!c&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),c=!0),!u&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}U0e(t,e,i)}function U0e(t,n,e){for(let r=n.directiveStart;r<n.directiveEnd;r++){let o=t.data[r];if(e===null||!e.has(o))sj(0,n,o,r),sj(1,n,o,r),lj(n,r,!1);else{let i=e.get(o);aj(0,n,i,r),aj(1,n,i,r),lj(n,r,!0)}}}function sj(t,n,e,r){let o=t===0?e.inputs:e.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;t===0?s=n.inputs??={}:s=n.outputs??={},s[i]??=[],s[i].push(r),EH(n,i)}}function aj(t,n,e,r){let o=t===0?e.inputs:e.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;t===0?a=n.hostDirectiveInputs??={}:a=n.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),EH(n,s)}}function EH(t,n){n==="class"?t.flags|=8:n==="style"&&(t.flags|=16)}function lj(t,n,e){let{attrs:r,inputs:o,hostDirectiveInputs:i}=t;if(r===null||!e&&o===null||e&&i===null||p5(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&o.hasOwnProperty(l)){let c=o[l];for(let u of c)if(u===n){s??=[],s.push(l,r[a+1]);break}}else if(e&&i.hasOwnProperty(l)){let c=i[l];for(let u=0;u<c.length;u+=2)if(c[u]===n){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function G0e(t,n,e,r,o){t.data[r]=o;let i=o.factory||(o.factory=am(o.type,!0)),s=new hm(i,ic(o),Ut);t.blueprint[r]=s,e[r]=s,W0e(t,n,r,aH(t,e,o.hostVars,ul),o)}function W0e(t,n,e,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~n.index;q0e(s)!=a&&s.push(a),s.push(e,r,i)}}function q0e(t){let n=t.length;for(;n>0;){let e=t[--n];if(typeof e=="number"&&e<0)return e}return 0}function K0e(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;ic(n)&&(e[""]=t)}}function Z0e(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function IH(t,n,e,r,o,i,s,a){let l=n.consts,c=lh(l,s),u=Vy(n,t,2,r,c);return i&&M5(n,e,u,lh(l,a),o),u.mergedAttrs=X2(u.mergedAttrs,u.attrs),u.attrs!==null&&rR(u,u.attrs,!1),u.mergedAttrs!==null&&rR(u,u.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,u),u}function NH(t,n){JR(t,n),zR(n)&&t.queries.elementEnd(n)}var l4=class extends z4{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=ah(n);return new fm(e,this.ngModule)}};function X0e(t){return Object.keys(t).map(n=>{let[e,r,o]=t[n],i={propName:e,templateName:n,isSignal:(r&P4.SignalBased)!==0};return o&&(i.transform=o),i})}function Y0e(t){return Object.keys(t).map(n=>({propName:t[n],templateName:n}))}function Q0e(t,n,e){let r=n instanceof to?n:n?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new nR(e,r):e}function J0e(t){let n=t.get(yo,null);if(n===null)throw new Ne(407,!1);let e=t.get(L0e,null),r=t.get(ch,null);return{rendererFactory:n,sanitizer:e,changeDetectionScheduler:r}}function e2e(t,n){let e=(t.selectors[0][0]||"div").toLowerCase();return rH(n,e,e==="svg"?oz:e==="math"?ime:null)}var fm=class extends TH{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=X0e(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Y0e(this.componentDef.outputs),this.cachedOutputs}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=Nge(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!e}create(n,e,r,o){Jn(22);let i=dn(null);try{let s=this.componentDef,a=r?["ng-version","19.2.6"]:Age(this.componentDef.selectors[0]),l=h5(0,null,null,1,0,null,null,null,null,[a],null),c=Q0e(s,o||this.ngModule,n),u=J0e(c),d=u.rendererFactory.createRenderer(null,s),p=r?zge(d,r,s.encapsulation,c):e2e(s,d),h=f5(null,l,null,512|sH(s),null,null,u,d,c,null,Zz(p,c,!0));h[co]=p,YR(h);let f=null;try{let m=IH(co,l,h,"#host",()=>[this.componentDef],!0,0);p&&(iH(d,p,m),l1(p,h)),B4(l,h,m),u5(l,m,h),NH(l,m),e!==void 0&&t2e(m,this.ngContentSelectors,e),f=ac(m.index,h),h[$o]=f[$o],x5(l,h,null)}catch(m){throw f!==null&&ZA(f),ZA(h),m}finally{Jn(23),QR()}return new oR(this.componentType,h)}finally{dn(i)}}},oR=class extends P0e{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,e){super(),this._rootLView=e,this._tNode=HR(e[cn],co),this.location=a1(this._tNode,e),this.instance=ac(this._tNode.index,e)[$o],this.hostView=this.changeDetectorRef=new Dy(e,void 0,!1),this.componentType=n}setInput(n,e){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let o=this._rootLView,i=y5(r,o[cn],o,n,e);this.previousInputValues.set(n,e);let s=ac(r.index,o);S5(s,1)}get injector(){return new sm(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function t2e(t,n,e){let r=t.projection=[];for(let o=0;o<n.length;o++){let i=e[o];r.push(i!=null&&i.length?Array.from(i):null)}}var Br=(()=>{class t{static __NG_ELEMENT_ID__=n2e}return t})();function n2e(){let t=Ii();return RH(t,jt())}var r2e=Br,AH=class extends r2e{_lContainer;_hostTNode;_hostLView;constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return a1(this._hostTNode,this._hostLView)}get injector(){return new sm(this._hostTNode,this._hostLView)}get parentInjector(){let n=e5(this._hostTNode,this._hostLView);if(_z(n)){let e=QC(n,this._hostLView),r=YC(n),o=e[cn].data[r+8];return new sm(o,e)}else return new sm(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=cj(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-Di}createEmbeddedView(n,e,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=e1(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},i,s);return this.insertImpl(a,o,J2(this._hostTNode,s)),a}createComponent(n,e,r,o,i){let s=n&&!tme(n),a;if(s)a=e;else{let f=e||{};a=f.index,r=f.injector,o=f.projectableNodes,i=f.environmentInjector||f.ngModuleRef}let l=s?n:new fm(ah(n)),c=r||this.parentInjector;if(!i&&l.ngModule==null){let m=(s?c:this.parentInjector).get(to,null);m&&(i=m)}let u=ah(l.componentType??{}),d=e1(this._lContainer,u?.id??null),p=d?.firstChild??null,h=l.create(c,o,p,i);return this.insertImpl(h.hostView,a,J2(this._hostTNode,d)),h}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,r){let o=n._lView;if(ame(o)){let a=this.indexOf(n);if(a!==-1)this.detach(a);else{let l=o[Ei],c=new AH(l,l[Cs],l[Ei]);c.detach(c.indexOf(n))}}let i=this._adjustIndex(e),s=this._lContainer;return $y(s,o,i,r),n.attachToViewContainerRef(),zj(CA(s),i,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=cj(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),r=Ty(this._lContainer,e);r&&(GC(CA(this._lContainer),e),L4(r[cn],r))}detach(n){let e=this._adjustIndex(n,-1),r=Ty(this._lContainer,e);return r&&GC(CA(this._lContainer),e)!=null?new Dy(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function cj(t){return t[KC]}function CA(t){return t[KC]||(t[KC]=[])}function RH(t,n){let e,r=n[t.index];return ld(r)?e=r:(e=bH(r,n,null,t),n[t.index]=e,m5(n,e)),i2e(e,n,t,r),new AH(e,t,n)}function o2e(t,n){let e=t[jr],r=e.createComment(""),o=dc(n,t),i=e.parentNode(o);return s4(e,i,r,e.nextSibling(o),!1),r}var i2e=l2e,s2e=()=>!1;function a2e(t,n,e){return s2e(t,n,e)}function l2e(t,n,e,r){if(t[um])return;let o;e.type&8?o=sc(r):o=o2e(n,e),t[um]=o}var iR=class t{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},sR=class t{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let r=n.contentQueries!==null?n.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){let s=e.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)D5(n,e).matches!==null&&this.queries[e].setDirty()}},c4=class{flags;read;predicate;constructor(n,e,r=null){this.flags=e,this.read=r,typeof n=="string"?this.predicate=h2e(n):this.predicate=n}},aR=class t{queries;constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){let o=e!==null?e.length:0,i=this.getByIndex(r).embeddedTView(n,o);i&&(i.indexInDeclarationView=r,e!==null?e.push(i):e=[i])}return e!==null?new t(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},lR=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,e=-1){this.metadata=n,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(n,e,c2e(e,i)),this.matchTNodeWithReadOption(n,e,$C(e,n,i,!1,!1))}else r===er?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,$C(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===Mt||o===Br||o===er&&e.type&4)this.addMatch(e.index,-2);else{let i=$C(e,n,o,!1,!1);i!==null&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function c2e(t,n){let e=t.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1]}return null}function u2e(t,n){return t.type&11?a1(t,n):t.type&4?j4(t,n):null}function d2e(t,n,e,r){return e===-1?u2e(n,t):e===-2?p2e(t,n,r):Sy(t,t[cn],e,n)}function p2e(t,n,e){if(e===Mt)return a1(n,t);if(e===er)return j4(n,t);if(e===Br)return RH(n,t)}function OH(t,n,e,r){let o=n[sd].queries[r];if(o.matches===null){let i=t.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=i[c];a.push(d2e(n,u,s[l+1],e.metadata.read))}}o.matches=a}return o.matches}function cR(t,n,e,r){let o=t.queries.getByIndex(e),i=o.matches;if(i!==null){let s=OH(t,n,o,e);for(let a=0;a<i.length;a+=2){let l=i[a];if(l>0)r.push(s[a/2]);else{let c=i[a+1],u=n[-l];for(let d=Di;d<u.length;d++){let p=u[d];p[lm]===p[Ei]&&cR(p[cn],p,c,r)}if(u[Z2]!==null){let d=u[Z2];for(let p=0;p<d.length;p++){let h=d[p];cR(h[cn],h,c,r)}}}}}return r}function T5(t,n){return t[sd].queries[n].queryList}function FH(t,n,e){let r=new Q2((e&4)===4);return ume(t,n,r,r.destroy),(n[sd]??=new sR).queries.push(new iR(r))-1}function PH(t,n,e){let r=Hr();return r.firstCreatePass&&(LH(r,new c4(t,n,e),-1),(n&2)===2&&(r.staticViewQueries=!0)),FH(r,jt(),n)}function BH(t,n,e,r){let o=Hr();if(o.firstCreatePass){let i=Ii();LH(o,new c4(n,e,r),i.index),f2e(o,t),(e&2)===2&&(o.staticContentQueries=!0)}return FH(o,jt(),e)}function h2e(t){return t.split(",").map(n=>n.trim())}function LH(t,n,e){t.queries===null&&(t.queries=new aR),t.queries.track(new lR(n,e))}function f2e(t,n){let e=t.contentQueries||(t.contentQueries=[]),r=e.length?e[e.length-1]:-1;n!==r&&e.push(t.queries.length-1,n)}function D5(t,n){return t.queries.getByIndex(n)}function $H(t,n){let e=t[cn],r=D5(e,n);return r.crossesNgTemplate?cR(e,t,n,[]):OH(e,t,r,n)}function E5(t,n,e){let r,o=rC(()=>{r._dirtyCounter();let i=g2e(r,t);if(n&&i===void 0)throw new Ne(-951,!1);return i});return r=o[ni],r._dirtyCounter=Ye(0),r._flatValue=void 0,o}function VH(t){return E5(!0,!1,t)}function jH(t){return E5(!0,!0,t)}function m2e(t){return E5(!1,!1,t)}function zH(t,n){let e=t[ni];e._lView=jt(),e._queryIndex=n,e._queryList=T5(e._lView,n),e._queryList.onDirty(()=>e._dirtyCounter.update(r=>r+1))}function g2e(t,n){let e=t._lView,r=t._queryIndex;if(e===void 0||r===void 0||e[tn]&4)return n?void 0:Ji;let o=T5(e,r),i=$H(e,r);return o.reset(i,Pz),n?o.first:o._changesDetected||t._flatValue===void 0?t._flatValue=o.toArray():t._flatValue}function uj(t,n){return VH(n)}function v2e(t,n){return jH(n)}var oi=(uj.required=v2e,uj);function dj(t,n){return VH(n)}function w2e(t,n){return jH(n)}var cd=(dj.required=w2e,dj);function _m(t,n){return m2e(n)}function HH(t,n){let e=Object.create(Aj),r=new r4;e.value=t;function o(){return nh(e),pj(e.value),e.value}return o[ni]=e,o.asReadonly=o5.bind(o),o.set=i=>{e.equal(e.value,i)||(Kf(e,i),r.emit(i))},o.update=i=>{pj(e.value),o.set(i(e.value))},o.subscribe=r.subscribe.bind(r),o.destroyRef=r.destroyRef,o}function pj(t){if(t===y4)throw new Ne(952,!1)}function hj(t,n){return HH(t,n)}function y2e(t){return HH(y4,t)}var ii=(hj.required=y2e,hj);var uc=class{},I5=class{};function UH(t,n){return new u4(t,n??null,[])}var u4=class extends uc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new l4(this);constructor(n,e,r,o=!0){super(),this.ngModuleType=n,this._parent=e;let i=Gj(n);this._bootstrapComponents=eH(i.bootstrap),this._r3Injector=Iz(n,e,[{provide:uc,useValue:this},{provide:z4,useValue:this.componentFactoryResolver},...r],ks(n),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},uR=class extends I5{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new u4(this.moduleType,n,[])}};var d4=class extends uc{injector;componentFactoryResolver=new l4(this);instance=null;constructor(n){super();let e=new by([...n.providers,{provide:uc,useValue:this},{provide:z4,useValue:this.componentFactoryResolver}],n.parent||S4(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function jy(t,n,e=null){return new d4({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}var x2e=(()=>{class t{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=qj(!1,e.type),o=r.length>0?jy([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,o)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ke({token:t,providedIn:"environment",factory:()=>new t(Xe(to))})}return t})();function Oe(t){return Ny(()=>{let n=GH(t),e=pt(ue({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===$z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:n.standalone?o=>o.get(x2e).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||lc.Emulated,styles:t.styles||Ji,_:null,schemas:t.schemas||null,tView:null,id:""});n.standalone&&cl("NgStandalone"),WH(e);let r=t.dependencies;return e.directiveDefs=fj(r,!1),e.pipeDefs=fj(r,!0),e.id=S2e(e),e})}function _2e(t){return ah(t)||Wj(t)}function k2e(t){return t!==null}function Dt(t){return Ny(()=>({type:t.type,bootstrap:t.bootstrap||Ji,declarations:t.declarations||Ji,imports:t.imports||Ji,exports:t.exports||Ji,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function b2e(t,n){if(t==null)return oc;let e={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i,s,a,l;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,l=o[3]||null):(i=o,s=o,a=P4.None,l=null),e[i]=[r,a,l],n[i]=s}return e}function C2e(t){if(t==null)return oc;let n={};for(let e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function me(t){return Ny(()=>{let n=GH(t);return WH(n),n})}function fh(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function GH(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputConfig:t.inputs||oc,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Ji,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:b2e(t.inputs,n),outputs:C2e(t.outputs),debugInfo:null}}function WH(t){t.features?.forEach(n=>n(t))}function fj(t,n){if(!t)return null;let e=n?Gfe:_2e;return()=>(typeof t=="function"?t():t).map(r=>e(r)).filter(k2e)}function S2e(t){let n=0,e=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,e,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let i of r.join("|"))n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function M2e(t){return Object.getPrototypeOf(t.prototype).constructor}function Mn(t){let n=M2e(t.type),e=!0,r=[t];for(;n;){let o;if(ic(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ne(903,!1);o=n.\u0275dir}if(o){if(e){r.push(o);let s=t;s.inputs=SA(t.inputs),s.declaredInputs=SA(t.declaredInputs),s.outputs=SA(t.outputs);let a=o.hostBindings;a&&N2e(t,a);let l=o.viewQuery,c=o.contentQueries;if(l&&E2e(t,l),c&&I2e(t,c),T2e(t,o),bfe(t.outputs,o.outputs),ic(o)&&o.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(t),a===Mn&&(e=!1)}}n=Object.getPrototypeOf(n)}D2e(r)}function T2e(t,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;let r=n.inputs[e];r!==void 0&&(t.inputs[e]=r,t.declaredInputs[e]=n.declaredInputs[e])}}function D2e(t){let n=0,e=null;for(let r=t.length-1;r>=0;r--){let o=t[r];o.hostVars=n+=o.hostVars,o.hostAttrs=X2(o.hostAttrs,e=X2(e,o.hostAttrs))}}function SA(t){return t===oc?{}:t===Ji?[]:t}function E2e(t,n){let e=t.viewQuery;e?t.viewQuery=(r,o)=>{n(r,o),e(r,o)}:t.viewQuery=n}function I2e(t,n){let e=t.contentQueries;e?t.contentQueries=(r,o,i)=>{n(r,o,i),e(r,o,i)}:t.contentQueries=n}function N2e(t,n){let e=t.hostBindings;e?t.hostBindings=(r,o)=>{n(r,o),e(r,o)}:t.hostBindings=n}function qt(t){let n=e=>{let r=Array.isArray(t);e.hostDirectives===null?(e.findHostDirectiveDefs=qH,e.hostDirectives=r?t.map(dR):[t]):r?e.hostDirectives.unshift(...t.map(dR)):e.hostDirectives.unshift(t)};return n.ngInherit=!0,n}function qH(t,n,e){if(t.hostDirectives!==null)for(let r of t.hostDirectives)if(typeof r=="function"){let o=r();for(let i of o)mj(dR(i),n,e)}else mj(r,n,e)}function mj(t,n,e){let r=Wj(t.directive);A2e(r.declaredInputs,t.inputs),qH(r,n,e),e.set(r,t),n.push(r)}function dR(t){return typeof t=="function"?{directive:gi(t),inputs:oc,outputs:oc}:{directive:gi(t.directive),inputs:gj(t.inputs),outputs:gj(t.outputs)}}function gj(t){if(t===void 0||t.length===0)return oc;let n={};for(let e=0;e<t.length;e+=2)n[t[e]]=t[e+1];return n}function A2e(t,n){for(let e in n)if(n.hasOwnProperty(e)){let r=n[e],o=t[e];t[r]=o}}function KH(t){return N5(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function R2e(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{let e=t[Symbol.iterator](),r;for(;!(r=e.next()).done;)n(r.value)}}function N5(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function u1(t,n,e){return t[n]=e}function ZH(t,n){return t[n]}function bs(t,n,e){let r=t[n];return Object.is(r,e)?!1:(t[n]=e,!0)}function p4(t,n,e,r){let o=bs(t,n,e);return bs(t,n+1,r)||o}function O2e(t,n,e,r,o){let i=p4(t,n,e,r);return bs(t,n+2,o)||i}function XH(t,n,e,r,o,i){let s=p4(t,n,e,r);return p4(t,n+2,o,i)||s}function F2e(t,n,e,r,o,i,s,a,l){let c=n.consts,u=Vy(n,t,4,s||null,a||null);qR()&&M5(n,e,u,lh(c,l),w5),u.mergedAttrs=X2(u.mergedAttrs,u.attrs),JR(n,u);let d=u.tView=h5(2,u,r,o,i,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return n.queries!==null&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}function h4(t,n,e,r,o,i,s,a,l,c){let u=e+co,d=n.firstCreatePass?F2e(u,n,t,r,o,i,s,a,l):n.data[u];vm(d,!1);let p=P2e(n,t,d,e);N4()&&$4(n,t,p,d),l1(p,t);let h=bH(p,t,p,d);return t[u]=h,m5(t,h),a2e(h,d,t),T4(d)&&B4(n,t,d),l!=null&&g5(t,d,c),d}function lt(t,n,e,r,o,i,s,a){let l=jt(),c=Hr(),u=lh(c.consts,i);return h4(l,c,t,n,e,r,o,u,s,a),lt}var P2e=B2e;function B2e(t,n,e,r){return A4(!0),n[jr].createComment("")}var YH=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var QH=new Me("");var JH=(()=>{class t{static \u0275prov=ke({token:t,providedIn:"root",factory:()=>new pR})}return t})(),pR=class{queuedEffectCount=0;queues=new Map;schedule(n){this.enqueue(n)}remove(n){let e=n.zone,r=this.queues.get(e);r.has(n)&&(r.delete(n),this.queuedEffectCount--)}enqueue(n){let e=n.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(n)||(this.queuedEffectCount++,r.add(n))}flush(){for(;this.queuedEffectCount>0;)for(let[n,e]of this.queues)n===null?this.flushQueue(e):n.run(()=>this.flushQueue(e))}flushQueue(n){for(let e of n)n.delete(e),this.queuedEffectCount--,e.run()}};function km(t){return!!t&&typeof t.then=="function"}function eU(t){return!!t&&typeof t.subscribe=="function"}var tU=new Me("");function A5(t){return gm([{provide:tU,multi:!0,useValue:t}])}var nU=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=I(tU,{optional:!0})??[];injector=I(Yt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let o of this.appInits){let i=Vo(this.injector,o);if(km(i))e.push(i);else if(eU(i)){let s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),H4=new Me("");function L2e(){qN(()=>{throw new Ne(600,!1)})}function $2e(t){return t.isBoundToModule}var V2e=10;var ll=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=I(Zme);afterRenderManager=I(l5);zonelessEnabled=I(t5);rootEffectScheduler=I(JH);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ot;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=I(hh).hasPendingTasks.pipe(It(e=>!e));constructor(){I(xm,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=I(to);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,o=Yt.NULL){Jn(10);let i=e instanceof TH;if(!this._injector.get(nU).done){let h="";throw new Ne(405,h)}let a;i?a=e:a=this._injector.get(z4).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let l=$2e(a)?void 0:this._injector.get(uc),c=r||a.selector,u=a.create(o,[],c,l),d=u.location.nativeElement,p=u.injector.get(QH,null);return p?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),VC(this.components,u),p?.unregisterApplication(d)}),this._loadComponent(u),Jn(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Jn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(a5.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ne(101,!1);let e=dn(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,dn(e),this.afterTick.next(),Jn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(yo,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<V2e;)Jn(14),this.synchronizeOnce(),Jn(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:o}of this.allViews)j2e(r,o,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>D4(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;VC(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(H4,[]).forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>VC(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ne(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function VC(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function j2e(t,n,e,r){if(!e&&!D4(t))return;yH(t,n,e&&!r?0:1)}function At(t,n,e,r){let o=jt(),i=wm();if(bs(o,i,n)){let s=Hr(),a=I4();Xge(a,o,t,n,e,r)}return At}function rU(t,n,e,r){return bs(t,wm(),e)?n+_4(e)+r:ul}function FC(t,n){return t<<17|n<<2}function mm(t){return t>>17&32767}function z2e(t){return(t&2)==2}function H2e(t,n){return t&131071|n<<17}function hR(t){return t|2}function t1(t){return(t&131068)>>2}function MA(t,n){return t&-131069|n<<2}function U2e(t){return(t&1)===1}function fR(t){return t|1}function G2e(t,n,e,r,o,i){let s=i?n.classBindings:n.styleBindings,a=mm(s),l=t1(s);t[r]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||Oy(d,u)>0)&&(c=!0)}else u=e;if(o)if(l!==0){let p=mm(t[a+1]);t[r+1]=FC(p,a),p!==0&&(t[p+1]=MA(t[p+1],r)),t[a+1]=H2e(t[a+1],r)}else t[r+1]=FC(a,0),a!==0&&(t[a+1]=MA(t[a+1],r)),a=r;else t[r+1]=FC(l,0),a===0?a=r:t[l+1]=MA(t[l+1],r),l=r;c&&(t[r+1]=hR(t[r+1])),vj(t,u,r,!0),vj(t,u,r,!1),W2e(n,u,t,r,i),s=FC(a,l),i?n.classBindings=s:n.styleBindings=s}function W2e(t,n,e,r,o){let i=o?t.residualClasses:t.residualStyles;i!=null&&typeof n=="string"&&Oy(i,n)>=0&&(e[r+1]=fR(e[r+1]))}function vj(t,n,e,r){let o=t[e+1],i=n===null,s=r?mm(o):t1(o),a=!1;for(;s!==0&&(a===!1||i);){let l=t[s],c=t[s+1];q2e(l,n)&&(a=!0,t[s+1]=r?fR(c):hR(c)),s=r?mm(c):t1(c)}a&&(t[e+1]=r?hR(o):fR(o))}function q2e(t,n){return t===null||n==null||(Array.isArray(t)?t[1]:t)===n?!0:Array.isArray(t)&&typeof n=="string"?Oy(t,n)>=0:!1}var Lo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function oU(t){return t.substring(Lo.key,Lo.keyEnd)}function K2e(t){return t.substring(Lo.value,Lo.valueEnd)}function Z2e(t){return aU(t),iU(t,n1(t,0,Lo.textEnd))}function iU(t,n){let e=Lo.textEnd;return e===n?-1:(n=Lo.keyEnd=Y2e(t,Lo.key=n,e),n1(t,n,e))}function X2e(t){return aU(t),sU(t,n1(t,0,Lo.textEnd))}function sU(t,n){let e=Lo.textEnd,r=Lo.key=n1(t,n,e);return e===r?-1:(r=Lo.keyEnd=Q2e(t,r,e),r=wj(t,r,e,58),r=Lo.value=n1(t,r,e),r=Lo.valueEnd=J2e(t,r,e),wj(t,r,e,59))}function aU(t){Lo.key=0,Lo.keyEnd=0,Lo.value=0,Lo.valueEnd=0,Lo.textEnd=t.length}function n1(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function Y2e(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}function Q2e(t,n,e){let r;for(;n<e&&((r=t.charCodeAt(n))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)n++;return n}function wj(t,n,e,r){return n=n1(t,n,e),n<e&&n++,n}function J2e(t,n,e){let r=-1,o=-1,i=-1,s=n,a=s;for(;s<e;){let l=t.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=yj(t,l,s,e):n===s-4&&i===85&&o===82&&r===76&&l===40?a=s=yj(t,41,s,e):l>32&&(a=s),i=o,o=r,r=l&-33}return a}function yj(t,n,e,r){let o=-1,i=e;for(;i<r;){let s=t.charCodeAt(i++);if(s==n&&o!==92)return i;s==92&&o===92?o=0:o=s}throw new Error}function Be(t,n,e){let r=jt(),o=wm();if(bs(r,o,n)){let i=Hr(),s=I4();v5(i,s,r,t,n,r[jr],e,!1)}return Be}function mR(t,n,e,r,o){y5(n,t,e,o?"class":"style",r)}function bm(t,n,e){return cU(t,n,e,!1),bm}function Sr(t,n){return cU(t,n,null,!0),Sr}function ud(t){R5(pU,e1e,t,!1)}function e1e(t,n){for(let e=X2e(n);e>=0;e=sU(n,e))pU(t,oU(n),K2e(n))}function Ve(t){R5(s1e,lU,t,!0)}function lU(t,n){for(let e=Z2e(n);e>=0;e=iU(n,e))Ry(t,oU(n),!0)}function cU(t,n,e,r){let o=jt(),i=Hr(),s=pz(2);if(i.firstUpdatePass&&dU(i,t,s,r),n!==ul&&bs(o,s,n)){let a=i.data[dh()];hU(i,a,o,o[jr],t,o[s+1]=l1e(n,e),r,s)}}function R5(t,n,e,r){let o=Hr(),i=pz(2);o.firstUpdatePass&&dU(o,null,i,r);let s=jt();if(e!==ul&&bs(s,i,e)){let a=o.data[dh()];if(fU(a,r)&&!uU(o,i)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=AA(l,e||"")),mR(o,a,s,e,r)}else a1e(o,a,s,s[jr],s[i+1],s[i+1]=i1e(t,n,e),r,i)}}function uU(t,n){return n>=t.expandoStartIndex}function dU(t,n,e,r){let o=t.data;if(o[e+1]===null){let i=o[dh()],s=uU(t,e);fU(i,r)&&n===null&&!s&&(n=!1),n=t1e(o,i,n,r),G2e(o,i,n,e,s,r)}}function t1e(t,n,e,r){let o=kme(t),i=r?n.residualClasses:n.residualStyles;if(o===null)(r?n.classBindings:n.styleBindings)===0&&(e=TA(null,t,n,e,r),e=Ey(e,n.attrs,r),i=null);else{let s=n.directiveStylingLast;if(s===-1||t[s]!==o)if(e=TA(o,t,n,e,r),i===null){let l=n1e(t,n,r);l!==void 0&&Array.isArray(l)&&(l=TA(null,t,n,l[1],r),l=Ey(l,n.attrs,r),r1e(t,n,r,l))}else i=o1e(t,n,r)}return i!==void 0&&(r?n.residualClasses=i:n.residualStyles=i),e}function n1e(t,n,e){let r=e?n.classBindings:n.styleBindings;if(t1(r)!==0)return t[mm(r)]}function r1e(t,n,e,r){let o=e?n.classBindings:n.styleBindings;t[mm(o)]=r}function o1e(t,n,e){let r,o=n.directiveEnd;for(let i=1+n.directiveStylingLast;i<o;i++){let s=t[i].hostAttrs;r=Ey(r,s,e)}return Ey(r,n.attrs,e)}function TA(t,n,e,r,o){let i=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(i=n[a],r=Ey(r,i.hostAttrs,o),i!==t);)a++;return t!==null&&(e.directiveStylingLast=a),r}function Ey(t,n,e){let r=e?1:2,o=-1;if(n!==null)for(let i=0;i<n.length;i++){let s=n[i];typeof s=="number"?o=s:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Ry(t,s,e?!0:n[++i]))}return t===void 0?null:t}function i1e(t,n,e){if(e==null||e==="")return Ji;let r=[],o=c1(e);if(Array.isArray(o))for(let i=0;i<o.length;i++)t(r,o[i],!0);else if(typeof o=="object")for(let i in o)o.hasOwnProperty(i)&&t(r,i,o[i]);else typeof o=="string"&&n(r,o);return r}function pU(t,n,e){Ry(t,n,c1(e))}function s1e(t,n,e){let r=String(n);r!==""&&!r.includes(" ")&&Ry(t,r,e)}function a1e(t,n,e,r,o,i,s,a){o===ul&&(o=Ji);let l=0,c=0,u=0<o.length?o[0]:null,d=0<i.length?i[0]:null;for(;u!==null||d!==null;){let p=l<o.length?o[l+1]:void 0,h=c<i.length?i[c+1]:void 0,f=null,m;u===d?(l+=2,c+=2,p!==h&&(f=d,m=h)):d===null||u!==null&&u<d?(l+=2,f=u):(c+=2,f=d,m=h),f!==null&&hU(t,n,e,r,f,m,s,a),u=l<o.length?o[l]:null,d=c<i.length?i[c]:null}}function hU(t,n,e,r,o,i,s,a){if(!(n.type&3))return;let l=t.data,c=l[a+1],u=U2e(c)?xj(l,n,e,o,t1(c),s):void 0;if(!f4(u)){f4(i)||z2e(c)&&(i=xj(l,null,e,o,a,s));let d=iz(dh(),e);f0e(r,s,d,o,i)}}function xj(t,n,e,r,o,i){let s=n===null,a;for(;o>0;){let l=t[o],c=Array.isArray(l),u=c?l[1]:l,d=u===null,p=e[o+1];p===ul&&(p=d?Ji:void 0);let h=d?vA(p,r):u===r?p:void 0;if(c&&!f4(h)&&(h=vA(l,r)),f4(h)&&(a=h,s))return a;let f=t[o+1];o=s?mm(f):t1(f)}if(n!==null){let l=i?n.residualClasses:n.residualStyles;l!=null&&(a=vA(l,r))}return a}function f4(t){return t!==void 0}function l1e(t,n){return t==null||t===""||(typeof n=="string"?t=t+n:typeof t=="object"&&(t=ks(c1(t)))),t}function fU(t,n){return(t.flags&(n?8:16))!==0}function mU(t,n,e){let r=jt(),o=rU(r,t,n,e);R5(Ry,lU,o,!0)}var gR=class{destroy(n){}updateValue(n,e){}swap(n,e){let r=Math.min(n,e),o=Math.max(n,e),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(n,e){this.attach(e,this.detach(n))}};function DA(t,n,e,r,o){return t===e&&Object.is(n,r)?1:Object.is(o(t,n),o(e,r))?-1:0}function c1e(t,n,e){let r,o,i=0,s=t.length-1,a=void 0;if(Array.isArray(n)){let l=n.length-1;for(;i<=s&&i<=l;){let c=t.at(i),u=n[i],d=DA(i,c,i,u,e);if(d!==0){d<0&&t.updateValue(i,u),i++;continue}let p=t.at(s),h=n[l],f=DA(s,p,l,h,e);if(f!==0){f<0&&t.updateValue(s,h),s--,l--;continue}let m=e(i,c),g=e(s,p),v=e(i,u);if(Object.is(v,g)){let w=e(l,h);Object.is(w,m)?(t.swap(i,s),t.updateValue(s,h),l--,s--):t.move(s,i),t.updateValue(i,u),i++;continue}if(r??=new m4,o??=kj(t,i,s,e),vR(t,r,i,v))t.updateValue(i,u),i++,s++;else if(o.has(v))r.set(m,t.detach(i)),s--;else{let w=t.create(i,n[i]);t.attach(i,w),i++,s++}}for(;i<=l;)_j(t,r,e,i,n[i]),i++}else if(n!=null){let l=n[Symbol.iterator](),c=l.next();for(;!c.done&&i<=s;){let u=t.at(i),d=c.value,p=DA(i,u,i,d,e);if(p!==0)p<0&&t.updateValue(i,d),i++,c=l.next();else{r??=new m4,o??=kj(t,i,s,e);let h=e(i,d);if(vR(t,r,i,h))t.updateValue(i,d),i++,s++,c=l.next();else if(!o.has(h))t.attach(i,t.create(i,d)),i++,s++,c=l.next();else{let f=e(i,u);r.set(f,t.detach(i)),s--}}}for(;!c.done;)_j(t,r,e,t.length,c.value),c=l.next()}for(;i<=s;)t.destroy(t.detach(s--));r?.forEach(l=>{t.destroy(l)})}function vR(t,n,e,r){return n!==void 0&&n.has(r)?(t.attach(e,n.get(r)),n.delete(r),!0):!1}function _j(t,n,e,r,o){if(vR(t,n,r,e(r,o)))t.updateValue(r,o);else{let i=t.create(r,o);t.attach(r,i)}}function kj(t,n,e,r){let o=new Set;for(let i=n;i<=e;i++)o.add(r(i,t.at(i)));return o}var m4=class{kvMap=new Map;_vMap=void 0;has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let e=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(n,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,e){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,e)}else this.kvMap.set(n,e)}forEach(n){for(let[e,r]of this.kvMap)if(n(r,e),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),n(r,e)}}};function Ct(t,n){cl("NgControlFlow");let e=jt(),r=wm(),o=e[r]!==ul?e[r]:-1,i=o!==-1?g4(e,co+o):void 0,s=0;if(bs(e,r,t)){let a=dn(null);try{if(i!==void 0&&SH(i,s),t!==-1){let l=co+t,c=g4(e,l),u=_R(e[cn],l),d=e1(c,u.tView.ssrId),p=Ly(e,u,n,{dehydratedView:d});$y(c,p,s,J2(u,d))}}finally{dn(a)}}else if(i!==void 0){let a=CH(i,s);a!==void 0&&(a[$o]=n)}}var wR=class{lContainer;$implicit;$index;constructor(n,e,r){this.lContainer=n,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-Di}};function Ss(t){return t}function gU(t,n){return n}var yR=class{hasEmptyBlock;trackByFn;liveCollection;constructor(n,e,r){this.hasEmptyBlock=n,this.trackByFn=e,this.liveCollection=r}};function zo(t,n,e,r,o,i,s,a,l,c,u,d,p){cl("NgControlFlow");let h=jt(),f=Hr(),m=l!==void 0,g=jt(),v=a?s.bind(g[Zs][$o]):s,w=new yR(m,v);g[co+t]=w,h4(h,f,t+1,n,e,r,o,lh(f.consts,i)),m&&h4(h,f,t+2,l,c,u,d,lh(f.consts,p))}var xR=class extends gR{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(n,e,r){super(),this.lContainer=n,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-Di}at(n){return this.getLView(n)[$o].$implicit}attach(n,e){let r=e[q2];this.needsIndexUpdate||=n!==this.length,$y(this.lContainer,e,n,J2(this.templateTNode,r))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,u1e(this.lContainer,n)}create(n,e){let r=e1(this.lContainer,this.templateTNode.tView.ssrId),o=Ly(this.hostLView,this.templateTNode,new wR(this.lContainer,e,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(n){L4(n[cn],n),this.operationsCounter?.recordDestroy()}updateValue(n,e){this.getLView(n)[$o].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[$o].$index=n}getLView(n){return d1e(this.lContainer,n)}};function Ho(t){let n=dn(null),e=dh();try{let r=jt(),o=r[cn],i=r[e],s=e+1,a=g4(r,s);if(i.liveCollection===void 0){let c=_R(o,s);i.liveCollection=new xR(a,r,c)}else i.liveCollection.reset();let l=i.liveCollection;if(c1e(l,t,i.trackByFn),l.updateIndexes(),i.hasEmptyBlock){let c=wm(),u=l.length===0;if(bs(r,c,u)){let d=e+2,p=g4(r,d);if(u){let h=_R(o,d),f=e1(p,h.tView.ssrId),m=Ly(r,h,void 0,{dehydratedView:f});$y(p,m,0,J2(h,f))}else SH(p,0)}}}finally{dn(n)}}function g4(t,n){return t[n]}function u1e(t,n){return Ty(t,n)}function d1e(t,n){return CH(t,n)}function _R(t,n){return HR(t,n)}function J(t,n,e,r){let o=jt(),i=Hr(),s=co+t,a=o[jr],l=i.firstCreatePass?IH(s,i,o,n,w5,qR(),e,r):i.data[s],c=p1e(i,o,l,a,n,t);o[s]=c;let u=T4(l);return vm(l,!0),iH(a,c,l),!k5(l)&&N4()&&$4(i,o,c,l),(dme()===0||u)&&l1(c,o),pme(),u&&(B4(i,o,l),u5(i,l,o)),r!==null&&g5(o,l),J}function re(){let t=Ii();KR()?ZR():(t=t.parent,vm(t,!1));let n=t;fme(n)&&mme(),hme();let e=Hr();return e.firstCreatePass&&NH(e,n),n.classesWithoutHost!=null&&Dme(n)&&mR(e,n,jt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Eme(n)&&mR(e,n,jt(),n.stylesWithoutHost,!1),re}function Le(t,n,e,r){return J(t,n,e,r),re(),Le}var p1e=(t,n,e,r,o,i)=>(A4(!0),rH(r,o,Sme()));function h1e(t,n,e,r,o){let i=n.consts,s=lh(i,r),a=Vy(n,t,8,"ng-container",s);s!==null&&rR(a,s,!0);let l=lh(i,o);return qR()&&M5(n,e,a,l,w5),a.mergedAttrs=X2(a.mergedAttrs,a.attrs),n.queries!==null&&n.queries.elementStart(n,a),a}function Cm(t,n,e){let r=jt(),o=Hr(),i=t+co,s=o.firstCreatePass?h1e(i,o,r,n,e):o.data[i];vm(s,!0);let a=f1e(o,r,s,t);return r[i]=a,N4()&&$4(o,r,a,s),l1(a,r),T4(s)&&(B4(o,r,s),u5(o,s,r)),e!=null&&g5(r,s),Cm}function Sm(){let t=Ii(),n=Hr();return KR()?ZR():(t=t.parent,vm(t,!1)),n.firstCreatePass&&(JR(n,t),zR(t)&&n.queries.elementEnd(t)),Sm}function wr(t,n,e){return Cm(t,n,e),Sm(),wr}var f1e=(t,n,e,r)=>(A4(!0),Fge(n[jr],""));function bn(){return jt()}function Gr(t,n,e){let r=jt(),o=wm();if(bs(r,o,n)){let i=Hr(),s=I4();v5(i,s,r,t,n,r[jr],e,!0)}return Gr}var rm=void 0;function m1e(t){let n=Math.floor(Math.abs(t)),e=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&e===0?1:5}var g1e=["en",[["a","p"],["AM","PM"],rm],[["AM","PM"],rm,rm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rm,"{1} 'at' {0}",rm],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",m1e],_y={};function vU(t,n,e){typeof n!="string"&&(e=n,n=t[zr.LocaleId]),n=n.toLowerCase().replace(/_/g,"-"),_y[n]=t,e&&(_y[n][zr.ExtraData]=e)}function va(t){let n=v1e(t),e=bj(n);if(e)return e;let r=n.split("-")[0];if(e=bj(r),e)return e;if(r==="en")return g1e;throw new Ne(701,!1)}function bj(t){return t in _y||(_y[t]=om.ng&&om.ng.common&&om.ng.common.locales&&om.ng.common.locales[t]),_y[t]}var zr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(zr||{});function v1e(t){return t.toLowerCase().replace(/_/g,"-")}var v4="en-US";var w1e=v4;function y1e(t){typeof t=="string"&&(w1e=t.toLowerCase().replace(/_/g,"-"))}function Cj(t,n,e){return function r(o){if(o===Function)return e;let i=i1(t)?ac(t.index,n):n;S5(i,5);let s=n[$o],a=Sj(n,s,e,o),l=r.__ngNextListenerFn__;for(;l;)a=Sj(n,s,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function Sj(t,n,e,r){let o=dn(null);try{return Jn(6,n,e),e(r)!==!1}catch(i){return x1e(t,i),!1}finally{Jn(7,n,e),dn(o)}}function x1e(t,n){let e=t[K2],r=e?e.get(al,null):null;r&&r.handleError(n)}function Mj(t,n,e,r,o,i){let s=n[e],a=n[cn],c=a.data[e].outputs[r],u=s[c],d=a.firstCreatePass?WR(a):null,p=GR(n),h=u.subscribe(i),f=p.length;p.push(i,h),d&&d.push(o,t.index,f,-(f+1))}var _1e=(t,n,e)=>{};function je(t,n,e,r){let o=jt(),i=Hr(),s=Ii();return wU(i,o,o[jr],s,t,n,r),je}function k1e(t,n,e,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===e&&o[i+1]===r){let a=n[qC],l=o[i+2];return a.length>l?a[l]:null}typeof s=="string"&&(i+=2)}return null}function wU(t,n,e,r,o,i,s){let a=T4(r),c=t.firstCreatePass?WR(t):null,u=GR(n),d=!0;if(r.type&3||s){let p=dc(r,n),h=s?s(p):p,f=u.length,m=s?v=>s(sc(v[r.index])):r.index,g=null;if(!s&&a&&(g=k1e(t,n,o,r.index)),g!==null){let v=g.__ngLastListenerFn__||g;v.__ngNextListenerFn__=i,g.__ngLastListenerFn__=i,d=!1}else{i=Cj(r,n,i),_1e(h,o,i);let v=e.listen(h,o,i);u.push(i,v),c&&c.push(o,m,f,f+1)}}else i=Cj(r,n,i);if(d){let p=r.outputs?.[o],h=r.hostDirectiveOutputs?.[o];if(h&&h.length)for(let f=0;f<h.length;f+=2){let m=h[f],g=h[f+1];Mj(r,n,m,g,o,i)}if(p&&p.length)for(let f of p)Mj(r,n,f,o,o,i)}}function be(t=1){return Cme(t)}function b1e(t,n){let e=null,r=Mge(t);for(let o=0;o<n.length;o++){let i=n[o];if(i==="*"){e=o;continue}if(r===null?nH(t,i,!0):Ege(r,i))return o}return e}function Rt(t){let n=jt()[Zs][Cs];if(!n.projection){let e=t?t.length:1,r=n.projection=zfe(e,null),o=r.slice(),i=n.child;for(;i!==null;){if(i.type!==128){let s=t?b1e(i,t):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function it(t,n=0,e,r,o,i){let s=jt(),a=Hr(),l=r?t+1:null;l!==null&&h4(s,a,l,r,o,i,null,e);let c=Vy(a,co+t,16,null,e||null);c.projection===null&&(c.projection=n),ZR();let d=!s[q2]||cz();s[Zs][Cs].projection[c.projection]===null&&l!==null?C1e(s,a,l):d&&!k5(c)&&p0e(a,s,c)}function C1e(t,n,e){let r=co+e,o=n.data[r],i=t[r],s=e1(i,o.tView.ssrId),a=Ly(t,o,void 0,{dehydratedView:s});$y(i,a,0,J2(o,s))}function _o(t,n,e,r){BH(t,n,e,r)}function Mm(t,n,e){PH(t,n,e)}function Mr(t){let n=jt(),e=Hr(),r=XR();E4(r+1);let o=D5(e,r);if(t.dirty&&sme(n)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let i=$H(n,r);t.reset(i,Pz),t.notifyOnChanges()}return!0}return!1}function Tr(){return T5(jt(),XR())}function es(t,n,e,r,o){zH(n,BH(t,e,r,o))}function si(t,n,e,r){zH(t,PH(n,e,r))}function no(t=1){E4(XR()+t)}function S1e(t,n,e,r){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=r}function yr(t){let n=vme();return Py(n,co+t)}function de(t,n=""){let e=jt(),r=Hr(),o=t+co,i=r.firstCreatePass?Vy(r,o,1,n,null):r.data[o],s=M1e(r,e,i,n,t);e[o]=s,N4()&&$4(r,e,s,i),vm(i,!1)}var M1e=(t,n,e,r,o)=>(A4(!0),Rge(n[jr],r));function ct(t){return et("",t,""),ct}function et(t,n,e){let r=jt(),o=rU(r,t,n,e);return o!==ul&&T1e(r,dh(),o),et}function T1e(t,n,e){let r=iz(n,t);Oge(t[jr],r,e)}function Ni(t,n,e){Bz(n)&&(n=n());let r=jt(),o=wm();if(bs(r,o,n)){let i=Hr(),s=I4();v5(i,s,r,t,n,r[jr],e,!1)}return Ni}function ts(t,n){let e=Bz(t);return e&&t.set(n),e}function Ai(t,n){let e=jt(),r=Hr(),o=Ii();return wU(r,e,e[jr],o,t,n),Ai}function D1e(t,n,e){let r=Hr();if(r.firstCreatePass){let o=ic(t);kR(e,r.data,r.blueprint,o,!0),kR(n,r.data,r.blueprint,o,!1)}}function kR(t,n,e,r,o){if(t=gi(t),Array.isArray(t))for(let i=0;i<t.length;i++)kR(t[i],n,e,r,o);else{let i=Hr(),s=jt(),a=Ii(),l=W2(t)?t:gi(t.provide),c=Xj(t),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(W2(t)||!t.multi){let h=new hm(c,o,Ut),f=IA(l,n,o?u:u+p,d);f===-1?(UA(e4(a,s),i,l),EA(i,t,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),e.push(h),s.push(h)):(e[f]=h,s[f]=h)}else{let h=IA(l,n,u+p,d),f=IA(l,n,u,u+p),m=h>=0&&e[h],g=f>=0&&e[f];if(o&&!g||!o&&!m){UA(e4(a,s),i,l);let v=N1e(o?I1e:E1e,e.length,o,r,c);!o&&g&&(e[f].providerFactory=v),EA(i,t,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),e.push(v),s.push(v)}else{let v=yU(e[o?f:h],c,!o&&r);EA(i,t,h>-1?h:f,v)}!o&&r&&g&&e[f].componentProviders++}}}function EA(t,n,e,r){let o=W2(n),i=Zfe(n);if(o||i){let l=(i?gi(n.useClass):n).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){let u=c.indexOf(e);u===-1?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function yU(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function IA(t,n,e,r){for(let o=e;o<r;o++)if(n[o]===t)return o;return-1}function E1e(t,n,e,r){return bR(this.multi,[])}function I1e(t,n,e,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Sy(e,e[cn],this.providerFactory.index,r);i=a.slice(0,s),bR(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],bR(o,i);return i}function bR(t,n){for(let e=0;e<t.length;e++){let r=t[e];n.push(r())}return n}function N1e(t,n,e,r,o){let i=new hm(t,e,Ut);return i.multi=[],i.index=n,i.componentProviders=0,yU(i,o,r&&!e),i}function ht(t,n=[]){return e=>{e.providersResolver=(r,o)=>D1e(r,o?o(t):t,n)}}function xU(t,n,e){let r=pc()+t,o=jt();return o[r]===ul?u1(o,r,e?n.call(e):n()):ZH(o,r)}function wa(t,n,e,r){return CU(jt(),pc(),t,n,e,r)}function mh(t,n,e,r,o){return SU(jt(),pc(),t,n,e,r,o)}function _U(t,n,e,r,o,i){return MU(jt(),pc(),t,n,e,r,o,i)}function kU(t,n,e,r,o,i,s){return TU(jt(),pc(),t,n,e,r,o,i,s)}function bU(t,n,e,r,o,i,s,a){let l=pc()+t,c=jt(),u=XH(c,l,e,r,o,i);return bs(c,l+4,s)||u?u1(c,l+5,a?n.call(a,e,r,o,i,s):n(e,r,o,i,s)):ZH(c,l+5)}function U4(t,n){let e=t[n];return e===ul?void 0:e}function CU(t,n,e,r,o,i){let s=n+e;return bs(t,s,o)?u1(t,s+1,i?r.call(i,o):r(o)):U4(t,s+1)}function SU(t,n,e,r,o,i,s){let a=n+e;return p4(t,a,o,i)?u1(t,a+2,s?r.call(s,o,i):r(o,i)):U4(t,a+2)}function MU(t,n,e,r,o,i,s,a){let l=n+e;return O2e(t,l,o,i,s)?u1(t,l+3,a?r.call(a,o,i,s):r(o,i,s)):U4(t,l+3)}function TU(t,n,e,r,o,i,s,a,l){let c=n+e;return XH(t,c,o,i,s,a)?u1(t,c+4,l?r.call(l,o,i,s,a):r(o,i,s,a)):U4(t,c+4)}function Te(t,n){let e=Hr(),r,o=t+co;e.firstCreatePass?(r=A1e(n,e.pipeRegistry),e.data[o]=r,r.onDestroy&&(e.destroyHooks??=[]).push(o,r.onDestroy)):r=e.data[o];let i=r.factory||(r.factory=am(r.type,!0)),s,a=_s(Ut);try{let l=JC(!1),c=i();return JC(l),S1e(e,jt(),o,c),c}finally{_s(a)}}function A1e(t,n){if(n)for(let e=n.length-1;e>=0;e--){let r=n[e];if(t===r.name)return r}}function Ee(t,n,e){let r=t+co,o=jt(),i=Py(o,r);return G4(o,r)?CU(o,pc(),n,i.transform,e,i):i.transform(e)}function DU(t,n,e,r){let o=t+co,i=jt(),s=Py(i,o);return G4(i,o)?SU(i,pc(),n,s.transform,e,r,s):s.transform(e,r)}function EU(t,n,e,r,o){let i=t+co,s=jt(),a=Py(s,i);return G4(s,i)?MU(s,pc(),n,a.transform,e,r,o,a):a.transform(e,r,o)}function IU(t,n,e,r,o,i){let s=t+co,a=jt(),l=Py(a,s);return G4(a,s)?TU(a,pc(),n,l.transform,e,r,o,i,l):l.transform(e,r,o,i)}function G4(t,n){return t[cn].data[n].pure}function ko(t,n){return j4(t,n)}var Iy=class{full;major;minor;patch;constructor(n){this.full=n;let e=n.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}},O5=new Iy("19.2.6"),CR=class{ngModuleFactory;componentFactories;constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},W4=(()=>{class t{compileModuleSync(e){return new uR(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),o=Gj(e),i=eH(o.declarations).reduce((s,a)=>{let l=ah(a);return l&&s.push(new fm(l)),s},[]);return new CR(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var R1e=(()=>{class t{zone=I(Pt);changeDetectionScheduler=I(ch);applicationRef=I(ll);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),O1e=new Me("",{factory:()=>!1});function NU({ngZoneFactory:t,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return t??=()=>new Pt(pt(ue({},RU()),{scheduleInRootZone:e})),[{provide:Pt,useFactory:t},{provide:ky,multi:!0,useFactory:()=>{let r=I(R1e,{optional:!0});return()=>r.initialize()}},{provide:ky,multi:!0,useFactory:()=>{let r=I(F1e);return()=>{r.initialize()}}},n===!0?{provide:Az,useValue:!0}:[],{provide:Rz,useValue:e??Nz}]}function AU(t){let n=t?.ignoreChangesOutsideZone,e=t?.scheduleInRootZone,r=NU({ngZoneFactory:()=>{let o=RU(t);return o.scheduleInRootZone=e,o.shouldCoalesceEventChangeDetection&&cl("NgZone_CoalesceEvent"),new Pt(o)},ignoreChangesOutsideZone:n,scheduleInRootZone:e});return gm([{provide:O1e,useValue:!0},{provide:t5,useValue:!1},r])}function RU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var F1e=(()=>{class t{subscription=new On;initialized=!1;zone=I(Pt);pendingTasks=I(hh);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var P1e=(()=>{class t{appRef=I(ll);taskService=I(hh);ngZone=I(Pt);zonelessEnabled=I(t5);tracing=I(xm,{optional:!0});disableScheduling=I(Az,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new On;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(n4):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(Rz,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof KA||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?X9:Oz;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(n4+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,X9(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function B1e(){return typeof $localize<"u"&&$localize.locale||v4}var q4=new Me("",{providedIn:"root",factory:()=>I(q4,mn.Optional|mn.SkipSelf)||B1e()});var SR=new Me(""),L1e=new Me("");function vy(t){return!t.moduleRef}function $1e(t){let n=vy(t)?t.r3Injector:t.moduleRef.injector,e=n.get(Pt);return e.run(()=>{vy(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=n.get(al,null),o;if(e.runOutsideAngular(()=>{o=e.onError.subscribe({next:i=>{r.handleError(i)}})}),vy(t)){let i=()=>n.destroy(),s=t.platformInjector.get(SR);s.add(i),n.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(SR);s.add(i),t.moduleRef.onDestroy(()=>{VC(t.allPlatformModules,t.moduleRef),o.unsubscribe(),s.delete(i)})}return j1e(r,e,()=>{let i=n.get(nU);return i.runInitializers(),i.donePromise.then(()=>{let s=n.get(q4,v4);if(y1e(s||v4),!n.get(L1e,!0))return vy(t)?n.get(ll):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(vy(t)){let l=n.get(ll);return t.rootComponent!==void 0&&l.bootstrap(t.rootComponent),l}else return V1e(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function V1e(t,n){let e=t.injector.get(ll);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>e.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(e);else throw new Ne(-403,!1);n.push(t)}function j1e(t,n,e){try{let r=e();return km(r)?r.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}var jC=null;function z1e(t=[],n){return Yt.create({name:n,providers:[{provide:C4,useValue:"platform"},{provide:SR,useValue:new Set([()=>jC=null])},...t]})}function H1e(t=[]){if(jC)return jC;let n=z1e(t);return jC=n,L2e(),U1e(n),n}function U1e(t){let n=t.get(i5,null);Vo(t,()=>{n?.forEach(e=>e())})}var Lr=(()=>{class t{static __NG_ELEMENT_ID__=G1e}return t})();function G1e(t){return W1e(Ii(),jt(),(t&16)===16)}function W1e(t,n,e){if(i1(t)&&!e){let r=ac(t.index,n);return new Dy(r,r)}else if(t.type&175){let r=n[Zs];return new Dy(r,n)}return null}var MR=class{constructor(){}supports(n){return KH(n)}create(n){return new TR(n)}},q1e=(t,n)=>n,TR=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||q1e}forEachItem(n){let e;for(e=this._itHead;e!==null;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,r=this._removalsHead,o=0,i=null;for(;e||r;){let s=!r||e&&e.currentIndex<Tj(r,o,i)?e:r,a=Tj(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)o++;else{i||(i=[]);let c=a-o,u=l-o;if(c!=u){for(let p=0;p<c;p++){let h=p<i.length?i[p]:i[p]=0,f=h+p;u<=f&&f<c&&(i[p]=h+1)}let d=s.previousIndex;i[d]=u-c}}a!==l&&n(s,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)n(e)}diff(n){if(n==null&&(n=[]),!KH(n))throw new Ne(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._itHead,r=!1,o,i,s;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)i=n[a],s=this._trackByFn(a,i),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,i,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,i,s,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)),e=e._next}else o=0,R2e(n,a=>{s=this._trackByFn(o,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,o),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,r,o){let i;return n===null?i=this._itTail:(i=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,i,o)):(n=this._linkedRecords===null?null:this._linkedRecords.get(r,o),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,i,o)):n=this._addAfter(new DR(e,r),i,o)),n}_verifyReinsertion(n,e,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?n=this._reinsertAfter(i,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;n!==null;){let e=n._next;this._addToRemovals(this._unlink(n)),n=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let o=n._prevRemoved,i=n._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(n,e,r),this._addToMoves(n,r),n}_moveAfter(n,e,r){return this._unlink(n),this._insertAfter(n,e,r),this._addToMoves(n,r),n}_addAfter(n,e,r){return this._insertAfter(n,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,e,r){let o=e===null?this._itHead:e._next;return n._next=o,n._prev=e,o===null?this._itTail=n:o._prev=n,e===null?this._itHead=n:e._next=n,this._linkedRecords===null&&(this._linkedRecords=new w4),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let e=n._prev,r=n._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new w4),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},DR=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,e){this.item=n,this.trackById=e}},ER=class{_head=null;_tail=null;add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){let e=n._prevDup,r=n._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},w4=class{map=new Map;put(n){let e=n.trackById,r=this.map.get(e);r||(r=new ER,this.map.set(e,r)),r.add(n)}get(n,e){let r=n,o=this.map.get(r);return o?o.get(n,e):null}remove(n){let e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Tj(t,n,e){let r=t.previousIndex;if(r===null)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+n+o}var IR=class{constructor(){}supports(n){return n instanceof Map||N5(n)}create(){return new NR}},NR=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let e;for(e=this._mapHead;e!==null;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||N5(n)))throw new Ne(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){let r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){let o=this._records.get(n);this._maybeAddToChanges(o,e);let i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}let r=new AR(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}},AR=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(n){this.key=n}};function Dj(){return new dd([new MR])}var dd=(()=>{class t{factories;static \u0275prov=ke({token:t,providedIn:"root",factory:Dj});constructor(e){this.factories=e}static create(e,r){if(r!=null){let o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||Dj()),deps:[[t,new Ay,new r1]]}}find(e){let r=this.factories.find(o=>o.supports(e));if(r!=null)return r;throw new Ne(901,!1)}}return t})();function Ej(){return new F5([new IR])}var F5=(()=>{class t{static \u0275prov=ke({token:t,providedIn:"root",factory:Ej});factories;constructor(e){this.factories=e}static create(e,r){if(r){let o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||Ej()),deps:[[t,new Ay,new r1]]}}find(e){let r=this.factories.find(o=>o.supports(e));if(r)return r;throw new Ne(901,!1)}}return t})();function OU(t){Jn(8);try{let{rootComponent:n,appProviders:e,platformProviders:r}=t,o=H1e(r),i=[NU({}),{provide:ch,useExisting:P1e},...e||[]],s=new d4({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return $1e({r3Injector:s.injector,platformInjector:o,rootComponent:n})}catch(n){return Promise.reject(n)}finally{Jn(9)}}function rt(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Xs(t,n=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):n}function Un(t){return YN(t)}function ae(t,n){return rC(t,n?.equal)}var RR=class{[ni];constructor(n){this[ni]=n}destroy(){this[ni].destroy()}};function Gt(t,n){!n?.injector&&uh(Gt);let e=n?.injector??I(Yt),r=n?.manualCleanup!==!0?e.get(jo):null,o,i=e.get(F4,null,{optional:!0}),s=e.get(ch);return i!==null&&!n?.forceRoot?(o=X1e(i.view,s,t),r instanceof t4&&r._lView===i.view&&(r=null)):o=Y1e(t,e.get(JH),s),o.injector=e,r!==null&&(o.onDestroyFn=r.onDestroy(()=>o.destroy())),new RR(o)}var FU=pt(ue({},Wf),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:My,run(){if(this.dirty=!1,this.hasRun&&!ly(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),n=qf(this),e=XC(!1);try{this.maybeCleanup(),this.fn(t)}finally{XC(e),D2(this,n)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),K1e=pt(ue({},FU),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){cy(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),Z1e=pt(ue({},FU),{consumerMarkedDirty(){this.view[tn]|=8192,s1(this.view),this.notifier.notify(13)},destroy(){cy(this),this.onDestroyFn(),this.maybeCleanup(),this.view[cm]?.delete(this)}});function X1e(t,n,e){let r=Object.create(Z1e);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=n,r.fn=e,t[cm]??=new Set,t[cm].add(r),r.consumerMarkedDirty(r),r}function Y1e(t,n,e){let r=Object.create(K1e);return r.fn=t,r.scheduler=n,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var Q1e=t=>t;function K4(t,n){if(typeof t=="function"){let e=iC(t,Q1e,n?.equal);return Ij(e)}else{let e=iC(t.source,t.computation,t.equal);return Ij(e)}}function Ij(t){let n=t[ni],e=t;return e.set=r=>ZN(n,r),e.update=r=>XN(n,r),e.asReadonly=o5.bind(t),e}var NA=Symbol("NOT_SET"),PU=new Set,J1e=pt(ue({},uy),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:NA,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(t){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==NA&&!ly(this))return this.signal;try{for(let o of this.cleanup??PU)o()}finally{this.cleanup?.clear()}let n=[];t!==void 0&&n.push(t),n.push(this.registerCleanupFn);let e=qf(this),r;try{r=this.userFn.apply(null,n)}finally{D2(this,e)}return(this.value===NA||!this.equal(this.value,r))&&(this.value=r,this.version++),this.signal}}),OR=class extends o4{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(n,e,r,o,i,s=null){super(n,[void 0,void 0,void 0,void 0],r,!1,i,s),this.scheduler=o;for(let a of Wz){let l=e[a];if(l===void 0)continue;let c=Object.create(J1e);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(nh(c),c.value),c.signal[ni]=c,c.registerCleanupFn=u=>(c.cleanup??=new Set).add(u),this.nodes[a]=c,this.hooks[a]=u=>c.phaseFn(u)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let n of this.nodes)for(let e of n?.cleanup??PU)e()}};function P5(t,n){!n?.injector&&uh(P5);let e=n?.injector??I(Yt),r=e.get(ch),o=e.get(l5),i=e.get(xm,null,{optional:!0});o.impl??=e.get(qz);let s=t;typeof s=="function"&&(s={mixedReadWrite:t});let a=e.get(F4,null,{optional:!0}),l=new OR(o.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,r,e.get(jo),i?.snapshot(null));return o.impl.register(l),l}function Z4(t,n){let e=ah(t),r=n.elementInjector||S4();return new fm(e).create(r,n.projectableNodes,n.hostElement,n.environmentInjector)}function BU(t){let n=ah(t);if(!n)return null;let e=new fm(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var un=new Me("");var VU=null;function ya(){return VU}function B5(t){VU??=t}var zy=class{},Hy=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:()=>I(jU),providedIn:"platform"})}return t})(),L5=new Me(""),jU=(()=>{class t extends Hy{_location;_history;_doc=I(un);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ya().getBaseHref(this._doc)}onPopState(e){let r=ya().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=ya().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){this._history.pushState(e,r,o)}replaceState(e,r,o){this._history.replaceState(e,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function X4(t,n){return t?n?t.endsWith("/")?n.startsWith("/")?t+n.slice(1):t+n:n.startsWith("/")?t+n:`${t}/${n}`:t:n}function LU(t){let n=t.search(/#|\?|$/);return t[n-1]==="/"?t.slice(0,n-1)+t.slice(n):t}function dl(t){return t&&t[0]!=="?"?`?${t}`:t}var xa=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:()=>I(Q4),providedIn:"root"})}return t})(),Y4=new Me(""),Q4=(()=>{class t extends xa{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return X4(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+dl(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+dl(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+dl(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||t)(Xe(Hy),Xe(Y4,8))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hc=(()=>{class t{_subject=new ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=nve(LU($U(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+dl(r))}normalize(e){return t.stripTrailingSlash(tve(this._basePath,$U(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+dl(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+dl(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=dl;static joinWithSlash=X4;static stripTrailingSlash=LU;static \u0275fac=function(r){return new(r||t)(Xe(xa))};static \u0275prov=ke({token:t,factory:()=>eve(),providedIn:"root"})}return t})();function eve(){return new hc(Xe(xa))}function tve(t,n){if(!t||!n.startsWith(t))return n;let e=n.substring(t.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function $U(t){return t.replace(/\/index.html$/,"")}function nve(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}var iS=(()=>{class t extends xa{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=X4(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+dl(i))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+dl(i))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||t)(Xe(Hy),Xe(Y4,8))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();var Ri=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Ri||{}),tr=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(tr||{}),Ms=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Ms||{}),hd={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function GU(t){return va(t)[zr.LocaleId]}function WU(t,n,e){let r=va(t),o=[r[zr.DayPeriodsFormat],r[zr.DayPeriodsStandalone]],i=_a(o,n);return _a(i,e)}function qU(t,n,e){let r=va(t),o=[r[zr.DaysFormat],r[zr.DaysStandalone]],i=_a(o,n);return _a(i,e)}function KU(t,n,e){let r=va(t),o=[r[zr.MonthsFormat],r[zr.MonthsStandalone]],i=_a(o,n);return _a(i,e)}function ZU(t,n){let r=va(t)[zr.Eras];return _a(r,n)}function Uy(t,n){let e=va(t);return _a(e[zr.DateFormat],n)}function Gy(t,n){let e=va(t);return _a(e[zr.TimeFormat],n)}function Wy(t,n){let r=va(t)[zr.DateTimeFormat];return _a(r,n)}function qy(t,n){let e=va(t),r=e[zr.NumberSymbols][n];if(typeof r>"u"){if(n===hd.CurrencyDecimal)return e[zr.NumberSymbols][hd.Decimal];if(n===hd.CurrencyGroup)return e[zr.NumberSymbols][hd.Group]}return r}function XU(t){if(!t[zr.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[zr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function YU(t){let n=va(t);return XU(n),(n[zr.ExtraData][2]||[]).map(r=>typeof r=="string"?$5(r):[$5(r[0]),$5(r[1])])}function QU(t,n,e){let r=va(t);XU(r);let o=[r[zr.ExtraData][0],r[zr.ExtraData][1]],i=_a(o,n)||[];return _a(i,e)||[]}function _a(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function $5(t){let[n,e]=t.split(":");return{hours:+n,minutes:+e}}var rve=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,J4={},ove=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function JU(t,n,e,r){let o=hve(t);n=pd(e,n)||n;let s=[],a;for(;n;)if(a=ove.exec(n),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;n=u}else{s.push(n);break}let l=o.getTimezoneOffset();r&&(l=tG(r,l),o=pve(o,r));let c="";return s.forEach(u=>{let d=uve(u);c+=d?d(o,e,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function oS(t,n,e){let r=new Date(0);return r.setFullYear(t,n,e),r.setHours(0,0,0),r}function pd(t,n){let e=GU(t);if(J4[e]??={},J4[e][n])return J4[e][n];let r="";switch(n){case"shortDate":r=Uy(t,Ms.Short);break;case"mediumDate":r=Uy(t,Ms.Medium);break;case"longDate":r=Uy(t,Ms.Long);break;case"fullDate":r=Uy(t,Ms.Full);break;case"shortTime":r=Gy(t,Ms.Short);break;case"mediumTime":r=Gy(t,Ms.Medium);break;case"longTime":r=Gy(t,Ms.Long);break;case"fullTime":r=Gy(t,Ms.Full);break;case"short":let o=pd(t,"shortTime"),i=pd(t,"shortDate");r=eS(Wy(t,Ms.Short),[o,i]);break;case"medium":let s=pd(t,"mediumTime"),a=pd(t,"mediumDate");r=eS(Wy(t,Ms.Medium),[s,a]);break;case"long":let l=pd(t,"longTime"),c=pd(t,"longDate");r=eS(Wy(t,Ms.Long),[l,c]);break;case"full":let u=pd(t,"fullTime"),d=pd(t,"fullDate");r=eS(Wy(t,Ms.Full),[u,d]);break}return r&&(J4[e][n]=r),r}function eS(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,r){return n!=null&&r in n?n[r]:e})),t}function pl(t,n,e="-",r,o){let i="";(t<0||o&&t<=0)&&(o?t=-t+1:(t=-t,i=e));let s=String(t);for(;s.length<n;)s="0"+s;return r&&(s=s.slice(s.length-n)),i+s}function ive(t,n){return pl(t,3).substring(0,n)}function bo(t,n,e=0,r=!1,o=!1){return function(i,s){let a=sve(t,i);if((e>0||a>-e)&&(a+=e),t===3)a===0&&e===-12&&(a=12);else if(t===6)return ive(a,n);let l=qy(s,hd.MinusSign);return pl(a,n,l,r,o)}}function sve(t,n){switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate();case 3:return n.getHours();case 4:return n.getMinutes();case 5:return n.getSeconds();case 6:return n.getMilliseconds();case 7:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function xr(t,n,e=Ri.Format,r=!1){return function(o,i){return ave(o,i,t,n,e,r)}}function ave(t,n,e,r,o,i){switch(e){case 2:return KU(n,o,r)[t.getMonth()];case 1:return qU(n,o,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(i){let c=YU(n),u=QU(n,o,r),d=c.findIndex(p=>{if(Array.isArray(p)){let[h,f]=p,m=s>=h.hours&&a>=h.minutes,g=s<f.hours||s===f.hours&&a<f.minutes;if(h.hours<f.hours){if(m&&g)return!0}else if(m||g)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return WU(n,o,r)[s<12?0:1];case 3:return ZU(n,r)[t.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function tS(t){return function(n,e,r){let o=-1*r,i=qy(e,hd.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(t){case 0:return(o>=0?"+":"")+pl(s,2,i)+pl(Math.abs(o%60),2,i);case 1:return"GMT"+(o>=0?"+":"")+pl(s,1,i);case 2:return"GMT"+(o>=0?"+":"")+pl(s,2,i)+":"+pl(Math.abs(o%60),2,i);case 3:return r===0?"Z":(o>=0?"+":"")+pl(s,2,i)+":"+pl(Math.abs(o%60),2,i);default:throw new Error(`Unknown zone width "${t}"`)}}}var lve=0,rS=4;function cve(t){let n=oS(t,lve,1).getDay();return oS(t,0,1+(n<=rS?rS:rS+7)-n)}function eG(t){let n=t.getDay(),e=n===0?-3:rS-n;return oS(t.getFullYear(),t.getMonth(),t.getDate()+e)}function V5(t,n=!1){return function(e,r){let o;if(n){let i=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();o=1+Math.floor((s+i)/7)}else{let i=eG(e),s=cve(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return pl(o,t,qy(r,hd.MinusSign))}}function nS(t,n=!1){return function(e,r){let i=eG(e).getFullYear();return pl(i,t,qy(r,hd.MinusSign),n)}}var j5={};function uve(t){if(j5[t])return j5[t];let n;switch(t){case"G":case"GG":case"GGG":n=xr(3,tr.Abbreviated);break;case"GGGG":n=xr(3,tr.Wide);break;case"GGGGG":n=xr(3,tr.Narrow);break;case"y":n=bo(0,1,0,!1,!0);break;case"yy":n=bo(0,2,0,!0,!0);break;case"yyy":n=bo(0,3,0,!1,!0);break;case"yyyy":n=bo(0,4,0,!1,!0);break;case"Y":n=nS(1);break;case"YY":n=nS(2,!0);break;case"YYY":n=nS(3);break;case"YYYY":n=nS(4);break;case"M":case"L":n=bo(1,1,1);break;case"MM":case"LL":n=bo(1,2,1);break;case"MMM":n=xr(2,tr.Abbreviated);break;case"MMMM":n=xr(2,tr.Wide);break;case"MMMMM":n=xr(2,tr.Narrow);break;case"LLL":n=xr(2,tr.Abbreviated,Ri.Standalone);break;case"LLLL":n=xr(2,tr.Wide,Ri.Standalone);break;case"LLLLL":n=xr(2,tr.Narrow,Ri.Standalone);break;case"w":n=V5(1);break;case"ww":n=V5(2);break;case"W":n=V5(1,!0);break;case"d":n=bo(2,1);break;case"dd":n=bo(2,2);break;case"c":case"cc":n=bo(7,1);break;case"ccc":n=xr(1,tr.Abbreviated,Ri.Standalone);break;case"cccc":n=xr(1,tr.Wide,Ri.Standalone);break;case"ccccc":n=xr(1,tr.Narrow,Ri.Standalone);break;case"cccccc":n=xr(1,tr.Short,Ri.Standalone);break;case"E":case"EE":case"EEE":n=xr(1,tr.Abbreviated);break;case"EEEE":n=xr(1,tr.Wide);break;case"EEEEE":n=xr(1,tr.Narrow);break;case"EEEEEE":n=xr(1,tr.Short);break;case"a":case"aa":case"aaa":n=xr(0,tr.Abbreviated);break;case"aaaa":n=xr(0,tr.Wide);break;case"aaaaa":n=xr(0,tr.Narrow);break;case"b":case"bb":case"bbb":n=xr(0,tr.Abbreviated,Ri.Standalone,!0);break;case"bbbb":n=xr(0,tr.Wide,Ri.Standalone,!0);break;case"bbbbb":n=xr(0,tr.Narrow,Ri.Standalone,!0);break;case"B":case"BB":case"BBB":n=xr(0,tr.Abbreviated,Ri.Format,!0);break;case"BBBB":n=xr(0,tr.Wide,Ri.Format,!0);break;case"BBBBB":n=xr(0,tr.Narrow,Ri.Format,!0);break;case"h":n=bo(3,1,-12);break;case"hh":n=bo(3,2,-12);break;case"H":n=bo(3,1);break;case"HH":n=bo(3,2);break;case"m":n=bo(4,1);break;case"mm":n=bo(4,2);break;case"s":n=bo(5,1);break;case"ss":n=bo(5,2);break;case"S":n=bo(6,1);break;case"SS":n=bo(6,2);break;case"SSS":n=bo(6,3);break;case"Z":case"ZZ":case"ZZZ":n=tS(0);break;case"ZZZZZ":n=tS(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=tS(1);break;case"OOOO":case"ZZZZ":case"zzzz":n=tS(2);break;default:return null}return j5[t]=n,n}function tG(t,n){t=t.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function dve(t,n){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+n),t}function pve(t,n,e){let o=t.getTimezoneOffset(),i=tG(n,o);return dve(t,-1*(i-o))}function hve(t){if(zU(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[o,i=1,s=1]=t.split("-").map(a=>+a);return oS(o,i-1,s)}let e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let r;if(r=t.match(rve))return fve(r)}let n=new Date(t);if(!zU(n))throw new Error(`Unable to convert "${t}" into a date`);return n}function fve(t){let n=new Date(0),e=0,r=0,o=t[8]?n.setUTCFullYear:n.setFullYear,i=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),r=Number(t[9]+t[11])),o.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-e,a=Number(t[5]||0)-r,l=Number(t[6]||0),c=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return i.call(n,s,a,l,c),n}function zU(t){return t instanceof Date&&!isNaN(t.valueOf())}var z5=/\s+/,HU=[],Tm=(()=>{class t{_ngEl;_renderer;initialClasses=HU;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(z5):HU}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(z5):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let o=this.stateMap.get(e);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(z5).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(r){return new(r||t)(Ut(Mt),Ut(po))};static \u0275dir=me({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})(),Ky=(()=>{class t{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletContent;ngComponentOutletNgModule;ngComponentOutletNgModuleFactory;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(e){this._viewContainerRef=e}_needToReCreateNgModuleInstance(e){return e.ngComponentOutletNgModule!==void 0||e.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(e){return e.ngComponentOutlet!==void 0||e.ngComponentOutletContent!==void 0||e.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let r=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=UH(this.ngComponentOutletNgModule,UU(r)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(UU(r)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:r,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(let[r,o]of this._inputsUsed)o?(e.setInput(r,this.ngComponentOutletInputs[r]),this._inputsUsed.set(r,!1)):(e.setInput(r,void 0),this._inputsUsed.delete(r))}static \u0275fac=function(r){return new(r||t)(Ut(Br))};static \u0275dir=me({type:t,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},exportAs:["ngComponentOutlet"],features:[uo]})}return t})();function UU(t){return t.get(uc).injector}var Dm=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,o){this._ngEl=e,this._differs=r,this._renderer=o}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[o,i]=e.split("."),s=o.indexOf("-")===-1?void 0:cc.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(Ut(Mt),Ut(F5),Ut(po))};static \u0275dir=me({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})(),gh=(()=>{class t{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,r,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,o):!1,get:(e,r,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,o)}})}static \u0275fac=function(r){return new(r||t)(Ut(Br))};static \u0275dir=me({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[uo]})}return t})();function mve(t,n){return new Ne(2100,!1)}var gve="mediumDate",nG=new Me(""),rG=new Me(""),H5=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(e,r,o){this.locale=e,this.defaultTimezone=r,this.defaultOptions=o}transform(e,r,o,i){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??gve,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return JU(e,s,i||this.locale,a)}catch(s){throw mve(t,s.message)}}static \u0275fac=function(r){return new(r||t)(Ut(q4,16),Ut(nG,24),Ut(rG,24))};static \u0275pipe=fh({name:"date",type:t,pure:!0})}return t})();var _r=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})}return t})();function Zy(t,n){n=encodeURIComponent(n);for(let e of t.split(";")){let r=e.indexOf("="),[o,i]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===n)return decodeURIComponent(i)}return null}var sS="browser",oG="server";function Ys(t){return t===sS}function d1(t){return t===oG}var Em=class{};function Im(t,n,e){return vU(t,n,e)}var iG=(()=>{class t{static \u0275prov=ke({token:t,providedIn:"root",factory:()=>new U5(I(un),window)})}return t})(),U5=class{document;window;offset=()=>[0,0];constructor(n,e){this.document=n,this.window=e}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){let e=wve(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){let e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function wve(t,n){let e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(n)||i.querySelector(`[name="${n}"]`);if(s)return s}o=r.nextNode()}}return null}var h1=class{},Yy=class{},vh=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let o=e.slice(0,r),i=e.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let o=(n.op==="a"?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":let i=n.value;if(!i)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(n,e){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var lS=class{encodeKey(n){return sG(n)}encodeValue(n){return sG(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function yve(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,i)),n.decodeValue(o.slice(i+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var xve=/%(\d[a-f0-9])/gi,_ve={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sG(t){return encodeURIComponent(t).replace(xve,(n,e)=>_ve[e]??n)}function aS(t){return`${t}`}var fd=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new lS,n.fromString){if(n.fromObject)throw new Ne(2805,!1);this.map=yve(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],o=Array.isArray(r)?r.map(aS):[aS(r)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let o=n[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(aS(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],o=r.indexOf(aS(n.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var cS=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function kve(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function aG(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function lG(t){return typeof Blob<"u"&&t instanceof Blob}function cG(t){return typeof FormData<"u"&&t instanceof FormData}function bve(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var uG="Content-Type",dG="Accept",pG="X-Request-URL",hG="text/plain",fG="application/json",Cve=`${fG}, ${hG}, */*`,p1=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,r,o){this.url=e,this.method=n.toUpperCase();let i;if(kve(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new vh,this.context??=new cS,!this.params)this.params=new fd,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||aG(this.body)||lG(this.body)||cG(this.body)||bve(this.body)?this.body:this.body instanceof fd?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||cG(this.body)?null:lG(this.body)?this.body.type||null:aG(this.body)?null:typeof this.body=="string"?hG:this.body instanceof fd?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?fG:null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,i=n.transferCache??this.transferCache,s=n.body!==void 0?n.body:this.body,a=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress,c=n.headers||this.headers,u=n.params||this.params,d=n.context??this.context;return n.setHeaders!==void 0&&(c=Object.keys(n.setHeaders).reduce((p,h)=>p.set(h,n.setHeaders[h]),c)),n.setParams&&(u=Object.keys(n.setParams).reduce((p,h)=>p.set(h,n.setParams[h]),u)),new t(e,r,s,{params:u,headers:c,context:d,reportProgress:l,responseType:o,withCredentials:a,transferCache:i})}},Nm=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Nm||{}),f1=class{headers;status;statusText;url;ok;type;constructor(n,e=200,r="OK"){this.headers=n.headers||new vh,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},uS=class t extends f1{constructor(n={}){super(n)}type=Nm.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Qy=class t extends f1{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=Nm.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Jy=class extends f1{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},Sve=200,Mve=204;function G5(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var m1=(()=>{class t{handler;constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof p1)i=e;else{let l;o.headers instanceof vh?l=o.headers:l=new vh(o.headers);let c;o.params&&(o.params instanceof fd?c=o.params:c=new fd({fromObject:o.params})),i=new p1(e,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=at(i).pipe(ha(l=>this.handler.handle(l)));if(e instanceof p1||o.observe==="events")return s;let a=s.pipe(xn(l=>l instanceof Qy));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(It(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Ne(2806,!1);return l.body}));case"blob":return a.pipe(It(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Ne(2807,!1);return l.body}));case"text":return a.pipe(It(l=>{if(l.body!==null&&typeof l.body!="string")throw new Ne(2808,!1);return l.body}));case"json":default:return a.pipe(It(l=>l.body))}case"response":return a;default:throw new Ne(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new fd().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,G5(o,r))}post(e,r,o={}){return this.request("POST",e,G5(o,r))}put(e,r,o={}){return this.request("PUT",e,G5(o,r))}static \u0275fac=function(r){return new(r||t)(Xe(h1))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();var Tve=new Me("");function Dve(t,n){return n(t)}function Eve(t,n,e){return(r,o)=>Vo(e,()=>n(r,i=>t(i,o)))}var mG=new Me(""),gG=new Me(""),vG=new Me("",{providedIn:"root",factory:()=>!0});var dS=(()=>{class t extends h1{backend;injector;chain=null;pendingTasks=I(hh);contributeToStability=I(vG);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(mG),...this.injector.get(gG,[])]));this.chain=r.reduceRight((o,i)=>Eve(o,i,this.injector),Dve)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(em(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(Xe(Yy),Xe(to))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();var Ive=/^\)\]\}',?\n/,Nve=RegExp(`^${pG}:`,"m");function Ave(t){return"responseURL"in t&&t.responseURL?t.responseURL:Nve.test(t.getAllResponseHeaders())?t.getResponseHeader(pG):null}var W5=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Ne(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Zn(r.\u0275loadImpl()):at(null)).pipe(Pr(()=>new Jt(i=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((m,g)=>s.setRequestHeader(m,g.join(","))),e.headers.has(dG)||s.setRequestHeader(dG,Cve),!e.headers.has(uG)){let m=e.detectContentTypeHeader();m!==null&&s.setRequestHeader(uG,m)}if(e.responseType){let m=e.responseType.toLowerCase();s.responseType=m!=="json"?m:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let m=s.statusText||"OK",g=new vh(s.getAllResponseHeaders()),v=Ave(s)||e.url;return l=new uS({headers:g,status:s.status,statusText:m,url:v}),l},u=()=>{let{headers:m,status:g,statusText:v,url:w}=c(),y=null;g!==Mve&&(y=typeof s.response>"u"?s.responseText:s.response),g===0&&(g=y?Sve:0);let _=g>=200&&g<300;if(e.responseType==="json"&&typeof y=="string"){let k=y;y=y.replace(Ive,"");try{y=y!==""?JSON.parse(y):null}catch(M){y=k,_&&(_=!1,y={error:M,text:y})}}_?(i.next(new Qy({body:y,headers:m,status:g,statusText:v,url:w||void 0})),i.complete()):i.error(new Jy({error:y,headers:m,status:g,statusText:v,url:w||void 0}))},d=m=>{let{url:g}=c(),v=new Jy({error:m,status:s.status||0,statusText:s.statusText||"Unknown Error",url:g||void 0});i.error(v)},p=!1,h=m=>{p||(i.next(c()),p=!0);let g={type:Nm.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),e.responseType==="text"&&s.responseText&&(g.partialText=s.responseText),i.next(g)},f=m=>{let g={type:Nm.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),i.next(g)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),e.reportProgress&&(s.addEventListener("progress",h),a!==null&&s.upload&&s.upload.addEventListener("progress",f)),s.send(a),i.next({type:Nm.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),e.reportProgress&&(s.removeEventListener("progress",h),a!==null&&s.upload&&s.upload.removeEventListener("progress",f)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(Xe(Em))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),wG=new Me(""),Rve="XSRF-TOKEN",Ove=new Me("",{providedIn:"root",factory:()=>Rve}),Fve="X-XSRF-TOKEN",Pve=new Me("",{providedIn:"root",factory:()=>Fve}),ex=class{},Bve=(()=>{class t{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zy(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||t)(Xe(un),Xe(xo),Xe(Ove))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();function Lve(t,n){let e=t.url.toLowerCase();if(!I(wG)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=I(ex).getToken(),o=I(Pve);return r!=null&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),n(t)}function q5(...t){let n=[m1,W5,dS,{provide:h1,useExisting:dS},{provide:Yy,useFactory:()=>I(Tve,{optional:!0})??I(W5)},{provide:mG,useValue:Lve,multi:!0},{provide:wG,useValue:!0},{provide:ex,useClass:Bve}];for(let e of t)n.push(...e.\u0275providers);return gm(n)}function Vve(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var yG=["de",[["AM","PM"],void 0,void 0],void 0,[["S","M","D","M","D","F","S"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["S","M","D","M","D","F","S"],["So","Mo","Di","Mi","Do","Fr","Sa"],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan.","Feb.","M\xE4rz","Apr.","Mai","Juni","Juli","Aug.","Sept.","Okt.","Nov.","Dez."],["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["v. Chr.","n. Chr."],void 0,void 0],1,[6,0],["dd.MM.yy","dd.MM.y","d. MMMM y","EEEE, d. MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} 'um' {0}",void 0],[",",".",";","%","+","-","E","\xB7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","Euro",{ATS:["\xF6S"],AUD:["AU$","$"],BGM:["BGK"],BGO:["BGJ"],BYN:[void 0,"\u0440."],CUC:[void 0,"Cub$"],DEM:["DM"],FKP:[void 0,"Fl\xA3"],GHS:[void 0,"\u20B5"],GNF:[void 0,"F.G."],KMF:[void 0,"FC"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],RUR:[void 0,"\u0440."],RWF:[void 0,"F.Rw"],SYP:[],THB:["\u0E3F"],TWD:["NT$"],XXX:[],ZMW:[void 0,"K"]},"ltr",Vve];function jve(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var xG=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",jve];function zve(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return n===1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var _G=["es",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",zve];function Hve(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var kG=["fr",[["AM","PM"],void 0,void 0],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",Hve];function Uve(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1&&r===0?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var bG=["it",[["m.","p."],["AM","PM"],void 0],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",Uve];function Gve(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===Math.floor(e)&&e>=0&&e<=1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var CG=["pt",[["AM","PM"],void 0,void 0],void 0,[["D","S","T","Q","Q","S","S"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xE1b."],["domingo","segunda-feira","ter\xE7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xE1bado"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xE1b."]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."],["janeiro","fevereiro","mar\xE7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]],void 0,[["a.C.","d.C."],void 0,["antes de Cristo","depois de Cristo"]],0,[6,0],["dd/MM/y","d 'de' MMM 'de' y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4\xA0#,##0.00","#E0"],"BRL","R$","Real brasileiro",{AUD:["AU$","$"],BYN:[void 0,"\u0440."],JPY:["JP\xA5","\xA5"],PHP:[void 0,"\u20B1"],PTE:["Esc."],RON:[void 0,"L"],SYP:[void 0,"S\xA3"],THB:["\u0E3F"],TWD:["NT$"],USD:["US$","$"]},"ltr",Gve];var fS=new Me(""),Y5=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o,i){return this._findPluginFor(r).addEventListener(e,r,o,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new Ne(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||t)(Xe(fS),Xe(Pt))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),tx=class{_doc;constructor(n){this._doc=n}manager},pS="ng-app-id";function SG(t){for(let n of t)n.remove()}function MG(t,n){let e=n.createElement("style");return e.textContent=t,e}function Wve(t,n,e,r){let o=t.head?.querySelectorAll(`style[${pS}="${n}"],link[${pS}="${n}"]`);if(o)for(let i of o)i.removeAttribute(pS),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&e.set(i.textContent,{usage:0,elements:[i]})}function Z5(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var Q5=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,o,i={}){this.doc=e,this.appId=r,this.nonce=o,this.isServer=d1(i),Wve(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let o of e)this.addUsage(o,this.inline,MG);r?.forEach(o=>this.addUsage(o,this.external,Z5))}removeStyles(e,r){for(let o of e)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(e,r,o){let i=r.get(e);i?i.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(e,this.doc)))})}removeUsage(e,r){let o=r.get(e);o&&(o.usage--,o.usage<=0&&(SG(o.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])SG(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(e,MG(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(e,Z5(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(pS,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Xe(un),Xe(By),Xe(s5,8),Xe(xo))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),K5={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},J5=/%COMP%/g;var DG="%COMP%",qve=`_nghost-${DG}`,Kve=`_ngcontent-${DG}`,Zve=!0,Xve=new Me("",{providedIn:"root",factory:()=>Zve});function Yve(t){return Kve.replace(J5,t)}function Qve(t){return qve.replace(J5,t)}function EG(t,n){return n.map(e=>e.replace(J5,t))}var ox=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,o,i,s,a,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=d1(a),this.defaultRenderer=new nx(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===lc.ShadowDom&&(r=pt(ue({},r),{encapsulation:lc.Emulated}));let o=this.getOrCreateRenderer(e,r);return o instanceof hS?o.applyToHost(e):o instanceof rx&&o.applyStyles(),o}getOrCreateRenderer(e,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case lc.Emulated:i=new hS(l,c,r,this.appId,u,s,a,d,p);break;case lc.ShadowDom:return new X5(l,c,e,r,s,a,this.nonce,d,p);default:i=new rx(l,c,r,u,s,a,d,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||t)(Xe(Y5),Xe(Q5),Xe(By),Xe(Xve),Xe(un),Xe(xo),Xe(Pt),Xe(s5),Xe(xm,8))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),nx=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,r,o,i){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(K5[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(TG(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(TG(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){e.remove()}selectRootElement(n,e){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new Ne(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,o){if(o){e=o+":"+e;let i=K5[o];i?n.setAttributeNS(i,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){let o=K5[r];o?n.removeAttributeNS(o,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,o){o&(cc.DashCase|cc.Important)?n.style.setProperty(e,r,o&cc.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&cc.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n!=null&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r,o){if(typeof n=="string"&&(n=ya().getGlobalEventTarget(this.doc,n),!n))throw new Ne(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(n,e,i)),this.eventManager.addEventListener(n,e,i,o)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function TG(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var X5=class extends nx{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,r,o,i,s,a,l,c){super(n,i,s,l,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=EG(o.id,u);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}let d=o.getExternalStyles?.();if(d)for(let p of d){let h=Z5(p,i);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rx=class extends nx{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,r,o,i,s,a,l,c){super(n,i,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=c?EG(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},hS=class extends rx{contentAttr;hostAttr;constructor(n,e,r,o,i,s,a,l,c){let u=o+"-"+r.id;super(n,e,r,i,s,a,l,c,u),this.contentAttr=Yve(u),this.hostAttr=Qve(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}};var mS=class t extends zy{supportsDOMEvents=!0;static makeCurrent(){B5(new t)}onAndCancel(n,e,r,o){return n.addEventListener(e,r,o),()=>{n.removeEventListener(e,r,o)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=Jve();return e==null?null:ewe(e)}resetBaseElement(){ix=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Zy(document.cookie,n)}},ix=null;function Jve(){return ix=ix||document.querySelector("base"),ix?ix.getAttribute("href"):null}function ewe(t){return new URL(t,document.baseURI).pathname}var twe=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),NG=(()=>{class t extends tx{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o,i){return e.addEventListener(r,o,i),()=>this.removeEventListener(e,r,o,i)}removeEventListener(e,r,o,i){return e.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||t)(Xe(un))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),IG=["alt","control","meta","shift"],nwe={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rwe={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},AG=(()=>{class t extends tx{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,r,o,i){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ya().onAndCancel(e,s.domEventName,a,i))}static parseEventName(e){let r=e.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),IG.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let o=nwe[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),IG.forEach(s=>{if(s!==o){let a=rwe[s];a(e)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{t.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||t)(Xe(un))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();function eO(t,n){return OU(ue({rootComponent:t},owe(n)))}function owe(t){return{appProviders:[...cwe,...t?.providers??[]],platformProviders:lwe}}function iwe(){mS.makeCurrent()}function swe(){return new al}function awe(){return Uz(document),document}var lwe=[{provide:xo,useValue:sS},{provide:i5,useValue:iwe,multi:!0},{provide:un,useFactory:awe}];var cwe=[{provide:C4,useValue:"root"},{provide:al,useFactory:swe},{provide:fS,useClass:NG,multi:!0,deps:[un]},{provide:fS,useClass:AG,multi:!0,deps:[un]},ox,Q5,Y5,{provide:yo,useExisting:ox},{provide:Em,useClass:twe},[]];var RG=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||t)(Xe(un))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var on=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(on||{}),ka="*";function gS(t,n){return{type:on.Trigger,name:t,definitions:n,options:{}}}function g1(t,n=null){return{type:on.Animate,styles:n,timings:t}}function OG(t,n=null){return{type:on.Sequence,steps:t,options:n}}function Ts(t){return{type:on.Style,styles:t,offset:null}}function v1(t,n,e=null){return{type:on.Transition,expr:t,animation:n,options:e}}function Rm(t,n,e=null){return{type:on.Query,selector:t,animation:n,options:e}}var fc=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,e=0){this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Am=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let e=0,r=0,o=0,i=this.players.length;i==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==i&&this._onFinish()}),s.onDestroy(()=>{++r==i&&this._onDestroy()}),s.onStart(()=>{++o==i&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){let e=n*this.totalTime;this.players.forEach(r=>{let o=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(o)})}getPosition(){let n=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return n!=null?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},w1="!";function FG(t){return new Ne(3e3,!1)}function dwe(){return new Ne(3100,!1)}function pwe(){return new Ne(3101,!1)}function hwe(t){return new Ne(3001,!1)}function fwe(t){return new Ne(3003,!1)}function mwe(t){return new Ne(3004,!1)}function BG(t,n){return new Ne(3005,!1)}function LG(){return new Ne(3006,!1)}function $G(){return new Ne(3007,!1)}function VG(t,n){return new Ne(3008,!1)}function jG(t){return new Ne(3002,!1)}function zG(t,n,e,r,o){return new Ne(3010,!1)}function HG(){return new Ne(3011,!1)}function UG(){return new Ne(3012,!1)}function GG(){return new Ne(3200,!1)}function WG(){return new Ne(3202,!1)}function qG(){return new Ne(3013,!1)}function KG(t){return new Ne(3014,!1)}function ZG(t){return new Ne(3015,!1)}function XG(t){return new Ne(3016,!1)}function YG(t,n){return new Ne(3404,!1)}function gwe(t){return new Ne(3502,!1)}function QG(t){return new Ne(3503,!1)}function JG(){return new Ne(3300,!1)}function eW(t){return new Ne(3504,!1)}function tW(t){return new Ne(3301,!1)}function nW(t,n){return new Ne(3302,!1)}function rW(t){return new Ne(3303,!1)}function oW(t,n){return new Ne(3400,!1)}function iW(t){return new Ne(3401,!1)}function sW(t){return new Ne(3402,!1)}function aW(t,n){return new Ne(3505,!1)}function md(t){switch(t.length){case 0:return new fc;case 1:return t[0];default:return new Am(t)}}function oO(t,n,e=new Map,r=new Map){let o=[],i=[],s=-1,a=null;if(n.forEach(l=>{let c=l.get("offset"),u=c==s,d=u&&a||new Map;l.forEach((p,h)=>{let f=h,m=p;if(h!=="offset")switch(f=t.normalizePropertyName(f,o),m){case w1:m=e.get(h);break;case ka:m=r.get(h);break;default:m=t.normalizeStyleValue(h,f,m,o);break}d.set(f,m)}),u||i.push(d),a=d,s=c}),o.length)throw gwe(o);return i}function vS(t,n,e,r){switch(n){case"start":t.onStart(()=>r(e&&tO(e,"start",t)));break;case"done":t.onDone(()=>r(e&&tO(e,"done",t)));break;case"destroy":t.onDestroy(()=>r(e&&tO(e,"destroy",t)));break}}function tO(t,n,e){let r=e.totalTime,o=!!e.disabled,i=wS(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,r??t.totalTime,o),s=t._data;return s!=null&&(i._data=s),i}function wS(t,n,e,r,o="",i=0,s){return{element:t,triggerName:n,fromState:e,toState:r,phaseName:o,totalTime:i,disabled:!!s}}function Ds(t,n,e){let r=t.get(n);return r||t.set(n,r=e),r}function iO(t){let n=t.indexOf(":"),e=t.substring(1,n),r=t.slice(n+1);return[e,r]}var vwe=typeof document>"u"?null:document.documentElement;function yS(t){let n=t.parentNode||t.host||null;return n===vwe?null:n}function wwe(t){return t.substring(1,6)=="ebkit"}var Om=null,PG=!1;function lW(t){Om||(Om=ywe()||{},PG=Om.style?"WebkitAppearance"in Om.style:!1);let n=!0;return Om.style&&!wwe(t)&&(n=t in Om.style,!n&&PG&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Om.style)),n}function ywe(){return typeof document<"u"?document.body:null}function sO(t,n){for(;n;){if(n===t)return!0;n=yS(n)}return!1}function aO(t,n,e){if(e)return Array.from(t.querySelectorAll(n));let r=t.querySelector(n);return r?[r]:[]}var xwe=1e3,lO="{{",_we="}}",cO="ng-enter",xS="ng-leave",sx="ng-trigger",ax=".ng-trigger",uO="ng-animating",_S=".ng-animating";function mc(t){if(typeof t=="number")return t;let n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:nO(parseFloat(n[1]),n[2])}function nO(t,n){switch(n){case"s":return t*xwe;default:return t}}function lx(t,n,e){return t.hasOwnProperty("duration")?t:kwe(t,n,e)}function kwe(t,n,e){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,o,i=0,s="";if(typeof t=="string"){let a=t.match(r);if(a===null)return n.push(FG(t)),{duration:0,delay:0,easing:""};o=nO(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(i=nO(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else o=t;if(!e){let a=!1,l=n.length;o<0&&(n.push(dwe()),a=!0),i<0&&(n.push(pwe()),a=!0),a&&n.splice(l,0,FG(t))}return{duration:o,delay:i,easing:s}}function cW(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}function hl(t,n,e){n.forEach((r,o)=>{let i=kS(o);e&&!e.has(o)&&e.set(o,t.style[i]),t.style[i]=r})}function wh(t,n){n.forEach((e,r)=>{let o=kS(r);t.style[o]=""})}function y1(t){return Array.isArray(t)?t.length==1?t[0]:OG(t):t}function uW(t,n,e){let r=n.params||{},o=dO(t);o.length&&o.forEach(i=>{r.hasOwnProperty(i)||e.push(hwe(i))})}var rO=new RegExp(`${lO}\\s*(.+?)\\s*${_we}`,"g");function dO(t){let n=[];if(typeof t=="string"){let e;for(;e=rO.exec(t);)n.push(e[1]);rO.lastIndex=0}return n}function x1(t,n,e){let r=`${t}`,o=r.replace(rO,(i,s)=>{let a=n[s];return a==null&&(e.push(fwe(s)),a=""),a.toString()});return o==r?t:o}var bwe=/-+([a-z0-9])/g;function kS(t){return t.replace(bwe,(...n)=>n[1].toUpperCase())}function dW(t,n){return t===0||n===0}function pW(t,n,e){if(e.size&&n.length){let r=n[0],o=[];if(e.forEach((i,s)=>{r.has(s)||o.push(s),r.set(s,i)}),o.length)for(let i=1;i<n.length;i++){let s=n[i];o.forEach(a=>s.set(a,bS(t,a)))}}return n}function Es(t,n,e){switch(n.type){case on.Trigger:return t.visitTrigger(n,e);case on.State:return t.visitState(n,e);case on.Transition:return t.visitTransition(n,e);case on.Sequence:return t.visitSequence(n,e);case on.Group:return t.visitGroup(n,e);case on.Animate:return t.visitAnimate(n,e);case on.Keyframes:return t.visitKeyframes(n,e);case on.Style:return t.visitStyle(n,e);case on.Reference:return t.visitReference(n,e);case on.AnimateChild:return t.visitAnimateChild(n,e);case on.AnimateRef:return t.visitAnimateRef(n,e);case on.Query:return t.visitQuery(n,e);case on.Stagger:return t.visitStagger(n,e);default:throw mwe(n.type)}}function bS(t,n){return window.getComputedStyle(t)[n]}var DO=(()=>{class t{validateStyleProperty(e){return lW(e)}containsElement(e,r){return sO(e,r)}getParentElement(e){return yS(e)}query(e,r,o){return aO(e,r,o)}computeStyle(e,r,o){return o||""}animate(e,r,o,i,s,a=[],l){return new fc(o,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),Pm=class{static NOOP=new DO},Bm=class{};var Cwe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),DS=class extends Bm{normalizePropertyName(n,e){return kS(n)}normalizeStyleValue(n,e,r,o){let i="",s=r.toString().trim();if(Cwe.has(e)&&r!==0&&r!=="0")if(typeof r=="number")i="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&o.push(BG(n,r))}return s+i}};var ES="*";function Swe(t,n){let e=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>Mwe(r,e,n)):e.push(t),e}function Mwe(t,n,e){if(t[0]==":"){let l=Twe(t,e);if(typeof l=="function"){n.push(l);return}t=l}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return e.push(ZG(t)),n;let o=r[1],i=r[2],s=r[3];n.push(hW(o,s));let a=o==ES&&s==ES;i[0]=="<"&&!a&&n.push(hW(s,o))}function Twe(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return n.push(XG(t)),"* => *"}}var CS=new Set(["true","1"]),SS=new Set(["false","0"]);function hW(t,n){let e=CS.has(t)||SS.has(t),r=CS.has(n)||SS.has(n);return(o,i)=>{let s=t==ES||t==o,a=n==ES||n==i;return!s&&e&&typeof o=="boolean"&&(s=o?CS.has(t):SS.has(t)),!a&&r&&typeof i=="boolean"&&(a=i?CS.has(n):SS.has(n)),s&&a}}var bW=":self",Dwe=new RegExp(`s*${bW}s*,?`,"g");function CW(t,n,e,r){return new vO(t).build(n,e,r)}var fW="",vO=class{_driver;constructor(n){this._driver=n}build(n,e,r){let o=new wO(e);return this._resetContextStyleTimingState(o),Es(this,y1(n),o)}_resetContextStyleTimingState(n){n.currentQuerySelector=fW,n.collectedStyles=new Map,n.collectedStyles.set(fW,new Map),n.currentTime=0}visitTrigger(n,e){let r=e.queryCount=0,o=e.depCount=0,i=[],s=[];return n.name.charAt(0)=="@"&&e.errors.push(LG()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==on.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,i.push(this.visitState(l,e))}),l.name=c}else if(a.type==on.Transition){let l=this.visitTransition(a,e);r+=l.queryCount,o+=l.depCount,s.push(l)}else e.errors.push($G())}),{type:on.Trigger,name:n.name,states:i,transitions:s,queryCount:r,depCount:o,options:null}}visitState(n,e){let r=this.visitStyle(n.styles,e),o=n.options&&n.options.params||null;if(r.containsDynamicStyles){let i=new Set,s=o||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{dO(l).forEach(c=>{s.hasOwnProperty(c)||i.add(c)})})}),i.size&&e.errors.push(VG(n.name,[...i.values()]))}return{type:on.State,name:n.name,style:r,options:o?{params:o}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;let r=Es(this,y1(n.animation),e),o=Swe(n.expr,e.errors);return{type:on.Transition,matchers:o,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Fm(n.options)}}visitSequence(n,e){return{type:on.Sequence,steps:n.steps.map(r=>Es(this,r,e)),options:Fm(n.options)}}visitGroup(n,e){let r=e.currentTime,o=0,i=n.steps.map(s=>{e.currentTime=r;let a=Es(this,s,e);return o=Math.max(o,e.currentTime),a});return e.currentTime=o,{type:on.Group,steps:i,options:Fm(n.options)}}visitAnimate(n,e){let r=Awe(n.timings,e.errors);e.currentAnimateTimings=r;let o,i=n.styles?n.styles:Ts({});if(i.type==on.Keyframes)o=this.visitKeyframes(i,e);else{let s=n.styles,a=!1;if(!s){a=!0;let c={};r.easing&&(c.easing=r.easing),s=Ts(c)}e.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,o=l}return e.currentAnimateTimings=null,{type:on.Animate,timings:r,style:o,options:null}}visitStyle(n,e){let r=this._makeStyleAst(n,e);return this._validateStyleAst(r,e),r}_makeStyleAst(n,e){let r=[],o=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of o)typeof a=="string"?a===ka?r.push(a):e.errors.push(jG(a)):r.push(new Map(Object.entries(a)));let i=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!i)){for(let l of a.values())if(l.toString().indexOf(lO)>=0){i=!0;break}}}),{type:on.Style,styles:r,easing:s,offset:n.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(n,e){let r=e.currentAnimateTimings,o=e.currentTime,i=e.currentTime;r&&i>0&&(i-=r.duration+r.delay),n.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l),d=!0;u&&(i!=o&&i>=u.startTime&&o<=u.endTime&&(e.errors.push(zG(l,u.startTime,u.endTime,i,o)),d=!1),i=u.startTime),d&&c.set(l,{startTime:i,endTime:o}),e.options&&uW(a,e.options,e.errors)})})}visitKeyframes(n,e){let r={type:on.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(HG()),r;let o=1,i=0,s=[],a=!1,l=!1,c=0,u=n.steps.map(v=>{let w=this._makeStyleAst(v,e),y=w.offset!=null?w.offset:Nwe(w.styles),_=0;return y!=null&&(i++,_=w.offset=y),l=l||_<0||_>1,a=a||_<c,c=_,s.push(_),w});l&&e.errors.push(UG()),a&&e.errors.push(GG());let d=n.steps.length,p=0;i>0&&i<d?e.errors.push(WG()):i==0&&(p=o/(d-1));let h=d-1,f=e.currentTime,m=e.currentAnimateTimings,g=m.duration;return u.forEach((v,w)=>{let y=p>0?w==h?1:p*w:s[w],_=y*g;e.currentTime=f+m.delay+_,m.duration=_,this._validateStyleAst(v,e),v.offset=y,r.styles.push(v)}),r}visitReference(n,e){return{type:on.Reference,animation:Es(this,y1(n.animation),e),options:Fm(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:on.AnimateChild,options:Fm(n.options)}}visitAnimateRef(n,e){return{type:on.AnimateRef,animation:this.visitReference(n.animation,e),options:Fm(n.options)}}visitQuery(n,e){let r=e.currentQuerySelector,o=n.options||{};e.queryCount++,e.currentQuery=n;let[i,s]=Ewe(n.selector);e.currentQuerySelector=r.length?r+" "+i:i,Ds(e.collectedStyles,e.currentQuerySelector,new Map);let a=Es(this,y1(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:on.Query,selector:i,limit:o.limit||0,optional:!!o.optional,includeSelf:s,animation:a,originalSelector:n.selector,options:Fm(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(qG());let r=n.timings==="full"?{duration:0,delay:0,easing:"full"}:lx(n.timings,e.errors,!0);return{type:on.Stagger,animation:Es(this,y1(n.animation),e),timings:r,options:null}}};function Ewe(t){let n=!!t.split(/\s*,\s*/).find(e=>e==bW);return n&&(t=t.replace(Dwe,"")),t=t.replace(/@\*/g,ax).replace(/@\w+/g,e=>ax+"-"+e.slice(1)).replace(/:animating/g,_S),[t,n]}function Iwe(t){return t?ue({},t):null}var wO=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}};function Nwe(t){if(typeof t=="string")return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){let r=e;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}function Awe(t,n){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let i=lx(t,n).duration;return pO(i,0,"")}let e=t;if(e.split(/\s+/).some(i=>i.charAt(0)=="{"&&i.charAt(1)=="{")){let i=pO(0,0,"");return i.dynamic=!0,i.strValue=e,i}let o=lx(e,n);return pO(o.duration,o.delay,o.easing)}function Fm(t){return t?(t=ue({},t),t.params&&(t.params=Iwe(t.params))):t={},t}function pO(t,n,e){return{duration:t,delay:n,easing:e}}function EO(t,n,e,r,o,i,s=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:r,duration:o,delay:i,totalTime:o+i,easing:s,subTimeline:a}}var ux=class{_map=new Map;get(n){return this._map.get(n)||[]}append(n,e){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}},Rwe=1,Owe=":enter",Fwe=new RegExp(Owe,"g"),Pwe=":leave",Bwe=new RegExp(Pwe,"g");function SW(t,n,e,r,o,i=new Map,s=new Map,a,l,c=[]){return new yO().buildKeyframes(t,n,e,r,o,i,s,a,l,c)}var yO=class{buildKeyframes(n,e,r,o,i,s,a,l,c,u=[]){c=c||new ux;let d=new xO(n,e,c,o,i,u,[]);d.options=l;let p=l.delay?mc(l.delay):0;d.currentTimeline.delayNextStep(p),d.currentTimeline.setStyles([s],null,d.errors,l),Es(this,r,d);let h=d.timelines.filter(f=>f.containsAnimation());if(h.length&&a.size){let f;for(let m=h.length-1;m>=0;m--){let g=h[m];if(g.element===e){f=g;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[EO(e,[],[],[],0,p,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){let r=e.subInstructions.get(e.element);if(r){let o=e.createSubContext(n.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,o,o.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=n}visitAnimateRef(n,e){let r=e.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,r),this.visitReference(n.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,r){for(let o of n){let i=o?.delay;if(i){let s=typeof i=="number"?i:mc(x1(i,o?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(n,e,r){let i=e.currentTimeline.currentTime,s=r.duration!=null?mc(r.duration):null,a=r.delay!=null?mc(r.delay):null;return s!==0&&n.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);i=Math.max(i,c.duration+c.delay)}),i}visitReference(n,e){e.updateOptions(n.options,!0),Es(this,n.animation,e),e.previousNode=n}visitSequence(n,e){let r=e.subContextCount,o=e,i=n.options;if(i&&(i.params||i.delay)&&(o=e.createSubContext(i),o.transformIntoNewTimeline(),i.delay!=null)){o.previousNode.type==on.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=IS);let s=mc(i.delay);o.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>Es(this,s,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){let r=[],o=e.currentTimeline.currentTime,i=n.options&&n.options.delay?mc(n.options.delay):0;n.steps.forEach(s=>{let a=e.createSubContext(n.options);i&&a.delayNextStep(i),Es(this,s,a),o=Math.max(o,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(o),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){let r=n.strValue,o=e.params?x1(r,e.params,e.errors):r;return lx(o,e.errors)}else return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){let r=e.currentAnimateTimings=this._visitTiming(n.timings,e),o=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),o.snapshotCurrentStyles());let i=n.style;i.type==on.Keyframes?this.visitKeyframes(i,e):(e.incrementTime(r.duration),this.visitStyle(i,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){let r=e.currentTimeline,o=e.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();let i=o&&o.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(i):r.setStyles(n.styles,i,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){let r=e.currentAnimateTimings,o=e.currentTimeline.duration,i=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,n.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*i),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(o+i),e.previousNode=n}visitQuery(n,e){let r=e.currentTimeline.currentTime,o=n.options||{},i=o.delay?mc(o.delay):0;i&&(e.previousNode.type===on.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=IS);let s=r,a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;let d=e.createSubContext(n.options,c);i&&d.delayNextStep(i),c===e.element&&(l=d.currentTimeline),Es(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe();let p=d.currentTimeline.currentTime;s=Math.max(s,p)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){let r=e.parentContext,o=e.currentTimeline,i=n.timings,s=Math.abs(i.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let u=e.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;Es(this,n.animation,e),e.previousNode=n,r.currentStaggerTime=o.currentTime-d+(o.startTime-r.currentTimeline.startTime)}},IS={},xO=class t{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=IS;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,e,r,o,i,s,a,l){this._driver=n,this.element=e,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=i,this.errors=s,this.timelines=a,this.currentTimeline=l||new NS(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;let r=n,o=this.options;r.duration!=null&&(o.duration=mc(r.duration)),r.delay!=null&&(o.delay=mc(r.delay));let i=r.params;if(i){let s=o.params;s||(s=this.options.params={}),Object.keys(i).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=x1(i[a],s,this.errors))})}}_copyOptions(){let n={};if(this.options){let e=this.options.params;if(e){let r=n.params={};Object.keys(e).forEach(o=>{r[o]=e[o]})}}return n}createSubContext(n=null,e,r){let o=e||this.element,i=new t(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(n),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(n){return this.previousNode=IS,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,r){let o={duration:e??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},i=new _O(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(i),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,r,o,i,s){let a=[];if(o&&a.push(this.element),n.length>0){n=n.replace(Fwe,"."+this._enterClassName),n=n.replace(Bwe,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,n,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!i&&a.length==0&&s.push(KG(e)),a}},NS=class t{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,e,r,o){this._driver=n,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=o,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new t(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Rwe,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||ka),this._currentKeyframe.set(e,ka);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,r,o){e&&this._previousKeyframe.set("easing",e);let i=o&&o.params||{},s=Lwe(n,this._globalTimelineStyles);for(let[a,l]of s){let c=x1(l,i,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ka),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,r)=>{let o=this._styleSummary.get(r);(!o||e.time>o.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let n=new Set,e=new Set,r=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===w1?n.add(d):u===ka&&e.add(d)}),r||c.set("offset",l/this.duration),o.push(c)});let i=[...n.values()],s=[...e.values()];if(r){let a=o[0],l=new Map(a);a.set("offset",0),l.set("offset",1),o=[a,l]}return EO(this.element,o,i,s,this.duration,this.startTime,this.easing,!1)}},_O=class extends NS{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,e,r,o,i,s,a=!1){super(n,e,s.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=i,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){let i=[],s=r+e,a=e/s,l=new Map(n[0]);l.set("offset",0),i.push(l);let c=new Map(n[0]);c.set("offset",mW(a)),i.push(c);let u=n.length-1;for(let d=1;d<=u;d++){let p=new Map(n[d]),h=p.get("offset"),f=e+h*r;p.set("offset",mW(f/s)),i.push(p)}r=s,e=0,o="",n=i}return EO(this.element,n,this.preStyleProps,this.postStyleProps,r,e,o,!0)}};function mW(t,n=3){let e=Math.pow(10,n-1);return Math.round(t*e)/e}function Lwe(t,n){let e=new Map,r;return t.forEach(o=>{if(o==="*"){r??=n.keys();for(let i of r)e.set(i,ka)}else for(let[i,s]of o)e.set(i,s)}),e}function gW(t,n,e,r,o,i,s,a,l,c,u,d,p){return{type:0,element:t,triggerName:n,isRemovalTransition:o,fromState:e,fromStyles:i,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:p}}var hO={},AS=class{_triggerName;ast;_stateStyles;constructor(n,e,r){this._triggerName=n,this.ast=e,this._stateStyles=r}match(n,e,r,o){return $we(this.ast.matchers,n,e,r,o)}buildStyles(n,e,r){let o=this._stateStyles.get("*");return n!==void 0&&(o=this._stateStyles.get(n?.toString())||o),o?o.buildStyles(e,r):new Map}build(n,e,r,o,i,s,a,l,c,u){let d=[],p=this.ast.options&&this.ast.options.params||hO,h=a&&a.params||hO,f=this.buildStyles(r,h,d),m=l&&l.params||hO,g=this.buildStyles(o,m,d),v=new Set,w=new Map,y=new Map,_=o==="void",k={params:MW(m,p),delay:this.ast.options?.delay},M=u?[]:SW(n,e,this.ast.animation,i,s,f,g,k,c,d),E=0;return M.forEach(A=>{E=Math.max(A.duration+A.delay,E)}),d.length?gW(e,this._triggerName,r,o,_,f,g,[],[],w,y,E,d):(M.forEach(A=>{let P=A.element,N=Ds(w,P,new Set);A.preStyleProps.forEach(S=>N.add(S));let B=Ds(y,P,new Set);A.postStyleProps.forEach(S=>B.add(S)),P!==e&&v.add(P)}),gW(e,this._triggerName,r,o,_,f,g,M,[...v.values()],w,y,E))}};function $we(t,n,e,r,o){return t.some(i=>i(n,e,r,o))}function MW(t,n){let e=ue({},n);return Object.entries(t).forEach(([r,o])=>{o!=null&&(e[r]=o)}),e}var kO=class{styles;defaultParams;normalizer;constructor(n,e,r){this.styles=n,this.defaultParams=e,this.normalizer=r}buildStyles(n,e){let r=new Map,o=MW(n,this.defaultParams);return this.styles.styles.forEach(i=>{typeof i!="string"&&i.forEach((s,a)=>{s&&(s=x1(s,o,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),r.set(a,s)})}),r}};function Vwe(t,n,e){return new bO(t,n,e)}var bO=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,e,r){this.name=n,this.ast=e,this._normalizer=r,e.states.forEach(o=>{let i=o.options&&o.options.params||{};this.states.set(o.name,new kO(o.style,i,r))}),vW(this.states,"true","1"),vW(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new AS(n,o,this.states))}),this.fallbackTransition=jwe(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,r,o){return this.transitionFactories.find(s=>s.match(n,e,r,o))||null}matchStyles(n,e,r){return this.fallbackTransition.buildStyles(n,e,r)}};function jwe(t,n,e){let r=[(s,a)=>!0],o={type:on.Sequence,steps:[],options:null},i={type:on.Transition,animation:o,matchers:r,options:null,queryCount:0,depCount:0};return new AS(t,i,n)}function vW(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}var zwe=new ux,CO=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r}register(n,e){let r=[],o=[],i=CW(this._driver,e,r,o);if(r.length)throw QG(r);this._animations.set(n,i)}_buildPlayer(n,e,r){let o=n.element,i=oO(this._normalizer,n.keyframes,e,r);return this._driver.animate(o,i,n.duration,n.delay,n.easing,[],!0)}create(n,e,r={}){let o=[],i=this._animations.get(n),s,a=new Map;if(i?(s=SW(this._driver,e,i,cO,xS,new Map,new Map,r,zwe,o),s.forEach(u=>{let d=Ds(a,u.element,new Map);u.postStyleProps.forEach(p=>d.set(p,null))})):(o.push(JG()),s=[]),o.length)throw eW(o);a.forEach((u,d)=>{u.forEach((p,h)=>{u.set(h,this._driver.computeStyle(d,h,ka))})});let l=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=md(l);return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){let e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(n){let e=this._playersById.get(n);if(!e)throw tW(n);return e}listen(n,e,r,o){let i=wS(e,"","","");return vS(this._getPlayer(n),r,i,o),()=>{}}command(n,e,r,o){if(r=="register"){this.register(n,o[0]);return}if(r=="create"){let s=o[0]||{};this.create(n,e,s);return}let i=this._getPlayer(n);switch(r){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n);break}}},wW="ng-animate-queued",Hwe=".ng-animate-queued",fO="ng-animate-disabled",Uwe=".ng-animate-disabled",Gwe="ng-star-inserted",Wwe=".ng-star-inserted",qwe=[],TW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kwe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fl="__ng_removed",dx=class{namespaceId;value;options;get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;let r=n&&n.hasOwnProperty("value"),o=r?n.value:n;if(this.value=Xwe(o),r){let i=n,{value:s}=i,a=Uf(i,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){let e=n.params;if(e){let r=this.options.params;Object.keys(e).forEach(o=>{r[o]==null&&(r[o]=e[o])})}}},cx="void",mO=new dx(cx),SO=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,e,r){this.id=n,this.hostElement=e,this._engine=r,this._hostClassName="ng-tns-"+n,ba(e,this._hostClassName)}listen(n,e,r,o){if(!this._triggers.has(e))throw nW(r,e);if(r==null||r.length==0)throw rW(e);if(!Ywe(r))throw oW(r,e);let i=Ds(this._elementListeners,n,[]),s={name:e,phase:r,callback:o};i.push(s);let a=Ds(this._engine.statesByElement,n,new Map);return a.has(e)||(ba(n,sx),ba(n,sx+"-"+e),a.set(e,mO)),()=>{this._engine.afterFlush(()=>{let l=i.indexOf(s);l>=0&&i.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return this._triggers.has(n)?!1:(this._triggers.set(n,e),!0)}_getTrigger(n){let e=this._triggers.get(n);if(!e)throw iW(n);return e}trigger(n,e,r,o=!0){let i=this._getTrigger(e),s=new px(this.id,e,n),a=this._engine.statesByElement.get(n);a||(ba(n,sx),ba(n,sx+"-"+e),this._engine.statesByElement.set(n,a=new Map));let l=a.get(e),c=new dx(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=mO),!(c.value===cx)&&l.value===c.value){if(!eye(l.params,c.params)){let m=[],g=i.matchStyles(l.value,l.params,m),v=i.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{wh(n,g),hl(n,v)})}return}let p=Ds(this._engine.playersByElement,n,[]);p.forEach(m=>{m.namespaceId==this.id&&m.triggerName==e&&m.queued&&m.destroy()});let h=i.matchTransition(l.value,c.value,n,c.params),f=!1;if(!h){if(!o)return;h=i.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:h,fromState:l,toState:c,player:s,isFallbackTransition:f}),f||(ba(n,wW),s.onStart(()=>{_1(n,wW)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);let g=this._engine.playersByElement.get(n);if(g){let v=g.indexOf(s);v>=0&&g.splice(v,1)}}),this.players.push(s),p.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);let e=this._engine.playersByElement.get(n);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){let r=this._engine.driver.query(n,ax,!0);r.forEach(o=>{if(o[fl])return;let i=this._engine.fetchNamespacesByElement(o);i.size?i.forEach(s=>s.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,e,r,o){let i=this._engine.statesByElement.get(n),s=new Map;if(i){let a=[];if(i.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(n,c,cx,o);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,s),r&&md(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){let e=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(e&&r){let o=new Set;e.forEach(i=>{let s=i.name;if(o.has(s))return;o.add(s);let l=this._triggers.get(s).fallbackTransition,c=r.get(s)||mO,u=new dx(cx),d=new px(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(n,e){let r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let o=!1;if(r.totalAnimations){let i=r.players.length?r.playersByQueriedElement.get(n):[];if(i&&i.length)o=!0;else{let s=n;for(;s=s.parentNode;)if(r.statesByElement.get(s)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)r.markElementAsRemoved(this.id,n,!1,e);else{let i=n[fl];(!i||i===TW)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,e))}}insertNode(n,e){ba(n,this._hostClassName)}drainQueuedTransitions(n){let e=[];return this._queue.forEach(r=>{let o=r.player;if(o.destroyed)return;let i=r.element,s=this._elementListeners.get(i);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=wS(i,r.triggerName,r.fromState.value,r.toState.value);l._data=n,vS(r.player,a.phase,l,a.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(r)}),this._queue=[],e.sort((r,o)=>{let i=r.transition.ast.depCount,s=o.transition.ast.depCount;return i==0||s==0?i-s:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}},MO=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,e)=>{};_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,r){this.bodyNode=n,this.driver=e,this._normalizer=r}get queuedPlayers(){let n=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,e){let r=new SO(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,e){let r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=o.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,n),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(n)}else r.push(n);return o.set(e,n),n}register(n,e){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,e)),r}registerTrigger(n,e,r){let o=this._namespaceLookup[n];o&&o.register(e,r)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);let o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1),r.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){let e=new Set,r=this.statesByElement.get(n);if(r){for(let o of r.values())if(o.namespaceId){let i=this._fetchNamespace(o.namespaceId);i&&e.add(i)}}return e}trigger(n,e,r,o){if(MS(e)){let i=this._fetchNamespace(n);if(i)return i.trigger(e,r,o),!0}return!1}insertNode(n,e,r,o){if(!MS(e))return;let i=e[fl];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){let s=this._fetchNamespace(n);s&&s.insertNode(e,r)}o&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),ba(n,fO)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),_1(n,fO))}removeNode(n,e,r){if(MS(e)){let o=n?this._fetchNamespace(n):null;o?o.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r);let i=this.namespacesByHostElement.get(e);i&&i.id!==n&&i.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,r,o,i){this.collectedLeaveElements.push(e),e[fl]={namespaceId:n,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:i}}listen(n,e,r,o,i){return MS(e)?this._fetchNamespace(n).listen(e,r,o,i):()=>{}}_buildInstruction(n,e,r,o,i){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,o,n.fromState.options,n.toState.options,e,i)}destroyInnerAnimations(n){let e=this.driver.query(n,ax,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(n,_S,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){let e=this.playersByElement.get(n);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){let e=this.playersByQueriedElement.get(n);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return md(this.players).onDone(()=>n());n()})}processLeaveNode(n){let e=n[fl];if(e&&e.setForRemoval){if(n[fl]=TW,e.namespaceId){this.destroyInnerAnimations(n);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(fO)&&this.markElementAsDisabled(n,!1),this.driver.query(n,Uwe,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let o=this.collectedEnterElements[r];ba(o,Gwe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,n)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let o=this.collectedLeaveElements[r];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?md(e).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(n){throw sW(n)}_flushAnimations(n,e){let r=new ux,o=[],i=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(X=>{u.add(X);let G=this.driver.query(X,Hwe,!0);for(let H=0;H<G.length;H++)u.add(G[H])});let d=this.bodyNode,p=Array.from(this.statesByElement.keys()),h=_W(p,this.collectedEnterElements),f=new Map,m=0;h.forEach((X,G)=>{let H=cO+m++;f.set(G,H),X.forEach(V=>ba(V,H))});let g=[],v=new Set,w=new Set;for(let X=0;X<this.collectedLeaveElements.length;X++){let G=this.collectedLeaveElements[X],H=G[fl];H&&H.setForRemoval&&(g.push(G),v.add(G),H.hasAnimation?this.driver.query(G,Wwe,!0).forEach(V=>v.add(V)):w.add(G))}let y=new Map,_=_W(p,Array.from(v));_.forEach((X,G)=>{let H=xS+m++;y.set(G,H),X.forEach(V=>ba(V,H))}),n.push(()=>{h.forEach((X,G)=>{let H=f.get(G);X.forEach(V=>_1(V,H))}),_.forEach((X,G)=>{let H=y.get(G);X.forEach(V=>_1(V,H))}),g.forEach(X=>{this.processLeaveNode(X)})});let k=[],M=[];for(let X=this._namespaceList.length-1;X>=0;X--)this._namespaceList[X].drainQueuedTransitions(e).forEach(H=>{let V=H.player,K=H.element;if(k.push(V),this.collectedEnterElements.length){let Ce=K[fl];if(Ce&&Ce.setForMove){if(Ce.previousTriggersValues&&Ce.previousTriggersValues.has(H.triggerName)){let Je=Ce.previousTriggersValues.get(H.triggerName),qe=this.statesByElement.get(H.element);if(qe&&qe.has(H.triggerName)){let xt=qe.get(H.triggerName);xt.value=Je,qe.set(H.triggerName,xt)}}V.destroy();return}}let pe=!d||!this.driver.containsElement(d,K),le=y.get(K),se=f.get(K),ye=this._buildInstruction(H,r,se,le,pe);if(ye.errors&&ye.errors.length){M.push(ye);return}if(pe){V.onStart(()=>wh(K,ye.fromStyles)),V.onDestroy(()=>hl(K,ye.toStyles)),o.push(V);return}if(H.isFallbackTransition){V.onStart(()=>wh(K,ye.fromStyles)),V.onDestroy(()=>hl(K,ye.toStyles)),o.push(V);return}let Ae=[];ye.timelines.forEach(Ce=>{Ce.stretchStartingKeyframe=!0,this.disabledNodes.has(Ce.element)||Ae.push(Ce)}),ye.timelines=Ae,r.append(K,ye.timelines);let Re={instruction:ye,player:V,element:K};s.push(Re),ye.queriedElements.forEach(Ce=>Ds(a,Ce,[]).push(V)),ye.preStyleProps.forEach((Ce,Je)=>{if(Ce.size){let qe=l.get(Je);qe||l.set(Je,qe=new Set),Ce.forEach((xt,bt)=>qe.add(bt))}}),ye.postStyleProps.forEach((Ce,Je)=>{let qe=c.get(Je);qe||c.set(Je,qe=new Set),Ce.forEach((xt,bt)=>qe.add(bt))})});if(M.length){let X=[];M.forEach(G=>{X.push(aW(G.triggerName,G.errors))}),k.forEach(G=>G.destroy()),this.reportError(X)}let E=new Map,A=new Map;s.forEach(X=>{let G=X.element;r.has(G)&&(A.set(G,G),this._beforeAnimationBuild(X.player.namespaceId,X.instruction,E))}),o.forEach(X=>{let G=X.element;this._getPreviousPlayers(G,!1,X.namespaceId,X.triggerName,null).forEach(V=>{Ds(E,G,[]).push(V),V.destroy()})});let P=g.filter(X=>kW(X,l,c)),N=new Map;xW(N,this.driver,w,c,ka).forEach(X=>{kW(X,l,c)&&P.push(X)});let S=new Map;h.forEach((X,G)=>{xW(S,this.driver,new Set(X),l,w1)}),P.forEach(X=>{let G=N.get(X),H=S.get(X);N.set(X,new Map([...G?.entries()??[],...H?.entries()??[]]))});let W=[],ie=[],Z={};s.forEach(X=>{let{element:G,player:H,instruction:V}=X;if(r.has(G)){if(u.has(G)){H.onDestroy(()=>hl(G,V.toStyles)),H.disabled=!0,H.overrideTotalTime(V.totalTime),o.push(H);return}let K=Z;if(A.size>1){let le=G,se=[];for(;le=le.parentNode;){let ye=A.get(le);if(ye){K=ye;break}se.push(le)}se.forEach(ye=>A.set(ye,K))}let pe=this._buildAnimation(H.namespaceId,V,E,i,S,N);if(H.setRealPlayer(pe),K===Z)W.push(H);else{let le=this.playersByElement.get(K);le&&le.length&&(H.parentPlayer=md(le)),o.push(H)}}else wh(G,V.fromStyles),H.onDestroy(()=>hl(G,V.toStyles)),ie.push(H),u.has(G)&&o.push(H)}),ie.forEach(X=>{let G=i.get(X.element);if(G&&G.length){let H=md(G);X.setRealPlayer(H)}}),o.forEach(X=>{X.parentPlayer?X.syncPlayerEvents(X.parentPlayer):X.destroy()});for(let X=0;X<g.length;X++){let G=g[X],H=G[fl];if(_1(G,xS),H&&H.hasAnimation)continue;let V=[];if(a.size){let pe=a.get(G);pe&&pe.length&&V.push(...pe);let le=this.driver.query(G,_S,!0);for(let se=0;se<le.length;se++){let ye=a.get(le[se]);ye&&ye.length&&V.push(...ye)}}let K=V.filter(pe=>!pe.destroyed);K.length?Qwe(this,G,K):this.processLeaveNode(G)}return g.length=0,W.forEach(X=>{this.players.push(X),X.onDone(()=>{X.destroy();let G=this.players.indexOf(X);this.players.splice(G,1)}),X.play()}),W}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,r,o,i){let s=[];if(e){let a=this.playersByQueriedElement.get(n);a&&(s=a)}else{let a=this.playersByElement.get(n);if(a){let l=!i||i==cx;a.forEach(c=>{c.queued||!l&&c.triggerName!=o||s.push(c)})}}return(r||o)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||o&&o!=a.triggerName))),s}_beforeAnimationBuild(n,e,r){let o=e.triggerName,i=e.element,s=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:o;for(let l of e.timelines){let c=l.element,u=c!==i,d=Ds(r,c,[]);this._getPreviousPlayers(c,u,s,a,e.toState).forEach(h=>{let f=h.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),h.destroy(),d.push(h)})}wh(i,e.fromStyles)}_buildAnimation(n,e,r,o,i,s){let a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,p=e.timelines.map(f=>{let m=f.element;u.add(m);let g=m[fl];if(g&&g.removedBeforeQueried)return new fc(f.duration,f.delay);let v=m!==l,w=Jwe((r.get(m)||qwe).map(E=>E.getRealPlayer())).filter(E=>{let A=E;return A.element?A.element===m:!1}),y=i.get(m),_=s.get(m),k=oO(this._normalizer,f.keyframes,y,_),M=this._buildPlayer(f,k,w);if(f.subTimeline&&o&&d.add(m),v){let E=new px(n,a,m);E.setRealPlayer(M),c.push(E)}return M});c.forEach(f=>{Ds(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>Zwe(this.playersByQueriedElement,f.element,f))}),u.forEach(f=>ba(f,uO));let h=md(p);return h.onDestroy(()=>{u.forEach(f=>_1(f,uO)),hl(l,e.toStyles)}),d.forEach(f=>{Ds(o,f,[]).push(h)}),h}_buildPlayer(n,e,r){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,r):new fc(n.duration,n.delay)}},px=class{namespaceId;triggerName;element;_player=new fc;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,e,r){this.namespaceId=n,this.triggerName=e,this.element=r}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,r)=>{e.forEach(o=>vS(n,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){let e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Ds(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){let e=this._player;e.triggerCallback&&e.triggerCallback(n)}};function Zwe(t,n,e){let r=t.get(n);if(r){if(r.length){let o=r.indexOf(e);r.splice(o,1)}r.length==0&&t.delete(n)}return r}function Xwe(t){return t??null}function MS(t){return t&&t.nodeType===1}function Ywe(t){return t=="start"||t=="done"}function yW(t,n){let e=t.style.display;return t.style.display=n??"none",e}function xW(t,n,e,r,o){let i=[];e.forEach(l=>i.push(yW(l)));let s=[];r.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let p=n.computeStyle(c,d,o);u.set(d,p),(!p||p.length==0)&&(c[fl]=Kwe,s.push(c))}),t.set(c,u)});let a=0;return e.forEach(l=>yW(l,i[a++])),s}function _W(t,n){let e=new Map;if(t.forEach(a=>e.set(a,[])),n.length==0)return e;let r=1,o=new Set(n),i=new Map;function s(a){if(!a)return r;let l=i.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:o.has(c)?l=r:l=s(c),i.set(a,l),l}return n.forEach(a=>{let l=s(a);l!==r&&e.get(l).push(a)}),e}function ba(t,n){t.classList?.add(n)}function _1(t,n){t.classList?.remove(n)}function Qwe(t,n,e){md(e).onDone(()=>t.processLeaveNode(n))}function Jwe(t){let n=[];return DW(t,n),n}function DW(t,n){for(let e=0;e<t.length;e++){let r=t[e];r instanceof Am?DW(r.players,n):n.push(r)}}function eye(t,n){let e=Object.keys(t),r=Object.keys(n);if(e.length!=r.length)return!1;for(let o=0;o<e.length;o++){let i=e[o];if(!n.hasOwnProperty(i)||t[i]!==n[i])return!1}return!0}function kW(t,n,e){let r=e.get(t);if(!r)return!1;let o=n.get(t);return o?r.forEach(i=>o.add(i)):n.set(t,r),e.delete(t),!0}var k1=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,e)=>{};constructor(n,e,r){this._driver=e,this._normalizer=r,this._transitionEngine=new MO(n.body,e,r),this._timelineEngine=new CO(n.body,e,r),this._transitionEngine.onRemovalComplete=(o,i)=>this.onRemovalComplete(o,i)}registerTrigger(n,e,r,o,i){let s=n+"-"+o,a=this._triggerCache[s];if(!a){let l=[],c=[],u=CW(this._driver,i,l,c);if(l.length)throw YG(o,l);a=Vwe(o,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,o,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,r,o){this._transitionEngine.insertNode(n,e,r,o)}onRemove(n,e,r){this._transitionEngine.removeNode(n,e,r)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,r,o){if(r.charAt(0)=="@"){let[i,s]=iO(r),a=o;this._timelineEngine.command(i,e,s,a)}else this._transitionEngine.trigger(n,e,r,o)}listen(n,e,r,o,i){if(r.charAt(0)=="@"){let[s,a]=iO(r);return this._timelineEngine.listen(s,e,a,i)}return this._transitionEngine.listen(n,e,r,o,i)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}};function tye(t,n){let e=null,r=null;return Array.isArray(n)&&n.length?(e=gO(n[0]),n.length>1&&(r=gO(n[n.length-1]))):n instanceof Map&&(e=gO(n)),e||r?new nye(t,e,r):null}var nye=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,r,o){this._element=e,this._startStyles=r,this._endStyles=o;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&hl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(hl(this._element,this._initialStyles),this._endStyles&&(hl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(wh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wh(this._element,this._endStyles),this._endStyles=null),hl(this._element,this._initialStyles),this._state=3)}}return t})();function gO(t){let n=null;return t.forEach((e,r)=>{rye(r)&&(n=n||new Map,n.set(r,e))}),n}function rye(t){return t==="display"||t==="position"}var RS=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,e,r,o){this.element=n,this.keyframes=e,this.options=r,this._specialStyles=o,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){let e=[];return n.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(n,e,r){return n.animate(this._convertKeyframesToObject(e),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{o!=="offset"&&n.set(o,this._finished?r:bS(this.element,o))}),this.currentSnapshot=n}triggerCallback(n){let e=n==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},OS=class{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,e){return sO(n,e)}getParentElement(n){return yS(n)}query(n,e,r){return aO(n,e,r)}computeStyle(n,e,r){return bS(n,e)}animate(n,e,r,o,i,s=[]){let a=o==0?"both":"forwards",l={duration:r,delay:o,fill:a};i&&(l.easing=i);let c=new Map,u=s.filter(h=>h instanceof RS);dW(r,o)&&u.forEach(h=>{h.currentSnapshot.forEach((f,m)=>c.set(m,f))});let d=cW(e).map(h=>new Map(h));d=pW(n,d,c);let p=tye(n,d);return new RS(n,d,l,p)}};var TS="@",EW="@.disabled",FS=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,e,r,o){this.namespaceId=n,this.delegate=e,this.engine=r,this._onDestroy=o}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,r,o=!0){this.delegate.insertBefore(n,e,r),this.engine.onInsert(this.namespaceId,e,n,o)}removeChild(n,e,r){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,r,o){this.delegate.setAttribute(n,e,r,o)}removeAttribute(n,e,r){this.delegate.removeAttribute(n,e,r)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,r,o){this.delegate.setStyle(n,e,r,o)}removeStyle(n,e,r){this.delegate.removeStyle(n,e,r)}setProperty(n,e,r){e.charAt(0)==TS&&e==EW?this.disableAnimations(n,!!r):this.delegate.setProperty(n,e,r)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,r,o){return this.delegate.listen(n,e,r,o)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}},TO=class extends FS{factory;constructor(n,e,r,o,i){super(e,r,o,i),this.factory=n,this.namespaceId=e}setProperty(n,e,r){e.charAt(0)==TS?e.charAt(1)=="."&&e==EW?(r=r===void 0?!0:!!r,this.disableAnimations(n,r)):this.engine.process(this.namespaceId,n,e.slice(1),r):this.delegate.setProperty(n,e,r)}listen(n,e,r,o){if(e.charAt(0)==TS){let i=oye(n),s=e.slice(1),a="";return s.charAt(0)!=TS&&([s,a]=iye(s)),this.engine.listen(this.namespaceId,i,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,r,l)})}return this.delegate.listen(n,e,r,o)}};function oye(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function iye(t){let n=t.indexOf("."),e=t.substring(0,n),r=t.slice(n+1);return[e,r]}var PS=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,e,r){this.delegate=n,this.engine=e,this._zone=r,e.onRemovalComplete=(o,i)=>{i?.removeChild(null,o)}}createRenderer(n,e){let r="",o=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){let c=this._rendererCache,u=c.get(o);if(!u){let d=()=>c.delete(o);u=new FS(r,o,this.engine,d),c.set(o,u)}return u}let i=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,n);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(i,s,n,c.name,c)};return e.data.animation.forEach(a),new TO(this,s,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,r){if(n>=0&&n<this._microtaskId){this._zone.run(()=>e(r));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(i=>{let[s,a]=i;s(a)}),this._animationCallbacksBuffer=[]})}),o.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}};var aye=(()=>{class t extends k1{constructor(e,r,o){super(e,r,o)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||t)(Xe(un),Xe(Pm),Xe(Bm))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();function lye(){return new DS}function cye(t,n,e){return new PS(t,n,e)}var IW=[{provide:Bm,useFactory:lye},{provide:k1,useClass:aye},{provide:yo,useFactory:cye,deps:[ox,k1,Pt]}],Znt=[{provide:Pm,useClass:DO},{provide:ym,useValue:"NoopAnimations"},...IW],uye=[{provide:Pm,useFactory:()=>new OS},{provide:ym,useFactory:()=>"BrowserAnimations"},...IW];function NW(){return cl("NgEagerAnimations"),[...uye]}var pn="primary",Sx=Symbol("RouteTitle"),OO=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Vm(t){return new OO(t)}function $W(t,n,e){let r=e.path.split("/");if(r.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function dye(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!gc(t[e],n[e]))return!1;return!0}function gc(t,n){let e=t?FO(t):void 0,r=n?FO(n):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!VW(t[o],n[o]))return!1;return!0}function FO(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function VW(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),r=[...n].sort();return e.every((o,i)=>r[i]===o)}else return t===n}function jW(t){return t.length>0?t[t.length-1]:null}function Ch(t){return xs(t)?t:km(t)?Zn(Promise.resolve(t)):at(t)}var pye={exact:HW,subset:UW},zW={exact:hye,subset:fye,ignored:()=>!0};function AW(t,n,e){return pye[e.paths](t.root,n.root,e.matrixParams)&&zW[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function hye(t,n){return gc(t,n)}function HW(t,n,e){if(!Lm(t.segments,n.segments)||!$S(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!HW(t.children[r],n.children[r],e))return!1;return!0}function fye(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>VW(t[e],n[e]))}function UW(t,n,e){return GW(t,n,n.segments,e)}function GW(t,n,e,r){if(t.segments.length>e.length){let o=t.segments.slice(0,e.length);return!(!Lm(o,e)||n.hasChildren()||!$S(o,e,r))}else if(t.segments.length===e.length){if(!Lm(t.segments,e)||!$S(t.segments,e,r))return!1;for(let o in n.children)if(!t.children[o]||!UW(t.children[o],n.children[o],r))return!1;return!0}else{let o=e.slice(0,t.segments.length),i=e.slice(t.segments.length);return!Lm(t.segments,o)||!$S(t.segments,o,r)||!t.children[pn]?!1:GW(t.children[pn],n,i,r)}}function $S(t,n,e){return n.every((r,o)=>zW[e](t[o].parameters,r.parameters))}var wc=class{root;queryParams;fragment;_queryParamMap;constructor(n=new Vn([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vm(this.queryParams),this._queryParamMap}toString(){return vye.serialize(this)}},Vn=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return VS(this)}},yh=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Vm(this.parameters),this._parameterMap}toString(){return qW(this)}};function mye(t,n){return Lm(t,n)&&t.every((e,r)=>gc(e.parameters,n[r].parameters))}function Lm(t,n){return t.length!==n.length?!1:t.every((e,r)=>e.path===n[r].path)}function gye(t,n){let e=[];return Object.entries(t.children).forEach(([r,o])=>{r===pn&&(e=e.concat(n(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==pn&&(e=e.concat(n(o,r)))}),e}var jm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:()=>new xh,providedIn:"root"})}return t})(),xh=class{parse(n){let e=new BO(n);return new wc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${hx(n.root,!0)}`,r=xye(n.queryParams),o=typeof n.fragment=="string"?`#${wye(n.fragment)}`:"";return`${e}${r}${o}`}},vye=new xh;function VS(t){return t.segments.map(n=>qW(n)).join("/")}function hx(t,n){if(!t.hasChildren())return VS(t);if(n){let e=t.children[pn]?hx(t.children[pn],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==pn&&r.push(`${o}:${hx(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=gye(t,(r,o)=>o===pn?[hx(t.children[pn],!1)]:[`${o}:${hx(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[pn]!=null?`${VS(t)}/${e[0]}`:`${VS(t)}/(${e.join("//")})`}}function WW(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function BS(t){return WW(t).replace(/%3B/gi,";")}function wye(t){return encodeURI(t)}function PO(t){return WW(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jS(t){return decodeURIComponent(t)}function RW(t){return jS(t.replace(/\+/g,"%20"))}function qW(t){return`${PO(t.path)}${yye(t.parameters)}`}function yye(t){return Object.entries(t).map(([n,e])=>`;${PO(n)}=${PO(e)}`).join("")}function xye(t){let n=Object.entries(t).map(([e,r])=>Array.isArray(r)?r.map(o=>`${BS(e)}=${BS(o)}`).join("&"):`${BS(e)}=${BS(r)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var _ye=/^[^\/()?;#]+/;function IO(t){let n=t.match(_ye);return n?n[0]:""}var kye=/^[^\/()?;=#]+/;function bye(t){let n=t.match(kye);return n?n[0]:""}var Cye=/^[^=?&#]+/;function Sye(t){let n=t.match(Cye);return n?n[0]:""}var Mye=/^[^&#]+/;function Tye(t){let n=t.match(Mye);return n?n[0]:""}var BO=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vn([],{}):new Vn([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[pn]=new Vn(n,e)),r}parseSegment(){let n=IO(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new Ne(4009,!1);return this.capture(n),new yh(jS(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=bye(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=IO(this.remaining);o&&(r=o,this.capture(r))}n[jS(e)]=jS(r)}parseQueryParam(n){let e=Sye(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=Tye(this.remaining);s&&(r=s,this.capture(r))}let o=RW(e),i=RW(r);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(i)}else n[o]=i}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=IO(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new Ne(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):n&&(i=pn);let s=this.parseChildren();e[i]=Object.keys(s).length===1?s[pn]:new Vn([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new Ne(4011,!1)}};function KW(t){return t.segments.length>0?new Vn([],{[pn]:t}):t}function ZW(t){let n={};for(let[r,o]of Object.entries(t.children)){let i=ZW(o);if(r===pn&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))n[s]=a;else(i.segments.length>0||i.hasChildren())&&(n[r]=i)}let e=new Vn(t.segments,n);return Dye(e)}function Dye(t){if(t.numberOfChildren===1&&t.children[pn]){let n=t.children[pn];return new Vn(t.segments.concat(n.segments),n.children)}return t}function _h(t){return t instanceof wc}function XW(t,n,e=null,r=null){let o=YW(t);return QW(o,n,e,r)}function YW(t){let n;function e(i){let s={};for(let l of i.children){let c=e(l);s[l.outlet]=c}let a=new Vn(i.url,s);return i===t&&(n=a),a}let r=e(t.root),o=KW(r);return n??o}function QW(t,n,e,r){let o=t;for(;o.parent;)o=o.parent;if(n.length===0)return NO(o,o,o,e,r);let i=Eye(n);if(i.toRoot())return NO(o,o,new Vn([],{}),e,r);let s=Iye(i,o,t),a=s.processChildren?mx(s.segmentGroup,s.index,i.commands):eq(s.segmentGroup,s.index,i.commands);return NO(o,s.segmentGroup,a,e,r)}function HS(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function vx(t){return typeof t=="object"&&t!=null&&t.outlets}function NO(t,n,e,r,o){let i={};r&&Object.entries(r).forEach(([l,c])=>{i[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===n?s=e:s=JW(t,n,e);let a=KW(ZW(s));return new wc(a,i,o)}function JW(t,n,e){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===n?r[o]=e:r[o]=JW(i,n,e)}),new Vn(t.segments,r)}var US=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&HS(r[0]))throw new Ne(4003,!1);let o=r.find(vx);if(o&&o!==jW(r))throw new Ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Eye(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new US(!0,0,t);let n=0,e=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?n++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new US(e,n,r)}var S1=class{segmentGroup;processChildren;index;constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}};function Iye(t,n,e){if(t.isAbsolute)return new S1(n,!0,0);if(!e)return new S1(n,!1,NaN);if(e.parent===null)return new S1(e,!0,0);let r=HS(t.commands[0])?0:1,o=e.segments.length-1+r;return Nye(e,o,t.numberOfDoubleDots)}function Nye(t,n,e){let r=t,o=n,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new Ne(4005,!1);o=r.segments.length}return new S1(r,!1,o-i)}function Aye(t){return vx(t[0])?t[0].outlets:{[pn]:t}}function eq(t,n,e){if(t??=new Vn([],{}),t.segments.length===0&&t.hasChildren())return mx(t,n,e);let r=Rye(t,n,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new Vn(t.segments.slice(0,r.pathIndex),{});return i.children[pn]=new Vn(t.segments.slice(r.pathIndex),t.children),mx(i,0,o)}else return r.match&&o.length===0?new Vn(t.segments,{}):r.match&&!t.hasChildren()?LO(t,n,e):r.match?mx(t,0,o):LO(t,n,e)}function mx(t,n,e){if(e.length===0)return new Vn(t.segments,{});{let r=Aye(e),o={};if(Object.keys(r).some(i=>i!==pn)&&t.children[pn]&&t.numberOfChildren===1&&t.children[pn].segments.length===0){let i=mx(t.children[pn],n,e);return new Vn(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=eq(t.children[i],n,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new Vn(t.segments,o)}}function Rye(t,n,e){let r=0,o=n,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=e.length)return i;let s=t.segments[o],a=e[r];if(vx(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!FW(l,c,s))return i;r+=2}else{if(!FW(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function LO(t,n,e){let r=t.segments.slice(0,n),o=0;for(;o<e.length;){let i=e[o];if(vx(i)){let l=Oye(i.outlets);return new Vn(r,l)}if(o===0&&HS(e[0])){let l=t.segments[n];r.push(new yh(l.path,OW(e[0]))),o++;continue}let s=vx(i)?i.outlets[pn]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&HS(a)?(r.push(new yh(s,OW(a))),o+=2):(r.push(new yh(s,{})),o++)}return new Vn(r,{})}function Oye(t){let n={};return Object.entries(t).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[e]=LO(new Vn([],{}),0,r))}),n}function OW(t){let n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function FW(t,n,e){return t==e.path&&gc(n,e.parameters)}var zS="imperative",Uo=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Uo||{}),Js=class{id;url;constructor(n,e){this.id=n,this.url=e}},kh=class extends Js{type=Uo.NavigationStart;navigationTrigger;restoredState;constructor(n,e,r="imperative",o=null){super(n,e),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ns=class extends Js{urlAfterRedirects;type=Uo.NavigationEnd;constructor(n,e,r){super(n,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Is=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Is||{}),T1=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(T1||{}),vc=class extends Js{reason;code;type=Uo.NavigationCancel;constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yc=class extends Js{reason;code;type=Uo.NavigationSkipped;constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o}},D1=class extends Js{error;target;type=Uo.NavigationError;constructor(n,e,r,o){super(n,e),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wx=class extends Js{urlAfterRedirects;state;type=Uo.RoutesRecognized;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},GS=class extends Js{urlAfterRedirects;state;type=Uo.GuardsCheckStart;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},WS=class extends Js{urlAfterRedirects;state;shouldActivate;type=Uo.GuardsCheckEnd;constructor(n,e,r,o,i){super(n,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qS=class extends Js{urlAfterRedirects;state;type=Uo.ResolveStart;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},KS=class extends Js{urlAfterRedirects;state;type=Uo.ResolveEnd;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ZS=class{route;type=Uo.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},XS=class{route;type=Uo.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},YS=class{snapshot;type=Uo.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},QS=class{snapshot;type=Uo.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},JS=class{snapshot;type=Uo.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eM=class{snapshot;type=Uo.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E1=class{routerEvent;position;anchor;type=Uo.Scroll;constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},yx=class{},I1=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function Fye(t,n){return t.providers&&!t._injector&&(t._injector=jy(t.providers,n,`Route: ${t.path}`)),t._injector??n}function ml(t){return t.outlet||pn}function Pye(t,n){let e=t.filter(r=>ml(r)===n);return e.push(...t.filter(r=>ml(r)!==n)),e}function Mx(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var tM=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Mx(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new zm(this.rootInjector)}},zm=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new tM(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||t)(Xe(to))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nM=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=$O(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){let e=$O(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=VO(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return VO(n,this._root).map(e=>e.value)}};function $O(t,n){if(t===n.value)return n;for(let e of n.children){let r=$O(t,e);if(r)return r}return null}function VO(t,n){if(t===n.value)return[n];for(let e of n.children){let r=VO(t,e);if(r.length)return r.unshift(n),r}return[]}var Qs=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function C1(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var xx=class extends nM{snapshot;constructor(n,e){super(n),this.snapshot=e,KO(this,n)}toString(){return this.snapshot.toString()}};function tq(t){let n=Bye(t),e=new Kn([new yh("",{})]),r=new Kn({}),o=new Kn({}),i=new Kn({}),s=new Kn(""),a=new xc(e,r,i,s,o,pn,t,n.root);return a.snapshot=n.root,new xx(new Qs(a,[]),n)}function Bye(t){let n={},e={},r={},o="",i=new $m([],n,r,o,e,pn,t,null,{});return new _x("",new Qs(i,[]))}var xc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,r,o,i,s,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(It(c=>c[Sx]))??at(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(It(n=>Vm(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(It(n=>Vm(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rM(t,n,e="emptyOnly"){let r,{routeConfig:o}=t;return n!==null&&(e==="always"||o?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:ue(ue({},n.params),t.params),data:ue(ue({},n.data),t.data),resolve:ue(ue(ue(ue({},t.data),n.data),o?.data),t._resolvedData)}:r={params:ue({},t.params),data:ue({},t.data),resolve:ue(ue({},t.data),t._resolvedData??{})},o&&rq(o)&&(r.resolve[Sx]=o.title),r}var $m=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Sx]}constructor(n,e,r,o,i,s,a,l,c){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vm(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vm(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},_x=class extends nM{url;constructor(n,e){super(e),this.url=n,KO(this,e)}toString(){return nq(this._root)}};function KO(t,n){n.value._routerState=t,n.children.forEach(e=>KO(t,e))}function nq(t){let n=t.children.length>0?` { ${t.children.map(nq).join(", ")} } `:"";return`${t.value}${n}`}function AO(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,gc(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),gc(n.params,e.params)||t.paramsSubject.next(e.params),dye(n.url,e.url)||t.urlSubject.next(e.url),gc(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function jO(t,n){let e=gc(t.params,n.params)&&mye(t.url,n.url),r=!t.parent!=!n.parent;return e&&!r&&(!t.parent||jO(t.parent,n.parent))}function rq(t){return typeof t.title=="string"||t.title===null}var oq=new Me(""),Hm=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=pn;activateEvents=new Xt;deactivateEvents=new Xt;attachEvents=new Xt;detachEvents=new Xt;routerOutletData=Y(void 0);parentContexts=I(zm);location=I(Br);changeDetector=I(Lr);inputBinder=I(Tx,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ne(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Ne(4013,!1);this._activatedRoute=e;let o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new zO(e,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[uo]})}return t})(),zO=class{route;childContexts;parent;outletData;constructor(n,e,r,o){this.route=n,this.childContexts=e,this.parent=r,this.outletData=o}get(n,e){return n===xc?this.route:n===zm?this.childContexts:n===oq?this.outletData:this.parent.get(n,e)}},Tx=new Me(""),ZO=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,o=fy([r.queryParams,r.params,r.data]).pipe(Pr(([i,s,a],l)=>(a=ue(ue(ue({},i),s),a),l===0?at(a):Promise.resolve(a)))).subscribe(i=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let s=BU(r.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(e,o)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();function Lye(t,n,e){let r=kx(t,n._root,e?e._root:void 0);return new xx(r,n)}function kx(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=n.value;let o=$ye(t,n,e);return new Qs(r,o)}else{if(t.shouldAttach(n.value)){let i=t.retrieve(n.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>kx(t,a)),s}}let r=Vye(n.value),o=n.children.map(i=>kx(t,i));return new Qs(r,o)}}function $ye(t,n,e){return n.children.map(r=>{for(let o of e.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return kx(t,r,o);return kx(t,r)})}function Vye(t){return new xc(new Kn(t.url),new Kn(t.params),new Kn(t.queryParams),new Kn(t.fragment),new Kn(t.data),t.outlet,t.component,t)}var bh=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},iq="ngNavigationCancelingError";function oM(t,n){let{redirectTo:e,navigationBehaviorOptions:r}=_h(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=sq(!1,Is.Redirect);return o.url=e,o.navigationBehaviorOptions=r,o}function sq(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[iq]=!0,e.cancellationCode=n,e}function jye(t){return aq(t)&&_h(t.url)}function aq(t){return!!t&&t[iq]}var zye=(t,n,e,r)=>It(o=>(new HO(n,o.targetRouterState,o.currentRouterState,e,r).activate(t),o)),HO=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,r,o,i){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(n){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),AO(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){let o=C1(e);n.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(n,e,r){let o=n.value,i=e?e.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=C1(n);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){let r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=C1(n);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){let o=C1(e);n.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new eM(i.value.snapshot))}),n.children.length&&this.forwardEvent(new QS(n.value.snapshot))}activateRoutes(n,e,r){let o=n.value,i=e?e.value:null;if(AO(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),AO(a.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,r)}},iM=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},M1=class{component;route;constructor(n,e){this.component=n,this.route=e}};function Hye(t,n,e){let r=t._root,o=n?n._root:null;return fx(r,o,e,[r.value])}function Uye(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function A1(t,n){let e=Symbol(),r=n.get(t,e);return r===e?typeof t=="function"&&!Fj(t)?t:n.get(t):r}function fx(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=C1(n);return t.children.forEach(s=>{Gye(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>gx(a,e.getContext(s),o)),o}function Gye(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let l=Wye(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new iM(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?fx(t,n,a?a.children:null,r,o):fx(t,n,e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new M1(a.outlet.component,s))}else s&&gx(n,a,o),o.canActivateChecks.push(new iM(r)),i.component?fx(t,null,a?a.children:null,r,o):fx(t,null,e,r,o);return o}function Wye(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!Lm(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Lm(t.url,n.url)||!gc(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jO(t,n)||!gc(t.queryParams,n.queryParams);case"paramsChange":default:return!jO(t,n)}}function gx(t,n,e){let r=C1(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?n?gx(s,n.children.getContext(i),e):gx(s,null,e):gx(s,n,e)}),o.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new M1(n.outlet.component,o)):e.canDeactivateChecks.push(new M1(null,o)):e.canDeactivateChecks.push(new M1(null,o))}function Dx(t){return typeof t=="function"}function qye(t){return typeof t=="boolean"}function Kye(t){return t&&Dx(t.canLoad)}function Zye(t){return t&&Dx(t.canActivate)}function Xye(t){return t&&Dx(t.canActivateChild)}function Yye(t){return t&&Dx(t.canDeactivate)}function Qye(t){return t&&Dx(t.canMatch)}function lq(t){return t instanceof ed||t?.name==="EmptyError"}var LS=Symbol("INITIAL_VALUE");function N1(){return Pr(t=>fy(t.map(n=>n.pipe(eo(1),ma(LS)))).pipe(It(n=>{for(let e of n)if(e!==!0){if(e===LS)return LS;if(e===!1||Jye(e))return e}return!0}),xn(n=>n!==LS),eo(1)))}function Jye(t){return _h(t)||t instanceof bh}function exe(t,n){return lr(e=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return s.length===0&&i.length===0?at(pt(ue({},e),{guardsResult:!0})):txe(s,r,o,t).pipe(lr(a=>a&&qye(a)?nxe(r,i,t,n):at(a)),It(a=>pt(ue({},e),{guardsResult:a})))})}function txe(t,n,e,r){return Zn(t).pipe(lr(o=>axe(o.component,o.route,e,n,r)),od(o=>o!==!0,!0))}function nxe(t,n,e,r){return Zn(n).pipe(ha(o=>rl(oxe(o.route.parent,r),rxe(o.route,r),sxe(t,o.path,e),ixe(t,o.route,e))),od(o=>o!==!0,!0))}function rxe(t,n){return t!==null&&n&&n(new JS(t)),at(!0)}function oxe(t,n){return t!==null&&n&&n(new YS(t)),at(!0)}function ixe(t,n,e){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return at(!0);let o=r.map(i=>td(()=>{let s=Mx(n)??e,a=A1(i,s),l=Zye(a)?a.canActivate(n,t):Vo(s,()=>a(n,t));return Ch(l).pipe(od())}));return at(o).pipe(N1())}function sxe(t,n,e){let r=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(s=>Uye(s)).filter(s=>s!==null).map(s=>td(()=>{let a=s.guards.map(l=>{let c=Mx(s.node)??e,u=A1(l,c),d=Xye(u)?u.canActivateChild(r,t):Vo(c,()=>u(r,t));return Ch(d).pipe(od())});return at(a).pipe(N1())}));return at(i).pipe(N1())}function axe(t,n,e,r,o){let i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!i||i.length===0)return at(!0);let s=i.map(a=>{let l=Mx(n)??o,c=A1(a,l),u=Yye(c)?c.canDeactivate(t,n,e,r):Vo(l,()=>c(t,n,e,r));return Ch(u).pipe(od())});return at(s).pipe(N1())}function lxe(t,n,e,r){let o=n.canLoad;if(o===void 0||o.length===0)return at(!0);let i=o.map(s=>{let a=A1(s,t),l=Kye(a)?a.canLoad(n,e):Vo(t,()=>a(n,e));return Ch(l)});return at(i).pipe(N1(),cq(r))}function cq(t){return oA(Bo(n=>{if(typeof n!="boolean")throw oM(t,n)}),It(n=>n===!0))}function cxe(t,n,e,r){let o=n.canMatch;if(!o||o.length===0)return at(!0);let i=o.map(s=>{let a=A1(s,t),l=Qye(a)?a.canMatch(n,e):Vo(t,()=>a(n,e));return Ch(l)});return at(i).pipe(N1(),cq(r))}var bx=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Cx=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function b1(t){return P2(new bx(t))}function uxe(t){return P2(new Ne(4e3,!1))}function dxe(t){return P2(sq(!1,Is.GuardRejected))}var UO=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return at(r);if(o.numberOfChildren>1||!o.children[pn])return uxe(`${n.redirectTo}`);o=o.children[pn]}}applyRedirectCommands(n,e,r,o,i){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,params:h,data:f,title:m}=o,g=Vo(i,()=>a({params:h,data:f,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,title:m}));if(g instanceof wc)throw new Cx(g);e=g}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r);if(e[0]==="/")throw new Cx(s);return s}applyRedirectCreateUrlTree(n,e,r,o){let i=this.createSegmentGroup(n,e.root,r,o);return new wc(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let r={};return Object.entries(n).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=e[a]}else r[o]=i}),r}createSegmentGroup(n,e,r,o){let i=this.createSegments(n,e.segments,r,o),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(n,l,r,o)}),new Vn(i,s)}createSegments(n,e,r,o){return e.map(i=>i.path[0]===":"?this.findPosParam(n,i,o):this.findOrReturn(i,r))}findPosParam(n,e,r){let o=r[e.path.substring(1)];if(!o)throw new Ne(4001,!1);return o}findOrReturn(n,e){let r=0;for(let o of e){if(o.path===n.path)return e.splice(r),o;r++}return n}},GO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pxe(t,n,e,r,o){let i=uq(t,n,e);return i.matched?(r=Fye(n,r),cxe(r,n,e,o).pipe(It(s=>s===!0?i:ue({},GO)))):at(i)}function uq(t,n,e){if(n.path==="**")return hxe(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?ue({},GO):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let o=(n.matcher||$W)(e,t,n);if(!o)return ue({},GO);let i={};Object.entries(o.posParams??{}).forEach(([a,l])=>{i[a]=l.path});let s=o.consumed.length>0?ue(ue({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function hxe(t){return{matched:!0,parameters:t.length>0?jW(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function PW(t,n,e,r){return e.length>0&&gxe(t,e,r)?{segmentGroup:new Vn(n,mxe(r,new Vn(e,t.children))),slicedSegments:[]}:e.length===0&&vxe(t,e,r)?{segmentGroup:new Vn(t.segments,fxe(t,e,r,t.children)),slicedSegments:e}:{segmentGroup:new Vn(t.segments,t.children),slicedSegments:e}}function fxe(t,n,e,r){let o={};for(let i of e)if(aM(t,n,i)&&!r[ml(i)]){let s=new Vn([],{});o[ml(i)]=s}return ue(ue({},r),o)}function mxe(t,n){let e={};e[pn]=n;for(let r of t)if(r.path===""&&ml(r)!==pn){let o=new Vn([],{});e[ml(r)]=o}return e}function gxe(t,n,e){return e.some(r=>aM(t,n,r)&&ml(r)!==pn)}function vxe(t,n,e){return e.some(r=>aM(t,n,r))}function aM(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function wxe(t,n,e){return n.length===0&&!t.children[e]}var WO=class{};function yxe(t,n,e,r,o,i,s="emptyOnly"){return new qO(t,n,e,r,o,s,i).recognize()}var xxe=31,qO=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,r,o,i,s,a){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new UO(this.urlSerializer,this.urlTree)}noMatchError(n){return new Ne(4002,`'${n.segmentGroup}'`)}recognize(){let n=PW(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(It(({children:e,rootSnapshot:r})=>{let o=new Qs(r,e),i=new _x("",o),s=XW(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(n){let e=new $m([],Object.freeze({}),Object.freeze(ue({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),pn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,pn,e).pipe(It(r=>({children:r,rootSnapshot:e})),rd(r=>{if(r instanceof Cx)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof bx?this.noMatchError(r):r}))}processSegmentGroup(n,e,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,e,r,i):this.processSegment(n,e,r,r.segments,o,!0,i).pipe(It(s=>s instanceof Qs?[s]:[]))}processChildren(n,e,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Zn(i).pipe(ha(s=>{let a=r.children[s],l=Pye(e,s);return this.processSegmentGroup(n,l,a,s,o)}),hA((s,a)=>(s.push(...a),s)),oh(null),pA(),lr(s=>{if(s===null)return b1(r);let a=dq(s);return _xe(a),at(a)}))}processSegment(n,e,r,o,i,s,a){return Zn(e).pipe(ha(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,r,o,i,s,a).pipe(rd(c=>{if(c instanceof bx)return at(null);throw c}))),od(l=>!!l),rd(l=>{if(lq(l))return wxe(r,o,i)?at(new WO):b1(r);throw l}))}processSegmentAgainstRoute(n,e,r,o,i,s,a,l){return ml(r)!==s&&(s===pn||!aM(o,i,r))?b1(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,o,r,i,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,o,e,r,i,s,l):b1(o)}expandSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=uq(e,o,i);if(!l)return b1(e);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xxe&&(this.allowRedirects=!1));let h=new $m(i,c,Object.freeze(ue({},this.urlTree.queryParams)),this.urlTree.fragment,BW(o),ml(o),o.component??o._loadedComponent??null,o,LW(o)),f=rM(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(f.params),h.data=Object.freeze(f.data);let m=this.applyRedirects.applyRedirectCommands(u,o.redirectTo,d,h,n);return this.applyRedirects.lineralizeSegments(o,m).pipe(lr(g=>this.processSegment(n,r,e,g.concat(p),s,!1,a)))}matchSegmentAgainstRoute(n,e,r,o,i,s){let a=pxe(e,r,o,n,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(Pr(l=>l.matched?(n=r._injector??n,this.getChildConfig(n,r,o).pipe(Pr(({routes:c})=>{let u=r._loadedInjector??n,{parameters:d,consumedSegments:p,remainingSegments:h}=l,f=new $m(p,d,Object.freeze(ue({},this.urlTree.queryParams)),this.urlTree.fragment,BW(r),ml(r),r.component??r._loadedComponent??null,r,LW(r)),m=rM(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:v}=PW(e,p,h,c);if(v.length===0&&g.hasChildren())return this.processChildren(u,c,g,f).pipe(It(y=>new Qs(f,y)));if(c.length===0&&v.length===0)return at(new Qs(f,[]));let w=ml(r)===i;return this.processSegment(u,c,g,v,w?pn:i,!0,f).pipe(It(y=>new Qs(f,y instanceof Qs?[y]:[])))}))):b1(e)))}getChildConfig(n,e,r){return e.children?at({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?at({routes:e._loadedRoutes,injector:e._loadedInjector}):lxe(n,e,r,this.urlSerializer).pipe(lr(o=>o?this.configLoader.loadChildren(n,e).pipe(Bo(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):dxe(e))):at({routes:[],injector:n})}};function _xe(t){t.sort((n,e)=>n.value.outlet===pn?-1:e.value.outlet===pn?1:n.value.outlet.localeCompare(e.value.outlet))}function kxe(t){let n=t.value.routeConfig;return n&&n.path===""}function dq(t){let n=[],e=new Set;for(let r of t){if(!kxe(r)){n.push(r);continue}let o=n.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),e.add(o)):n.push(r)}for(let r of e){let o=dq(r.children);n.push(new Qs(r.value,o))}return n.filter(r=>!e.has(r))}function BW(t){return t.data||{}}function LW(t){return t.resolve||{}}function bxe(t,n,e,r,o,i){return lr(s=>yxe(t,n,e,r,s.extractedUrl,o,i).pipe(It(({state:a,tree:l})=>pt(ue({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Cxe(t,n){return lr(e=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return at(e);let i=new Set(o.map(l=>l.route)),s=new Set;for(let l of i)if(!s.has(l))for(let c of pq(l))s.add(c);let a=0;return Zn(s).pipe(ha(l=>i.has(l)?Sxe(l,r,t,n):(l.data=rM(l,l.parent,t).resolve,at(void 0))),Bo(()=>a++),$2(1),lr(l=>a===s.size?at(e):ri))})}function pq(t){let n=t.children.map(e=>pq(e)).flat();return[t,...n]}function Sxe(t,n,e,r){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!rq(o)&&(i[Sx]=o.title),Mxe(i,t,n,r).pipe(It(s=>(t._resolvedData=s,t.data=rM(t,t.parent,e).resolve,null)))}function Mxe(t,n,e,r){let o=FO(t);if(o.length===0)return at({});let i={};return Zn(o).pipe(lr(s=>Txe(t[s],n,e,r).pipe(od(),Bo(a=>{if(a instanceof bh)throw oM(new xh,a);i[s]=a}))),$2(1),It(()=>i),rd(s=>lq(s)?ri:P2(s)))}function Txe(t,n,e,r){let o=Mx(n)??r,i=A1(t,o),s=i.resolve?i.resolve(n,e):Vo(o,()=>i(n,e));return Ch(s)}function RO(t){return Pr(n=>{let e=t(n);return e?Zn(e).pipe(It(()=>n)):at(n)})}var XO=(()=>{class t{buildTitle(e){let r,o=e.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===pn);return r}getResolvedTitleForRoute(e){return e.data[Sx]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:()=>I(hq),providedIn:"root"})}return t})(),hq=(()=>{class t extends XO{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Xe(RG))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Um=new Me("",{providedIn:"root",factory:()=>({})}),YO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&Le(0,"router-outlet")},dependencies:[Hm],encapsulation:2})}return t})();function QO(t){let n=t.children&&t.children.map(QO),e=n?pt(ue({},t),{children:n}):ue({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==pn&&(e.component=YO),e}var Gm=new Me(""),lM=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=I(W4);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return at(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Ch(e.loadComponent()).pipe(It(mq),Bo(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),em(()=>{this.componentLoaders.delete(e)})),o=new rh(r,()=>new ot).pipe(R2());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=fq(r,this.compiler,e,this.onLoadEndListener).pipe(em(()=>{this.childrenLoaders.delete(r)})),s=new rh(i,()=>new ot).pipe(R2());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fq(t,n,e,r){return Ch(t.loadChildren()).pipe(It(mq),lr(o=>o instanceof I5||Array.isArray(o)?at(o):Zn(n.compileModuleAsync(o))),It(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(e).injector,s=i.get(Gm,[],{optional:!0,self:!0}).flat()),{routes:s.map(QO),injector:i}}))}function Dxe(t){return t&&typeof t=="object"&&"default"in t}function mq(t){return Dxe(t)?t.default:t}var cM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:()=>I(Exe),providedIn:"root"})}return t})(),Exe=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),JO=new Me(""),eF=new Me("");function gq(t,n,e){let r=t.get(eF),o=t.get(un);return t.get(Pt).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let i,s=new Promise(c=>{i=c}),a=o.startViewTransition(()=>(i(),Ixe(t))),{onViewTransitionCreated:l}=r;return l&&Vo(t,()=>l({transition:a,from:n,to:e})),s})}function Ixe(t){return new Promise(n=>{wi({read:()=>setTimeout(n)},{injector:t})})}var tF=new Me(""),uM=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ot;transitionAbortSubject=new ot;configLoader=I(lM);environmentInjector=I(to);destroyRef=I(jo);urlSerializer=I(jm);rootContexts=I(zm);location=I(hc);inputBindingEnabled=I(Tx,{optional:!0})!==null;titleStrategy=I(XO);options=I(Um,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=I(cM);createViewTransition=I(JO,{optional:!0});navigationErrorHandler=I(tF,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>at(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=o=>this.events.next(new ZS(o)),r=o=>this.events.next(new XS(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(pt(ue({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(e){return this.transitions=new Kn(null),this.transitions.pipe(xn(r=>r!==null),Pr(r=>{let o=!1,i=!1;return at(r).pipe(Pr(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Is.SupersededByNewNavigation),ri;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?pt(ue({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new yc(s.id,this.urlSerializer.serialize(s.rawUrl),c,T1.IgnoredSameUrlNavigation)),s.resolve(!1),ri}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return at(s).pipe(Pr(c=>(this.events.next(new kh(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ri:Promise.resolve(c))),bxe(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Bo(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=pt(ue({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new wx(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:p,extras:h}=s,f=new kh(c,this.urlSerializer.serialize(u),d,p);this.events.next(f);let m=tq(this.rootComponentType).snapshot;return this.currentTransition=r=pt(ue({},s),{targetSnapshot:m,urlAfterRedirects:u,extras:pt(ue({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,at(r)}else{let c="";return this.events.next(new yc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,T1.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ri}}),Bo(s=>{let a=new GS(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),It(s=>(this.currentTransition=r=pt(ue({},s),{guards:Hye(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),exe(this.environmentInjector,s=>this.events.next(s)),Bo(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw oM(this.urlSerializer,s.guardsResult);let a=new WS(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),xn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Is.GuardRejected),!1)),RO(s=>{if(s.guards.canActivateChecks.length!==0)return at(s).pipe(Bo(a=>{let l=new qS(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Pr(a=>{let l=!1;return at(a).pipe(Cxe(this.paramsInheritanceStrategy,this.environmentInjector),Bo({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Is.NoDataFromResolver)}}))}),Bo(a=>{let l=new KS(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),RO(s=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Bo(u=>{l.component=u}),It(()=>{})));for(let u of l.children)c.push(...a(u));return c};return fy(a(s.targetSnapshot.root)).pipe(oh(null),eo(1))}),RO(()=>this.afterPreactivation()),Pr(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?Zn(l).pipe(It(()=>r)):at(r)}),It(s=>{let a=Lye(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=pt(ue({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Bo(()=>{this.events.next(new yx)}),zye(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),eo(1),Bo({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ns(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),en(this.transitionAbortSubject.pipe(Bo(s=>{throw s}))),em(()=>{!o&&!i&&this.cancelNavigationTransition(r,"",Is.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),rd(s=>{if(this.destroyed)return r.resolve(!1),ri;if(i=!0,aq(s))this.events.next(new vc(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),jye(s)?this.events.next(new I1(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new D1(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let l=Vo(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof bh){let{message:c,cancellationCode:u}=oM(this.urlSerializer,l);this.events.next(new vc(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new I1(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return ri}))}))}cancelNavigationTransition(e,r,o){let i=new vc(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Nxe(t){return t!==zS}var vq=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:()=>I(Axe),providedIn:"root"})}return t})(),sM=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},Axe=(()=>{class t extends sM{static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wq=(()=>{class t{urlSerializer=I(jm);options=I(Um,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=I(hc);urlHandlingStrategy=I(cM);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new wc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:o}){let i=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=o??i;return s instanceof wc?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:o}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=e):this.rawUrlTree=o}routerState=tq(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:()=>I(Rxe),providedIn:"root"})}return t})(),Rxe=(()=>{class t extends wq{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof kh?this.updateStateMemento():e instanceof yc?this.commitTransition(r):e instanceof wx?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof yx?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof vc&&(e.code===Is.GuardRejected||e.code===Is.NoDataFromResolver)?this.restoreHistory(r):e instanceof D1?this.restoreHistory(r,!0):e instanceof ns&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||i){let a=this.browserPageId,l=ue(ue({},s),this.generateNgRouterState(o,a));this.location.replaceState(e,"",l)}else{let a=ue(ue({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===e.finalUrl&&i===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dM(t,n){t.events.pipe(xn(e=>e instanceof ns||e instanceof vc||e instanceof D1||e instanceof yc),It(e=>e instanceof ns||e instanceof yc?0:(e instanceof vc?e.code===Is.Redirect||e.code===Is.SupersededByNewNavigation:!1)?2:1),xn(e=>e!==2),eo(1)).subscribe(()=>{n()})}var Oxe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fxe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Go=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=I(YH);stateManager=I(wq);options=I(Um,{optional:!0})||{};pendingTasks=I(hh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=I(uM);urlSerializer=I(jm);location=I(hc);urlHandlingStrategy=I(cM);_events=new ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=I(vq);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=I(Gm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!I(Tx,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new On;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof vc&&r.code!==Is.Redirect&&r.code!==Is.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ns)this.navigated=!0;else if(r instanceof I1){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l=ue({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Nxe(o.source)},s);this.scheduleNavigation(a,zS,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Bxe(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zS,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,o)=>{this.navigateToSyncWithBrowser(e,o,r)})}navigateToSyncWithBrowser(e,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=ue({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(i.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(QO),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=ue(ue({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=YW(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return QW(d,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let o=_h(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,zS,null,r)}navigate(e,r={skipLocationChange:!1}){return Pxe(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let o;if(r===!0?o=ue({},Oxe):r===!1?o=ue({},Fxe):o=r,_h(e))return AW(this.currentUrlTree,e,o);let i=this.parseUrl(e);return AW(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.entries(e).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,p)=>{a=d,l=p});let u=this.pendingTasks.add();return dM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pxe(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new Ne(4008,!1)}function Bxe(t){return!(t instanceof yx)&&!(t instanceof I1)}var R1=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ot;constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof ns&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(_h(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,o,i,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:Qz(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let o=this.renderer,i=this.el.nativeElement;r!==null?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return this.routerLinkInput===null?null:_h(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Ut(Go),Ut(xc),R4("tabindex"),Ut(po),Ut(Mt),Ut(xa))};static \u0275dir=me({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&je("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&At("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",rt],skipLocationChange:[2,"skipLocationChange","skipLocationChange",rt],replaceUrl:[2,"replaceUrl","replaceUrl",rt],routerLink:"routerLink"},features:[uo]})}return t})(),rF=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Xt;constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof ns&&this.update()})}ngAfterContentInit(){at(this.links.changes,at(null)).pipe(pa()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Zn(e).pipe(pa()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=Lxe(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let i=o.urlTree;return i?e.isActive(i,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||t)(Ut(Go),Ut(Mt),Ut(po),Ut(Lr),Ut(R1,8))};static \u0275dir=me({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,i){if(r&1&&_o(i,R1,5),r&2){let s;Mr(s=Tr())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[uo]})}return t})();function Lxe(t){return!!t.paths}var Ex=class{};var yq=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,o,i,s){this.router=e,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(xn(e=>e instanceof ns),ha(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=jy(i.providers,e,`Route: ${i.path}`));let s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return Zn(o).pipe(pa())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(e,r):o=at(null);let i=o.pipe(lr(s=>s===null?at(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Zn([i,s]).pipe(pa())}else return i})}static \u0275fac=function(r){return new(r||t)(Xe(Go),Xe(W4),Xe(to),Xe(Ex),Xe(lM))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xq=new Me(""),$xe=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof kh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ns?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof yc&&e.code===T1.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof E1&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new E1(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){DH()};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();function oF(t,...n){return gm([{provide:Gm,multi:!0,useValue:t},[],{provide:xc,useFactory:_q,deps:[Go]},{provide:H4,multi:!0,useFactory:kq},n.map(e=>e.\u0275providers)])}function _q(t){return t.routerState.root}function O1(t,n){return{\u0275kind:t,\u0275providers:n}}function kq(){let t=I(Yt);return n=>{let e=t.get(ll);if(n!==e.components[0])return;let r=t.get(Go),o=t.get(bq);t.get(iF)===1&&r.initialNavigation(),t.get(Mq,null,mn.Optional)?.setUpPreloading(),t.get(xq,null,mn.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var bq=new Me("",{factory:()=>new ot}),iF=new Me("",{providedIn:"root",factory:()=>1});function Cq(){let t=[{provide:iF,useValue:0},A5(()=>{let n=I(Yt);return n.get(L5,Promise.resolve()).then(()=>new Promise(r=>{let o=n.get(Go),i=n.get(bq);dM(o,()=>{r(!0)}),n.get(uM).afterPreactivation=()=>(r(!0),i.closed?at(void 0):i),o.initialNavigation()}))})];return O1(2,t)}function Sq(){let t=[A5(()=>{I(Go).setUpLocationChangeListener()}),{provide:iF,useValue:2}];return O1(3,t)}var Mq=new Me("");function Tq(t){return O1(0,[{provide:Mq,useExisting:yq},{provide:Ex,useExisting:t}])}function sF(){return O1(6,[{provide:xa,useClass:iS}])}function pM(){return O1(8,[ZO,{provide:Tx,useExisting:ZO}])}function Dq(t){cl("NgRouterViewTransitions");let n=[{provide:JO,useValue:gq},{provide:eF,useValue:ue({skipNextTransition:!!t?.skipInitialTransition},t)}];return O1(9,n)}var Eq=[hc,{provide:jm,useClass:xh},Go,zm,{provide:xc,useFactory:_q,deps:[Go]},lM,[]],Ix=(()=>{class t{constructor(){}static forRoot(e,r){return{ngModule:t,providers:[Eq,[],{provide:Gm,multi:!0,useValue:e},[],r?.errorHandler?{provide:tF,useValue:r.errorHandler}:[],{provide:Um,useValue:r||{}},r?.useHash?jxe():zxe(),Vxe(),r?.preloadingStrategy?Tq(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Hxe(r):[],r?.bindToComponentInputs?pM().\u0275providers:[],r?.enableViewTransitions?Dq().\u0275providers:[],Uxe()]}}static forChild(e){return{ngModule:t,providers:[{provide:Gm,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})}return t})();function Vxe(){return{provide:xq,useFactory:()=>{let t=I(iG),n=I(Pt),e=I(Um),r=I(uM),o=I(jm);return e.scrollOffset&&t.setOffset(e.scrollOffset),new $xe(o,r,t,n,e)}}}function jxe(){return{provide:xa,useClass:iS}}function zxe(){return{provide:xa,useClass:Q4}}function Hxe(t){return[t.initialNavigation==="disabled"?Sq().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Cq().\u0275providers:[]]}var nF=new Me("");function Uxe(){return[{provide:nF,useFactory:kq},{provide:H4,multi:!0,useExisting:nF}]}var Mh=class{},Nq=(()=>{class t extends Mh{getTranslation(e){return at({})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),Ax=class{},Aq=(()=>{class t{handle(e){return e.key}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();function fM(t,n){if(t===n)return!0;if(t===null||n===null)return!1;if(t!==t&&n!==n)return!0;let e=typeof t,r=typeof n,o,i,s;if(e==r&&e=="object")if(Array.isArray(t)){if(!Array.isArray(n))return!1;if((o=t.length)==n.length){for(i=0;i<o;i++)if(!fM(t[i],n[i]))return!1;return!0}}else{if(Array.isArray(n))return!1;s=Object.create(null);for(i in t){if(!fM(t[i],n[i]))return!1;s[i]=!0}for(i in n)if(!(i in s)&&typeof n[i]<"u")return!1;return!0}return!1}function Sh(t){return typeof t<"u"&&t!==null}function Fx(t){return hM(t)&&!hF(t)&&t!==null}function hM(t){return typeof t=="object"}function hF(t){return Array.isArray(t)}function fF(t){return typeof t=="string"}function Gxe(t){return typeof t=="function"}function aF(t,n){let e=Object.assign({},t);return hM(t)?(hM(t)&&hM(n)&&Object.keys(n).forEach(r=>{Fx(n[r])?r in t?e[r]=aF(t[r],n[r]):Object.assign(e,{[r]:n[r]}):Object.assign(e,{[r]:n[r]})}),e):aF({},n)}function lF(t,n){let e=n.split(".");n="";do n+=e.shift(),Sh(t)&&Sh(t[n])&&(Fx(t[n])||hF(t[n])||!e.length)?(t=t[n],n=""):e.length?n+=".":t=void 0;while(e.length);return t}function Wxe(t,n,e){let r=n.split("."),o=t;for(let i=0;i<r.length;i++){let s=r[i];i===r.length-1?o[s]=e:((!o[s]||!Fx(o[s]))&&(o[s]={}),o=o[s])}}var F1=class{},Rq=(()=>{class t extends F1{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,r){if(fF(e))return this.interpolateString(e,r);if(Gxe(e))return this.interpolateFunction(e,r)}interpolateFunction(e,r){return e(r)}interpolateString(e,r){return r?e.replace(this.templateMatcher,(o,i)=>{let s=lF(r,i);return Sh(s)?s:o}):e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),P1=class{},Oq=(()=>{class t extends P1{compile(e,r){return e}compileTranslations(e,r){return e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),Rx=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Xt;onLangChange=new Xt;onDefaultLangChange=new Xt},cF=new Me("ISOLATE_TRANSLATE_SERVICE"),uF=new Me("USE_DEFAULT_LANG"),dF=new Me("DEFAULT_LANGUAGE"),pF=new Me("USE_EXTEND"),Nx=t=>xs(t)?t:at(t),Ox=(()=>{class t{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(e){this.store.defaultLang=e}get currentLang(){return this.store.currentLang}set currentLang(e){this.store.currentLang=e}get langs(){return this.store.langs}set langs(e){this.store.langs=e}get translations(){return this.store.translations}set translations(e){this.store.translations=e}constructor(e,r,o,i,s,a=!0,l=!1,c=!1,u){this.store=e,this.currentLoader=r,this.compiler=o,this.parser=i,this.missingTranslationHandler=s,this.useDefaultLang=a,this.extend=c,l&&(this.store=new Rx),u&&this.setDefaultLang(u)}setDefaultLang(e){if(e===this.defaultLang)return;let r=this.retrieveTranslations(e);typeof r<"u"?(this.defaultLang==null&&(this.defaultLang=e),r.pipe(eo(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return at(this.translations[e]);this.currentLang||(this.currentLang=e);let r=this.retrieveTranslations(e);return xs(r)?(r.pipe(eo(1)).subscribe(()=>{this.changeLang(e)}),r):(this.changeLang(e),at(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;let r=this.currentLoader.getTranslation(e).pipe(tm(1),eo(1));return this.loadingTranslations=r.pipe(It(o=>this.compiler.compileTranslations(o,e)),tm(1),eo(1)),this.loadingTranslations.subscribe({next:o=>{this.translations[e]=this.extend&&this.translations[e]?ue(ue({},o),this.translations[e]):o,this.updateLangs(),this.pending=!1},error:o=>{this.pending=!1}}),r}setTranslation(e,r,o=!1){let i=this.compiler.compileTranslations(r,e);(o||this.extend)&&this.translations[e]?this.translations[e]=aF(this.translations[e],i):this.translations[e]=i,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){let r=e.filter(o=>!this.langs.includes(o));r.length>0&&(this.langs=[...this.langs,...r])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,r,o){let i;if(e&&(i=this.runInterpolation(lF(e,r),o)),i===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(i=this.runInterpolation(lF(this.translations[this.defaultLang],r),o)),i===void 0){let s={key:r,translateService:this};typeof o<"u"&&(s.interpolateParams=o),i=this.missingTranslationHandler.handle(s)}return i!==void 0?i:r}runInterpolation(e,r){if(hF(e))return e.map(o=>this.runInterpolation(o,r));if(Fx(e)){let o={};for(let i in e){let s=this.runInterpolation(e[i],r);s!==void 0&&(o[i]=s)}return o}else return this.parser.interpolate(e,r)}getParsedResult(e,r,o){if(r instanceof Array){let i={},s=!1;for(let l of r)i[l]=this.getParsedResultForKey(e,l,o),s=s||xs(i[l]);if(!s)return i;let a=r.map(l=>Nx(i[l]));return my(a).pipe(It(l=>{let c={};return l.forEach((u,d)=>{c[r[d]]=u}),c}))}return this.getParsedResultForKey(e,r,o)}get(e,r){if(!Sh(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(ha(o=>Nx(this.getParsedResult(o,e,r)))):Nx(this.getParsedResult(this.translations[this.currentLang],e,r))}getStreamOnTranslationChange(e,r){if(!Sh(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return rl(td(()=>this.get(e,r)),this.onTranslationChange.pipe(Pr(o=>{let i=this.getParsedResult(o.translations,e,r);return Nx(i)})))}stream(e,r){if(!Sh(e)||!e.length)throw new Error('Parameter "key" required');return rl(td(()=>this.get(e,r)),this.onLangChange.pipe(Pr(o=>{let i=this.getParsedResult(o.translations,e,r);return Nx(i)})))}instant(e,r){if(!Sh(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let o=this.getParsedResult(this.translations[this.currentLang],e,r);return xs(o)?Array.isArray(e)?e.reduce((i,s)=>(i[s]=s,i),{}):e:o}set(e,r,o=this.currentLang){Wxe(this.translations[o],e,fF(r)?this.compiler.compile(r,o):this.compiler.compileTranslations(r,o)),this.updateLangs(),this.onTranslationChange.emit({lang:o,translations:this.translations[o]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(r){return new(r||t)(Xe(Rx),Xe(Mh),Xe(P1),Xe(F1),Xe(Ax),Xe(uF),Xe(cF),Xe(pF),Xe(dF))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Co=(()=>{class t{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(e,r){this.translate=e,this._ref=r}updateValue(e,r,o){let i=s=>{this.value=s!==void 0?s:e,this.lastKey=e,this._ref.markForCheck()};if(o){let s=this.translate.getParsedResult(o,e,r);xs(s)?s.subscribe(i):i(s)}this.translate.get(e,r).subscribe(i)}transform(e,...r){if(!e||!e.length)return e;if(fM(e,this.lastKey)&&fM(r,this.lastParams))return this.value;let o;if(Sh(r[0])&&r.length)if(fF(r[0])&&r[0].length){let i=r[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{o=JSON.parse(i)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else Fx(r[0])&&(o=r[0]);return this.lastKey=e,this.lastParams=r,this.updateValue(e,o),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(i=>{this.lastKey&&i.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,o,i.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(i=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o,i.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||t)(Ut(Ox,16),Ut(Lr,16))};static \u0275pipe=fh({name:"translate",type:t,pure:!1});static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();var ro=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:Mh,useClass:Nq},e.compiler||{provide:P1,useClass:Oq},e.parser||{provide:F1,useClass:Rq},e.missingTranslationHandler||{provide:Ax,useClass:Aq},Rx,{provide:cF,useValue:e.isolate},{provide:uF,useValue:e.useDefaultLang},{provide:pF,useValue:e.extend},{provide:dF,useValue:e.defaultLanguage},Ox]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:Mh,useClass:Nq},e.compiler||{provide:P1,useClass:Oq},e.parser||{provide:F1,useClass:Rq},e.missingTranslationHandler||{provide:Ax,useClass:Aq},{provide:cF,useValue:e.isolate},{provide:uF,useValue:e.useDefaultLang},{provide:pF,useValue:e.extend},{provide:dF,useValue:e.defaultLanguage},Ox]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})}return t})();var Fq=(()=>{class t{http;prefix;suffix;constructor(e,r="/assets/i18n/",o=".json"){this.http=e,this.prefix=r,this.suffix=o}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}static \u0275fac=function(r){return new(r||t)(Xe(m1),Xe(String),Xe(String))};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();var _c=4e3,Gn=class t{constructor(n){this.translate=n;this.translate.addLangs(this.languageList),this.translate.setDefaultLang("en"),this.language=Ye(localStorage.getItem("language")??this.translate.getBrowserLang()??"en"),Gt(()=>{this.translate.use(this.language()),localStorage.setItem("language",this.language())}),this.grid=Ye(localStorage.getItem("grid")!=="false"),Gt(()=>localStorage.setItem("grid",this.grid().toString())),this.highContrast.set(localStorage.getItem("highContrast")==="true"),Gt(()=>localStorage.setItem("highContrast",this.highContrast().toString())),this._zoom.set(parseFloat(localStorage.getItem("zoom")??"1")??1),Gt(()=>localStorage.setItem("zoom",this._zoom().toString()))}language;languageList=["en","es","fr","pt","it","de"];grid;highContrast=Ye(!1);size=ae(()=>_c);_zoom=Ye(1);zoom=this._zoom.asReadonly();static openFile(n,e){return z(this,null,function*(){let r=document.createElement("input");return r.type="file",r.value="",n&&(r.accept=n),e&&(r.multiple=e),new Promise((o,i)=>{r.onchange=s=>z(this,null,function*(){let a=s.target.files;if(yield new Promise(l=>setTimeout(l,1e3)),a)if(e)o([...a]);else{let l=new FileReader;l.onload=()=>o(l.result),l.readAsText(a[0])}else i();r.remove()}),r.oncancel=()=>i(),r.click()})})}static saveFile(n,e,r){return z(this,null,function*(){let o=new Blob([e],{type:r}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=n,yield new Promise(s=>setTimeout(s,1e3)),i.click(),URL.revokeObjectURL(i.href),i.remove()})}zoomIn(){this._zoom()>=2||this._zoom.set(this._zoom()+.1)}zoomOut(){this._zoom()<=.5||this._zoom.set(this._zoom()-.1)}resetZoom(){this._zoom.set(1)}static \u0275fac=function(e){return new(e||t)(Xe(Ox))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})};var Pq=/\/\*[\s\S]*?\*\/|\/\/.*/g,qxe=/(?:function|const|let|var)\s+((intcp(_router|_iot|_computer)?|cmd_[A-Za-z0-9$_]+|atk_[A-Za-z0-9$_]+))\s*=?\s*\([A-Za-z0-9$_,.\s]*\)\s*(?:=>)?\s*{/g,Kxe=/(?:function|const|let|var)\s+((analyze))\s*=?\s*\([A-Za-z0-9$_,.\s]*\)\s*(?:=>)?\s*{/g,Zxe=/\(([^)]*)\)/,Bq=t=>{t=t.replace(Pq,"");let n=[...t.matchAll(qxe)].map(e=>e[1]);return t=t.concat(`
`,"return { ",n.join(", "),` };
`),new Function(t)},gF=t=>{if(t=t.replace(Pq,""),[...t.matchAll(Kxe)].map(e=>e[1]).length===0)throw new Error("No se encontr\xF3 la funci\xF3n analyze");return t=t.concat(`
`,`return { analyze };
`),new Function("tf","model",t)},mM=t=>{let e=t.toString().match(Zxe);if(!e)return 0;let r=e[1].split(",").map(i=>i.trim());return r.find(i=>i.includes("..."))?1/0:r.length};function Xxe(t,n){t&1&&(ph(),J(0,"svg",0),Le(1,"path",2),re())}function Yxe(t,n){t&1&&(ph(),J(0,"svg",0),Le(1,"path",3),re())}function Qxe(t,n){t&1&&(ph(),J(0,"svg",0),Le(1,"path",4),re())}function Jxe(t,n){t&1&&(ph(),J(0,"svg",1),Le(1,"path",5)(2,"path",6),re())}function e_e(t,n){t&1&&Le(0,"div",2)}var t_e=["toastRef"],Vq=[[["","loading-icon",""]],[["","success-icon",""]],[["","error-icon",""]],[["","warning-icon",""]],[["","info-icon",""]]],jq=["[loading-icon]","[success-icon]","[error-icon]","[warning-icon]","[info-icon]"];function n_e(t,n){if(t&1){let e=bn();J(0,"button",3),je("click",function(){Ge(e);let o=be();return We(o.onCloseButtonClick())}),ph(),J(1,"svg",4),Le(2,"line",5)(3,"line",6),re()()}if(t&2){let e,r=be();Ve(r.cn(r.classes().closeButton,(e=r.toast().classes)==null?null:e.closeButton)),At("data-disabled",r.disabled())}}function r_e(t,n){t&1&&wr(0)}function o_e(t,n){if(t&1&&(lt(0,r_e,1,0,"ng-container",7),Te(1,"asComponent")),t&2){let e=be();Be("ngComponentOutlet",Ee(1,2,e.toast().component))("ngComponentOutletInputs",e.toast().componentProps)}}function i_e(t,n){t&1&&it(0)}function s_e(t,n){t&1&&wr(0)}function a_e(t,n){if(t&1&&(lt(0,s_e,1,0,"ng-container",7),Te(1,"asComponent")),t&2){let e=be(3);Be("ngComponentOutlet",Ee(1,2,e.toast().icon))("ngComponentOutletInputs",e.toast().componentProps)}}function l_e(t,n){t&1&&it(0,1)}function c_e(t,n){t&1&&it(0,2)}function u_e(t,n){t&1&&it(0,3)}function d_e(t,n){t&1&&it(0,4)}function p_e(t,n){if(t&1&&lt(0,l_e,1,0)(1,c_e,1,0)(2,u_e,1,0)(3,d_e,1,0),t&2){let e,r=be(3);Ct((e=r.toastType())==="success"?0:e==="error"?1:e==="warning"?2:e==="info"?3:-1)}}function h_e(t,n){if(t&1&&(J(0,"div",8),lt(1,i_e,1,0)(2,a_e,2,4,"ng-container")(3,p_e,4,1),re()),t&2){let e=be(2);ee(),Ct(e.toastType()==="loading"&&!e.toast().icon?1:-1),ee(),Ct(e.toast().icon?2:3)}}function f_e(t,n){if(t&1&&de(0),t&2){let e=be(3);et(" ",e.toast().title," ")}}function m_e(t,n){t&1&&wr(0)}function g_e(t,n){if(t&1&&(lt(0,m_e,1,0,"ng-container",7),Te(1,"asComponent")),t&2){let e=be(),r=be(2);Be("ngComponentOutlet",Ee(1,2,e))("ngComponentOutletInputs",r.toast().componentProps)}}function v_e(t,n){if(t&1&&(J(0,"div",14),lt(1,f_e,1,1),Te(2,"isString"),lt(3,g_e,2,4,"ng-container"),re()),t&2){let e,r=be(2);Ve(r.cn(r.classes().title,(e=r.toast().classes)==null?null:e.title)),ee(),Ct(Ee(2,3,n)?1:3)}}function w_e(t,n){if(t&1&&de(0),t&2){let e=be(3);et(" ",e.toast().description," ")}}function y_e(t,n){t&1&&wr(0)}function x_e(t,n){if(t&1&&(lt(0,y_e,1,0,"ng-container",7),Te(1,"asComponent")),t&2){let e=be(),r=be(2);Be("ngComponentOutlet",Ee(1,2,e))("ngComponentOutletInputs",r.toast().componentProps)}}function __e(t,n){if(t&1&&(J(0,"div",15),lt(1,w_e,1,1),Te(2,"isString"),lt(3,x_e,2,4,"ng-container"),re()),t&2){let e,r=be(2);Ve(r.cn(r.descriptionClass(),r.toastDescriptionClass(),r.classes().description,(e=r.toast().classes)==null?null:e.description)),ee(),Ct(Ee(2,3,n)?1:3)}}function k_e(t,n){if(t&1){let e=bn();J(0,"button",16),je("click",function(){Ge(e);let o=be(2);return We(o.onCancelClick())}),de(1),re()}if(t&2){let e,r,o=be(2);ud((e=o.cancelButtonStyle())!==null&&e!==void 0?e:o.toast().cancelButtonStyle),Ve(o.cn(o.classes().cancelButton,(r=o.toast().classes)==null?null:r.cancelButton)),ee(),et(" ",n.label," ")}}function b_e(t,n){if(t&1){let e=bn();J(0,"button",17),je("click",function(o){Ge(e);let i=be(2);return We(i.onActionClick(o))}),de(1),re()}if(t&2){let e,r,o=be(2);ud((e=o.actionButtonStyle())!==null&&e!==void 0?e:o.toast().actionButtonStyle),Ve(o.cn(o.classes().actionButton,(r=o.toast().classes)==null?null:r.actionButton)),ee(),et(" ",n.label," ")}}function C_e(t,n){if(t&1&&(lt(0,h_e,4,2,"div",8),J(1,"div",9),lt(2,v_e,4,5,"div",10)(3,__e,4,5,"div",11),re(),lt(4,k_e,2,5,"button",12)(5,b_e,2,5,"button",13)),t&2){let e,r,o,i,s=be();Ct(s.toastType()!=="default"||s.toast().icon||s.toast().promise?0:-1),ee(2),Ct((e=s.toast().title)?2:-1,e),ee(),Ct((r=s.toast().description)?3:-1,r),ee(),Ct((o=s.toast().cancel)?4:-1,o),ee(),Ct((i=s.toast().action)?5:-1,i)}}var S_e=["listRef"],M_e=()=>({}),T_e=(t,n)=>n.id;function D_e(t,n){if(t&1&&Le(0,"ngx-sonner-loader",6),t&2){let e=be().$implicit;Be("isVisible",e.type==="loading")}}function E_e(t,n){t&1&&Le(0,"ngx-sonner-icon",7)}function I_e(t,n){t&1&&Le(0,"ngx-sonner-icon",8)}function N_e(t,n){t&1&&Le(0,"ngx-sonner-icon",9)}function A_e(t,n){t&1&&Le(0,"ngx-sonner-icon",10)}function R_e(t,n){if(t&1&&(J(0,"ngx-sonner-toast",5),it(1,0,["loading-icon",""],D_e,1,1),it(3,1,["success-icon",""],E_e,1,0),it(5,2,["error-icon",""],I_e,1,0),it(7,3,["warning-icon",""],N_e,1,0),it(9,4,["info-icon",""],A_e,1,0),re()),t&2){let e,r,o,i,s,a=n.$implicit,l=n.$index,c=be(3);Ve((e=c.toastOptions().class)!==null&&e!==void 0?e:""),Be("index",l)("toast",a)("invert",c.invert())("visibleToasts",c.visibleToasts())("closeButton",c.closeButton())("interacting",c.interacting())("position",c.position())("expandByDefault",c.expand())("expanded",c.expanded())("actionButtonStyle",c.toastOptions().actionButtonStyle)("cancelButtonStyle",c.toastOptions().cancelButtonStyle)("descriptionClass",(r=c.toastOptions().descriptionClass)!==null&&r!==void 0?r:"")("classes",(o=c.toastOptions().classes)!==null&&o!==void 0?o:xU(17,M_e))("duration",(i=c.toastOptions().duration)!==null&&i!==void 0?i:c.duration())("unstyled",(s=c.toastOptions().unstyled)!==null&&s!==void 0?s:!1)}}function O_e(t,n){if(t&1){let e=bn();J(0,"ol",3,0),je("blur",function(o){Ge(e);let i=be(2);return We(i.handleBlur(o))})("focus",function(o){Ge(e);let i=be(2);return We(i.handleFocus(o))})("mouseenter",function(){Ge(e);let o=be(2);return We(o.expanded.set(!0))})("mousemove",function(){Ge(e);let o=be(2);return We(o.expanded.set(!0))})("mouseleave",function(){Ge(e);let o=be(2);return We(o.handleMouseLeave())})("pointerdown",function(o){Ge(e);let i=be(2);return We(i.handlePointerDown(o))})("pointerup",function(){Ge(e);let o=be(2);return We(o.interacting.set(!1))}),zo(2,R_e,11,18,"ngx-sonner-toast",4,T_e),Te(4,"toastFilter"),re()}if(t&2){let e=n.$implicit,r=n.$index,o=be(2);ud(o.toasterStyles()),Ve(o._class()),Be("tabIndex",-1),At("data-theme",o.actualTheme())("data-rich-colors",o.richColors())("dir",o.dir()==="auto"?o.getDocumentDirection():o.dir())("data-y-position",e.split("-")[0])("data-x-position",e.split("-")[1]),ee(2),Ho(EU(4,10,o.toasts(),r,e))}}function F_e(t,n){if(t&1&&(J(0,"section",1),zo(1,O_e,5,14,"ol",2,gU),re()),t&2){let e=be();Be("tabIndex",-1),At("aria-label","Notifications "+e.hotKeyLabel()),ee(),Ho(e.possiblePositions())}}var Lq=0;function P_e(){let t=Ye([]),n=Ye([]);function e(v){t.update(w=>[v,...w])}function r(v){let A=v,{message:w}=A,y=Uf(A,["message"]),_=typeof v?.id=="number"||v.id&&v.id?.length>0?v.id:Lq++,k=v.dismissible??!0,M=v.type??"default";return t().find(P=>P.id===_)?t.update(P=>P.map(N=>N.id===_?pt(ue(ue({},N),v),{id:_,title:w,dismissible:k,type:M,updated:!0}):pt(ue({},N),{updated:!1}))):e(pt(ue({},y),{id:_,title:w,dismissible:k,type:M})),_}function o(v){if(v===void 0){t.set([]);return}return t.update(w=>w.filter(y=>y.id!==v)),v}function i(v,w){return r(pt(ue({},w),{type:"default",message:v}))}function s(v,w){return r(pt(ue({},w),{type:"error",message:v}))}function a(v,w){return r(pt(ue({},w),{type:"success",message:v}))}function l(v,w){return r(pt(ue({},w),{type:"info",message:v}))}function c(v,w){return r(pt(ue({},w),{type:"warning",message:v}))}function u(v,w){return r(pt(ue({},w),{type:"loading",message:v}))}function d(v,w){if(!w)return;let y;w.loading!==void 0&&(y=r(pt(ue({},w),{promise:v,type:"loading",message:w.loading})));let _=v instanceof Promise?v:v(),k=y!==void 0;return _.then(M=>{if(M&&typeof M.ok=="boolean"&&!M.ok){k=!1;let E=typeof w.error=="function"?w.error(`HTTP error! status: ${M.status}`):w.error;r({id:y,type:"error",message:E})}else if(w.success!==void 0){k=!1;let E=typeof w.success=="function"?w.success(M):w.success;r({id:y,type:"success",message:E})}}).catch(M=>{if(w.error!==void 0){k=!1;let E=typeof w.error=="function"?w.error(M):w.error;r({id:y,type:"error",message:E})}}).finally(()=>{k&&(o(y),y=void 0),w.finally?.()}),y}function p(v,w){let y=w?.id??Lq++;return r(ue({component:v,id:y},w)),y}function h(v){n.update(w=>w.filter(y=>y.toastId!==v))}function f(v){n.update(w=>[v,...w].sort(m))}let m=(v,w)=>t().findIndex(y=>y.id===v.toastId)-t().findIndex(y=>y.id===w.toastId);function g(){t.set([]),n.set([])}return{create:r,addToast:e,dismiss:o,message:i,error:s,success:a,info:l,warning:c,loading:u,promise:d,custom:p,removeHeight:h,addHeight:f,reset:g,toasts:t.asReadonly(),heights:n.asReadonly()}}var ai=P_e();function B_e(t,n){return ai.create(ue({message:t},n))}var L_e=B_e,Ns=Object.assign(L_e,{success:ai.success,info:ai.info,warning:ai.warning,error:ai.error,custom:ai.custom,message:ai.message,promise:ai.promise,dismiss:ai.dismiss,loading:ai.loading}),$_e=(()=>{class t{constructor(){this.type=Y("default")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Oe({type:t,selectors:[["ngx-sonner-icon"]],inputs:{type:[1,"type"]},decls:4,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","height","20","width","20"],["viewBox","0 0 64 64","fill","currentColor","height","20","width","20","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule","evenodd"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z","clip-rule","evenodd"],["d","M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"],["d","M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"]],template:function(r,o){if(r&1&&lt(0,Xxe,2,0,":svg:svg",0)(1,Yxe,2,0,":svg:svg",0)(2,Qxe,2,0,":svg:svg",0)(3,Jxe,3,0,":svg:svg",1),r&2){let i;Ct((i=o.type())==="success"?0:i==="error"?1:i==="info"?2:i==="warning"?3:-1)}},encapsulation:2,changeDetection:0})}}return t})(),V_e=3,j_e="32px",gM=4e3,z_e=356,zq=14,H_e=20,U_e=200,G_e={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""},W_e=(()=>{class t{constructor(){this.isVisible=Y.required({transform:rt}),this.bars=Array(12).fill(0)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Oe({type:t,selectors:[["ngx-sonner-loader"]],inputs:{isVisible:[1,"isVisible"]},decls:4,vars:1,consts:[[1,"sonner-loading-wrapper"],[1,"sonner-spinner"],[1,"sonner-loading-bar"]],template:function(r,o){r&1&&(J(0,"div",0)(1,"div",1),zo(2,e_e,1,0,"div",2,Ss),re()()),r&2&&(At("data-visible",o.isVisible()),ee(2),Ho(o.bars))},encapsulation:2,changeDetection:0})}}return t})(),q_e=(()=>{class t{transform(e,r,o){return e.filter(i=>!i.position&&r===0||i.position===o)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=fh({name:"toastFilter",type:t,pure:!0})}}return t})();function $q(...t){return t.filter(Boolean).join(" ")}var K_e=(()=>{class t{transform(e){return e}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=fh({name:"asComponent",type:t,pure:!0})}}return t})(),Z_e=(()=>{class t{transform(e){return typeof e=="string"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=fh({name:"isString",type:t,pure:!0})}}return t})(),X_e=(()=>{class t{constructor(){this.cn=$q,this.toasts=ai.toasts,this.heights=ai.heights,this.removeHeight=ai.removeHeight,this.addHeight=ai.addHeight,this.dismiss=ai.dismiss,this.toast=Y.required(),this.index=Y.required(),this.expanded=Y.required(),this._invert=Y.required({alias:"invert"}),this.position=Y.required(),this.visibleToasts=Y.required(),this.expandByDefault=Y.required(),this._closeButton=Y.required({alias:"closeButton"}),this.interacting=Y.required(),this.cancelButtonStyle=Y(),this.actionButtonStyle=Y(),this.duration=Y(gM),this.descriptionClass=Y(""),this._classes=Y({},{alias:"classes"}),this.unstyled=Y(!1),this._class=Y("",{alias:"class"}),this._style=Y({},{alias:"style"}),this.mounted=Ye(!1),this.removed=Ye(!1),this.swiping=Ye(!1),this.swipeOut=Ye(!1),this.offsetBeforeRemove=Ye(0),this.initialHeight=Ye(0),this.toastRef=oi.required("toastRef"),this.classes=ae(()=>ue(ue({},G_e),this._classes())),this.isFront=ae(()=>this.index()===0),this.isVisible=ae(()=>this.index()+1<=this.visibleToasts()),this.toastType=ae(()=>this.toast().type??"default"),this.toastClass=ae(()=>this.toast().class??""),this.toastPosition=ae(()=>this.toast().position??this.position()),this.toastDescriptionClass=ae(()=>this.toast().descriptionClass??""),this.heightIndex=ae(()=>this.heights().findIndex(e=>e.toastId===this.toast().id)),this.offset=K4({source:()=>({heightIndex:this.heightIndex(),toastsHeightBefore:this.toastsHeightBefore()}),computation:({heightIndex:e,toastsHeightBefore:r})=>Math.round(e*zq+r)}),this.closeTimerStartTimeRef=0,this.lastCloseTimerStartTimeRef=0,this.pointerStartRef=null,this.coords=ae(()=>this.toastPosition().split("-")),this.toastsHeightBefore=ae(()=>this.heights().reduce((e,r,o)=>o>=this.heightIndex()?e:e+r.height,0)),this.invert=ae(()=>this.toast().invert??this._invert()),this.closeButton=ae(()=>this.toast().closeButton??this._closeButton()),this.disabled=ae(()=>this.toastType()==="loading"),this.remainingTime=0,this.isPromiseLoadingOrInfiniteDuration=ae(()=>this.toast().promise&&this.toastType()==="loading"||this.toast().duration===Number.POSITIVE_INFINITY),this.toastClasses=ae(()=>$q(this._class(),this.toastClass(),this.classes().toast,this.toast().classes?.toast,this.classes()[this.toastType()],this.toast().classes?.[this.toastType()])),this.toastStyle=ae(()=>ue({"--index":`${this.index()}`,"--toasts-before":`${this.index()}`,"--z-index":`${this.toasts().length-this.index()}`,"--offset":`${this.removed()?this.offsetBeforeRemove():this.offset()}px`,"--initial-height":this.expandByDefault()?"auto":`${this.initialHeight()}px`},this._style())),Gt(()=>{this.toast().updated&&(clearTimeout(this.timeoutId),this.remainingTime=this.toast().duration??this.duration()??gM,this.startTimer())}),P5(e=>{this.isPromiseLoadingOrInfiniteDuration()||(this.expanded()||this.interacting()?this.pauseTimer():this.startTimer()),e(()=>clearTimeout(this.timeoutId))}),Gt(()=>{this.toast().delete&&this.deleteToast()})}ngAfterViewInit(){this.remainingTime=this.toast().duration??this.duration()??gM,this.mounted.set(!0);let e=this.toastRef().nativeElement.getBoundingClientRect().height;this.initialHeight.set(e),this.addHeight({toastId:this.toast().id,height:e})}ngOnDestroy(){clearTimeout(this.timeoutId),this.removeHeight(this.toast().id)}deleteToast(){this.removed.set(!0),this.offsetBeforeRemove.set(this.offset()),this.removeHeight(this.toast().id),setTimeout(()=>{this.dismiss(this.toast().id)},U_e)}pauseTimer(){if(this.lastCloseTimerStartTimeRef<this.closeTimerStartTimeRef){let e=new Date().getTime()-this.closeTimerStartTimeRef;this.remainingTime=this.remainingTime-e}this.lastCloseTimerStartTimeRef=new Date().getTime()}startTimer(){this.closeTimerStartTimeRef=new Date().getTime(),this.timeoutId=setTimeout(()=>{this.toast().onAutoClose?.(this.toast()),this.deleteToast()},this.remainingTime)}onPointerDown(e){if(this.disabled()||!this.toast().dismissible)return;this.offsetBeforeRemove.set(this.offset());let r=e.target;r.setPointerCapture(e.pointerId),r.tagName!=="BUTTON"&&(this.swiping.set(!0),this.pointerStartRef={x:e.clientX,y:e.clientY})}onPointerUp(){if(this.swipeOut()||!this.toast().dismissible)return;this.pointerStartRef=null;let e=Number(this.toastRef().nativeElement.style.getPropertyValue("--swipe-amount").replace("px","")||0);if(Math.abs(e)>=H_e){this.offsetBeforeRemove.set(this.offset()),this.toast().onDismiss?.(this.toast()),this.deleteToast(),this.swipeOut.set(!0);return}this.toastRef().nativeElement.style.setProperty("--swipe-amount","0px"),this.swiping.set(!1)}onPointerMove(e){if(!this.pointerStartRef||!this.toast().dismissible)return;let r=e.clientY-this.pointerStartRef.y,o=e.clientX-this.pointerStartRef.x,s=(this.coords()[0]==="top"?Math.min:Math.max)(0,r),a=e.pointerType==="touch"?10:2;Math.abs(s)>a?this.toastRef().nativeElement.style.setProperty("--swipe-amount",`${r}px`):Math.abs(o)>a&&(this.pointerStartRef=null)}onCloseButtonClick(){this.disabled()||!this.toast().dismissible||(this.deleteToast(),this.toast().onDismiss?.(this.toast()))}onCancelClick(){let e=this.toast();e.dismissible&&(this.deleteToast(),e.cancel?.onClick&&e.cancel.onClick())}onActionClick(e){this.toast().action?.onClick(e),!e.defaultPrevented&&this.deleteToast()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Oe({type:t,selectors:[["ngx-sonner-toast"]],viewQuery:function(r,o){r&1&&si(o.toastRef,t_e,5),r&2&&no()},inputs:{toast:[1,"toast"],index:[1,"index"],expanded:[1,"expanded"],_invert:[1,"invert","_invert"],position:[1,"position"],visibleToasts:[1,"visibleToasts"],expandByDefault:[1,"expandByDefault"],_closeButton:[1,"closeButton","_closeButton"],interacting:[1,"interacting"],cancelButtonStyle:[1,"cancelButtonStyle"],actionButtonStyle:[1,"actionButtonStyle"],duration:[1,"duration"],descriptionClass:[1,"descriptionClass"],_classes:[1,"classes","_classes"],unstyled:[1,"unstyled"],_class:[1,"class","_class"],_style:[1,"style","_style"]},ngContentSelectors:jq,decls:5,vars:22,consts:[["toastRef",""],["data-sonner-toast","","aria-atomic","true","role","status","tabindex","0",3,"pointerdown","pointerup","pointermove"],["aria-label","Close toast","data-close-button","",3,"class"],["aria-label","Close toast","data-close-button","",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","12","height","12","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[4,"ngComponentOutlet","ngComponentOutletInputs"],["data-icon",""],["data-content",""],["data-title","",3,"class"],["data-description","",3,"class"],["data-button","","data-cancel","",3,"style","class"],["data-button","",3,"style","class"],["data-title",""],["data-description",""],["data-button","","data-cancel","",3,"click"],["data-button","",3,"click"]],template:function(r,o){if(r&1){let i=bn();Rt(Vq),J(0,"li",1,0),je("pointerdown",function(a){return Ge(i),We(o.onPointerDown(a))})("pointerup",function(){return Ge(i),We(o.onPointerUp())})("pointermove",function(a){return Ge(i),We(o.onPointerMove(a))}),lt(2,n_e,4,3,"button",2)(3,o_e,2,4,"ng-container")(4,C_e,6,5),re()}r&2&&(ud(o.toastStyle()),Ve(o.toastClasses()),At("aria-live",o.toast().important?"assertive":"polite")("data-styled",!(o.toast().component||o.toast().unstyled||o.unstyled()))("data-mounted",o.mounted())("data-promise",!!o.toast().promise)("data-removed",o.removed())("data-visible",o.isVisible())("data-y-position",o.coords()[0])("data-x-position",o.coords()[1])("data-index",o.index())("data-front",o.isFront())("data-swiping",o.swiping())("data-dismissible",o.toast().dismissible)("data-type",o.toastType())("data-invert",o.invert())("data-swipe-out",o.swipeOut())("data-expanded",o.expanded()||o.expandByDefault()&&o.mounted()),ee(2),Ct(o.closeButton()&&!o.toast().component?2:-1),ee(),Ct(o.toast().component?3:4))},dependencies:[Ky,Z_e,K_e],encapsulation:2,changeDetection:0})}}return t})(),Hq=(()=>{class t{constructor(){this.platformId=I(xo),this.toasts=ai.toasts,this.heights=ai.heights,this.reset=ai.reset,this.invert=Y(!1,{transform:rt}),this.theme=Y("light"),this.position=Y("bottom-right"),this.hotKey=Y(["altKey","KeyT"]),this.richColors=Y(!1,{transform:rt}),this.expand=Y(!1,{transform:rt}),this.duration=Y(gM,{transform:Xs}),this.visibleToasts=Y(V_e,{transform:Xs}),this.closeButton=Y(!1,{transform:rt}),this.toastOptions=Y({}),this.offset=Y(null),this.dir=Y(this.getDocumentDirection()),this._class=Y("",{alias:"class"}),this._style=Y({},{alias:"style"}),this.possiblePositions=ae(()=>Array.from(new Set([this.position(),...this.toasts().filter(e=>e.position).map(e=>e.position)].filter(Boolean)))),this.expanded=K4({source:this.toasts,computation:e=>e.length<1}),this.actualTheme=K4({source:this.theme,computation:e=>this.getActualTheme(e)}),this.interacting=Ye(!1),this.listRef=oi("listRef"),this.lastFocusedElementRef=Ye(null),this.isFocusWithinRef=Ye(!1),this.hotKeyLabel=ae(()=>this.hotKey().join("+").replace(/Key/g,"").replace(/Digit/g,"")),this.toasterStyles=ae(()=>ue({"--front-toast-height":`${this.heights()[0]?.height}px`,"--offset":typeof this.offset()=="number"?`${this.offset()}px`:this.offset()??`${j_e}`,"--width":`${z_e}px`,"--gap":`${zq}px`},this._style())),this.handleKeydown=e=>{let r=this.listRef()?.nativeElement;if(!r)return;this.hotKey().every(i=>e[i]||e.code===i)&&(this.expanded.set(!0),r.focus()),e.code==="Escape"&&(document.activeElement===r||r.contains(document.activeElement))&&this.expanded.set(!1)},this.handleThemePreferenceChange=({matches:e})=>{this.theme()==="system"&&this.actualTheme.set(e?"dark":"light")},this.reset(),Ys(this.platformId)&&(document.addEventListener("keydown",this.handleKeydown),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.handleThemePreferenceChange))}ngOnDestroy(){Ys(this.platformId)&&(document.removeEventListener("keydown",this.handleKeydown),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this.handleThemePreferenceChange))}handleBlur(e){this.isFocusWithinRef()&&!e.target.contains(e.relatedTarget)&&(this.isFocusWithinRef.set(!1),this.lastFocusedElementRef()&&(this.lastFocusedElementRef()?.focus({preventScroll:!0}),this.lastFocusedElementRef.set(null)))}handleFocus(e){e.target instanceof HTMLElement&&e.target.dataset.dismissible==="false"||this.isFocusWithinRef()||(this.isFocusWithinRef.set(!0),this.lastFocusedElementRef.set(e.relatedTarget))}handlePointerDown(e){e.target instanceof HTMLElement&&e.target.dataset.dismissible==="false"||this.interacting.set(!0)}handleMouseLeave(){this.interacting()||this.expanded.set(!1)}getActualTheme(e){return e!=="system"?e:Ys(this.platformId)&&window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}getDocumentDirection(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return!e||e==="auto"?window.getComputedStyle(document.documentElement).direction:e}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Oe({type:t,selectors:[["ngx-sonner-toaster"]],viewQuery:function(r,o){r&1&&si(o.listRef,S_e,5),r&2&&no()},inputs:{invert:[1,"invert"],theme:[1,"theme"],position:[1,"position"],hotKey:[1,"hotKey"],richColors:[1,"richColors"],expand:[1,"expand"],duration:[1,"duration"],visibleToasts:[1,"visibleToasts"],closeButton:[1,"closeButton"],toastOptions:[1,"toastOptions"],offset:[1,"offset"],dir:[1,"dir"],_class:[1,"class","_class"],_style:[1,"style","_style"]},ngContentSelectors:jq,decls:1,vars:1,consts:[["listRef",""],[3,"tabIndex"],["data-sonner-toaster","",3,"tabIndex","class","style"],["data-sonner-toaster","",3,"blur","focus","mouseenter","mousemove","mouseleave","pointerdown","pointerup","tabIndex"],[3,"index","toast","invert","visibleToasts","closeButton","interacting","position","expandByDefault","expanded","actionButtonStyle","cancelButtonStyle","class","descriptionClass","classes","duration","unstyled"],[3,"index","toast","invert","visibleToasts","closeButton","interacting","position","expandByDefault","expanded","actionButtonStyle","cancelButtonStyle","descriptionClass","classes","duration","unstyled"],[3,"isVisible"],["type","success"],["type","error"],["type","warning"],["type","info"]],template:function(r,o){r&1&&(Rt(Vq),lt(0,F_e,3,2,"section",1)),r&2&&Ct(o.toasts().length>0?0:-1)},dependencies:[X_e,q_e,$_e,W_e],styles:[`html[dir=ltr],[data-sonner-toaster][dir=ltr]{--toast-icon-margin-start: var(--ngx-sonner-toast-icon-margin-start, -3px);--toast-icon-margin-end: var(--ngx-sonner-toast-icon-margin-end, 4px);--toast-svg-margin-start: var(--ngx-sonner-toast-svg-margin-start,-1px);--toast-svg-margin-end: var(--ngx-sonner-toast-svg-margin-end, 0px);--toast-button-margin-start: var(--ngx-sonner-toast-button-margin-start, auto);--toast-button-margin-end: var(--ngx-sonner-toast-button-margin-end, 0);--toast-close-button-start: var(--ngx-sonner-toast-close-button-start, 0);--toast-close-button-end: var(--ngx-sonner-toast-close-button-end, unset);--toast-close-button-transform: var(--ngx-sonner-toast-close-button-transform, translate(-35%, -35%))}html[dir=rtl],[data-sonner-toaster][dir=rtl]{--toast-icon-margin-start: var(--ngx-sonner-rtl-toast-icon-margin-start, 4px);--toast-icon-margin-end: var(--ngx-sonner-rtl-toast-icon-margin-end, -3px);--toast-svg-margin-start: var(--ngx-sonner-rtl-toast-svg-margin-start, 0px);--toast-svg-margin-end: var(--ngx-sonner-rtl-toast-svg-margin-end, -1px);--toast-button-margin-start: var(--ngx-sonner-rtl-toast-button-margin-start, 0);--toast-button-margin-end: var(--ngx-sonner-rtl-toast-button-margin-end, auto);--toast-close-button-start: var(--ngx-sonner-rtl-toast-close-button-start, unset);--toast-close-button-end: var(--ngx-sonner-rtl-toast-close-button-end, 0);--toast-close-button-transform: var(--ngx-sonner-rtl-toast-close-button-transform, translate(35%, -35%))}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:var(--ngx-sonner-font-family, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji);--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: var(--ngx-sonner-border-radius, 8px);box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:var(--ngx-sonner-toast-focus-box-shadow, 0 0 0 2px rgba(0, 0, 0, .4))}[data-sonner-toast] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast] [data-cancel]{color:var(--normal-text);background:#00000014}[data-sonner-toast][data-theme=dark] [data-cancel]{background:#ffffff4d}[data-sonner-toast] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--ngx-sonner-toast-close-button-background, var(--gray1));color:var(--ngx-sonner-toast-close-button-color, var(--gray12));border:var(--ngx-sonner-toast-close-button-border, 1px solid var(--gray4));transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--ngx-sonner-toast-close-button-hover-background, var(--gray2));color:var(--ngx-sonner-toast-close-button-hover-color, var(--gray12));border-color:var(--ngx-sonner-toast-close-button-hover-border-color, var(--gray5))}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: var(--ngx-sonner-toast-normal-background, #fff);--normal-border: var(--ngx-sonner-toast-normal-border-color, var(--gray4));--normal-text: var(--ngx-sonner-toast-normal-color, var(--gray12));--success-bg: var(--ngx-sonner-toast-success-background, hsl(143, 85%, 96%));--success-border: var(--ngx-sonner-toast-success-border, hsl(145, 92%, 91%));--success-text: var(--ngx-sonner-toast-success-color, hsl(140, 100%, 27%));--info-bg: var(--ngx-sonner-toast-info-background, hsl(208, 100%, 97%));--info-border: var(--ngx-sonner-toast-info-border, hsl(221, 91%, 91%));--info-text: var(--ngx-sonner-toast-info-color, hsl(210, 92%, 45%));--warning-bg: var(--ngx-sonner-toast-warning-background, hsl(49, 100%, 97%));--warning-border: var(--ngx-sonner-toast-warning-border, hsl(49, 91%, 91%));--warning-text: var(--ngx-sonner-toast-warning-color, hsl(31, 92%, 45%));--error-bg: var(--ngx-sonner-toast-error-background, hsl(359, 100%, 97%));--error-border: var(--ngx-sonner-toast-error-border, hsl(359, 100%, 94%));--error-text: var(--ngx-sonner-toast-error-color, hsl(360, 100%, 45%))}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: var(--ngx-sonner-toast-inverse-normal-background, #000);--normal-border: var(--ngx-sonner-toast-inverse-normal-border-color, hsl(0, 0%, 20%));--normal-text: var(--ngx-sonner-toast-inverse-normal-color, var(--gray1))}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: var(--ngx-sonner-toast-inverse-dark-normal-background, #fff);--normal-border: var(--ngx-sonner-toast-inverse-dark-normal-border-color, var(--gray3));--normal-text: var(--ngx-sonner-toast-inverse-dark-normal-color, var(--gray12))}[data-sonner-toaster][data-theme=dark]{--normal-bg: var(--ngx-sonner-toast-dark-normal-background, #000);--normal-border: var(--ngx-sonner-toast-dark-normal-border-color, hsl(0, 0%, 20%));--normal-text: var(--ngx-sonner-toast-dark-normal-color, var(--gray1));--success-bg: var(--ngx-sonner-toast-dark-success-background, hsl(150, 100%, 6%));--success-border: var(--ngx-sonner-toast-dark-success-border, hsl(147, 100%, 12%));--success-text: var(--ngx-sonner-toast-dark-success-color, hsl(150, 86%, 65%));--info-bg: var(--ngx-sonner-toast-dark-info-background, hsl(215, 100%, 6%));--info-border: var(--ngx-sonner-toast-dark-info-border, hsl(223, 100%, 12%));--info-text: var(--ngx-sonner-toast-dark-info-color, hsl(216, 87%, 65%));--warning-bg: var(--ngx-sonner-toast-dark-warning-background, hsl(64, 100%, 6%));--warning-border: var(--ngx-sonner-toast-dark-warning-border, hsl(60, 100%, 12%));--warning-text: var(--ngx-sonner-toast-dark-warning-color, hsl(46, 87%, 65%));--error-bg: var(--ngx-sonner-toast-dark-error-background, hsl(358, 76%, 10%));--error-border: var(--ngx-sonner-toast-dark-error-border, hsl(357, 89%, 16%));--error-text: var(--ngx-sonner-toast-dark-error-color, hsl(358, 100%, 81%))}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=info],[data-rich-colors=true] [data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true] [data-sonner-toast][data-type=warning],[data-rich-colors=true] [data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`],encapsulation:2,changeDetection:0})}}return t})();var vl=class t{constructor(n){this.config=n;let e=localStorage.getItem("library");e&&this._load(e)}static _instance;static get instance(){return t._instance}_library=void 0;get library(){return this._library}_librarySubject=new Kn(void 0);get library$(){return this._librarySubject.asObservable()}static init(n){return t.instance||(t._instance=new t(n)),t.instance}_load(n){this._library=Bq(n),this._librarySubject.next(this._library),localStorage.setItem("library",n)}loadFromFile(){Ns.promise(Gn.openFile(".js").then(n=>this._load(n)),{loading:this.config.translate.instant("LIBRARY_LOADING"),success:()=>this.config.translate.instant("LIBRARY_LOADED"),error:n=>(console.error(n),this.config.translate.instant("LIBRARY_NOT_LOADED"))})}deleteFile(){localStorage.removeItem("library"),this._library=void 0,this._librarySubject.next(this._library),Ns.success(this.config.translate.instant("LIBRARY_DELETED"))}static \u0275fac=function(e){return new(e||t)(Xe(Gn))};static \u0275prov=ke({token:t,factory:t.\u0275fac})};var l$={};Qt(l$,{Abs:()=>vd,Acos:()=>Sc,Acosh:()=>Mc,AdadeltaOptimizer:()=>Jh,AdagradOptimizer:()=>ef,AdamOptimizer:()=>tf,AdamaxOptimizer:()=>nf,Add:()=>Ca,AddN:()=>wd,All:()=>Zm,Any:()=>Xm,ArgMax:()=>yd,ArgMin:()=>xd,Asin:()=>Tc,Asinh:()=>Dc,Atan:()=>Ec,Atan2:()=>Nc,Atanh:()=>Ic,AvgPool:()=>_d,AvgPool3D:()=>kd,AvgPool3DGrad:()=>Qm,AvgPoolGrad:()=>Ym,BatchMatMul:()=>bd,BatchToSpaceND:()=>Cd,Bincount:()=>Jm,BitwiseAnd:()=>Eh,BroadcastArgs:()=>eg,BroadcastTo:()=>SF,Callback:()=>wk,CallbackList:()=>nk,Cast:()=>yl,Ceil:()=>Ac,ClipByValue:()=>Rc,Complex:()=>tg,ComplexAbs:()=>Sd,Concat:()=>Md,Conv2D:()=>Td,Conv2DBackpropFilter:()=>ng,Conv2DBackpropInput:()=>Dd,Conv3D:()=>Ed,Conv3DBackpropFilterV2:()=>rg,Conv3DBackpropInputV2:()=>og,Cos:()=>Oc,Cosh:()=>Fc,CropAndResize:()=>sg,Cumprod:()=>ig,Cumsum:()=>Id,CustomCallback:()=>ok,DataStorage:()=>Th,DenseBincount:()=>ag,DepthToSpace:()=>lg,DepthwiseConv2dNative:()=>Nd,DepthwiseConv2dNativeBackpropFilter:()=>cg,DepthwiseConv2dNativeBackpropInput:()=>ug,Diag:()=>dg,Dilation2D:()=>Ad,Dilation2DBackpropFilter:()=>H1,Dilation2DBackpropInput:()=>z1,Draw:()=>U1,ENV:()=>yM,EarlyStopping:()=>yk,Einsum:()=>pg,Elu:()=>Bc,EluGrad:()=>hg,Environment:()=>j1,Equal:()=>Ih,Erf:()=>Lc,Exp:()=>$c,ExpandDims:()=>Rd,Expm1:()=>Vc,FFT:()=>fg,Fill:()=>mg,FlipLeftRight:()=>gg,Floor:()=>jc,FloorDiv:()=>zc,FromPixels:()=>G1,FusedBatchNorm:()=>Od,FusedConv2D:()=>Vh,FusedDepthwiseConv2D:()=>jh,GPGPUContext:()=>yf,GatherNd:()=>vg,GatherV2:()=>Fd,GraphModel:()=>Av,Greater:()=>Nh,GreaterEqual:()=>Hc,History:()=>rk,IFFT:()=>wg,Identity:()=>xl,Imag:()=>yg,InputSpec:()=>Rn,IsFinite:()=>Uc,IsInf:()=>Gc,IsNan:()=>Wc,KernelBackend:()=>kc,LRN:()=>Bd,LRNGrad:()=>_g,LayerVariable:()=>xv,LayersModel:()=>ja,LeakyRelu:()=>Pd,Less:()=>Ah,LessEqual:()=>Rh,LinSpace:()=>xg,Log:()=>qc,Log1p:()=>Kc,LogSoftmax:()=>MF,LogicalAnd:()=>Oh,LogicalNot:()=>Fh,LogicalOr:()=>Ph,LogicalXor:()=>yke,LowerBound:()=>xke,MathBackendCPU:()=>HD,MathBackendWebGL:()=>HE,MatrixBandPart:()=>_ke,Max:()=>Ld,MaxPool:()=>$d,MaxPool3D:()=>Vd,MaxPool3DGrad:()=>bg,MaxPoolGrad:()=>kg,MaxPoolWithArgmax:()=>Cg,Maximum:()=>Zc,Mean:()=>jd,Min:()=>zd,Minimum:()=>Xc,MirrorPad:()=>Hd,Mod:()=>Yc,MomentumOptimizer:()=>rf,Multinomial:()=>Sg,Multiply:()=>Qc,Neg:()=>Ud,NonMaxSuppressionV3:()=>Mg,NonMaxSuppressionV4:()=>Tg,NonMaxSuppressionV5:()=>Dg,NotEqual:()=>Bh,OP_SCOPE_SUFFIX:()=>EM,OneHot:()=>Wd,OnesLike:()=>Gd,Optimizer:()=>Zo,OptimizerConstructors:()=>pv,Pack:()=>qd,PadV2:()=>Kd,Pool:()=>kke,Pow:()=>Jc,Prelu:()=>Zd,Prod:()=>Xd,RMSPropOptimizer:()=>of,RNN:()=>zl,RaggedGather:()=>Eg,RaggedRange:()=>Ig,RaggedTensorToTensor:()=>Ng,Range:()=>Ag,Rank:()=>FF,Real:()=>Rg,RealDiv:()=>Pc,Reciprocal:()=>eu,Reduction:()=>Er,Relu:()=>tu,Relu6:()=>nu,Reshape:()=>Yd,ResizeBilinear:()=>Jd,ResizeBilinearGrad:()=>Fg,ResizeNearestNeighbor:()=>Qd,ResizeNearestNeighborGrad:()=>Og,Reverse:()=>ep,RotateWithOffset:()=>Qg,Round:()=>ru,Rsqrt:()=>ou,SGDOptimizer:()=>Mu,ScatterNd:()=>Pg,SearchSorted:()=>Lg,Select:()=>tp,Selu:()=>iu,Sequential:()=>pk,Sigmoid:()=>cu,Sign:()=>lu,Sin:()=>su,Sinh:()=>au,Slice:()=>np,Softmax:()=>sp,Softplus:()=>uu,SpaceToBatchND:()=>op,SparseFillEmptyRows:()=>$g,SparseReshape:()=>Vg,SparseSegmentMean:()=>jg,SparseSegmentSum:()=>zg,SparseToDense:()=>Hg,SplitV:()=>ip,Sqrt:()=>du,Square:()=>Ug,SquaredDifference:()=>pu,StaticRegexReplace:()=>Lh,Step:()=>gu,StridedSlice:()=>Gg,StringNGrams:()=>Wg,StringSplit:()=>qg,StringToHashBucketFast:()=>Kg,Sub:()=>hu,Sum:()=>rp,SymbolicTensor:()=>pi,Tan:()=>fu,Tanh:()=>mu,Tensor:()=>Ot,TensorBuffer:()=>wn,TensorScatterUpdate:()=>Bg,Tile:()=>_l,TopK:()=>Zg,Transform:()=>Xg,Transpose:()=>kl,Unique:()=>Yg,Unpack:()=>ap,UnsortedSegmentSum:()=>lp,UpperBound:()=>bke,Variable:()=>wu,ZerosLike:()=>cp,_FusedMatMul:()=>$h,abs:()=>jn,acos:()=>Zx,acosh:()=>Xx,add:()=>fe,addN:()=>YF,all:()=>u0,any:()=>qh,argMax:()=>Tl,argMin:()=>Yx,asin:()=>Qx,asinh:()=>Jx,atan:()=>e_,atan2:()=>t_,atanh:()=>n_,avgPool:()=>fp,avgPool3d:()=>i_,backend:()=>Wx,backend_util:()=>O,basicLSTMCell:()=>t6,batchNorm:()=>Dl,batchNorm2d:()=>s_,batchNorm3d:()=>a_,batchNorm4d:()=>l_,batchToSpaceND:()=>mp,bincount:()=>c_,bitwiseAnd:()=>n6,booleanMaskAsync:()=>DZ,broadcastArgs:()=>r6,broadcastTo:()=>El,broadcast_util:()=>os,browser:()=>Z_,buffer:()=>st,callbacks:()=>lee,cast:()=>ge,ceil:()=>u_,clipByValue:()=>ho,clone:()=>xi,complex:()=>Pi,concat:()=>gn,concat1d:()=>d_,concat2d:()=>p_,concat3d:()=>h_,concat4d:()=>f_,constraints:()=>B8,conv1d:()=>p0,conv2d:()=>Li,conv2dTranspose:()=>h0,conv3d:()=>m_,conv3dTranspose:()=>g_,copyRegisteredKernels:()=>Tke,cos:()=>gp,cosh:()=>f0,cosineWindow:()=>uv,cumprod:()=>Kh,cumsum:()=>m0,customGrad:()=>ki,data:()=>dL,denseBincount:()=>sv,deprecationWarn:()=>MK,depthToSpace:()=>v_,depthwiseConv2d:()=>Il,deregisterOp:()=>dee,device_util:()=>up,diag:()=>o6,dilation2d:()=>w_,disableDeprecationWarnings:()=>Jke,dispose:()=>gt,disposeVariables:()=>ebe,div:()=>$e,divNoNan:()=>y_,dot:()=>x_,dropout:()=>UM,einsum:()=>vp,elu:()=>Nl,enableDebugMode:()=>Qke,enableProdMode:()=>Yke,enclosingPowerOfTwo:()=>GM,engine:()=>na,ensureShape:()=>i6,env:()=>Q,equal:()=>Mo,erf:()=>g0,euclideanNorm:()=>k_,exp:()=>pr,expandDims:()=>hr,expm1:()=>b_,eye:()=>Zh,fft:()=>Tp,fill:()=>ia,findBackend:()=>ibe,findBackendFactory:()=>sbe,floor:()=>Al,floorDiv:()=>c0,forceHalfFloat:()=>j7,fused:()=>Ep,gather:()=>Rl,gatherND:()=>RZ,gather_util:()=>s8,getBackend:()=>jF,getGradient:()=>xM,getKernel:()=>Jg,getKernelsForBackend:()=>$x,gpgpu_util:()=>FE,grad:()=>iZ,grads:()=>sZ,greater:()=>Xn,greaterEqual:()=>_i,ifft:()=>Su,imag:()=>wp,image:()=>Ci,inTopKAsync:()=>FZ,initializers:()=>L8,input:()=>WT,io:()=>Xr,irfft:()=>I0,isFinite:()=>C_,isInf:()=>S_,isNaN:()=>M_,keep:()=>Wn,kernel_impls:()=>Xo,layers:()=>oB,leakyRelu:()=>yp,less:()=>bu,lessEqual:()=>is,linalg:()=>tT,linspace:()=>u6,loadGraphModel:()=>Hee,loadGraphModelSync:()=>Uee,loadLayersModel:()=>Mv,localResponseNormalization:()=>T_,log:()=>mo,log1p:()=>xp,logSigmoid:()=>E_,logSoftmax:()=>v0,logSumExp:()=>_p,logicalAnd:()=>Do,logicalNot:()=>kp,logicalOr:()=>w0,logicalXor:()=>I_,losses:()=>CX,lowerBound:()=>d6,matMul:()=>Bt,math:()=>i8,max:()=>fo,maxPool:()=>bp,maxPool3d:()=>N_,maxPoolWithArgmax:()=>p6,maximum:()=>$i,mean:()=>Pn,memory:()=>J1,meshgrid:()=>h6,metrics:()=>iB,min:()=>_u,minimum:()=>Fs,mirrorPad:()=>A_,mod:()=>R_,model:()=>HJ,models:()=>sB,moments:()=>Xh,movingAverage:()=>EZ,mul:()=>L,multiRNNCell:()=>f6,multinomial:()=>m6,neg:()=>Kt,nextFrame:()=>hv,norm:()=>ku,notEqual:()=>Na,oneHot:()=>Ol,ones:()=>Dr,onesLike:()=>io,op:()=>D,outerProduct:()=>g6,pad:()=>bi,pad1d:()=>v6,pad2d:()=>w6,pad3d:()=>y6,pad4d:()=>x6,pool:()=>O_,pow:()=>Ko,prelu:()=>Sp,print:()=>Kx,prod:()=>F_,profile:()=>tbe,raggedGather:()=>_6,raggedRange:()=>k6,raggedTensorToTensor:()=>b6,rand:()=>C6,randomGamma:()=>F6,randomNormal:()=>Yh,randomStandardNormal:()=>P6,randomUniform:()=>ss,randomUniformInt:()=>B6,range:()=>Fl,ready:()=>rbe,real:()=>Cu,reciprocal:()=>B_,registerBackend:()=>Gx,registerCallbackConstructor:()=>GJ,registerGradient:()=>TF,registerKernel:()=>q1,registerOp:()=>uee,regularizers:()=>aB,relu:()=>Eo,relu6:()=>_0,removeBackend:()=>obe,reshape:()=>$,reverse:()=>qr,reverse1d:()=>L6,reverse2d:()=>$6,reverse3d:()=>V6,reverse4d:()=>j6,rfft:()=>Dp,round:()=>k0,rsqrt:()=>b0,scalar:()=>ze,scatterND:()=>IZ,scatter_util:()=>z_,searchSorted:()=>av,selu:()=>C0,separableConv2d:()=>S0,sequential:()=>UJ,serialization:()=>ve,setBackend:()=>TK,setPlatform:()=>abe,setWebGLContext:()=>mE,setdiff1dAsync:()=>z6,shared:()=>Nk,sigmoid:()=>ui,sign:()=>L_,signal:()=>bX,sin:()=>M0,sinh:()=>T0,slice:()=>Nt,slice1d:()=>D0,slice2d:()=>lv,slice3d:()=>E0,slice4d:()=>Qh,slice_util:()=>go,softmax:()=>Mp,softplus:()=>Ia,spaceToBatchND:()=>Cp,sparse:()=>SX,sparseToDense:()=>AZ,spectral:()=>kX,split:()=>Kr,sqrt:()=>En,square:()=>zt,squaredDifference:()=>N0,squeeze:()=>as,stack:()=>Yn,step:()=>sa,stridedSlice:()=>$_,string:()=>MX,sub:()=>Pe,sum:()=>He,sumOutType:()=>Uh,tan:()=>V_,tanh:()=>Da,tensor:()=>Wr,tensor1d:()=>Qn,tensor2d:()=>Aa,tensor3d:()=>j_,tensor4d:()=>H6,tensor5d:()=>U6,tensor6d:()=>G6,tensorScatterUpdate:()=>q6,tensor_util:()=>ta,test_util:()=>O6,tidy:()=>ne,tile:()=>To,time:()=>nbe,topk:()=>H_,train:()=>sf,transpose:()=>Lt,truncatedNormal:()=>A0,unique:()=>U_,unregisterGradient:()=>Mke,unregisterKernel:()=>Ske,unsortedSegmentSum:()=>R0,unstack:()=>Zr,upcastType:()=>Vr,upperBound:()=>K6,util:()=>x,valueAndGrad:()=>aZ,valueAndGrads:()=>lZ,variable:()=>G_,variableGrads:()=>D_,version:()=>x7e,version_converter:()=>MD,version_core:()=>sT,version_cpu:()=>cE,version_layers:()=>df,version_webgl:()=>UE,webgl:()=>l8e,webgl_util:()=>e2,where:()=>Nn,whereAsync:()=>W_,zeros:()=>Bn,zerosLike:()=>dt});var Th=class{constructor(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)}set(n,e){this.dataIdsCount++,this.data.set(n,e)}has(n){return this.data.has(n)}delete(n){return this.dataIdsCount--,this.data.delete(n)}numDataIds(){return this.dataIdsCount}},kc=class{refCount(n){return As("refCount")}incRef(n){return As("incRef")}timerAvailable(){return!0}time(n){return As("time")}read(n){return As("read")}readSync(n){return As("readSync")}readToGPU(n,e){return As("readToGPU")}numDataIds(){return As("numDataIds")}disposeData(n,e){return As("disposeData")}write(n,e,r){return As("write")}move(n,e,r,o,i){return As("move")}createTensorFromGPUData(n,e,r){return As("createTensorFromGPUData")}memory(){return As("memory")}floatPrecision(){return As("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return As("dispose")}};function As(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Uq(t){let n=t.length,e=0;for(;n>0;)e=Math.random()*n|0,n--,vM(t,n,e)}function Q_e(t,n){if(t.length!==n.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${n.length}`);let e=t.length,r=0;for(;e>0;)r=Math.random()*e|0,e--,vM(t,e,r),vM(n,e,r)}function B1(t,n,e){return Math.max(t,Math.min(n,e))}function J_e(t){return t%2===0?t:t+1}function vM(t,n,e){let r=t[n];t[n]=t[e],t[e]=r}function eke(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}function tke(t,n){let e=Math.random();return n*e+(1-e)*t}function nke(t,n){let e=0;for(let r=0;r<t.length;r++){let o=Number(t[r])-Number(n[r]);e+=o*o}return e}function F(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function nr(t,n,e=""){F(Oi(t,n),()=>e+` Shapes ${t} and ${n} must match`)}function ea(t){F(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function nn(t){if(t.length===0)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function rke(t){return t.length===0}function vF(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==null&&n[e]!==null&&t[e]!==n[e])return!1;return!0}function Oi(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function gd(t){return t%1===0}function oke(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let n=Math.exp(2*t);return(n-1)/(n+1)}}function ike(t){let n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function ske(t){let n=new Uint32Array(t);for(let e=0;e<t;++e)n[e]=e;return Uq(n),n}function qm(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function ake(t,n=o=>0,e,r){return new Promise((o,i)=>{let s=0,a=()=>{if(t()){o();return}s++;let l=n(s);if(e!=null&&s>=e){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function lke(t,n){let e=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(n>0&&n!==e)throw Error(`Size(${n}) must match the product of shape ${t}`);return t}if(e===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(n%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${n} / ${e}`);let o=t.slice();return o[r]=n/e,o}function oo(t,n){let e=n.length;return t=t==null?n.map((r,o)=>o):[].concat(t),F(t.every(r=>r>=-e&&r<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${t}`),F(t.every(r=>gd(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?e+r:r)}function wF(t,n){let e=[],r=[],o=n!=null&&Array.isArray(n)&&n.length===0,i=n==null||o?null:oo(n,t).sort(),s=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[s]==null||i[s]>a)&&t[a]===1&&(e.push(t[a]),r.push(a)),i[s]<=a&&s++}t[a]!==1&&(e.push(t[a]),r.push(a))}return{newShape:e,keptDims:r}}function yF(t,n){return wM(t,n)}function wM(t,n){let e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else if(t==="string")e=new Array(n);else throw new Error(`Unknown data type ${t}`);return e}function xF(t,n){for(let e=0;e<t.length;e++){let r=t[e];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${n} being uploaded contains ${r}.`)}}function _F(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function cke(t,n){return!(n==="complex64"||n==="float32"&&t!=="complex64"||n==="int32"&&t!=="float32"&&t!=="complex64"||n==="bool"&&t==="bool")}function L1(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function kF(t){if(t==null)return 0;let n=0;return t.forEach(e=>n+=e.length),n}function wl(t){return typeof t=="string"||t instanceof String}function Gq(t){return typeof t=="boolean"}function Wq(t){return typeof t=="number"}function Dh(t){return Array.isArray(t)?Dh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":Wq(t)?"float32":wl(t)?"string":Gq(t)?"bool":"float32"}function bc(t){return!!(t&&t.constructor&&t.call&&t.apply)}function $1(t,n){for(let e=n;e<t;++e)if(t%e===0)return e;return t}function Cc(t){let n=t.length;if(n<2)return[];let e=new Array(n-1);e[n-2]=t[n-1];for(let r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function qq(t,n,e,r=!1){let o=new Array;if(n.length===1){let i=n[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=e[t+s]}else{let i=n[0],s=n.slice(1),a=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)o[l]=qq(t+l*a,s,e,r)}return o}function Wm(t,n,e=!1){if(t.length===0)return n[0];let r=t.reduce((o,i)=>o*i)*(e?2:1);if(r===0)return[];if(r!==n.length)throw new Error(`[${t}] does not match the input size ${n.length}${e?" for a complex tensor":""}.`);return qq(0,t,n,e)}function uke(t,n){if(Array.isArray(t))return t;if(n==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(n==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(n==="bool"||n==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${n}`)}function Px(t,n){let e=V1(t,n);for(let r=0;r<e.length;r++)e[r]=1;return e}function V1(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${n}`)}function dke(t,n){let e=t.reduce((r,o)=>r*o,1);if(n==null||n==="float32")return Wm(t,new Float32Array(e));if(n==="int32")return Wm(t,new Int32Array(e));if(n==="bool")return Wm(t,new Uint8Array(e));throw new Error(`Unknown data type ${n}`)}function ur(t){t.forEach(n=>{F(Number.isInteger(n)&&n>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function pke(t,n,e){if(n===0)return 0;if(n===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=e[o]*t[o];return r}function hke(t,n,e){if(n===0)return[];if(n===1)return[t];let r=new Array(n);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/e[o]),t-=r[o]*e[o];return r[r.length-1]=t,r}function Km(t){return t&&t.then&&typeof t.then=="function"}var Kq="tfjsflags",j1=class{constructor(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=mke,this.populateURLFlags()}setPlatform(n,e){this.platform!=null&&(Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=n,this.platform=e}registerFlag(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){let o=this.urlFlags[n];Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn(`Setting feature override from URL ${n}: ${o}.`),this.set(n,o)}}getAsync(n){return z(this,null,function*(){return n in this.flags?this.flags[n]:(this.flags[n]=yield this.evaluateFlag(n),this.flags[n])})}get(n){if(n in this.flags)return this.flags[n];let e=this.evaluateFlag(n);if(Km(e))throw new Error(`Flag ${n} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[n]=e,this.flags[n]}getNumber(n){return this.get(n)}getBool(n){return this.get(n)}getString(n){return this.get(n)}getFlags(){return this.flags}get features(){return this.flags}set(n,e){if(this.flagRegistry[n]==null)throw new Error(`Cannot set flag ${n} as it has not been registered.`);this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)}evaluateFlag(n){if(this.flagRegistry[n]==null)throw new Error(`Cannot evaluate flag '${n}': no evaluation function found.`);return this.flagRegistry[n].evaluationFn()}setFlags(n){this.flags=Object.assign({},n)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let n=this.getQueryParams(this.global.location.search);Kq in n&&n[Kq].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=vke(o,i)})}};function mke(t){let n={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...r)=>(gke(n,r[0],r[1]),r.join("="))),n}function gke(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function vke(t,n){let e=n.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:n}function Q(){return yM}var yM=null;function Zq(t){yM=t}var bF;function CF(){if(bF==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");bF=t}return bF}function wke(){let t=CF();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function Bx(t,n){let e=wke();if(e.has(t))return e.get(t);{let r=n();return e.set(t,r),e.get(t)}}var vd="Abs",Sc="Acos",Mc="Acosh",Ca="Add",wd="AddN",Zm="All",Xm="Any",yd="ArgMax",xd="ArgMin",Tc="Asin",Dc="Asinh",Ec="Atan",Ic="Atanh",Nc="Atan2",_d="AvgPool",Ym="AvgPoolGrad",kd="AvgPool3D",Qm="AvgPool3DGrad",bd="BatchMatMul",Cd="BatchToSpaceND",Jm="Bincount",Eh="BitwiseAnd",SF="BroadcastTo",eg="BroadcastArgs",yl="Cast",Ac="Ceil",Rc="ClipByValue",tg="Complex",Sd="ComplexAbs",Md="Concat",Td="Conv2D",ng="Conv2DBackpropFilter",Dd="Conv2DBackpropInput",Ed="Conv3D",rg="Conv3DBackpropFilterV2",og="Conv3DBackpropInputV2",Oc="Cos",Fc="Cosh",ig="Cumprod",Id="Cumsum",sg="CropAndResize",ag="DenseBincount",lg="DepthToSpace",Nd="DepthwiseConv2dNative",cg="DepthwiseConv2dNativeBackpropFilter",ug="DepthwiseConv2dNativeBackpropInput",dg="Diag",Ad="Dilation2D",z1="Dilation2DBackpropInput",H1="Dilation2DBackpropFilter",U1="Draw",Pc="RealDiv",pg="Einsum",Bc="Elu",hg="EluGrad",Lc="Erf",Ih="Equal",$c="Exp",Rd="ExpandDims",Vc="Expm1",fg="FFT",mg="Fill",gg="FlipLeftRight",jc="Floor",zc="FloorDiv",Od="FusedBatchNorm",Fd="GatherV2",vg="GatherNd",Nh="Greater",Hc="GreaterEqual",xl="Identity",wg="IFFT",yg="Imag",Uc="IsFinite",Gc="IsInf",Wc="IsNan",Pd="LeakyRelu",Ah="Less",Rh="LessEqual",xg="LinSpace",qc="Log",Kc="Log1p",Oh="LogicalAnd",Fh="LogicalNot",Ph="LogicalOr",yke="LogicalXor",MF="LogSoftmax",xke="LowerBound",Bd="LRN",_g="LRNGrad",_ke="MatrixBandPart",Ld="Max",Zc="Maximum",$d="MaxPool",kg="MaxPoolGrad",Vd="MaxPool3D",bg="MaxPool3DGrad",Cg="MaxPoolWithArgmax",jd="Mean",zd="Min",Xc="Minimum",Hd="MirrorPad",Yc="Mod",Sg="Multinomial",Qc="Multiply",Ud="Neg",Bh="NotEqual",Mg="NonMaxSuppressionV3",Tg="NonMaxSuppressionV4",Dg="NonMaxSuppressionV5",Gd="OnesLike",Wd="OneHot",qd="Pack",Kd="PadV2",kke="Pool",Jc="Pow",Zd="Prelu",Xd="Prod",Eg="RaggedGather",Ig="RaggedRange",Ng="RaggedTensorToTensor",Ag="Range",Rg="Real",eu="Reciprocal",tu="Relu",Yd="Reshape",Qd="ResizeNearestNeighbor",Og="ResizeNearestNeighborGrad",Jd="ResizeBilinear",Fg="ResizeBilinearGrad",nu="Relu6",ep="Reverse",ru="Round",ou="Rsqrt",Pg="ScatterNd",Bg="TensorScatterUpdate",Lg="SearchSorted",tp="Select",iu="Selu",np="Slice",su="Sin",au="Sinh",lu="Sign",cu="Sigmoid",uu="Softplus",du="Sqrt",rp="Sum",op="SpaceToBatchND",ip="SplitV",sp="Softmax",$g="SparseFillEmptyRows",Vg="SparseReshape",jg="SparseSegmentMean",zg="SparseSegmentSum",Hg="SparseToDense",pu="SquaredDifference",Ug="Square",Lh="StaticRegexReplace",Gg="StridedSlice",Wg="StringNGrams",qg="StringSplit",Kg="StringToHashBucketFast",hu="Sub",fu="Tan",mu="Tanh",_l="Tile",Zg="TopK",Xg="Transform",kl="Transpose",Yg="Unique",ap="Unpack",lp="UnsortedSegmentSum",bke="UpperBound",cp="ZerosLike",gu="Step",G1="FromPixels",Qg="RotateWithOffset",$h="_FusedMatMul",Vh="FusedConv2D",jh="FusedDepthwiseConv2D";function vu(...t){Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn(...t)}function Cke(...t){Q().getBool("IS_TEST")||Q().getBool("PROD")||console.log(...t)}var W1=Bx("kernelRegistry",()=>new Map),Lx=Bx("gradRegistry",()=>new Map);function Jg(t,n){let e=DF(t,n);return W1.get(e)}function xM(t){return Lx.get(t)}function $x(t){let n=W1.entries(),e=[];for(;;){let{done:r,value:o}=n.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===t&&e.push(s)}return e}function q1(t){let{kernelName:n,backendName:e}=t,r=DF(n,e);W1.has(r)&&vu(`The kernel '${n}' for backend '${e}' is already registered`),W1.set(r,t)}function TF(t){let{kernelName:n}=t;Lx.has(n)&&Q().getBool("DEBUG")&&vu(`Overriding the gradient for '${n}'`),Lx.set(n,t)}function Ske(t,n){let e=DF(t,n);if(!W1.has(e))throw new Error(`The kernel '${t}' for backend '${n}' is not registered`);W1.delete(e)}function Mke(t){if(!Lx.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Lx.delete(t)}function Tke(t,n){$x(t).forEach(r=>{let o=Object.assign({},r,{backendName:n});q1(o)})}function DF(t,n){return`${n}_${t}`}var x={};Qt(x,{arraysEqual:()=>Oi,arraysEqualWithNull:()=>vF,assert:()=>F,assertNonNegativeIntegerDimensions:()=>ur,assertNonNull:()=>ea,assertShapesMatch:()=>nr,bytesFromStringArray:()=>kF,bytesPerElement:()=>L1,checkConversionForErrors:()=>xF,clamp:()=>B1,computeStrides:()=>Cc,convertBackendValuesAndArrayBuffer:()=>uke,createScalarValue:()=>Oke,createShuffledIndices:()=>ske,decodeString:()=>Y1,distSquared:()=>nke,encodeString:()=>Hh,fetch:()=>Pke,fingerPrint64:()=>Rke,flatten:()=>Cl,getArrayFromDType:()=>wM,getTypedArrayFromDType:()=>yF,hasEncodingLoss:()=>cke,hexToLong:()=>Vx,indexToLoc:()=>hke,inferDtype:()=>Dh,inferFromImplicitShape:()=>lke,isBoolean:()=>Gq,isFunction:()=>bc,isInt:()=>gd,isNumber:()=>Wq,isPromise:()=>Km,isScalarShape:()=>rke,isString:()=>wl,isTypedArray:()=>$r,isValidDtype:()=>_F,locToIndex:()=>pke,makeOnesTypedArray:()=>Px,makeZerosNestedTypedArray:()=>dke,makeZerosTypedArray:()=>V1,nearestDivisor:()=>$1,nearestLargerEven:()=>J_e,now:()=>o0,parseAxisParam:()=>oo,randUniform:()=>tke,repeatedTry:()=>ake,rightPad:()=>qm,shuffle:()=>Uq,shuffleCombo:()=>Q_e,sizeFromShape:()=>nn,sizeToSquarishShape:()=>ike,squeezeShape:()=>wF,sum:()=>eke,swap:()=>vM,tanh:()=>oke,toNestedArray:()=>Wm,toTypedArray:()=>X1});function _M(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var AF=S2(aK());var r0=AF.default||AF;function Vx(t){return r0.fromString(t,!0,16)}var cK=Vx("c3a5c85c97cb3127"),n0=Vx("b492b66fbe98f273"),Fi=Vx("9ae16a3b2f90404f");function NF(t){return t.xor(t.shru(47))}function uK(t,n,e){let r=t.slice(n,n+e);return r0.fromBytes(Array.from(r),!0,!0)}function dr(t,n){return uK(t,n,8)}function lK(t,n){return uK(t,n,4)}function Wo(t,n){return n===0?t:t.shru(n).or(t.shl(64-n))}function zh(t,n,e=Vx("9ddfea08eb382d69")){let r=t.xor(n).mul(e);r=r.xor(r.shru(47));let o=n.xor(r).mul(e);return o=o.xor(o.shru(47)),o=o.mul(e),o}function Eke(t,n,e,r,o,i){o=o.add(t),i=Wo(i.add(o).add(r),21);let s=o;return o=o.add(n),o=o.add(e),i=i.add(Wo(o,44)),[o.add(r),i.add(s)]}function bM(t,n,e,r){return Eke(dr(t,n),dr(t,n+8),dr(t,n+16),dr(t,n+24),e,r)}function Ike(t,n=t.length){if(n>=8){let e=Fi.add(n*2),r=dr(t,0).add(Fi),o=dr(t,n-8),i=Wo(o,37).mul(e).add(r),s=Wo(r,25).add(o).mul(e);return zh(i,s,e)}if(n>=4){let e=Fi.add(n*2),r=lK(t,0);return zh(r.shl(3).add(n),lK(t,n-4),e)}if(n>0){let e=t[0],r=t[n>>1],o=t[n-1],i=e+(r<<8),s=n+(o<<2);return NF(Fi.mul(i).xor(cK.mul(s))).mul(Fi)}return Fi}function Nke(t,n=t.length){let e=Fi.add(n*2),r=dr(t,0).mul(n0),o=dr(t,8),i=dr(t,n-8).mul(e),s=dr(t,n-16).mul(Fi);return zh(Wo(r.add(o),43).add(Wo(i,30)).add(s),r.add(Wo(o.add(Fi),18)).add(i),e)}function Ake(t,n=t.length){let e=Fi.add(n*2),r=dr(t,0).mul(Fi),o=dr(t,8),i=dr(t,n-8).mul(e),s=dr(t,n-16).mul(Fi),a=Wo(r.add(o),43).add(Wo(i,30)).add(s),l=zh(a,r.add(Wo(o.add(Fi),18)).add(i),e),c=dr(t,16).mul(e),u=dr(t,24),d=a.add(dr(t,n-32)).mul(e),p=l.add(dr(t,n-24)).mul(e);return zh(Wo(c.add(u),43).add(Wo(d,30)).add(p),c.add(Wo(u.add(r),18)).add(d),e)}function Rke(t,n=t.length){let e=r0.fromNumber(81,!0);if(n<=32)return n<=16?Ike(t,n):Nke(t,n);if(n<=64)return Ake(t,n);let r=e,o=e.mul(n0).add(113),i=NF(o.mul(Fi).add(113)).mul(Fi),s=[r0.UZERO,r0.UZERO],a=[r0.UZERO,r0.UZERO];r=r.mul(Fi).add(dr(t,0));let l=0,c=(n-1>>6)*64,u=c+(n-1&63)-63;do r=Wo(r.add(o).add(s[0]).add(dr(t,l+8)),37).mul(n0),o=Wo(o.add(s[1]).add(dr(t,l+48)),42).mul(n0),r=r.xor(a[1]),o=o.add(s[0]).add(dr(t,l+40)),i=Wo(i.add(a[0]),33).mul(n0),s=bM(t,l,s[1].mul(n0),r.add(a[0])),a=bM(t,l+32,i.add(a[1]),o.add(dr(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);let d=n0.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(n-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=Wo(r.add(o).add(s[0]).add(dr(t,l+8)),37).mul(d),o=Wo(o.add(s[1]).add(dr(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(dr(t,l+40))),i=Wo(i.add(a[0]),33).mul(d),s=bM(t,l,s[1].mul(d),r.add(a[0])),a=bM(t,l+32,i.add(a[1]),o.add(dr(t,l+16))),[i,r]=[r,i],zh(zh(s[0],a[0],d).add(NF(o).mul(cK)).add(i),zh(s[1],a[1],d).add(r),d)}function Oke(t,n){return n==="string"?Hh(t):X1([t],n)}function Fke(t,n){return t instanceof Float32Array&&n==="float32"||t instanceof Int32Array&&n==="int32"||t instanceof Uint8Array&&n==="bool"}function X1(t,n){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Cl(t)),Q().getBool("DEBUG")&&xF(t,n),Fke(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){let e=new Uint8Array(t.length);for(let r=0;r<e.length;++r)Math.round(t[r])!==0&&(e[r]=1);return e}else throw new Error(`Unknown data type ${n}`)}function o0(){return Q().platform.now()}function Pke(t,n){return Q().platform.fetch(t,n)}function Hh(t,n="utf-8"){return n=n||"utf-8",Q().platform.encode(t,n)}function Y1(t,n="utf-8"){return n=n||"utf-8",Q().platform.decode(t,n)}function $r(t){return Q().platform.isTypedArray!=null?Q().platform.isTypedArray(t):_M(t)}function Cl(t,n=[],e=!1){if(n==null&&(n=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Km(t)||t==null||$r(t)&&e)n.push(t);else if(Array.isArray(t)||$r(t))for(let r=0;r<t.length;++r)Cl(t[r],n,e);else{let r=-1;for(let o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)Cl(t[o],n,e)}return n}var CM=class{constructor(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new RF)}profileKernel(n,e,r){let o,i=()=>{o=r()},s,a=o0();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:o0()-a})}if(Q().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let u=o[c];u.data().then(d=>{Bke(d,u.dtype,n)})}return{kernelName:n,outputs:o,inputs:e,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(n){let{kernelName:e,outputs:r,timeMs:o,inputs:i,extraInfo:s}=n;r.forEach(a=>{Promise.all([a.data(),o,s]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],i,l[2])})})}};function Bke(t,n,e){if(n!=="float32")return!1;for(let r=0;r<t.length;r++){let o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${e}'`),!0}return!1}var RF=class{logKernelProfile(n,e,r,o,i,s){let a=typeof o=="number"?qm(`${o}ms`,9):o.error,l=qm(n,25),c=e.rank,u=e.size,d=qm(e.shape.toString(),14),p="";for(let h in i){let f=i[h];if(f!=null){let m=f.shape||e.shape,g=m.length;p+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function dK(t,n,e){let r={},o={};for(let l=0;l<n.length;l++)r[n[l].id]=!0;for(let l=0;l<t.length;l++){let c=t[l],u=c.inputs;for(let d in u){let p=u[d],h=!1;for(let f=0;f<n.length;f++)if(r[p.id]){c.outputs.forEach(m=>r[m.id]=!0),h=!0,o[c.id]=!0;break}if(h)break}}let i={};i[e.id]=!0;let s={};for(let l=t.length-1;l>=0;l--){let c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(let p in u)i[u[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let l=0;l<t.length;l++){let c=t[l];if(o[c.id]&&s[c.id]){let u={};for(let p in c.inputs){let h=c.inputs[p];r[h.id]&&(u[p]=h)}let d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function pK(t,n,e,r){for(let o=n.length-1;o>=0;o--){let i=n[o],s=[];if(i.outputs.forEach(l=>{let c=t[l.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=e(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=i.inputs[l];if(!Oi(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{let d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}var hK=20,jx=3,OF=7;function fK(t,n,e,r){let o=Cc(n),i=Lke(t,n,e,o),s=n.length,a=SM(t,n,e,o,i),l=["Tensor"];return r&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${s}`),l.push(`  shape: [${n}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Lke(t,n,e,r){let o=nn(n),i=r[r.length-1],s=new Array(i).fill(0),a=n.length,l=e==="complex64"?Hx(t):t;if(a>1)for(let c=0;c<o/i;c++){let u=c*i;for(let d=0;d<i;d++)s[d]=Math.max(s[d],zx(l[u+d],0,e).length)}return s}function zx(t,n,e){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(OF))} + ${parseFloat(t[1].toFixed(OF))}j`:wl(t)?r=`'${t}'`:e==="bool"?r=mK(t):r=parseFloat(t.toFixed(OF)).toString(),qm(r,n)}function mK(t){return t===0?"false":"true"}function SM(t,n,e,r,o,i=!0){let s=e==="complex64"?2:1,a=n[0],l=n.length;if(l===0){if(e==="complex64"){let m=Hx(t);return[zx(m[0],0,e)]}return e==="bool"?[mK(t[0])]:[t[0].toString()]}if(l===1){if(a>hK){let g=jx*s,v=Array.from(t.slice(0,g)),w=Array.from(t.slice((a-jx)*s,a*s));return e==="complex64"&&(v=Hx(v),w=Hx(w)),["["+v.map((y,_)=>zx(y,o[_],e)).join(", ")+", ..., "+w.map((y,_)=>zx(y,o[a-jx+_],e)).join(", ")+"]"]}return["["+(e==="complex64"?Hx(t):Array.from(t)).map((g,v)=>zx(g,o[v],e)).join(", ")+"]"]}let c=n.slice(1),u=r.slice(1),d=r[0]*s,p=[];if(a>hK){for(let m=0;m<jx;m++){let g=m*d,v=g+d;p.push(...SM(t.slice(g,v),c,e,u,o,!1))}p.push("...");for(let m=a-jx;m<a;m++){let g=m*d,v=g+d;p.push(...SM(t.slice(g,v),c,e,u,o,m===a-1))}}else for(let m=0;m<a;m++){let g=m*d,v=g+d;p.push(...SM(t.slice(g,v),c,e,u,o,m===a-1))}let h=l===2?",":"";p[0]="["+(a>0?p[0]+h:"");for(let m=1;m<p.length-1;m++)p[m]=" "+p[m]+h;let f=`,
`;for(let m=2;m<l;m++)f+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":f),p}function Hx(t){let n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var wn=class{constructor(n,e,r){if(this.dtype=e,this.shape=n.slice(),this.size=nn(n),r!=null){let o=r.length;F(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||wM(e,this.size),this.strides=Cc(n)}set(n,...e){e.length===0&&(e=[0]),F(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);let r=this.locToIndex(e);this.values[r]=n}get(...n){n.length===0&&(n=[0]);let e=0;for(let o of n){if(o<0||o>=this.shape[e]){let i=`Requested out of range element at ${n}.   Buffer shape=${this.shape}`;throw new Error(i)}e++}let r=n[n.length-1];for(let o=0;o<n.length-1;++o)r+=this.strides[o]*n[o];return this.values[r]}locToIndex(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];let e=n[n.length-1];for(let r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e}indexToLoc(n){if(this.rank===0)return[];if(this.rank===1)return[n];let e=new Array(this.shape.length);for(let r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e}get rank(){return this.shape.length}toTensor(){return Sl().makeTensor(this.values,this.shape,this.dtype)}},Sl=null,Q1=null,$ke=null;function gK(t){Sl=t}function vK(t){Q1=t}function wK(t){$ke=t}var Ot=class{constructor(n,e,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=nn(n),this.strides=Cc(n),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return z(this,null,function*(){let n=yield this.data();return Q1.buffer(this.shape,this.dtype,n)})}bufferSync(){return Q1.buffer(this.shape,this.dtype,this.dataSync())}array(){return z(this,null,function*(){let n=yield this.data();return Wm(this.shape,n,this.dtype==="complex64")})}arraySync(){return Wm(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return z(this,null,function*(){this.throwIfDisposed();let n=Sl().read(this.dataId);if(this.dtype==="string"){let e=yield n;try{return e.map(r=>Y1(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return n})}dataToGPU(n){return this.throwIfDisposed(),Sl().readToGPU(this.dataId,n)}dataSync(){this.throwIfDisposed();let n=Sl().readSync(this.dataId);if(this.dtype==="string")try{return n.map(e=>Y1(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n}bytes(){return z(this,null,function*(){this.throwIfDisposed();let n=yield Sl().read(this.dataId);return this.dtype==="string"?n:new Uint8Array(n.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Sl().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(n=!1){return Q1.print(this,n)}clone(){return this.throwIfDisposed(),Q1.clone(this)}toString(n=!1){let e=this.dataSync();return fK(e,this.shape,this.dtype,n)}cast(n){return this.throwIfDisposed(),Q1.cast(this,n)}variable(n=!0,e,r){return this.throwIfDisposed(),Sl().makeVariable(this,n,e,r)}};Object.defineProperty(Ot,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function U(){return Bx("Tensor",()=>Ot)}U();var wu=class extends Ot{constructor(n,e,r,o){super(n.shape,n.dtype,n.dataId,o),this.trainable=e,this.name=r}assign(n){if(n.dtype!==this.dtype)throw new Error(`dtype of the new value (${n.dtype}) and previous value (${this.dtype}) must match`);if(!Oi(n.shape,this.shape))throw new Error(`shape of the new value (${n.shape}) and previous value (${this.shape}) must match`);Sl().disposeTensor(this),this.dataId=n.dataId,Sl().incRef(this,null)}dispose(){Sl().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(wu,Symbol.hasInstance,{value:t=>t instanceof Ot&&t.assign!=null&&t.assign instanceof Function});var ta={};Qt(ta,{assertTypesMatch:()=>PF,getTensorsInContainer:()=>Ux,isTensorInList:()=>jke,makeTypesMatch:()=>rn});var FF=function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t}(FF||{}),yK=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(yK||{}),xK=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(xK||{}),_K=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(_K||{}),kK=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(kK||{}),Vke={float32:_K,int32:yK,bool:xK,complex64:kK};function Vr(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error(`Can not upcast ${t} with ${n}`)}return Vke[t][n]}function Uh(t){return Vr(t,"int32")}function MM(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function TM(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function rn(t,n){if(t.dtype===n.dtype)return[t,n];let e=Vr(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function PF(t,n){F(t.dtype===n.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${n.dtype}) input must match`)}function jke(t,n){return n.some(e=>e.id===t.id)}function Ux(t){let n=[];return bK(t,n,new Set),n}function bK(t,n,e){if(t==null)return;if(t instanceof Ot){n.push(t);return}if(!zke(t))return;let r=t;for(let o in r){let i=r[o];e.has(i)||(e.add(i),bK(i,n,e))}}function zke(t){return Array.isArray(t)||typeof t=="object"}function BF(t){return t.kernelName!=null}var DM=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(n=>n.name)))}}}dispose(){for(let n in this.registeredVariables)this.registeredVariables[n].dispose()}},Hke=(()=>{class t{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new DM}ready(){return z(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let o=e[r];if(yield this.initializeBackend(o).success){yield this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:r}=this.initializeBackend(e);if(r)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,r,o=1){return e in this.registryFactory?(vu(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:r,priority:o},!0)}setBackend(e){return z(this,null,function*(){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(e);if(!(o?yield r:r))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new CM(this.backendInstance),!0})}setupRegisteredKernels(){$x(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){$x(e).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[e])})}initializeBackend(e){let r=this.registryFactory[e];if(r==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof kc)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,vu(`Initialization of backend ${e} failed`),vu(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(o){return vu(`Initialization of backend ${e} failed`),vu(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,r)=>this.registryFactory[r].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let o=e[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=e,e.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,r){let o=null;if(r==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");r=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,r,o){e();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(e){let r=R.runKernel(xl,{x:e}),o={x:e},i=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return R.runKernel(yl,c,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(e,r,o){if(this.backendName==null&&this.backend,!(Jg(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=i-r-s-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=BF(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(BF(e)){let{kernelName:m,inputs:g,attrs:v}=e;this.backendName==null&&this.backend;let w=Jg(m,this.backendName);F(w!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),l=()=>{let y=this.backend.numDataIds();c=w.kernelFunc({inputs:g,attrs:v,backend:this.backend});let _=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,y,_);let k=_.map(M=>M.rank!=null?M:this.makeTensorFromTensorInfo(M));if(i){let M=this.getTensorsForGradient(m,g,k);o=this.saveTensorsForBackwardMode(M)}return k}}else{let{forwardFunc:m}=e,g=v=>{i&&(o=v.map(w=>this.keep(this.clone(w))))};l=()=>{let v=this.backend.numDataIds();c=this.tidy(()=>m(this.backend,g));let w=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,w),w}}let{inputs:d,attrs:p}=e,h=BF(e)?null:e.backwardsFunc,f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=l():(f=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),r=f.outputs)}),i&&this.addTapeNode(u,d,r,h,o,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(m=>d[m]!=null?d[m].shape:null),outputShapes:r.map(m=>m.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(e){return e.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(e,r,o){let i=xM(e);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],l;i.saveAllInputs?(F(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(r).map(u=>r[u])):l=s.map(u=>r[u]);let c=o.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,r,o,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=e;o==="string"&&wl(e[0])&&(s=e.map(c=>Hh(c)));let a=i.write(s,r,o),l=new Ot(r,o,a,this.nextTensorId());if(this.trackTensor(l,i),o==="string"){let c=this.state.tensorInfo.get(a),u=kF(s);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,r,o,i){o=o||"float32";let s={dataId:e,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,r){let{dataId:o,shape:i,dtype:s}=e,a=new Ot(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));let s=new wu(e,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,r){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*L1(e.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:r||this.backend,dtype:e.dtype,shape:e.shape,bytes:o})),e instanceof wu||this.track(e)}incRef(e,r){this.trackTensor(e,r),this.backend.incRef(e.dataId)}removeDataId(e,r){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===r&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let r=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let o=e.size*L1(e.dtype);this.state.numBytes-=o}r.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,r.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let r=this.state.registeredVariables[e];this.disposeVariable(r)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){return z(this,null,function*(){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=yield i.kernelTimeMs,i.extraInfo=yield i.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,r,o,i,s,a){let l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:r,outputs:o,saved:s},c=xM(e);c!=null&&(i=c.gradFunc),i!=null&&(l.gradient=u=>(u=u.map((d,p)=>{if(d==null){let h=o[p],f=V1(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return d}),i(u.length>1?u:u[0],s,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(r.name=e),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(e){let r=Ux(e),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,r,o,i=!1){if(F(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));F(s instanceof Ot,()=>"The result y returned by f() must be a tensor.");let a=dK(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[s.id]=o??Uke(s.shape),pK(l,a,u=>this.tidy(u),Gke);let c=r.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let d of u.saved)d.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(e){return F(bc(e),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{F(r.every(l=>l instanceof Ot),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((l,c)=>{i[c]=l});let s=(l,c)=>(o=e(...r,c),F(o.value instanceof Ot,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),F(bc(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(l,c)=>{let u=o.gradFunc(l,c),d=Array.isArray(u)?u:[u];F(d.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),F(d.every(h=>h instanceof Ot),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((h,f)=>{p[f]=()=>h}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,r){return this.state.tensorInfo.get(e).backend.readToGPU(e,r)}time(e){return z(this,null,function*(){let r=o0(),o=yield this.backend.time(e);return o.wallMs=o0()-r,o})}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new DM;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function Uke(t){let n=Px(nn(t),"float32");return R.makeTensor(n,t,"float32")}function LF(){let t=CF();if(t._tfengine==null){let n=new j1(t);t._tfengine=new Hke(n)}return Zq(t._tfengine.ENV),gK(()=>t._tfengine),t._tfengine}var R=LF();function Gke(t,n){let e={a:t,b:n};return R.runKernel(Ca,e)}var up={};Qt(up,{isBrowser:()=>VF,isMobile:()=>Kke,mockIsMobile:()=>qke});function Wke(){return typeof navigator<"u"&&navigator!=null}var $F;function qke(t){$F=t}function Kke(t){if($F!==void 0)return $F;if(t||Wke()){if(t||(t=navigator),t.product==="ReactNative")return!0;let n=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!n){let e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))}return!1}function VF(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var rs=Q();rs.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});rs.registerFlag("IS_BROWSER",()=>VF());rs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");rs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));rs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));rs.registerFlag("PROD",()=>!1);rs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>rs.getBool("DEBUG"));rs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);rs.registerFlag("IS_TEST",()=>!1);rs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>rs.getBool("DEBUG"));rs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);rs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);rs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function li(t,n){let e=t;if($r(t))return n==="string"?[]:[t.length];if(MM(t)){let o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(TM(t))return[t.buffer.size/(n==null?4:L1(n))];if(!Array.isArray(t))return[];let r=[];for(;Array.isArray(e)||$r(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&Q().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&SK(t,r,[]),r}function SK(t,n,e){if(e=e||[],!Array.isArray(t)&&!$r(t)){F(n.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);return}F(n.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${t.length} elements`),F(t.length===n[0],()=>`Element arr[${e.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);let r=n.slice(1);for(let o=0;o<t.length;++o)SK(t[o],r,e.concat(o))}function CK(t,n,e,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==n||t==="numeric"&&n==="string")throw new Error(`Argument '${e}' passed to '${r}' must be ${t} tensor, but got ${n} tensor`)}}function b(t,n,e,r="numeric"){if(t instanceof U())return CK(r,t.dtype,n,e),t;let o=Dh(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),CK(r,o,n,e),t==null||!$r(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let l=t==null?"null":t.constructor.name;throw new Error(`Argument '${n}' passed to '${e}' must be a Tensor or TensorLike, but got '${l}'`)}let i=li(t,o);!$r(t)&&!Array.isArray(t)&&(t=[t]);let a=o!=="string"?X1(t,o):Cl(t,[],!0);return R.makeTensor(a,i,o)}function dp(t,n,e,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${n} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>b(i,`${n}[${s}]`,e,r))}var EM="__op";function D(t){let n=Object.keys(t);if(n.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${n.length} keys.`);let e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+EM;let o=(...i)=>{R.startScope(e);try{let s=r(...i);return Km(s)&&console.error("Cannot return a Promise inside of tidy."),R.endScope(s),s}catch(s){throw R.endScope(null),s}};return Object.defineProperty(o,"name",{value:e,configurable:!0}),o}function Zke(t,n){let e=b(t,"real","complex"),r=b(n,"imag","complex");nr(e.shape,r.shape,`real and imag shapes, ${e.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:e,imag:r};return R.runKernel(tg,o)}var Pi=D({complex_:Zke});function Bi(t,n,e,r){if(r==null)r=Dh(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(TM(t)||MM(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return R.backend.createTensorFromGPUData(t,n||e,r)}if(!$r(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){ur(n);let o=nn(n),i=nn(e);F(o===i,()=>`Based on the provided shape, [${n}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<e.length;++s){let a=e[s],l=s===e.length-1?a!==nn(n.slice(s)):!0;F(e[s]===n[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${n}). `)}}return!$r(t)&&!Array.isArray(t)&&(t=[t]),n=n||e,t=r!=="string"?X1(t,r):Cl(t,[],!0),R.makeTensor(t,n,r)}function Wr(t,n,e){let r=li(t,e);return Bi(t,n,r,e)}var pp={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var ci=class t{static join(n){return new t(n).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,n==null||(n instanceof Array||(n=[n]),n=n.map(r=>$r(r)?r.buffer:r),n.length===0))return;this.bufferUniformSize=n[0].byteLength;let e=0;for(let r=0;r<n.length;r++){let o=n[r];r!==n.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=e+o.byteLength;this.shards.push({buffer:o,start:e,end:i}),e=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(n=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(n=isNaN(Number(n))?0:n,e=isNaN(Number(e))?0:e,n=Math.max(0,n),e=Math.min(this.byteLength,e),e<=n)return new ArrayBuffer(0);let r=this.findShardForByte(n);if(r===-1)throw new Error(`Could not find start shard for byte ${n}`);let o=e-n,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let l=r;l<this.shards.length;l++){let c=this.shards[l],d=n+a-c.start,p=a,f=Math.min(e,c.end)-c.start,m=new Uint8Array(c.buffer,d,f-d);if(s.set(m,p),a+=m.length,e<c.end)break}return i}findShardForByte(n){if(this.shards.length===0||n<0||n>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(n/this.bufferUniformSize),this.previousShardIndex;function e(o){return n<o.start?-1:n>=o.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=Xke(this.shards,e);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function Xke(t,n){let e=0,r=t.length;for(;e<=r;){let o=Math.floor((r-e)/2)+e,i=n(t[o]);if(i===0)return o;i<0?r=o:e=o+1}return-1}function Yke(){Q().set("PROD",!0)}function Qke(){Q().set("DEBUG",!0)}function Jke(){Q().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function MK(t){Q().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}wK(MK);function ebe(){R.disposeVariables()}function na(){return R}function J1(){return R.memory()}function tbe(t){return R.profile(t)}function ne(t,n){return R.tidy(t,n)}function gt(t){Ux(t).forEach(e=>e.dispose())}function Wn(t){return R.keep(t)}function nbe(t){return R.time(t)}function TK(t){return R.setBackend(t)}function rbe(){return R.ready()}function jF(){return R.backendName}function obe(t){R.removeBackend(t)}function ibe(t){return R.findBackend(t)}function sbe(t){return R.findBackendFactory(t)}function Gx(t,n,e=1){return R.registerBackend(t,n,e)}function Wx(){return R.backend}function abe(t,n){Q().setPlatform(t,n)}var Gh=4;function IK(t,n){return z(this,null,function*(){let e=[],r=[],o=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<o.length;++s){let a=o[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(d=>z(this,null,function*(){let p=yield l.bytes(),h=p.reduce((g,v)=>g+v.length,0)+Gh*p.length,f=new Uint8Array(h),m=0;for(let g=0;g<p.length;g++){let v=p[g],w=new Uint8Array(new Uint32Array([v.length]).buffer);f.set(w,m),m+=Gh,f.set(v,m),m+=v.length}d(f)}));r.push(u)}else r.push(l.data());n!=null&&(c.group=n),e.push(c)}let i=yield Promise.all(r);return{data:ube(i),specs:e}})}function IM(t,n){let e=new ci(t),r={},o=0;for(let i of n){let s=lbe(i,(a,l)=>e.slice(o+a,o+l));r[i.name]=NK(i,e.slice(o,o+s)),o+=s}return r}function lbe(t,n){let e=nn(t.shape),r;if("quantization"in t){let o=t.quantization;r=pp[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<e;i++)o+=Gh+new Uint32Array(n(o,o+Gh))[0];return o}else r=pp[t.dtype];return e*r}function cbe(t,n){return z(this,null,function*(){let e=nn(t.shape),r;if("quantization"in t){let o=t.quantization;r=pp[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<e;i++)o+=Gh+new Uint32Array(yield n(o,o+Gh))[0];return o}else r=pp[t.dtype];return e*r})}function NK(t,n){let e=t.name,r=t.dtype,o=t.shape,i=nn(o),s,a=0;if("quantization"in t){let l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=pp[l.dtype],u=l.dtype==="uint8"?new Uint8Array(n):new Uint16Array(n);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=p*l.scale+l.min}}else if(l.dtype==="float16")s=fbe()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${e}': ${r}`);a+=i*c}else if(r==="string"){let l=nn(t.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(n.slice(a,a+Gh))[0];a+=Gh;let d=new Uint8Array(n.slice(a,a+u));s.push(d),a+=u}}else{let l=pp[r];if(r==="float32")s=new Float32Array(n);else if(r==="int32")s=new Int32Array(n);else if(r==="bool")s=new Uint8Array(n);else if(r==="complex64"){s=new Float32Array(n);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let f=0;f<c.length;f++)c[f]=s[f*2],u[f]=s[f*2+1];let d=Wr(c,o,"float32"),p=Wr(u,o,"float32"),h=Pi(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${e}': ${r}`);a+=i*l}return Wr(s,o,r)}function DK(t,n,e){return z(this,null,function*(){let r=new Uint8Array(n);for(;r.byteLength<e;){let{done:o,value:i}=yield t.read();if(o&&i==null){let a=e-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer})}function NM(t,n){return z(this,null,function*(){let e={},r=t.getReader(),o=new ArrayBuffer(0);for(let i of n){let s=yield cbe(i,(c,u)=>z(this,null,function*(){return o=yield DK(r,o,u),o.slice(c,u)}));o=yield DK(r,o,s);let a=o.slice(0,s);o=o.slice(s);let l=NK(i,a);if(e[i.name]=l,jF()==="webgpu"){let c=Wx();"uploadToGPU"in c&&nn(l.shape)>=Q().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return e})}function ube(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let n=0,e=[];t.forEach(i=>{if(n+=i.byteLength,e.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(n),o=0;return e.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var zF=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function EK(t){return zF?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function AK(t){if(zF)return Buffer.from(t).toString("base64");let n=new Uint8Array(t),e="";for(let r=0,o=n.length;r<o;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function RK(t){if(zF){let r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let n=atob(t),e=new Uint8Array(n.length);for(let r=0;r<n.length;++r)e.set([n.charCodeAt(r)],r);return e.buffer}function OK(t){return ci.join(t)}function HF(t){let n="/";for(t=t.trim();t.endsWith(n);)t=t.slice(0,t.length-1);let e=t.split(n);return e[e.length-1]}function AM(t,n){let e={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};return t.signature!=null&&(e.signature=t.signature),t.userDefinedMetadata!=null&&(e.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(e.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(e.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(e.trainingConfig=t.trainingConfig),e}function UF(t,n,e){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!n)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=n,r.weightData=e}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}function ev(t,n){return z(this,null,function*(){let e,r;return t.weightsManifest!=null&&([e,r]=yield n(t.weightsManifest)),UF(t,e,r)})}function yu(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:EK(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:EK(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new ci(t.weightData).byteLength}}function qx(t){let n=[];for(let e of t)n.push(...e.weights);return n}function dbe(){let t=e=>{let r=e<<13,o=0;for(;(r&8388608)===0;)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},n=new Uint32Array(2048);n[0]=0;for(let e=1;e<1024;e++)n[e]=t(e);for(let e=1024;e<2048;e++)n[e]=939524096+(e-1024<<13);return n}function pbe(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let n=1;n<31;n++)t[n]=n<<23;for(let n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}function hbe(){let t=new Uint32Array(64);for(let n=0;n<64;n++)t[n]=1024;return t[0]=t[32]=0,t}function fbe(){let t=dbe(),n=pbe(),e=hbe();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],l=t[e[a>>10]+(a&1023)]+n[a>>10];i[s]=l}return new Float32Array(o)}}var So=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(n){t.getInstance().saveRouters.push(n)}static registerLoadRouter(n){t.getInstance().loadRouters.push(n)}static getSaveHandlers(n){return t.getHandlers(n,"save")}static getLoadHandlers(n,e){return t.getHandlers(n,"load",e)}static getHandlers(n,e,r){let o=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(s=>{let a=s(n,r);a!==null&&o.push(a)}),o}},FK=t=>So.registerSaveRouter(t),PK=t=>So.registerLoadRouter(t),BK=t=>So.getSaveHandlers(t),LK=(t,n)=>So.getLoadHandlers(t,n);var GF="tensorflowjs",WF=1,i0="models_store",Wh="model_info_store";function $K(){if(!Q().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function qF(t){let n=t.result;n.createObjectStore(i0,{keyPath:"modelPath"}),n.createObjectStore(Wh,{keyPath:"modelPath"})}var s0=(()=>{class t{constructor(e){if(this.indexedDB=$K(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)})}load(){return z(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(e,r){return new Promise((o,i)=>{let s=this.indexedDB.open(GF,WF);s.onupgradeneeded=()=>qF(s),s.onsuccess=()=>{let a=s.result;if(r==null){let l=a.transaction(i0,"readonly"),u=l.objectStore(i0).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(u.result.modelArtifacts)},u.onerror=d=>(a.close(),i(u.error)),l.oncomplete=()=>a.close()}else{r.weightData=ci.join(r.weightData);let l=yu(r),c=a.transaction(Wh,"readwrite"),u=c.objectStore(Wh),d;try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(h){return i(h)}let p;d.onsuccess=()=>{p=a.transaction(i0,"readwrite");let h=p.objectStore(i0),f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:l})}catch(m){return i(m)}f.onsuccess=()=>o({modelArtifactsInfo:l}),f.onerror=m=>{u=c.objectStore(Wh);let g=u.delete(this.modelPath);g.onsuccess=()=>(a.close(),i(f.error)),g.onerror=v=>(a.close(),i(f.error))}},d.onerror=h=>(a.close(),i(d.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return t.URL_SCHEME="indexeddb://",t})();var VK=t=>Q().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(s0.URL_SCHEME)?mbe(t.slice(s0.URL_SCHEME.length)):null;So.registerSaveRouter(VK);So.registerLoadRouter(VK);function mbe(t){return new s0(t)}function gbe(t){return t.startsWith(s0.URL_SCHEME)?t.slice(s0.URL_SCHEME.length):t}var RM=class{constructor(){this.indexedDB=$K()}listModels(){return z(this,null,function*(){return new Promise((n,e)=>{let r=this.indexedDB.open(GF,WF);r.onupgradeneeded=()=>qF(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(Wh,"readonly"),a=i.objectStore(Wh).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;n(l)},a.onerror=l=>(o.close(),e(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>e(r.error)})})}removeModel(n){return z(this,null,function*(){return n=gbe(n),new Promise((e,r)=>{let o=this.indexedDB.open(GF,WF);o.onupgradeneeded=()=>qF(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(Wh,"readwrite"),a=s.objectStore(Wh),l=a.get(n),c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${n}' in IndexedDB.`));{let u=a.delete(n),d=()=>{c=i.transaction(i0,"readwrite");let h=c.objectStore(i0).delete(n);h.onsuccess=()=>e(l.result.modelArtifactsInfo),h.onerror=f=>r(l.error)};u.onsuccess=d,u.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})})}};var hp="/",tv="tensorflowjs_models",jK="info",vbe="model_topology",wbe="weight_specs",ybe="weight_data",xbe="model_metadata";function zK(t){return{info:[tv,t,jK].join(hp),topology:[tv,t,vbe].join(hp),weightSpecs:[tv,t,wbe].join(hp),weightData:[tv,t,ybe].join(hp),modelMetadata:[tv,t,xbe].join(hp)}}function HK(t){for(let n of Object.values(t))window.localStorage.removeItem(n)}function _be(t){let n=t.split(hp);if(n.length<3)throw new Error(`Invalid key format: ${t}`);return n.slice(1,n.length-1).join(hp)}function kbe(t){return t.startsWith(a0.URL_SCHEME)?t.slice(a0.URL_SCHEME.length):t}var a0=(()=>{class t{constructor(e){if(!Q().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=zK(this.modelPath)}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(e.modelTopology),o=JSON.stringify(e.weightSpecs),i=yu(e),s=ci.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,AK(s));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw HK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}})}load(){return z(this,null,function*(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let l=JSON.parse(s);r.format=l.format,r.generatedBy=l.generatedBy,r.convertedBy=l.convertedBy,l.signature!=null&&(r.signature=l.signature),l.userDefinedMetadata!=null&&(r.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(r.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(r.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(r.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=RK(a),r})}}return t.URL_SCHEME="localstorage://",t})();var UK=t=>Q().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(a0.URL_SCHEME)?bbe(t.slice(a0.URL_SCHEME.length)):null;So.registerSaveRouter(UK);So.registerLoadRouter(UK);function bbe(t){return new a0(t)}var OM=class{constructor(){F(Q().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),F(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return z(this,null,function*(){let n={},e=tv+hp,r=hp+jK;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(e)&&i.endsWith(r)){let s=_be(i);n[s]=JSON.parse(this.LS.getItem(i))}}return n})}removeModel(n){return z(this,null,function*(){n=kbe(n);let e=zK(n);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${n}'`);let r=JSON.parse(this.LS.getItem(e.info));return HK(e),r})}};var nv="://",Ml=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(n,e){F(n!=null,()=>"scheme must not be undefined or null."),n.endsWith(nv)&&(n=n.slice(0,n.indexOf(nv))),F(n.length>0,()=>"scheme must not be an empty string.");let r=t.getInstance();F(r.managers[n]==null,()=>`A model store manager is already registered for scheme '${n}'.`),r.managers[n]=e}static getManager(n){let e=t.getInstance().managers[n];if(e==null)throw new Error(`Cannot find model manager for scheme '${n}'`);return e}static getSchemes(){return Object.keys(t.getInstance().managers)}};function FM(t){if(t.indexOf(nv)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ml.getSchemes().join(",")}`);return{scheme:t.split(nv)[0],path:t.split(nv)[1]}}function GK(t,n,e=!1){return z(this,null,function*(){F(t!==n,()=>`Old path and new path are the same: '${t}'`);let r=So.getLoadHandlers(t);F(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),F(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);let o=r[0],i=So.getSaveHandlers(n);F(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${n}.`),F(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${n}.`);let s=i[0],a=FM(t).scheme,l=FM(t).path,c=a===FM(t).scheme,u=yield o.load();e&&c&&(yield Ml.getManager(a).removeModel(l));let d=yield s.save(u);return e&&!c&&(yield Ml.getManager(a).removeModel(l)),d.modelArtifactsInfo})}function WK(){return z(this,null,function*(){let t=Ml.getSchemes(),n={};for(let e of t){let r=yield Ml.getManager(e).listModels();for(let o in r){let i=e+nv+o;n[i]=r[o]}}return n})}function qK(t){return z(this,null,function*(){let n=FM(t);return Ml.getManager(n.scheme).removeModel(n.path)})}function KK(t,n){return z(this,null,function*(){return GK(t,n,!1)})}function ZK(t,n){return z(this,null,function*(){return GK(t,n,!0)})}var KF=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(n,e){return fetch(n,e)}now(){return performance.now()}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)}decode(n,e){return new TextDecoder(e).decode(n)}setTimeoutCustom(n,e){if(typeof window>"u"||!Q().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(n,e);return}this.functionRefs.push(n),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(n){return _M(n)}};if(Q().get("IS_BROWSER")){Q().setPlatform("browser",new KF);try{Ml.registerManager(a0.URL_SCHEME,new OM)}catch{}try{Ml.registerManager(s0.URL_SCHEME,new RM)}catch{}}var Sbe={importFetch:()=>YK()},ZF;var XF=class{constructor(){this.util=QK(),this.textEncoder=new this.util.TextEncoder}fetch(n,e){return Q().global.fetch!=null?Q().global.fetch(n,e):(ZF==null&&(ZF=Sbe.importFetch()),ZF(n,e))}now(){let n=process.hrtime();return n[0]*1e3+n[1]/1e6}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(n)}decode(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)}isTypedArray(n){return this.util.types.isFloat32Array(n)||this.util.types.isInt32Array(n)||this.util.types.isUint8Array(n)||this.util.types.isUint8ClampedArray(n)}};Q().get("IS_NODE")&&!Q().get("IS_BROWSER")&&Q().setPlatform("node",new XF);function st(t,n="float32",e){return n=n||"float32",ur(t),new wn(t,n,e)}function Mbe(t,n){let e=b(t,"x","cast");if(!_F(n))throw new Error(`Failed to cast to unknown dtype ${n}`);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:e},o={dtype:n};return R.runKernel(yl,r,o)}var ge=D({cast_:Mbe});function Tbe(t){let e={x:b(t,"x","clone","string_or_numeric")};return R.runKernel(xl,e)}var xi=D({clone_:Tbe});function Kx(t,n=!1){console.log(t.toString(n))}LF();var Dbe={buffer:st,cast:ge,clone:xi,print:Kx};vK(Dbe);function Ebe(t,n){let e=b(t,"a","add"),r=b(n,"b","add");[e,r]=rn(e,r);let o={a:e,b:r};return R.runKernel(Ca,o)}var fe=D({add_:Ebe});function Ibe(t,n){let e=b(t,"a","floorDiv"),r=b(n,"b","floorDiv");[e,r]=rn(e,r);let o={a:e,b:r};return R.runKernel(zc,o)}var c0=D({floorDiv_:Ibe});function Nbe(t,n){let e=b(t,"a","div"),r=b(n,"b","div");if([e,r]=rn(e,r),e.dtype==="int32"&&r.dtype==="int32")return c0(e,r);let o={a:e,b:r},i={};return R.runKernel(Pc,o,i)}var $e=D({div_:Nbe});function Abe(t,n){let e=b(t,"a","mul"),r=b(n,"b","mul");[e,r]=rn(e,r);let o={a:e,b:r};return R.runKernel(Qc,o)}var L=D({mul_:Abe});function Rbe(t){let n=b(t,"x","abs");if(n.dtype==="complex64"){let e={x:n};return R.runKernel(Sd,e)}else{let e={x:n};return R.runKernel(vd,e)}}var jn=D({abs_:Rbe});function Obe(t){let e={x:b(t,"x","acos")};return R.runKernel(Sc,e)}var Zx=D({acos_:Obe});function Fbe(t){let e={x:b(t,"x","acosh")};return R.runKernel(Mc,e)}var Xx=D({acosh_:Fbe});function Pbe(t){F(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),F(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let n=t.map((o,i)=>b(o,`tensors${i}`,"addN")),e=n[0];n.forEach(o=>{if(o.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(o=>{if(!Oi(o.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=n;return R.runKernel(wd,r)}var YF=D({addN_:Pbe});function Bbe(t,n=null,e=!1){let o={x:b(t,"x","all","bool")},i={axis:n,keepDims:e};return R.runKernel(Zm,o,i)}var u0=D({all_:Bbe});function Lbe(t,n=null,e=!1){let o={x:b(t,"x","any","bool")},i={axis:n,keepDims:e};return R.runKernel(Xm,o,i)}var qh=D({any_:Lbe});function $be(t,n=0){let r={x:b(t,"x","argMax")},o={axis:n};return R.runKernel(yd,r,o)}var Tl=D({argMax_:$be});function Vbe(t,n=0){let r={x:b(t,"x","argMin")},o={axis:n};return R.runKernel(xd,r,o)}var Yx=D({argMin_:Vbe});function jbe(t){let e={x:b(t,"x","asin")};return R.runKernel(Tc,e)}var Qx=D({asin_:jbe});function zbe(t){let e={x:b(t,"x","asinh")};return R.runKernel(Dc,e)}var Jx=D({asinh_:zbe});function Hbe(t){let e={x:b(t,"x","atan")};return R.runKernel(Ec,e)}var e_=D({atan_:Hbe});function Ube(t,n){let e=b(t,"a","atan2"),r=b(n,"b","atan2");[e,r]=rn(e,r);let o={a:e,b:r};return R.runKernel(Nc,o)}var t_=D({atan2_:Ube});function Gbe(t){let e={x:b(t,"x","atanh")};return R.runKernel(Ic,e)}var n_=D({atanh_:Gbe});function Wbe(t,n,e,r,o="NHWC",i){let s=t[3],a=[...n,s],l=eZ(o);return d0(t,a,e,i,r,null,null,l)}function JF(t,n,e,r,o,i,s="channelsLast"){let[a,l]=r_(n),c;if(s==="channelsLast")c=[a,l,t[3],t[3]];else if(s==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return d0(t,c,e,r,o,i,!1,s)}function qbe(t,n,e,r,o,i,s="NDHWC"){let[a,l,c]=QF(n),u,d;if(s==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(s==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return JK(t,u,e,r,o,!1,d,i)}function d0(t,n,e,r,o,i,s=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,h,,f]=n,[m,g]=r_(e),[v,w]=r_(r),y=ov(p,v),_=ov(h,w),{padInfo:k,outHeight:M,outWidth:E}=Xbe(o,c,u,m,g,y,_,i,a),A=s?f*d:f,P;return a==="channelsFirst"?P=[l,A,M,E]:a==="channelsLast"&&(P=[l,M,E,A]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:M,outWidth:E,outChannels:A,padInfo:k,strideHeight:m,strideWidth:g,filterHeight:p,filterWidth:h,effectiveFilterHeight:y,effectiveFilterWidth:_,dilationHeight:v,dilationWidth:w,inShape:t,outShape:P,filterShape:n}}function JK(t,n,e,r,o,i=!1,s="channelsLast",a){let[l,c,u,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,d,p]=t;else if(s==="channelsFirst")[l,p,c,u,d]=t;else throw new Error(`Unknown dataFormat ${s}`);let[h,f,m,,g]=n,[v,w,y]=QF(e),[_,k,M]=QF(r),E=ov(h,_),A=ov(f,k),P=ov(m,M),{padInfo:N,outDepth:B,outHeight:S,outWidth:W}=Ybe(o,c,u,d,v,w,y,E,A,P,a),ie=i?g*p:g,Z;return s==="channelsFirst"?Z=[l,ie,B,S,W]:s==="channelsLast"&&(Z=[l,B,S,W,ie]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:d,inChannels:p,outDepth:B,outHeight:S,outWidth:W,outChannels:ie,padInfo:N,strideDepth:v,strideHeight:w,strideWidth:y,filterDepth:h,filterHeight:f,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:A,effectiveFilterWidth:P,dilationDepth:_,dilationHeight:k,dilationWidth:M,inShape:t,outShape:Z,filterShape:n}}function Kbe(t,n,e,r,o){r==null&&(r=e6(t,n,e));let i=t[0],s=t[1],a=o_((i-n+2*r)/e+1,o),l=o_((s-n+2*r)/e+1,o);return[a,l]}function Zbe(t,n,e,r,o,i){o==null&&(o=e6(t,n[0],r[0]));let s=[0,0,0,e];for(let a=0;a<3;a++)t[a]+2*o>=n[a]&&(s[a]=o_((t[a]-n[a]+2*o)/r[a]+1,i));return s}function e6(t,n,e,r=1){let o=ov(n,r);return Math.floor((t[0]*(e-1)-e+o)/2)}function r_(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function QF(t){return typeof t=="number"?[t,t,t]:t}function ov(t,n){return n<=1?t:t+(t-1)*(n-1)}function Xbe(t,n,e,r,o,i,s,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let h=Kbe([n,e],i,r,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(n/r),d=Math.ceil(e/o);let p=Math.max(0,(u-1)*r+i-n),h=Math.max(0,(d-1)*o+s-e),f=Math.floor(p/2),m=p-f,g=Math.floor(h/2),v=h-g;c={top:f,bottom:m,left:g,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-i+1)/r),d=Math.ceil((e-s+1)/o);else if(typeof t=="object"){let p=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],f=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:h,left:f,right:m,type:p===0&&h===0&&f===0&&m===0?"VALID":"EXPLICIT"},u=o_((n-i+p+h)/r+1,a),d=o_((e-s+f+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function Ybe(t,n,e,r,o,i,s,a,l,c,u){let d,p,h,f;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let g=Zbe([n,e,r,1],[a,l,c],1,[o,i,s],t,u);p=g[0],h=g[1],f=g[2]}else if(t==="same"){p=Math.ceil(n/o),h=Math.ceil(e/i),f=Math.ceil(r/s);let m=(p-1)*o+a-n,g=(h-1)*i+l-e,v=(f-1)*s+c-r,w=Math.floor(m/2),y=m-w,_=Math.floor(g/2),k=g-_,M=Math.floor(v/2),E=v-M;d={top:_,bottom:k,left:M,right:E,front:w,back:y,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:f}}function o_(t,n){if(!n)return Math.trunc(t);switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${n}`)}}function ra(t){let[n,e,r]=r_(t);return n===1&&e===1&&r===1}function qo(t,n){return ra(t)||ra(n)}function xu(t){return r_(t).every(n=>n>0)}function eZ(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function zn(t,n,e){if(e!=null){if(typeof n=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);if(typeof n=="number")F(gd(n),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);else if(typeof n=="object")n.forEach(r=>{r.forEach(o=>{F(gd(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${n}`)}}function Qbe(t,n){let r={x:b(t,"x","reshape","string_or_numeric")},o={shape:n};return R.runKernel(Yd,r,o)}var $=D({reshape_:Qbe});function Jbe(t,n,e,r,o){let i=b(t,"x","avgPool","float32"),s=1;F(qo(e,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),zn("avgPool",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o},d=R.runKernel(_d,c,u);return d=ge(d,i.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var fp=D({avgPool_:Jbe});function eCe(t,n,e,r,o,i="NDHWC"){let s=b(t,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),F(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),F(typeof e=="number"&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),zn("avgPool3d",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o,dataFormat:i},d=R.runKernel(kd,c,u);return d=ge(d,a.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var i_=D({avgPool3d_:eCe});function tCe(t,n=0){F(t.length>=1,()=>"Pass at least one tensor to concat");let e=dp(t,"tensors","concat","string_or_numeric");if(e[0].dtype==="complex64"&&e.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),e.length===1)return xi(e[0]);let r=e,o={axis:n};return R.runKernel(Md,r,o)}var gn=D({concat_:tCe});function nCe(t,n,e=!1,r=!1){let o=b(t,"a","matMul"),i=b(n,"b","matMul");[o,i]=rn(o,i);let s={a:o,b:i},a={transposeA:e,transposeB:r};return R.runKernel(bd,s,a)}var Bt=D({matMul_:nCe});function rCe(t){let e={x:b(t,"x","sigmoid","float32")};return R.runKernel(cu,e)}var ui=D({sigmoid_:rCe});function oCe(t,n,e){let r=b(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:n,size:e};return R.runKernel(np,o,i)}var Nt=D({slice_:oCe});function iCe(t){let e={x:b(t,"x","tanh","float32")};return R.runKernel(mu,e)}var Da=D({tanh_:iCe});function sCe(t,n,e,r,o,i){let s=b(t,"forgetBias","basicLSTMCell"),a=b(n,"lstmKernel","basicLSTMCell"),l=b(e,"lstmBias","basicLSTMCell"),c=b(r,"data","basicLSTMCell"),u=b(o,"c","basicLSTMCell"),d=b(i,"h","basicLSTMCell"),p=gn([c,d],1),h=Bt(p,a),f=fe(h,l),m=f.shape[0],g=f.shape[1]/4,v=[m,g],w=Nt(f,[0,0],v),y=Nt(f,[0,g],v),_=Nt(f,[0,g*2],v),k=Nt(f,[0,g*3],v),M=fe(L(ui(w),Da(y)),L(u,ui(fe(s,_)))),E=L(Da(M),ui(k));return[M,E]}var t6=D({basicLSTMCell_:sCe});function aCe(t,n,e){let r=b(t,"x","batchToSpaceND"),o=n.reduce((a,l)=>a*l);F(r.rank>=1+n.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${n.length}`),F(e.length===n.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${n.length}`),F(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${n.join(" * ")} === ${o}`);let i={x:r},s={blockShape:n,crops:e};return R.runKernel(Cd,i,s)}var mp=D({batchToSpaceND_:aCe});function tZ(t){let n;return t.rank===0||t.rank===1?n=$(t,[1,1,1,t.size]):t.rank===2?n=$(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?n=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]):n=t,n}function lCe(t,n,e,r,o,i){i==null&&(i=.001);let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;r!=null&&(u=b(r,"offset","batchNorm")),F(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:tZ(s),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:i},f=R.runKernel(Od,p,h);return $(f,s.shape)}var Dl=D({batchNorm_:lCe});function cCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),F(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),F(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Dl(s,a,l,u,c,i)}var s_=D({batchNorm2d_:cCe});function uCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),F(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),F(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Dl(s,a,l,u,c,i)}var a_=D({batchNorm3d_:uCe});function dCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),F(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),F(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Dl(s,a,l,u,c,i)}var l_=D({batchNorm4d_:dCe});function pCe(t,n,e){let r=b(t,"x","bincount"),o=b(n,"weights","bincount");F(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),F(e>=0,()=>`size must be non-negative, but got ${e}.`),F(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:e};return R.runKernel(Jm,i,s)}var c_=D({bincount_:pCe});function hCe(t,n){let e=b(t,"x","bitwiseAnd"),r=b(n,"y","bitwiseAnd");if(!Oi(e.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${e.shape}, y: ${r.shape}`);if(e.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${e.dtype} and type of y: ${r.dtype}`);let o={a:e,b:r};return R.runKernel(Eh,o)}var n6=D({bitwiseAnd_:hCe});function fCe(t,n){let e=b(t,"s0","broadcastArgs","int32"),r=b(n,"s1","broadcastArgs","int32");if(e.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${e.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:e,s1:r};return R.runKernel(eg,o)}var r6=D({broadcastArgs_:fCe});function mCe(t,n){let e=b(t,"broadcastTo","x"),r=e.shape;if(ur(n),n.length<e.rank)throw new Error(`broadcastTo(): shape.length=${n.length} < input.rank=${e.rank}.`);if(n.length>e.rank){let c=e.shape.slice();for(;c.length<n.length;)c.unshift(1);e=$(e,c)}let o=e.shape,i=Array.from(n);for(let c=n.length-1;c>=0;c--)if(o[c]===n[c])i[c]=1;else if(e.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${n}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return xi(e);let a={x:e},l={reps:i};return R.runKernel(_l,a,l)}var El=D({broadcastTo_:mCe});function gCe(t){let e={x:b(t,"x","ceil","float32")};return R.runKernel(Ac,e)}var u_=D({ceil_:gCe});function ia(t,n,e){ur(t),e=e||Dh(n);let r={shape:t,value:n,dtype:e};return R.runKernel(mg,{},r)}function vCe(t,n,e){let r=b(t,"x","clipByValue");if(F(n<=e,()=>`Error in clip: min (${n}) must be less than or equal to max (${e}).`),n===e)return ia(r.shape,n,r.dtype);let o={x:r},i={clipValueMin:n,clipValueMax:e};return R.runKernel(Rc,o,i)}var ho=D({clipByValue_:vCe});function wCe(t){return gn(t,0)}var d_=D({concat1d_:wCe});function yCe(t,n){return gn(t,n)}var p_=D({concat2d_:yCe});function xCe(t,n){return gn(t,n)}var h_=D({concat3d_:xCe});function _Ce(t,n){return gn(t,n)}var f_=D({concat4d_:_Ce});function kCe(t,n,e,r,o="NHWC",i=[1,1],s){let a=b(t,"x","conv2d","float32"),l=b(n,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),zn("conv2d",r,s);let d=o==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),F(qo(e,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),F(xu(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),F(xu(e),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:l},h={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},f=R.runKernel(Td,p,h);return u?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Li=D({conv2d_:kCe});function bCe(t,n,e,r,o="NWC",i=1,s){let a=b(t,"x","conv1d"),l=b(n,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1]])),F(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),F(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),zn("conv1d",r,s),F(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),F(qo(e,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${i}'`),F(xu(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),F(xu(e),()=>"Error in conv1D: Stride should be larger than 0."),F(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let d=$(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=$(c,[c.shape[0],1,c.shape[1],c.shape[2]]),g=Li(p,d,[1,e],r,"NHWC",[1,i],s);return u?$(g,[g.shape[2],g.shape[3]]):$(g,[g.shape[0],g.shape[2],g.shape[3]])}var p0=D({conv1d_:bCe});function CCe(t,n,e,r,o,i="NHWC",s){F(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let a=t,l=n,c=!1;n.rank===3&&(c=!0,l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]),a=[1,t[0],t[1],t[2]]),F(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),F(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),F(e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);let u=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?l.shape[3]:l.shape[1];F(u===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),F(d===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${e.shape[3]}.`),zn("conv2dDerInput",o,s);let p={dy:l,filter:e},h={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},f=R.runKernel(Dd,p,h);return c?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var iv=D({conv2DBackpropInput_:CCe});function SCe(t,n,e,r,o,i){let s=b(t,"x","conv2dTranspose"),a=b(n,"filter","conv2dTranspose");return iv(e,s,a,r,o,"NHWC",i)}var h0=D({conv2dTranspose_:SCe});function MCe(t,n,e,r,o="NDHWC",i=[1,1,1]){let s=b(t,"x","conv3d"),a=b(n,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),F(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),F(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),F(qo(e,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),F(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),F(xu(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),F(xu(e),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},d={strides:e,pad:r,dataFormat:o,dilations:i},p=R.runKernel(Ed,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var m_=D({conv3d_:MCe});function TCe(t,n,e,r,o){F(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let i=t,s=n,a=!1;n.rank===4&&(a=!0,s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);let l=i[4],c=s.shape[4];F(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),F(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),F(e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),F(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),F(c===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${e.shape[4]}.`);let u={dy:s,filter:e},d={pad:o,strides:r,inputShape:i},p=R.runKernel(og,u,d);return a?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var PM=D({conv3DBackpropInput_:TCe});function DCe(t,n,e,r,o){let i=b(t,"x","conv3dTranspose"),s=b(n,"filter","conv3dTranspose");return PM(e,i,s,r,o)}var g_=D({conv3dTranspose_:DCe});function ECe(t){let e={x:b(t,"x","cos","float32")};return R.runKernel(Oc,e)}var gp=D({cos_:ECe});function ICe(t){let e={x:b(t,"x","cosh","float32")};return R.runKernel(Fc,e)}var f0=D({cosh_:ICe});function NCe(t,n=0,e=!1,r=!1){let i={x:b(t,"x","cumprod")},s={axis:n,exclusive:e,reverse:r};return R.runKernel(ig,i,s)}var Kh=D({cumprod_:NCe});function ACe(t,n=0,e=!1,r=!1){let i={x:b(t,"x","cumsum")},s={axis:n,exclusive:e,reverse:r};return R.runKernel(Id,i,s)}var m0=D({cumsum_:ACe});function RCe(t,n,e,r=!1){let o=b(t,"x","denseBincount"),i=b(n,"weights","denseBincount");F(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),F(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),F(e>=0,()=>`size must be non-negative, but got ${e}.`),F(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:e,binaryOutput:r};return R.runKernel(ag,s,a)}var sv=D({denseBincount_:RCe});function OCe(t,n,e="NHWC"){let r=b(t,"x","depthToSpace","float32"),o=e==="NHWC"?r.shape[1]:r.shape[2],i=e==="NHWC"?r.shape[2]:r.shape[3],s=e==="NHWC"?r.shape[3]:r.shape[1];F(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`),F(o*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${n}  for depthToSpace with input shape
    ${r.shape}`),F(i*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${n} for depthToSpace with input shape
        ${r.shape}`),F(s%(n*n)===0,()=>`Dimension size must be evenly divisible by ${n*n} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},l={blockSize:n,dataFormat:e};return R.runKernel(lg,a,l)}var v_=D({depthToSpace_:OCe});function FCe(t,n,e,r,o="NHWC",i=[1,1],s){let a=b(t,"x","depthwiseConv2d","float32"),l=b(n,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let d=o==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),zn("depthwiseConv2d",r,s);let p={x:c,filter:l},h={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},f=R.runKernel(Nd,p,h);return u?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Il=D({depthwiseConv2d_:FCe});function PCe(t){let e={x:b(t,"x","diag")};return R.runKernel(dg,e)}var o6=D({diag_:PCe});function BCe(t,n,e,r,o=[1,1],i="NHWC"){let s=b(t,"x","dilation2d"),a=b(n,"filter","dilation2d");F(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),F(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),F(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,c=!1;s.rank===3&&(l=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),F(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},d={strides:e,pad:r,dilations:o},p=R.runKernel(Ad,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var w_=D({dilation2d_:BCe});var os={};Qt(os,{assertAndGetBroadcastShape:()=>Ft,getBroadcastDims:()=>nZ,getReductionAxes:()=>Fn});function nZ(t,n){let e=t.length,r=[];for(let o=0;o<e;o++){let i=e-1-o,s=t[i]||1;(n[n.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function Fn(t,n){let e=[];for(let r=0;r<n.length;r++){let o=t[t.length-r-1],i=n.length-r-1,s=n[i];(o==null||o===1&&s>1)&&e.unshift(i)}return e}function Ft(t,n){let e=Math.max(t.length,n.length),r=new Array(e);for(let o=0;o<e;o++){let i=t[t.length-o-1];i==null&&(i=1);let s=n[n.length-o-1];if(s==null&&(s=1),i===1)r[e-o-1]=s;else if(s===1)r[e-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${t} and ${n}.`;throw Error(a)}else r[e-o-1]=i}return r}function LCe(t,n){let e=b(t,"a","equal","string_or_numeric"),r=b(n,"b","equal","string_or_numeric");[e,r]=rn(e,r),Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Ih,o)}var Mo=D({equal_:LCe});function $Ce(t,n,e){let r=b(n,"a","where"),o=b(e,"b","where"),i=b(t,"condition","where","bool"),s=Ft(Ft(i.shape,r.shape),o.shape),a=El(i,s),l=El(r,s),c=El(o,s),u={condition:a,t:l,e:c};return R.runKernel(tp,u)}var Nn=D({where_:$Ce});function VCe(t){let e={x:b(t,"x","zerosLike")};return R.runKernel(cp,e)}var dt=D({zerosLike_:VCe});function jCe(t,n){let e=b(t,"a","div"),r=b(n,"b","div");[e,r]=rn(e,r);let o=$e(e,r),i=dt(o),s=Mo(r,i);return Nn(s,i,o)}var y_=D({divNoNan_:jCe});function zCe(t,n){let e=b(t,"t1","dot"),r=b(n,"t2","dot");F((e.rank===1||e.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${r.rank}.`);let o=e.rank===1?e.size:e.shape[1],i=r.rank===1?r.size:r.shape[0];if(F(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),e.rank===1&&r.rank===1){let s=$(e,[1,-1]),a=$(r,[-1,1]),l=Bt(s,a);return $(l,[])}else if(e.rank===1&&r.rank===2){let s=$(e,[1,-1]),a=$(r,[r.shape[0],r.shape[1]]),l=Bt(s,a);return $(l,[l.size])}else if(e.rank===2&&r.rank===1){let s=$(r,[-1,1]),a=Bt(e,s);return $(a,[a.size])}else{let s=$(r,[r.shape[0],r.shape[1]]);return Bt(e,s)}}var x_=D({dot_:zCe});function HCe(t,...n){let e=n.map((o,i)=>b(o,`tensors${i}`,"einsum")),r={equation:t};return R.runKernel(pg,e,r)}var vp=D({einsum_:HCe});function UCe(t){let e={x:b(t,"x","elu","float32")};return R.runKernel(Bc,e)}var Nl=D({elu_:UCe});function GCe(t,n){let e=b(t,"x","ensureShape","string_or_numeric");if(!vF(e.shape,n))throw new Error(`EnsureShape: Shape of tensor ${e.shape} is not compatible with expected shape ${n}`);return t}var i6=D({ensureShape_:GCe});function WCe(t){let n=b(t,"x","erf");F(n.dtype==="int32"||n.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),n.dtype==="int32"&&(n=ge(n,"float32"));let e={x:n};return R.runKernel(Lc,e)}var g0=D({erf_:WCe});function s6(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function rZ(t,n,e){let r=t.length+n.length,o=[],i=0,s=0;for(let a=0;a<r;a++)e.indexOf(a)===-1?o.push(t[i++]):o.push(n[s++]);return o}function a6(t,n){let e=[],r=t.length;for(let i=0;i<r;i++)n.indexOf(i)===-1&&e.push(t[i]);let o=n.map(i=>t[i]);return[e,o]}function Ea(t,n){let e=n.map(r=>1);return rZ(t,e,n)}function qCe(t,n,e){F(s6(n,e),()=>`${t} supports only inner-most axes for now. Got axes ${n} and rank-${e} input.`)}function l6(t,n){if(s6(t,n))return null;let e=[];for(let r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(r=>e.push(r)),e}function __(t){return t.map((n,e)=>[e,n]).sort((n,e)=>n[1]-e[1]).map(n=>n[0])}function KCe(t,n){let e=[];for(let r=n-t;r<n;++r)e.push(r);return e}function ZCe(t,n=null,e=!1){let o={x:b(t,"x","max")},i={reductionIndices:n,keepDims:e};return R.runKernel(Ld,o,i)}var fo=D({max_:ZCe});function XCe(t,n=null,e=!1){let o={x:b(t,"x","min")},i={axis:n,keepDims:e};return R.runKernel(zd,o,i)}var _u=D({min_:XCe});function YCe(t,n){let e=b(t,"base","pow"),r=b(n,"exp","pow");[e,r]=rn(e,r);let o={a:e,b:r};return R.runKernel(Jc,o)}var Ko=D({pow_:YCe});function ze(t,n){if(($r(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&$r(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Bi(t,[],[],n)}function QCe(t){let e={x:b(t,"x","sqrt","float32")};return R.runKernel(du,e)}var En=D({sqrt_:QCe});function JCe(t){let n=b(t,"x","square"),e={};return R.runKernel("Square",{x:n},e)}var zt=D({square_:JCe});function e4e(t,n=null,e=!1){let r=b(t,"x","sum");r.dtype==="bool"&&(r=ge(r,"int32"));let o={x:r},i={axis:n,keepDims:e};return R.runKernel(rp,o,i)}var He=D({sum_:e4e});function t4e(t,n="euclidean",e=null,r=!1){t=b(t,"x","norm");let o=oZ(t,n,e),i=o.shape;if(r){let s=oo(e,t.shape);i=Ea(o.shape,s)}return $(o,i)}function oZ(t,n,e=null){if(t.rank===0)return jn(t);if(t.rank!==1&&e===null)return oZ($(t,[-1]),n,e);if(t.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(n===1)return He(jn(t),e);if(n===1/0)return fo(jn(t),e);if(n===-1/0)return _u(jn(t),e);if(n==="euclidean"||n===2)return En(He(Ko(jn(t),ze(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(e)&&e.length===2){if(n===1)return fo(He(jn(t),e[0]),e[1]-1);if(n===1/0)return fo(He(jn(t),e[1]),e[0]);if(n===-1/0)return _u(He(jn(t),e[1]),e[0]);if(n==="fro"||n==="euclidean")return En(He(zt(t),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}var ku=D({norm_:t4e});function n4e(t,n=null,e=!1){return ku(t,"euclidean",n,e)}var k_=D({euclideanNorm_:n4e});function r4e(t){let e={x:b(t,"x","exp")};return R.runKernel($c,e)}var pr=D({exp_:r4e});function o4e(t,n=0){let e=b(t,"x","expandDims","string_or_numeric");F(n<=e.rank,()=>"Axis must be <= rank of the tensor");let r={input:e},o={dim:n};return R.runKernel(Rd,r,o)}var hr=D({expandDims_:o4e});function i4e(t){let e={x:b(t,"x","expm1")};return R.runKernel(Vc,e)}var b_=D({expm1_:i4e});function s4e(t,n){let e=b(t,"x","tile","string_or_numeric");F(e.rank===n.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${n}.`);let r={x:e},o={reps:n};return R.runKernel(_l,r,o)}var To=D({tile_:s4e});function a4e(t,n,e,r="float32"){n==null&&(n=t);let o=st([t,n],r),i=t<=n?t:n;for(let a=0;a<i;++a)o.set(1,a,a);let s=$(o.toTensor(),[t,n]);if(e==null)return s;if(e.length===1)return To(hr(s,0),[e[0],1,1]);if(e.length===2)return To(hr(hr(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return To(hr(hr(hr(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}var Zh=D({eye_:a4e});function l4e(t){let e={x:b(t,"x","floor","float32")};return R.runKernel(jc,e)}var Al=D({floor_:l4e});function c4e(t,n,e=0,r=0){let o=b(t,"x","gather"),i=b(n,"indices","gather","int32"),s={x:o,indices:i},a={axis:e,batchDims:r};return R.runKernel(Fd,s,a)}var Rl=D({gather_:c4e});function u4e(t,n){let e=b(t,"a","greater","string_or_numeric"),r=b(n,"b","greater","string_or_numeric");[e,r]=rn(e,r),Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Nh,o)}var Xn=D({greater_:u4e});function d4e(t,n){let e=b(t,"a","greaterEqual","string_or_numeric"),r=b(n,"b","greaterEqual","string_or_numeric");[e,r]=rn(e,r),Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Hc,o)}var _i=D({greaterEqual_:d4e});function p4e(t){let e={input:b(t,"input","imag")};return R.runKernel(yg,e)}var wp=D({imag_:p4e});function h4e(t){let e={x:b(t,"x","isFinite")};return R.runKernel(Uc,e)}var C_=D({isFinite_:h4e});function f4e(t){let e={x:b(t,"x","isInf")};return R.runKernel(Gc,e)}var S_=D({isInf_:f4e});function m4e(t){let e={x:b(t,"x","isNaN")};return R.runKernel(Wc,e)}var M_=D({isNaN_:m4e});function g4e(t,n=.2){let r={x:b(t,"x","leakyRelu")},o={alpha:n};return R.runKernel(Pd,r,o)}var yp=D({leakyRelu_:g4e});function v4e(t,n){let e=b(t,"a","less","string_or_numeric"),r=b(n,"b","less","string_or_numeric");[e,r]=rn(e,r),Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Ah,o)}var bu=D({less_:v4e});function w4e(t,n){let e=b(t,"a","lessEqual","string_or_numeric"),r=b(n,"b","lessEqual","string_or_numeric");[e,r]=rn(e,r),Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Rh,o)}var is=D({lessEqual_:w4e});function u6(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");let r={start:t,stop:n,num:e};return R.runKernel(xg,{},r)}function y4e(t,n=5,e=1,r=1,o=.5){let i=b(t,"x","localResponseNormalization");F(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),F(gd(n),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${n}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=$(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},c={depthRadius:n,bias:e,alpha:r,beta:o},u=R.runKernel(Bd,l,c);return a?$(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var T_=D({localResponseNormalization_:y4e});function x4e(t){let e={x:b(t,"x","log","float32")};return R.runKernel(qc,e)}var mo=D({log_:x4e});function _4e(t){let e={x:b(t,"x","log1p")};return R.runKernel(Kc,e)}var xp=D({log1p_:_4e});function iZ(t){return F(bc(t),()=>"The f passed in grad(f) must be a function"),(n,e)=>{let r=b(n,"x","tf.grad","string_or_numeric"),o=e!=null?b(e,"dy","tf.grad"):null;return R.tidy(()=>{let{value:i,grads:s}=R.gradients(()=>t(r),[r],o);return o!=null&&nr(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),BM(s),s[0]})}}function sZ(t){return F(bc(t),()=>"The f passed in grads(f) must be a function"),(n,e)=>{F(Array.isArray(n),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=dp(n,"args","tf.grads","string_or_numeric"),o=e!=null?b(e,"dy","tf.grads"):null;return R.tidy(()=>{let{value:i,grads:s}=R.gradients(()=>t(...r),r,o);return o!=null&&nr(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),BM(s),s})}}function aZ(t){return F(bc(t),()=>"The f passed in valueAndGrad(f) must be a function"),(n,e)=>{F(n instanceof Ot,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),F(e==null||e instanceof Ot,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=R.gradients(()=>t(n),[n],e);return BM(r),{grad:r[0],value:o}}}function lZ(t){return F(bc(t),()=>"The f passed in valueAndGrads(f) must be a function"),(n,e)=>{F(Array.isArray(n)&&n.every(o=>o instanceof Ot),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),F(e==null||e instanceof Ot,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=R.gradients(()=>t(...n),n,e);return e!=null&&nr(r.value.shape,e.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),BM(r.grads),r}}function D_(t,n){F(bc(t),()=>"The f passed in variableGrads(f) must be a function"),F(n==null||Array.isArray(n)&&n.every(c=>c instanceof wu),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let e=n!=null;if(!e){n=[];for(let c in R.registeredVariables)n.push(R.registeredVariables[c])}let r=e?n.filter(c=>!c.trainable):null,o=n.length;n=n.filter(c=>c.trainable),F(n.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=R.gradients(t,n,null,i);F(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),F(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return n.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function ki(t){return R.customGrad(t)}function BM(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function k4e(t){let e={x:b(t,"x","neg")};return R.runKernel(Ud,e)}var Kt=D({neg_:k4e});function b4e(t){let e={x:b(t,"x","softplus")};return R.runKernel(uu,e)}var Ia=D({softplus_:b4e});function C4e(t){let n=b(t,"x","logSigmoid");return ki(r=>({value:Kt(Ia(Kt(r))),gradFunc:s=>L(s,ui(Kt(r)))}))(n)}var E_=D({logSigmoid_:C4e});function S4e(t,n){let e=b(t,"a","sub"),r=b(n,"b","sub");[e,r]=rn(e,r);let o={a:e,b:r};return R.runKernel(hu,o)}var Pe=D({sub_:S4e});function M4e(t,n=-1){let e=b(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${n}`);return ki((o,i)=>{let a=fo(o,n,!0),l=Pe(o,a),c=Pe(ge(l,"float32"),mo(He(pr(l),n,!0)));return i([c]),{value:c,gradFunc:(d,p)=>{let[h]=p,f=!0,m=pr(h);return Pe(d,L(He(d,n,f),m))}}})(e)}var v0=D({logSoftmax_:M4e});function T4e(t,n=null,e=!1){let r=b(t,"x","logSumExp"),o=oo(n,r.shape),i=fo(r,o,!0),s=Pe(r,i),a=pr(s),l=He(a,o),c=mo(l),u=fe($(i,c.shape),c);if(e){let d=Ea(u.shape,o);return $(u,d)}return u}var _p=D({logSumExp_:T4e});function D4e(t,n){let e=b(t,"a","logicalAnd","bool"),r=b(n,"b","logicalAnd","bool");Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Oh,o)}var Do=D({logicalAnd_:D4e});function E4e(t){let e={x:b(t,"x","logicalNot","bool")};return R.runKernel(Fh,e)}var kp=D({logicalNot_:E4e});function I4e(t,n){let e=b(t,"a","logicalOr","bool"),r=b(n,"b","logicalOr","bool");Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Ph,o)}var w0=D({logicalOr_:I4e});function N4e(t,n){let e=b(t,"a","logicalXor","bool"),r=b(n,"b","logicalXor","bool");return Ft(e.shape,r.shape),Do(w0(t,n),kp(Do(t,n)))}var I_=D({logicalXor_:N4e});var LM=2147483648;function A4e(t,n,e="left"){let r=b(t,"sortedSequence","searchSorted"),o=b(n,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=$(r,[-1,i]),l=$(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(nn(l.shape)>=LM)throw new Error(`values tensor size must less than ${LM}`);if(a.shape[1]>=LM)throw new Error(`trailing dim_size must less than ${LM} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:l},u={side:e};return R.runKernel(Lg,c,u)}var av=D({searchSorted_:A4e});function d6(t,n){return av(t,n,"left")}function R4e(t,n,e,r,o){let i=b(t,"x","maxPool"),s=1,a=i,l=!1;i.rank===3&&(l=!0,a=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),F(qo(e,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),zn("maxPool",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o},d=R.runKernel($d,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var bp=D({maxPool_:R4e});function O4e(t,n=[1,1,1],e,r,o,i="NDHWC"){let s=b(t,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),F(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),zn("maxPool3d",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o,dataFormat:i},d=R.runKernel(Vd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var N_=D({maxPool3d_:O4e});function F4e(t,n,e,r,o=!1){let s={x:b(t,"x","maxPoolWithArgmax")},a={filterSize:n,strides:e,pad:r,includeBatchInIndex:o},l=R.runKernel(Cg,s,a);return{result:l[0],indexes:l[1]}}var p6=D({maxPoolWithArgmax_:F4e});function P4e(t,n){let e=b(t,"a","maximum"),r=b(n,"b","maximum");[e,r]=rn(e,r),e.dtype==="bool"&&(e=ge(e,"int32"),r=ge(r,"int32")),Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Zc,o)}var $i=D({maximum_:P4e});function B4e(t,n=null,e=!1){let o={x:b(t,"x","mean")},i={axis:n,keepDims:e};return R.runKernel(jd,o,i)}var Pn=D({mean_:B4e});function Bn(t,n="float32"){if(ur(t),n==="complex64"){let r=Bn(t,"float32"),o=Bn(t,"float32");return Pi(r,o)}let e=V1(nn(t),n);return R.makeTensor(e,t,n)}function Dr(t,n="float32"){if(ur(t),n==="complex64"){let r=Dr(t,"float32"),o=Bn(t,"float32");return Pi(r,o)}let e=Px(nn(t),n);return R.makeTensor(e,t,n)}function h6(t,n,{indexing:e="xy"}={}){if(e!=="xy"&&e!=="ij")throw new TypeError(`${e} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=b(t,"x","meshgrid",t instanceof Ot?t.dtype:"float32");if(n===void 0)return[r];let o=b(n,"y","meshgrid",n instanceof Ot?n.dtype:"float32"),i=nn(r.shape),s=nn(o.shape);return e==="xy"?(r=$(r,[1,-1]),o=$(o,[-1,1]),[Bt(Dr([s,1],r.dtype),r),Bt(o,Dr([1,i],o.dtype))]):(r=$(r,[-1,1]),o=$(o,[1,-1]),[Bt(r,Dr([1,s],r.dtype)),Bt(Dr([i,1],o.dtype),o)])}function L4e(t,n){let e=b(t,"a","minimum"),r=b(n,"b","minimum");[e,r]=rn(e,r),e.dtype==="bool"&&(e=ge(e,"int32"),r=ge(r,"int32")),Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Xc,o)}var Fs=D({minimum_:L4e});function $4e(t,n,e){F(e==="reflect"||e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);let r=b(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");F(n.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${n.length}.`);let o=e==="reflect"?1:0;for(let a=0;a<r.rank;a++)F(n[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),F(n[a][0]>=0&&n[a][0]<=r.shape[a]-o&&n[a][1]>=0&&n[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:n,mode:e},s={x:r};return R.runKernel(Hd,s,i)}var A_=D({mirrorPad_:$4e});function V4e(t,n){let e=b(t,"a","mod"),r=b(n,"b","mod");[e,r]=rn(e,r);let o={a:e,b:r};return R.runKernel(Yc,o)}var R_=D({mod_:V4e});function j4e(t,n=null,e=!1){t=b(t,"x","moments");let r=oo(n,t.shape),o=Pn(t,r,e),i=o.shape;e||(i=Ea(o.shape,r));let s=zt(Pe(ge(t,"float32"),$(o,i))),a=Pn(s,r,e);return{mean:o,variance:a}}var Xh=D({moments_:j4e});function z4e(t,n,e,r){let o=b(n,"data","multiRNNCell"),i=dp(e,"c","multiRNNCell"),s=dp(r,"h","multiRNNCell"),a=o,l=[];for(let d=0;d<t.length;d++){let p=t[d](a,i[d],s[d]);l.push(p[0]),l.push(p[1]),a=p[1]}let c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}var f6=D({multiRNNCell_:z4e});function H4e(t,n,e,r=!1){let o=b(t,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);e=e||Math.random();let l={logits:s===1?$(o,[1,-1]):o},c={numSamples:n,seed:e,normalized:r},u=R.runKernel(Sg,l,c);return s===1?$(u,[u.size]):u}var m6=D({multinomial_:H4e});function U4e(t,n){let e=b(t,"a","notEqual","string_or_numeric"),r=b(n,"b","notEqual","string_or_numeric");[e,r]=rn(e,r),Ft(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Bh,o)}var Na=D({notEqual_:U4e});function G4e(t,n,e=1,r=0,o="int32"){if(n<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${n}`);let s={indices:b(t,"indices","oneHot","int32")},a={dtype:o,depth:n,onValue:e,offValue:r};return R.runKernel(Wd,s,a)}var Ol=D({oneHot_:G4e});function W4e(t){let e={x:b(t,"x","onesLike")};return R.runKernel(Gd,e)}var io=D({onesLike_:W4e});function q4e(t,n){let e=b(t,"v1","outerProduct"),r=b(n,"v2","outerProduct");F(e.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${e.rank} and ${r.rank}.`);let o=$(e,[-1,1]),i=$(r,[1,-1]);return Bt(o,i)}var g6=D({outerProduct_:q4e});function K4e(t,n,e=0){let r=b(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:n,constantValue:e},i={x:r};return R.runKernel(Kd,i,o)}var bi=D({pad_:K4e});function Z4e(t,n,e=0){return F(n.length===2,()=>"Invalid number of paddings. Must be length of 2."),bi(t,[n],e)}var v6=D({pad1d_:Z4e});function X4e(t,n,e=0){return F(n.length===2&&n[0].length===2&&n[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),bi(t,n,e)}var w6=D({pad2d_:X4e});function Y4e(t,n,e=0){return F(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),bi(t,n,e)}var y6=D({pad3d_:Y4e});function Q4e(t,n,e=0){return F(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),bi(t,n,e)}var x6=D({pad4d_:Q4e});function J4e(t,n,e){let r=b(t,"x","spaceToBatchND");F(r.rank>=1+n.length,()=>`input rank ${r.rank} should be > than [blockShape] ${n.length}`),F(e.length===n.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${n.length}`),F(r.shape.reduce((s,a,l)=>l>0&&l<=n.length?s&&(a+e[l-1][0]+e[l-1][1])%n[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${n.toString()}`);let o={x:r},i={blockShape:n,paddings:e};return R.runKernel(op,o,i)}var Cp=D({spaceToBatchND_:J4e});function eSe(t,n,e,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=b(t,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(qo(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let u=JF(l.shape,n,i,o,r),d=[u.dilationHeight,u.dilationWidth],p;r==="same"?p=nSe([u.filterHeight,u.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[f,m]=tSe([u.inHeight,u.inWidth],d,p),g=h?r:"valid",v=h?l:Cp(l,d,f),y=(e==="avg"?()=>fp(v,n,i,g,s):()=>bp(v,n,i,g,s))(),_=h?y:mp(y,d,m);return c?$(_,[_.shape[1],_.shape[2],_.shape[3]]):_}function tSe(t,n,e){let r=e.map(u=>u[0]),o=e.map(u=>u[1]),i=t.concat(r,o),s=n.map((u,d)=>(u-i[d]%u)%u),a=o.map((u,d)=>u+s[d]),l=n.map((u,d)=>[r[d],a[d]]),c=n.map((u,d)=>[0,s[d]]);return[l,c]}function nSe(t,n){let r=t.map((s,a)=>s+(s-1)*(n[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var O_=D({pool_:eSe});function rSe(t,n){let e=b(t,"x","prelu"),r=b(n,"alpha","prelu"),o={x:e,alpha:r};return R.runKernel(Zd,o)}var Sp=D({prelu_:rSe});function oSe(t,n=null,e=!1){let r=b(t,"x","prod");r.dtype==="bool"&&(r=ge(r,"int32"));let o={x:r},i={axis:n,keepDims:e};return R.runKernel(Xd,o,i)}var F_=D({prod_:oSe});function iSe(t,n,e,r){let o=t.map((u,d)=>b(u,`tensors${d}`,"raggedGather","int32")),i=b(n,"paramsDenseValues","raggedGather"),s=b(e,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},l={outputRaggedRank:r},c=R.runKernel(Eg,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var _6=D({raggedGather_:iSe});function sSe(t,n,e){let r=b(t,"starts","raggedRange"),o=b(n,"limits","raggedRange",r.dtype),i=b(e,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=R.runKernel(Ig,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var k6=D({raggedRange_:sSe});function aSe(t,n,e,r,o){let i=b(t,"shape","raggedTensorToTensor","int32"),s=b(n,"values","raggedTensorToTensor"),a=b(e,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((d,p)=>b(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:o};return R.runKernel(Ng,c,u)}var b6=D({raggedTensorToTensor_:aSe});function lSe(t,n,e){ur(t);let r=nn(t),o=null;if(e==null||e==="float32")o=new Float32Array(r);else if(e==="int32")o=new Int32Array(r);else if(e==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${e}`);for(let i=0;i<r;i++)o[i]=n();return R.makeTensor(o,t,e)}var C6=D({rand_:lSe});var zM=S2(P_());var O6={};Qt(O6,{TEST_EPSILON_FLOAT16:()=>SZ,createVideoElement:()=>kSe,encodeStrings:()=>MZ,expectArrayBuffersEqual:()=>_Se,expectArraysClose:()=>gSe,expectArraysEqual:()=>wSe,expectNumbersClose:()=>ySe,expectPromiseToFail:()=>vSe,expectValuesInRange:()=>xSe,play:()=>bSe,testEpsilon:()=>A6});var mSe=.001,SZ=.1;function gSe(t,n,e){return e==null&&(e=A6()),N6(t,n,(r,o)=>R6(r,o,e))}function A6(){return R.backend.floatPrecision()===32?mSe:SZ}function N6(t,n,e){let r=!0;if(($r(t)||$r(n))&&(r=!1),$r(t)&&$r(n)&&(r=!0),r){let s=t.constructor.name,a=n.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(n)){let s=li(t),a=li(n);if(!Oi(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let o=$r(t)?t:Cl(t),i=$r(n)?n:Cl(n);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.
Actual:   ${o}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let a=o[s],l=i[s];if(!e(a,l))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${l}.
Actual:   ${o}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function vSe(t,n){t().then(()=>n.fail(),()=>n()),typeof expect<"u"&&expect().nothing()}function wSe(t,n){let e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return wl(t)||wl(t[0])||wl(n)||wl(n[0])?N6(t,e,(r,o)=>r==o):N6(t,n,(r,o)=>R6(r,o,0))}function ySe(t,n,e){if(e==null&&(e=A6()),!R6(t,n,e))throw new Error(`Numbers differ: actual === ${t}, expected === ${n}`);typeof expect<"u"&&expect().nothing()}function R6(t,n,e){return!isFinite(t)&&!isFinite(n)?!0:!(isNaN(t)||isNaN(n)||Math.abs(t-n)>e)}function xSe(t,n,e){for(let r=0;r<t.length;r++)if(t[r]<n||t[r]>e)throw new Error(`Value out of range:${t[r]} low: ${n}, high: ${e}`)}function _Se(t,n){let e=new Float32Array(t),r=new Float32Array(n);if(e.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${e.length}`);for(let o=0;o<r.length;o++)if(e[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${e[o]} instead`)}function MZ(t){for(let n=0;n<t.length;n++){let e=t[n];Array.isArray(e)?MZ(e):t[n]=Hh(e)}return t}function kSe(t){let n=document.createElement("video");return"playsInline"in n&&(n.playsInline=!0),n.muted=!0,n.loop=!0,n.style.position="fixed",n.style.left="0px",n.style.top="0px",n.preload="auto",n.appendChild(t),new Promise(e=>{n.addEventListener("loadeddata",r=>e(n)),n.load()})}function bSe(t){return z(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(n=>{t.requestVideoFrameCallback(n)}))})}var x0=class{constructor(n,e,r,o,i){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=zM.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let n,e,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*o*a,e=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(n))&&(r=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(n)}convertValue(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)}isValidTruncated(n){return n<=this.upper&&n>=this.lower}},VM=class{constructor(n,e,r,o){this.alpha=n,this.beta=1/e,this.dtype=r;let i=o||Math.random();this.randu=zM.alea(i.toString()),this.randn=new x0(0,1,r,!1,this.randu()),n<1?this.d=n+2/3:this.d=n-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let n,e,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,n=o*o,e=1-.331*n*n,r=.5*n+this.d*(1-s+Math.log(s)),i=this.randu(),i<e||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(n){return this.dtype==="float32"?n:Math.round(n)}},jM=class{constructor(n=0,e=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=n,this.range=e-n,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${n} - ${e} <= 1 and dtype is not float`);this.random=zM.alea(o)}convertValue(n){return this.canReturnFloat()?n:Math.round(n)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function CSe(t,n,e=1,r="float32",o){if(ur(t),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new VM(n,e,r,o),s=st(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var F6=D({randomGamma_:CSe});function SSe(t,n=0,e=1,r,o){if(ur(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new x0(n,e,r,!1,o),s=st(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var Yh=D({randomNormal_:SSe});function MSe(t,n,e){if(n!=null&&n==="bool")throw new Error(`Unsupported data type ${n}`);return Yh(t,0,1,n,e)}var P6=D({randomStandardNormal_:MSe});function TSe(t,n=0,e=1,r="float32",o){ur(t);let i=st(t,r),s=new jM(n,e,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var ss=D({randomUniform_:TSe});function DSe(t,n,e,r){return ss(t,n,e,"int32",r)}var B6=D({randomUniformInt_:DSe});function Fl(t,n,e=1,r="float32"){if(e===0)throw new Error("Cannot have a step of zero");let o={start:t,stop:n,step:e,dtype:r};return R.runKernel(Ag,{},o)}function ESe(t){let e={input:b(t,"input","real")};return R.runKernel(Rg,e)}var Cu=D({real_:ESe});function ISe(t){let e={x:b(t,"x","reciprocal")};return R.runKernel(eu,e)}var B_=D({reciprocal_:ISe});function NSe(t){let e={x:b(t,"x","relu")};return R.runKernel(tu,e)}var Eo=D({relu_:NSe});function ASe(t){let e={x:b(t,"x","relu6")};return R.runKernel(nu,e)}var _0=D({relu6_:ASe});function RSe(t,n){let r={x:b(t,"x","reverse")},o={dims:n};return R.runKernel(ep,r,o)}var qr=D({reverse_:RSe});function OSe(t){let n=b(t,"x","reverse");return F(n.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${n.rank}.`),qr(n,0)}var L6=D({reverse1d_:OSe});function FSe(t,n){let e=b(t,"x","reverse");return F(e.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${e.rank}.`),qr(e,n)}var $6=D({reverse2d_:FSe});function PSe(t,n){let e=b(t,"x","reverse");return F(e.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${e.rank}.`),qr(e,n)}var V6=D({reverse3d_:PSe});function BSe(t,n){let e=b(t,"x","reverse");return F(e.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${e.rank}.`),qr(e,n)}var j6=D({reverse4d_:BSe});function LSe(t){let e={x:b(t,"x","round")};return R.runKernel(ru,e)}var k0=D({round_:LSe});function $Se(t){let e={x:b(t,"x","rsqrt","float32")};return R.runKernel(ou,e)}var b0=D({rsqrt_:$Se});function VSe(t){let e={x:b(t,"x","selu")};return R.runKernel(iu,e)}var C0=D({selu_:VSe});function jSe(t,n,e,r,o,i=[1,1],s="NHWC"){let a=b(t,"x","separableConv2d"),l=b(n,"depthwiseFilter","separableConv2d"),c=b(e,"pointwiseFilter","separableConv2d"),u=a,d=!1;if(a.rank===3&&(d=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),F(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),F(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),F(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],h=l.shape[3];F(c.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`);let f=Il(u,l,r,o,s,i),g=Li(f,c,1,"valid",s);return d?$(g,[g.shape[1],g.shape[2],g.shape[3]]):g}var S0=D({separableConv2d_:jSe});function zSe(t,n){return z(this,null,function*(){let e=b(t,"x","setdiff1d"),r=b(n,"y","setdiff1d");F(e.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${e.dtype}) and y (${r.dtype}).`),F(e.rank===1,()=>`x should be 1D tensor, but got x (${e.shape}).`),F(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=yield e.data(),i=yield r.data(),s=new Set(i),a=0;for(let u=0;u<o.length;u++)s.has(o[u])||a++;let l=new wn([a],e.dtype),c=new wn([a],"int32");for(let u=0,d=0;u<o.length;u++)s.has(o[u])||(l.values[d]=o[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]})}var z6=zSe;function HSe(t){let e={x:b(t,"x","sign")};return R.runKernel(lu,e)}var L_=D({sign_:HSe});function USe(t){let e={x:b(t,"x","sin","float32")};return R.runKernel(su,e)}var M0=D({sin_:USe});function GSe(t){let e={x:b(t,"x","sinh")};return R.runKernel(au,e)}var T0=D({sinh_:GSe});function WSe(t,n,e){let r=b(t,"x","slice1d");return F(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Nt(r,[n],[e])}var D0=D({slice1d_:WSe});function qSe(t,n,e){let r=b(t,"x","slice2d");return F(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Nt(r,n,e)}var lv=D({slice2d_:qSe});function KSe(t,n,e){let r=b(t,"x","slice3d");return F(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Nt(r,n,e)}var E0=D({slice3d_:KSe});function ZSe(t,n,e){let r=b(t,"x","slice4d");return F(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Nt(r,n,e)}var Qh=D({slice4d_:ZSe});function XSe(t,n=-1){let e=b(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${n}`);let r={logits:e},o={dim:n};return R.runKernel(sp,r,o)}var Mp=D({softmax_:XSe});function YSe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let n={input:t};return R.runKernel(fg,n)}var Tp=D({fft_:YSe});function QSe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let n={input:t};return R.runKernel(wg,n)}var Su=D({ifft_:QSe});function JSe(t){let n=t.shape[t.shape.length-1],e=t.size/n,r;if(n<=2){let o=$(t,[e,n]);r=Su(o)}else{let o=[e,2*(n-1)],i=$(Cu(t),[e,n]),s=$(wp(t),[e,n]),a=qr(Nt(i,[0,1],[e,n-2]),1),l=L(qr(Nt(s,[0,1],[e,n-2]),1),ze(-1)),c=gn([i,a],1),u=gn([s,l],1),d=$(Pi(c,u),[o[0],o[1]]);r=Su(d)}if(r=Cu(r),t.rank===3&&t.shape[0]!==0){let o=r,i=t.shape[0];r=$(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var I0=D({irfft_:JSe});function eMe(t,n,e=0){let o={x:b(t,"x","split")},i={numOrSizeSplits:n,axis:e};return R.runKernel(ip,o,i)}var Kr=D({split_:eMe});function tMe(t,n){F(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let e=t.shape[t.shape.length-1],r=t.size/e,o;if(n!=null&&n<e){let f=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=n,o=Nt(t,f,m),e=n}else if(n!=null&&n>e){let f=t.shape.map(m=>m);f[t.shape.length-1]=n-e,o=gn([t,Bn(f)],t.shape.length-1),e=n}else o=t;let i=dt(o),s=$(Pi(o,i),[r,e]),a=Tp(s),l=Math.floor(e/2)+1,c=Cu(a),u=wp(a),d=Kr(c,[l,e-l],c.shape.length-1),p=Kr(u,[l,e-l],u.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,$(Pi(d[0],p[0]),h)}var Dp=D({rfft_:tMe});function nMe(t,n){let e=b(t,"a","squaredDifference"),r=b(n,"b","squaredDifference");[e,r]=rn(e,r),Ft(e.shape,r.shape);let o={a:e,b:r},i={};return R.runKernel(pu,o,i)}var N0=D({squaredDifference_:nMe});function rMe(t,n){let e=b(t,"x","squeeze","string_or_numeric");return $(e,wF(e.shape,n).newShape)}var as=D({squeeze_:rMe});function oMe(t,n=0){let e=dp(t,"tensors","stack","string_or_numeric");F(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&F(n<=e[0].rank,()=>"Axis must be <= rank of the tensor");let r=e,o={axis:n};return R.runKernel(qd,r,o)}var Yn=D({stack_:oMe});function iMe(t,n=0){let r={x:b(t,"x","step")},o={alpha:n};return R.runKernel(gu,r,o)}var sa=D({step_:iMe});function sMe(t,n,e,r,o=0,i=0,s=0,a=0,l=0){let u={x:b(t,"x","stridedSlice","string_or_numeric")},d={begin:n,end:e,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return R.runKernel(Gg,u,d)}var $_=D({stridedSlice_:sMe});function aMe(t){let e={x:b(t,"x","tan","float32")};return R.runKernel(fu,e)}var V_=D({tan_:aMe});function Qn(t,n){ea(t);let e=li(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Bi(t,null,e,n)}function Aa(t,n,e){if(ea(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=li(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Bi(t,n,r,e)}function j_(t,n,e){if(ea(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=li(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Bi(t,n,r,e)}function H6(t,n,e){if(ea(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=li(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Bi(t,n,r,e)}function U6(t,n,e){if(ea(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=li(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Bi(t,n,r,e)}function G6(t,n,e){if(ea(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=li(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return n=n||r,Bi(t,n,r,e)}var z_={};Qt(z_,{calculateShapes:()=>TZ,validateInput:()=>cv,validateUpdateShape:()=>W6});function W6(t,n,e){let r=n.rank>1?n.shape[n.rank-1]:1,o=n.rank>1?n.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${n.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(e.rank<o)throw new Error(i+` update.rank < ${o}. `);if(t.length<r+(e.rank-o))throw new Error(i+` Output shape length < ${r+(e.rank-o)}`);if(e.rank!==o+t.length-r)throw new Error(i+` update.rank != ${o+t.length-r}`);for(let s=0;s<o;++s)if(e.shape[s]!==n.shape[s])throw new Error(i+` updates.shape[${s}] (${e.shape[s]}) != indices.shape[${s}] (${n.shape[s]}).`);for(let s=0;s<e.rank-o;++s)if(e.shape[s+o]!==t[s+r])throw new Error(i+` updates.shape[${s+o}] (${e.shape[s+o]}) != shape[${s+o}] (${t[s+o]})`)}function cv(t,n,e){if(n.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(n.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${n.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(e.length===0){if(n.size===0)throw new Error(`Indices specified for empty output. indices shape: ${n.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}W6(e,n,t)}function TZ(t,n,e){let r=n.shape.length,o=r>1?n.shape[r-1]:1,i=e.length,s=1;for(let d=o;d<i;++d)s*=e[d];let a=o<1?1:o,l=nn(n.shape)/a,c=[...Cc(e.slice(0,o)),1],u=nn(e);return{sliceRank:o,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function lMe(t,n,e){let r=b(t,"tensor","tensorScatterupdate"),o=b(n,"indices","tensorScatterupdate","int32"),i=b(e,"updates","tensorScatterupdate");if(cv(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return R.runKernel(Bg,s,a)}var q6=D({tensorScatterUpdate_:lMe});function cMe(t,n=1,e=!0){let r=b(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${n}`);let i={x:r},s={k:n,sorted:e},[a,l]=R.runKernel(Zg,i,s);return{values:a,indices:l}}var H_=D({topk_:cMe});function uMe(t,n=0,e=1,r,o){if(ur(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new x0(n,e,r,!0,o),s=st(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var A0=D({truncatedNormal_:uMe});function dMe(t,n=0){let e=b(t,"x","unique","string_or_numeric");F(e.rank>0,()=>"The input tensor must be at least 1D");let r={x:e},o={axis:n},[i,s]=R.runKernel(Yg,r,o);return{values:i,indices:s}}var U_=D({unique_:dMe});function pMe(t,n,e){let r=b(t,"x","unsortedSegmentSum"),o=b(n,"segmentIds","unsortedSegmentSum","int32");F(gd(e),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:e};return R.runKernel(lp,i,s)}var R0=D({unsortedSegmentSum_:pMe});function hMe(t,n=0){let e=b(t,"x","unstack","string_or_numeric");F(n>=-e.shape.length&&n<e.shape.length,()=>`Axis = ${n} is not in [-${e.shape.length}, ${e.shape.length})`);let r={value:e},o={axis:n};return R.runKernel(ap,r,o)}var Zr=D({unstack_:hMe});function K6(t,n){return av(t,n,"right")}function G_(t,n=!0,e,r){return R.makeVariable(t,n,e,r)}function HM(t,n){let e=[];for(let i=0;i<n.length;i++)n[i]&&e.push(i);let r=st(t,"int32"),o=st([e.length,t.length],"int32");for(let i=0;i<e.length;i++){let s=r.indexToLoc(e[i]),a=i*t.length;o.values.set(s,a)}return o.toTensor()}function fMe(t){return z(this,null,function*(){let n=b(t,"condition","whereAsync","bool"),e=yield n.data(),r=HM(n.shape,e);return t!==n&&n.dispose(),r})}var W_=fMe;function mMe(t,n,e){return z(this,null,function*(){let r=b(t,"tensor","boolMask"),o=b(n,"mask","boolMask","bool"),i=e??0,s=o.rank,a=r.shape;F(s>0,()=>"mask cannot be scalar"),nr(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+s;m++)l*=a[m];let c=a.slice(0,i).concat([l],a.slice(i+s)),u=$(r,c),d=$(o,[-1]),p=yield W_(d),h=as(p,[1]),f=Rl(u,h,i);return t!==r&&r.dispose(),n!==o&&o.dispose(),h.dispose(),u.dispose(),d.dispose(),p.dispose(),f})}var DZ=mMe;function gMe(t,n,e){let r=b(t,"x","transpose");if(n==null&&(n=r.shape.map((s,a)=>a).reverse()),F(r.rank===n.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${n}.`),n.forEach(s=>{F(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${n}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:n};return r.dtype==="complex64"?ne(()=>{let s=Cu(r),a=wp(r);return s=R.runKernel(kl,{x:s},i),a=R.runKernel(kl,{x:a},i),e&&(a=Kt(a)),Pi(s,a)}):R.runKernel(kl,o,i)}var Lt=D({transpose_:gMe});function vMe(t,n,e,r,o=!0){let i=b(t,"v","movingAverage"),s=b(n,"x","movingAverage"),a=b(e,"decay","movingAverage");PF(i,s),F(Oi(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=ze(1),c=Pe(l,a),u=L(Pe(s,i),c);if(o){F(r!=null,()=>"When using zeroDebias: true, step is required.");let d=b(r,"step","movingAverage");u=$e(u,Pe(l,Ko(a,d)))}return fe(i,u)}var EZ=D({movingAverage_:vMe});function wMe(t,n,e){ur(e);let r=b(t,"indices","scatterND","int32"),o=b(n,"updates","scatterND");cv(o,r,e);let i={indices:r,updates:o},s={shape:e};return R.runKernel(Pg,i,s)}var IZ=D({scatterND_:wMe});function NZ(t,n,e,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let o=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(e.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${e.length}, should be: ${i}.`);let s=n.size;if(!(n.rank===0||n.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${n.shape}, should be [] or [${o}]`);if(n.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function xMe(t,n,e,r=0){ur(e);let o=b(t,"sparseIndices","sparseToDense","int32"),i=b(n,"sparseValues","sparseToDense","string_or_numeric"),s=b(r,"defaultValue","sparseToDense",i.dtype);NZ(o,i,e,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},l={outputShape:e};return R.runKernel(Hg,a,l)}var AZ=D({sparseToDense_:xMe});function _Me(t,n){let e=b(n,"indices","gatherND","int32"),o={params:b(t,"x","gatherND","string_or_numeric"),indices:e};return R.runKernel(vg,o)}var RZ=D({gatherND_:_Me});function OZ(t,n){if(n==null)return t.shape.slice();if(Oi(t.shape,n))return n;if(t.shape.length===n.length){let e=[];for(let r=0;r<t.shape.length;r++)n[r]==null&&t.shape[r]!=null?e.push(t.shape[r]):e.push(n[r]);return e}return n}function kMe(t,n,e,r){let o=b(t,"x","dropout");if(F(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),F(n>=0&&n<1,()=>`rate must be a float in the range [0, 1), but got ${n}.`),n===0)return t instanceof Ot?o.clone():o;let i=OZ(o,e),s=1-n,a=$e(Al(fe(ss(i,0,1,"float32",r),s)),s);return L(o,a)}var UM=D({dropout_:kMe});function GM(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function uv(t,n,e){let r=1-t%2,o=new Float32Array(t);for(let i=0;i<t;++i){let s=2*Math.PI*i/(t+r-1);o[i]=n-e*Math.cos(s)}return Qn(o,"float32")}function bMe(t,n,e=1){return z(this,null,function*(){let r=b(t,"predictions","inTopK"),o=b(n,"targets","inTopK");F(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),F(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),nr(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];F(e>0&&e<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${e}`);let s=yield r.data(),a=yield o.data(),[l,c]=[s.length/i,i],u=yF("bool",l);for(let d=0;d<l;d++){let p=d*c,h=s.subarray(p,p+c),f=[];for(let m=0;m<h.length;m++)f.push({value:h[m],index:m});f.sort((m,g)=>g.value-m.value),u[d]=0;for(let m=0;m<e;m++)if(f[m].index===a[d]){u[d]=1;break}}return t!==r&&r.dispose(),n!==o&&o.dispose(),Wr(u,o.shape,"bool")})}var FZ=bMe;var Ep={};Qt(Ep,{conv2d:()=>PZ,depthwiseConv2d:()=>BZ,matMul:()=>LZ});function CMe(t,n,e,r,o,i="NHWC",s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]])),F(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),F(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),F(e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];F(c===e[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${e[2]}.`),F(u===e[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${e[3]}).`),zn("conv2dDerFilter",o,s);let d={x:a,dy:l},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:e};return R.runKernel(ng,d,p)}var dv=D({conv2DBackpropFilter_:CMe});function O0(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return L(t,sa(n));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function F0(t,n){let e=n,r=Fn(t.shape,n.shape);return r.length>0&&(e=He(e,r)),$(e,t.shape)}function P0(t,n,e,r){if(n==="linear")return t;if(n==="relu")return Eo(t);if(n==="elu")return Nl(t);if(n==="relu6")return _0(t);if(n==="prelu")return Sp(t,e);if(n==="leakyrelu")return yp(t,r);if(n==="sigmoid")return ui(t);throw new Error(`Unknown fused activation ${n}.`)}var B0=(t,n)=>!(t>0)||n==="linear";function SMe({x:t,filter:n,strides:e,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",B0(R.state.gradientDepth,l)===!1){F(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let M=Li(t,n,e,r,o,i,s);return a!=null&&(M=fe(M,a)),P0(M,l,c,u)}let d=b(t,"x","conv2d","float32"),p=b(n,"filter","conv2d","float32"),h=d,f=!1;d.rank===3&&(f=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),F(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),zn("fused conv2d",r,s);let m=o==="NHWC"?h.shape[3]:h.shape[1];F(p.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${p.shape[2]}.`),F(qo(e,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`);let g=d0(h.shape,p.shape,e,i,r,s),v;a!=null&&(v=b(a,"bias","fused conv2d"),[v]=rn(v,d),o==="NHWC"?Ft(g.outShape,v.shape):(F(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),F(v.shape.length===0||v.shape[0]===g.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let w;if(c!=null){let M=c.shape;if(F(M.length<=1||M.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${M.length}.`),M.length===1)F(M[0]===1||M[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${M}) is not compatible with the number of output channels (${g.outChannels}).`);else if(M.length===3)try{Ft(M,g.outShape)}catch{let A=`Error in fused conv2d: PReLU activation weights (${M}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(A)}w=b(c,"prelu weights","fused conv2d")}let y=(M,E)=>{F(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[A,P,N,B]=E,S=O0(M,N,l);F(ra(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let W=iv(P.shape,S,A,e,r),ie=dv(P,S,A.shape,e,r),Z=[W,ie];if(B!=null){let X=F0(B,S);Z.push(X)}return Z},_={x:h,filter:p,bias:v,preluActivationWeights:w},k={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?ki((E,A,P)=>{let N=R.runKernel(Vh,_,k);return P([A,E,N]),f&&(N=$(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:y}})(h,p):ki((E,A,P,N)=>{let B=R.runKernel(Vh,_,k);return N([A,E,B,P]),f&&(B=$(B,[B.shape[1],B.shape[2],B.shape[3]])),{value:B,gradFunc:y}})(h,p,v)}var PZ=D({fusedConv2d_:SMe});function MMe(t,n,e,r,o,i=[1,1],s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={x:a,dy:l},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:e};return R.runKernel(cg,c,u)}var WM=D({depthwiseConv2dNativeBackpropFilter_:MMe});function TMe(t,n,e,r,o,i=[1,1],s){let a=n,l=!1;n.rank===3&&(l=!0,a=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={dy:a,filter:e},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:t},d=R.runKernel(ug,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var qM=D({depthwiseConv2dNativeBackpropInput_:TMe});function DMe({x:t,filter:n,strides:e,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(B0(R.state.gradientDepth,l)===!1){let k=Il(t,n,e,r,o,i,s);return a!=null&&(k=fe(k,a)),P0(k,l,c,u)}let d=b(t,"x","depthwiseConv2d","float32"),p=b(n,"filter","depthwiseConv2d","float32"),h=d,f=!1;d.rank===3&&(f=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),F(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),F(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),F(qo(e,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),zn("fused depthwiseConv2d",r,s);let m=d0(h.shape,p.shape,e,i,r,s,!0),g;a!=null&&(g=b(a,"bias","fused conv2d"),[g]=rn(g,d),Ft(m.outShape,g.shape));let v;c!=null&&(v=b(c,"prelu weights","fused depthwiseConv2d"));let w=(k,M)=>{F(ra(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[E,A,P,N]=M,B=O0(k,P,l),S=qM(A.shape,B,E,e,r,i,s),W=WM(A,B,E.shape,e,r,i,s);if(N!=null){let ie=F0(g,B);return[S,W,ie]}return[S,W]},y={x:h,filter:p,bias:g,preluActivationWeights:v},_={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?ki((M,E,A)=>{let P=R.runKernel(jh,y,_);return A([E,M,P]),f&&(P=$(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:w}})(h,p):ki((M,E,A,P)=>{let N=R.runKernel(jh,y,_);return P([E,M,N,A]),f&&(N=$(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:w}})(h,p,g)}var BZ=D({fusedDepthwiseConv2d_:DMe});function EMe({a:t,b:n,transposeA:e=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(B0(R.state.gradientDepth,i)===!1){let B=Bt(t,n,e,r);return o!=null&&(B=fe(B,o)),P0(B,i,s,a)}let l=b(t,"a","fused matMul"),c=b(n,"b","fused matMul");[l,c]=rn(l,c);let u=e?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=e?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],f=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=nn(f),v=nn(m);F(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${e} and transposeB=${r} must match.`);let y=Ft(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,h]),_=e?$(l,[g,u,p]):$(l,[g,p,u]),k=r?$(c,[v,h,d]):$(c,[v,d,h]),M;o!=null&&(M=b(o,"bias","fused matMul"),[M]=rn(M,l),Ft(y,M.shape));let E;s!=null&&(E=b(s,"prelu weights","fused matMul"));let A=(B,S)=>{let[W,ie,Z,X]=S,G=O0($(B,Z.shape),Z,i),H,V;if(!e&&!r?(H=Bt(G,ie,!1,!0),V=Bt(W,G,!0,!1)):!e&&r?(H=Bt(G,ie,!1,!1),V=Bt(G,W,!0,!1)):e&&!r?(H=Bt(ie,G,!1,!0),V=Bt(W,G,!1,!1)):(H=Bt(ie,G,!0,!0),V=Bt(G,W,!0,!0)),o!=null){let K=F0(X,G);return[H,V,K]}else return[H,V]},P={a:_,b:k,bias:M,preluActivationWeights:E},N={transposeA:e,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?ki((S,W,ie)=>{let Z=R.runKernel($h,P,N);return ie([S,W,Z]),{value:$(Z,y),gradFunc:A}})(_,k):ki((S,W,ie,Z)=>{let X=R.runKernel($h,P,N);return Z([S,W,X,ie]),{value:$(X,y),gradFunc:A}})(_,k,M)}var LZ=D({fusedMatMul_:EMe});function IMe(t){return uv(t,.54,.46)}var $Z=D({hammingWindow_:IMe});function NMe(t){return uv(t,.5,.5)}var KM=D({hannWindow_:NMe});function AMe(t,n,e,r=!1,o=0){let i=0,s=[];for(;i+n<=t.size;)s.push(Nt(t,i,n)),i+=e;if(r)for(;i<t.size;){let a=i+n-t.size,l=gn([Nt(t,i,n-a),ia([a],o)]);s.push(l),i+=e}return s.length===0?Aa([],[0,n]):$(gn(s),[s.length,n])}var ZM=D({frame_:AMe});function RMe(t,n,e,r,o=KM){r==null&&(r=GM(n));let i=ZM(t,n,e),s=L(i,o(n));return Dp(s,r)}var VZ=D({stft_:RMe});function OMe(t,n,e,r,o="bilinear",i=0){let s=b(t,"image","cropAndResize"),a=b(n,"boxes","cropAndResize","float32"),l=b(e,"boxInd","cropAndResize","int32"),c=a.shape[0];F(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),F(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),F(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),F(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),F(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),F(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let u={image:s,boxes:a,boxInd:l},d={method:o,extrapolationValue:i,cropSize:r};return R.runKernel(sg,u,d)}var jZ=D({cropAndResize_:OMe});function FMe(t){let n=b(t,"image","flipLeftRight","float32");F(n.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`);let e={image:n};return R.runKernel(gg,e,{})}var zZ=D({flipLeftRight_:FMe});function PMe(t){let n=b(t,"image","grayscaleToRGB"),e=n.rank-1,r=n.shape[e];F(n.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`),F(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(n.rank);return o.fill(1,0,e),o[e]=3,To(n,o)}var HZ=D({grayscaleToRGB_:PMe});function BMe(t){let n=b(t,"image","RGBToGrayscale"),e=n.rank-1,r=n.shape[e];F(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),F(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=n.dtype,i=ge(n,"float32"),s=Qn([.2989,.587,.114]),a;switch(n.rank){case 2:a=vp("ij,j->i",i,s);break;case 3:a=vp("ijk,k->ij",i,s);break;case 4:a=vp("ijkl,l->ijk",i,s);break;case 5:a=vp("ijklm,m->ijkl",i,s);break;case 6:a=vp("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=hr(a,-1),ge(a,o)}var UZ=D({rgbToGrayscale_:BMe});function LMe(t,n,e=0,r=.5){let o=b(t,"image","rotateWithOffset","float32");F(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:n,fillValue:e,center:r};return R.runKernel(Qg,i,s)}var GZ=D({rotateWithOffset_:LMe});function Ra(t,n,e,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=t.shape[0];return e=Math.min(e,s),F(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),F(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),F(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),F(n.rank===1,()=>"scores must be a 1D tensor"),F(n.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${n.shape[0]}`),F(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:e,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function $Me(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY){let i=b(t,"boxes","nonMaxSuppression","float32"),s=b(n,"scores","nonMaxSuppression","float32"),a=Ra(i,s,e,r,o);e=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l={maxOutputSize:e,iouThreshold:r,scoreThreshold:o};return R.runKernel(Mg,{boxes:i,scores:s},l)}var WZ=D({nonMaxSuppression_:$Me});function qZ(t,n,e){let r=VMe(t,n,e),o=r<0?-(r+1):r;t.splice(o,0,n)}function VMe(t,n,e){return zMe(t,n,e||jMe)}function jMe(t,n){return t>n?1:t<n?-1:0}function zMe(t,n,e){let r=0,o=t.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=e(n,t[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}function XM(t,n,e,r,o){return Z6(t,n,e,r,o,0)}function YM(t,n,e,r,o,i){return Z6(t,n,e,r,o,0,!1,i,!0)}function QM(t,n,e,r,o,i){return Z6(t,n,e,r,o,i,!0)}function Z6(t,n,e,r,o,i,s=!1,a=!1,l=!1){let c=[];for(let g=0;g<n.length;g++)n[g]>o&&c.push({score:n[g],boxIndex:g,suppressBeginIndex:0});c.sort(KZ);let u=i>0?-.5/i:0,d=[],p=[];for(;d.length<e&&c.length>0;){let g=c.pop(),{score:v,boxIndex:w,suppressBeginIndex:y}=g;if(v<o)break;let _=!1;for(let k=d.length-1;k>=y;--k){let M=HMe(t,w,d[k]);if(M>=r){_=!0;break}if(g.score=g.score*UMe(r,u,M),g.score<=o)break}g.suppressBeginIndex=d.length,_||(g.score===v?(d.push(w),p.push(g.score)):g.score>o&&qZ(c,g,KZ))}let h=d.length,f=e-h;a&&f>0&&(d.push(...new Array(f).fill(0)),p.push(...new Array(f).fill(0)));let m={selectedIndices:d};return s&&(m.selectedScores=p),l&&(m.validOutputs=h),m}function HMe(t,n,e){let r=t.subarray(n*4,n*4+4),o=t.subarray(e*4,e*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),h=(a-i)*(l-s),f=(d-c)*(p-u);if(h<=0||f<=0)return 0;let m=Math.max(i,c),g=Math.max(s,u),v=Math.min(a,d),w=Math.min(l,p),y=Math.max(v-m,0)*Math.max(w-g,0);return y/(h+f-y)}function UMe(t,n,e){let r=Math.exp(n*e*e);return e<=t?r:0}function KZ(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function GMe(i,s,a){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY){let l=b(t,"boxes","nonMaxSuppressionAsync"),c=b(n,"scores","nonMaxSuppressionAsync"),u=Ra(l,c,e,r,o);e=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold;let d=yield Promise.all([l.data(),c.data()]),p=d[0],h=d[1],{selectedIndices:f}=XM(p,h,e,r,o);return l!==t&&l.dispose(),c!==n&&c.dispose(),Qn(f,"int32")})}var ZZ=GMe;function WMe(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=b(t,"boxes","nonMaxSuppression"),a=b(n,"scores","nonMaxSuppression"),l=Ra(s,a,e,r,o,i);e=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c={boxes:s,scores:a},u={maxOutputSize:e,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},d=R.runKernel(Dg,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}var XZ=D({nonMaxSuppressionWithScore_:WMe});function qMe(s,a,l){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let c=b(t,"boxes","nonMaxSuppressionAsync"),u=b(n,"scores","nonMaxSuppressionAsync"),d=Ra(c,u,e,r,o,i);e=d.maxOutputSize,r=d.iouThreshold,o=d.scoreThreshold,i=d.softNmsSigma;let p=yield Promise.all([c.data(),u.data()]),h=p[0],f=p[1],{selectedIndices:m,selectedScores:g}=QM(h,f,e,r,o,i);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:Qn(m,"int32"),selectedScores:Qn(g)}})}var YZ=qMe;function KMe(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=b(t,"boxes","nonMaxSuppression"),a=b(n,"scores","nonMaxSuppression"),l=Ra(s,a,e,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,p={boxes:s,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},f=R.runKernel(Tg,p,h);return{selectedIndices:f[0],validOutputs:f[1]}}var QZ=D({nonMaxSuppressionPadded_:KMe});function ZMe(s,a,l){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let c=b(t,"boxes","nonMaxSuppressionAsync"),u=b(n,"scores","nonMaxSuppressionAsync"),d=Ra(c,u,e,r,o,null),p=d.maxOutputSize,h=d.iouThreshold,f=d.scoreThreshold,[m,g]=yield Promise.all([c.data(),u.data()]),{selectedIndices:v,validOutputs:w}=YM(m,g,p,h,f,i);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:Qn(v,"int32"),validOutputs:ze(w,"int32")}})}var JZ=ZMe;function XMe(t,n,e=!1,r=!1){let o=b(t,"images","resizeBilinear");F(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),F(n.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`),F(r===!1||e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=$(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=n,a={images:i},l={alignCorners:e,halfPixelCenters:r,size:n},c=R.runKernel(Jd,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var JM=D({resizeBilinear_:XMe});function YMe(t,n,e=!1,r=!1){let o=b(t,"images","resizeNearestNeighbor");F(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),F(n.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`),F(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),F(r===!1||e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=$(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=n,a={images:i},l={alignCorners:e,halfPixelCenters:r,size:n},c=R.runKernel(Qd,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var eT=D({resizeNearestNeighbor_:YMe});function QMe(t,n="binary",e=!1,r=.5){let o=b(t,"image","threshold"),i=.2989,s=.587,a=.114,l=o.shape[0]*o.shape[1],c=L(Qn([r]),255),u,d,p,h;if(F(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),F(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),F(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),F(n==="otsu"||n==="binary",()=>`Method must be binary or otsu, but was ${n}`),o.shape[2]===3){[u,d,p]=Kr(o,[1,1,1],-1);let g=L(u,i),v=L(d,s),w=L(p,a);h=fe(fe(g,v),w)}else h=t;if(n==="otsu"){let g=c_(ge(k0(h),"int32"),Wr([]),256);c=JMe(g,l)}let f=e?is(h,c):Xn(h,c);return ge(L(f,255),"int32")}function JMe(t,n){let e=Qn([-1]),r=Qn([0]),o=Qn([0]),i,s,a,l,c,u;for(let d=0;d<t.size-1;d++){i=Nt(t,0,d+1),s=Nt(t,d+1),c=$e(He(i),n),u=$e(He(s),n);let p=He(L(i,Fl(0,i.size)));a=$e(p,He(i));let h=ia(s.shape,i.size),f=fe(Fl(0,s.size),h),m=L(s,f);l=$e(He(m),He(s));let g=Pe(a,l),v=Pe(a,l),w=L(c,u);o=L(L(w,g),v);let y=Xn(o,r);r=Nn(y,o,r),e=Nn(y,Qn([d]),e)}return e}var eX=D({threshold_:QMe});function eTe(t,n,e="nearest",r="constant",o=0,i){let s=b(t,"image","transform","float32"),a=b(n,"transforms","transform","float32");F(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),F(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),F(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let l={image:s,transforms:a},c={interpolation:e,fillMode:r,fillValue:o,outputShape:i};return R.runKernel(Xg,l,c)}var tX=D({transform_:eTe});function tTe(t,n,e){let r=b(t,"a","bandPart");F(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,l;typeof n=="number"?(F(n%1===0,()=>`bandPart(): numLower must be an integer, got ${n}.`),F(n<=i,()=>`bandPart(): numLower (${n}) must not be greater than the number of rows (${i}).`),a=b(n<0?i:n,"numLower","bandPart")):(F(n.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Nn(bu(n,0),i,Fs(n,i))),typeof e=="number"?(F(e%1===0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),F(e<=s,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${s}).`),l=b(e<0?s:e,"numUpper","bandPart")):(F(e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Nn(bu(e,0),s,Fs(e,s)));let c=$(Fl(0,i,1,"int32"),[-1,1]),u=Fl(0,s,1,"int32"),d=Pe(c,u),p=Do(is(d,a),_i(d,Kt(l))),h=Bn([i,s],r.dtype);return $(Yn(Zr($(r,[-1,i,s])).map(f=>Nn(p,f,h))),o)}var nX=D({bandPart_:tTe});function nTe(t){let n;if(Array.isArray(t)){n=!1,F(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=t[0].shape[0];for(let i=1;i<t.length;++i)F(t[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${o})`)}else n=!0,t=Kr(t,t.shape[0],0).map(o=>as(o,[0]));F(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let e=[],r=t;for(let o=0;o<t.length;++o)e.push(R.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=L(He(L(e[s],i)),e[s]);i=Pe(i,a)}return $e(i,ku(i,"euclidean"))}));return n?Yn(e,0):e}var rX=D({gramSchmidt_:nTe});function rTe(t,n=!1){if(F(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return oX(t,n);{let e=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Zr($(t,[e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];r.forEach(l=>{let[c,u]=oX(l,n);o.push(c),i.push(u)});let s=$(Yn(o,0),t.shape),a=$(Yn(i,0),t.shape);return[s,a]}}function oX(t,n=!1){return R.tidy(()=>{F(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let e=t.shape[0],r=t.shape[1],o=Zh(e),i=xi(t),s=Aa([[1]],[1,1]),a=xi(s),l=e>=r?r:e;for(let c=0;c<l;++c){let u=i,d=a,p=o;[a,i,o]=R.tidy(()=>{let h=Nt(i,[c,c],[e-c,1]),f=ku(h),m=Nt(i,[c,c],[1,1]),g=Nn(Xn(m,0),Aa([[-1]]),Aa([[1]])),v=Pe(m,L(g,f)),w=$e(h,v);w.shape[0]===1?a=xi(s):a=gn([s,Nt(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);let y=Kt($e(Bt(g,v),f)),_=Nt(i,[c,0],[e-c,r]),k=L(y,a),M=Lt(a);if(c===0)i=Pe(_,Bt(k,Bt(M,_)));else{let P=Pe(_,Bt(k,Bt(M,_)));i=gn([Nt(i,[0,0],[c,r]),P],0)}let E=Lt(k),A=Nt(o,[0,c],[e,o.shape[1]-c]);if(c===0)o=Pe(A,Bt(Bt(A,a),E));else{let P=Pe(A,Bt(Bt(A,a),E));o=gn([Nt(o,[0,0],[e,c]),P],1)}return[a,i,o]}),gt([u,d,p])}return!n&&e>r&&(o=Nt(o,[0,0],[e,r]),i=Nt(i,[0,0],[r,r])),[o,i]})}var iX=D({qr_:rTe});var Er=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(Er||{});function oTe(t,n,e=Er.SUM_BY_NONZERO_WEIGHTS){let r=b(t,"losses","computeWeightedLoss"),o=null;n!=null&&(o=b(n,"weights","computeWeightedLoss"));let i=o==null?r:L(r,o);if(e===Er.NONE)return i;if(e===Er.SUM)return He(i);if(e===Er.MEAN){if(o==null)return Pn(i);{let s=r.size/o.size,a=$e(He(i),He(o));return s>1?$e(a,ze(s)):a}}if(e===Er.SUM_BY_NONZERO_WEIGHTS){if(o==null)return $e(He(i),ze(r.size));{let s=L(o,Dr(r.shape)),a=ge(He(Na(s,ze(0))),"float32");return $e(He(i),a)}}throw Error(`Unknown reduction: ${e}`)}var di=D({computeWeightedLoss_:oTe});function iTe(t,n,e,r=Er.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","absoluteDifference"),i=b(n,"predictions","absoluteDifference"),s=null;e!=null&&(s=b(e,"weights","absoluteDifference")),nr(o.shape,i.shape,"Error in absoluteDifference: ");let a=jn(Pe(o,i));return di(a,s,r)}var sX=D({absoluteDifference_:iTe});function sTe(t,n,e,r,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","cosineDistance"),s=b(n,"predictions","cosineDistance"),a=null;r!=null&&(a=b(r,"weights","cosineDistance")),nr(i.shape,s.shape,"Error in cosineDistance: ");let l=ze(1),c=Pe(l,He(L(i,s),e,!0));return di(c,a,o)}var aX=D({cosineDistance_:sTe});function aTe(t,n,e,r=Er.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","hingeLoss"),i=b(n,"predictions","hingeLoss"),s=null;e!=null&&(s=b(e,"weights","hingeLoss")),nr(o.shape,i.shape,"Error in hingeLoss: ");let a=ze(1);o=Pe(L(ze(2),o),a);let l=Eo(Pe(a,L(o,i)));return di(l,s,r)}var lX=D({hingeLoss_:aTe});function lTe(t,n,e,r=1,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","huberLoss"),s=b(n,"predictions","huberLoss"),a=null;e!=null&&(a=b(e,"weights","huberLoss")),nr(i.shape,s.shape,"Error in huberLoss: ");let l=ze(r),c=jn(Pe(s,i)),u=Fs(c,l),d=Pe(c,u),p=fe(L(ze(.5),zt(u)),L(l,d));return di(p,a,o)}var cX=D({huberLoss_:lTe});function cTe(t,n,e,r=1e-7,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","logLoss"),s=b(n,"predictions","logLoss"),a=null;e!=null&&(a=b(e,"weights","logLoss")),nr(i.shape,s.shape,"Error in logLoss: ");let l=ze(1),c=ze(r),u=Kt(L(i,mo(fe(s,c)))),d=L(Pe(l,i),mo(fe(Pe(l,s),c))),p=Pe(u,d);return di(p,a,o)}var uX=D({logLoss_:cTe});function uTe(t,n,e,r=Er.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","meanSquaredError"),i=b(n,"predictions","meanSquaredError"),s=null;e!=null&&(s=b(e,"weights","meanSquaredError")),nr(o.shape,i.shape,"Error in meanSquaredError: ");let a=N0(o,i);return di(a,s,r)}var dX=D({meanSquaredError_:uTe});function dTe(t,n){let e=b(t,"labels","sigmoidCrossEntropyWithLogits"),r=b(n,"logits","sigmoidCrossEntropyWithLogits");nr(e.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=Eo(r),i=L(r,e),s=xp(pr(Kt(jn(r))));return fe(Pe(o,i),s)}function pTe(t,n,e,r=0,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"multiClassLabels","sigmoidCrossEntropy"),s=b(n,"logits","sigmoidCrossEntropy"),a=null;if(e!=null&&(a=b(e,"weights","sigmoidCrossEntropy")),nr(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=ze(r),u=ze(1),d=ze(.5);i=fe(L(i,Pe(u,c)),L(d,c))}let l=dTe(i,s);return di(l,a,o)}var pX=D({sigmoidCrossEntropy_:pTe});function hTe(t,n,e=-1){if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${n.rank} and dim was ${e}`);return ki((o,i,s)=>{let l=_p(i,[e],!0),c=Pe(ge(i,"float32"),l);s([o,c]);let u=Kt(L(c,o));return{value:He(u,[e]),gradFunc:(h,f)=>{let[m,g]=f,v=Ea(h.shape,[e]);return[L($(h,v),Pe(ge(m,"float32"),pr(g))),L($(h,v),Pe(pr(g),ge(m,"float32")))]}}})(t,n)}function fTe(t,n,e,r=0,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"onehotLabels","softmaxCrossEntropy"),s=b(n,"logits","softmaxCrossEntropy"),a=null;if(e!=null&&(a=b(e,"weights","softmaxCrossEntropy")),nr(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=ze(r),u=ze(1),d=ze(i.shape[1]);i=fe(L(i,Pe(u,c)),$e(c,d))}let l=hTe(i,s);return di(l,a,o)}var hX=D({softmaxCrossEntropy_:fTe});function mTe(t,n,e,r){let o=b(t,"indices","sparseFillEmptyRows","int32"),i=b(n,"values","sparseFillEmptyRows"),s=b(e,"denseShape","sparseFillEmptyRows","int32"),a=b(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let l={indices:o,values:i,denseShape:s,defaultValue:a},c=R.runKernel($g,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var fX=D({sparseFillEmptyRows_:mTe});function gTe(t,n,e){let r=b(t,"inputIndices","sparseReshape","int32"),o=b(n,"inputShape","sparseReshape","int32"),i=b(e,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=R.runKernel(Vg,s);return{outputIndices:a[0],outputShape:a[1]}}var mX=D({sparseReshape_:gTe});function vTe(t,n,e){let r=b(t,"data","sparseSegmentMean"),o=b(n,"indices","sparseSegmentMean","int32"),i=b(e,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return R.runKernel(jg,s)}var gX=D({sparseSegmentMean_:vTe});function wTe(t,n,e){let r=b(t,"data","sparseSegmentSum"),o=b(n,"indices","sparseSegmentSum","int32"),i=b(e,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return R.runKernel(zg,s)}var vX=D({sparseSegmentSum_:wTe});function yTe(t,n,e,r,o,i,s,a){let l=b(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let c=b(n,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:e,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},d={data:l,dataSplits:c},p=R.runKernel(Wg,d,u);return{nGrams:p[0],nGramsSplits:p[1]}}var wX=D({stringNGrams_:yTe});function xTe(t,n,e=!0){let r=b(t,"input","stringSplit","string"),o=b(n,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:e},s={input:r,delimiter:o},a=R.runKernel(qg,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var yX=D({stringSplit_:xTe});function _Te(t,n){let e=b(t,"input","stringToHashBucketFast","string"),r={numBuckets:n};if(n<=0)throw new Error("Number of buckets must be at least 1");let o={input:e};return R.runKernel(Kg,o,r)}var xX=D({stringToHashBucketFast_:_Te});function kTe(t,n,e,r=!0){let o=b(t,"input","staticRegexReplace","string"),i={pattern:n,rewrite:e,replaceGlobal:r};return R.runKernel(Lh,{x:o},i)}var _X=D({staticRegexReplace_:kTe});var kX={fft:Tp,ifft:Su,rfft:Dp,irfft:I0},bX={hammingWindow:$Z,hannWindow:KM,frame:ZM,stft:VZ},Ci={flipLeftRight:zZ,grayscaleToRGB:HZ,resizeNearestNeighbor:eT,resizeBilinear:JM,rgbToGrayscale:UZ,rotateWithOffset:GZ,cropAndResize:jZ,nonMaxSuppression:WZ,nonMaxSuppressionAsync:ZZ,nonMaxSuppressionWithScore:XZ,nonMaxSuppressionWithScoreAsync:YZ,nonMaxSuppressionPadded:QZ,nonMaxSuppressionPaddedAsync:JZ,threshold:eX,transform:tX},tT={bandPart:nX,gramSchmidt:rX,qr:iX},CX={absoluteDifference:sX,computeWeightedLoss:di,cosineDistance:aX,hingeLoss:lX,huberLoss:cX,logLoss:uX,meanSquaredError:dX,sigmoidCrossEntropy:pX,softmaxCrossEntropy:hX},SX={sparseFillEmptyRows:fX,sparseReshape:mX,sparseSegmentMean:gX,sparseSegmentSum:vX},MX={stringNGrams:wX,stringSplit:yX,stringToHashBucketFast:xX,staticRegexReplace:_X};var ve={};Qt(ve,{Serializable:()=>q_,SerializationMap:()=>nT,getRegisteredName:()=>CTe,registerClass:()=>Y6});var bTe=new Map,X6=new Map,q_=class{getClassName(){return this.constructor.className}static fromConfig(n,e){return new n(e)}},nT=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]}};function Y6(t,n,e){F(t.className!=null,()=>"Class being registered does not have the static className property defined."),F(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),F(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof n>"u"&&(n="Custom"),typeof e>"u"&&(e=t.className);let r=e,o=n+">"+r;return nT.register(t),bTe.set(o,t),X6.set(t,o),t}function CTe(t){return X6.has(t)?X6.get(t):t.className}var Zo=class extends q_{minimize(n,e=!1,r){let{value:o,grads:i}=this.computeGradients(n,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return gt(i),e?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(n,e){return D_(n,e)}dispose(){this.iterations_!=null&&gt(this.iterations_)}saveIterations(){return z(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ze(this.iterations_,"int32")}})}getWeights(){return z(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(n){return z(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(n){return z(this,null,function*(){return this.iterations_=(yield n[0].tensor.data())[0],n.slice(1)})}};Object.defineProperty(Zo,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});var Jh=class extends Zo{static get className(){return"Adadelta"}constructor(n,e,r=null){super(),this.learningRate=n,this.rho=e,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=R.backend.epsilon())}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=R.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:ne(()=>dt(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:ne(()=>dt(i).variable(s))});let a=Array.isArray(n)?n[o].tensor:n[r];if(a==null)return;let l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;ne(()=>{let u=fe(L(l,this.rho),L(zt(a),1-this.rho)),d=L($e(En(fe(c,this.epsilon)),En(fe(l,this.epsilon))),a),p=fe(L(c,this.rho),L(zt(d),1-this.rho));l.assign(u),c.assign(p);let h=fe(L(d,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(gt(this.accumulatedGrads.map(n=>n.variable)),gt(this.accumulatedUpdates.map(n=>n.variable)))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=n.length/2,r=!1;this.accumulatedGrads=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.rho,e.epsilon)}};var ef=class extends Zo{static get className(){return"Adagrad"}constructor(n,e=.1){super(),this.learningRate=n,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=R.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:ne(()=>ia(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(n)?n[o].tensor:n[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;ne(()=>{let l=fe(a,zt(s));a.assign(l);let c=fe(L($e(s,En(fe(l,R.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&gt(this.accumulatedGrads.map(n=>n.variable))}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulatedGrads=n.map(r=>({originalName:r.name,variable:r.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(n,e){return new n(e.learningRate,e.initialAccumulatorValue)}};var tf=class extends Zo{static get className(){return"Adam"}constructor(n,e,r,o=null){super(),this.learningRate=n,this.beta1=e,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ne(()=>{this.accBeta1=ze(e).variable(),this.accBeta2=ze(r).variable()}),o==null&&(this.epsilon=R.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(r=>r.name):Object.keys(n);ne(()=>{let r=Pe(1,this.accBeta1),o=Pe(1,this.accBeta2);e.forEach((i,s)=>{let a=R.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:ne(()=>dt(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:ne(()=>dt(a).variable(l))});let c=Array.isArray(n)?n[s].tensor:n[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,p=fe(L(u,this.beta1),L(c,1-this.beta1)),h=fe(L(d,this.beta2),L(zt(c),1-this.beta2)),f=$e(p,r),m=$e(h,o);u.assign(p),d.assign(h);let g=fe(L($e(f,fe(En(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(L(this.accBeta1,this.beta1)),this.accBeta2.assign(L(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&gt(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedSecondMoment!=null&&gt(this.accumulatedSecondMoment.map(n=>n.variable))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n),ne(()=>{this.accBeta1.assign(Ko(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ko(this.beta2,this.iterations_+1))});let e=n.length/2,r=!1;this.accumulatedFirstMoment=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon)}};var nf=class extends Zo{static get className(){return"Adamax"}constructor(n,e,r,o=null,i=0){super(),this.learningRate=n,this.beta1=e,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ne(()=>{this.iteration=ze(0).variable(),this.accBeta1=ze(e).variable()}),o==null&&(this.epsilon=R.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(r=>r.name):Object.keys(n);ne(()=>{let r=Pe(1,this.accBeta1),o=$e(-this.learningRate,fe(L(this.iteration,this.decay),1));e.forEach((i,s)=>{let a=R.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:dt(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:dt(a).variable(l)});let c=Array.isArray(n)?n[s].tensor:n[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,p=fe(L(u,this.beta1),L(c,1-this.beta1)),h=L(d,this.beta2),f=jn(c),m=$i(h,f);u.assign(p),d.assign(m);let g=fe(L($e(o,r),$e(p,fe(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(fe(this.iteration,1)),this.accBeta1.assign(L(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&gt(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedWeightedInfNorm!=null&&gt(this.accumulatedWeightedInfNorm.map(n=>n.variable))}getWeights(){return z(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(n){return z(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}};var Mu=class extends Zo{static get className(){return"SGD"}constructor(n){super(),this.learningRate=n,this.setLearningRate(n)}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=Array.isArray(n)?n[o].tensor:n[r];if(i==null)return;let s=R.registeredVariables[r];ne(()=>{let a=fe(L(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=Wn(ze(-n))}dispose(){this.c.dispose()}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()]})}setWeights(n){return z(this,null,function*(){if(n=yield this.extractIterations(n),n.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(n,e){return new n(e.learningRate)}};var rf=class extends Mu{static get className(){return"Momentum"}constructor(n,e,r=!1){super(n),this.learningRate=n,this.momentum=e,this.useNesterov=r,this.accumulations=[],this.m=ze(this.momentum)}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=R.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:ne(()=>dt(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(n)?n[o].tensor:n[r];a!=null&&ne(()=>{let l,c=fe(L(this.m,s),a);this.useNesterov?l=fe(L(this.c,fe(a,L(c,this.m))),i):l=fe(L(this.c,c),i),s.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&gt(this.accumulations.map(n=>n.variable))}setMomentum(n){this.momentum=n}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulations=n.map(r=>({originalName:r.name,variable:r.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(n,e){return new n(e.learningRate,e.momentum,e.useNesterov)}};var of=class extends Zo{static get className(){return"RMSProp"}constructor(n,e=.9,r=0,o=null,i=!1){if(super(),this.learningRate=n,this.decay=e,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=R.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=R.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:ne(()=>dt(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:ne(()=>dt(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:ne(()=>dt(i).variable(s))});let a=Array.isArray(n)?n[o].tensor:n[r];if(a==null)return;let l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;ne(()=>{let u=fe(L(l,this.decay),L(zt(a),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[o].variable,p=fe(L(d,this.decay),L(a,1-this.decay)),h=$e(L(a,this.learningRate),En(Pe(u,fe(zt(p),this.epsilon)))),f=fe(L(c,this.momentum),h);l.assign(u),d.assign(p),c.assign(f);let m=Pe(i,f);i.assign(m)}else{let d=fe(L(l,this.decay),L(zt(a),1-this.decay)),p=fe(L(c,this.momentum),$e(L(a,this.learningRate),En(fe(d,this.epsilon))));l.assign(d),c.assign(p);let h=Pe(i,p);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&gt(this.accumulatedMeanSquares.map(n=>n.variable)),this.accumulatedMeanGrads!=null&&this.centered&&gt(this.accumulatedMeanGrads.map(n=>n.variable)),this.accumulatedMoments!=null&&gt(this.accumulatedMoments.map(n=>n.variable))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&n.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=this.centered?n.length/3:n.length/2,r=!1;this.accumulatedMeanSquares=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=n.slice(e*2,e*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(n,e){return new n(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}};var STe=[Jh,ef,tf,nf,rf,of,Mu];function TX(){for(let t of STe)Y6(t)}var Xr={};Qt(Xr,{CompositeArrayBuffer:()=>ci,browserFiles:()=>EX,browserHTTPRequest:()=>OX,concatenateArrayBuffers:()=>OK,copyModel:()=>KK,decodeWeights:()=>IM,decodeWeightsStream:()=>NM,encodeWeights:()=>IK,fromMemory:()=>FX,fromMemorySync:()=>o8,getLoadHandlers:()=>LK,getModelArtifactsForJSON:()=>ev,getModelArtifactsForJSONSync:()=>UF,getModelArtifactsInfoForJSON:()=>yu,getSaveHandlers:()=>BK,getWeightSpecs:()=>qx,http:()=>oT,isHTTPScheme:()=>rT,listModels:()=>WK,loadWeights:()=>NX,moveModel:()=>ZK,registerLoadRouter:()=>PK,registerSaveRouter:()=>FK,removeModel:()=>qK,weightsLoaderFactory:()=>n8,withSaveHandler:()=>PX,withSaveHandlerSync:()=>BX});var MTe="model",TTe=".json",DTe=".weights.bin";function DX(t){return new Promise(n=>setTimeout(n)).then(t)}var Q6=(()=>{class t{constructor(e){if(!Q().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),(e==null||e.length===0)&&(e=MTe),this.modelJsonFileName=e+TTe,this.weightDataFileName=e+DTe}save(e){return z(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=ci.join(e.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=AM(e,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,yield DX(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,yield DX(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:yu(e)}}})}}return t.URL_SCHEME="downloads://",t})();var J6=class{constructor(n){if(n==null||n.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${n}`);this.jsonFile=n[0],this.weightsFiles=n.slice(1)}load(){return z(this,null,function*(){return new Promise((n,e)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){n({modelTopology:s});return}let l=ev(i,c=>this.loadWeights(c));n(l)},r.onerror=o=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})})}loadWeights(n){let e=[],r=[];for(let s of n)e.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(n),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[e,s])}loadWeightsFile(n,e){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${n}'.`),i.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(n){let e=[],r=this.weightsFiles.map(i=>HF(i.name)),o={};for(let i of n)i.paths.forEach(s=>{let a=HF(s);if(e.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},ETe=t=>Q().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Q6.URL_SCHEME)?ITe(t.slice(Q6.URL_SCHEME.length)):null;So.registerSaveRouter(ETe);function ITe(t="model"){return new Q6(t)}function EX(t){return new J6(t)}function e8(t,n,e,r){s(t),e=e??0,r=r??1,a(e,r);let o=0,i=l=>(l.then(c=>{let u=e+ ++o/t.length*(r-e);return n(u),c}),l);function s(l){F(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){F(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),F(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),F(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}function t8(t,n){return z(this,null,function*(){n==null&&(n={});let e=n.fetchFunc==null?Q().platform.fetch:n.fetchFunc,r=t.map(d=>e(d,n.requestInit,{isBinary:!0})),a=(n.onProgress==null?yield Promise.all(r):yield e8(r,n.onProgress,0,.5)).map(d=>d.arrayBuffer());return n.onProgress==null?yield Promise.all(a):yield e8(a,n.onProgress,.5,1)})}function IX(t,n){var e;let r=n.fetchFunc==null?Q().platform.fetch:n.fetchFunc,o=0,i;return(e=n.onProgress)===null||e===void 0||e.call(n,0),new ReadableStream({pull:s=>z(this,null,function*(){for(var a;o<t.length;){i||(i=(yield r(t[o],n.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=yield i.read();if(l){o++,i=void 0,(a=n.onProgress)===null||a===void 0||a.call(n,o/t.length);continue}s.enqueue(c);return}s.close()})})}function NX(t,n="",e,r){return z(this,null,function*(){return n8(s=>t8(s,{requestInit:r}))(t,n,e)})}function n8(t){return(n,e="",r)=>z(this,null,function*(){let o=n.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(n.forEach((h,f)=>{let m=0;h.weights.forEach(g=>{let v="quantization"in g?g.quantization.dtype:g.dtype,w=pp[v]*nn(g.shape),y=()=>{o[f]=!0,i[f]==null&&(i[f]=[]),i[f].push({manifestEntry:g,groupOffset:m,sizeBytes:w})};r!=null?r.forEach((_,k)=>{_===g.name&&(y(),s[k]=!0)}):y(),a.push(g.name),m+=w})}),!s.every(h=>h)){let h=r.filter((f,m)=>!s[m]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=o.reduce((h,f,m)=>(f&&h.push(m),h),[]),c=[];l.forEach(h=>{n[h].paths.forEach(f=>{let m=e+(e.endsWith("/")?"":"/")+f;c.push(m)})});let u=yield t(c),d={},p=0;return l.forEach(h=>{let f=n[h].paths.length,m=new ci(u.slice(p,p+f));i[h].forEach(v=>{let w=m.slice(v.groupOffset,v.groupOffset+v.sizeBytes),y=IM(w,[v.manifestEntry]);for(let _ in y)d[_]=y[_]}),p+=f}),d})}var NTe="application/octet-stream",ATe="application/json",AX=(()=>{class t{constructor(e,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(F(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=Q().platform.fetch,F(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&F(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=AM(e,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:ATe}),"model.json"),e.weightData!=null){let a=ci.join(e.weightData);r.body.append("model.weights.bin",new Blob([a],{type:NTe}),"model.weights.bin")}let s=yield this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:yu(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return z(this,null,function*(){let e=yield this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=yield e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r})}load(){return z(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let e=yield this.loadModelJSON();return ev(e,r=>this.loadWeights(r))})}loadStream(){return z(this,null,function*(){let e=yield this.loadModelJSON(),r=yield this.getWeightUrls(e.weightsManifest),o=qx(e.weightsManifest),i=()=>IX(r,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:o,getWeightStream:i})})}getWeightUrls(e){return z(this,null,function*(){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=RTe(r),s=this.weightPathPrefix||o,a=[],l=[];for(let c of e)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(s+u+i);return this.weightUrlConverter&&a.push(...yield Promise.all(l)),a})}loadWeights(e){return z(this,null,function*(){let r=yield this.getWeightUrls(e),o=qx(e),i=yield t8(r,this.loadOptions);return[o,i]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function RTe(t){let n=t.lastIndexOf("/"),e=t.lastIndexOf("?"),r=t.substring(0,n),o=e>n?t.substring(e):"";return[r+"/",o]}function rT(t){return t.match(AX.URL_SCHEME_REGEX)!=null}var RX=(t,n)=>{if(typeof fetch>"u"&&(n==null||n.fetchFunc==null))return null;{let e=!0;if(Array.isArray(t)?e=t.every(r=>rT(r)):e=rT(t),e)return oT(t,n)}return null};So.registerSaveRouter(RX);So.registerLoadRouter(RX);function oT(t,n){return new AX(t,n)}function OX(t,n){return oT(t,n)}var K_=class{constructor(n){this.modelArtifacts=n}load(){return this.modelArtifacts}},iT=class{constructor(n){this.saveHandler=n}save(n){return this.saveHandler(n)}},r8=class{constructor(n){n.load&&(this.load=()=>Promise.resolve(n.load())),n.save&&(this.save=e=>Promise.resolve(n.save(e)))}};function FX(t,n,e,r){let o=arguments;return new r8(o8(...o))}function o8(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new K_(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new K_({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new K_({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))}function PX(t){return new iT(t)}function BX(t){return new iT(t)}var i8={};Qt(i8,{confusionMatrix:()=>LX});function OTe(t,n,e){let r=b(t,"labels","confusionMatrix"),o=b(n,"predictions","confusionMatrix");F(e==null||e>0&&Number.isInteger(e),()=>`If provided, numClasses must be a positive integer, but got ${e}`),F(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),F(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),F(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),F(e>0&&Number.isInteger(e),()=>`numClasses is required to be a positive integer, but got ${e}`);let i=Ol(ge(r,"int32"),e),s=Ol(ge(o,"int32"),e),a=Lt(i),l=Bt(a,s);return ge(l,"int32")}var LX=D({confusionMatrix_:OTe});var Z_={};Qt(Z_,{draw:()=>zTe,fromPixels:()=>HTe,fromPixelsAsync:()=>$Te,toPixels:()=>jTe});var L0,$X=!1;function VX(t,n=3){if(n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let e=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Jg(G1,R.backendName)!=null){let f={pixels:t},m={numChannels:n};return R.runKernel(G1,f,m)}let[c,u]=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(s)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||e)d=t.data;else if(i||o||a){if(L0==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")L0=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else L0=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});L0.canvas.width=c,L0.canvas.height=u,L0.drawImage(t,0,0,c,u),d=L0.getImageData(0,0,c,u).data}let p;if(n===4)p=new Int32Array(d);else{let f=c*u;p=new Int32Array(f*n);for(let m=0;m<f;m++)for(let g=0;g<n;++g)p[m*n+g]=d[m*4+g]}return j_(p,[u,c,n],"int32")}function FTe(t){return t!=null&&t.data instanceof Uint8Array}function PTe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function BTe(t){return t!=null&&t.width!==0&&t.height!==0}function LTe(t){return PTe()&&!(t instanceof ImageBitmap)&&BTe(t)&&!FTe(t)}function $Te(t,n=3){return z(this,null,function*(){let e=null;if(Q().getBool("WRAP_TO_IMAGEBITMAP")&&LTe(t)){let r;try{r=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?e=r:e=t}else e=t;return VX(e,n)})}function jX(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let n=t.rank===2?1:t.shape[2];if(n>4||n===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${n}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function VTe(t){let n=t?.alpha||1;if(n>1||n<0)throw new Error(`Alpha value ${n} is suppoed to be in range [0 - 1].`)}function jTe(t,n){return z(this,null,function*(){let e=b(t,"img","toPixels");if(!(t instanceof Ot)){let c=e;e=ge(c,"int32"),c.dispose()}jX(e);let[r,o]=e.shape.slice(0,2),i=e.rank===2?1:e.shape[2],s=yield e.data(),a=e.dtype==="float32"?255:1,l=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let u=[0,0,0,255];for(let p=0;p<i;p++){let h=s[c*i+p];if(e.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(e.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);i===1?(u[0]=h*a,u[1]=h*a,u[2]=h*a):u[p]=h*a}let d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}if(n!=null){$X||Jg(U1,R.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),$X=!0),n.width=o,n.height=r;let c=n.getContext("2d"),u=new ImageData(l,o,r);c.putImageData(u,0,0)}return e!==t&&e.dispose(),l})}function zTe(t,n,e){let r=b(t,"img","draw");if(!(t instanceof Ot)){let s=r;r=ge(s,"int32"),s.dispose()}jX(r),VTe(e?.imageOptions);let o={image:r},i={canvas:n,options:e};R.runKernel(U1,o,i)}var HTe=D({fromPixels_:VX});var s8={};Qt(s8,{prepareAndValidate:()=>zX});function zX(t,n){let e=t.shape.length,r=n.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(n.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.shape[r-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${n.shape[r-1]} vs. ${e}`);if(nn(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let o=n.shape,i=o[o.length-1],s=1;for(let d=0;d<o.length-1;++d)s*=o[d];let a=t.shape,l=o.slice();l.pop();let c=1;for(let d=i;d<e;++d)c*=a[d],l.push(a[d]);let u=[...Cc(t.shape).map(d=>d/c),1].slice(0,i);return[l,s,c,u]}var go={};Qt(go,{assertParamsValid:()=>GTe,computeFlatOffset:()=>XTe,computeOutShape:()=>qTe,getNormalizedAxes:()=>KTe,isSliceContinous:()=>ZTe,maskToAxes:()=>WTe,parseSliceParams:()=>l8,sliceInfo:()=>YTe,startForAxis:()=>XX,startIndicesWithElidedDims:()=>qX,stopForAxis:()=>YX,stopIndicesWithElidedDims:()=>KX,stridesForAxis:()=>ZX,stridesWithElidedDims:()=>UX});var a8=-2,UTe=-1;function GTe(t,n,e){let r=t.shape.length;F(r===n.length,()=>`Error in slice${r}D: Length of begin ${n} must match the rank of the array (${r}).`),F(r===e.length,()=>`Error in slice${r}D: Length of size ${e} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)F(n[o]+e[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${n[o]+e[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function WTe(t){let n=[],e=0;for(;t>0;)t&1&&n.push(e),t/=2,e++;return n}function qTe(t,n,e){let r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((n[o]-t[o])/e[o]);return r}function UX(t,n,e,r){let o=[...t];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<e;i++)i===0?o[n]=1:(o.splice(n,0,1),o.pop());return o}function GX(t,n,e){return e<=t?e:e-(n-1)}function WX(t,n){let e=[];for(let r=0;r<t;r++)e.push(n+r);return e}function KTe(t,n,e,r,o,i,s,a,l){let c=t.length,u=new Array(c),d=new Array(c),p=new Array(c);if(n.length&&e>0){let h=n[0],f=e+1;u=qX(s,h,f,r,t),d=KX(a,h,f,o,t),p=UX(i,h,f,t)}else for(let h=0;h<c;h++)u[h]=XX(s,r,i,t,h,l),d[h]=YX(a,o,i,t,h,l),p[h]=ZX(i,h,l);return{begin:u,end:d,strides:p}}function qX(t,n,e,r,o){let i=[...o],s=WX(e,n);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let l=GX(n,e,a),c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function KX(t,n,e,r,o){let i=[...o],s=WX(e,n);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let l=GX(n,e,a),c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let l=o[a];i[a]<0&&(i[a]+=l),i[a]=B1(0,i[a],o[a])}return i}function ZX(t,n,e){let r=t[n];return(e&1<<n||r==null)&&(r=1),r}function XX(t,n,e,r,o,i){let s=n[o],a=e[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),s=B1(0,s,l-1),s}function YX(t,n,e,r,o,i){let s=n[o],a=e[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),a>0?s=B1(0,s,l):s=B1(-1,s,l-1),s}function ZTe(t,n,e){let r=e.length;for(let o=0;o<e.length;o++)if(e[o]>1){r=o;break}for(let o=r+1;o<e.length;o++)if(n[o]>0||e[o]!==t[o])return!1;return!0}function XTe(t,n){let e=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}function l8(t,n,e){let r,o=t.shape.length;typeof n=="number"?r=[n,...new Array(o-1).fill(0)]:n.length<o?r=n.concat(new Array(o-n.length).fill(0)):r=n.slice(),r.forEach(s=>{F(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return e==null?i=new Array(o).fill(-1):typeof e=="number"?i=[e,...new Array(o-1).fill(-1)]:e.length<o?i=e.concat(new Array(o-e.length).fill(-1)):i=e,i=i.map((s,a)=>s>=0?s:(F(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function YTe(t,n,e,r,o,i,s,a,l){let c;if(r==null?(c=new Array(n.length),c.fill(1)):c=r,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:e.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let y=0;y<d.dims;y++)u&&(1<<y&a)!==0&&d.numAddAxisAfterEllipsis++,1<<y&s&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};QTe(d,p);let h=!0,f=!0,m=!0,g=[],v=[];for(let y=0;y<t.length;++y){if(p.strides[y]===0)throw Error(`strides[${y}] must be non-zero`);let _=!!(p.shrinkAxisMask&1<<y),k=t[y];if(k===-1){g.push(_?1:-1);continue}let M=[p.beginMask&1<<y,p.endMask&1<<y],E=[p.strides[y]>0?0:-1,p.strides[y]>0?k:k-1];if(_&&p.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&p.strides[y]===1;let A=!!(p.beginMask&1<<y&&p.endMask&1<<y);if(p.beginValid&&p.endValid){if(_){let S=p.begin[y]<0?k+p.begin[y]:p.begin[y];if(p.begin[y]=S,p.end[y]=p.begin[y]+1,S<0||S>=k)throw Error(`slice index ${p.begin[y]} of dimension ${y} out of bounds.`)}else p.begin[y]=HX(p.begin[y],0,p.strides[y],k,M,E),p.end[y]=HX(p.end[y],1,p.strides[y],k,M,E);let B=p.strides[y]===1&&p.begin[y]===0&&p.end[y]===k;h=h&&B,f=f&&(y===0&&p.strides[y]===1||B)}else h=h&&p.strides[y]===1&&A,f=f&&(y===0&&p.strides[y]===1||A);let P,N=!1;if(p.beginValid&&p.endValid?(P=p.end[y]-p.begin[y],N=!0):_?(P=1,N=!0):A&&k>=0&&(p.strides[y]<0?P=-k:P=k,N=!0),N){let B;P===0||P<0!=p.strides[y]<0?B=0:B=Math.trunc(P/p.strides[y])+(P%p.strides[y]!==0?1:0),g.push(B)}else g.push(-1)}for(let y=0;y<p.finalShapeGatherIndices.length;++y){let _=p.finalShapeGatherIndices[y];_>=0?v.push(g[_]):_===a8&&v.push(1)}return{finalShapeSparse:v.filter((y,_)=>p.finalShapeGatherIndices[_]!==a8),finalShape:v,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function QTe(t,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let e=0;n.beginValid=t.begin!=null,n.endValid=t.end!=null,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){let o=Math.min(n.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,n.dims);for(;e<o;e++)n.begin[e]=0,n.end[e]=0,n.strides[e]=1,n.beginMask|=1<<e,n.endMask|=1<<e,n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[e]=r}else if(1<<r&t.newAxisMask)n.finalShapeGatherIndices.push(a8),n.finalShapeGatherIndicesSparse.push(-1);else{if(e===n.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${n.dims} dims, ${n.begin.length}.`);t.begin!=null&&(n.begin[e]=t.begin[r]),t.end!=null&&(n.end[e]=t.end[r]),n.strides[e]=t.strides[r],t.beginMask&1<<r&&(n.beginMask|=1<<e),t.endMask&1<<r&&(n.endMask|=1<<e),t.shrinkAxisMask&1<<r?(n.finalShapeGatherIndices.push(UTe),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<e):(n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(r)),n.inputShapeGatherIndicesSparse[e]=r,e++}}function HX(t,n,e,r,o,i){if(o[n])return e>0?i[n]:i[n+1&1];{let s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var sT="4.22.0";var pv=class{static sgd(n){return new Mu(n)}static momentum(n,e,r=!1){return new rf(n,e,r)}static rmsprop(n,e=.9,r=0,o=null,i=!1){return new of(n,e,r,o,i)}static adam(n=.001,e=.9,r=.999,o=null){return new tf(n,e,r,o)}static adadelta(n=.001,e=.95,r=null){return new Jh(n,e,r)}static adamax(n=.002,e=.9,r=.999,o=null,i=0){return new nf(n,e,r,o,i)}static adagrad(n,e=.1){return new ef(n,e)}};var sf=pv;var JTe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function hv(){return new Promise(t=>JTe(()=>t()))}var O={};Qt(O,{ERF_A1:()=>fDe,ERF_A2:()=>mDe,ERF_A3:()=>gDe,ERF_A4:()=>vDe,ERF_A5:()=>wDe,ERF_P:()=>hDe,PARALLELIZE_THRESHOLD:()=>aT,RowPartitionType:()=>Ip,SELU_SCALE:()=>u8,SELU_SCALEALPHA:()=>c8,applyActivation:()=>P0,assertAndGetBroadcastShape:()=>Ft,assertAxesAreInnerMostDims:()=>qCe,assertParamsConsistent:()=>eDe,assignToTypedArray:()=>CDe,axesAreInnerMostDims:()=>s6,calculateShapes:()=>TZ,checkEinsumDimSizes:()=>IDe,checkPadOnDimRoundingMode:()=>zn,combineLocations:()=>rZ,combineRaggedTensorToTensorShapes:()=>nDe,complexWithEvenIndex:()=>_De,complexWithOddIndex:()=>kDe,computeConv2DInfo:()=>d0,computeConv3DInfo:()=>JK,computeDefaultPad:()=>e6,computeDilation2DInfo:()=>Wbe,computeOptimalWindowSize:()=>sDe,computeOutAndReduceShapes:()=>a6,computeOutShape:()=>tDe,computePool2DInfo:()=>JF,computePool3DInfo:()=>qbe,convertConv2DDataFormat:()=>eZ,decodeEinsumEquation:()=>DDe,eitherStridesOrDilationsAreOne:()=>qo,expandShapeToKeepDim:()=>Ea,exponent:()=>MDe,exponents:()=>SDe,fromStringArrayToUint8:()=>YDe,fromUint8ToStringArray:()=>XDe,getAxesPermutation:()=>l6,getBroadcastDims:()=>nZ,getComplexWithIndex:()=>bDe,getEinsumComputePath:()=>NDe,getEinsumPermutation:()=>EDe,getFusedBiasGradient:()=>F0,getFusedDyActivation:()=>O0,getImageCenter:()=>aDe,getInnerMostAxes:()=>KCe,getPermuted:()=>cDe,getRaggedRank:()=>oDe,getReductionAxes:()=>Fn,getReshaped:()=>lDe,getReshapedPermuted:()=>uDe,getRowPartitionTypesHelper:()=>rDe,getSliceBeginCoords:()=>dDe,getSliceSize:()=>pDe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>FDe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>PDe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>BDe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>VDe,getSparseReshapeInputOutputMismatchErrorMessage:()=>zDe,getSparseReshapeInputOutputMultipleErrorMessage:()=>jDe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>LDe,getSparseReshapeNegativeOutputDimErrorMessage:()=>$De,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>WDe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>HDe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>UDe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>GDe,getUndoAxesPermutation:()=>__,isIdentityPermutation:()=>ADe,log:()=>Cke,mergeRealAndImagArrays:()=>yDe,prepareAndValidate:()=>zX,prepareSplitSize:()=>ODe,segment_util:()=>p8,shouldFuse:()=>B0,slice_util:()=>go,splitRealAndImagArrays:()=>xDe,stridesOrDilationsArePositive:()=>xu,tupleValuesAreOne:()=>ra,upcastType:()=>Vr,validateDefaultValueShape:()=>iDe,validateInput:()=>cv,validateUpdateShape:()=>W6,warn:()=>vu});function eDe(t,n){let e=t[0].length;t.forEach((o,i)=>{F(o.length===e,()=>`Error in concat${e}D: rank of tensors[${i}] must be the same as the rank of the rest (${e})`)}),F(n>=0&&n<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);let r=t[0];t.forEach((o,i)=>{for(let s=0;s<e;s++)F(s===n||o[s]===r[s],()=>`Error in concat${e}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function tDe(t,n){let e=t[0].slice();for(let r=1;r<t.length;r++)e[n]+=t[r][n];return e}var Ip=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(Ip||{});function nDe(t,n,e){let r=new Array;if(e==null&&n==null)return r;if(n==null)for(;r.length<t+e.length;)r.push(-1);else r=n.slice();if(e==null)return r;if(t+e.length!==r.length)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.rank = ${t+e.length}, but shape.rank = ${r.length}`);for(let o=1;o<e.length;++o){let i=e[o],s=r[r.length-e.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.shape[${o+t}] = ${i} but shape[${o+t}] = ${a}`)}else r[s]=i}return r}function rDe(t){let n={FIRST_DIM_SIZE:Ip.FIRST_DIM_SIZE,VALUE_ROWIDS:Ip.VALUE_ROWIDS,ROW_LENGTHS:Ip.ROW_LENGTHS,ROW_SPLITS:Ip.ROW_SPLITS,ROW_LIMITS:Ip.ROW_LIMITS,ROW_STARTS:Ip.ROW_STARTS},e=[];for(let r of t)if(r in n)e.push(n[r]);else break;return e}function oDe(t){return t.length===0?0:t[0]===Ip.FIRST_DIM_SIZE?t.length-1:t.length}function iDe(t,n){if(t==null||n==null)return;let e=t.length,r=n.length;if(e>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${n}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(e,r-1);++o){let i=t[o],s=n[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${n} are incompatible: defaultValue.shape[${o-t.length}] = ${i} but ragged tensor input.flatValues.shape[${o-t.length}] = ${s}`)}}var aT=30;function sDe(t){return t<=aT?t:$1(t,Math.floor(Math.sqrt(t)))}function aDe(t,n,e){let r=e*(typeof t=="number"?t:t[0]),o=n*(typeof t=="number"?t:t[1]);return[r,o]}function lDe(t,n,e,r=!0){let o=[];if(r)o=o.concat(n.slice(0)),o.push(t[0]/e),o=o.concat(t.slice(1));else{o=o.concat(t[0]);let i=n.length;for(let s=0;s<i;++s)o=o.concat([t[s+1]/n[s],n[s]]);o=o.concat(t.slice(i+1))}return o}function cDe(t,n,e=!0){let r=[];if(e){r.push(n);for(let o=n+1;o<t;++o)o<=2*n?(r.push(o),r.push(o-(n+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<t;++s)s>=n*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function uDe(t,n,e,r=!0){let o=[];r?o.push(t[0]/e):o.push(t[0]*e);for(let i=1;i<t.length;++i)i<=n.length?r?o.push(n[i-1]*t[i]):o.push(t[i]/n[i-1]):o.push(t[i]);return o}function dDe(t,n){let e=[0];for(let r=0;r<n;++r)e.push(t[r][0]);return e}function pDe(t,n,e){let r=t.slice(0,1);for(let o=0;o<e;++o)r.push(t[o+1]-n[o][0]-n[o][1]);return r}var c8=1.7580993408473768,u8=1.0507009873554805;var hDe=.3275911,fDe=.254829592,mDe=-.284496736,gDe=1.421413741,vDe=-1.453152027,wDe=1.061405429;function yDe(t,n){if(t.length!==n.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${n.length}.`);let e=new Float32Array(t.length*2);for(let r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function xDe(t){let n=new Float32Array(t.length/2),e=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=t[r],e[r/2]=t[r+1];return{real:n,imag:e}}function _De(t){let n=Math.ceil(t.length/4),e=new Float32Array(n),r=new Float32Array(n);for(let o=0;o<t.length;o+=4)e[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:e,imag:r}}function kDe(t){let n=Math.floor(t.length/4),e=new Float32Array(n),r=new Float32Array(n);for(let o=2;o<t.length;o+=4)e[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:e,imag:r}}function bDe(t,n){let e=t[n*2],r=t[n*2+1];return{real:e,imag:r}}function CDe(t,n,e,r){t[r*2]=n,t[r*2+1]=e}function SDe(t,n){let e=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){let i=(n?2:-2)*Math.PI*(o/t);e[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:e,imag:r}}function MDe(t,n,e){let r=(e?2:-2)*Math.PI*(t/n),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var d8="->",TDe=/->/g,QX=",",JX="...";function DDe(t,n){t=t.replace(/\s/g,"");let e=(t.length-t.replace(TDe,"").length)/d8.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${d8}").`);let[r,o]=t.split(d8);F(r.indexOf(JX)===-1,()=>`The ellipsis notation ("${JX}") is not supported yet.`);let i=r.split(QX),s=i.length;if(n!==s)throw new Error(`Expected ${s} input tensors, received ${n}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<o.length;++p){let h=o[p];if(!i.some(f=>f.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let p=0;p<r.length;++p){let h=r[p];a.indexOf(h)===-1&&h!==QX&&a.push(h)}let l=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let h=0;h<i[p].length;++h)l[p].push(a.indexOf(i[p][h]))}let c=a.length,u=o.length,d=[];for(let p=u;p<c;++p)d.push(p);return{allDims:a,summedDims:d,idDims:l}}function EDe(t,n){let e=new Array(t);e.fill(-1);for(let o=0;o<n.length;++o)e[n[o]]=o;let r=[];for(let o=0;o<t;++o)e[o]===-1&&r.push(o);return e=e.filter(o=>o!==-1),{permutationIndices:e,expandDims:r}}function IDe(t,n,e){let r=new Array(t);for(let o=0;o<e.length;++o){let i=e[o].shape;for(let s=0;s<n[o].length;++s)r[n[o][s]]===void 0?r[n[o][s]]=i[s]:F(r[n[o][s]]===i[s],()=>`Expected dimension ${r[n[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function NDe(t,n){let e=t,r=[],o=0;t.length===0&&e.push(-1),o=t.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<e.length;++s){let a=e[s],l=RDe(n,a);for(let c of l)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:e,steps:r}}function ADe(t){return t.every((n,e)=>n===e)}function RDe(t,n){let e=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(n)!==-1||n===-1)&&e.push(r);return e}function ODe(t,n,e=0){let r=[];if(typeof n=="number")F(t.shape[e]%n===0,()=>"Number of splits must evenly divide the axis."),r=new Array(n).fill(t.shape[e]/n);else{let o=n.reduce((s,a)=>(a===-1&&(s+=1),s),0);F(o<=1,()=>"There should be only one negative value in split array.");let i=n.indexOf(-1);if(i!==-1){let s=n.reduce((a,l)=>l>0?a+l:a);n[i]=t.shape[e]-s}F(t.shape[e]===n.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=n}return r}function FDe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function PDe(t,n){return`indices(${t}, 0) is invalid: ${n} < 0`}function BDe(t,n,e){return`indices(${t}, 0) is invalid: ${n} >= ${e}`}function LDe(t,n){return`only one output dimension may be -1, not both ${t} and ${n}`}function $De(t,n){return`size ${t} must be non-negative, not ${n}`}function VDe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function jDe(t,n){let e=nn(t),r=nn(n);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${n}`}function zDe(t,n){let e=nn(t),r=nn(n);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${n}`}function HDe(){return"segment ids must be >= 0"}function UDe(){return"segment ids are not increasing"}function GDe(t,n){return`Segment id ${t} out of range [0, ${n}), possibly because segmentIds input is not sorted.`}function WDe(t,n,e){return`Bad: indices[${t}] == ${n} out of range [0, ${e})`}var p8={};Qt(p8,{collectGatherOpShapeInfo:()=>ZDe,computeOutShape:()=>KDe,segOpComputeOptimalWindowSize:()=>qDe});function qDe(t,n){let e=!1,r;for(t<=aT?(r=t,e=!0):r=$1(t,Math.floor(Math.sqrt(t)));!e;)r>n||r===t?e=!0:r=$1(t,r+1);return r}function KDe(t,n,e){let r=[],o=t.length;for(let i=0;i<o;i++)i!==n?r.push(t[i]):r.push(e);return r}function ZDe(t,n,e,r){let o=n.shape.length,i=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(e<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${e}).`);for(let d=0;d<r;++d)if(t.shape[d]!==n.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${n.shape[d]}.`);let s=t.shape[e],a=[],l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<e;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<o;d++)a.push(n.shape[d]);for(let d=e+1;d<i;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function XDe(t){try{return t.map(n=>Y1(n))}catch(n){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${n}`)}}function YDe(t){return t.map(n=>Hh(n))}var Xo={};Qt(Xo,{nonMaxSuppressionV3Impl:()=>XM,nonMaxSuppressionV4Impl:()=>YM,nonMaxSuppressionV5Impl:()=>QM,whereImpl:()=>HM});TX();var lT={kernelName:vd,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,sa(ge(e,"float32"),-1))}}};var eY={kernelName:Sc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=zt(ge(e,"float32")),o=En(Pe(ze(1),r));return Kt($e(t,o))}}}};var tY={kernelName:Mc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=En(Pe(zt(ge(e,"float32")),1));return $e(t,r)}}}};var nY={kernelName:Ca,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ft(e.shape,r.shape);return{a:()=>{let a=t,l=Fn(e.shape,o);return l.length>0&&(a=He(a,l)),$(a,e.shape)},b:()=>{let a=t,l=Fn(r.shape,o);return l.length>0&&(a=He(a,l)),$(a,r.shape)}}}};var rY={kernelName:wd,saveAllInputs:!0,gradFunc:(t,n)=>{let e={};return n.forEach((r,o)=>{e[o]=()=>t.clone()}),e}};var oY={kernelName:yd,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>dt(e)}}};var iY={kernelName:xd,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>dt(e)}}};var sY={kernelName:Tc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$e(t,En(Pe(ze(1),zt(ge(e,"float32")))))}}};var aY={kernelName:Dc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=En(fe(ze(1),zt(ge(e,"float32"))));return $e(t,r)}}}};var lY={kernelName:Nc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ft(e.shape,r.shape);return{a:()=>{let a=fe(zt(e),zt(r)),l=L(t,$e(r,a)),c=Fn(e.shape,o);return c.length>0&&(l=He(l,c)),$(l,e.shape)},b:()=>{let a=fe(zt(e),zt(r)),l=Kt(L(t,$e(e,a))),c=Fn(r.shape,o);return c.length>0&&(l=He(l,c)),$(l,r.shape)}}}};var cY={kernelName:Ec,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$e(t,fe(zt(ge(e,"float32")),1))}}};var uY={kernelName:Ic,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$e(t,Pe(ze(1),zt(ge(e,"float32"))))}}};function QDe(t,n,e,r,o,i){let s=b(t,"dy","avgPool3dGrad"),a=b(n,"input","avgPool3dGrad"),l=s,c=a,u=!1;a.rank===4&&(u=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),F(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),F(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),zn("avgPool3dGrad",o,i);let d={dy:l,input:c},p={filterSize:e,strides:r,pad:o,dimRoundingMode:i},h=R.runKernel(Qm,d,p);return u?$(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var dY=D({avgPool3dGrad_:QDe});var pY={kernelName:kd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{filterSize:o,strides:i,pad:s,dimRoundingMode:a}=e;return{x:()=>dY(t,r,o,i,s,a)}}};function JDe(t,n,e,r,o){let i=b(t,"dy","avgPoolGrad"),s=b(n,"input","avgPoolGrad");F(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let a=s,l=i,c=!1;s.rank===3&&(c=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),F(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);let u={dy:l,input:a},d={filterSize:e,strides:r,pad:o},p=R.runKernel(Ym,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var hY=D({avgPoolGrad_:JDe});var fY={kernelName:_d,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{filterSize:o,strides:i,pad:s}=e;return{x:()=>hY(t,r,o,i,s)}}};var mY={kernelName:bd,inputsToSave:["a","b"],gradFunc:(t,n,e)=>{let[r,o]=n,{transposeA:i,transposeB:s}=e;return!i&&!s?{a:()=>Bt(t,o,!1,!0),b:()=>Bt(r,t,!0,!1)}:!i&&s?{a:()=>Bt(t,o,!1,!1),b:()=>Bt(t,r,!0,!1)}:i&&!s?{a:()=>Bt(o,t,!1,!0),b:()=>Bt(r,t,!1,!1)}:{a:()=>Bt(o,t,!0,!0),b:()=>Bt(t,r,!0,!0)}}};var gY={kernelName:Cd,gradFunc:(t,n,e)=>{let{blockShape:r,crops:o}=e;return{x:()=>Cp(t,r,o)}}};var vY={kernelName:SF,gradFunc:(t,n,e)=>{let r=e,o=r.inputShape,i=r.shape,s=Array.from(i);for(let l=o.length-1;l>=0;l--)if(o[l]===i[l])s[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${i}].`);let a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>He(t,a,!0)}}};var wY={kernelName:yl,gradFunc:t=>({x:()=>t.clone()})};var yY={kernelName:Ac,gradFunc:t=>({x:()=>dt(t)})};var xY={kernelName:Rc,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{clipValueMin:o,clipValueMax:i}=e;return{x:()=>Nn(Do(_i(r,o),is(r,i)),t,dt(t))}}};var _Y={kernelName:Sd,inputsToSave:["x"],gradFunc:lT.gradFunc};var kY={kernelName:Md,saveAllInputs:!0,gradFunc:(t,n,e)=>{let r=n.map(l=>l.shape),{axis:o}=e,i=oo(o,n[0].shape)[0],s=r.map(l=>l[i]);return Kr(t,s,i).map(l=>()=>l)}};var bY={kernelName:Td,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,{dilations:i,strides:s,pad:a,dataFormat:l}=e;return F(ra(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>iv(r.shape,t,o,s,a,l),filter:()=>dv(r,t,o.shape,s,a,l)}}};var CY={kernelName:Dd,inputsToSave:["dy","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,{strides:i,pad:s,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>Li(t,o,i,s,a,1,l),filter:()=>dv(t,r,o.shape,i,s,a,l)}}};function eEe(t,n,e,r,o){let i=t;t.rank===4&&(i=$(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=n;s.rank===4&&(s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),F(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),F(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),F(e.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),F(i.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${e[3]}.`),F(s.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${e[4]}).`);let a={x:i,dy:s},l={strides:r,pad:o,filterShape:e};return R.runKernel(rg,a,l)}var SY=D({conv3DBackpropFilter_:eEe});var MY={kernelName:Ed,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:r,strides:o,pad:i}=e;F(ra(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[s,a]=n;return{x:()=>PM(s.shape,t,a,o,i),filter:()=>SY(s,t,a.shape,o,i)}}};var TY={kernelName:Oc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(Kt(M0(ge(e,"float32"))),t)}}};var DY={kernelName:Fc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(T0(ge(e,"float32")),t)}}};var EY={kernelName:Id,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o,exclusive:i,reverse:s}=e;return{x:()=>{let a=l6([o],r.rank),l=m0(t,o,i,!s);return a!=null&&(l=Lt(l,a)),l}}}};var IY={kernelName:Nd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:r,strides:o,pad:i,dimRoundingMode:s}=e,a=r??[1,1];F(ra(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[l,c]=n;return F(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),F(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),F(qo(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),zn("depthwiseConv2d",i,s),{x:()=>qM(l.shape,t,c,o,i,a,s),filter:()=>WM(l,t,c.shape,o,i,a,s)}}};var NY={kernelName:Ad,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,i={x:r,filter:o,dy:t},s={x:r,filter:o,dy:t};return{x:()=>R.runKernel(z1,i,e),filter:()=>R.runKernel(H1,s,e)}}};var AY={kernelName:Bc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n,r={dy:t,y:e};return{x:()=>R.runKernel(hg,r)}}};var RY={kernelName:Lc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,r=L(pr(Kt(zt(e))),2/Math.sqrt(Math.PI));return{x:()=>L(t,r)}}};var OY={kernelName:$c,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,e)}}};var FY={kernelName:Rd,inputsToSave:["input"],gradFunc:(t,n)=>{let[e]=n;return{input:()=>$(t,e.shape)}}};var PY={kernelName:Vc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,pr(e))}}};var BY={kernelName:jc,gradFunc:t=>({x:()=>dt(t)})};var LY={kernelName:zc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ft(e.shape,r.shape);return{a:()=>{let a=$e(t,ge(r,"float32")),l=Fn(e.shape,o);return l.length>0?$(He(a,l),e.shape):a},b:()=>{let a=L(t,ge(e,"float32")),l=Fn(r.shape,o);l.length>0&&(a=$(He(a,l),r.shape));let c=zt(r);return Kt($e(a,ge(c,"float32")))}}}};var $Y={kernelName:Od,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,n,e)=>{let{varianceEpsilon:r}=e,[o,i,s,a]=n,l=a??ze(1),c=Fn(i.shape,o.shape),u=[];if(i.rank===1){for(let _=0;_<o.shape.length-1;++_)u.push(o.shape[_]);u.push(1)}let d=Pe(o,i),p=L(t,l),h=b0(fe(s,ze(r))),f=L(L(L(h,h),h),ze(-.5));return{x:()=>i.rank===1?$(L(L(t,To($(h,[1,1,1,i.shape[0]]),u)),l),o.shape):$(L(L(t,h),l),o.shape),mean:()=>{let _=L(L(h,ze(-1)),p);return i.rank===1&&(_=He(_,c)),$(_,i.shape)},variance:()=>{let _=L(L(f,d),p);return i.rank===1&&(_=He(_,c)),$(_,i.shape)},scale:()=>{let _=L(d,h),k=L(t,_);return i.rank===1&&(k=He(k,c)),$(k,i.shape)},offset:()=>{let _=t;return i.rank===1&&(_=He(_,c)),$(_,i.shape)}}}};var zY={kernelName:Fd,inputsToSave:["x","indices"],gradFunc:(t,n,e)=>{let[r,o]=n,{axis:i,batchDims:s}=e,a=oo(i,r.shape)[0],l=(c,u,d)=>()=>{let p=c.shape,h=u.size,f=p.slice(0,a),m=f.length,g=p.slice(i,p.length).slice(1),v=g.length,w=VY(0,m),y=VY(m+1,m+1+v),_=jY([f,[h],g]),k=$(d,_),M=$(u,[h]),E=jY([[m],w,y]),A=Lt(k,E),P=R0(A,M,c.shape[a]),N=__(E);return P=Lt(P,N),P};if(s===1){let c=r.shape[0],u=r.split(c,0);return{x:()=>Yn(u.map((h,f)=>l(h,o.slice(f,1),t.slice(f,1))())).reshape(r.shape),indices:()=>o}}else return{x:l(r,o,t),indices:()=>o}}};function VY(t,n){let e=[];for(let r=t;r<n;++r)e.push(r);return e}function jY(t){let n=[];for(let e=0;e<t.length;++e)for(let r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var HY={kernelName:Hc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>dt(e),b:()=>dt(r)}}};var UY={kernelName:xl,gradFunc:t=>({x:()=>ge(t,"float32")})};var GY={kernelName:Uc,gradFunc:t=>({x:()=>dt(t)})};var WY={kernelName:Gc,gradFunc:t=>({x:()=>dt(t)})};var qY={kernelName:Wc,gradFunc:t=>({x:()=>dt(t)})};var KY={kernelName:Pd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{alpha:o}=e,i=Xn(r,0);return{x:()=>Nn(i,t,L(t,o))}}};var ZY={kernelName:Kc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$e(t,fe(e,1))}}};var XY={kernelName:qc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$e(t,ge(e,"float32"))}}};var YY={kernelName:MF,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e;return{logits:()=>{let s=pr(r);return Pe(t,L(He(t,o,!0),s))}}}};function tEe(t,n,e,r=5,o=1,i=1,s=.5){let a={x:t,y:n,dy:e},l={depthRadius:r,bias:o,alpha:i,beta:s};return R.runKernel(_g,a,l)}var QY=D({localResponseNormalizationBackprop_:tEe});var JY={kernelName:Bd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{depthRadius:i,bias:s,alpha:a,beta:l}=e;return{x:()=>QY(r,o,t,i,s,a,l)}}};function cT(t,n,e,r){return n.rank<e.rank&&(n=$(n,Ea(n.shape,r))),t.rank<e.rank&&(t=$(t,Ea(t.shape,r))),{x:()=>L(t,ge(Mo(e,n),t.dtype))}}var h8={kernelName:Ld,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let r=e,{reductionIndices:o}=r,i=n[0],s=n[1],a=oo(o,i.shape),l=cT(t,s,i,a);return{x:()=>l.x()}}};var eQ={kernelName:Zc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>L(t,ge(_i(e,r),"float32")),b:()=>L(t,ge(bu(e,r),"float32"))}}};function nEe(t,n,e,r,o,i,s){let a=b(t,"dy","maxPool3dGrad"),l=b(n,"input","maxPool3dGrad"),c=b(e,"output","maxPool3dGrad"),u=a,d=l,p=c,h=!1;l.rank===4&&(h=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=$(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=$(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),F(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),F(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),F(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),zn("maxPool3dGrad",i,s);let f={dy:u,input:d,output:p},m={filterSize:r,strides:o,pad:i,dimRoundingMode:s},g=R.runKernel(bg,f,m);return h?$(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}var tQ=D({maxPool3dGrad_:nEe});var nQ={kernelName:Vd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=e;return{x:()=>tQ(t,r,o,i,s,a,l)}}};function rEe(t,n,e,r,o,i,s){let a=b(t,"dy","maxPoolGrad"),l=b(n,"input","maxPoolGrad"),c=b(e,"output","maxPoolGrad");F(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),F(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),F(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),zn("maxPoolGrad",i,s);let u={dy:a,input:l,output:c},d={filterSize:r,strides:o,pad:i,dimRoundingMode:s};return R.runKernel(kg,u,d)}var rQ=D({maxPoolGrad_:rEe});var oQ={kernelName:$d,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{filterSize:i,strides:s,pad:a}=e;return{x:()=>rQ(t,r,o,i,s,a)}}};var iQ={kernelName:jd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e,i=oo(o,r.shape),a=a6(r.shape,i)[1],l=nn(a);return{x:()=>{let u=r.shape.slice();i.forEach(h=>{u[h]=1});let d=$(t,u);return $e(L(d,Dr(r.shape,"float32")),l)}}}};var sQ={kernelName:zd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let r=e,{axis:o}=r,[i,s]=n,a=oo(o,i.shape),l=cT(t,s,i,a);return{x:()=>l.x()}}};var aQ={kernelName:Xc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>L(t,ge(is(e,r),"float32")),b:()=>L(t,ge(Xn(e,r),"float32"))}}};var lQ={kernelName:Hd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let r=n[0],{paddings:o}=e,i=o.map(s=>s[0]);return{x:()=>Nt(t,i,r.shape)}}};var cQ={kernelName:Yc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ft(e.shape,r.shape);return{a:()=>{let a=Fn(e.shape,o);return a.length>0?$(He(t,a),e.shape):t},b:()=>{let a=L(t,Kt(Al($e(e,r)))),l=Fn(r.shape,o);return l.length>0?$(He(a,l),r.shape):a}}}};var uQ={kernelName:Qc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ft(e.shape,r.shape);return{a:()=>{let a=L(t,ge(r,"float32")),l=Fn(e.shape,o);return l.length>0?$(He(a,l),e.shape):a},b:()=>{let a=L(t,ge(e,"float32")),l=Fn(r.shape,o);return l.length>0?$(He(a,l),r.shape):a}}}};var dQ={kernelName:Ud,gradFunc:t=>({x:()=>Kt(t)})};var pQ={kernelName:Wd,inputsToSave:["indices"],gradFunc:(t,n)=>{let e=n[0];return{indices:()=>Bn(e.shape,"float32")}}};var hQ={kernelName:Gd,gradFunc:t=>({x:()=>dt(t)})};var fQ={kernelName:qd,saveAllInputs:!0,gradFunc:(t,n,e)=>{let{axis:r}=e;return Zr(t,r).map(i=>()=>i)}};var f8={kernelName:Kd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let r=n[0],{paddings:o}=e,i=o.map(s=>s[0]);return{x:()=>Nt(t,i,r.shape)}}};var mQ={kernelName:Jc,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,n)=>{let[e,r,o]=n,i=e,s=r,a=Ft(i.shape,s.shape);return{a:()=>{let u=ge(s,"float32"),d=L(t,L(u,Ko(i,Pe(u,ze(1))))),p=Fn(i.shape,a);return p.length>0&&(d=He(d,p)),$(d,i.shape)},b:()=>{let u=Xn(i,0),d=Nn(u,mo(i),dt(i)),p=L(t,L(o,d)),h=Fn(s.shape,a);return h.length>0&&(p=He(p,h)),$(p,s.shape)}}}};var gQ={kernelName:Zd,inputsToSave:["x","alpha"],gradFunc:(t,n)=>{let[e,r]=n,o=Xn(e,0);return{x:()=>Nn(o,t,L(t,r)),alpha:()=>{let i=Nn(o,dt(t),L(t,e)),s=Fn(r.shape,t.shape);return s.length>0&&(i=He(i,s)),$(i,r.shape)}}}};function oEe(t,n,e){let r=t.shape.slice();r[e]=1;let o=$(n,r),i=Kh(t,e,!0,!1),s=Kh(t,e,!0,!0),a=L(i,s);return L(o,a)}function iEe(t,n,e){let r=t.shape.length,o=r-e.length,i=O.getAxesPermutation(e,r),s=t;i!=null&&(s=Lt(t,i));let a=s.shape.slice(),c=a.splice(r-e.length,e.length).reduce((p,h)=>p*h,1);a.push(c);let u=s.reshape(a),d=oEe(u,n,o);if(d=d.reshape(s.shape),i!=null){let p=O.getUndoAxesPermutation(i);d=Lt(d,p)}return d}var vQ={kernelName:Xd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e,i=[];return o==null?i=r.shape.map((s,a)=>a):typeof o=="number"?i=[o]:i=o,{x:()=>iEe(r,t,i)}}};var wQ={kernelName:Pc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ft(e.shape,r.shape);return{a:()=>{let a=$e(t,ge(r,"float32")),l=Fn(e.shape,o);return l.length>0?$(He(a,l),e.shape):a},b:()=>{let a=L(t,ge(e,"float32")),l=Fn(r.shape,o);l.length>0&&(a=$(He(a,l),r.shape));let c=zt(r);return Kt($e(a,ge(c,"float32")))}}}};var yQ={kernelName:eu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$e(t,Kt(zt(e)))}}};var xQ={kernelName:nu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,r=L(is(e,6),sa(e));return{x:()=>L(t,ge(r,"float32"))}}};var _Q={kernelName:tu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,ge(sa(e),"float32"))}}};var kQ={kernelName:Yd,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$(t,e.shape)}}};var bQ={kernelName:Jd,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[r]=n,o={dy:t,images:r};return{images:()=>R.runKernel(Fg,o,e)}}};var CQ={kernelName:Qd,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[r]=n,o={dy:t,images:r};return{images:()=>R.runKernel(Og,o,e)}}};var SQ={kernelName:ep,gradFunc:(t,n,e)=>{let{dims:r}=e,o=oo(r,t.shape);return{x:()=>qr(t,o)}}};var MQ={kernelName:ru,gradFunc:t=>({x:()=>dt(t)})};var TQ={kernelName:ou,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Kt($e(t,L(Ko(e,1.5),2)))}}};var DQ={kernelName:tp,inputsToSave:["condition"],gradFunc:(t,n)=>{let[e]=n;return{condition:()=>ge(dt(e),"float32"),t:()=>L(t,ge(e,t.dtype)),e:()=>L(t,ge(kp(e),t.dtype))}}};var EQ={kernelName:iu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=Xn(e,ze(0)),o=ze(c8),i=ze(u8),s=L(t,i),a=L(L(t,o),pr(ge(e,"float32")));return Nn(r,s,a)}}}};var IQ={kernelName:cu,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,L(e,Pe(ze(1),e)))}}};var NQ={kernelName:lu,gradFunc:t=>({x:()=>dt(t)})};var AQ={kernelName:su,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(gp(ge(e,"float32")),t)}}};var RQ={kernelName:au,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(f0(ge(e,"float32")),t)}}};var OQ={kernelName:np,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{begin:o,size:i}=e,s=r.shape,[a,l]=l8(r,o,i),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],s[u]-a[u]-l[u]]);return{x:()=>bi(t,c)}}};var FQ={kernelName:sp,outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r]=n,{dim:o}=e,i=!0,s=L(t,r);return{logits:()=>Pe(s,L(He(s,[o],i),r))}}};var PQ={kernelName:uu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,ui(e))}}};var m8={kernelName:op,gradFunc:(t,n,e)=>{let{blockShape:r,paddings:o}=e;return{x:()=>mp(t,r,o)}}};var g8={kernelName:ip,gradFunc:(t,n,e)=>{let{axis:r}=e;return{x:()=>gn(t,r)}}};var BQ={kernelName:du,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$e(t,L(En(ge(e,"float32")),2))}}};var LQ={kernelName:Ug,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,L(ge(e,"float32"),2))}}};var $Q={kernelName:pu,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=ze(2);return{a:()=>L(t,L(o,Pe(e,r))),b:()=>L(t,L(o,Pe(r,e)))}}};var VQ={kernelName:gu,gradFunc:t=>({x:()=>dt(t)})};var jQ={kernelName:hu,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ft(e.shape,r.shape);return{a:()=>{let a=t,l=Fn(e.shape,o);return l.length>0&&(a=He(a,l)),$(a,e.shape)},b:()=>{let a=t,l=Fn(r.shape,o);return l.length>0&&(a=He(a,l)),$(Kt(a),r.shape)}}}};var zQ={kernelName:rp,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,o=r.shape.slice(),{axis:i}=e;oo(i,r.shape).forEach(c=>{o[c]=1});let a=$(t,o),l=L(a,Dr(r.shape,"float32"));return{x:()=>l}}};var HQ={kernelName:fu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$e(t,zt(gp(e)))}}};var UQ={kernelName:mu,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(Pe(ze(1),zt(e)),t)}}};var GQ={kernelName:_l,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{reps:o}=e;return{x:()=>{let s=dt(r);if(r.rank===1)for(let a=0;a<o[0];++a)s=fe(s,Nt(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)s=fe(s,Nt(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)s=fe(s,Nt(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)for(let u=0;u<o[3];++u)s=fe(s,Nt(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};var WQ={kernelName:kl,gradFunc:(t,n,e)=>{let r=e,{perm:o}=r,i=__(o);return{x:()=>Lt(t,i)}}};var qQ={kernelName:ap,gradFunc:(t,n,e)=>{let r=e,{axis:o}=r;return{value:()=>Yn(t,o)}}};var KQ={kernelName:lp,inputsToSave:["segmentIds"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>sEe(t,e)}}};function sEe(t,n){let e=$i(n,dt(n)),r=Rl(t,e),o=_i(n,ze(0,"int32")),i=r.rank-o.rank;for(let a=0;a<i;++a)o=hr(o,a+1);o=Do(o,Dr(r.shape,"bool"));let s=dt(r);return Nn(o,r,s)}var ZQ={kernelName:cp,gradFunc:t=>({x:()=>dt(t)})};var aEe=[lT,eY,tY,nY,rY,oY,iY,sY,aY,lY,cY,uY,pY,fY,mY,gY,vY,wY,yY,xY,_Y,kY,CY,bY,MY,TY,DY,EY,IY,NY,wQ,AY,RY,OY,FY,PY,LY,BY,$Y,zY,HY,UY,GY,WY,qY,KY,ZY,XY,YY,JY,h8,h8,eQ,nQ,oQ,iQ,sQ,aQ,lQ,cQ,uQ,dQ,pQ,hQ,fQ,f8,f8,mQ,gQ,vQ,yQ,xQ,_Q,kQ,bQ,CQ,SQ,MQ,TQ,DQ,EQ,IQ,NQ,AQ,RQ,OQ,FQ,PQ,m8,m8,g8,g8,BQ,$Q,LQ,VQ,jQ,zQ,HQ,UQ,GQ,WQ,qQ,KQ,ZQ];for(let t of aEe)TF(t);U().prototype.abs=function(){return this.throwIfDisposed(),jn(this)};U().prototype.acos=function(){return this.throwIfDisposed(),Zx(this)};U().prototype.acosh=function(){return this.throwIfDisposed(),Xx(this)};U().prototype.add=function(t){return this.throwIfDisposed(),fe(this,t)};U().prototype.all=function(t,n){return this.throwIfDisposed(),u0(this,t,n)};U().prototype.any=function(t,n){return this.throwIfDisposed(),qh(this,t,n)};U().prototype.argMax=function(t){return this.throwIfDisposed(),Tl(this,t)};U().prototype.argMin=function(t){return this.throwIfDisposed(),Yx(this,t)};U().prototype.asScalar=function(){return this.throwIfDisposed(),F(this.size===1,()=>"The array must have only 1 element."),$(this,[])};U().prototype.asType=function(t){return this.throwIfDisposed(),ge(this,t)};U().prototype.as1D=function(){return this.throwIfDisposed(),$(this,[this.size])};U().prototype.as2D=function(t,n){return this.throwIfDisposed(),$(this,[t,n])};U().prototype.as3D=function(t,n,e){return this.throwIfDisposed(),$(this,[t,n,e])};U().prototype.as4D=function(t,n,e,r){return this.throwIfDisposed(),$(this,[t,n,e,r])};U().prototype.as5D=function(t,n,e,r,o){return this.throwIfDisposed(),$(this,[t,n,e,r,o])};U().prototype.asin=function(){return this.throwIfDisposed(),Qx(this)};U().prototype.asinh=function(){return this.throwIfDisposed(),Jx(this)};U().prototype.atan=function(){return this.throwIfDisposed(),e_(this)};U().prototype.atan2=function(t){return this.throwIfDisposed(),t_(this,t)};U().prototype.atanh=function(){return this.throwIfDisposed(),n_(this)};U().prototype.avgPool=function(t,n,e,r){return this.throwIfDisposed(),fp(this,t,n,e,r)};U().prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),mp(this,t,n)};U().prototype.batchNorm=function(t,n,e,r,o){return this.throwIfDisposed(),Dl(this,t,n,e,r,o)};U().prototype.broadcastTo=function(t){return this.throwIfDisposed(),El(this,t)};U().prototype.cast=function(t){return this.throwIfDisposed(),ge(this,t)};U().prototype.ceil=function(){return this.throwIfDisposed(),u_(this)};U().prototype.clipByValue=function(t,n){return this.throwIfDisposed(),ho(this,t,n)};U().prototype.concat=function(t,n){return this.throwIfDisposed(),t instanceof Ot&&(t=[t]),gn([this,...t],n)};U().prototype.conv1d=function(t,n,e,r,o,i){return this.throwIfDisposed(),p0(this,t,n,e,r,o,i)};U().prototype.conv2dTranspose=function(t,n,e,r,o){return this.throwIfDisposed(),h0(this,t,n,e,r,o)};U().prototype.conv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),Li(this,t,n,e,r,o,i)};U().prototype.cos=function(){return this.throwIfDisposed(),gp(this)};U().prototype.cosh=function(){return this.throwIfDisposed(),f0(this)};U().prototype.cumprod=function(t,n,e){return this.throwIfDisposed(),Kh(this,t,n,e)};U().prototype.cumsum=function(t,n,e){return this.throwIfDisposed(),m0(this,t,n,e)};U().prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),v_(this,t,n)};U().prototype.depthwiseConv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),Il(this,t,n,e,r,o,i)};U().prototype.dilation2d=function(t,n,e,r,o){return this.throwIfDisposed(),w_(this,t,n,e,r,o)};U().prototype.divNoNan=function(t){return this.throwIfDisposed(),y_(this,t)};U().prototype.div=function(t){return this.throwIfDisposed(),$e(this,t)};U().prototype.dot=function(t){return this.throwIfDisposed(),x_(this,t)};U().prototype.elu=function(){return this.throwIfDisposed(),Nl(this)};U().prototype.equal=function(t){return this.throwIfDisposed(),Mo(this,t)};U().prototype.erf=function(){return this.throwIfDisposed(),g0(this)};U().prototype.euclideanNorm=function(t,n){return this.throwIfDisposed(),k_(this,t,n)};U().prototype.exp=function(){return this.throwIfDisposed(),pr(this)};U().prototype.expandDims=function(t){return this.throwIfDisposed(),hr(this,t)};U().prototype.expm1=function(){return this.throwIfDisposed(),b_(this)};U().prototype.fft=function(){return this.throwIfDisposed(),Tp(this)};U().prototype.flatten=function(){return this.throwIfDisposed(),$(this,[this.size])};U().prototype.floor=function(){return this.throwIfDisposed(),Al(this)};U().prototype.floorDiv=function(t){return this.throwIfDisposed(),c0(this,t)};U().prototype.gather=function(t,n,e){return this.throwIfDisposed(),Rl(this,t,n,e)};U().prototype.greaterEqual=function(t){return this.throwIfDisposed(),_i(this,t)};U().prototype.greater=function(t){return this.throwIfDisposed(),Xn(this,t)};U().prototype.ifft=function(){return this.throwIfDisposed(),Su(this)};U().prototype.irfft=function(){return this.throwIfDisposed(),I0(this)};U().prototype.isFinite=function(){return this.throwIfDisposed(),C_(this)};U().prototype.isInf=function(){return this.throwIfDisposed(),S_(this)};U().prototype.isNaN=function(){return this.throwIfDisposed(),M_(this)};U().prototype.leakyRelu=function(t){return this.throwIfDisposed(),yp(this,t)};U().prototype.lessEqual=function(t){return this.throwIfDisposed(),is(this,t)};U().prototype.less=function(t){return this.throwIfDisposed(),bu(this,t)};U().prototype.localResponseNormalization=function(t,n,e,r){return this.throwIfDisposed(),T_(this,t,n,e,r)};U().prototype.logSigmoid=function(){return this.throwIfDisposed(),E_(this)};U().prototype.logSoftmax=function(t){return this.throwIfDisposed(),v0(this,t)};U().prototype.logSumExp=function(t,n){return this.throwIfDisposed(),_p(this,t,n)};U().prototype.log=function(){return this.throwIfDisposed(),mo(this)};U().prototype.log1p=function(){return this.throwIfDisposed(),xp(this)};U().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Do(this,t)};U().prototype.logicalNot=function(){return this.throwIfDisposed(),kp(this)};U().prototype.logicalOr=function(t){return this.throwIfDisposed(),w0(this,t)};U().prototype.logicalXor=function(t){return this.throwIfDisposed(),I_(this,t)};U().prototype.matMul=function(t,n,e){return this.throwIfDisposed(),Bt(this,t,n,e)};U().prototype.maxPool=function(t,n,e,r){return this.throwIfDisposed(),bp(this,t,n,e,r)};U().prototype.max=function(t,n){return this.throwIfDisposed(),fo(this,t,n)};U().prototype.maximum=function(t){return this.throwIfDisposed(),$i(this,t)};U().prototype.mean=function(t,n){return this.throwIfDisposed(),Pn(this,t,n)};U().prototype.min=function(t,n){return this.throwIfDisposed(),_u(this,t,n)};U().prototype.minimum=function(t){return this.throwIfDisposed(),Fs(this,t)};U().prototype.mirrorPad=function(t,n){return this.throwIfDisposed(),A_(this,t,n)};U().prototype.mod=function(t){return this.throwIfDisposed(),R_(this,t)};U().prototype.mul=function(t){return this.throwIfDisposed(),L(this,t)};U().prototype.neg=function(){return this.throwIfDisposed(),Kt(this)};U().prototype.norm=function(t,n,e){return this.throwIfDisposed(),ku(this,t,n,e)};U().prototype.notEqual=function(t){return this.throwIfDisposed(),Na(this,t)};U().prototype.oneHot=function(t,n=1,e=0){return this.throwIfDisposed(),Ol(this,t,n,e)};U().prototype.onesLike=function(){return this.throwIfDisposed(),io(this)};U().prototype.pad=function(t,n){return this.throwIfDisposed(),bi(this,t,n)};U().prototype.pool=function(t,n,e,r,o,i){return this.throwIfDisposed(),O_(this,t,n,e,r,o,i)};U().prototype.pow=function(t){return this.throwIfDisposed(),Ko(this,t)};U().prototype.prelu=function(t){return this.throwIfDisposed(),Sp(this,t)};U().prototype.prod=function(t,n){return this.throwIfDisposed(),F_(this,t,n)};U().prototype.reciprocal=function(){return this.throwIfDisposed(),B_(this)};U().prototype.relu=function(){return this.throwIfDisposed(),Eo(this)};U().prototype.relu6=function(){return this.throwIfDisposed(),_0(this)};U().prototype.reshapeAs=function(t){return this.throwIfDisposed(),$(this,t.shape)};U().prototype.reshape=function(t){return this.throwIfDisposed(),$(this,t)};U().prototype.resizeBilinear=function(t,n,e){return this.throwIfDisposed(),JM(this,t,n,e)};U().prototype.resizeNearestNeighbor=function(t,n,e){return this.throwIfDisposed(),eT(this,t,n,e)};U().prototype.reverse=function(t){return this.throwIfDisposed(),qr(this,t)};U().prototype.rfft=function(){return this.throwIfDisposed(),Dp(this)};U().prototype.round=function(){return this.throwIfDisposed(),k0(this)};U().prototype.rsqrt=function(){return this.throwIfDisposed(),b0(this)};U().prototype.selu=function(){return this.throwIfDisposed(),C0(this)};U().prototype.separableConv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),S0(this,t,n,e,r,o,i)};U().prototype.sigmoid=function(){return this.throwIfDisposed(),ui(this)};U().prototype.sign=function(){return this.throwIfDisposed(),L_(this)};U().prototype.sin=function(){return this.throwIfDisposed(),M0(this)};U().prototype.sinh=function(){return this.throwIfDisposed(),T0(this)};U().prototype.slice=function(t,n){return this.throwIfDisposed(),Nt(this,t,n)};U().prototype.softmax=function(t){return this.throwIfDisposed(),Mp(this,t)};U().prototype.softplus=function(){return this.throwIfDisposed(),Ia(this)};U().prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),Cp(this,t,n)};U().prototype.split=function(t,n){return this.throwIfDisposed(),Kr(this,t,n)};U().prototype.sqrt=function(){return this.throwIfDisposed(),En(this)};U().prototype.square=function(){return this.throwIfDisposed(),zt(this)};U().prototype.squaredDifference=function(t){return this.throwIfDisposed(),N0(this,t)};U().prototype.squeeze=function(t){return this.throwIfDisposed(),as(this,t)};U().prototype.stack=function(t,n){this.throwIfDisposed();let e=t instanceof Ot?[this,t]:[this,...t];return Yn(e,n)};U().prototype.step=function(t){return this.throwIfDisposed(),sa(this,t)};U().prototype.stridedSlice=function(t,n,e,r,o,i,s,a){return this.throwIfDisposed(),$_(this,t,n,e,r,o,i,s,a)};U().prototype.sub=function(t){return this.throwIfDisposed(),Pe(this,t)};U().prototype.sum=function(t,n){return this.throwIfDisposed(),He(this,t,n)};U().prototype.tan=function(){return this.throwIfDisposed(),V_(this)};U().prototype.tanh=function(){return this.throwIfDisposed(),Da(this)};U().prototype.tile=function(t){return this.throwIfDisposed(),To(this,t)};U().prototype.toBool=function(){return this.throwIfDisposed(),ge(this,"bool")};U().prototype.toFloat=function(){return this.throwIfDisposed(),ge(this,"float32")};U().prototype.toInt=function(){return this.throwIfDisposed(),ge(this,"int32")};U().prototype.topk=function(t,n){return this.throwIfDisposed(),H_(this,t,n)};U().prototype.transpose=function(t){return this.throwIfDisposed(),Lt(this,t)};U().prototype.unique=function(t){return this.throwIfDisposed(),U_(this,t)};U().prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),R0(this,t,n)};U().prototype.unstack=function(t){return this.throwIfDisposed(),Zr(this,t)};U().prototype.where=function(t,n){return this.throwIfDisposed(),Nn(t,this,n)};U().prototype.zerosLike=function(){return this.throwIfDisposed(),dt(this)};var aa=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},Vi=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},te=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},_t=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},uT=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}};var X_=class{constructor(n){this.maxEntries=n||100,this.cache=new Map}get(n){let e;return this.cache.has(n)&&(e=this.cache.get(n),this.cache.delete(n),this.cache.set(n,e)),e}put(n,e){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxEntries){let r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(n,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(n){if(n<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${n}.`);if(this.maxEntries>n)for(let e=0;e<this.maxEntries-n;e++){let r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=n}};function Fa(t,n){if(Array.isArray(t)){let e=[];for(let r=0;r<n;r++)e=e.concat(t);return e}else{let e=new Array(n);return e.fill(t),e}}function la(t,n){if(!t)throw new uT(n)}function w8(t,n){let e=0;for(let r of t)r===n&&e++;return e}function Io(t){return t.length===1?t[0]:t}function Cn(t){return Array.isArray(t)?t:[t]}function Pa(t){let e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return e[0]!=="_"?e:"private"+e}function Np(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(n,e)=>e.toUpperCase())}var Oa={};function fv(t){if(t==null)return null;let n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function v8(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(n=>v8(n));else{let n=Object.keys(t);for(let e of n){let r=t[e];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[e]=r.value:v8(r))}}}function Tu(t,n={},e={},r="object",o=!1){if(typeof t=="string"){let i=t,s;if(i in e)s=e[i];else if(i in Oa)s=Oa[i];else if(s=n[i],s==null)throw new te(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{let i=t;if(i.className==null||i.config==null)throw new te(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);let s=i.className,a,l;if(s in e?[a,l]=e[s]:s in Oa?[a,l]=Oa.className:s in n&&([a,l]=n[s]),a==null)throw new te(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let c={};for(let h of Object.keys(Oa))c[h]=Oa[h];for(let h of Object.keys(e))c[h]=e[h];let u=i.config;u.customObjects=c;let d=Object.assign({},Oa);for(let h of Object.keys(e))Oa[h]=e[h];v8(i.config);let p=l(a,i.config,e,o);return Oa=Object.assign({},d),p}else{let c=Object.assign({},Oa);for(let d of Object.keys(e))Oa[d]=e[d];let u=new a(i.config);return Oa=Object.assign({},c),u}}}function lEe(t,n){return t<n?-1:t>n?1:0}function Y_(t,n){return-1*lEe(t,n)}function Ba(t){if(t==null)return t;let n=[];for(let e of t)n.indexOf(e)===-1&&n.push(e);return n}function XQ(t){if(t==null)throw new te(`Invalid value in obj: ${JSON.stringify(t)}`);for(let n in t)if(t.hasOwnProperty(n))return!1;return!0}function Du(t,n,e){if(e!=null&&t.indexOf(e)<0)throw new te(`${e} is not a valid ${n}.  Valid values are ${t} or null/undefined.`)}function dT(t,n,e=0,r=1/0){return la(e>=0),la(r>=e),Array.isArray(t)&&t.length>=e&&t.length<=r&&t.every(o=>typeof o===n)}function Nr(t,n){Array.isArray(t)?(x.assert(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((e,r)=>Nr(e,`element ${r+1} of ${n}`))):x.assert(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${YQ(t)}.`)}function YQ(t){return t===null?"null":Array.isArray(t)?"["+t.map(n=>YQ(n)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function QQ(t,n,e){let r=e!=null?e():x.now(),o;return(...s)=>{let a=e!=null?e():x.now();return a-r<n||(r=a,o=t(...s)),o}}function pT(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}var cEe=0;function fT(){return cEe++}var hT={};function af(t=""){return t in hT||(hT[t]=0),hT[t]+=1,t+hT[t].toString()}var JQ=["channelsFirst","channelsLast"],eJ=["nearest","bilinear"],tJ=["valid","same","causal"],nJ=["max","avg"],rJ=["sum","mul","concat","ave"];var mv=new Map;function rr(t){Du(JQ,"DataFormat",t)}function iJ(t){Du(eJ,"InterpolationFormat",t)}function ji(t){Du(tJ,"PaddingMode",t)}function y8(t){Du(nJ,"PoolMode",t)}var Q_=[],oJ="/";function Bl(t,n){Q_.push(t);try{let e=n();return Q_.pop(),e}catch(e){throw Q_.pop(),e}}function uEe(){return Q_.length===0?"":Q_.join(oJ)+oJ}function mT(t){if(!sJ(t))throw new Error("Not a valid tensor name: '"+t+"'");return uEe()+t}function gT(t){if(!sJ(t))throw new Error("Not a valid tensor name: '"+t+"'");mv.has(t)||mv.set(t,0);let n=mv.get(t);if(mv.set(t,mv.get(t)+1),n>0){let e=`${t}_${n}`;return mv.set(e,1),e}else return t}var dEe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function sJ(t){return!!t.match(dEe)}function aJ(t){return t===parseInt(t.toString(),10)}function La(t,n,e){n==null&&(n=0),e==null&&(e=t.length);let r=1;for(let o=n;o<e;++o)r*=t[o];return r}function $0(t){if(t.length===0)return Number.NaN;let n=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++){let r=t[e];r<n&&(n=r)}return n}function Ll(t){if(t.length===0)return Number.NaN;let n=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){let r=t[e];r>n&&(n=r)}return n}function zi(t,n){if(n<t)throw new te(`end (${n}) < begin (${t}) is forbidden.`);let e=[];for(let r=t;r<n;++r)e.push(r);return e}var x8;function Yr(){return x8==null&&(x8=Wx().epsilon()),x8}function Hi(){return"channelsLast"}function Si(t,n){return ge(t,n)}function Rp(t,n=-1){let e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),$(t,e)}function lJ(t,n){return ne(()=>{if(t.shape.length!==2)throw new te(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let e=Rp(t,1);return wT(e,[1,n,1])})}function cJ(t){let n=[La(t.shape)];return $(t,n)}function uJ(t){if(t.rank<=1)throw new te(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let n=[t.shape[0],La(t.shape,1)];return $(t,n)}function Ap(t,n,e){return ne(()=>{switch(t.rank){case 1:return D0(t,n,e);case 2:return lv(t,[n,0],[e,t.shape[1]]);case 3:return E0(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return Qh(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Nt(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Nt(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new te(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function _8(t,n,e){return ne(()=>{switch(t.rank){case 1:return D0(t,n,e);case 2:return lv(t,[0,n],[t.shape[0],e]);case 3:return E0(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return Qh(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new te(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function J_(t,n,e,r){return ne(()=>{switch(t.rank){case 1:return D0(t,n,e);case 2:switch(r){case 1:return Ap(t,n,e);case 2:return _8(t,n,e);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Ap(t,n,e);case 2:return E0(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return _8(t,n,e);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Ap(t,n,e);case 2:return Qh(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return Qh(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return _8(t,n,e);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}default:throw new te(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function gv(t,n=-1){let e;return n<0&&(e=t[0].rank,e!==0?n=e:n=0),n===t[0].rank&&(n=-1),gn(t,n)}function b8(t,n){switch(t.rank){case 1:return d_([t,n]);case 2:return p_([t,n],0);case 3:return h_([t,n],0);case 4:return f_([t,n],0);default:throw new te(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function wT(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new te(`The length of input n (${n.length}) does not match the number of dimensions in input x (${t.rank})`);return To(t,n)}function vv(t,n=0,e=1,r,o){return Yh(t,n,e,r,o)}function $a(t,n,e,r){if(t.rank<2||n.rank<2)throw new _t(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${n.shape}`);if(n.rank>=3){let o=t.shape.slice(-1)[0],i=n.shape.slice(-2)[0];if(o!==i)throw new _t(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${n.shape}`)}if(t.rank===2&&n.rank===2)return Ep.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:r?k8(t.rank,r,Hi()):null,activation:e});{let o=t.shape.slice(),i=o.pop();t=$(t,[-1,i]);let s=n.shape.slice(),a=s.pop(),l=s.pop(),c=[...s,a],u=Array.from({length:n.rank},(f,m)=>m===0?n.rank-2:m<=n.rank-2?m-1:m);n=$(Lt(n,u),[l,-1]);let d=[...o,...c];return $(Ep.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:r?k8(t.rank,r,Hi()):null,activation:e}),d)}}function yT(t,n,e){return ne(()=>(Array.isArray(n)?n=Qn(n,"int32"):n=ge(n,"int32"),Rl(t,n,e)))}function V0(t){return L(t,t)}function k8(t,n,e){let r=n.shape;if(n.rank!==1&&n.rank!==t)throw new te(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${t}`);if(t===5){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1,1,1]):$(n,[1,r[3],r[0],r[1],r[2]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,1,1,r[0]]):$(n,[1].concat(r))}else if(t===4){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1,1]):$(n,[1,r[2],r[0],r[1]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,1,r[0]]):$(n,[1].concat(r))}else if(t===3){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1]):$(n,[1,r[1],r[0]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,r[0]]):$(n,[1].concat(r))}else if(t<3)return n;throw new te(`Unsupported input rank by biasAdd: ${n.rank}`)}function Ui(t,n,e){return ne(()=>(e==null&&(e=Hi()),rr(e),fe(t,k8(t.rank,n,e))))}function dJ(t,n=1){if(n!==1)throw new _t(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return Nl(t)}function pJ(t){return ne(()=>$e(t,fe(jn(t),1)))}function xT(t,n,e,r){return ne(()=>UM(t,n,e,r))}function hJ(t){return ne(()=>{let n=fe(.5,L(.2,t));return ho(n,0,1)})}function lf(t,n,e=!1){return e?t():n()}var fJ=["fanIn","fanOut","fanAvg"],mJ=["normal","uniform","truncatedNormal"];function pEe(t){Du(fJ,"FanMode",t)}function hEe(t){Du(mJ,"Distribution",t)}var Gi=class extends ve.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},C8=(()=>{class t extends Gi{apply(e,r){return Bn(e,r)}}return t.className="Zeros",t})();ve.registerClass(C8);var ek=(()=>{class t extends Gi{apply(e,r){return Dr(e,r)}}return t.className="Ones",t})();ve.registerClass(ek);var S8=(()=>{class t extends Gi{constructor(e){if(super(),typeof e!="object")throw new te(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new te(`config must have value set but got ${e}`);this.value=e.value}apply(e,r){return ne(()=>L(ze(this.value),Dr(e,r)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();ve.registerClass(S8);var M8=(()=>{class t extends Gi{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,r){return ss(e,this.minval,this.maxval,r,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();ve.registerClass(M8);var T8=(()=>{class t extends Gi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t(`randomNormal does not support dType ${r}.`);return vv(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();ve.registerClass(T8);var D8=(()=>{class t extends Gi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t(`truncatedNormal does not support dType ${r}.`);return A0(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();ve.registerClass(D8);var E8=(()=>{class t extends Gi{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,r){return ne(()=>{if(e.length!==2||e[0]!==e[1])throw new te("Identity matrix initializer can only be used for 2D square matrices.");return L(this.gain,Zh(e[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();ve.registerClass(E8);function fEe(t,n="channelsLast"){let e,r;if(rr(n),t.length===2)e=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(n==="channelsFirst"){let o=La(t,2);e=t[1]*o,r=t[0]*o}else if(n==="channelsLast"){let o=La(t,0,t.length-2);e=t[t.length-2]*o,r=t[t.length-1]*o}}else{let o=La(t);e=Math.sqrt(o),r=Math.sqrt(o)}return[e,r]}var ls=(()=>{class t extends Gi{constructor(e){if(super(),e.scale<0)throw new te(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,pEe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,hEe(this.distribution),this.seed=e.seed}apply(e,r){let o=fEe(e),i=o[0],s=o[1],a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(i+s)/2),this.distribution==="normal"){let l=Math.sqrt(a);if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t(`${this.getClassName()} does not support dType ${r}.`);return A0(e,0,l,r,this.seed)}else{let l=Math.sqrt(3*a);return ss(e,-l,l,r,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();ve.registerClass(ls);var _T=(()=>{class t extends ls{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="GlorotUniform",t})();ve.registerClass(_T);var kT=(()=>{class t extends ls{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="GlorotNormal",t})();ve.registerClass(kT);var bT=(()=>{class t extends ls{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="HeNormal",t})();ve.registerClass(bT);var CT=(()=>{class t extends ls{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="HeUniform",t})();ve.registerClass(CT);var ST=(()=>{class t extends ls{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="LeCunNormal",t})();ve.registerClass(ST);var MT=(()=>{class t extends ls{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="LeCunUniform",t})();ve.registerClass(MT);var I8=(()=>{class t extends Gi{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,r){return ne(()=>{if(e.length<2)throw new _t("Shape must be at least 2D.");if(r!=="int32"&&r!=="float32"&&r!==void 0)throw new TypeError(`Unsupported data type ${r}.`);r=r;let o=x.sizeFromShape(e.slice(0,-1)),i=e[e.length-1],s=o*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);let a=[Math.max(i,o),Math.min(i,o)],l=vv(a,0,1,r,this.seed),c=tT.qr(l,!1),u=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(i,o)*Math.min(i,o)],[Math.min(i,o)+1]);return u=L(u,p.sign()),o<i&&(u=u.transpose()),L(ze(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();ve.registerClass(I8);var gJ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function vJ(t,n={}){return Tu(t,ve.SerializationMap.getMap().classNameMap,n,"initializer")}function Hn(t){return fv(t)}function An(t){if(typeof t=="string"){let n=t in gJ?gJ[t]:t;if(n==="GlorotNormal")return new kT;if(n==="GlorotUniform")return new _T;if(n==="HeNormal")return new bT;if(n==="HeUniform")return new CT;if(n==="LeCunNormal")return new ST;if(n==="LeCunUniform")return new MT;{let e={};return e.className=n,e.config={},vJ(e)}}else return t instanceof Gi?t:vJ(t)}function TT(t){return Array.isArray(t)&&Array.isArray(t[0])}function wv(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function ft(t){let n;if(Array.isArray(t)){if(t.length!==1)throw new te(`Expected Tensor length to be 1; got ${t.length}`);n=t[0]}else n=t;return n}function Ht(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new te(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function yv(t){let n=0;for(let e of t)e.shape.length===0?n+=1:n+=e.shape.reduce((r,o)=>r*o);return n}var yJ="Variable",xv=class{constructor(n,e="float32",r=yJ,o=!0,i=null){this.dtype=e??"float32",this.shape=n.shape,this.id=fT(),r=r??yJ,this.originalName=mT(r),this.name=gT(this.originalName),this.trainable_=o,this.constraint=i,this.val=G_(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(n){return this.assertNotDisposed(),gEe(this.val,n),this.val.id!==n.id&&(this.val.assign(n),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(n){this.trainable_=n,this.val.trainable=n}};function gEe(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}function tk(t){return t.map(n=>n.read())}function _v(t){t.forEach(n=>{n[0].write(n[1])})}var Rn=class{constructor(n){this.dtype=n.dtype,this.shape=n.shape,n.shape!=null?this.ndim=n.shape.length:this.ndim=n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}}},pi=class{constructor(n,e,r,o,i,s,a){this.dtype=n,this.shape=e,this.sourceLayer=r,this.inputs=o,this.callArgs=i,this.outputTensorIndex=a,this.id=fT(),s!=null&&(this.originalName=mT(s),this.name=gT(this.originalName)),this.rank=e.length}},vEe=0,Op=class{constructor(n,e){this.callArgs=e,this.id=vEe++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(let r of n.inboundLayers)r?.outboundNodes.push(this);n.outboundLayer.inboundNodes.push(this)}getConfig(){let n=[];for(let e of this.inboundLayers)e!=null?n.push(e.name):n.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},wEe=0,kt=class extends ve.Serializable{constructor(n={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=wEe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=n.name;if(!e){let r=this.getClassName();e=Pa(r)+"_"+af(r)}if(this.name=e,this.trainable_=n.trainable==null?!0:n.trainable,n.inputShape!=null||n.batchInputShape!=null){let r;if(n.batchInputShape!=null)r=n.batchInputShape;else if(n.inputShape!=null){let i=null;n.batchSize!=null&&(i=n.batchSize),r=[i].concat(n.inputShape)}this.batchInputShape=r;let o=n.dtype;o==null&&(o=n.inputDType),o==null&&(o="float32"),this.dtype=o}n.weights!=null?this.initialWeights=n.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(n,e){return n.name+"_ib-"+e.toString()}getNodeAtIndex(n,e){if(this.inboundNodes.length===0)throw new Vi(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=n)throw new te(`Asked to get ${e} at node ${n}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[n]}getInputAt(n){return Io(this.getNodeAtIndex(n,"input").inputTensors)}getOutputAt(n){return Io(this.getNodeAtIndex(n,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new aa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new aa(`Layer ${this.name} is not connected, no input to return.`);return Io(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new aa(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new aa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Io(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(n=>n())}get updates(){return this._updates}get built(){return this._built}set built(n){this._built=n}get trainable(){return this.trainable_}set trainable(n){this._trainableWeights.forEach(e=>e.trainable=n),this.trainable_=n}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(n=>n.trainable):[]}set trainableWeights(n){this._trainableWeights=n}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(n=>!n.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(n){this._nonTrainableWeights=n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(n){let e=Cn(n);if(this.inputSpec==null||this.inputSpec.length===0)return;let r=Cn(this.inputSpec);if(e.length!==r.length)throw new te(`Layer ${this.name} expects ${r.length} inputs, but it received ${e.length} input tensors. Input received: ${n}`);for(let o=0;o<e.length;o++){let i=e[o],s=r[o];if(s==null)continue;let a=i.rank;if(s.ndim!=null&&a!==s.ndim)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(s.maxNDim!=null&&a>s.maxNDim)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(s.minNDim!=null&&a<s.minNDim)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(s.dtype!=null&&i.dtype!==s.dtype)throw new te(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${i.dtype}.`);if(s.axes){let l=i.shape;for(let c in s.axes){let u=Number(c),d=s.axes[c],p=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(p)===-1)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){let c=s.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${i.shape}.`)}}}call(n,e){return n}invokeCallHook(n,e){this._callHook!=null&&this._callHook(n,e)}setCallHook(n){this._callHook=n}clearCallHook(){this._callHook=null}apply(n,e){e=e||{},this.assertNotDisposed();let r=Cn(n),o=_Ee(n),i=kEe(n);if(o===i)throw new te("Arguments to apply() must be all SymbolicTensors or all Tensors");return Bl(this.name,()=>{if(!this.built){this.assertInputCompatibility(n);let s=[];for(let a of Cn(n))s.push(a.shape);this.build(Io(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(n),i){let s=this.call(n,e);this.supportsMasking&&this.setMaskMetadata(n,s);let a=Cn(s),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(s=Io(l),this.activityRegularizer!=null)throw new _t("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{let s=yEe(n),a=this.computeOutputShape(s),l,c=xEe(n);if(this.warnOnIncompatibleInputShape(Array.isArray(n)?s[0]:s),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new pi(c,u,this,Cn(n),e,this.name,d)):l=new pi(c,a,this,Cn(n),e,this.name),this.addInboundNode(n,l,null,null,s,a,e),this._refCount++,this.activityRegularizer!=null)throw new _t("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(n){if(this.batchInputShape!=null)if(n.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(n)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&n[o]!=null&&n[o]!==r&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(n)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new aa(`The layer ${this.name} has never been called and thus has no defined output shape.`);let n=[];for(let e of this.inboundNodes){let r=JSON.stringify(e.outputShapes);n.indexOf(r)===-1&&n.push(r)}if(n.length===1){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&e.length===1?e[0]:e}else throw new aa(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Vi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return yv(this.weights)}build(n){this.built=!0}getWeights(n=!1){return tk(n?this.trainableWeights:this.weights)}setWeights(n){ne(()=>{let e=this.weights;if(e.length!==n.length)throw new te(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${n.length}, but the layer was expecting ${e.length} weights. Provided weights: ${n}...`);if(e.length===0)return;let r=[],o=tk(e);for(let i=0;i<o.length;++i){let s=o[i],a=e[i],l=n[i];if(!x.arraysEqual(s.shape,l.shape))throw new te(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}_v(r)})}addWeight(n,e,r,o,i,s,a,l){if(this._addedWeightNames.indexOf(n)!==-1)throw new te(`Duplicate weight name ${n} for layer ${this.name}`);this._addedWeightNames.push(n),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():An("zeros"));let c=o.apply(e,r),u=new xv(c,r,n,s,a);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),s==null&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(n){this.fastWeightInitDuringBuild=n}addLoss(n){n==null||Array.isArray(n)&&n.length===0||(n=Cn(n),this._losses!==void 0&&this._losses!==null&&this.losses.push(...n))}computeOutputShape(n){return n}computeMask(n,e){if(!this.supportsMasking){if(e!=null)if(Array.isArray(e))e.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return e}setMaskMetadata(n,e,r){if(!this.supportsMasking)return;let o=this.computeMask(n,r),i=Cn(e),s=Cn(o);if(i.length!==s.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=s[a]}addInboundNode(n,e,r,o,i,s,a=null){let l=Cn(n);e=Cn(e),r=Cn(r),o=Cn(o),i=wv(i),s=wv(s);let c=[],u=[],d=[];for(let p of l)c.push(p.sourceLayer),u.push(p.nodeIndex),d.push(p.tensorIndex);new Op({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:e,inputMasks:r,outputMasks:o,inputShapes:i,outputShapes:s},a);for(let p=0;p<e.length;p++)e[p].sourceLayer=this,e[p].nodeIndex=this.inboundNodes.length-1,e[p].tensorIndex=p}getConfig(){let n={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(n.batchInputShape=this.batchInputShape),this.dtype!=null&&(n.dtype=this.dtype),n}disposeWeights(){return this.weights.forEach(n=>n.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let n=0;return--this._refCount===0&&(n=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:n}}};function yEe(t){t=Cn(t);let n=[];for(let e of t)n.push(e.shape);return Io(n)}function xEe(t){return"float32"}function N8(t,n,e){if((n==null||e!=null&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),n.inboundNodes.length===0)return[t];{let r=n.inboundNodes[e];if(r.inboundLayers.length===0)return r.inputTensors;{let o=[];for(let i=0;i<r.inboundLayers.length;i++){let s=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],c=N8(s,a,l);for(let u of c)o.indexOf(u)===-1&&o.push(u)}return o}}}function _Ee(t){let n=!0;for(let e of Cn(t))if(!(e instanceof pi)){n=!1;break}return n}function kEe(t){let n=!0;for(let e of Cn(t))if(e instanceof pi){n=!1;break}return n}var cf=(()=>{class t extends kt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:af("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new te("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let r=e.batchInputShape;if(r==null){if(e.inputShape==null)throw new te("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new te("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let o=e.dtype||"float32";this.batchInputShape=r,this.dtype=o,this.inputSpec=[{shape:r}];let i=new pi(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new Op({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]})}apply(e,r){throw new te(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();ve.registerClass(cf);function DT(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new te("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let n=t.batchShape;t.shape!=null&&n==null&&(n=[null].concat(t.shape));let e=t.dtype;return e==null&&(e="float32"),new cf({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function bEe(t,n){if(t.dtype==null||t.dtype===n.dtype)return n;try{return ge(n,t.dtype)}catch{throw new te(`The dtype of the feed (${n.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var Eu=class t{constructor(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof t)for(let e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(n==null)return;for(let e of n)this.add(e.key,e.value)}}add(n,e,r){if(this.id2Value[n.id]==null)this.id2Value[n.id]=bEe(n,e),this.name2Id[n.name]=n.id,r!=null&&(this.id2Mask[n.id]=r);else throw new te(`Duplicate key: name=${n.name}, id=${n.id}`);return this}addFeed(n){this.add(n.key,n.value)}hasKey(n){return this.id2Value[n.id]!=null}names(){return Object.keys(this.name2Id)}getValue(n){if(n instanceof pi){if(this.id2Value[n.id]==null)throw new te(`Nonexistent key: ${n.name}`);return this.id2Value[n.id]}else{let e=this.name2Id[n];if(e==null)throw new te(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Value[e]}}getMask(n){if(n instanceof pi){if(this.id2Value[n.id]==null)throw new te(`Nonexistent key: ${n.name}`);return this.id2Mask[n.id]}else{let e=this.name2Id[n];if(e==null)throw new te(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Mask[e]}}disposeMasks(){this.id2Mask!=null&&gt(this.id2Mask)}},ET=new X_,IT=new X_;function _J(t){ET?.setMaxEntries(t),IT?.setMaxEntries(t)}function j0(t,n,e,r){let o=e==null?!1:e.training,i=Array.isArray(t),s=i?t:[t],a=s.map(f=>f.name),l=[],c=n.names();for(let f of a)c.indexOf(f)!==-1?l.push(n.getValue(f)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let u=a.join(",")+"|"+n.names().sort().join(","),d=ET.get(u),p;if(d==null){let f=CEe(s,n);d=f.sorted,p=f.recipientCounts,ET.put(u,d),IT.put(u,p)}p={},o||Object.assign(p,IT.get(u));let h=new Eu(n);for(let f=0;f<d.length;++f){if(r!=null){let P=J1().numTensors;P>r.maxNumTensors&&(r.maxNumTensors=P),P<r.minNumTensors&&(r.minNumTensors=P)}let m=d[f],g=m.sourceLayer;if(g instanceof cf)continue;let v=[],w=[],y=[],_=!1;for(let P of m.inputs){let N=h.getValue(P),B=h.getMask(P);v.push(N),w.push(B),B!=null&&(_=!0),o||(p[P.name]--,p[P.name]===0&&!n.hasKey(P)&&a.indexOf(P.name)===-1&&!N.isDisposed&&P.sourceLayer.stateful!==!0&&y.push(N))}_&&(e=e||{},e.mask=w[0]);let k=Cn(g.apply(v,e)),M=null;g.supportsMasking&&(M=g.computeMask(v,w));let E=MEe(m),A=Array.isArray(E)?E:[E];for(let P=0;P<A.length;++P){h.hasKey(A[P])||h.add(A[P],k[P],Array.isArray(M)?M[0]:M);let N=a.indexOf(A[P].name);N!==-1&&(l[N]=k[P])}o||gt(y)}return h.disposeMasks(),i?l:l[0]}function CEe(t,n){x.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let e=[],r={};if(t.length===1){let o=xJ(t[0],n);e=o.sorted,r=o.recipientMap}else{let o=new Set;for(let i of t){let{sorted:s,recipientMap:a}=xJ(i,n);for(let l of s)o.has(l.name)||(e.push(l),o.add(l.name));for(let l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:e,recipientCounts:SEe(r)}}function SEe(t){let n={};for(let e in t)n[e]=t[e].size;return n}function xJ(t,n){let e=new Set,r=[],o={};for(let a of n.names())e.add(a);let i=[],s=[];for(i.push(t);i.length>0;){let a=i[i.length-1];if(e.has(a.name)){i.pop();continue}let l=s[s.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),e.add(a.name),l&&s.pop();else{s.push(i.length-1);for(let c of a.inputs)o[c.name]==null&&(o[c.name]=new Set),o[c.name].add(a.name),!e.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:o}}function MEe(t){let n;if(t.sourceLayer.inboundNodes.length===1)n=t.sourceLayer.output;else{let e=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(let o of t.sourceLayer.inboundNodes[r].outputTensors)if(o.id===t.id){e=r;break}n=t.sourceLayer.getOutputAt(e)}return n}var TEe=Q();TEe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,_J);var B8={};Qt(B8,{maxNorm:()=>DEe,minMaxNorm:()=>NEe,nonNeg:()=>IEe,unitNorm:()=>EEe});function A8(t,n){return ne(()=>En(He(L(t,t),n,!0)))}var z0=class extends ve.Serializable{getConfig(){return{}}},R8=(()=>{class t extends z0{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ne(()=>{let r=A8(e,this.axis),o=ho(r,0,this.maxValue);return L(e,$e(o,fe(Yr(),r)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();ve.registerClass(R8);var O8=(()=>{class t extends z0{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ne(()=>$e(e,fe(Yr(),A8(e,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();ve.registerClass(O8);var F8=(()=>{class t extends z0{apply(e){return Eo(e)}}return t.className="NonNeg",t})();ve.registerClass(F8);var P8=(()=>{class t extends z0{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ne(()=>{let r=A8(e,this.axis),o=fe(L(this.rate,ho(r,this.minValue,this.maxValue)),L(1-this.rate,r));return L(e,$e(o,fe(Yr(),r)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();ve.registerClass(P8);var kJ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function fr(t){return fv(t)}function bJ(t,n={}){return Tu(t,ve.SerializationMap.getMap().classNameMap,n,"constraint")}function mr(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in kJ?kJ[t]:t,config:{}};return bJ(e)}else return t instanceof z0?t:bJ(t)}function DEe(t){return new R8(t)}function EEe(t){return new O8(t)}function IEe(){return new F8}function NEe(t){return new P8(t)}var L8={};Qt(L8,{constant:()=>OEe,glorotNormal:()=>jEe,glorotUniform:()=>VEe,heNormal:()=>zEe,heUniform:()=>HEe,identity:()=>LEe,leCunNormal:()=>UEe,leCunUniform:()=>GEe,ones:()=>REe,orthogonal:()=>WEe,randomNormal:()=>PEe,randomUniform:()=>FEe,truncatedNormal:()=>BEe,varianceScaling:()=>$Ee,zeros:()=>AEe});function AEe(){return new C8}function REe(){return new ek}function OEe(t){return new S8(t)}function FEe(t){return new M8(t)}function PEe(t){return new T8(t)}function BEe(t){return new D8(t)}function LEe(t){return new E8(t)}function $Ee(t){return new ls(t)}function VEe(t){return new _T(t)}function jEe(t){return new kT(t)}function zEe(t){return new bT(t)}function HEe(t){return new CT(t)}function UEe(t){return new ST(t)}function GEe(t){return new MT(t)}function WEe(t){return new I8(t)}var oB={};Qt(oB,{Layer:()=>kt,RNN:()=>zl,RNNCell:()=>Pp,activation:()=>M3e,add:()=>F3e,alphaDropout:()=>wNe,average:()=>P3e,averagePooling1d:()=>tB,averagePooling2d:()=>nB,averagePooling3d:()=>rB,avgPool1d:()=>G3e,avgPool2d:()=>q3e,avgPool3d:()=>Z3e,avgPooling1d:()=>W3e,avgPooling2d:()=>K3e,avgPooling3d:()=>X3e,batchNormalization:()=>z3e,bidirectional:()=>uNe,categoryEncoding:()=>bNe,centerCrop:()=>_Ne,concatenate:()=>B3e,conv1d:()=>v3e,conv2d:()=>w3e,conv2dTranspose:()=>y3e,conv3d:()=>x3e,conv3dTranspose:()=>_3e,convLstm2d:()=>sNe,convLstm2dCell:()=>aNe,cropping2D:()=>b3e,dense:()=>T3e,depthwiseConv2d:()=>S3e,dot:()=>j3e,dropout:()=>D3e,elu:()=>d3e,embedding:()=>O3e,flatten:()=>I3e,gaussianDropout:()=>vNe,gaussianNoise:()=>gNe,globalAveragePooling1d:()=>Y3e,globalAveragePooling2d:()=>Q3e,globalMaxPool1d:()=>pNe,globalMaxPool2d:()=>hNe,globalMaxPooling1d:()=>ree,globalMaxPooling2d:()=>oee,gru:()=>eNe,gruCell:()=>tNe,input:()=>WT,inputLayer:()=>u3e,layerNormalization:()=>H3e,leakyReLU:()=>h3e,lstm:()=>nNe,lstmCell:()=>rNe,masking:()=>yNe,maxPool1d:()=>fNe,maxPool2d:()=>mNe,maxPooling1d:()=>iee,maxPooling2d:()=>see,maxPooling3d:()=>J3e,maximum:()=>L3e,minimum:()=>$3e,multiply:()=>V3e,permute:()=>R3e,prelu:()=>f3e,randomWidth:()=>CNe,reLU:()=>p3e,repeatVector:()=>N3e,rescaling:()=>xNe,reshape:()=>A3e,resizing:()=>kNe,rnn:()=>lNe,separableConv2d:()=>k3e,simpleRNN:()=>oNe,simpleRNNCell:()=>iNe,softmax:()=>m3e,spatialDropout1d:()=>E3e,stackedRNNCells:()=>cNe,thresholdedReLU:()=>g3e,timeDistributed:()=>dNe,upSampling2d:()=>C3e,zeroPadding2d:()=>U3e});function Iu(t){return z(this,null,function*(){if(t==null)return;let n=[],e=[],r=[];for(let o in t){let i=t[o];if(typeof i!="number"){let s=i;n.push(s.data()),e.push(o),r.push(s)}}if(n.length>0){let o=yield Promise.all(n);for(let i=0;i<o.length;++i)t[e[i]]=o[i][0];gt(r)}})}function NT(t){if(t!=null)for(let n in t){let e=t[n];typeof e!="number"&&e.dispose()}}var qEe=125,Fp=class{constructor(){this.validationData=null}setParams(n){this.params=n}onEpochBegin(n,e){return z(this,null,function*(){})}onEpochEnd(n,e){return z(this,null,function*(){})}onBatchBegin(n,e){return z(this,null,function*(){})}onBatchEnd(n,e){return z(this,null,function*(){})}onTrainBegin(n){return z(this,null,function*(){})}onTrainEnd(n){return z(this,null,function*(){})}setModel(n){}},nk=class{constructor(n,e=10){n==null&&(n=[]),this.callbacks=n,this.queueLength=e}append(n){this.callbacks.push(n)}setParams(n){for(let e of this.callbacks)e.setParams(n)}setModel(n){for(let e of this.callbacks)e.setModel(n)}onEpochBegin(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onEpochBegin(n,e)})}onEpochEnd(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onEpochEnd(n,e)})}onBatchBegin(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onBatchBegin(n,e)})}onBatchEnd(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onBatchEnd(n,e)})}onTrainBegin(n){return z(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainBegin(n)})}onTrainEnd(n){return z(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainEnd(n)})}},$8=class extends Fp{constructor(){super()}onEpochBegin(n){return z(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(n,e){return z(this,null,function*(){e==null&&(e={});let r=e.size==null?0:e.size;this.seen+=r;for(let o in e){let i=e[o];if(typeof i=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+i*r;else{let s;o in this.totals?s=this.totals[o]:this.totals[o]=0;let a=ne(()=>fe(this.totals[o],L(i,r)));this.totals[o]=a,s?.dispose()}}})}onEpochEnd(n,e){return z(this,null,function*(){if(e!=null)for(let r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?e[r]=this.totals[r]/this.seen:ne(()=>{let o=L($e(1,this.seen),this.totals[r]);e[r]=o,this.totals[r].dispose(),Wn(e[r])}))})}},rk=class extends Fp{onTrainBegin(n){return z(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(n,e){return z(this,null,function*(){e==null&&(e={}),this.epoch.push(n);for(let r in e)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(e[r])})}syncData(){return z(this,null,function*(){let n=[],e=[],r=[];for(let i in this.history){let s=this.history[i];for(let a=0;a<s.length;++a)if(typeof s[a]!="number"){let l=s[a];n.push(l.data()),e.push(i),r.push(a)}}let o=yield Promise.all(n);for(let i=0;i<o.length;++i)this.history[e[i]][r[i]].dispose(),this.history[e[i]][r[i]]=o[i][0]})}},ok=class extends Fp{constructor(n,e){if(super(),this.currentEpoch=0,this.nowFunc=n.nowFunc,this.nextFrameFunc=n.nextFrameFunc||hv,this.yieldEvery=e||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=qEe),this.yieldEvery==="never"&&n.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");x.isNumber(this.yieldEvery)&&(this.maybeWait=QQ(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=n.onTrainBegin,this.trainEnd=n.onTrainEnd,this.epochBegin=n.onEpochBegin,this.epochEnd=n.onEpochEnd,this.batchBegin=n.onBatchBegin,this.batchEnd=n.onBatchEnd,this.yield=n.onYield}maybeWait(n,e,r){return z(this,null,function*(){let o=[];this.yield!=null&&(yield Iu(r),o.push(this.yield(n,e,r))),o.push(this.nextFrameFunc()),yield Promise.all(o)})}onEpochBegin(n,e){return z(this,null,function*(){this.currentEpoch=n,this.epochBegin!=null&&(yield Iu(e),yield this.epochBegin(n,e))})}onEpochEnd(n,e){return z(this,null,function*(){let r=[];this.epochEnd!=null&&(yield Iu(e),r.push(this.epochEnd(n,e))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),yield Promise.all(r)})}onBatchBegin(n,e){return z(this,null,function*(){this.batchBegin!=null&&(yield Iu(e),yield this.batchBegin(n,e))})}onBatchEnd(n,e){return z(this,null,function*(){let r=[];this.batchEnd!=null&&(yield Iu(e),r.push(this.batchEnd(n,e))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):x.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,n,e)),yield Promise.all(r)})}onTrainBegin(n){return z(this,null,function*(){this.trainBegin!=null&&(yield Iu(n),yield this.trainBegin(n))})}onTrainEnd(n){return z(this,null,function*(){this.trainEnd!=null&&(yield Iu(n),yield this.trainEnd(n))})}};function AT(t,n){return t==null&&(t={}),t instanceof Fp?[t]:Array.isArray(t)&&t[0]instanceof Fp?t:Cn(t).map(r=>new ok(r,n))}var V8=(()=>{class t{constructor(){}static registerCallbackConstructor(e,r){x.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),t.checkForDuplicate(r),t.constructors[e]==null&&(t.constructors[e]=[]),t.constructors[e].push(r)}static checkForDuplicate(e){for(let r in t.constructors)t.constructors[+r].forEach(i=>{if(i===e)throw new te("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(e){let r=[];for(let o in t.constructors){let i=+o;e>=i&&r.push(...t.constructors[i])}return r.map(o=>new o)}}return t.constructors={},t})();function RT(t,n,e,r,o,i,s,a,l){let c=new rk,u=[new $8,...V8.createCallbacks(n)];t!=null&&u.push(...t),u.push(c);let d=new nk(u);return d.setParams({epochs:e,initialEpoch:r,samples:o,steps:i,batchSize:s,verbose:n,doValidation:a,metrics:l}),{callbackList:d,history:c}}function Wi(t,n={},e=!1){return Tu(t,ve.SerializationMap.getMap().classNameMap,n,"layer",e)}function ik(t,n){return ne(()=>{t.dtype!=="float32"&&(t=ge(t,"float32"));let e=He(V0(t),n,!0),r=ia(e.shape,Yr()),o=En($i(e,r));return $e(t,o)})}function Nu(t,n){return ne(()=>Pn(V0(Pe(n,t)),-1))}function kv(t,n){return ne(()=>Pn(jn(Pe(n,t)),-1))}function uf(t,n){return ne(()=>{let e=Pe(t,n),r=ho(jn(t),Yr(),Number.MAX_VALUE),o=jn($e(e,r));return L(100,Pn(o,-1))})}function KEe(t,n){return ne(()=>{let e=ho(n,Yr(),Number.MAX_VALUE),r=mo(fe(1,e)),o=ho(t,Yr(),Number.MAX_VALUE),i=mo(fe(1,o));return Pn(V0(Pe(r,i)),-1)})}function ZEe(t,n){return ne(()=>{let e=$i(0,Pe(1,L(t,n)));return Pn(V0(e),-1)})}function XEe(t,n){return ne(()=>{let e=$i(0,Pe(1,L(t,n)));return Pn(e,-1)})}function YEe(t,n){return ne(()=>{let e=He(L(t,n),-1),r=fo(L(Pe(1,t),n),-1);return $i(0,fe(1,Pe(r,e)))})}function QEe(t,n){return ne(()=>{let e=Math.log(2),r=Pe(n,t),o=Pe(fe(r,Ia(L(-2,r))),e);return Pn(o,-1)})}function H0(t,n,e=!1){return ne(()=>{if(e)n=Mp(n);else{let r=He(n,n.shape.length-1,!0);n=$e(n,r)}return n=ho(n,Yr(),1-Yr()),Kt(He(L(ge(t,"float32"),mo(n)),n.shape.length-1))})}function bv(t,n,e=!1){return ne(()=>{let r=ge(Al(cJ(t)),"int32");n=ho(n,Yr(),1-Yr());let o=n.shape,i=$(Ol(r,o[o.length-1]),o);return H0(i,n,e)})}function JEe(t,n){if(!x.arraysEqual(t.shape,n.shape))throw new te(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(n.shape)}`);return ne(()=>{let e=Eo(n),r=Kt(jn(n));return fe(Pe(e,L(n,t)),xp(pr(r)))})}function Cv(t,n){return ne(()=>{let e;return e=ho(n,Yr(),1-Yr()),e=mo($e(e,Pe(1,e))),Pn(JEe(t,e),-1)})}function eIe(t,n){return ne(()=>{let e=ho(t,Yr(),1),r=ho(n,Yr(),1);return He(L(t,mo($e(e,r))),-1)})}function tIe(t,n){return ne(()=>{let e=mo(fe(Yr(),n));return Pn(Pe(n,L(t,e)),-1)})}function ak(t,n){return ne(()=>{let e=ik(t,-1),r=ik(n,-1),o=L(e,r);return Kt(He(o,-1))})}var sk={meanSquaredError:Nu,meanAbsoluteError:kv,meanAbsolutePercentageError:uf,meanSquaredLogarithmicError:KEe,squaredHinge:ZEe,hinge:XEe,categoricalHinge:YEe,logcosh:QEe,categoricalCrossentropy:H0,sparseCategoricalCrossentropy:bv,binaryCrossentropy:Cv,kullbackLeiblerDivergence:eIe,poisson:tIe,cosineProximity:ak};function OT(t){if(typeof t=="string"){if(t in sk)return sk[t];let n=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new te(n)}else return t}function lk(t,n){return ne(()=>{let e=L(.5,io(n)),r=Si(Xn(n,e),t.dtype);return Pn(Mo(t,r),-1)})}function ck(t,n){return ne(()=>Si(Mo(Tl(t,-1),Tl(n,-1)),"float32"))}function SJ(t,n){return ne(()=>ge(He(Do(Mo(t,1),Mo(n,1))),"float32"))}function nIe(t,n){return ne(()=>ge(He(Do(Mo(t,1),Mo(n,0))),"float32"))}function rIe(t,n){return ne(()=>ge(He(Do(Mo(t,0),Mo(n,1))),"float32"))}function j8(t,n){return ne(()=>{let e=SJ(t,n),r=rIe(t,n),o=fe(e,r);return ge(Nn(Xn(o,0),$e(e,o),0),"float32")})}function MJ(t,n){return ne(()=>{let e=SJ(t,n),r=nIe(t,n),o=fe(e,r);return ge(Nn(Xn(o,0),$e(e,o),0),"float32")})}function PT(t,n){return Cv(t,n)}function BT(t,n){return t.rank===n.rank&&(t=as(t,[t.rank-1])),n=Tl(n,-1),n.dtype!==t.dtype&&(n=ge(n,t.dtype)),ge(Mo(t,n),"float32")}function TJ(t,n){return ne(()=>{let e=t.sub(n).square().sum(),r=t.sub(t.mean()).square().sum();return ze(1).sub(e.div(r))})}var oIe=Nu,iIe=Nu,sIe=kv,aIe=kv,lIe=uf,cIe=uf,uk=H0,uIe=ak,z8=bv,FT={binaryAccuracy:lk,categoricalAccuracy:ck,precision:j8,categoricalCrossentropy:uk,sparseCategoricalCrossentropy:z8,mse:oIe,MSE:iIe,mae:sIe,MAE:aIe,mape:lIe,MAPE:cIe,cosine:uIe};function DJ(t){if(typeof t=="string"&&t in FT)return FT[t];if(typeof t!="string"&&t!=null)return t;throw new te(`Unknown metric ${t}`)}function dk(t){if(la(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let n;for(let e of Object.keys(sk))if(sk[e]===t){n=e;break}if(n!==void 0)return n;for(let e of Object.keys(FT))if(FT[e]===t){n=e;break}return n!==void 0?n:t.name}}function IJ(t){let n={Adagrad:()=>sf.adagrad(.01),Adadelta:()=>sf.adadelta(1,.95,Yr()),Adam:()=>sf.adam(.001,.9,.999,Yr()),Adamax:()=>sf.adamax(.002,.9,.999,Yr(),0),RMSProp:()=>sf.rmsprop(.001,.9,0,Yr()),SGD:()=>sf.sgd(.01)};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new te(`Unknown Optimizer ${t}`)}function U8(t,n,e=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!H8(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){let r=JSON.stringify(t);r.length>1048576&&console.warn(`User-defined metadata of model "${n}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function H8(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let n=Object.keys(t);for(let e of n)if(typeof e!="string"||!H8(t[e]))return!1;return!0}else if(Array.isArray(t)){for(let n of t)if(!H8(n))return!1;return!0}else return!1;else{let n=typeof t;return n==="string"||n==="number"||n==="boolean"}}function NJ(t,n,e,r=console.log){let o=hIe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];o?(n=n||90,e=e||[.32,.61,.89,1]):(n=n||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(u=>Math.floor(n*u)));let s;if(!o){i.push("Receives inputs"),s=[];for(let u in t.nodesByDepth)s.push(...t.nodesByDepth[u])}r("_".repeat(n)),LT(i,e,r),r("=".repeat(n));let a=t.layers;for(let u=0;u<a.length;++u)o?fIe(a[u],e,r):mIe(a[u],e,s,r),r((u===a.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();let l=pIe(t),c=yv(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(n))}function pIe(t){let n;return t.collectedTrainableWeights!=null?n=yv(t.collectedTrainableWeights):n=yv(t.trainableWeights),n}function hIe(t){let n=!0,e=[],r=[];for(let o in t.nodesByDepth)e.push(t.nodesByDepth[o]);for(let o of e){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){n=!1;break}r.push(...o)}if(n)for(let o of t.layers){let i=!1;for(let s of o.inboundNodes)if(r.indexOf(s)!==-1)if(i){n=!1;break}else i=!0;if(!n)break}return n}function LT(t,n,e=console.log){let r="";for(let o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=t[o],r=r.slice(0,n[o]),r+=" ".repeat(n[o]-r.length);e(r)}function fIe(t,n,e){let r,o;try{o=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}let i=t.name,s=t.getClassName(),a=[`${i} (${s})`,o,r,t.countParams().toString()];LT(a,n,e)}function mIe(t,n,e,r){let o,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}let s=[];for(let d of t.inboundNodes)if(!(e!=null&&e.length>0&&e.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,f=d.nodeIndices[p],m=d.tensorIndices[p];s.push(`${h}[${f}][${m}]`)}let a=t.name,l=t.getClassName(),c=s.length===0?"":s[0],u=[`${a} (${l})`,i,o,t.countParams().toString(),c];LT(u,n,r);for(let d=1;d<s.length;++d)LT(["","","","",s[d]],n,r)}function AJ(t,n,e){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&n===0&&typeof e=="string"}function U0(t,n){if(t===null)return null;if(typeof t=="string")return Np(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],r=t.length;for(let o=0;o<r;++o){let i=t[o];AJ(n,o,i)?e.push(i):e.push(U0(i,n))}return e}else{let e={};for(let r of Object.keys(t)){let o=t[r];if(r==="name"&&typeof o=="string")e[r]=o;else{let i=Np(r);e[i]=U0(o,i)}}return e}}function $T(t,n){if(t==null)return null;if(typeof t=="string")return Pa(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],r=t.length;for(let o=0;o<r;++o){let i=t[o];AJ(n,o,i)?e.push(i):e.push($T(i,n))}return e}else{let e={};for(let r of Object.keys(t)){let o=t[r],i=Pa(r);(r==="name"||r==="className")&&typeof o=="string"?e[i]=o:e[i]=$T(o,r)}return e}}var df="4.22.0";var gIe=t=>{let n=Object.keys(t);if(n.length===0)return!1;let e=n[0].split("/");return!isNaN(parseInt(e[e.length-1],10))},VT=class t extends kt{constructor(n){if(super({}),this.containerNodes=new Set,this.name=n.name,this.name==null){let w=this.getClassName().toLowerCase();this.name=af(w)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(n.inputs)?this.inputs=n.inputs.slice():this.inputs=[n.inputs],Array.isArray(n.outputs)?this.outputs=n.outputs.slice():this.outputs=[n.outputs],Ba(this.inputs).length!==this.inputs.length)throw new te(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);Ba(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let w of this.outputs){let y=w.sourceLayer,_=w.nodeIndex,k=w.tensorIndex;this.outputLayers.push(y),this.outputLayersNodeIndices.push(_),this.outputLayersTensorIndices.push(k)}for(let w of this.inputs){let y=w.sourceLayer,_=w.nodeIndex,k=w.tensorIndex;la(_===0,"input layer has >1 nodes"),la(k===0,"input layer has >1 tensors"),this.inputLayers.push(y),this.inputLayersNodeIndices.push(_),this.inputLayersTensorIndices.push(k)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){let y=this.inputLayers[w];if(!(y instanceof cf))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${n.inputs}. Input ${w} (0-based) originates from layer type ${y.getClassName()}.`);this.inputNames.push(y.name),this.feedInputShapes.push(y.batchInputShape),this.feedInputNames.push(y.name)}for(let w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);let e={},r={},o={},i={},s={},a=[],l=(w,y,_,k,M,E)=>{(k==null||M==null||E==null)&&(k=w.sourceLayer,M=w.nodeIndex,E=w.tensorIndex);let A=k.inboundNodes[M];if(_.indexOf(A)!==-1)throw new Vi(`The tensor ${w.name} at layer "${k.name}" is part of a cycle.`);if(y.indexOf(A)!==-1)return;this.containerNodes.add(t.nodeKey(k,M)),k.id in s||(s[k.id]=Object.keys(s).length),_.indexOf(A)===-1&&_.push(A);let P=A.inboundLayers.length;for(let N=0;N<P;N++){let B=A.inputTensors[N],S=A.inboundLayers[N],W=A.nodeIndices[N],ie=A.tensorIndices[N];l(B,y,_,S,W,ie)}for(y.push(A);_.indexOf(A)>=0;)_.splice(_.indexOf(A),1);a.push(A)},c=[],u=[];for(let w of this.outputs)l(w,c,u);let d=a.slice().reverse();for(let w of d){r[w.id]=w,w.id in e||(e[w.id]=0);let y=e[w.id],_=o[w.outboundLayer.id]==null?0:o[w.outboundLayer.id];y=Math.max(y,_),o[w.outboundLayer.id]=y,i[w.outboundLayer.id]=w.outboundLayer,e[w.id]=y;for(let k=0;k<w.inboundLayers.length;k++){let M=w.inboundLayers[k],E=w.nodeIndices[k],A=M.inboundNodes[E],P=e[A.id]==null?0:e[A.id];e[A.id]=Math.max(y+1,P),r[A.id]=A}}let p={};for(let w in e){let y=e[w];y in p||(p[y]=[]),p[y].push(r[w])}let h={};for(let w in o){let y=o[w];y in h||(h[y]=[]),h[y].push(i[w])}let f=Object.keys(h).map(w=>parseInt(w,10)).sort(Y_);this.layers=[];for(let w of f){let y=h[w];y.sort((_,k)=>{let M=s[_.id],E=s[k.id];return M<E?-1:M>E?1:0});for(let _ of y)_ instanceof t&&this.internalContainerRefs.push(_),this.layers.push(_)}this.layersByDepth=h,f=Object.keys(p).map(w=>parseInt(w,10)).sort(Y_);let m=this.inputs.slice(),g=[];for(let w of f)for(let y of p[w]){let _=y.outboundLayer;if(_!=null){for(let k of y.inputTensors)if(m.indexOf(k)===-1)throw new Vi(`Graph disconnected: cannot obtain value for tensor ${k} at layer "${_.name}". The following previous layers were accessed without issue: ${g}`);for(let k of y.outputTensors)m.push(k);g.push(_.name)}}this.nodesByDepth=p;let v=this.layers.map(w=>w.name);for(let w of v){let y=v.filter(_=>_===w).length;if(y!==1)throw new Vi(`The name "${w}" is used ${y} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new Op({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let n={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let e of this.layers)n.numDisposedVariables+=e.dispose().numDisposedVariables;for(let e of this.internalContainerRefs)n.numDisposedVariables+=e.dispose().numDisposedVariables}return n.refCountAfterDispose=this._refCount,n}get trainable(){return this.trainable_}set trainable(n){this.layers.forEach(e=>{e._trainableWeights.forEach(r=>r.trainable=n)}),this.trainable_=n}get trainableWeights(){if(this._trainableWeights.length>0)throw new te("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let n=[];for(let e of this.layers)n=n.concat(e.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let e of this.layers)n.push(...e.nonTrainableWeights);if(!this.trainable){let e=[];for(let r of this.layers)e.push(...r.trainableWeights);return e.concat(n)}return n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(n,e=!0){let r={},o=0,i=gIe(n);i&&this.parseWeights(n);for(let a of this.layers)for(let[l,c]of a.weights.entries()){let u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new te(`Duplicate weight name: ${u}`);r[u]=c,o++}let s=[];for(let a in n){let l=a;if(r[a]==null){let c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],n[a]]);else if(e)throw new te(`Provided weight data has no target variable: ${a}`);delete r[l]}if(e){let a=[];for(let l in r)a.push(l);if(a.length>0)throw new te(`${a.length} of ${o} weights are not set: ${a}`)}_v(s)}parseWeights(n){for(let e in Object.keys(n)){let r=e.split("/"),o=["vars","layer_checkpoint_dependencies"],i=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!o.includes(s)).join("/");i!==e&&(n[i]=n[e],delete n[e])}}updatedConfig(){let n=this.getConfig(),e={};return e.className=this.getClassName(),e.config=n,e.kerasVersion=`tfjs-layers ${df}`,e.backend="TensorFlow.js",e}toJSON(n,e=!0){let r=$T(this.updatedConfig());return e?JSON.stringify(r):r}call(n,e){return ne(()=>{n=Cn(n);let r=new Eu;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],n[o]);return j0(this.outputs,r,e)})}computeMask(n,e){return ne(()=>{n=Cn(n);let r;return e==null?r=Fa(null,n.length):r=Cn(e),this.runInternalGraph(n,r)[1]})}computeOutputShape(n){let e=wv(n);if(e.length!==this.inputLayers.length)throw new te(`Invalid inputShape argument ${n}: model has ${this.inputLayers.length} tensor inputs.`);let r={};for(let a=0;a<e.length;a++){let l=this.inputLayers[a],c=e[a],u=l.name+"_0_0";r[u]=c}let o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Y_);if(o.length>1)for(let a of o){let l=this.nodesByDepth[a];for(let c of l){let u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;let d=[];for(let m=0;m<c.inboundLayers.length;m++){let g=c.inboundLayers[m],v=c.nodeIndices[m],w=c.tensorIndices[m],y=`${g.name}_${v}_${w}`,_=r[y];d.push(_)}let p=u.computeOutputShape(Io(d)),h=wv(p),f=u.inboundNodes.indexOf(c);for(let m=0;m<h.length;m++){let g=`${u.name}_${f}_${m}`;r[g]=h[m]}}}let i=[],s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;s.push(d)}for(let a=0;a<s.length;a++){let l=s[a];la(l in r),i.push(r[l])}return Io(i)}runInternalGraph(n,e){e==null&&(e=Fa(null,n.length));let r={};for(let l=0;l<this.inputs.length;++l){let c=this.inputs[l],u=n[l],d=e[l];r[c.id]=[u,d]}let o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Y_);for(let l of o){let c=this.nodesByDepth[l];for(let u of c){let d=u.outboundLayer,p=u.inputTensors,h=u.outputTensors,f=new Array;for(let m of p)m.id in r&&f.push(r[m.id]);if(f.length===p.length){let m={},g,v,w,y;if(u.callArgs!=null&&(m=u.callArgs),f.length===1){let[_,k]=f[0];m.mask==null&&(m.mask=k),w=Cn(d.call(_,m)),y=Cn(d.computeMask(_,k)),g=[_],v=[k]}else g=f.map(_=>_[0]),v=f.map(_=>_[1]),m.mask==null&&(m.mask=v),w=Cn(d.call(g,m)),y=Cn(d.computeMask(g,v));if(d.activityRegularizer)throw new _t("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let _=0;_<h.length;++_){let k=h[_],M=w[_],E=y[_];r[k.id]=[M,E]}}}}let i=[],s=[],a=[];for(let l of this.outputs){la(l.id in r,`Could not compute output ${l.name} : ${l.id}`);let[c,u]=r[l.id];a.push(c.shape),i.push(c),s.push(u)}return[i,s,a]}buildNodeConversionMap(n){let e={},r;for(let o of this.layers){r=o instanceof t?1:0;for(let i=0;i<o.inboundNodes.length;i++){let s=t.nodeKey(o,i);this.containerNodes.has(s)&&(e[s]=r,r+=1)}}return e}getLayer(n,e){if(e!=null)return this.findLayer(e);if(n==null)throw new te("Provide either a layer name or layer index");if(typeof n=="number")return this.findLayer(n);for(let r of this.layers)if(r.name===n)return r;throw new te(`No such layer: ${n}`)}findLayer(n){if(this.layers.length<=n)throw new te(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}calculateLosses(){return ne(()=>{let n=[];for(let e of this.layers)for(let r=0;r<e.inboundNodes.length;++r){let o=t.nodeKey(e,r);this.containerNodes.has(o)&&n.push(...e.calculateLosses())}return n})}getConfig(){let n={name:this.name},e=this.buildNodeConversionMap(this.layers),r=[];for(let s of this.layers){let a=s.getClassName(),l=s.getConfig(),c=[];for(let d=0;d<s.inboundNodes.length;d++){let p=s.inboundNodes[d],h=t.nodeKey(s,d),f={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),f=p.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),f={}}if(p.inboundLayers.length>0){let m=[];for(let g=0;g<p.inboundLayers.length;g++){let v=p.inboundLayers[g],w=p.nodeIndices[g],y=p.tensorIndices[g],_=t.nodeKey(v,w),k=e[_];k==null&&(k=0),m.push([v.name,k,y,f])}c.push(m)}}}let u={};u.name=s.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}n.layers=r;let o=[];for(let s=0;s<this.inputLayers.length;s++){let a=this.inputLayers[s],l=this.inputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.inputLayersTensorIndices[s];o.push([a.name,u,d])}n.inputLayers=o;let i=[];for(let s=0;s<this.outputLayers.length;s++){let a=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.outputLayersTensorIndices[s];i.push([a.name,u,d])}return n.outputLayers=i,n}static fromConfig(n,e,r={},o=!1){let i={},s={};function a(g,v){g.name in s?s[g.name].push(v):s[g.name]=[v]}function l(g,v){let w=[],y;for(let _ of v){let k=_[0],M=_[1],E=_[2];if(y=_[3]==null?{}:_[3],!(k in i)){a(g,v);return}let A=i[k];if(A.inboundNodes.length<=M){a(g,v);return}let P=A.inboundNodes[M];w.push(P.outputTensors[E])}w.length>0&&g.apply(Io(w),y)}function c(g){let v=g.name,w=Wi(g,e.customObjects!=null?e.customObjects:{});w.setFastWeightInitDuringBuild(o),i[v]=w,g.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new te(`Corrupted configuration, expected array for nodeData: ${_}`);a(w,_)})}let u=e.name,d=e.layers;for(let g of d)c(g);for(;!XQ(s);)for(let g of d){let v=i[g.name];if(v.name in s){let w=s[v.name];delete s[v.name];for(let y of w)l(v,y)}}let p=[],h=[],f=e.inputLayers;for(let g of f){let v=g[0],w=g[1],y=g[2];la(v in i);let k=i[v].inboundNodes[w].outputTensors;p.push(k[y])}let m=e.outputLayers;for(let g of m){let v=g[0],w=g[1],y=g[2];la(v in i);let k=i[v].inboundNodes[w].outputTensors;h.push(k[y])}return new n({inputs:p,outputs:h,name:u})}get stateful(){if(this._stateful)throw new te("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let n of this.layers)if(n.stateful)return!0;return!1}resetStates(){ne(()=>{this.layers.forEach(n=>{n.stateful&&n.resetStates()})})}};function vIe(t,n,e){let r=n.length;if(t==null||Array.isArray(t)&&t.length===0)return n.map(o=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${e} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let o=[];return n.forEach(i=>{i in t?o.push(t[i]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${e} must be either an array with ${r} elements or an object with ${n} keys. Provided ${e} not understood: ${JSON.stringify(t)}`)}function jT(t,n){return vIe(t,n,"classWeight")}function zT(t,n,e,r){return z(this,null,function*(){if(n!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(e!=null){let o=ne(()=>{if(t.shape.length===1)return xi(t);if(t.shape.length===2){if(t.shape[1]>1)return Tl(t,1);if(t.shape[1]===1)return $(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(yield o.data());gt(o);let s=[];return i.forEach(a=>{if(e[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);s.push(e[a])}),Qn(s,"float32")}else return null})}function RJ(t,n){return L(t,n)}var wIe=32;function PJ(t,n){let e,r,o=n;e=o.xs,r=o.ys,x.assert(e!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${n}`);let i=OJ("input",t.inputNames,e),s=OJ("output",t.outputNames,r),a=i[0].shape[0];x.assert(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),x.assert(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)x.assert(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<s.length;l++)x.assert(s[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:s}}function OJ(t,n,e){if(e instanceof Ot)return[e];if(Array.isArray(e))return x.assert(e.length===n.length,()=>`Received an array of ${e.length} Tensors, but expected ${n.length} to match the ${t} keys ${n}.`),e;{let r=[];for(let o of n){if(e[o]==null)throw new te(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);r.push(e[o])}return r}}function yIe(t){if(t.length===3)throw new _t("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function BJ(t,n,e){return z(this,null,function*(){let r=e.batchesPerEpoch!=null;if(x.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),x.assert(e!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),x.assert(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),x.assert(!r||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),x.assert(e.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let o=e.validationData!=null,i,s;if(o)if(FJ(e.validationData))x.assert(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{let g=yIe(e.validationData);i=g.xs,s=g.ys}let a=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),c;o?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();let u=AT(e.callbacks,e.yieldEvery),d=e.verbose==null?1:e.verbose,{callbackList:p,history:h}=RT(u,d,e.epochs,null,null,xIe(n,e),null,o,c);p.setModel(t),t.history=h,yield p.onTrainBegin(),t.stopTraining_=!1;let f=e.initialEpoch==null?0:e.initialEpoch,m=yield n.iterator();for(;f<e.epochs;){let g={};yield p.onEpochBegin(f);let v=0,w=0;for(r||(m=yield n.iterator());!r||v<e.batchesPerEpoch;){let y=yield m.next();if(r&&y.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(y.value!=null){let{xs:_,ys:k}=PJ(t,y.value),M={};M.batch=w,M.size=_[0].shape[0],yield p.onBatchBegin(w,M);let E=[];if(e.classWeight!=null){let N=jT(e.classWeight,t.outputNames);for(let B=0;B<N.length;++B)E.push(yield zT(k[B],null,N[B]))}let A=_.concat(k).concat(E),P=a(A);gt(A);for(let N=0;N<l.length;++N){let B=l[N],S=P[N];M[B]=S,Wn(S)}yield p.onBatchEnd(w,M),NT(M),w++,v++}if(r?v>=e.batchesPerEpoch:y.done){if(o){let _;FJ(e.validationData)?_=Cn(yield t.evaluateDataset(e.validationData,{batches:e.validationBatches})):_=Cn(t.evaluate(i,s,{batchSize:e.validationBatchSize==null?wIe:e.validationBatchSize,verbose:0}));for(let k=0;k<t.metricsNames.length;++k)g[`val_${t.metricsNames[k]}`]=_[k]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(f,g),f++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function xIe(t,n){let e=null;return n.batchesPerEpoch!=null?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}function FJ(t){return typeof t.iterator=="function"}function _Ie(t){return typeof t.next=="function"}function LJ(t,n,e){return z(this,null,function*(){e=e||{};let r=e.batches!=null,o=t.testFunction,i=[];if(e.verbose>0)throw new _t("Verbose mode is not implemented yet.");x.assert(!r||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);let s=_Ie(n)?n:yield n.iterator(),a=0,l=0;for(;!r||l<e.batches;){let c=yield s.next();if(i=ne(()=>{if(c.value){let{xs:u,ys:d}=PJ(t,c.value),p=u.concat(d),h=ne(()=>o(p));if(gt(p),l===0)for(let m=0;m<h.length;++m)i.push(ze(0));let f=p[0].shape[0];for(let m=0;m<h.length;++m){let g=h[m],v=i[m];i[m]=ne(()=>fe(i[m],L(f,g))),l>0&&gt(v)}gt(h),a+=f,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){let u=i[c];i[c]=$e(i[c],a),gt(u)}return Io(i)})}function HT(t){x.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Sv(t,n,e){return t==null?[null]:Array.isArray(t)?t.map(r=>Ap(r,n,e-n)):Ap(t,n,e-n)}function UT(t,n){return ne(()=>t==null?null:Array.isArray(t)?t.map(e=>UT(e,n)):yT(t,n.dtype==="int32"?n:ge(n,"int32")))}function GT(t,n){let e=[],r=0,o=null;for(;r<t;)o=r+n,o>=t&&(o=t),e.push([r,o]),r=o;return e}function G8(t){let n=[];t instanceof Ot&&(t=[t]);for(let e=0;e<t.length;++e){let r=t[e];if(r.rank===1)n.push(Rp(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(r)}}return n}function Va(t,n){if(t==null)return;let e=[];if(n instanceof Ot)e.push(n.id);else if(Array.isArray(n))n.forEach(o=>e.push(o.id));else if(n!=null)for(let o in n){let i=n[o];e.push(i.id)}let r=[];if(t instanceof Ot)e.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(o=>{e.indexOf(o.id)===-1&&r.push(o)});else if(t!=null)for(let o in t){let i=t[o];e.indexOf(i.id)===-1&&r.push(i)}r.forEach(o=>{o.isDisposed||o.dispose()})}function kIe(t){return t instanceof Ot}function W8(t){return Array.isArray(t)}function $J(t){return!kIe(t)&&!W8(t)}function VJ(t,n,e,r=!0,o=""){if(n==null||n.length===0){if(t!=null){let s=!1;if(W8(t)&&t.length>0)s=!0;else if($J(t)){for(let a in t)if(t.hasOwnProperty(a)){s=!0;break}}else s=!0;if(s)throw new te(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return n.map(s=>null);let i;if($J(t)){t=t,i=[];for(let s of n){if(t[s]==null)throw new te(`No data provided for "${s}". Need data for each key in: ${n}`);i.push(t[s])}}else if(W8(t)){if(t=t,t.length!==n.length)throw new te(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${n.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,n.length>1)throw new te(`The model ${o} expects ${n.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=G8(i),e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=i[s];if(a.shape.length!==e[s].length)throw new te(`Error when checking ${o}: expected ${n[s]} to have ${e[s].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[s].length;++l){if(l===0&&!r)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u>=0&&c!==u)throw new te(`${o} expected a batch of elements where each example has shape [${e[s].slice(1,e[s].length)}] (i.e.,tensor shape [*,${e[s].slice(1,e[s].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function bIe(t,n,e){let r=Ba(t.map(i=>i.shape[0]));r.sort();let o=Ba(n.map(i=>i.shape[0]));if(o.sort(),r.length>1)throw new te(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(o.length>1)throw new te(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(i=>i.shape))}`);if(r.length>0&&o.length>0&&!x.arraysEqual(r,o))throw new te(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function CIe(t,n,e){let r=[Nu,Cv,H0];for(let o=0;o<t.length;++o){let i=t[o],s=n[o],a=e[o];if(s!=null){if(s===H0&&i.shape[i.shape.length-1]===1)throw new te(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){let l=i.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){let d=l[u],p=c[u];if(p!=null&&d!==p)throw new te(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function jJ(t,n,e,r=!0,o=""){let i;if(Array.isArray(t)){if(t.length!==n.length)throw new te(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${n.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(n.length>1)throw new te(`The model expects ${n.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=i[s];if(a.shape.length!==e[s].length)throw new te(`Error when checking ${o}: expected ${n[s]} to have ${e[s].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[s].length;++l){if(l===0&&!r)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u!==c)throw new te(`Error when checking ${o}: expected ${n[s]} to have shape ${JSON.stringify(e[s])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function SIe(t,n){if(t==null||Array.isArray(t)&&t.length===0)return n.map(r=>[]);let e;if(typeof t=="string"||typeof t=="function")e=[t];else if(Array.isArray(t)||typeof t=="object")e=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(e))return n.map(r=>e);{let r=[];for(let o of n){let i=e.hasOwnProperty(o)?e[o]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}var MIe="layers-model",ja=(()=>{class t extends VT{constructor(e){super(e),this.isTraining=!1}summary(e,r,o=console.log){if(!this.built)throw new te("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");NJ(this,e,r,o)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=IJ(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Zo))throw new te("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let r=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new te(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),r.push(OT(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new te(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);r=e.loss.map(l=>OT(l))}else{let a=OT(e.loss);this.outputs.forEach(l=>{r.push(a)})}this.lossFunctions=r,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let l=this.internalOutputShapes[a],c=this.outputNames[a];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}let o=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Bl("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(o.indexOf(a)!==-1)continue;let l=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([l,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});let i=SIe(e.metrics,this.outputNames),s=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};Bl("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(o.indexOf(a)!==-1)continue;let l=i[a];(u=>{let d="",p,h,f;for(let m of u){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){let v=this.internalOutputShapes[a];v[v.length-1]===1||this.lossFunctions[a]===Cv?["accuracy","acc"].indexOf(m)!==-1?h=lk:["crossentropy","ce"].indexOf(m)!==-1&&(h=PT):this.lossFunctions[a]===bv?["accuracy","acc"].indexOf(m)!==-1?h=BT:["crossentropy","ce"].indexOf(m)!==-1&&(h=z8):["accuracy","acc"].indexOf(m)!==-1?h=ck:["crossentropy","ce"].indexOf(m)!==-1&&(h=uk);let w;["accuracy","acc"].indexOf(m)!==-1?w="acc":["crossentropy","ce"].indexOf(m)!==-1&&(w="ce"),f=h,p=d+w}else f=DJ(m),p=d+dk(m);let g;Bl(p,()=>{g=f}),s(a,p,g)}})(l)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,r,o={}){let i=o.batchSize==null?32:o.batchSize;HT(i);let a=this.standardizeUserDataXY(e,r,!0,i);try{let l=a[0].concat(a[1]);this.makeTestFunction();let c=this.testFunction,u=this.testLoop(c,l,i,o.verbose,o.steps);return Io(u)}finally{Va(a[0],e),Va(a[1],r)}}evaluateDataset(e,r){return z(this,null,function*(){return this.makeTestFunction(),LJ(this,e,r)})}checkNumSamples(e,r,o,i="steps"){let s;if(o!=null){if(s=null,r!=null)throw new te(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${r}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new te(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,r){if(Array.isArray(r)&&r.length===0)throw new te("`outputs` is an empty Array, which is not allowed.");let o=Array.isArray(r),i=o?r:[r],s=this.retrieveSymbolicTensors(i),a=new Eu;if(e instanceof Ot&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new te(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(let c of this.inputs){let u=e[c.name];if(u==null)throw new te(`No value is provided for the model's input ${c.name}`);a.add(c,u)}let l=j0(s,a);return o?l:l[0]}retrieveSymbolicTensors(e){let r=Fa(null,e.length),o=e.length;for(let i of this.layers){let s=Array.isArray(i.output)?i.output:[i.output],a=s.map(l=>l.name);for(let l=0;l<e.length;++l){let c=a.indexOf(e[l]);if(c!==-1&&(r[l]=s[c],o--),o===0)break}if(o===0)break}if(o>0){let i=[];throw r.forEach((s,a)=>{s==null&&i.push(e[a])}),new te(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return r}predictLoop(e,r=32,o=!1){return ne(()=>{let i=this.checkNumSamples(e);if(o)throw new _t("Verbose predictLoop() is not implemented yet.");let s=GT(i,r),a=this.outputs.map(l=>[]);for(let l=0;l<s.length;++l)ne(()=>{let u=s[l][0],d=s[l][1],p=Sv(e,u,d),h=[];if(Array.isArray(p))for(let m=0;m<p.length;++m)h.push({key:this.inputs[m],value:p[m]});else h.push({key:this.inputs[0],value:p});let f=new Eu(h);return j0(this.outputs,f)}).forEach((u,d)=>a[d].push(u));return Io(a.map(l=>gn(l,0)))})}predict(e,r={}){let o=G8(e);jJ(o,this.inputNames,this.feedInputShapes,!1);try{let i=r.batchSize==null?32:r.batchSize;return HT(i),this.predictLoop(o,i)}finally{Va(o,e)}}predictOnBatch(e){jJ(e,this.inputNames,this.feedInputShapes,!0);let r=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,r)}standardizeUserDataXY(e,r,o=!0,i){if(this.optimizer_==null)throw new Vi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let s=[];for(let a=0;a<this.feedOutputShapes.length;++a){let l=this.feedOutputShapes[a];this.feedLossFns[a]===bv?s.push(l.slice(0,l.length-1).concat([1])):s.push(l)}if(e=VJ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),r=VJ(r,this.feedOutputNames,s,!1,"target"),bIe(e,r,null),CIe(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new te(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,r]}standardizeUserData(e,r,o,i,s=!0,a){return z(this,null,function*(){let[l,c]=this.standardizeUserDataXY(e,r,s,a);if(o!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){let d=jT(i,this.outputNames);u=[];for(let p=0;p<d.length;++p)u.push(yield zT(c[p],null,d[p]))}return[l,c,u]})}testLoop(e,r,o,i=0,s){return ne(()=>{let a=this.checkNumSamples(r,o,s,"steps"),l=[];if(i>0)throw new _t("Verbose mode is not implemented yet.");if(s!=null)throw new _t("steps mode in testLoop() is not implemented yet");{let c=GT(a,o),u=Qn(zi(0,a));for(let d=0;d<c.length;++d){let p=c[d][0],h=c[d][1],f=Ap(u,p,h-p),m=UT(r,f),g=e(m);if(d===0)for(let v=0;v<g.length;++v)l.push(ze(0));for(let v=0;v<g.length;++v){let w=g[v];l[v]=fe(l[v],L(h-p,w))}}for(let d=0;d<l.length;++d)l[d]=$e(l[d],a)}return l})}getDedupedMetricsNames(){let e=this.metricsNames,r=[];for(let o=0;o<e.length;++o){let i=e[o],s=i;if(w8(e,i)>1){let a=w8(e.slice(0,o),i);s+=`_${a}`}r.push(s)}return r}makeTrainFunction(){return e=>{let r=[],o=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],l=()=>{let p=[];for(let g=0;g<this.inputs.length;++g)p.push({key:this.inputs[g],value:o[g]});let h=new Eu(p),f=j0(this.outputs,h,{training:!0}),m;for(let g=0;g<this.lossFunctions.length;++g){let v=this.lossFunctions[g],w=v(i[g],f[g]);s[g]!=null&&(w=RJ(w,s[g]));let y=Pn(w);r.push(y),g===0?m=w:m=fe(m,w)}for(let g=0;g<this.metricsTensors.length;++g){let v;if(this.outputs.length>1&&g<this.outputs.length)v=r[g];else{let w=this.metricsTensors[g][0],y=this.metricsTensors[g][1];v=Pn(w(i[y],f[y]))}Wn(v),a.push(v)}return m=Pn(m),this.calculateLosses().forEach(g=>{m=fe(m,g)}),m},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(l,!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>ne(()=>{let r=[],o,i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:i[u]});let l=new Eu(a),c=j0(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){let d=this.lossFunctions[u],p=Pn(d(s[u],c[u]));u===0?o=p:o=fe(o,p),r.push(o)}for(let u=0;u<this.metricsTensors.length;++u){let d=this.metricsTensors[u][0],p=this.metricsTensors[u][1],h=Pn(d(s[p],c[p]));r.push(h)}return r})}fit(i,s){return z(this,arguments,function*(e,r,o={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,l,c,u,d,p,h,f,m;try{let g=o.batchSize==null?32:o.batchSize;HT(g);let w=yield this.standardizeUserData(e,r,o.sampleWeight,o.classWeight,!1,g);a=w[0],l=w[1],m=w[2];let y=!1,_;if(o.validationData!=null&&o.validationData.length>0){if(y=!0,o.validationData.length===2)d=o.validationData[0],p=o.validationData[1];else throw o.validationData.length===3?new _t("validationData including sample weights is not supported yet."):new te(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${o.validationData} is invalid.`);let W=yield this.standardizeUserData(d,p,null,null,!0,g);h=W[0],f=W[1],_=h.concat(f)}else if(o.validationSplit!=null&&o.validationSplit>0&&o.validationSplit<1){y=!0;let S=Math.floor(a[0].shape[0]*(1-o.validationSplit)),W=a[0].shape[0];h=Sv(a,S,W),c=a,a=Sv(a,0,S),f=Sv(l,S,W),u=l,l=Sv(l,0,S),_=h.concat(f)}else o.validationSteps!=null&&(y=!0);let k=a.concat(l).concat(m);this.checkTrainableWeightsConsistency();let M=this.makeTrainFunction(),E=this.getDedupedMetricsNames(),A,P;y?(this.makeTestFunction(),A=this.testFunction,P=E.slice().concat(E.map(S=>"val_"+S))):(A=null,_=[],P=E.slice());let N=AT(o.callbacks,o.yieldEvery);return yield this.fitLoop(M,k,E,g,o.epochs,o.verbose,N,A,_,o.shuffle,P,o.initialEpoch,null,null)}finally{this.isTraining=!1,Va(a,e),Va(l,r),Va(c,e),Va(u,r),Va(h,d),Va(f,p),m!=null&&gt(m)}})}fitLoop(e,r,o,i,s,a,l,c,u,d,p,h,f,m){return z(this,null,function*(){i==null&&(i=32),s==null&&(s=1),d==null&&(d=!0),h==null&&(h=0);let g=!1;if(c!=null&&u!=null&&(g=!0),m!=null&&(g=!0,f==null))throw new te("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let v=this.checkNumSamples(r,i,f,"steps_per_epoch"),w;v!=null&&(w=zi(0,v)),a==null&&(a=1);let{callbackList:y,history:_}=RT(l,a,s,h,v,f,i,g,p);y.setModel(this),this.history=_,yield y.onTrainBegin(),this.stopTraining_=!1;for(let k=h;k<s;++k){yield y.onEpochBegin(k);let M={};if(f!=null)throw new _t("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new _t("batch shuffling is not implemneted yet");d&&x.shuffle(w);let E=Qn(w),A=GT(v,i);for(let P=0;P<A.length;++P){let N={};if(yield y.onBatchBegin(P,N),ne(()=>{let B=A[P][0],S=A[P][1],W=Ap(E,B,S-B);N.batch=P,N.size=S-B;let ie=UT(r,W),Z=e(ie);for(let X=0;X<o.length;++X){let G=o[X],H=Z[X];N[G]=H,Wn(H)}if(P===A.length-1&&g){let X=this.testLoop(c,u,i);for(let G=0;G<o.length;++G){let H=o[G],V=X[G];Wn(V),M["val_"+H]=V}}}),yield y.onBatchEnd(P,N),NT(N),this.stopTraining_)break}E.dispose()}if(yield y.onEpochEnd(k,M),this.stopTraining_)break}return yield y.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(e,r){return z(this,null,function*(){return BJ(this,e,r)})}trainOnBatch(e,r){return z(this,null,function*(){let o=yield this.standardizeUserData(e,r),i=o[0],s=o[1],l=this.makeTrainFunction()(i.concat(s)),c=[];for(let u of l){let d=yield u.data();c.push(d[0])}return gt(l),Va(o[0],e),Va(o[1],r),Io(c)})}getNamedWeights(e){let r=[],o=e!=null&&e.trainableOnly,i=o?this.trainableWeights:this.weights,s=this.getWeights(o);for(let a=0;a<i.length;++a)o&&!i[a].trainable||r.push({name:i[a].originalName,tensor:s[a]});return r}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let r=J1().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=r-J1().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Pa(this.loss);else if(Array.isArray(this.loss)){for(let r of this.loss)if(typeof r!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(r=>Pa(r))}else{let r=Object.keys(this.loss);e={};let o=this.loss;for(let i of r)if(typeof o[i]=="string")e[i]=Pa(o[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Pa(dk(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Pa(dk(e)));{let e={};for(let r in this.metrics)e[r]=Pa(dk(this.metrics[r]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let r=U0(e.optimizer_config),o=Wi(r),i;if(typeof e.loss=="string")i=Np(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(a=>Np(a));else if(e.loss!=null){i={};for(let a in e.loss)i[a]=Np(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>Np(a));else if(e.metrics!=null){s={};for(let a in e.metrics)s[a]=Np(e.metrics[a])}this.compile({loss:i,metrics:s,optimizer:o})}save(e,r){return z(this,null,function*(){if(typeof e=="string"){let u=Xr.getSaveHandlers(e);if(u.length===0)throw new te(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new te(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new te("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let o=yield Xr.encodeWeights(this.getNamedWeights(r)),l={modelTopology:this.toJSON(null,!1),format:MIe,generatedBy:`TensorFlow.js tfjs-layers v${df}`,convertedBy:null};if((r==null?!1:r.includeOptimizer)&&this.optimizer!=null){l.trainingConfig=this.getTrainingConfig();let u="optimizer",{data:d,specs:p}=yield Xr.encodeWeights(yield this.optimizer.getWeights(),u);o.specs.push(...p),o.data=Xr.concatenateArrayBuffers([o.data,d])}return this.userDefinedMetadata!=null&&(U8(this.userDefinedMetadata,this.name,!0),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=o.data,l.weightSpecs=o.specs,e.save(l)})}setUserDefinedMetadata(e){U8(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();ve.registerClass(ja);var TIe=(()=>{class t extends ja{}return t.className="Functional",t})();ve.registerClass(TIe);function zJ(t,n){return z(this,null,function*(){"modelTopology"in t||(t={modelTopology:t}),t=t;let e=t.modelTopology;e.model_config!=null&&(e=e.model_config);let r=U0(e),o=Wi(r,n);if(t.weightsManifest!=null){let i=yield Xr.loadWeights(t.weightsManifest,t.pathPrefix,o.weights.map(a=>a.originalName)),s={};for(let a of o.weights)s[a.originalName]=i[a.originalName];o.loadWeights(s),gt(i)}return o})}function Mv(t,n){return z(this,null,function*(){if(n==null&&(n={}),typeof t=="string"){let e=Xr.getLoadHandlers(t,n);if(e.length===0)e.push(Xr.browserHTTPRequest(t,n));else if(e.length>1)throw new te(`Found more than one (${e.length}) load handlers for URL '${t}'`);t=e[0]}return DIe(t,void 0,n)})}function DIe(t,n,e){return z(this,null,function*(){if(e==null&&(e={}),t.load==null)throw new te("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=yield t.load(),o=r.modelTopology;o.model_config!=null&&(o=o.model_config);let i=e.strict==null?!0:e.strict,s=r.weightData!=null&&r.weightSpecs!=null&&i,a=Wi(U0(o),n,s),l=r.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new te("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:u}=EIe(r.weightData,r.weightSpecs);a.loadWeights(c,i),a.optimizer!=null&&u.length>0&&(yield a.optimizer.setWeights(u)),gt(c),gt(u.map(d=>d.tensor))}return a})}function EIe(t,n){let e=Xr.decodeWeights(t,n),r={},o=[];return n.forEach(i=>{i.group==="optimizer"?o.push({name:i.name,tensor:e[i.name]}):r[i.name]=e[i.name]}),{modelWeights:r,optimizerWeights:o}}var pk=(()=>{class t extends ja{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:af("sequential_"),e.layers!=null)for(let r of e.layers)this.add(r)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(o=>o<0))throw new te(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let r=e instanceof t||e instanceof ja,o;if(r){if(o=e,o.outputs.length!==1)throw new te("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(o.inputs.length!==1)throw new te("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new te("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let i=DT({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(r)this.outputs=o.outputs,this.inputs=o.inputs;else{if(e.inboundNodes.length!==1)throw new te(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new te("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=N8(this.outputs[0])}this.inboundNodes=[],new Op({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Fa(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{let i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,r){return this.model==null&&this.build(),this.model.call(e,r)}build(e){if(Ht(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ja({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,r,o=console.log){this.built||this.build(),super.summary(e,r,o)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,r,o={}){if(!this.built)throw new Vi("The model needs to be compiled before being used.");return this.model.evaluate(e,r,o)}evaluateDataset(e,r){return z(this,null,function*(){if(!this.built)throw new Vi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,r)})}predict(e,r={}){return this.model==null&&this.build(),this.model.predict(e,r)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}fit(i,s){return z(this,arguments,function*(e,r,o={}){if(!this.built)throw new Vi("The model needs to be compiled before being used.");return this.model.fit(e,r,o)})}fitDataset(e,r){return z(this,null,function*(){if(!this.built)throw new Vi("The model needs to be compiled before being used.");return this.model.fitDataset(e,r)})}trainOnBatch(e,r){return z(this,null,function*(){return this.model.trainOnBatch(e,r)})}static fromConfig(e,r,o={},i=!1){let s,a={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new te("Legacy serialization format not supported yet.");s=r}else x.assert(r.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=r.layers,delete r.layers,a=r;let l=new e(a);if(!(l instanceof t))throw new _t(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(let c of s){let d=Wi(c,void 0,i);i&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(this.model==null)throw new te("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new te("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let r of this.layers){let o={};o.className=r.getClassName(),o.config=r.getConfig(),e.push(o)}return{name:this.name,layers:e}}}return t.className="Sequential",t})();ve.registerClass(pk);function HJ(t){return new ja(t)}function UJ(t){return new pk(t)}function WT(t){return DT(t)}function GJ(t,n){V8.registerCallbackConstructor(t,n)}var Yo=class extends ve.Serializable{getConfig(){return{}}},IIe=(()=>{class t extends Yo{apply(e,r=1){return dJ(e,r)}}return t.className="elu",t})();ve.registerClass(IIe);var NIe=(()=>{class t extends Yo{apply(e){return C0(e)}}return t.className="selu",t})();ve.registerClass(NIe);var AIe=(()=>{class t extends Yo{apply(e){return Eo(e)}}return t.className="relu",t})();ve.registerClass(AIe);var RIe=(()=>{class t extends Yo{apply(e){return ne(()=>Fs(6,Eo(e)))}}return t.className="relu6",t})();ve.registerClass(RIe);var OIe=(()=>{class t extends Yo{apply(e){return e}}return t.className="linear",t})();ve.registerClass(OIe);var FIe=(()=>{class t extends Yo{apply(e){return ui(e)}}return t.className="sigmoid",t})();ve.registerClass(FIe);var PIe=(()=>{class t extends Yo{apply(e){return hJ(e)}}return t.className="hardSigmoid",t})();ve.registerClass(PIe);var BIe=(()=>{class t extends Yo{apply(e){return Ia(e)}}return t.className="softplus",t})();ve.registerClass(BIe);var LIe=(()=>{class t extends Yo{apply(e){return pJ(e)}}return t.className="softsign",t})();ve.registerClass(LIe);var $Ie=(()=>{class t extends Yo{apply(e){return Da(e)}}return t.className="tanh",t})();ve.registerClass($Ie);var K8=(()=>{class t extends Yo{apply(e,r=-1){return Mp(e,r)}}return t.className="softmax",t})();ve.registerClass(K8);var VIe=(()=>{class t extends Yo{apply(e,r=-1){return v0(e,r)}}return t.className="logSoftmax",t})();ve.registerClass(VIe);var jIe=(()=>{class t extends Yo{apply(e){return ne(()=>ne(()=>{let r=Math.sqrt(2),o=L(.5,fe(1,g0($e(e,r))));return L(e,o)}))}}return t.className="gelu",t})();ve.registerClass(jIe);var zIe=(()=>{class t extends Yo{apply(e){return ne(()=>L(.5,L(e,fe(1,Da(L(En($e(2,Math.PI)),fe(e,L(.044715,Ko(e,3)))))))))}}return t.className="gelu_new",t})();ve.registerClass(zIe);var HIe=(()=>{class t extends Yo{apply(e){return ne(()=>L(e,Da(Ia(e))))}}return t.className="mish",t})();ve.registerClass(HIe);var UIe=(()=>{class t extends Yo{apply(e,r=1){return ne(()=>L(ui(L(e,r)),e))}}return t.className="swish",t})();ve.registerClass(UIe);function $l(t){return t.getClassName()}function q8(t,n={}){return Tu(t,ve.SerializationMap.getMap().classNameMap,n,"activation")}function Vl(t){if(t==null){let n={};return n.className="linear",n.config={},q8(n)}if(typeof t=="string"){let n={};return n.className=t,n.config={},q8(n)}else return t instanceof Yo?t:q8(t)}function Z8(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var qT=class extends ve.Serializable{},hk=(()=>{class t extends qT{constructor(e){super(),Z8(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ne(()=>{let r=Bn([1]);return this.hasL1&&(r=fe(r,He(L(this.l1,jn(e))))),this.hasL2&&(r=fe(r,He(L(this.l2,V0(e))))),$(r,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,r){return new e({l1:r.l1,l2:r.l2})}}return t.className="L1L2",t})();ve.registerClass(hk);function KJ(t){return Z8(t),new hk({l1:t!=null?t.l1:null,l2:0})}function ZJ(t){return Z8(t),new hk({l2:t!=null?t.l2:null,l1:0})}var WJ={l1l2:"L1L2"};function Tn(t){return fv(t)}function qJ(t,n={}){return Tu(t,ve.SerializationMap.getMap().classNameMap,n,"regularizer")}function Ln(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in WJ?WJ[t]:t,config:{}};return qJ(e)}else return t instanceof qT?t:qJ(t)}var X8=(()=>{class t extends kt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,r){e=ft(e);let o=Eo(e);return this.maxValue!=null&&(o=ho(o,0,this.maxValue)),o}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ReLU",t})();ve.registerClass(X8);var Y8=(()=>{class t extends kt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let o=ft(e);return yp(o,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}}return t.className="LeakyReLU",t})();ve.registerClass(Y8);var Q8=(()=>{class t extends kt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=An(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Ln(e.alphaRegularizer),this.alphaConstraint=mr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new te(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Ht(e);let r=e.slice(1);if(this.sharedAxes!=null)for(let i of this.sharedAxes)r[i-1]=1;this.alpha=this.addWeight("alpha",r,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let o={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)o[i]=e[i];this.inputSpec=[new Rn({ndim:e.length,axes:o})],this.built=!0}call(e,r){return e=ft(e),Sp(e,this.alpha.read())}getConfig(){let e={alphaInitializer:Hn(this.alphaInitializer),alphaRegularizer:Tn(this.alphaRegularizer),alphaConstraint:fr(this.alphaConstraint),sharedAxes:this.sharedAxes},r=super.getConfig();return Object.assign(e,r),e}}return t.className="PReLU",t})();ve.registerClass(Q8);var J8=(()=>{class t extends kt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new _t(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let o=ft(e);return Nl(o)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ELU",t})();ve.registerClass(J8);var eP=(()=>{class t extends kt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,r){let o=ft(e);return L(o,ge(Xn(o,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ThresholdedReLU",t})();ve.registerClass(eP);var tP=(()=>{class t extends kt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new K8().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,r){return ne(()=>{let o=ft(e),i=r.mask;if(i!=null){let s=L(Pe(Dr(o.shape),ge(i,o.dtype)),ze(-1e9));o=fe(o,s)}return this.axis instanceof Array?this.axis.length>1?pr(Pe(o,_p(o,this.axis,!0))):this.softmax(o,this.axis[0]):this.softmax(o,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Softmax",t})();ve.registerClass(tP);function pf(t,n,e){if(typeof t=="number")return Fa(t,n);if(t.length!==n)throw new te(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${t.length} elements.`);for(let r=0;r<n;++r){let o=t[r];if(!aJ(o))throw new te(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function cs(t,n,e,r,o=1){if(t==null)return t;let i=n+(n-1)*(o-1),s;return e==="same"?s=t:s=t-i+1,Math.floor((s+r-1)/r)}function jl(t,n,e,r){if(t==null)return null;if(r==="valid")t=t*n+Ll([e-n,0]);else if(r==="same")t=t*n;else throw new te(`Unsupport padding mode: ${r}.`);return t}function mk(t,n){return ne(()=>(rr(n),n==="channelsFirst"?Lt(t,[0,2,3,1]):t))}function nP(t,n){return ne(()=>(rr(n),n==="channelsFirst"?Lt(t,[0,2,3,4,1]):t))}function WIe(t,n,e,r=1,o="valid",i,s=1){return ne(()=>{if(i==null&&(i=Hi()),rr(i),t.shape.length!==3)throw new te(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(n.shape.length!==3)throw new te(`The kernel for a conv1dWithBias operation should be 3, but is ${n.shape.length} instead`);if(e!=null&&e.shape.length!==1)throw new te(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(i==="channelsFirst"&&(t=Lt(t,[0,2,1])),o==="causal")throw new _t("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=p0(t,n,r,o==="same"?"same":"valid","NWC",s);return e!=null&&(a=Ui(a,e)),a})}function XJ(t,n,e,r=[1,1],o="valid",i,s,a=null){return ne(()=>{if(i==null&&(i=Hi()),rr(i),t.rank!==3&&t.rank!==4)throw new te(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(n.rank!==3&&n.rank!==4)throw new te(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=mk(t,i);if(o==="causal")throw new _t("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Ep.conv2d({x:l,filter:n,strides:r,pad:o==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:e,activation:a}),i==="channelsFirst"&&(l=Lt(l,[0,3,1,2])),l})}function qIe(t,n,e,r=[1,1,1],o="valid",i,s){return ne(()=>{if(i==null&&(i=Hi()),rr(i),t.rank!==4&&t.rank!==5)throw new te(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(n.rank!==4&&n.rank!==5)throw new te(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=nP(t,i);if(o==="causal")throw new _t("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=m_(a,n,r,o==="same"?"same":"valid","NDHWC",s),e!=null&&(a=Ui(a,e)),i==="channelsFirst"&&(a=Lt(a,[0,4,1,2,3])),a})}var fk=class t extends kt{constructor(n,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(e),this.rank=n,Nr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new _t(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=pf(e.kernelSize,n,"kernelSize"),this.strides=pf(e.strides==null?1:e.strides,n,"strides"),this.padding=e.padding==null?"valid":e.padding,ji(this.padding),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rr(this.dataFormat),this.activation=Vl(e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.biasInitializer=An(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=mr(e.biasConstraint),this.biasRegularizer=Ln(e.biasRegularizer),this.activityRegularizer=Ln(e.activityRegularizer),this.dilationRate=pf(e.dilationRate==null?1:e.dilationRate,n,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new te(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new te(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new te(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(n){if(la("kernelSize"in n,"required key 'kernelSize' not in config"),typeof n.kernelSize!="number"&&!dT(n.kernelSize,"number",1,3))throw new te(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(n.kernelSize)}.`)}getConfig(){let n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:$l(this.activation),useBias:this.useBias,biasInitializer:Hn(this.biasInitializer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),biasConstraint:fr(this.biasConstraint)},e=super.getConfig();return Object.assign(n,e),n}},Tv=class t extends fk{constructor(n,e){super(n,e),this.kernel=null,t.verifyArgs(e),this.filters=e.filters,Nr(this.filters,"filters"),this.kernelInitializer=An(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=mr(e.kernelConstraint),this.kernelRegularizer=Ln(e.kernelRegularizer)}build(n){n=Ht(n);let e=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[e]==null)throw new te(`The channel dimension of the input should be defined. Found ${n[e]}`);let r=n[e],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:r}}],this.built=!0}call(n,e){return ne(()=>{n=ft(n);let r,o=this.bias==null?null:this.bias.read(),i=pT(this.activation.getClassName());if(i!=null&&this.rank===2)r=XJ(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=WIe(n,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=XJ(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=qIe(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new _t("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(n){n=Ht(n);let e=[],r=this.dataFormat==="channelsLast"?n.slice(1,n.length-1):n.slice(2);for(let i=0;i<r.length;++i){let s=cs(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);e.push(s)}let o=[n[0]];return this.dataFormat==="channelsLast"?(o=o.concat(e),o.push(this.filters)):(o.push(this.filters),o=o.concat(e)),o}getConfig(){let n={filters:this.filters,kernelInitializer:Hn(this.kernelInitializer),kernelRegularizer:Tn(this.kernelRegularizer),kernelConstraint:fr(this.kernelConstraint)},e=super.getConfig();return Object.assign(n,e),n}static verifyArgs(n){if(!("filters"in n)||typeof n.filters!="number"||n.filters<1)throw new te(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(n.filters)}`)}},KT=(()=>{class t extends Tv{constructor(e){super(2,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!dT(e.kernelSize,"number",1,2))throw new te(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv2D",t})();ve.registerClass(KT);var ZT=(()=>{class t extends Tv{constructor(e){super(3,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new te(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv3D",t})();ve.registerClass(ZT);var rP=(()=>{class t extends KT{constructor(e){if(super(e),this.inputSpec=[new Rn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new te(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ht(e),e.length!==4)throw new te("Input should have rank 4; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new te("The channel dimension of the inputs should be defined. Found `None`.");let o=e[r],i=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Rn({ndim:4,axes:{[r]:o}})],this.built=!0}call(e,r){return ne(()=>{let o=ft(e);if(o.shape.length!==4)throw new te(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);let i=o.shape,s=i[0],a,l;this.dataFormat==="channelsFirst"?(a=2,l=3):(a=1,l=2);let c=i[a],u=i[l],d=this.kernelSize[0],p=this.kernelSize[1],h=this.strides[0],f=this.strides[1],m=jl(c,h,d,this.padding),g=jl(u,f,p,this.padding),v=[s,m,g,this.filters];this.dataFormat!=="channelsLast"&&(o=Lt(o,[0,2,3,1]));let w=h0(o,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=Lt(w,[0,3,1,2])),this.bias!=null&&(w=Ui(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=Ht(e);let r=e.slice(),o,i,s;this.dataFormat==="channelsFirst"?(o=1,i=2,s=3):(o=3,i=1,s=2);let a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return r[o]=this.filters,r[i]=jl(r[i],c,a,this.padding),r[s]=jl(r[s],u,l,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv2DTranspose",t})();ve.registerClass(rP);var oP=(()=>{class t extends ZT{constructor(e){if(super(e),this.inputSpec=[new Rn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new te(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ht(e),e.length!==5)throw new te("Input should have rank 5; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new te("The channel dimension of the inputs should be defined. Found `None`.");let o=e[r],i=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Rn({ndim:5,axes:{[r]:o}})],this.built=!0}call(e,r){return ne(()=>{let o=ft(e);if(o.shape.length!==5)throw new te(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);let i=o.shape,s=i[0],a,l,c;this.dataFormat==="channelsFirst"?(c=2,a=3,l=4):(c=1,a=2,l=3);let u=i[c],d=i[a],p=i[l],h=this.kernelSize[0],f=this.kernelSize[1],m=this.kernelSize[2],g=this.strides[0],v=this.strides[1],w=this.strides[2],y=jl(u,g,h,this.padding),_=jl(d,v,f,this.padding),k=jl(p,w,m,this.padding),M=[s,y,_,k,this.filters];this.dataFormat!=="channelsLast"&&(o=Lt(o,[0,2,3,4,1]));let E=g_(o,this.kernel.read(),M,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=Lt(E,[0,4,1,2,3])),this.bias!==null&&(E=Ui(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(e){e=Ht(e);let r=e.slice(),o,i,s,a;this.dataFormat==="channelsFirst"?(o=1,i=2,s=3,a=4):(o=4,i=1,s=2,a=3);let l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],p=this.strides[1],h=this.strides[2];return r[o]=this.filters,r[i]=jl(r[i],d,l,this.padding),r[s]=jl(r[s],p,c,this.padding),r[a]=jl(r[a],h,u,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv3DTranspose",t})();ve.registerClass(oP);var KIe=(()=>{class t extends Tv{constructor(e,r){if(super(e,r),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,r.filters==null)throw new te("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new te("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new te(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(r.padding)}`);this.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,this.depthwiseInitializer=An(r.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Ln(r.depthwiseRegularizer),this.depthwiseConstraint=mr(r.depthwiseConstraint),this.pointwiseInitializer=An(r.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Ln(r.pointwiseRegularizer),this.pointwiseConstraint=mr(r.pointwiseConstraint)}build(e){if(e=Ht(e),e.length<this.rank+2)throw new te(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null||e[r]<0)throw new te(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[r])}`);let o=e[r],i=this.kernelSize.concat([o,this.depthMultiplier]),s=[];for(let l=0;l<this.rank;++l)s.push(1);s.push(o*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Rn({ndim:this.rank+2,axes:{[r]:o}})],this.built=!0}call(e,r){return ne(()=>{e=ft(e);let o;if(this.rank===1)throw new _t("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Lt(e,[0,2,3,1])),o=S0(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(o=Ui(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),this.dataFormat==="channelsFirst"&&(o=Lt(o,[0,3,1,2])),o})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Hn(this.depthwiseInitializer),e.pointwiseInitializer=Hn(this.pointwiseInitializer),e.depthwiseRegularizer=Tn(this.depthwiseRegularizer),e.pointwiseRegularizer=Tn(this.pointwiseRegularizer),e.depthwiseConstraint=fr(this.depthwiseConstraint),e.pointwiseConstraint=fr(this.pointwiseConstraint),e}}return t.className="SeparableConv",t})();var iP=(()=>{class t extends KIe{constructor(e){super(2,e)}}return t.className="SeparableConv2D",t})();ve.registerClass(iP);var sP=(()=>{class t extends Tv{constructor(e){super(1,e),t.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!dT(e.kernelSize,"number",1,1))throw new te(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv1D",t})();ve.registerClass(sP);var aP=(()=>{class t extends kt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,r){return ne(()=>{if(e=ft(e),this.dataFormat==="channelsLast"){let o=J_(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return J_(o,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let o=J_(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return J_(o,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Cropping2D",t})();ve.registerClass(aP);var lP=(()=>{class t extends kt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,iJ(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let r=e[2]==null?null:this.size[0]*e[2],o=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],r,o]}else{let r=e[1]==null?null:this.size[0]*e[1],o=e[2]==null?null:this.size[1]*e[2];return[e[0],r,o,e[3]]}}call(e,r){return ne(()=>{let o=ft(e),i=o.shape;if(this.dataFormat==="channelsFirst"){o=Lt(o,[0,2,3,1]);let s=this.size[0]*i[2],a=this.size[1]*i[3],l=this.interpolation==="nearest"?Ci.resizeNearestNeighbor(o,[s,a]):Ci.resizeBilinear(o,[s,a]);return Lt(l,[0,3,1,2])}else{let s=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?Ci.resizeNearestNeighbor(o,[s,a]):Ci.resizeBilinear(o,[s,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}}return t.className="UpSampling2D",t})();ve.registerClass(lP);function ZIe(t,n,e=[1,1],r="valid",o,i){return ne(()=>{o==null&&(o=Hi()),rr(o);let s=mk(t,o);if(t.rank!==4)throw new te(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(n.rank!==4)throw new te(`depthwiseKernel is required to be 4-D, but is instead ${n.rank}-D`);return s=Il(s,n,e,r==="same"?"same":"valid","NHWC",i),o==="channelsFirst"&&(s=Lt(s,[0,3,1,2])),s})}var cP=(()=>{class t extends fk{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=An(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=mr(e.depthwiseConstraint),this.depthwiseRegularizer=Ln(e.depthwiseRegularizer)}build(e){if(e=Ht(e),e.length<4)throw new te(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let r=this.dataFormat==="channelsFirst"?1:3;if(e[r]==null||e[r]<0)throw new te(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[r]}).`);let o=e[r],i=[this.kernelSize[0],this.kernelSize[1],o,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[o*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return ne(()=>{e=ft(e);let o=ZIe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(o=Ui(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),o})}computeOutputShape(e){e=Ht(e);let r=this.dataFormat==="channelsFirst"?e[2]:e[1],o=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=cs(r,this.kernelSize[0],this.padding,this.strides[0]),a=cs(o,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,a]:[e[0],s,a,i]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Hn(this.depthwiseInitializer),e.depthwiseRegularizer=Tn(this.depthwiseRegularizer),e.depthwiseConstraint=fr(this.depthwiseRegularizer),e}}return t.className="DepthwiseConv2D",t})();ve.registerClass(cP);function uP(t,n,e,r){if(Array.isArray(t)){if(n!=null||e!=null)throw new te("When inputs is an array, neither initialState or constants should be provided");r!=null&&(e=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function o(i){return i==null||Array.isArray(i)?i:[i]}return n=o(n),e=o(e),{inputs:t,initialState:n,constants:e}}function dP(t,n,e,r=!1,o,i,s=!1,a=!1){return ne(()=>{let l=n.shape.length;if(l<3)throw new te(`Input should be at least 3D, but is ${l}D.`);let c=[1,0].concat(zi(2,l));if(n=Lt(n,c),i!=null)throw new _t("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=ge(ge(o,"bool"),"float32"),o.rank===l-1&&(o=hr(o,-1)),o=Lt(o,c)),r&&(n=qr(n,0),o!=null&&(o=qr(o,0)));let u=[],d,p=e,h=n.shape[0],f=Zr(n),m;o!=null&&(m=Zr(o));for(let v=0;v<h;++v){let w=f[v],y=ne(()=>t(w,p));if(o==null)d=y[0],p=y[1];else{let _=ne(()=>{let k=m[v],M=Pe(io(k),k),E=fe(L(y[0],k),L(p[0],M)),A=p.map((P,N)=>fe(L(y[1][N],k),L(P,M)));return{output:E,newStates:A}});d=_.output,p=_.newStates}a&&u.push(d)}let g;return a&&(g=Yn(u,1)),[d,g,p]})}var zl=(()=>{class t extends kt{constructor(e){super(e);let r;if(e.cell==null)throw new te("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?r=new QT({cells:e.cell}):r=e.cell,r.stateSize==null)throw new te("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=r,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Rn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return zi(0,e).map(r=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){TT(e)&&(e=e[0]),e=e;let r=this.cell.stateSize;Array.isArray(r)||(r=[r]);let o=r[0],i;if(this.returnSequences?i=[e[0],e[1],o]:i=[e[0],o],this.returnState){let s=[];for(let a of r)s.push([e[0],a]);return[i].concat(s)}else return i}computeMask(e,r){return ne(()=>{Array.isArray(r)&&(r=r[0]);let o=this.returnSequences?r:null;if(this.returnState){let i=this.states.map(s=>null);return[o].concat(i)}else return o})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[];for(let o=0;o<e;++o)r.push(null);return r}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new _t("Constants support is not implemented in RNN yet.");TT(e)&&(e=e[0]),e=e;let o=this.stateful?e[0]:null,i=e.slice(2);this.inputSpec[0]=new Rn({shape:[o,null,...i]});let s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!x.arraysEqual(this.stateSpec.map(l=>l.shape[l.shape.length-1]),a))throw new te(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(l=>new Rn({shape:[null,l]}));this.stateful&&this.resetStates()}resetStates(e,r=!1){ne(()=>{if(!this.stateful)throw new aa("Cannot call resetStates() on an RNN Layer that is not stateful.");let o=this.inputSpec[0].shape[0];if(o==null)throw new te("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Bn([o,i])):this.states_=[Bn([o,this.cell.stateSize])];else if(e==null)gt(this.states_),this.keptStates!=null&&(gt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Bn([o,i])):this.states_[0]=Bn([o,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new te(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r===!0?this.keptStates.push(this.states_.slice()):gt(this.states_);for(let i=0;i<this.states_.length;++i){let s=e[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,l=[o,a];if(!x.arraysEqual(s.shape,l))throw new te(`State ${i} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Wn(i.clone()))})}apply(e,r){let o=r==null?null:r.initialState,i=r==null?null:r.constants;r==null&&(r={});let s=uP(e,o,i,this.numConstants);e=s.inputs,o=s.initialState,i=s.constants;let a=[],l=[];if(o!=null){r.initialState=o,a=a.concat(o),this.stateSpec=[];for(let u of o)this.stateSpec.push(new Rn({shape:u.shape}));l=l.concat(this.stateSpec)}if(i!=null&&(r.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof pi){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,r);return this.inputSpec=p,h}else return super.apply(e,r)}call(e,r){return ne(()=>{let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;e=ft(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));let a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new te(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let l={training:i},u=dP((m,g)=>{let v=this.cell.call([m].concat(g),l);return[v[0],v.slice(1)]},e,s,this.goBackwards,o,null,this.unroll,this.returnSequences),d=u[0],p=u[1],h=u[2];this.stateful&&this.resetStates(h,i);let f=this.returnSequences?p:d;return this.returnState?[f].concat(h):f})}getInitialState(e){return ne(()=>{let r=Bn(e.shape);return r=He(r,[1,2]),r=Rp(r),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(o=>o>1?wT(r,[1,o]):r):this.cell.stateSize>1?[wT(r,[1,this.cell.stateSize])]:[r]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),r={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(r.numConstants=this.numConstants);let o=this.cell.getConfig();return this.getClassName()===t.className&&(r.cell={className:this.cell.getClassName(),config:o}),Object.assign(Object.assign(Object.assign({},o),e),r)}static fromConfig(e,r,o={}){let i=r.cell,s=Wi(i,o);return new e(Object.assign(r,{cell:s}))}}return t.className="RNN",t})();ve.registerClass(zl);var Pp=class extends kt{},XT=(()=>{class t extends Pp{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Nr(this.units,"units"),this.activation=Vl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=An(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=An(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=An(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ln(e.kernelRegularizer),this.recurrentRegularizer=Ln(e.recurrentRegularizer),this.biasRegularizer=Ln(e.biasRegularizer),this.kernelConstraint=mr(e.kernelConstraint),this.recurrentConstraint=mr(e.recurrentConstraint),this.biasConstraint=mr(e.biasConstraint),this.dropout=$0([1,Ll([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$0([1,Ll([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ht(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return ne(()=>{if(e=e,e.length!==2)throw new te(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let o=e[1];e=e[0];let i=r.training==null?!1:r.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Bp({ones:()=>io(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Bp({ones:()=>io(o),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s,a=this.dropoutMask,l=this.recurrentDropoutMask;a!=null?s=$a(L(e,a),this.kernel.read()):s=$a(e,this.kernel.read()),this.bias!=null&&(s=Ui(s,this.bias.read())),l!=null&&(o=L(o,l));let c=fe(s,$a(o,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:$l(this.activation),useBias:this.useBias,kernelInitializer:Hn(this.kernelInitializer),recurrentInitializer:Hn(this.recurrentInitializer),biasInitializer:Hn(this.biasInitializer),kernelRegularizer:Tn(this.kernelRegularizer),recurrentRegularizer:Tn(this.recurrentRegularizer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),kernelConstraint:fr(this.kernelConstraint),recurrentConstraint:fr(this.recurrentConstraint),biasConstraint:fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),r)}}return t.className="SimpleRNNCell",t})();ve.registerClass(XT);var pP=(()=>{class t extends zl{constructor(e){e.cell=new XT(e),super(e)}call(e,r){return ne(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return new e(r)}}return t.className="SimpleRNN",t})();ve.registerClass(pP);var YT=(()=>{class t extends Pp{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new te("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Nr(this.units,"units"),this.activation=Vl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Vl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=An(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=An(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=An(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ln(e.kernelRegularizer),this.recurrentRegularizer=Ln(e.recurrentRegularizer),this.biasRegularizer=Ln(e.biasRegularizer),this.kernelConstraint=mr(e.kernelConstraint),this.recurrentConstraint=mr(e.recurrentConstraint),this.biasConstraint=mr(e.biasConstraint),this.dropout=$0([1,Ll([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$0([1,Ll([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ht(e);let r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return ne(()=>{if(e=e,e.length!==2)throw new te(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let o=r.training==null?!1:r.training,i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Bp({ones:()=>io(e),rate:this.dropout,training:o,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Bp({ones:()=>io(i),rate:this.recurrentDropout,training:o,count:3,dropoutFunc:this.dropoutFunc}));let s=this.dropoutMask,a=this.recurrentDropoutMask,l,c,u;0<this.dropout&&this.dropout<1&&(e=L(e,s[0]));let d=$a(e,this.kernel.read());this.useBias&&(d=Ui(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=L(i,a[0]));let p=this.recurrentKernel.read(),[h,f]=Kr(p,[2*this.units,this.units],p.rank-1),m=$a(i,h),[g,v,w]=Kr(d,3,d.rank-1),[y,_]=Kr(m,2,m.rank-1);l=this.recurrentActivation.apply(fe(g,y)),c=this.recurrentActivation.apply(fe(v,_));let k=$a(L(c,i),f);u=this.activation.apply(fe(w,k));let M=fe(L(l,i),L(fe(1,Kt(l)),u));return[M,M]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:$l(this.activation),recurrentActivation:$l(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Hn(this.kernelInitializer),recurrentInitializer:Hn(this.recurrentInitializer),biasInitializer:Hn(this.biasInitializer),kernelRegularizer:Tn(this.kernelRegularizer),recurrentRegularizer:Tn(this.recurrentRegularizer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),kernelConstraint:fr(this.kernelConstraint),recurrentConstraint:fr(this.recurrentConstraint),biasConstraint:fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),r)}}return t.className="GRUCell",t})();ve.registerClass(YT);var hP=(()=>{class t extends zl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new YT(e),super(e)}call(e,r){return ne(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}}return t.className="GRU",t})();ve.registerClass(hP);var Dv=(()=>{class t extends Pp{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Nr(this.units,"units"),this.activation=Vl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Vl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=An(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=An(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=An(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Ln(e.kernelRegularizer),this.recurrentRegularizer=Ln(e.recurrentRegularizer),this.biasRegularizer=Ln(e.biasRegularizer),this.kernelConstraint=mr(e.kernelConstraint),this.recurrentConstraint=mr(e.recurrentConstraint),this.biasConstraint=mr(e.biasConstraint),this.dropout=$0([1,Ll([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$0([1,Ll([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var r;e=Ht(e);let o=e[e.length-1];this.kernel=this.addWeight("kernel",[o,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){let s=this.biasInitializer,a=this.units;i=new(r=class extends Gi{apply(c,u){let d=s.apply([a]),p=new ek().apply([a]),h=s.apply([a*2]);return b8(b8(d,p),h)}},r.className="CustomInit",r)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,r){return ne(()=>{let o=r.training==null?!1:r.training;if(e=e,e.length!==3)throw new te(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1],s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Bp({ones:()=>io(e),rate:this.dropout,training:o,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Bp({ones:()=>io(i),rate:this.recurrentDropout,training:o,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,c,u,d,p;0<this.dropout&&this.dropout<1&&(e=L(e,a[0]));let h=$a(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=L(i,l[0])),h=fe(h,$a(i,this.recurrentKernel.read())),this.useBias&&(h=Ui(h,this.bias.read()));let[f,m,g,v]=Kr(h,4,h.rank-1);c=this.recurrentActivation.apply(f),u=this.recurrentActivation.apply(m),d=fe(L(u,s),L(c,this.activation.apply(g))),p=this.recurrentActivation.apply(v);let w=L(p,this.activation.apply(d));return[w,w,d]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:$l(this.activation),recurrentActivation:$l(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Hn(this.kernelInitializer),recurrentInitializer:Hn(this.recurrentInitializer),biasInitializer:Hn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Tn(this.kernelRegularizer),recurrentRegularizer:Tn(this.recurrentRegularizer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),kernelConstraint:fr(this.kernelConstraint),recurrentConstraint:fr(this.recurrentConstraint),biasConstraint:fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),r)}}return t.className="LSTMCell",t})();ve.registerClass(Dv);var fP=(()=>{class t extends zl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Dv(e),super(e)}call(e,r){return ne(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}}return t.className="LSTM",t})();ve.registerClass(fP);var QT=(()=>{class t extends Pp{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let r of this.cells.slice().reverse())Array.isArray(r.stateSize)?e.push(...r.stateSize):e.push(r.stateSize);return e}call(e,r){return ne(()=>{e=e;let o=e.slice(1),i=[];for(let l of this.cells.slice().reverse())Array.isArray(l.stateSize)?i.push(o.splice(0,l.stateSize.length)):i.push(o.splice(0,1));i.reverse();let s=[],a;for(let l=0;l<this.cells.length;++l){let c=this.cells[l];o=i[l],l===0?a=[e[0]].concat(o):a=[a[0]].concat(o),a=c.call(a,r),s.push(a.slice(1))}o=[];for(let l of s.slice().reverse())o.push(...l);return[a[0]].concat(o)})}build(e){TT(e)&&(e=e[0]),e=e;let r;this.cells.forEach((o,i)=>{Bl(`RNNCell_${i}`,()=>{o.build(e),Array.isArray(o.stateSize)?r=o.stateSize[0]:r=o.stateSize,e=[e[0],r]})}),this.built=!0}getConfig(){let e=super.getConfig(),r=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(r)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,r,o={}){let i=[];for(let s of r.cells)i.push(Wi(s,o));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let r of this.cells)e.push(...r.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let r of this.cells)e.push(...r.nonTrainableWeights);if(!this.trainable){let r=[];for(let o of this.cells)r.push(...o.trainableWeights);return r.concat(e)}return e}getWeights(){let e=[];for(let r of this.cells)e.push(...r.weights);return tk(e)}setWeights(e){let r=[];for(let o of this.cells){let i=o.weights.length,s=e.splice(i);for(let a=0;a<o.weights.length;++a)r.push([o.weights[a],s[a]])}_v(r)}}return t.className="StackedRNNCells",t})();ve.registerClass(QT);function Bp(t){let{ones:n,rate:e,training:r=!1,count:o=1,dropoutFunc:i}=t,s=()=>i!=null?i(n(),e):xT(n(),e),a=()=>lf(s,n,r);return!o||o<=1?Wn(a().clone()):Array(o).fill(void 0).map(a).map(c=>Wn(c.clone()))}var XIe=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(e[r[o]]=t[r[o]]);return e};var YIe=(()=>{class t extends zl{constructor(e){if(e.unroll)throw new _t("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new _t("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Rn({ndim:5})]}call(e,r){return ne(()=>{if(this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),r&&r.constants)throw new te("ConvRNN2D cell does not support constants");let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}computeOutputShape(e){let r=this.computeSingleOutputShape(e);return this.returnSequences||(r=[r[0],...r.slice(2)]),this.returnState&&(r=[r,...Array(2).fill([e[0],...r.slice(-3)])]),r}getInitialState(e){return ne(()=>{let{stateSize:r}=this.cell,o=e.shape,i=this.computeSingleOutputShape(o),s=[i[0],...i.slice(2)],a=Bn(s);return Array.isArray(r)?Array(r.length).fill(a):[a]})}resetStates(e,r=!1){ne(()=>{if(!this.stateful)throw new aa("Cannot call resetStates() on an RNN Layer that is not stateful.");let o=this.inputSpec[0].shape,i=this.computeSingleOutputShape(o),s=[i[0],...i.slice(2)];if(o[0]==null)throw new te("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Bn(s)):this.states_=[Bn(s)];else if(e==null)gt(this.states_),this.keptStates!=null&&(gt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Bn(s)):this.states_[0]=Bn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new te(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r?this.keptStates.push(this.states_.slice()):gt(this.states_);for(let l=0;l<this.states_.length;++l){let c=e[l],u=s;if(!x.arraysEqual(c.shape,u))throw new te(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>Wn(l.clone()))})}computeSingleOutputShape(e){let{dataFormat:r,filters:o,kernelSize:i,padding:s,strides:a,dilationRate:l}=this.cell,c=r==="channelsFirst",u=e[c?3:2],d=e[c?4:3],p=cs(u,i[0],s,a[0],l[0]),h=cs(d,i[1],s,a[1],l[1]);return[...e.slice(0,2),...c?[o,p,h]:[p,h,o]]}}return t.className="ConvRNN2D",t})(),JT=(()=>{class t extends Dv{constructor(e){let{filters:r,kernelSize:o,strides:i,padding:s,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:r})),this.filters=r,Nr(this.filters,"filters"),this.kernelSize=pf(o,2,"kernelSize"),this.kernelSize.forEach(c=>Nr(c,"kernelSize")),this.strides=pf(i||1,2,"strides"),this.strides.forEach(c=>Nr(c,"strides")),this.padding=s||"valid",ji(this.padding),this.dataFormat=a||"channelsLast",rr(this.dataFormat),this.dilationRate=pf(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>Nr(c,"dilationRate"))}build(e){var r;e=Ht(e);let o=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[o]==null)throw new te(`The channel dimension of the input should be defined. Found ${e[o]}`);let i=e[o],s=4,a=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let l=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let u=this.biasInitializer,d=this.filters;c=new(r=class extends Gi{apply(h,f){let m=u.apply([d]),g=Dr([d]),v=u.apply([d*2]);return gv([m,g,v])}},r.className="CustomInit",r)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,r){return ne(()=>{if(e.length!==3)throw new te(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=r.training||!1,i=e[0],s=e[1],a=e[2],l=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Bp({ones:()=>io(i),rate:this.dropout,training:o,count:l,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,u=(pe,le,se)=>!le||!le[se]?pe:L(le[se],pe),d=u(i,c,0),p=u(i,c,1),h=u(i,c,2),f=u(i,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Bp({ones:()=>io(s),rate:this.recurrentDropout,training:o,count:l,dropoutFunc:this.dropoutFunc}));let m=this.recurrentDropoutMask,g=u(s,m,0),v=u(s,m,1),w=u(s,m,2),y=u(s,m,3),_=3,[k,M,E,A]=Kr(this.kernel.read(),l,_),[P,N,B,S]=this.useBias?Kr(this.bias.read(),l):[null,null,null,null];d=this.inputConv(d,k,P,this.padding),p=this.inputConv(p,M,N,this.padding),h=this.inputConv(h,E,B,this.padding),f=this.inputConv(f,A,S,this.padding);let[W,ie,Z,X]=Kr(this.recurrentKernel.read(),l,_);g=this.recurrentConv(g,W),v=this.recurrentConv(v,ie),w=this.recurrentConv(w,Z),y=this.recurrentConv(y,X);let G=this.recurrentActivation.apply(fe(d,g)),H=this.recurrentActivation.apply(fe(p,v)),V=fe(L(H,a),L(G,this.activation.apply(fe(h,w)))),K=L(this.recurrentActivation.apply(fe(f,y)),this.activation.apply(V));return[K,K,V]})}getConfig(){let e=super.getConfig(),{units:r}=e,o=XIe(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},o),i)}inputConv(e,r,o,i){let s=Li(e,r,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return o?Ui(s,o,this.dataFormat):s}recurrentConv(e,r){return Li(e,r,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();ve.registerClass(JT);var mP=(()=>{class t extends YIe{constructor(e){let r=new JT(e);super(Object.assign(Object.assign({},e),{cell:r}))}static fromConfig(e,r){return new e(r)}}return t.className="ConvLSTM2D",t})();ve.registerClass(mP);var eD=(()=>{class t extends kt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let r=e.shape,o=[];for(let i=0;i<this.noiseShape.length;++i)o.push(this.noiseShape[i]==null?r[i]:this.noiseShape[i]);return o}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);if(0<this.rate&&this.rate<1){let i=r.training==null?!1:r.training,s=this.getNoiseShape(o);return lf(()=>xT(o,this.rate,s,this.seed),()=>o,i)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=super.getConfig();return Object.assign(e,r),e}dispose(){return super.dispose()}}return t.className="Dropout",t})();ve.registerClass(eD);var gP=(()=>{class t extends eD{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let r=e.shape;return[r[0],1,r[2]]}}return t.className="SpatialDropout1D",t})();ve.registerClass(gP);var vP=(()=>{class t extends kt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),this.batchInputShape=[r,e.inputDim]}this.units=e.units,Nr(this.units,"units"),this.activation=Vl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=An(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=An(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=mr(e.kernelConstraint),this.biasConstraint=mr(e.biasConstraint),this.kernelRegularizer=Ln(e.kernelRegularizer),this.biasRegularizer=Ln(e.biasRegularizer),this.activityRegularizer=Ln(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Ht(e);let r=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[r,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:r}}],this.built=!0}computeOutputShape(e){e=Ht(e);let r=e.slice();return r[r.length-1]=this.units,r}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e),i=pT(this.activation.getClassName()),s;return i!=null?s=$a(o,this.kernel.read(),i,this.bias?this.bias.read():null):(s=$a(o,this.kernel.read()),this.bias!=null&&(s=Ui(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){let e={units:this.units,activation:$l(this.activation),useBias:this.useBias,kernelInitializer:Hn(this.kernelInitializer),biasInitializer:Hn(this.biasInitializer),kernelRegularizer:Tn(this.kernelRegularizer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),kernelConstraint:fr(this.kernelConstraint),biasConstraint:fr(this.biasConstraint)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Dense",t})();ve.registerClass(vP);var wP=(()=>{class t extends kt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ht(e);for(let r of e.slice(1))if(r==null)throw new te(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],La(e,1)]}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);if(this.dataFormat==="channelsFirst"&&o.rank>1){let i=[0];for(let s=2;s<o.rank;++s)i.push(s);i.push(1),o=Lt(o,i)}return uJ(o)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let r=super.getConfig();return Object.assign(e,r),e}}return t.className="Flatten",t})();ve.registerClass(wP);var yP=(()=>{class t extends kt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Vl(e.activation)}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);return this.activation.apply(o)})}getConfig(){let e={activation:$l(this.activation)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Activation",t})();ve.registerClass(yP);var xP=(()=>{class t extends kt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,r){return ne(()=>(e=ft(e),lJ(e,this.n)))}getConfig(){let e={n:this.n},r=super.getConfig();return Object.assign(e,r),e}}return t.className="RepeatVector",t})();ve.registerClass(xP);var _P=(()=>{class t extends kt{constructor(e){super(e),this.targetShape=e.targetShape;for(let r=0;r<this.targetShape.length;++r)this.isUnknown(this.targetShape[r])&&(this.targetShape[r]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,r){let o="Total size of new array must be unchanged.",i=r.slice(),s=1,a=null;for(let c=0;c<i.length;++c){let u=i[c];if(this.isUnknown(u))if(a===null)a=c;else throw new te("Can only specifiy one unknown dimension.");else s*=u}let l=La(e);if(a!==null){if(s===0||l%s!==0)throw new te(o);i[a]=l/s}else if(l!==s)throw new te(o);return i}computeOutputShape(e){let r=!1;for(let o=0;o<e.length;++o)if(this.isUnknown(e[o])){r=!0;break}return r?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e),i=o.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return $(o,s)})}getConfig(){let e={targetShape:this.targetShape},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Reshape",t})();ve.registerClass(_P);var kP=(()=>{class t extends kt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let r=zi(1,e.dims.length+1);if(!x.arraysEqual(e.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Rn({ndim:this.dims.length+1})]}computeOutputShape(e){e=Ht(e);let r=e.slice();return this.dims.forEach((o,i)=>{r[i+1]=e[o]}),r}call(e,r){return Lt(ft(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Permute",t})();ve.registerClass(kP);var bP=(()=>{class t extends kt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={maskValue:this.maskValue};return Object.assign(r,e),r}computeMask(e,r){let o=ft(e);return qh(Na(o,this.maskValue),-1)}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e),a=qh(Na(o,this.maskValue),-1,!0);return L(o,ge(a,o.dtype))})}}return t.className="Masking",t})();ve.registerClass(bP);var CP=(()=>{class t extends kt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let r=null;e.batchSize!=null&&(r=e.batchSize),e.inputLength==null?this.batchInputShape=[r,null]:this.batchInputShape=[r].concat(Cn(e.inputLength))}this.inputDim=e.inputDim,Nr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Nr(this.outputDim,"outputDim"),this.embeddingsInitializer=An(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Ln(e.embeddingsRegularizer),this.activityRegularizer=Ln(e.activityRegularizer),this.embeddingsConstraint=mr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,r){return ne(()=>this.maskZero?(e=ft(e),Na(e,dt(e))):null)}computeOutputShape(e){if(e=Ht(e),this.inputLength==null)return[...e,this.outputDim];let r=Cn(this.inputLength);if(r.length!==e.length-1)throw new te(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let o=0;for(let i=0;i<r.length;++i){let s=r[i],a=e[i+1];if(s!=null&&a!=null&&s!==a)throw new te(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(r[o]=a),o++}}return[e[0],...r,this.outputDim]}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);o.dtype!=="int32"&&(o=Si(o,"int32"));let i=yT(this.embeddings.read(),$(o,[o.size]));return $(i,Ht(this.computeOutputShape(o.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Hn(this.embeddingsInitializer),embeddingsRegularizer:Tn(this.embeddingsRegularizer),activityRegularizer:Tn(this.activityRegularizer),embeddingsConstraint:fr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Embedding",t})();ve.registerClass(CP);var Lp=class extends kt{constructor(n){super(n||{}),this.supportsMasking=!0}mergeFunction(n){throw new _t}computeElementwiseOpOutputShape(n,e){if(n==null||e==null)return null;if(n.length<e.length)return this.computeElementwiseOpOutputShape(e,n);if(e.length===0)return n;let r=n.slice(0,n.length-e.length);for(let o=0;o<e.length;++o){let i=n[n.length-e.length+o],s=e[o];if(i==null||s==null||i<0||s<0)r.push(null);else if(i===1)r.push(s);else if(s===1)r.push(i);else{if(i!==s)throw new te("Operands could not be broadcast together with shapes "+JSON.stringify(n)+" "+JSON.stringify(e));r.push(i)}}return r}build(n){if(Array.isArray(n)&&!Array.isArray(n[0])&&(n=[Ht(n)]),n=n,n.length<2)throw new te(`A merge layer should be called on an Array of at least 2 inputs. Got ${n.length} input(s).`);let e=[];for(let i of n)i!=null&&i[0]!==null&&e.push(i[0]);if(e=Ba(e),e.length>1)throw new te(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(n)}.`);let r=n[0]==null?null:n[0].slice(1);for(let i=1;i<n.length;++i){let s=n[i]==null?null:n[i].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}let o=n.map(i=>i.length);n.indexOf(null)===-1&&Ba(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(n,e){return ne(()=>{if(n=n,this.reshapeRequired){let r=[],o=n.map(i=>i.rank);if(o.indexOf(null)===-1){let i=Ll(o);for(let s of n){let a=s.rank;for(let l=0;l<i-a;++l)s=Rp(s,1);r.push(s)}return this.mergeFunction(r)}else{let i=!1;for(let l of n){let c=l.rank;if(c==null){let u=l.shape,d=u[0],p=u.slice(1).concat([d]),h=$(l,[d].concat(La(u.slice(1))));h=Lt(h,[1,0]),h=$(h,p),r.push(h),i=!0}else if(c>1){let u=zi(1,c).concat([0]);r.push(Lt(l,u)),i=!0}else r.push(l)}let s=this.mergeFunction(r),a=s.rank;if(i){if(a==null){let l=s.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));s=$(Lt($(s,[-1,u]),[1,0]),d)}else if(a>1){let l=[a-1].concat(zi(0,a-1));s=Lt(s,l)}}return s}}else return this.mergeFunction(n)})}computeOutputShape(n){n=n;let e;n[0]==null?e=null:e=n[0].slice(1);for(let o=1;o<n.length;++o){let i=n[o]==null?null:n[o].slice(1);e=this.computeElementwiseOpOutputShape(e,i)}let r=[];for(let o of n)o!=null&&o[0]!==null&&r.push(o[0]);return r=Ba(r),r.length===1?e=r.concat(e):e=[null].concat(e),e}computeMask(n,e){return ne(()=>{if(e==null)return null;if(!Array.isArray(e))throw new te("`mask` should be an Array");if(!Array.isArray(n))throw new te("`inputs` should be an Array");if(e.length!==n.length)throw new te(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${n.length} vs ${e.length})`);if(e.every(o=>o==null))return null;e=e.map(o=>o==null?o:hr(o,0));let r=e[0];for(let o=1;o<e.length-1;++o)r=Do(r,e[o]);return r})}},SP=(()=>{class t extends Lp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=fe(r,e[o]);return r})}}return t.className="Add",t})();ve.registerClass(SP);var MP=(()=>{class t extends Lp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=L(r,e[o]);return r})}}return t.className="Multiply",t})();ve.registerClass(MP);var TP=(()=>{class t extends Lp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=fe(r,e[o]);return L(1/e.length,r)})}}return t.className="Average",t})();ve.registerClass(TP);var DP=(()=>{class t extends Lp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0];for(let o=1;o<e.length;++o)r=$i(r,e[o]);return r})}}return t.className="Maximum",t})();ve.registerClass(DP);var EP=(()=>{class t extends Lp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0];for(let o=1;o<e.length;++o)r=Fs(r,e[o]);return r})}}return t.className="Minimum",t})();ve.registerClass(EP);var IP=(()=>{class t extends Lp{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new te("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let r=!0;for(let i of e)if(i!=null){r=!1;break}if(r)return;let o=[];for(let i=0;i<e.length;++i){let s=e[i].slice();s.splice(this.axis,1);let a=!1;for(let l of o)if(x.arraysEqual(l,s)){a=!0;break}a||o.push(s)}if(o.length>1)throw new te("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ne(()=>gv(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new te("A `Concatenate` layer should be called on a list of inputs.");let r=e,o=r[0].slice(),i=this.axis<0?o.length+this.axis:this.axis;for(let s of r.slice(1)){if(o[i]==null||s[i]==null){o[i]=null;break}o[i]+=s[i]}return o}computeMask(e,r){if(r==null)return null;if(!Array.isArray(r))throw new te("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new te("`inputs` should be an array for Concatenate");if(r.length!==e.length)throw new te(`Mismatch in the length of mask (${r.length}) and the legnth of inputs (${e.length})`);return ne(()=>{let o=!0;if(r.forEach(a=>{if(a!=null){o=!1;return}}),o)return null;let i=[];for(let a=0;a<e.length;++a)r[a]==null?i.push(ge(io(e[a]),"bool")):r[a].rank<e[a].rank?i.push(hr(r[a],-1)):i.push(r[a]);let s=gn(i,this.axis);return u0(s,-1,!1)})}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Concatenate",t})();ve.registerClass(IP);function gk(t,n){for(;t<0;)t+=n;return t}function QIe(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new _t("batchDot is not implemented for tensors of 4D or higher rank yet");if(x.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),x.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${n.shape.length}`),typeof e=="number"&&(e=[e,e]),t.dtype==="complex64"||n.dtype==="complex64")throw new _t("batchDot is not implemented for complex64-type Tensors yet.");let r=t.shape.length,o=n.shape.length;e==null&&(e=[r-1,o-2]);let i=e;return ne(()=>{let s;if(r>o){s=r-o;let l=[];for(let c=0;c<s;++c)l.push(1);n=$(n,n.shape.concat(l))}else if(o>r){s=o-r;let l=[];for(let c=0;c<s;++c)l.push(1);t=$(t,t.shape.concat(l))}else s=0;let a;if(t.shape.length===2&&n.shape.length===2)i[0]===i[1]?a=He(L(t,n),i[0]):a=He(L(Lt(t,[1,0]),n),i[1]);else{let l=i[0]!==t.shape.length-1,c=i[1]===n.shape.length-1;a=Bt(t,n,l,c)}if(s>0){let l;r>o?l=r+o-3:l=r-1;let c=[];for(let u=l;u<l+s;++u)c.push(u);a=as(a,c)}return a.shape.length===1&&(a=hr(a,1)),a})}var NP=(()=>{class t extends Lp{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){x.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0],o=e[1];if(r.length>3||o.length>3)throw new _t("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(r,o);if(r[i[0]]!==o[i[1]])throw new te(`Dimension incompatibility: ${r[i[0]]} !== ${o[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new te(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let r=e[0],o=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,a)=>gk(s,e[a].shape.length)):i=[gk(this.axes,r.shape.length),gk(this.axes,o.shape.length)],this.normalize&&(r=ik(r,i[0]),o=ik(o,i[1])),QIe(r,o,i)}interpretAxes(e,r){let o;return Array.isArray(this.axes)?o=this.axes:o=[gk(this.axes,e.length),gk(this.axes,r.length)],o}computeOutputShape(e){x.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0].slice(),o=e[1].slice();if(r.length>3||o.length>3)throw new _t("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(r,o);r.splice(i[0],1),o.splice(i[1],1),o.splice(0,1);let s=r.concat(o);return s.length===1&&s.push(1),s}computeMask(e,r){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Dot",t})();ve.registerClass(NP);var AP=(()=>{class t extends kt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={stddev:this.stddev};return Object.assign(r,e),r}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);return lf(()=>fe(vv(o.shape,0,this.stddev),o),()=>o,r.training||!1)})}}return t.className="GaussianNoise",t})();ve.registerClass(AP);var RP=(()=>{class t extends kt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);return this.rate>0&&this.rate<1?lf(()=>{let s=Math.sqrt(this.rate/(1-this.rate));return L(o,vv(o.shape,1,s))},()=>o,r.training||!1):o})}}return t.className="GaussianDropout",t})();ve.registerClass(RP);var OP=(()=>{class t extends kt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||ft(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return ne(()=>{if(this.rate<1&&this.rate>0){let o=this._getNoiseShape(e);return lf(()=>{let s=ft(e),c=-1.6732632423543772*1.0507009873554805,u=_i(ss(o),this.rate);u=Si(u,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,h=fe(L(s,u),L(fe(u,-1),c));return fe(L(h,d),p)},()=>ft(e),r.training||!1)}return e})}}return t.className="AlphaDropout",t})();ve.registerClass(OP);function vk(t,n,e,r,o,i=.001){let s;if(t.rank===2)s=s_(t,n,e,r,o,i);else if(t.rank===3)s=a_(t,n,e,r,o,i);else if(t.rank===4)s=l_(t,n,e,r,o,i);else throw new _t(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function JIe(t,n,e,r,o=.001){return ne(()=>{let i=Xh(t,r),s=i.mean,a=i.variance;return[vk(t,s,a,e,n,o),s,a]})}function e3e(t,n,e,r,o=.001){return ne(()=>{let i=Xh(t,r),s=i.mean,a=i.variance,l=[];for(let f of zi(0,t.rank))r.indexOf(f)!==-1?l.push(1):l.push(t.shape[f]);let c=$(s,l),u=$(a,l),d=n==null?null:$(n,l),p=e==null?null:$(e,l);return[vk(t,c,u,p,d,o),s,a]})}function t3e(t,n,e,r,o=.001){return x.arraysEqual(r.slice().sort(),zi(0,t.rank-1))?JIe(t,n,e,r,o):e3e(t,n,e,r,o)}var FP=(()=>{class t extends kt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=An(e.betaInitializer||"zeros"),this.gammaInitializer=An(e.gammaInitializer||"ones"),this.movingMeanInitializer=An(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=An(e.movingVarianceInitializer||"ones"),this.betaConstraint=mr(e.betaConstraint),this.gammaConstraint=mr(e.gammaConstraint),this.betaRegularizer=Ln(e.betaRegularizer),this.gammaRegularizer=Ln(e.gammaRegularizer)}build(e){e=Ht(e);let r=this.axis>=0?this.axis:this.axis+e.length,o=e[r];if(o==null)throw new te(`Axis ${r} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Rn({ndim:e.length,axes:{[r]:o}})];let i=[o];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,r){return ne(()=>{let o=r.training==null?!1:r.training,i=ft(e),s=i.shape,a=s.length,l=zi(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);let u=Fa(1,a);u[c]=s[c];let d=l.slice();d.sort();let p=!x.arraysEqual(d,zi(0,a).slice(0,a-1)),h=()=>{if(p){let y=$(this.movingMean.read(),u),_=$(this.movingVariance.read(),u),k=this.center?$(this.beta.read(),u):null,M=this.scale?$(this.gamma.read(),u):null;return vk(i,y,_,k,M,this.epsilon)}else return vk(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!o)return h();let[f,m,g]=t3e(i,this.gamma.read(),this.beta.read(),l,this.epsilon),v=(y,_,k)=>{ne(()=>{let M=1-k,E=y.read(),A=L(Pe(E,_),M);y.write(Pe(E,A))})};return(()=>{v(this.movingMean,m,this.momentum),v(this.movingVariance,g,this.momentum)})(),f})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Hn(this.betaInitializer),gammaInitializer:Hn(this.gammaInitializer),movingMeanInitializer:Hn(this.movingMeanInitializer),movingVarianceInitializer:Hn(this.movingVarianceInitializer),betaRegularizer:Tn(this.betaRegularizer),gammaRegularizer:Tn(this.gammaRegularizer),betaConstraint:fr(this.betaConstraint),gammaConstraint:fr(this.gammaConstraint)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="BatchNormalization",t})();ve.registerClass(FP);var PP=(()=>{class t extends kt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let r of this.axis)if(!Number.isInteger(r))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=An(e.betaInitializer||"zeros"),this.gammaInitializer=An(e.gammaInitializer||"ones"),this.betaRegularizer=Ln(e.betaRegularizer),this.gammaRegularizer=Ln(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Ht(e);let r=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=r);for(let s of this.axis)if(s<0||s>=r)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Ba(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let o=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,r){let o=ft(e),i=o.shape,s=i.length;return ne(()=>{let{mean:l,variance:c}=Xh(o,this.axis,!0),u=Fa(1,s);for(let g of this.axis)u[g]=i[g];let d=g=>g!=null&&g.shape.length!==s?$(g,u):g,p=this.scale?d(this.gamma.read()):null,h=this.center?d(this.beta.read()):null,f=[],m=[];for(let g=0;g<s;++g)this.axis.indexOf(g)!==-1?(f.push(i[g]),m.push(1)):(f.push(1),m.push(i[g]));return l=To(l,f),c=To(c,f),p!=null&&(p=To(p,m)),h!=null&&(h=To(h,m)),vk(o,l,c,h,p,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Hn(this.betaInitializer),gammaInitializer:Hn(this.gammaInitializer),betaRegularizer:Tn(this.betaRegularizer),gammaRegularizer:Tn(this.gammaRegularizer)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="LayerNormalization",t})();ve.registerClass(PP);function n3e(t,n,e){return ne(()=>{if(t.rank!==4)throw new te(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(n==null&&(n=[[1,1],[1,1]]),n.length!==2||n[0].length!==2||n[1].length!==2)throw new te("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=Hi()),e!=="channelsLast"&&e!=="channelsFirst")throw new te(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return e==="channelsFirst"?r=[[0,0],[0,0],n[0],n[1]]:r=[[0,0],n[0],n[1],[0,0]],bi(t,r)})}var BP=(()=>{class t extends kt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Hi():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new te(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let r,o;if(typeof e.padding[0]=="number")r=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new te(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(r=e.padding[0],e.padding[1].length!==2)throw new te(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);o=e.padding[1]}this.padding=[r,o]}this.inputSpec=[new Rn({ndim:4})]}computeOutputShape(e){e=Ht(e);let r,o;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?r=e[2]+this.padding[0][0]+this.padding[0][1]:r=null,e[3]!=null&&e[3]>=0?o=e[3]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],e[1],r,o]):(e[1]!=null&&e[1]>=0?r=e[1]+this.padding[0][0]+this.padding[0][1]:r=null,e[2]!=null&&e[2]>=0?o=e[2]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],r,o,e[3]])}call(e,r){return ne(()=>n3e(ft(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ZeroPadding2D",t})();ve.registerClass(BP);function sD(t,n,e,r,o,i){return ne(()=>{rr(o),y8(i),ji(r),e==null&&(e=[1,1]),r==null&&(r="valid"),o==null&&(o=Hi()),i==null&&(i="max"),t=mk(t,o);let s,a=r==="same"?"same":"valid";return i==="max"?s=bp(t,n,e,a):s=fp(t,n,e,a),o==="channelsFirst"&&(s=Lt(s,[0,3,1,2])),s})}function YJ(t,n,e,r,o,i){return ne(()=>{rr(o),y8(i),ji(r),e==null&&(e=[1,1,1]),r==null&&(r="valid"),o==null&&(o=Hi()),i==null&&(i="max"),t=nP(t,o);let s,a=r==="same"?"same":"valid";return i==="max"?s=N_(t,n,e,a):s=i_(t,n,e,a),o==="channelsFirst"&&(s=Lt(s,[0,4,1,2,3])),s})}var tD=class extends kt{constructor(n){if(n.poolSize==null&&(n.poolSize=2),super(n),typeof n.poolSize=="number")this.poolSize=[n.poolSize];else if(Array.isArray(n.poolSize)&&n.poolSize.length===1&&typeof n.poolSize[0]=="number")this.poolSize=n.poolSize;else throw new te(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.poolSize)}`);if(Nr(this.poolSize,"poolSize"),n.strides==null)this.strides=this.poolSize;else if(typeof n.strides=="number")this.strides=[n.strides];else if(Array.isArray(n.strides)&&n.strides.length===1&&typeof n.strides[0]=="number")this.strides=n.strides;else throw new te(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.strides)}`);Nr(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,ji(this.padding),this.inputSpec=[new Rn({ndim:3})]}computeOutputShape(n){n=Ht(n);let e=cs(n[1],this.poolSize[0],this.padding,this.strides[0]);return[n[0],e,n[2]]}call(n,e){return ne(()=>{this.invokeCallHook(n,e),n=Rp(ft(n),2);let r=this.poolingFunction(ft(n),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return as(r,[2])})}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(n,e),n}},LP=(()=>{class t extends tD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return rr(s),ji(i),sD(e,r,o,i,s,"max")}}return t.className="MaxPooling1D",t})();ve.registerClass(LP);var $P=(()=>{class t extends tD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return rr(s),ji(i),sD(e,r,o,i,s,"avg")}}return t.className="AveragePooling1D",t})();ve.registerClass($P);var nD=class extends kt{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==2)throw new te(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides];Nr(this.poolSize,"poolSize"),Nr(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,rr(this.dataFormat),ji(this.padding),this.inputSpec=[new Rn({ndim:4})]}computeOutputShape(n){n=Ht(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],r=this.dataFormat==="channelsFirst"?n[3]:n[2];return e=cs(e,this.poolSize[0],this.padding,this.strides[0]),r=cs(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,r]:[n[0],e,r,n[3]]}call(n,e){return ne(()=>(this.invokeCallHook(n,e),this.poolingFunction(ft(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},VP=(()=>{class t extends nD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return rr(s),ji(i),sD(e,r,o,i,s,"max")}}return t.className="MaxPooling2D",t})();ve.registerClass(VP);var jP=(()=>{class t extends nD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return rr(s),ji(i),sD(e,r,o,i,s,"avg")}}return t.className="AveragePooling2D",t})();ve.registerClass(jP);var rD=class extends kt{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==3)throw new te(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides,n.strides];Nr(this.poolSize,"poolSize"),Nr(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,rr(this.dataFormat),ji(this.padding),this.inputSpec=[new Rn({ndim:5})]}computeOutputShape(n){n=Ht(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],r=this.dataFormat==="channelsFirst"?n[3]:n[2],o=this.dataFormat==="channelsFirst"?n[4]:n[3];return e=cs(e,this.poolSize[0],this.padding,this.strides[0]),r=cs(r,this.poolSize[1],this.padding,this.strides[1]),o=cs(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,r,o]:[n[0],e,r,o,n[4]]}call(n,e){return ne(()=>(this.invokeCallHook(n,e),this.poolingFunction(ft(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},zP=(()=>{class t extends rD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return rr(s),ji(i),YJ(e,r,o,i,s,"max")}}return t.className="MaxPooling3D",t})();ve.registerClass(zP);var HP=(()=>{class t extends rD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return rr(s),ji(i),YJ(e,r,o,i,s,"avg")}}return t.className="AveragePooling3D",t})();ve.registerClass(HP);var oD=class extends kt{constructor(n){super(n),this.inputSpec=[new Rn({ndim:3})]}computeOutputShape(n){return[n[0],n[2]]}call(n,e){throw new _t}},UP=(()=>{class t extends oD{constructor(e){super(e||{})}call(e,r){return ne(()=>{let o=ft(e);return Pn(o,1)})}}return t.className="GlobalAveragePooling1D",t})();ve.registerClass(UP);var GP=(()=>{class t extends oD{constructor(e){super(e||{})}call(e,r){return ne(()=>{let o=ft(e);return fo(o,1)})}}return t.className="GlobalMaxPooling1D",t})();ve.registerClass(GP);var iD=class extends kt{constructor(n){super(n),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,rr(this.dataFormat),this.inputSpec=[new Rn({ndim:4})]}computeOutputShape(n){return n=n,this.dataFormat==="channelsLast"?[n[0],n[3]]:[n[0],n[1]]}call(n,e){throw new _t}getConfig(){let n={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},WP=(()=>{class t extends iD{call(e,r){return ne(()=>{let o=ft(e);return this.dataFormat==="channelsLast"?Pn(o,[1,2]):Pn(o,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();ve.registerClass(WP);var qP=(()=>{class t extends iD{call(e,r){return ne(()=>{let o=ft(e);return this.dataFormat==="channelsLast"?fo(o,[1,2]):fo(o,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();ve.registerClass(qP);var aD=class extends kt{constructor(n){super(n),this.layer=n.layer}build(n){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(n){this.layer!=null&&(this.layer.trainable=n)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(n){this.layer.setWeights(n)}getConfig(){let n={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(n,e),n}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(n)}static fromConfig(n,e,r={}){let o=e.layer,i=Wi(o,r);delete e.layer;let s={layer:i};return Object.assign(s,e),new n(s)}},KP=(()=>{class t extends aD{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Ht(e),e.length<3)throw new te(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let r=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Ht(e);let r=[e[0]].concat(e.slice(2)),o=this.layer.computeOutputShape(r),i=e[1];return[o[0],i].concat(o.slice(1))}call(e,r){return ne(()=>(e=ft(e),dP((a,l)=>[ft(this.layer.call(a,r)),[]],e,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();ve.registerClass(KP);function r3e(t){Du(rJ,"BidirectionalMergeMode",t)}var o3e="concat",ZP=(()=>{class t extends aD{constructor(e){super(e);let r=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=r,this.forwardLayer=Wi(o),r.goBackwards=r.goBackwards!==!0;let i={};if(i.className=e.layer.getClassName(),i.config=r,this.backwardLayer=Wi(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?o3e:e.mergeMode,r3e(this.mergeMode),e.weights)throw new _t("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let r=e.length,o=Math.floor(r/2);this.forwardLayer.setWeights(e.slice(0,o)),this.backwardLayer.setWeights(e.slice(o))}computeOutputShape(e){let r=this.forwardLayer.computeOutputShape(e);Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),r=r;let o,i,s;return this.returnState&&(s=r.slice(1)),o=r[0],o=o,this.mergeMode==="concat"?(o[o.length-1]*=2,i=[o]):this.mergeMode==null?i=[o,o.slice()]:i=[o],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[o].concat(s).concat(s.slice()):Io(i)}apply(e,r){let o=r==null?null:r.initialState,i=r==null?null:r.constants;r==null&&(r={});let s=uP(e,o,i,this.numConstants);if(e=s.inputs,o=s.initialState,i=s.constants,Array.isArray(e)&&(o=e.slice(1),e=e[0]),(o==null||o.length===0)&&i==null)return super.apply(e,r);let a=[],l=[];if(o!=null){let u=o.length;if(u%2>0)throw new te("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=o,a.push(...o);let d=o.map(p=>new Rn({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(i!=null)throw new _t("Support for constants in Bidirectional layers is not implemented yet.");let c=a[0]instanceof pi;for(let u of a)if(u instanceof pi!==c)throw new te("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,r);return this.inputSpec=p,h}else return super.apply(e,r)}call(e,r){return ne(()=>{let o=r.initialState,i,s;if(o==null)i=this.forwardLayer.call(e,r),s=this.backwardLayer.call(e,r);else{let c=o.slice(0,o.length/2),u=o.slice(o.length/2);i=this.forwardLayer.call(e,Object.assign(r,{initialState:c})),s=this.backwardLayer.call(e,Object.assign(r,{initialState:u}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=qr(s,1));let l;return this.mergeMode==="concat"?l=gv([i,s]):this.mergeMode==="sum"?l=fe(i,s):this.mergeMode==="ave"?l=L(.5,fe(i,s)):this.mergeMode==="mul"?l=L(i,s):this.mergeMode==null&&(l=[i,s]),this.returnState?this.mergeMode==null?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Bl(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Bl(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,r){Array.isArray(r)&&(r=r[0]);let o;if(this.returnSequences?this.mergeMode==null?o=[r,r]:o=r:this.mergeMode==null?o=[null,null]:o=null,this.returnState){let s=this.forwardLayer.states.map(a=>null);return Array.isArray(o)?o.concat(s).concat(s):[o].concat(s).concat(s)}else return o}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},r=super.getConfig();return Object.assign(e,r),e}static fromConfig(e,r){let o=Wi(r.layer);if(delete r.layer,r.numConstants!=null)throw new _t("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let i=r;return i.layer=o,new e(i)}}return t.className="Bidirectional",t})();ve.registerClass(ZP);var XP=(()=>{class t extends kt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},r=super.getConfig();return Object.assign(e,r),e}call(e,r){return ne(()=>(e=ft(e),e.dtype!=="float32"&&(e=Si(e,"float32")),fe(L(e,this.scale),this.offset)))}}return t.className="Rescaling",t})();ve.registerClass(XP);var{resizeBilinear:i3e,cropAndResize:s3e}=Ci,YP=(()=>{class t extends kt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,r,o,i,s,a,l,c){return ne(()=>{let u,d=!1,p=r/a,h=o/l,f=(i+r)/a,m=(s+o)/l,g=[p,h,f,m],v=[];e.rank===3?(d=!0,u=Yn([e])):u=e;for(let M=0;M<u.shape[0];M++)v.push(g);let w=Wr(v,[v.length,4]),y=Fl(0,v.length,1,"int32"),k=s3e(u,w,y,[i,s],"nearest");return d?Si(ft(Zr(k)),c):Si(k,c)})}upsize(e,r,o,i){return ne(()=>{let s=i3e(e,[r,o]);return Si(s,i)})}call(e,r){return ne(()=>{let o=ft(e),i=o.dtype,s=o.shape,a=s[s.length-3],l=s[s.length-2],c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),u===0&&(u=1)),c>=0&&u>=0?this.centerCrop(o,c,u,this.height,this.width,a,l,i):this.upsize(e,this.height,this.width,i)})}getConfig(){let e={height:this.height,width:this.width},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){e=Ht(e);let r=e.length-3,o=e.length-2;return e[r]=this.height,e[o]=this.width,e}}return t.className="CenterCrop",t})();ve.registerClass(YP);function QJ(t,n,e,r){let o=ft(t);if(o.dtype!=="int32"&&(o=Si(o,"int32")),n==="int")return o;let i=o.shape;if(o.rank===0&&(o=hr(o,-1)),n==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=hr(o,-1)),o.rank>2)throw new te(`When outputMode is not int, maximum output rank is 2 Received outputMode ${n} and input shape ${i} which would result in output rank ${o.rank}.`);let s=["multiHot","oneHot"].includes(n),a=o,l;if(typeof r<"u"&&n==="count"?l=sv(a,r,e,s):l=sv(a,[],e,s),n!=="tfIdf")return l;if(r)return L(l,r);throw new te("When outputMode is 'tfIdf', weights must be provided.")}var QP=(()=>{class t extends kt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){return e=Ht(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,r){return ne(()=>{e=ft(e),e.dtype!=="int32"&&(e=Si(e,"int32"));let o;if(typeof r.countWeights<"u"){if(this.outputMode!=="count")throw new te(`countWeights is not used when outputMode !== count.
              Received countWeights=${r.countWeights}`);o=ft(r.countWeights)}let i=fo(e),s=_u(e),a=Xn(this.numTokens,i).bufferSync().get(0),l=_i(s,0).bufferSync().get(0);if(!(a&&l))throw new te(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return QJ(e,this.outputMode,this.numTokens,o)})}}return t.className="CategoryEncoding",t})();ve.registerClass(QP);var l3e=["bilinear","nearest"],JJ=new Set(l3e),JP=(()=>{class t extends kt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(JJ.has(e.interpolation))this.interpolation=e.interpolation;else throw new te(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Ht(e);let r=e[2];return[this.height,this.width,r]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},r=super.getConfig();return Object.assign(e,r),e}call(e,r){return ne(()=>{let o=[this.height,this.width];if(this.interpolation==="bilinear")return Ci.resizeBilinear(e,o,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Ci.resizeNearestNeighbor(e,o,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...JJ]} are supported`)})}}return t.className="Resizing",t})();ve.registerClass(JP);var eee=(()=>{class t{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var tee=(()=>{class t extends kt{constructor(e){super(e),this.randomGenerator=new eee(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},r=super.getConfig();return Object.assign(e,r),e}}return t.className="BaseRandomLayer",t})();var c3e=["bilinear","nearest"],nee=new Set(c3e),eB=(()=>{class t extends tee{constructor(e){super(e);let{factor:r,interpolation:o="bilinear"}=e;if(this.factor=r,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new te(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new te(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new te(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(o)if(nee.has(o))this.interpolation=o;else throw new te(`Invalid interpolation parameter: ${o} is not implemented`)}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){e=Ht(e);let r=e[2];return[this.imgHeight,-1,r]}call(e,r){return ne(()=>{let o=ft(e);this.imgHeight=o.shape[o.shape.length-3];let i=o.shape[o.shape.length-2];this.widthFactor=ss([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);let a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Ci.resizeBilinear(e,a);case"nearest":return Ci.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...nee]} are supported`)}})}}return t.className="RandomWidth",t})();ve.registerClass(eB);function u3e(t){return new cf(t)}function d3e(t){return new J8(t)}function p3e(t){return new X8(t)}function h3e(t){return new Y8(t)}function f3e(t){return new Q8(t)}function m3e(t){return new tP(t)}function g3e(t){return new eP(t)}function v3e(t){return new sP(t)}function w3e(t){return new KT(t)}function y3e(t){return new rP(t)}function x3e(t){return new ZT(t)}function _3e(t){return new oP(t)}function k3e(t){return new iP(t)}function b3e(t){return new aP(t)}function C3e(t){return new lP(t)}function S3e(t){return new cP(t)}function M3e(t){return new yP(t)}function T3e(t){return new vP(t)}function D3e(t){return new eD(t)}function E3e(t){return new gP(t)}function I3e(t){return new wP(t)}function N3e(t){return new xP(t)}function A3e(t){return new _P(t)}function R3e(t){return new kP(t)}function O3e(t){return new CP(t)}function F3e(t){return new SP(t)}function P3e(t){return new TP(t)}function B3e(t){return new IP(t)}function L3e(t){return new DP(t)}function $3e(t){return new EP(t)}function V3e(t){return new MP(t)}function j3e(t){return new NP(t)}function z3e(t){return new FP(t)}function H3e(t){return new PP(t)}function U3e(t){return new BP(t)}function tB(t){return new $P(t)}function G3e(t){return tB(t)}function W3e(t){return tB(t)}function nB(t){return new jP(t)}function q3e(t){return nB(t)}function K3e(t){return nB(t)}function rB(t){return new HP(t)}function Z3e(t){return rB(t)}function X3e(t){return rB(t)}function Y3e(t){return new UP(t)}function Q3e(t){return new WP(t)}function ree(t){return new GP(t)}function oee(t){return new qP(t)}function iee(t){return new LP(t)}function see(t){return new VP(t)}function J3e(t){return new zP(t)}function eNe(t){return new hP(t)}function tNe(t){return new YT(t)}function nNe(t){return new fP(t)}function rNe(t){return new Dv(t)}function oNe(t){return new pP(t)}function iNe(t){return new XT(t)}function sNe(t){return new mP(t)}function aNe(t){return new JT(t)}function lNe(t){return new zl(t)}function cNe(t){return new QT(t)}function uNe(t){return new ZP(t)}function dNe(t){return new KP(t)}var pNe=ree,hNe=oee,fNe=iee,mNe=see;function gNe(t){return new AP(t)}function vNe(t){return new RP(t)}function wNe(t){return new OP(t)}function yNe(t){return new bP(t)}function xNe(t){return new XP(t)}function _Ne(t){return new YP(t)}function kNe(t){return new JP(t)}function bNe(t){return new QP(t)}function CNe(t){return new eB(t)}var iB={};Qt(iB,{MAPE:()=>FNe,MSE:()=>LNe,binaryAccuracy:()=>SNe,binaryCrossentropy:()=>MNe,categoricalAccuracy:()=>DNe,categoricalCrossentropy:()=>ENe,cosineProximity:()=>ANe,mape:()=>PNe,meanAbsoluteError:()=>RNe,meanAbsolutePercentageError:()=>ONe,meanSquaredError:()=>BNe,mse:()=>$Ne,precision:()=>INe,r2Score:()=>VNe,recall:()=>NNe,sparseCategoricalAccuracy:()=>TNe});function SNe(t,n){return lk(t,n)}function MNe(t,n){return PT(t,n)}function TNe(t,n){return BT(t,n)}function DNe(t,n){return ck(t,n)}function ENe(t,n){return uk(t,n)}function INe(t,n){return j8(t,n)}function NNe(t,n){return MJ(t,n)}function ANe(t,n){return ak(t,n)}function RNe(t,n){return kv(t,n)}function ONe(t,n){return uf(t,n)}function FNe(t,n){return uf(t,n)}function PNe(t,n){return uf(t,n)}function BNe(t,n){return Nu(t,n)}function LNe(t,n){return Nu(t,n)}function $Ne(t,n){return Nu(t,n)}function VNe(t,n){return TJ(t,n)}var sB={};Qt(sB,{modelFromJSON:()=>zJ});var aB={};Qt(aB,{l1:()=>zNe,l1l2:()=>jNe,l2:()=>HNe});function jNe(t){return new hk(t)}function zNe(t){return KJ(t)}function HNe(t){return ZJ(t)}var wk=class extends Fp{constructor(){super(...arguments),this.model=null}setModel(n){if(!(n instanceof ja))throw new Error("model must be a LayersModel, not some other Container");this.model=n}};function lD(t,n){return t<n}function aee(t,n){return t>n}var yk=class extends wk{constructor(n){if(super(),n==null&&(n={}),n.restoreBestWeights)throw new _t("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=n.monitor||"val_loss",this.minDelta=Math.abs(n.minDelta||0),this.patience=n.patience||0,this.verbose=n.verbose||0,this.mode=n.mode||"auto",this.baseline=n.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=lD:this.mode==="max"?this.monitorFunc=aee:this.monitor.indexOf("acc")!==-1?this.monitorFunc=aee:this.monitorFunc=lD,this.monitorFunc===lD&&(this.minDelta*=-1)}onTrainBegin(n){return z(this,null,function*(){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===lD?1/0:-1/0})}onEpochEnd(n,e){return z(this,null,function*(){yield Iu(e);let r=this.getMonitorValue(e);r!=null&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=n,this.model.stopTraining=!0)))})}onTrainEnd(n){return z(this,null,function*(){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)})}getMonitorValue(n){n==null&&(n={});let e=n[this.monitor];return e==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(n)}`),e}};function UNe(t){return new yk(t)}var lee={earlyStopping:UNe};var GNe=Q();GNe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Ps=function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t}(Ps||{}),cee;(function(t){let n;(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(cee||(cee={}));var lB={};function uee(t,n){let e={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:n};lB[t]=e}function cD(t){return lB[t]}function dee(t){delete lB[t]}function C(t,n,e,r,o){let i=n.inputParams[t];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?n.inputNames.length+a:a;if(i.type==="tensor")return Qr(n.inputNames[c],e,r,o);if(i.type==="tensors"){let p=n.inputs.slice(a,l);return n.inputNames.slice(a,l).filter((f,m)=>{var g;return((g=p[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(f=>Qr(f,e,r,o))}let u=Qr(n.inputNames[c],e,r,o),d=u.dataSync();return i.type==="number"?d[0]:x.toNestedArray(u.shape,d)}let s=n.attrParams[t];return s&&s.value}function Qr(t,n,e,r){let[o,i]=qi(t,e);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=e.currentContextIds.find(a=>!!n[uD(o,a)]);return s!==void 0?n[uD(o,s)][i]:void 0}function cB(t,n,e){return n[uD(t,e.currentContextId)]}function Hl(t,n){let[e,r,o]=qi(t,n);return[uD(e,n&&n.currentContextId),r,o]}function uD(t,n){return n?`${t}-${n}`:t}function qi(t,n){if(t==="")return["",0,void 0];let e=n!=null&&n.parseNodeNameCache!=null;if(e){let i=n.parseNodeNameCache.get(t);if(i!=null)return i}let r=t.split(":"),o;if(r.length===1)o=[t,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return e&&n.parseNodeNameCache.set(t,o),o}function xk(t,n,e){let r=C("pad",t,n,e);if(r==="explicit"){r=C("explicitPaddings",t,n,e);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Ul(t){return t.kept?t:xi(t)}var uB={};Qt(uB,{json:()=>qNe});var qNe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var dB={};Qt(dB,{json:()=>KNe});var KNe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var pB={};Qt(pB,{json:()=>ZNe});var ZNe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var hB={};Qt(hB,{json:()=>XNe});var XNe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var fB={};Qt(fB,{json:()=>YNe});var YNe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var mB={};Qt(mB,{json:()=>QNe});var QNe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var gB={};Qt(gB,{json:()=>JNe});var JNe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var vB={};Qt(vB,{json:()=>eAe});var eAe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var wB={};Qt(wB,{json:()=>tAe});var tAe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var yB={};Qt(yB,{json:()=>nAe});var nAe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var xB={};Qt(xB,{json:()=>rAe});var rAe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var _B={};Qt(_B,{json:()=>oAe});var oAe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var kB={};Qt(kB,{json:()=>iAe});var iAe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var bB={};Qt(bB,{json:()=>sAe});var sAe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var CB={};Qt(CB,{json:()=>aAe});var aAe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var SB={};Qt(SB,{json:()=>lAe});var lAe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var MB={};Qt(MB,{json:()=>cAe});var cAe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var TB={};Qt(TB,{json:()=>uAe});var uAe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var DB={};Qt(DB,{json:()=>dAe});var dAe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var _k=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let n=[uB,dB,pB,hB,fB,mB,gB,vB,wB,yB,xB,_B,kB,bB,CB,SB,MB,TB,DB],e=[].concat(...n.map(r=>r.json));this.opMappers=e.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(n,e={}){let r=n.node,o=[],i=[],s=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?o.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&s.push(m[g.name]),m),{}),l=[],c=[],u={},d={};e!=null&&(u=this.mapSignatureEntries(e.inputs),d=this.mapSignatureEntries(e.outputs));let p=Object.keys(a);p.forEach(m=>{let g=a[m];g.inputNames.forEach((v,w)=>{let[y,,_]=Hl(v),k=a[y];if(k.outputs!=null){let M=k.outputs.indexOf(_);if(M!==-1){let E=`${y}:${M}`;g.inputNames[w]=E}}g.inputs.push(k),k.children.push(g)})}),Object.keys(d).length===0?p.forEach(m=>{let g=a[m];g.children.length===0&&c.push(g)}):Object.keys(d).forEach(m=>{let[g]=Hl(m),v=a[g];v!=null&&(v.signatureKey=d[m],c.push(v))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{let[g]=Hl(m),v=a[g];v&&(v.signatureKey=u[m],l.push(v))}):l=o;let h={};n.library!=null&&n.library.function!=null&&(h=n.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));let f={nodes:a,inputs:l,outputs:c,weights:i,placeholders:o,signature:e,functions:h};return s.length>0&&(f.initNodes=s),f}mapSignatureEntries(n){return Object.keys(n||{}).reduce((e,r)=>(e[n[r].name]=r,e),{})}mapNode(n){let e=cD(n.op)||this.opMappers[n.op]||{};n.attr==null&&(n.attr={});let r={name:n.name,op:n.op,category:e.category,inputNames:(n.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:n.attr,outputs:e.outputs};return e.inputs!=null&&(r.inputParams=e.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),e.attrs!=null&&(r.attrParams=e.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=dD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=dD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=wD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=wD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=hD(n.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=hD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=vD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=vD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=pD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=pD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=xD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=xD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=gD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=gD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=yD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=yD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=fD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=fD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=mD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=mD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=pee(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=pee(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${n.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(n){let e=n.nodeDef,r=[],o=[],i={};e!=null&&(i=e.reduce((d,p)=>(d[p.name]=this.mapNode(p),p.op==="Const"&&o.push(d[p.name]),d),{}));let s=[],a=[];n.signature.inputArg.forEach(d=>{let[p]=Hl(d.name),h={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:EB(d.type),type:"dtype"}},children:[]};h.signatureKey=d.name,s.push(h),i[p]=h}),Object.keys(i).forEach(d=>{let p=i[d];p.inputNames.forEach((h,f)=>{let[m,,g]=Hl(h),v=i[m];if(v.outputs!=null){let w=v.outputs.indexOf(g);if(w!==-1){let y=`${m}:${w}`;p.inputNames[f]=y}}p.inputs.push(v),v.children.push(p)})});let c=n.ret;n.signature.outputArg.forEach(d=>{let[p,h]=Hl(c[d.name]),f=i[p];f!=null&&(f.defaultOutput=h,a.push(f))});let u=this.mapArgsToSignature(n);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:u}}mapArgsToSignature(n){return{methodName:n.signature.name,inputs:n.signature.inputArg.reduce((e,r)=>(e[r.name]=this.mapArgToTensorInfo(r),e),{}),outputs:n.signature.outputArg.reduce((e,r)=>(e[r.name]=this.mapArgToTensorInfo(r,n.ret),e),{})}}mapArgToTensorInfo(n,e){let r=n.name;return e!=null&&(r=e[r]),{name:r,dtype:n.type}}};function pAe(t){let n=Q().global;if(typeof n.atob<"u")return n.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function hee(t,n){let e=Array.isArray(t)?String.fromCharCode.apply(null,t):pAe(t);return n?e:e.toLowerCase()}function dD(t,n,e,r=!1){let o=t[n];return o!=null?hee(o.s,r):e}function pD(t,n,e){let r=t[n];return r?r.b:e}function hD(t,n,e){let r=t[n]||{},o=r.i!=null?r.i:r.f!=null?r.f:e;return typeof o=="number"?o:parseInt(o,10)}function EB(t){switch(typeof t=="string"&&(t=Ps[t]),t){case Ps.DT_FLOAT:case Ps.DT_HALF:return"float32";case Ps.DT_INT32:case Ps.DT_INT64:case Ps.DT_INT8:case Ps.DT_UINT8:return"int32";case Ps.DT_BOOL:return"bool";case Ps.DT_DOUBLE:return"float32";case Ps.DT_STRING:return"string";case Ps.DT_COMPLEX64:case Ps.DT_COMPLEX128:return"complex64";default:return null}}function pee(t,n,e){let r=t[n];return r&&r.func?r.func.name:e}function fD(t,n,e){let r=t[n];return r&&r.type?EB(r.type):e}function mD(t,n,e){let r=t[n];return r&&r.list&&r.list.type?r.list.type.map(o=>EB(o)):e}function fee(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(n=>typeof n.size=="number"?n.size:parseInt(n.size,10)):[]}function gD(t,n,e){let r=t[n];return r&&r.shape?fee(r.shape):e}function vD(t,n,e){let r=t[n];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):e}function wD(t,n,e,r=!1){let o=t[n];return o&&o.list&&o.list.s?o.list.s.map(i=>hee(i,r)):e}function yD(t,n,e){let r=t[n];return r&&r.list&&r.list.shape?r.list.shape.map(o=>fee(o)):e}function xD(t,n,e){let r=t[n];return r&&r.list&&r.list.b?r.list.b:e}var _D=class{constructor(n,e,r){this.node=n,this.tensorMap=e,this.context=r,this.inputs=[],this.attrs={},this.inputs=n.inputNames.map(o=>this.getInput(o)),n.rawAttrs!=null&&(this.attrs=Object.keys(n.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(n){return Qr(n,this.tensorMap,this.context)}getAttr(n,e){let r=this.node.rawAttrs[n];if(r.tensor!=null)return Qr(n,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return hD(this.node.rawAttrs,n,e);if(r.s!=null)return dD(this.node.rawAttrs,n,e);if(r.b!=null)return pD(this.node.rawAttrs,n,e);if(r.shape!=null)return gD(this.node.rawAttrs,n,e);if(r.type!=null)return fD(this.node.rawAttrs,n,e);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return vD(this.node.rawAttrs,n,e);if(r.list.s!=null)return wD(this.node.rawAttrs,n,e);if(r.list.shape!=null)return yD(this.node.rawAttrs,n,e);if(r.list.b!=null)return xD(this.node.rawAttrs,n,e);if(r.list.type!=null)return mD(this.node.rawAttrs,n,e)}return e}};var yn={};Qt(yn,{OP_SCOPE_SUFFIX:()=>EM,abs:()=>jn,acos:()=>Zx,acosh:()=>Xx,add:()=>fe,addN:()=>YF,all:()=>u0,any:()=>qh,argMax:()=>Tl,argMin:()=>Yx,asin:()=>Qx,asinh:()=>Jx,atan:()=>e_,atan2:()=>t_,atanh:()=>n_,avgPool:()=>fp,avgPool3d:()=>i_,basicLSTMCell:()=>t6,batchNorm:()=>Dl,batchNorm2d:()=>s_,batchNorm3d:()=>a_,batchNorm4d:()=>l_,batchToSpaceND:()=>mp,bincount:()=>c_,bitwiseAnd:()=>n6,booleanMaskAsync:()=>DZ,broadcastArgs:()=>r6,broadcastTo:()=>El,buffer:()=>st,cast:()=>ge,ceil:()=>u_,clipByValue:()=>ho,clone:()=>xi,complex:()=>Pi,concat:()=>gn,concat1d:()=>d_,concat2d:()=>p_,concat3d:()=>h_,concat4d:()=>f_,conv1d:()=>p0,conv2d:()=>Li,conv2dTranspose:()=>h0,conv3d:()=>m_,conv3dTranspose:()=>g_,cos:()=>gp,cosh:()=>f0,cosineWindow:()=>uv,cumprod:()=>Kh,cumsum:()=>m0,denseBincount:()=>sv,depthToSpace:()=>v_,depthwiseConv2d:()=>Il,diag:()=>o6,dilation2d:()=>w_,div:()=>$e,divNoNan:()=>y_,dot:()=>x_,dropout:()=>UM,einsum:()=>vp,elu:()=>Nl,enclosingPowerOfTwo:()=>GM,ensureShape:()=>i6,equal:()=>Mo,erf:()=>g0,euclideanNorm:()=>k_,exp:()=>pr,expandDims:()=>hr,expm1:()=>b_,eye:()=>Zh,fft:()=>Tp,fill:()=>ia,floor:()=>Al,floorDiv:()=>c0,fused:()=>Ep,gather:()=>Rl,gatherND:()=>RZ,greater:()=>Xn,greaterEqual:()=>_i,ifft:()=>Su,imag:()=>wp,image:()=>Ci,inTopKAsync:()=>FZ,irfft:()=>I0,isFinite:()=>C_,isInf:()=>S_,isNaN:()=>M_,leakyRelu:()=>yp,less:()=>bu,lessEqual:()=>is,linalg:()=>tT,linspace:()=>u6,localResponseNormalization:()=>T_,log:()=>mo,log1p:()=>xp,logSigmoid:()=>E_,logSoftmax:()=>v0,logSumExp:()=>_p,logicalAnd:()=>Do,logicalNot:()=>kp,logicalOr:()=>w0,logicalXor:()=>I_,losses:()=>CX,lowerBound:()=>d6,matMul:()=>Bt,max:()=>fo,maxPool:()=>bp,maxPool3d:()=>N_,maxPoolWithArgmax:()=>p6,maximum:()=>$i,mean:()=>Pn,meshgrid:()=>h6,min:()=>_u,minimum:()=>Fs,mirrorPad:()=>A_,mod:()=>R_,moments:()=>Xh,movingAverage:()=>EZ,mul:()=>L,multiRNNCell:()=>f6,multinomial:()=>m6,neg:()=>Kt,norm:()=>ku,notEqual:()=>Na,oneHot:()=>Ol,ones:()=>Dr,onesLike:()=>io,op:()=>D,outerProduct:()=>g6,pad:()=>bi,pad1d:()=>v6,pad2d:()=>w6,pad3d:()=>y6,pad4d:()=>x6,pool:()=>O_,pow:()=>Ko,prelu:()=>Sp,print:()=>Kx,prod:()=>F_,raggedGather:()=>_6,raggedRange:()=>k6,raggedTensorToTensor:()=>b6,rand:()=>C6,randomGamma:()=>F6,randomNormal:()=>Yh,randomStandardNormal:()=>P6,randomUniform:()=>ss,randomUniformInt:()=>B6,range:()=>Fl,real:()=>Cu,reciprocal:()=>B_,relu:()=>Eo,relu6:()=>_0,reshape:()=>$,reverse:()=>qr,reverse1d:()=>L6,reverse2d:()=>$6,reverse3d:()=>V6,reverse4d:()=>j6,rfft:()=>Dp,round:()=>k0,rsqrt:()=>b0,scalar:()=>ze,scatterND:()=>IZ,searchSorted:()=>av,selu:()=>C0,separableConv2d:()=>S0,setdiff1dAsync:()=>z6,sigmoid:()=>ui,sign:()=>L_,signal:()=>bX,sin:()=>M0,sinh:()=>T0,slice:()=>Nt,slice1d:()=>D0,slice2d:()=>lv,slice3d:()=>E0,slice4d:()=>Qh,softmax:()=>Mp,softplus:()=>Ia,spaceToBatchND:()=>Cp,sparse:()=>SX,sparseToDense:()=>AZ,spectral:()=>kX,split:()=>Kr,sqrt:()=>En,square:()=>zt,squaredDifference:()=>N0,squeeze:()=>as,stack:()=>Yn,step:()=>sa,stridedSlice:()=>$_,string:()=>MX,sub:()=>Pe,sum:()=>He,tan:()=>V_,tanh:()=>Da,tensor:()=>Wr,tensor1d:()=>Qn,tensor2d:()=>Aa,tensor3d:()=>j_,tensor4d:()=>H6,tensor5d:()=>U6,tensor6d:()=>G6,tensorScatterUpdate:()=>q6,tile:()=>To,topk:()=>H_,transpose:()=>Lt,truncatedNormal:()=>A0,unique:()=>U_,unsortedSegmentSum:()=>R0,unstack:()=>Zr,upperBound:()=>K6,variable:()=>G_,where:()=>Nn,whereAsync:()=>W_,zeros:()=>Bn,zerosLike:()=>dt});var mee=(t,n,e,r=yn)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(C("a",t,n,e),C("b",t,n,e))];case"AddN":return[r.addN(C("tensors",t,n,e))];case"FloorMod":case"Mod":return[r.mod(C("a",t,n,e),C("b",t,n,e))];case"Mul":return[r.mul(C("a",t,n,e),C("b",t,n,e))];case"RealDiv":case"Div":return[r.div(C("a",t,n,e),C("b",t,n,e))];case"DivNoNan":return[r.divNoNan(C("a",t,n,e),C("b",t,n,e))];case"FloorDiv":return[r.floorDiv(C("a",t,n,e),C("b",t,n,e))];case"Sub":return[r.sub(C("a",t,n,e),C("b",t,n,e))];case"Minimum":return[r.minimum(C("a",t,n,e),C("b",t,n,e))];case"Maximum":return[r.maximum(C("a",t,n,e),C("b",t,n,e))];case"Pow":return[r.pow(C("a",t,n,e),C("b",t,n,e))];case"SquaredDifference":return[r.squaredDifference(C("a",t,n,e),C("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var gee=(t,n,e,r=yn)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(C("x",t,n,e))];case"Acos":return[r.acos(C("x",t,n,e))];case"Acosh":return[r.acosh(C("x",t,n,e))];case"Asin":return[r.asin(C("x",t,n,e))];case"Asinh":return[r.asinh(C("x",t,n,e))];case"Atan":return[r.atan(C("x",t,n,e))];case"Atan2":return[r.atan2(C("x",t,n,e),C("y",t,n,e))];case"Atanh":return[r.atanh(C("x",t,n,e))];case"Ceil":return[r.ceil(C("x",t,n,e))];case"Complex":return[r.complex(C("real",t,n,e),C("imag",t,n,e))];case"Cos":return[r.cos(C("x",t,n,e))];case"Cosh":return[r.cosh(C("x",t,n,e))];case"Elu":return[r.elu(C("x",t,n,e))];case"Erf":return[r.erf(C("x",t,n,e))];case"Exp":return[r.exp(C("x",t,n,e))];case"Expm1":return[r.expm1(C("x",t,n,e))];case"Floor":return[r.floor(C("x",t,n,e))];case"Log":return[r.log(C("x",t,n,e))];case"Log1p":return[r.log1p(C("x",t,n,e))];case"Imag":return[r.imag(C("x",t,n,e))];case"Neg":return[r.neg(C("x",t,n,e))];case"Reciprocal":return[r.reciprocal(C("x",t,n,e))];case"Real":return[r.real(C("x",t,n,e))];case"Relu":return[r.relu(C("x",t,n,e))];case"Round":return[r.round(C("x",t,n,e))];case"Selu":return[r.selu(C("x",t,n,e))];case"Sigmoid":return[r.sigmoid(C("x",t,n,e))];case"Sin":return[r.sin(C("x",t,n,e))];case"Sign":return[r.sign(C("x",t,n,e))];case"Sinh":return[r.sinh(C("x",t,n,e))];case"Softplus":return[r.softplus(C("x",t,n,e))];case"Sqrt":return[r.sqrt(C("x",t,n,e))];case"Square":return[r.square(C("x",t,n,e))];case"Tanh":return[r.tanh(C("x",t,n,e))];case"Tan":return[r.tan(C("x",t,n,e))];case"ClipByValue":return[r.clipByValue(C("x",t,n,e),C("clipValueMin",t,n,e),C("clipValueMax",t,n,e))];case"Relu6":return[r.relu6(C("x",t,n,e))];case"Rsqrt":return[r.rsqrt(Qr(t.inputNames[0],n,e))];case"LeakyRelu":return[r.leakyRelu(C("x",t,n,e),C("alpha",t,n,e))];case"Prelu":return[r.prelu(C("x",t,n,e),C("alpha",t,n,e))];case"IsNan":return[r.isNaN(Qr(t.inputNames[0],n,e))];case"IsInf":return[r.isInf(Qr(t.inputNames[0],n,e))];case"IsFinite":return[r.isFinite(Qr(t.inputNames[0],n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function Bs(t,n,e=""){if(!(typeof t=="number"||typeof n=="number")){x.assert(t.length===n.length,()=>e+` Shapes ${t} and ${n} must match`);for(let r=0;r<t.length;r++){let o=t[r],i=n[r];x.assert(o<0||i<0||o===i,()=>e+` Shapes ${t} and ${n} must match`)}}}function vee(t){return!(typeof t=="number"||t.some(n=>n<0))}function Ev(t,n,e){let r=kD(t,e),o=!vee(r);if(o&&n.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&n.forEach(i=>{r=kD(i.shape,r)}),!vee(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function kD(t,n){if(typeof t=="number")return n;if(typeof n=="number")return t;if(t.length!==n.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${n}`);let e=[];for(let r=0;r<t.length;++r){let o=t[r],i=n[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${n}`);e[r]=o>=0?o:i}return e}var bD=class{constructor(n,e,r,o,i,s,a){this.name=n,this.dtype=e,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=ze(0),Wn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(n){this.tensors.forEach(e=>{(n==null||!n.has(e.tensor.id))&&e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||n>=this.size())throw new Error(`Tried to read from index ${n}, but array size is: ${this.size()}`);let e=this.tensors[n];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${n} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(n){return n.map(e=>this.read(e))}write(n,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||!this.dynamicSize&&n>=this.maxSize)throw new Error(`Tried to write to index ${n}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[n]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n},
          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=e.shape),Bs(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${n}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been written.`);r.tensor=e,Wn(e),r.written=!0,this.tensors[n]=r}writeMany(n,e){if(n.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${n.length} is not the same as tensors size: ${e.length}.`);n.forEach((r,o)=>this.write(r,e[o]))}gather(n,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(n)n=n.slice(0,this.size());else{n=[];for(let o=0;o<this.size();o++)n.push(o)}if(n.length===0)return Wr([],[0].concat(this.elementShape));let r=this.readMany(n);return Bs(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Yn(r,0)}concat(n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${n}`);if(this.size()===0)return Wr([],[0].concat(this.elementShape));let e=[];for(let o=0;o<this.size();o++)e.push(o);let r=this.readMany(e);return Bs(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),gn(r,0)}scatter(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(n.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${e.shape[0]}`);let r=Math.max(...n);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(n,Zr(e,0))}split(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let r=0,o=n.map(l=>(r+=l,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&n.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${n.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:e.size/r,s=[];ne(()=>{e=$(e,[1,r,i]);for(let l=0;l<n.length;++l){let u=[0,l===0?0:o[l-1],0],d=[1,n[l],i];s[l]=$(Nt(e,u,d),this.elementShape)}return s});let a=[];for(let l=0;l<n.length;l++)a[l]=l;this.writeMany(a,s)}};var Iv=class t{get id(){return this.idTensor.id}constructor(n,e,r,o=-1){this.tensors=n,this.elementShape=e,this.elementDtype=r,n?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Bs(e,i.shape,"TensorList shape mismatch: "),Wn(i)}),this.idTensor=ze(0),this.maxNumElements=o,Wn(this.idTensor)}copy(){return new t([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(n){this.tensors.forEach(e=>{(n==null||!n.has(e.id))&&e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(n,e,r=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Bs(n,this.elementShape,"TensorList shape mismatch: ");let o=Ev(this.elementShape,this.tensors,n);return ne(()=>{let i=this.tensors.map(s=>$(s,o));return Yn(i,0)})}popBack(n,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Ev(this.elementShape,this.tensors,n),o=this.tensors.pop();return o.kept=!1,Bs(o.shape,n,"TensorList shape mismatch: "),$(o,r)}pushBack(n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(Bs(n.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Wn(n),this.tensors.push(n)}resize(n){if(n<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${n}`);if(this.maxNumElements!==-1&&n>this.maxNumElements)throw new Error(`TensorListResize input size ${n} is greater maxNumElement ${this.maxNumElements}.`);let e=new t([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=n;for(let r=0;r<Math.min(this.tensors.length,n);++r)e.tensors[r]=this.tensors[r];return e}getItem(n,e,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(n<0||n>this.tensors.length)throw new Error(`Trying to access element ${n} in a list with ${this.tensors.length} elements.`);if(this.tensors[n]==null)throw new Error(`element at index ${n} is null.`);Bs(this.tensors[n].shape,e,"TensorList shape mismatch: ");let o=Ev(this.elementShape,this.tensors,e);return $(this.tensors[n],o)}setItem(n,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(n<0||this.maxNumElements!==-1&&n>=this.maxNumElements)throw new Error(`Trying to set element ${n} in a list with max ${this.maxNumElements} elements.`);Bs(this.elementShape,e.shape,"TensorList shape mismatch: "),Wn(e),this.tensors[n]!=null&&(this.tensors[n].kept=!1),this.tensors[n]=e}gather(n,e,r){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);Bs(this.elementShape,r,"TensorList shape mismatch: "),n=n.slice(0,this.size());let o=Ev(this.elementShape,this.tensors,r);return n.length===0?Wr([],[0].concat(o)):ne(()=>{let i=n.map(s=>$(this.tensors[s],o));return Yn(i,0)})}concat(n,e){if(n&&n!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${n}`);Bs(this.elementShape,e,"TensorList shape mismatch: ");let r=Ev(this.elementShape,this.tensors,e);return this.size()===0?Wr([],[0].concat(r)):ne(()=>{let o=this.tensors.map(i=>$(i,r));return gn(o,0)})}};function wee(t,n,e){let r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==e)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${e}`);let o=t.shape.slice(1);Bs(o,n,"TensorList shape mismatch: ");let i=Zr(t);return new Iv(i,n,r)}function yee(t,n,e,r){return new Iv([],t,n,r)}function xee(t,n,e,r){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);let o=Math.max(...n);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new Iv([],e,t.dtype,r),s=Zr(t,0);return n.forEach((a,l)=>{i.setItem(a,s[l])}),i}function _ee(t,n,e){let r=0,o=n.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);let i=t.shape.slice(1),s=kD(i,e),a=r===0?0:t.size/r,l=ne(()=>{let u=[];t=$(t,[1,r,a]);for(let d=0;d<n.length;++d){let h=[0,d===0?0:o[d-1],0],f=[1,n[d],a];u[d]=$(Nt(t,h,f),s)}return t.dispose(),u}),c=new Iv([],e,t.dtype,n.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}var kee=(t,n,e)=>z(void 0,null,function*(){switch(t.op){case"If":case"StatelessIf":{let r=C("thenBranch",t,n,e),o=C("elseBranch",t,n,e),i=C("cond",t,n,e),s=C("args",t,n,e);return(yield i.data())[0]?e.functionMap[r].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap):e.functionMap[o].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap)}case"While":case"StatelessWhile":{let r=C("body",t,n,e),o=C("cond",t,n,e),i=C("args",t,n,e),s=yield e.functionMap[o].executeFunctionAsync(i,e.tensorArrayMap,e.tensorListMap),a=i.map(u=>u.id),l=yield s[0].data();s.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){let u=c;c=yield e.functionMap[r].executeFunctionAsync(c,e.tensorArrayMap,e.tensorListMap);let d=c.map(h=>h.id);u.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()});let p=yield e.functionMap[o].executeFunctionAsync(c,e.tensorArrayMap,e.tensorListMap);l=yield p[0].data(),p.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()})}return c}case"LoopCond":{let r=C("pred",t,n,e);return[Ul(r)]}case"Switch":{let r=C("pred",t,n,e),o=C("data",t,n,e);return o.kept||(o=Ul(o)),(yield r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=t.inputNames.find(o=>Qr(o,n,e)!==void 0);if(r){let o=Qr(r,n,e);return[Ul(o)]}return}case"Enter":{let r=C("frameName",t,n,e),o=C("tensor",t,n,e);return e.enterFrame(r),[Ul(o)]}case"Exit":{let r=C("tensor",t,n,e);return e.exitFrame(),[Ul(r)]}case"NextIteration":{let r=C("tensor",t,n,e);return e.nextIteration(),[Ul(r)]}case"TensorArrayV3":{let r=C("size",t,n,e),o=C("dtype",t,n,e),i=C("elementShape",t,n,e),s=C("dynamicSize",t,n,e),a=C("clearAfterRead",t,n,e),l=C("identicalElementShapes",t,n,e),c=C("name",t,n,e),u=new bD(c,o,r,i,l,s,a);return e.addTensorArray(u),[u.idTensor,ze(1)]}case"TensorArrayWriteV3":{let r=C("tensorArrayId",t,n,e),o=C("index",t,n,e),i=C("tensor",t,n,e),s=e.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=C("tensorArrayId",t,n,e),o=C("index",t,n,e);return[e.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=C("tensorArrayId",t,n,e),o=C("indices",t,n,e),i=C("dtype",t,n,e);return[e.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=C("tensorArrayId",t,n,e),o=C("indices",t,n,e),i=C("tensor",t,n,e),s=e.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id),i=C("dtype",t,n,e);return[o.concat(i)]}case"TensorArraySplitV3":{let r=C("tensorArrayId",t,n,e),o=C("tensor",t,n,e),i=C("lengths",t,n,e),s=e.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id);return[ze(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=C("tensorListId",t,n,e),o=C("index",t,n,e),i=C("tensor",t,n,e),s=e.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=C("tensorListId",t,n,e),o=C("index",t,n,e),i=C("elementShape",t,n,e),s=C("elementDType",t,n,e);return[e.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=C("indices",t,n,e),o=C("tensor",t,n,e),i=C("elementShape",t,n,e),s=C("numElements",t,n,e),a=xee(o,r,i,s);return e.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=C("elementShape",t,n,e),o=C("elementDType",t,n,e),i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=C(i,t,n,e),a=t.op==="TensorListReserve"?-1:s,l=yee(r,o,s,a);return e.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=C("tensorListId",t,n,e),o=C("indices",t,n,e),i=C("elementShape",t,n,e),s=C("elementDType",t,n,e);return[e.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=C("tensorListId",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e),s=C("numElements",t,n,e);return[e.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=C("tensor",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e),s=wee(r,o,i);return e.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=C("tensorListId",t,n,e),o=e.getTensorList(r.id),i=C("dtype",t,n,e),s=C("elementShape",t,n,e);return[o.concat(i,s)]}case"TensorListPushBack":{let r=C("tensorListId",t,n,e),o=C("tensor",t,n,e),i=e.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=C("tensorListId",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e);return[e.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=C("tensor",t,n,e),o=C("elementShape",t,n,e),i=C("lengths",t,n,e),s=_ee(r,i,o);return e.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=C("tensorListId",t,n,e),o=e.getTensorList(r.id);return[ze(o.size(),"int32")]}case"TensorListResize":{let r=C("tensorListId",t,n,e),o=C("size",t,n,e),s=e.getTensorList(r.id).resize(o);return e.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}});function bee(t,n,e){let[r,o]=C("fusedOps",t,n,e),i=r==="biasadd",s=!i,a=o==="prelu",l=r==="fusedbatchnorm",c=C("numArgs",t,n,e);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=C("strides",t,n,e),d=xk(t,n,e),p=C("dataFormat",t,n,e).toUpperCase(),h=C("dilations",t,n,e),[f,m]=C("args",t,n,e);s&&(m=f,f=void 0);let g=C("leakyreluAlpha",t,n,e);return{stride:u,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:m,activationFunc:o,leakyreluAlpha:g}}var Cee=(t,n,e,r=yn)=>{switch(t.op){case"Conv1D":{let o=C("stride",t,n,e),i=C("pad",t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilation",t,n,e);return[r.conv1d(C("x",t,n,e),C("filter",t,n,e),o,i,s,a)]}case"Conv2D":{let o=C("strides",t,n,e),i=xk(t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilations",t,n,e);return[r.conv2d(C("x",t,n,e),C("filter",t,n,e),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=bee(t,n,e);return[r.fused.conv2d({x:C("x",t,n,e),filter:C("filter",t,n,e),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=bee(t,n,e);return[r.fused.depthwiseConv2d({x:C("x",t,n,e),filter:C("filter",t,n,e),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=C("outputShape",t,n,e),i=C("strides",t,n,e),s=xk(t,n,e);return[r.conv2dTranspose(C("x",t,n,e),C("filter",t,n,e),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=C("strides",t,n,e),i=xk(t,n,e),s=C("dilations",t,n,e),a=C("dataFormat",t,n,e).toUpperCase();return[r.depthwiseConv2d(C("input",t,n,e),C("filter",t,n,e),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilations",t,n,e);return[r.conv3d(C("x",t,n,e),C("filter",t,n,e),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.avgPool(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.maxPool(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e),a=C("includeBatchInIndex",t,n,e),{result:l,indexes:c}=r.maxPoolWithArgmax(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i,a);return[l,c]}case"AvgPool3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.avgPool3d(C("x",t,n,e),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.maxPool3d(C("x",t,n,e),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("dilations",t,n,e),a=o[1],l=o[2],c=s[1],u=s[2];return[r.dilation2d(C("x",t,n,e),C("filter",t,n,e),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var See=(t,n,e,r=yn)=>{switch(t.op){case"Fill":{let o=C("shape",t,n,e),i=C("dtype",t,n,e),s=C("value",t,n,e);return[r.fill(o,s,i)]}case"LinSpace":{let o=C("start",t,n,e),i=C("stop",t,n,e),s=C("num",t,n,e);return[r.linspace(o,i,s)]}case"Multinomial":{let o=C("logits",t,n,e),i=C("numSamples",t,n,e),s=C("seed",t,n,e);return[r.multinomial(o,i,s)]}case"OneHot":{let o=C("indices",t,n,e),i=C("depth",t,n,e),s=C("onValue",t,n,e),a=C("offValue",t,n,e),l=C("dtype",t,n,e);return[r.oneHot(o,i,s,a,l)]}case"Ones":return[r.ones(C("shape",t,n,e),C("dtype",t,n,e))];case"OnesLike":return[r.onesLike(C("x",t,n,e))];case"RandomStandardNormal":return[r.randomStandardNormal(C("shape",t,n,e),C("dtype",t,n,e),C("seed",t,n,e))];case"RandomUniform":return[r.randomUniform(C("shape",t,n,e),C("minval",t,n,e),C("maxval",t,n,e),C("dtype",t,n,e))];case"RandomUniformInt":return[r.randomUniformInt(C("shape",t,n,e),C("minval",t,n,e),C("maxval",t,n,e),C("seed",t,n,e))];case"Range":{let o=C("start",t,n,e),i=C("stop",t,n,e),s=C("step",t,n,e);return[r.range(o,i,s,C("dtype",t,n,e))]}case"TruncatedNormal":{let o=C("shape",t,n,e),i=C("mean",t,n,e),s=C("stdDev",t,n,e),a=C("seed",t,n,e);return[r.truncatedNormal(o,i,s,C("dtype",t,n,e),a)]}case"Zeros":return[r.zeros(C("shape",t,n,e),C("dtype",t,n,e))];case"ZerosLike":return[r.zerosLike(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function IB(t,n,e){let r=C("boxes",t,n,e),o=C("scores",t,n,e),i=C("maxOutputSize",t,n,e),s=C("iouThreshold",t,n,e),a=C("scoreThreshold",t,n,e),l=C("softNmsSigma",t,n,e);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:l}}var Mee=(i,s,a,l,...c)=>z(void 0,[i,s,a,l,...c],function*(t,n,e,r,o=yn){switch(t.op){case"NonMaxSuppressionV5":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f,softNmsSigma:m}=IB(t,n,e),g=yield o.image.nonMaxSuppressionWithScoreAsync(u,d,p,h,f,m);return[g.selectedIndices,g.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f}=IB(t,n,e),m=C("padToMaxOutputSize",t,n,e),g=yield o.image.nonMaxSuppressionPaddedAsync(u,d,p,h,f,m);return[g.selectedIndices,g.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f}=IB(t,n,e);return[yield o.image.nonMaxSuppressionAsync(u,d,p,h,f)]}case"Where":{let u=o.cast(C("condition",t,n,e),"bool"),d=[yield o.whereAsync(u)];return u.dispose(),d}case"ListDiff":return o.setdiff1dAsync(C("x",t,n,e),C("y",t,n,e));default:throw TypeError(`Node type ${t.op} is not implemented`)}});var Tee=(t,n,e,r=yn)=>{switch(t.op){case"LowerBound":{let o=C("sortedSequence",t,n,e),i=C("values",t,n,e);return[r.lowerBound(o,i)]}case"TopKV2":{let o=C("x",t,n,e),i=C("k",t,n,e),s=C("sorted",t,n,e),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=C("sortedSequence",t,n,e),i=C("values",t,n,e);return[r.upperBound(o,i)]}case"Unique":{let o=C("x",t,n,e),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=C("x",t,n,e),i=C("axis",t,n,e),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Dee=(t,n,e,r=yn)=>{switch(t.op){case"Const":return n[t.name];case"PlaceholderWithDefault":let o=C("default",t,n,e);return[Qr(t.name,n,e)||o];case"Placeholder":return[Qr(t.name,n,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=C("x",t,n,e);return[Ul(u)]}case"IdentityN":return C("x",t,n,e).map(u=>Ul(u));case"Snapshot":let i=C("x",t,n,e);return[Ul(i)];case"Shape":return[r.tensor1d(C("x",t,n,e).shape,"int32")];case"ShapeN":return C("x",t,n,e).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(C("x",t,n,e).size,"int32")];case"Rank":return[r.scalar(C("x",t,n,e).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=C("x",t,n,e),a=C("data",t,n,e),l=C("message",t,n,e),c=C("summarize",t,n,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var CD=class{get id(){return this.handle.id}constructor(n,e){this.keyDType=n,this.valueDType=e,this.handle=ze(0),this.tensorMap=new Map,Wn(this.handle)}clearAndClose(){this.tensorMap.forEach(n=>n.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ze(this.size(),"int32")}import(n,e){return z(this,null,function*(){this.checkKeyAndValueTensor(n,e);let r=yield n.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),ne(()=>{let o=Zr(e),i=r.length,s=o.length;x.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let l=r[a],c=o[a];Wn(c),this.tensorMap.set(l,c)}return this.handle})})}find(n,e){return z(this,null,function*(){this.checkKeyAndValueTensor(n,e);let r=yield n.data();return ne(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,e);o.push(a)}return Yn(o)})})}findWithDefault(n,e){let r=this.tensorMap.get(n);return r??e}checkKeyAndValueTensor(n,e){if(n.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${n.dtype}`);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${e.dtype}`)}};var Eee=(t,n,e,r)=>z(void 0,null,function*(){switch(t.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(t.name);if(o!=null)return[o];{let i=C("keyDType",t,n,e),s=C("valueDType",t,n,e),a=new CD(i,s);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=C("tableHandle",t,n,e,r),i=C("keys",t,n,e),s=C("values",t,n,e);return[yield r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=C("tableHandle",t,n,e,r),i=C("keys",t,n,e),s=C("defaultValue",t,n,e);return[yield r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=C("tableHandle",t,n,e,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}});var Iee=(t,n,e,r=yn)=>{switch(t.op){case"ResizeBilinear":{let o=C("images",t,n,e),i=C("size",t,n,e),s=C("alignCorners",t,n,e),a=C("halfPixelCenters",t,n,e);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=C("images",t,n,e),i=C("size",t,n,e),s=C("alignCorners",t,n,e),a=C("halfPixelCenters",t,n,e);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=C("image",t,n,e),i=C("boxes",t,n,e),s=C("boxInd",t,n,e),a=C("cropSize",t,n,e),l=C("method",t,n,e),c=C("extrapolationValue",t,n,e);return[r.image.cropAndResize(o,i,s,a,l,c)]}case"ImageProjectiveTransformV3":{let o=C("images",t,n,e),i=C("transforms",t,n,e),s=C("outputShape",t,n,e),a=C("fillValue",t,n,e),l=C("interpolation",t,n,e),c=C("fillMode",t,n,e);return[r.image.transform(o,i,l.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Nee=(t,n,e,r=yn)=>{switch(t.op){case"Equal":return[r.equal(C("a",t,n,e),C("b",t,n,e))];case"NotEqual":return[r.notEqual(C("a",t,n,e),C("b",t,n,e))];case"Greater":return[r.greater(C("a",t,n,e),C("b",t,n,e))];case"GreaterEqual":return[r.greaterEqual(C("a",t,n,e),C("b",t,n,e))];case"Less":return[r.less(C("a",t,n,e),C("b",t,n,e))];case"LessEqual":return[r.lessEqual(C("a",t,n,e),C("b",t,n,e))];case"LogicalAnd":return[r.logicalAnd(C("a",t,n,e),C("b",t,n,e))];case"LogicalNot":return[r.logicalNot(C("a",t,n,e))];case"LogicalOr":return[r.logicalOr(C("a",t,n,e),C("b",t,n,e))];case"Select":case"SelectV2":return[r.where(C("condition",t,n,e),C("a",t,n,e),C("b",t,n,e))];case"BitwiseAnd":return[r.bitwiseAnd(C("a",t,n,e),C("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Aee=(t,n,e,r=yn)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(C("a",t,n,e),C("b",t,n,e),C("transposeA",t,n,e),C("transposeB",t,n,e))];case"Einsum":return[r.einsum(C("equation",t,n,e),...C("tensors",t,n,e))];case"Transpose":return[r.transpose(C("x",t,n,e),C("perm",t,n,e))];case"_FusedMatMul":let[o,i]=C("fusedOps",t,n,e),s=o==="biasadd",a=i==="prelu",l=C("numArgs",t,n,e),c=C("leakyreluAlpha",t,n,e);if(s){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,d]=C("args",t,n,e);return[r.fused.matMul({a:C("a",t,n,e),b:C("b",t,n,e),transposeA:C("transposeA",t,n,e),transposeB:C("transposeB",t,n,e),bias:u,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(C("a",t,n,e),C("numLower",t,n,e),C("numUpper",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Ree=(t,n,e,r=yn)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(C("x",t,n,e),C("axis",t,n,e),C("keepDims",t,n,e))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(C("x",t,n,e),C("mean",t,n,e),C("variance",t,n,e),C("offset",t,n,e),C("scale",t,n,e),C("epsilon",t,n,e))];case"FusedBatchNormV3":return[r.batchNorm(C("x",t,n,e),C("mean",t,n,e),C("variance",t,n,e),C("offset",t,n,e),C("scale",t,n,e),C("epsilon",t,n,e))];case"LRN":return[r.localResponseNormalization(C("x",t,n,e),C("radius",t,n,e),C("bias",t,n,e),C("alpha",t,n,e),C("beta",t,n,e))];case"Softmax":return[r.softmax(C("x",t,n,e))];case"LogSoftmax":return[r.logSoftmax(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Oee=(t,n,e,r=yn)=>{switch(t.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(C("paramsNestedSplits",t,n,e),C("paramsDenseValues",t,n,e),C("indices",t,n,e),C("outputRaggedRank",t,n,e));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(C("starts",t,n,e),C("limits",t,n,e),C("splits",t,n,e));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(C("shape",t,n,e),C("values",t,n,e),C("defaultValue",t,n,e),C("rowPartitionTensors",t,n,e),C("rowPartitionTypes",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Fee=(t,n,e,r=yn)=>{switch(t.op){case"Max":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.max(C("x",t,n,e),a,l)]}case"Mean":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.mean(C("x",t,n,e),a,l)]}case"Min":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.min(C("x",t,n,e),a,l)]}case"Sum":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.sum(C("x",t,n,e),a,l)]}case"All":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.all(C("x",t,n,e),a,l)]}case"Any":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.any(C("x",t,n,e),a,l)]}case"ArgMax":{let a=C("axis",t,n,e);return[r.argMax(C("x",t,n,e),a)]}case"ArgMin":{let a=C("axis",t,n,e);return[r.argMin(C("x",t,n,e),a)]}case"Prod":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.prod(C("x",t,n,e),a,l)]}case"Cumprod":{let a=C("axis",t,n,e),l=C("exclusive",t,n,e),c=C("reverse",t,n,e);return[r.cumprod(C("x",t,n,e),a,l,c)]}case"Cumsum":{let a=C("axis",t,n,e),l=C("exclusive",t,n,e),c=C("reverse",t,n,e);return[r.cumsum(C("x",t,n,e),a,l,c)]}case"Bincount":let o=C("x",t,n,e),i=C("weights",t,n,e),s=C("size",t,n,e);return[r.bincount(o,i,s)];case"DenseBincount":{let a=C("x",t,n,e),l=C("weights",t,n,e),c=C("size",t,n,e),u=C("binaryOutput",t,n,e);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Pee=(t,n,e,r=yn)=>{switch(t.op){case"ConcatV2":case"Concat":{let o=C("n",t,n,e),i=C("axis",t,n,e),s=C("tensors",t,n,e);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=C("x",t,n,e),i=C("indices",t,n,e);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=C("axis",t,n,e),i=C("batchDims",t,n,e),s=C("x",t,n,e),a=C("indices",t,n,e);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=C("dims",t,n,e),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=C("x",t,n,e);return[r.reverse(s,i)]}case"ReverseV2":{let o=C("axis",t,n,e),i=C("x",t,n,e);return[r.reverse(i,o)]}case"Slice":{let o=C("begin",t,n,e),i=C("size",t,n,e);return[r.slice(C("x",t,n,e),o,i)]}case"StridedSlice":{let o=C("begin",t,n,e),i=C("end",t,n,e),s=C("strides",t,n,e),a=C("beginMask",t,n,e),l=C("endMask",t,n,e),c=C("ellipsisMask",t,n,e),u=C("newAxisMask",t,n,e),d=C("shrinkAxisMask",t,n,e),p=C("x",t,n,e);return[r.stridedSlice(p,o,i,s,a,l,c,u,d)]}case"Pack":return ne(()=>{let o=C("axis",t,n,e),i=C("tensors",t,n,e),s=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{let u=x.arraysEqual(c.shape,s);if(!u&&!x.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,s)});return[r.stack(l,o)]});case"Unpack":{let o=C("axis",t,n,e),i=C("tensor",t,n,e);return r.unstack(i,o)}case"Tile":{let o=C("reps",t,n,e);return[r.tile(C("x",t,n,e),o)]}case"Split":case"SplitV":{let o=C("axis",t,n,e),i=C("numOrSizeSplits",t,n,e),s=C("x",t,n,e);return r.split(s,i,o)}case"ScatterNd":{let o=C("indices",t,n,e),i=C("values",t,n,e),s=C("shape",t,n,e);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=C("x",t,n,e),i=C("indices",t,n,e);return[r.gatherND(o,i)]}case"SparseToDense":{let o=C("sparseIndices",t,n,e),i=C("outputShape",t,n,e),s=C("sparseValues",t,n,e),a=C("defaultValue",t,n,e);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=C("indices",t,n,e),i=C("values",t,n,e),s=C("tensor",t,n,e);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Bee=(t,n,e,r=yn)=>{switch(t.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(C("indices",t,n,e),C("values",t,n,e),C("denseShape",t,n,e),C("defaultValue",t,n,e));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(C("inputIndices",t,n,e),C("inputShape",t,n,e),C("newShape",t,n,e));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(C("data",t,n,e),C("indices",t,n,e),C("segmentIds",t,n,e))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(C("data",t,n,e),C("indices",t,n,e),C("segmentIds",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Lee=(t,n,e,r=yn)=>{switch(t.op){case"FFT":return[r.fft(C("x",t,n,e))];case"IFFT":return[r.ifft(C("x",t,n,e))];case"RFFT":return[r.rfft(C("x",t,n,e))];case"IRFFT":return[r.irfft(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var $ee=(t,n,e,r=yn)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(C("input",t,n,e),C("pattern",t,n,e),C("rewrite",t,n,e),C("replaceGlobal",t,n,e))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(C("data",t,n,e),C("dataSplits",t,n,e),C("separator",t,n,e),C("nGramWidths",t,n,e),C("leftPad",t,n,e),C("rightPad",t,n,e),C("padWidth",t,n,e),C("preserveShortSequences",t,n,e));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(C("input",t,n,e),C("delimiter",t,n,e),C("skipEmpty",t,n,e));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(C("input",t,n,e),C("numBuckets",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Vee=(t,n,e,r=yn)=>{switch(t.op){case"Cast":return[r.cast(C("x",t,n,e),C("dtype",t,n,e))];case"ExpandDims":{let o=C("axis",t,n,e);return[r.expandDims(C("x",t,n,e),o)]}case"Squeeze":{let o=C("axis",t,n,e);return[r.squeeze(C("x",t,n,e),o)]}case"Reshape":return[r.reshape(C("x",t,n,e),C("shape",t,n,e))];case"EnsureShape":return[r.ensureShape(C("x",t,n,e),C("shape",t,n,e))];case"MirrorPad":return[r.mirrorPad(C("x",t,n,e),C("padding",t,n,e),C("mode",t,n,e))];case"PadV2":case"Pad":return[r.pad(C("x",t,n,e),C("padding",t,n,e),C("constantValue",t,n,e))];case"SpaceToBatchND":{let o=C("blockShape",t,n,e),i=C("paddings",t,n,e);return[r.spaceToBatchND(C("x",t,n,e),o,i)]}case"BatchToSpaceND":{let o=C("blockShape",t,n,e),i=C("crops",t,n,e);return[r.batchToSpaceND(C("x",t,n,e),o,i)]}case"DepthToSpace":{let o=C("blockSize",t,n,e),i=C("dataFormat",t,n,e).toUpperCase();return[r.depthToSpace(C("x",t,n,e),o,i)]}case"BroadcastTo":return[r.broadcastTo(C("x",t,n,e),C("shape",t,n,e))];case"BroadcastArgs":return[r.broadcastArgs(C("s0",t,n,e),C("s1",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function NB(t,n,e,r,o=ne){let i=((s,a,l)=>{switch(s.category){case"arithmetic":return o(()=>mee(s,a,l));case"basic_math":return o(()=>gee(s,a,l));case"control":return kee(s,a,l);case"convolution":return o(()=>Cee(s,a,l));case"creation":return o(()=>See(s,a,l));case"dynamic":return Mee(s,a,l);case"evaluation":return o(()=>Tee(s,a,l));case"image":return o(()=>Iee(s,a,l));case"graph":return o(()=>Dee(s,a,l));case"logical":return o(()=>Nee(s,a,l));case"matrices":return o(()=>Aee(s,a,l));case"normalization":return o(()=>Ree(s,a,l));case"ragged":return o(()=>Oee(s,a,l));case"reduction":return o(()=>Fee(s,a,l));case"slice_join":return o(()=>Pee(s,a,l));case"sparse":return o(()=>Bee(s,a,l));case"spectral":return o(()=>Lee(s,a,l));case"string":return o(()=>$ee(s,a,l));case"transformation":return o(()=>Vee(s,a,l));case"hash_table":return Eee(s,a,l,r);case"custom":let c=cD(s.op);if(c&&c.customExecutor)return c.customExecutor(new _D(s,a,l));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,n,e);return x.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var kk=class{constructor(n={},e={},r={},o={},i){this.weightMap=n,this.tensorArrayMap=e,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(n,e){return{id:n,frameName:e,iterationId:0}}set currentContext(n){this.contexts!==n&&(this.contexts=n,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let n=[];for(let e=0;e<this.contexts.length-1;e++){let r=this.contexts.slice(0,this.contexts.length-e);n.push(this.contextIdforContexts(r))}n.push(""),this._currentContextIds=n}contextIdforContexts(n){return n?n.map(e=>e.id===0&&e.iterationId===0?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(n){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,n)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let n=Object.assign({},this.contexts[this.contexts.length-1]);n.iterationId+=1,n.id=this.lastId,this.contexts.splice(-1,1,n),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(n){return this.weightMap[n]}addTensorArray(n){this.tensorArrayMap[n.id]=n}getTensorArray(n){return this.tensorArrayMap[n]}addTensorList(n){this.tensorListMap[n.id]=n}getTensorList(n){return this.tensorListMap[n]}dispose(n){for(let e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(n);for(let e in this.tensorListMap)this.tensorListMap[e].clearAndClose(n)}};function AB(t,n,e,r){let o=new Set,i=[],s=null,a=null,l=new Set,c=new Set(Object.keys(t).map(p=>qi(p)[0]));r=r||[];let u=new Set(r.map(p=>qi(p.name)[0])),d=[...n];for(;d.length>0;){let p=d.pop();if((hf(p)||LAe(p)||$Ae(p))&&s==null&&(s=p,a=s.children.map(h=>h.name).filter(h=>o.has(h))),o.add(p.name),e[p.name]==null&&!c.has(p.name)&&!u.has(p.name)){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),d.push(h))})}}return{inputs:t,outputs:n,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function jee(t,n){let{usedNodes:e,inputs:r}=n,o=Object.keys(r).map(g=>qi(g)[0]).map(g=>t.nodes[g]),i=t.initNodes||[],s=g=>e.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(v=>[v.name,v])).values()]}let l=a([...o,...t.weights,...i]).filter(s),c=a([...l,...Object.values(t.nodes)]).filter(s),u=new Map(c.map(g=>[g.name,g])),d={};for(let g of c){d[g.name]=d[g.name]||0;for(let v of g.children)s(v)||(d[v.name]=Number.POSITIVE_INFINITY),d[v.name]=(d[v.name]||0)+1}let p=Object.entries(d).filter(([,g])=>g===0).map(([g])=>g),h=[...p];for(;p.length>0;){let g=p.pop(),v=u.get(g);for(let w of v.children.filter(s))--d[w.name]===0&&(h.push(w.name),p.push(w.name))}let f=h.map(g=>u.get(g)),m=RAe(f,l);return OAe(m,l),m}function RAe(t,n){let e=new Map(t.map(s=>[s.name,s])),r=n.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=e.get(s);for(let l of a.children)!e.has(l.name)||o.has(l.name)||(o.add(l.name),r.push(l.name))}return t.filter(s=>o.has(s.name))}var Nv=class extends Error{constructor(n){super(`NodesExecutionOrderError: ${n}`)}};function OAe(t,n){let e=new Map(t.map((a,l)=>[a.name,l])),r=new Set(n.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of t){for(let l of a.children.filter(s)){if(!e.has(l.name))throw new Nv(`Child ${l.name} of node ${a.name} is unreachable.`);if(e.get(a.name)>e.get(l.name))throw new Nv(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!o(a))for(let l of a.inputs){if(!e.has(l.name))throw new Nv(`Input ${l.name} of node ${a.name} is unreachable.`);if(e.get(l.name)>e.get(a.name))throw new Nv(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function zee(t){let n=new Map(t.map((a,l)=>[a.name,l])),e=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>hf(a)?e:l),o=a=>{let l=r[n.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(o).reduce((c,u)=>Math.max(c,u),r[l])),s=new Map;for(let a=0;a<t.length;++a){let l=i[a];if(l===e)continue;let c=t[a],u=t[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(c)}return s}var FAe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),PAe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),BAe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function hf(t){return FAe.has(t.op)}function LAe(t){return PAe.has(t.op)}function $Ae(t){return BAe.has(t.op)}var bk=class t{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(n){let e=Object.keys(n).map(r=>n[r].map(o=>o.id));this._weightIds=[].concat(...e),this._weightMap=n}set resourceManager(n){this._resourceManager=n}get inputs(){return this._inputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(n=>n.signatureKey||n.name)}get outputNodes(){return this._outputs.map(n=>{let e=n.signatureKey||n.name;return n.defaultOutput?`${e}:${n.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((n,e)=>(n[e]=this._functions[e].signature,n),{})}constructor(n,e){this.graph=n,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=n.outputs,this._inputs=n.inputs,this._initNodes=n.initNodes,this._signature=n.signature,this._functions=n.functions,n.functions!=null&&Object.keys(n.functions).forEach(r=>{this._functionExecutorMap[r]=new t(n.functions[r],this)})}getCompilationKey(n,e){let r=n.map(i=>i.name).sort(),o=e.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(n,e){let r=AB(n,e,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=e.map(d=>d.name),u=Object.keys(n);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${o}]`)}let a=jee(this.graph,r),l=zee(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(n){if(n==null)return null;let e=n.clone();return Wn(e),e}cloneTensorList(n){return n?n.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(n){return Object.fromEntries(Object.entries(n).map(([e,r])=>[e,this.cloneTensorList(r)]))}execute(n,e){this.disposeIntermediateTensors(),n=this.mapInputs(n);let r=Object.keys(n).sort();this.checkInputs(n),this.checkInputShapeAndType(n),e=this.mapOutputs(e),this.checkOutputs(e);let o=r.map(p=>this.graph.nodes[qi(p)[0]]),i=e.map(p=>qi(p)[0]),s=new Set(i),a=i.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);let l=this.getCompilationKey(o,a),c=this.compiledMap.get(l);c==null&&(c=this.compile(n,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=Q().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let u={},d={};return ne(()=>{let p=new kk(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(n).forEach(v=>{let[w,y]=qi(v,p),_=[];_[y]=n[v],h[w]=_,this.keepIntermediateTensors&&(this.clonedTensorsMap[w]=this.cloneTensorList(_))});let f=this.getFrozenTensorIds(h),{orderedNodes:m,nodeLiveUntilMap:g}=c;for(let v of m){if(h[v.name])continue;let w=NB(v,h,p,this._resourceManager);if(x.isPromise(w))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);h[v.name]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[v.name]=this.cloneTensorList(w)),this.checkTensorForDisposalWithNodeLiveUntilInfo(v,h,p,f,s,g.get(v.name))}return this.parent==null&&p.dispose(f),e.map(v=>Qr(v,h,p))})}getFrozenTensorIds(n){let e=[].concat.apply([],Object.keys(n).map(r=>n[r]).map(r=>r.map(o=>o.id)));return new Set(e)}checkTensorForDisposal(n,e,r,o,i,s,a){if(!(hf(e)||s.has(n))){for(let l of r[n])l!=null&&(a[l.id]=(a[l.id]||0)+e.children.length);for(let l of e.inputs){if(hf(l))continue;let c=cB(l.name,r,o);if(c!=null)for(let u of c){if(!u||u.kept||i.has(u.id))continue;let d=a[u.id];d===1?(u.dispose(),delete a[u.id]):d!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(n,e,r,o,i,s){function a(l){return hf(l)||i.has(l.name)}if(!(hf(n)||s==null))for(let l of s){if(a(l))continue;let c=cB(l.name,e,r);for(let u of c)!u||u.kept||o.has(u.id)||u.dispose()}}executeAsync(n,e){return z(this,null,function*(){return this._executeAsync(n,e)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(n=>{for(let e of n)e&&!e.isDisposed&&e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(s,a){return z(this,arguments,function*(n,e,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(n=this.mapInputs(n),this.checkInputs(n),this.checkInputShapeAndType(n),e=this.mapOutputs(e),this.checkOutputs(e));try{this.keepIntermediateTensors=Q().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}let l=new kk(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let c=yield this.executeWithControlFlow(n,l,e,r),u=e.map(f=>Qr(f,c,l)),d=u.map(f=>f.id),p=Object.keys(n).map(f=>n[f].id),h=new Set([...d,...p,...this.weightIds]);return Object.values(c).forEach(f=>{f.forEach(m=>{m&&!m.isDisposed&&!h.has(m.id)&&m.dispose()})}),this.parent==null&&l.dispose(h),u})}executeFunctionAsync(n,e,r){return z(this,null,function*(){let o=n.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,e,r)})}executeWithControlFlow(n,e,r,o){return z(this,null,function*(){let i=Object.keys(n),s=i.map(_=>this.graph.nodes[qi(_)[0]]),a=r.map(_=>qi(_)[0]),l=new Set(a),c=a.map(_=>this.graph.nodes[_]);c.length===0&&(c=this._outputs);let{usedNodes:u,missingInputs:d,dynamicNode:p,syncInputs:h}=AB(n,c,this.weightMap,this._initNodes),f=[...s,...this.graph.weights,...this._initNodes||[]].map(_=>({node:_,contexts:e.currentContext})),m=Object.assign({},this.weightMap);Object.keys(n).forEach(_=>{let[k,M]=qi(_),E=[];E[M]=n[_],m[k]=E});let g={},v=this.getFrozenTensorIds(m),w={};for(;f.length>0;){let _=this.processStack(s,f,e,m,w,v,l,g,u);yield Promise.all(_)}p==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let y=c.filter(_=>!hf(_)&&!Qr(_.name,m,e)).map(_=>_.name);if(y.length>0){let _="";throw p!=null&&(_=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${_}`)}return m})}processStack(n,e,r,o,i,s,a,l,c){let u=[];for(;e.length>0;){let d=e.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&C("isConstant",d.node,o,r)&&([p]=Hl(d.node.name,r)),o[d.node.name]==null){let h=NB(d.node,o,r,this._resourceManager);p||([p]=Hl(d.node.name,r));let f=r.currentContext;x.isPromise(h)?u.push(h.then(m=>(o[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m)),r.currentContext=f,this.checkTensorForDisposal(p,d.node,o,r,s,a,l),this.processChildNodes(d.node,e,r,o,i,c),m))):(o[p]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(h)),this.checkTensorForDisposal(p,d.node,o,r,s,a,l),this.processChildNodes(d.node,e,r,o,i,c))}else this.processChildNodes(d.node,e,r,o,i,c)}return u}processChildNodes(n,e,r,o,i,s){n.children.forEach(a=>{let[l]=Hl(a.name,r);i[l]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!Qr(c,o,r))&&(i[l]=!0,e.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!Qr(c,o,r))&&(i[l]=!0,e.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(n=>this.weightMap[n].forEach(e=>e.dispose()))}checkInputShapeAndType(n){Object.keys(n).forEach(e=>{let r=n[e],[o]=qi(e),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((l,c)=>s[c]===-1||s[c]===l);x.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&x.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(n){var e,r;let o={};for(let i in n){let s=(r=(e=this._signature)===null||e===void 0?void 0:e.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=n[i]:o[i]=n[i]}return o}checkInputs(n){let e=Object.keys(n).filter(r=>{let[o]=qi(r);return this.graph.nodes[o]==null});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(n){return n.map(e=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[e];return i!=null?i.name:e},{})}checkOutputs(n){n.forEach(e=>{let[r]=qi(e);if(!this.graph.nodes[r])throw new Error(`The output '${e}' is not found in the graph`)})}};var SD=class{constructor(n={},e={}){this.hashTableNameToHandle=n,this.hashTableMap=e}addHashTable(n,e){this.hashTableNameToHandle[n]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(n){return this.hashTableNameToHandle[n]}getHashTableById(n){return this.hashTableMap[n]}dispose(){for(let n in this.hashTableMap)this.hashTableMap[n].clearAndClose(),delete this.hashTableMap[n];for(let n in this.hashTableNameToHandle)this.hashTableNameToHandle[n].dispose(),delete this.hashTableNameToHandle[n]}};var VAe="?tfjs-format=file",jAe="model.json",Av=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(n,e={},r=Xr){this.modelUrl=n,this.loadOptions=e,this.version="n/a",this.io=r,e==null&&(this.loadOptions={}),this.resourceManager=new SD}findIOHandler(){let n=this.modelUrl;if(n.load!=null)this.handler=n;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(n,this.loadOptions);else{let e=this.io.getLoadHandlers(n,this.loadOptions);if(e.length===0)e.push(this.io.browserHTTPRequest(n,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[n]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let n=this.handler.load();return x.isPromise(n)?n.then(e=>e.getWeightStream==null?this.loadSync(e):this.loadStreaming(e)):this.loadSync(n)}loadSync(n){let e=this.io.decodeWeights(n.weightData,n.weightSpecs);return this.loadWithWeightMap(n,e)}loadStreaming(n){return z(this,null,function*(){if(n.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let e=yield NM(n.getWeightStream(),n.weightSpecs);return this.loadWithWeightMap(n,e)})}loadWithWeightMap(n,e){this.artifacts=n;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new bk(_k.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,n.modelInitializer!=null&&n.modelInitializer.node!=null){let i=_k.Instance.transformGraph(n.modelInitializer);this.initializer=new bk(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=n.initializerSignature}return!0}save(n,e){return z(this,null,function*(){if(typeof n=="string"){let r=this.io.getSaveHandlers(n);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${n}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${n}'`);n=r[0]}if(n.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return n.save(this.artifacts)})}addStructuredOutputNames(n){if(this.structuredOutputKeys){let e=n instanceof Ot?[n]:n,r={};return e.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return n}predict(n,e){let r=this.execute(n,this.outputNodes);return this.addStructuredOutputNames(r)}predictAsync(n,e){return z(this,null,function*(){let r=yield this.executeAsync(n,this.outputNodes);return this.addStructuredOutputNames(r)})}normalizeInputs(n){var e;if(!(n instanceof Ot)&&!Array.isArray(n)){let i=(e=this.signature)===null||e===void 0?void 0:e.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(n[s]=this.resourceIdToCapturedInput[a.resourceId])}return n}n=Array.isArray(n)?n:[n];let r=Object.keys(this.resourceIdToCapturedInput).length;if(n.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${n.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,l,c;let u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[s])===null||c===void 0?void 0:c.resourceId;return u!=null?i[s]=this.resourceIdToCapturedInput[u]:i[s]=n[o++],i},{})}normalizeOutputs(n){return n=n||this.outputNodes,Array.isArray(n)?n:[n]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return z(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(n){if(this.resourceIdToCapturedInput={},this.initializerSignature){let e=this.initializerSignature.outputs,r=Object.keys(e);for(let o=0;o<r.length;o++){let i=r[o],s=e[i];this.resourceIdToCapturedInput[s.resourceId]=n[o]}}}execute(n,e){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),n=this.normalizeInputs(n),e=this.normalizeOutputs(e);let r=this.executor.execute(n,e);return r.length>1?r:r[0]}executeAsync(n,e){return z(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),n=this.normalizeInputs(n),e=this.normalizeOutputs(e);let r=yield this.executor.executeAsync(n,e);return r.length>1?r:r[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(n){return Object.keys(n).reduce((e,r)=>(e[r]=[n[r]],e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&gt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};function Hee(r){return z(this,arguments,function*(t,n={},e=Xr){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");n==null&&(n={}),n.fromTFHub&&typeof t=="string"&&(t=zAe(t));let o=new Av(t,n,e);return yield o.load(),o})}function Uee(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let n;if(t instanceof Array){let[r,o]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!o||!(o instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let i=Xr.getWeightSpecs(r.weightsManifest),s=Xr.getModelArtifactsForJSONSync(r,i,o);n=Xr.fromMemorySync(s)}else if("load"in t)n=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)n=Xr.fromMemorySync(t);else throw new Error("Unknown model format");let e=new Av(n);return e.load(),e}function zAe(t){return t.endsWith("/")||(t=t+"/"),`${t}${jAe}${VAe}`}var MD="4.22.0";var dL={};Qt(dL,{CSVDataset:()=>Bv,Dataset:()=>gf,FileDataSource:()=>Vv,TextLineDataset:()=>Pv,URLDataSource:()=>jv,array:()=>bte,csv:()=>Ete,func:()=>Ite,generator:()=>Nte,microphone:()=>Rte,version_data:()=>zD,webcam:()=>Ate,zip:()=>Cte});var kte=S2(P_());var yte=S2(P_());function hte(t,n){return ND(t,n)}function ND(t,n,e=new Map,r=new Set){if(t==null)return null;if(typeof Blob=="function"&&t instanceof Blob)return t.slice();if(r.has(t))throw new Error("Circular references are not supported.");if(e.has(t))return e.get(t);let o=n(t);if(o.recurse&&o.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(o.recurse)if(ff(t)){let i=Array.isArray(t)?[]:{};r.add(t);for(let s in t){let a=t[s],l=ND(a,n,e,r);i[s]=l}return r.delete(t),t.__proto__&&(i.__proto__=t.__proto__),i}else throw new Error(`Can't recurse into non-iterable type: ${t}`);else return e.set(t,o.value),o.value}function fte(t,n=WB){return mte(t,n)}function mte(t,n,e=new Set){let r=t[0];if(e.has(r))throw new Error("Circular references are not supported.");let o=n(t);if(o.recurse&&o.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse)if(ff(r)){let i=Array.isArray(r)?[]:{};e.add(r);for(let s in r){let a=t.map(c=>c[s]),l=mte(a,n,e);i[s]=l}return e.delete(r),i}else throw new Error(`Can't recurse into non-iterable type: ${r}`);else return o.value}function WB(t){return t===null?null:ff(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function AD(t,n){return z(this,null,function*(){let e=new Map;ND(t,n,e);for(let o of Array.from(e.keys())){let i=e.get(o);if(x.isPromise(i)){let s=yield i;e.set(o,s)}}return ND(t,n,e)})}function ff(t){let n=!1;if(Q().get("IS_BROWSER"))n=t instanceof TextDecoder;else{let{StringDecoder:e}=GB();n=t instanceof e}return t!=null&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||typeof t=="object"&&!(t instanceof Ot)&&!(t instanceof Promise)&&!n)}function gte(t){return t==null||ARe(t)||Array.isArray(t)||typeof t=="object"&&t instanceof Ot||x.isTypedArray(t)}function ARe(t){return t===null||typeof t!="object"&&typeof t!="function"}function vte(t){return hte(t,RRe)}function RRe(t){return t instanceof Ot?{value:t.clone(),recurse:!1}:ff(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}var Fv=class{constructor(n){if(this.capacity=n,this.begin=0,this.end=0,n==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(n<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(n),this.doubledCapacity=2*n}wrap(n){for(;n<0;)n+=this.doubledCapacity;return n%this.doubledCapacity}get(n){if(n<0)throw new RangeError("Can't get item at a negative index.");return this.data[n%this.capacity]}set(n,e){if(n<0)throw new RangeError("Can't set item at a negative index.");this.data[n%this.capacity]=e}length(){let n=this.end-this.begin;return n<0&&(n=this.doubledCapacity+n),n}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,n),this.end=this.wrap(this.end+1)}pushAll(n){for(let e of n)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let n=this.get(this.end);return this.set(this.end,void 0),n}unshift(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,n)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let n=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),n}shuffleExcise(n){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.wrap(this.begin+n),r=this.get(e);return this.set(e,this.pop()),r}};var wte=(()=>{class t extends Fv{constructor(){super(t.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=this.capacity*2,r=new Array(e),o=this.length();for(let i=0;i<o;i++)r[i]=this.get(this.wrap(this.begin+i));this.data=r,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=o}}return t.INITIAL_CAPACITY=32,t})();function iL(t){return new qB(t)}function Sk(t){return new KB(t)}function xte(t,n){return new OD(t,n)}function _te(t,n=mf.FAIL){return new rL(t,n)}var Ar=class{toArray(){return z(this,null,function*(){let n=[],e=yield this.next();for(;!e.done;)n.push(e.value),e=yield this.next();return n})}toArrayForTest(){return z(this,null,function*(){let n=this.prefetch(100),e=[],r=yield n.next();for(;!r.done;)e.push(r.value),r=yield n.next();return e})}resolveFully(){return z(this,null,function*(){let n=yield this.next();for(;!n.done;)n=yield this.next()})}resolveWhile(n){return z(this,null,function*(){let e=yield this.next(),r=n(e.value);for(;!e.done&&r;)e=yield this.next(),r=n(e.value)})}handleErrors(n){return new tL(this,n)}filter(n){return new JB(this,n)}map(n){return new eL(this,n)}mapAsync(n){return new RD(this,n)}serialMapAsync(n){return new RD(this,n).serial()}flatmap(n){return new nL(this,n)}forEachAsync(n){return z(this,null,function*(){return this.map(n).resolveFully()})}serialForEach(n){return z(this,null,function*(){return this.serialMapAsync(n).resolveWhile(e=>e===!0)})}rowMajorBatch(n,e=!0){return new QB(this,n,e)}columnMajorBatch(n,e=!0,r=WB){return this.rowMajorBatch(n,e).map(i=>fte(i,r))}concatenate(n,e){return new OD(iL([this,n]),e)}take(n){return n<0||n==null?this:new YB(this,n)}skip(n){return n<0||n==null?this:new XB(this,n)}prefetch(n){return new FD(this,n)}shuffle(n,e){return new oL(this,n,e)}serial(){return new ZB(this)}},qB=class extends Ar{constructor(n){super(),this.items=n,this.trav=0}summary(){return`Array of ${this.items.length} items`}next(){return z(this,null,function*(){if(this.trav>=this.items.length)return{value:null,done:!0};let n=this.items[this.trav];return this.trav++,{value:vte(n),done:!1}})}},KB=class extends Ar{constructor(n){super(),this.nextFn=n}summary(){return"Function call"}next(){return z(this,null,function*(){try{return this.nextFn()}catch(n){throw n.message=`Error thrown while iterating through a dataset: ${n.message}`,n}})}},ZB=class extends Ar{constructor(n){super(),this.upstream=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){return this.upstream.next()})}},XB=class extends Ar{constructor(n,e){super(),this.upstream=n,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;this.count++<this.maxCount;){let n=yield this.upstream.next();if(n.done)return n;gt(n.value)}return this.upstream.next()})}},YB=class extends Ar{constructor(n,e){super(),this.upstream=n,this.maxCount=e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}next(){return z(this,null,function*(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()})}},QB=class extends Ar{constructor(n,e,r=!0){super(),this.upstream=n,this.batchSize=e,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){let n=[];for(;n.length<this.batchSize;){let e=yield this.upstream.next();if(e.done)return this.enableSmallLastBatch&&n.length>0?{value:n,done:!1}:{value:null,done:!0};n.push(e.value)}return{value:n,done:!1}})}},JB=class extends Ar{constructor(n,e){super(),this.upstream=n,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;;){let n=yield this.upstream.next();if(n.done||this.predicate(n.value))return n;gt(n.value)}})}},eL=class extends Ar{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> Map`}next(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return{value:null,done:!0};let e=ta.getTensorsInContainer(n.value),r=this.transform(n.value),o=ta.getTensorsInContainer(r);for(let i of e)ta.isTensorInList(i,o)||i.dispose();return{value:r,done:!1}})}},tL=class extends Ar{constructor(n,e){super(),this.upstream=n,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;;)try{return yield this.upstream.next()}catch(n){if(!this.handler(n))return{value:null,done:!0}}})}},RD=class extends Ar{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> AsyncMap`}next(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return{value:null,done:!0};let e=ta.getTensorsInContainer(n.value),r=yield this.transform(n.value),o=ta.getTensorsInContainer(r);for(let i of e)ta.isTensorInList(i,o)||i.dispose();return{value:r,done:!1}})}},K0=class extends Ar{constructor(){super(),this.outputQueue=new wte,this.lastRead=Promise.resolve({value:null,done:!1})}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;this.outputQueue.length()===0;)if(!(yield this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}})}},nL=class extends K0{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> Flatmap`}pump(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return!1;let e=ta.getTensorsInContainer(n.value),r=this.transform(n.value),o=ta.getTensorsInContainer(r);this.outputQueue.pushAll(r);for(let i of e)ta.isTensorInList(i,o)||i.dispose();return!0})}},OD=class extends Ar{constructor(n,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=n}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}next(){return z(this,null,function*(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead})}readFromChain(n){return z(this,null,function*(){if(yield n,this.iterator==null){let r=yield this.moreIterators.next();if(r.done)return{value:null,done:!0};this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let e=yield this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(n)):e})}},mf=function(t){return t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST",t}(mf||{}),rL=class extends Ar{constructor(n,e=mf.FAIL){super(),this.iterators=n,this.mismatchMode=e,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}nextState(n){return z(this,null,function*(){yield n;let e=0,r=0;function o(s){return s instanceof Ar?{value:s.next().then(l=>(e++,l.done&&r++,l.value)),recurse:!1}:{value:null,recurse:!0}}let i=yield AD(this.iterators,o);if(e===r)return{value:null,done:!0};if(r>0)switch(this.mismatchMode){case mf.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case mf.SHORTEST:return{value:null,done:!0};case mf.LONGEST:default:}return this.count++,{value:i,done:!1}})}next(){return z(this,null,function*(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise})}},FD=class extends Ar{constructor(n,e){super(),this.upstream=n,this.bufferSize=e,this.buffer=new Fv(e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let n=this.upstream.next();this.buffer.push(n)}}next(){return this.refill(),this.buffer.shift()}},oL=class extends FD{constructor(n,e,r){super(n,e),this.upstream=n,this.windowSize=e,this.upstreamExhausted=!1,this.random=yte.alea(r||x.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}randomInt(n){return Math.floor(this.random()*n)}chooseIndex(){return this.randomInt(this.buffer.length())}serialNext(){return z(this,null,function*(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let n=this.chooseIndex(),e=yield this.buffer.shuffleExcise(n);if(e.done)this.upstreamExhausted=!0;else return this.refill(),e}return{value:null,done:!0}})}};var gf=(()=>{class t{constructor(){this.size=null}batch(e,r=!0){let o=this;x.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`);let i;return this.size===1/0||this.size==null?i=this.size:r?i=Math.ceil(this.size/e):i=Math.floor(this.size/e),us(()=>z(this,null,function*(){return(yield o.iterator()).columnMajorBatch(e,r,ORe)}),i)}concatenate(e){let r=this,o;return this.size===1/0||e.size===1/0?o=1/0:this.size!=null&&e.size!=null?o=this.size+e.size:o=null,us(()=>z(this,null,function*(){return(yield r.iterator()).concatenate(yield e.iterator())}),o)}filter(e){let r=this,o;return this.size===1/0?o=1/0:o=null,us(()=>z(this,null,function*(){return(yield r.iterator()).filter(i=>ne(()=>e(i)))}),o)}forEachAsync(e){return z(this,null,function*(){return(yield this.iterator()).forEachAsync(e)})}map(e){let r=this;return us(()=>z(this,null,function*(){return(yield r.iterator()).map(o=>ne(()=>e(o)))}),this.size)}mapAsync(e){let r=this;return us(()=>z(this,null,function*(){return(yield r.iterator()).mapAsync(e)}),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let r=this;return us(()=>z(this,null,function*(){return(yield r.iterator()).prefetch(e)}),this.size)}repeat(e){let r=this,o;return this.size!=null&&e>0?o=this.size*e:e===0?o=0:this.size!=null&&(e===void 0||e<0)?o=1/0:o=null,us(()=>z(this,null,function*(){let i=Sk(()=>z(this,null,function*(){return{value:yield r.iterator(),done:!1}}));return xte(i.take(e))}),o)}skip(e){let r=this,o;return this.size!=null&&e>=0&&this.size>=e?o=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?o=0:o=null,us(()=>z(this,null,function*(){return(yield r.iterator()).skip(e)}),o)}shuffle(e,r,o=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let i=this,s=kte.alea(r||x.now().toString());return us(()=>z(this,null,function*(){let a=s.int32();return o&&(a+=s.int32()),(yield i.iterator()).shuffle(e,a.toString())}),this.size)}take(e){let r=this,o;return this.size!=null&&this.size>e?o=e:this.size!=null&&this.size<=e?o=this.size:o=null,us(()=>z(this,null,function*(){return(yield r.iterator()).take(e)}),o)}toArray(){return z(this,null,function*(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(yield this.iterator()).toArray()})}toArrayForTest(){return z(this,null,function*(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(yield this.iterator()).toArrayForTest()})}}return t.MAX_BUFFER_SIZE=1e4,t})();function us(t,n=null){return new class extends gf{constructor(){super(...arguments),this.size=n}iterator(){return z(this,null,function*(){return t()})}}}function bte(t){return us(()=>z(this,null,function*(){return iL(t)}),t.length)}function Cte(t){if(!ff(t))throw new Error("The argument to zip() must be an object or array.");let n;if(Array.isArray(t))for(let e=0;e<t.length;e++)n=n==null?t[e].size:Math.min(n,t[e].size);else if(t instanceof Object)for(let e in t)n=n==null?t[e].size:Math.min(n,t[e].size);return us(()=>z(this,null,function*(){let e=yield AD(t,r=>{if(r instanceof gf)return{value:r.iterator(),recurse:!1};if(ff(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return _te(e,mf.SHORTEST)}),n)}function ORe(t){if(t===null)return null;let n=t[0];return gte(n)?{value:FRe(t),recurse:!1}:{value:null,recurse:!0}}function FRe(t){if(t.length===0)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof Ot?Yn(t):Wr(t)}var Pv=class extends gf{constructor(n){super(),this.input=n}iterator(){return z(this,null,function*(){return(yield this.input.iterator()).decodeUTF8().split(`
`).map(o=>(o.endsWith("\r")&&(o=o.slice(0,-1)),o))})}};var PD='"',Mk=Symbol("out"),Ste=Symbol("field"),BD=Symbol("quote"),sL=Symbol("quoteafterquote"),Mte=Symbol("quoteinquote"),Bv=class extends gf{columnNames(){return z(this,null,function*(){return this.columnNamesValidated||(yield this.setColumnNames()),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames})}setColumnNames(){return z(this,null,function*(){let n=yield this.maybeReadHeaderLine();if(!this.fullColumnNames&&!n)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&n&&x.assert(n.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+n.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=n);let e=this.fullColumnNames.reduce((o,i)=>(o[i]=o[i]+1||1,o),{}),r=Object.keys(e).filter(o=>e[o]>1);if(x.assert(r.length===0,()=>"Duplicate column names found: "+r.toString()),this.columnConfigs){for(let o of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(o)===-1)throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0})}maybeReadHeaderLine(){return z(this,null,function*(){if(this.hasHeader){let e=yield(yield this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let r=e.value;return this.parseRow(r,!1)}else return null})}constructor(n,e){super(),this.input=n,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new Pv(n),e||(e={}),this.hasHeader=e.hasHeader!==!1,this.fullColumnNames=e.columnNames,this.columnConfigs=e.columnConfigs,this.configuredColumnsOnly=e.configuredColumnsOnly,e.delimWhitespace?(x.assert(e.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=e.delimiter?e.delimiter:","}iterator(){return z(this,null,function*(){this.columnNamesValidated||(yield this.setColumnNames());let n=yield this.base.iterator();return this.hasHeader&&(n=n.skip(1)),n.map(e=>this.makeDataElement(e))})}makeDataElement(n){let e=this.parseRow(n),r={},o={};for(let i=0;i<this.fullColumnNames.length;i++){let s=this.fullColumnNames[i],a=this.columnConfigs?this.columnConfigs[s]:null;if(!(this.configuredColumnsOnly&&!a)){let l=e[i],c=null;if(l==="")if(a&&a.default!==void 0)c=a.default;else{if(a&&(a.required||a.isLabel))throw new Error(`Required column ${s} is empty in this line: ${n}`);c=void 0}else{let u=Number(l);if(isNaN(u))a&&a.dtype==="bool"?c=this.getBoolean(l):c=l;else if(!a||!a.dtype)c=u;else switch(a.dtype){case"float32":c=u;break;case"int32":c=Math.floor(u);break;case"bool":c=this.getBoolean(l);break;default:c=u}}a&&a.isLabel?o[s]=c:r[s]=c}}return Object.keys(o).length===0?r:{xs:r,ys:o}}getBoolean(n){return n==="1"||n.toLowerCase()==="true"?1:0}parseRow(n,e=!0){let r=[],o=0,i=n.length,s=Mk;for(let a=0;a<i;a++)switch(s){case Mk:switch(n.charAt(a)){case PD:o=a+1,s=BD;break;case this.delimiter:if(o=a+1,this.delimiter===" "&&this.delimWhitespace)break;r.push(""),s=Mk;break;default:s=Ste,o=a;break}break;case Ste:switch(n.charAt(a)){case this.delimiter:r.push(n.substring(o,a)),s=Mk,o=a+1;break;default:}break;case BD:switch(n.charAt(a)){case PD:s=sL;break;default:}break;case sL:switch(n.charAt(a)){case this.delimiter:r.push(n.substring(o,a-1)),s=Mk,o=a+1;break;case PD:s=BD;break;default:s=Mte;break}break;case Mte:switch(n.charAt(a)){case PD:s=BD;break;default:}break;default:}if(s===sL?r.push(n.substring(o,i-1)):r.push(n.substring(o)),e&&r.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${r}`);return r}};var LD=class t extends Ar{constructor(n){super(),this.microphoneConfig=n,this.isClosed=!1,this.fftSize=n.fftSize||1024;let e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=n.numFramesPerSpectrogram||43,this.sampleRateHz=n.sampleRateHz,this.columnTruncateLength=n.columnTruncateLength||this.fftSize,this.audioTrackConstraints=n.audioTrackConstraints,this.smoothingTimeConstant=n.smoothingTimeConstant||0,this.includeSpectrogram=n.includeSpectrogram!==!1,this.includeWaveform=n.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static create(){return z(this,arguments,function*(n={}){if(!Q().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let e=new t(n);return yield e.start(),e})}start(){return z(this,null,function*(){try{this.stream=yield navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(r){throw new Error(`Error thrown while initializing video stream: ${r.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let n=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new n,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);let e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)})}next(){return z(this,null,function*(){if(this.isClosed)return{value:null,done:!0};let n,e,r=yield this.getAudioData();if(this.includeSpectrogram){let o=this.flattenQueue(r.freqDataQueue);n=this.getTensorFromAudioDataArray(o,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let o=this.flattenQueue(r.timeDataQueue);e=this.getTensorFromAudioDataArray(o,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:n,waveform:e},done:!1}})}capture(){return z(this,null,function*(){return(yield this.next()).value})}getAudioData(){return z(this,null,function*(){let n=[],e=[],r=0;return new Promise(o=>{let i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&o({freqDataQueue:n,timeDataQueue:e}),n.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++r===this.numFrames&&(clearInterval(i),o({freqDataQueue:n,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(n){let e=n[0].length,r=new Float32Array(n.length*e);return n.forEach((o,i)=>r.set(o,i*e)),r}getTensorFromAudioDataArray(n,e){let r=new Float32Array(x.sizeFromShape(e));return r.set(n,r.length-n.length),Wr(r,e)}};var $D=class t extends Ar{constructor(n,e){if(super(),this.webcamVideoElement=n,this.webcamConfig=e,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Qn([0],"int32"),this.webcamConfig.centerCrop){let r=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,o=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,i=(1-r)/2,s=(1-o)/2,a=i+r,l=o+s;this.cropBox=Aa([s,i,l,a],[1,4])}else this.cropBox=Aa([0,0,1,1],[1,4])}summary(){return"webcam"}static create(r){return z(this,arguments,function*(n,e={}){if(!Q().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!n){if(n=document.createElement("video"),!e.resizeWidth||!e.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");n.width=e.resizeWidth,n.height=e.resizeHeight}let o=new t(n,e);return yield o.start(),o})}start(){return z(this,null,function*(){this.webcamConfig.facingMode&&x.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=yield navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(n){throw n.message=`Error thrown while initializing video stream: ${n.message}`,n}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(n){console.log(n),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(n=>{this.webcamVideoElement.onloadedmetadata=()=>{n()}})})}next(){return z(this,null,function*(){if(this.isClosed)return{value:null,done:!0};let n;try{n=Z_.fromPixels(this.webcamVideoElement)}catch(e){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(e)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(n),done:!1}}catch(e){throw new Error(`Error thrown cropping the video: ${e.message}`)}finally{n.dispose()}else return{value:n,done:!1}})}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(n){return ne(()=>{let e=hr(ge(n,"float32"),0),r;r=Ci.cropAndResize(e,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let o=r.shape;return $(r,o.slice(1))})}capture(){return z(this,null,function*(){return(yield this.next()).value})}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}};var Lv=class{};var Tk=class extends Ar{split(n){return new aL(this,n)}},aL=class extends Tk{constructor(n,e){super(),this.upstream=n,this.impl=new lL(n,e)}summary(){return this.impl.summary()}next(){return z(this,null,function*(){return this.impl.next()})}},lL=class extends K0{constructor(n,e){super(),this.upstream=n,this.separator=e,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}pump(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);let e=n.value.split(this.separator);e[0]=this.carryover+e[0];for(let r of e.slice(0,-1))this.outputQueue.push(r);return this.carryover=e[e.length-1],!0})}};var VD=class extends Ar{decodeUTF8(){return new cL(this)}},cL=class extends Tk{constructor(n){super(),this.upstream=n,this.impl=new uL(n)}summary(){return this.impl.summary()}next(){return z(this,null,function*(){return this.impl.next()})}},uL=class extends K0{constructor(n){if(super(),this.upstream=n,Q().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:e}=GB();this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}pump(){return z(this,null,function*(){let n=yield this.upstream.next(),e;if(n.done)return!1;e=n.value;let r;return Q().get("IS_BROWSER")?r=this.decoder.decode(e,{stream:!0}):r=this.decoder.write(Buffer.from(e.buffer)),this.outputQueue.push(r),!0})}};var $v=class extends VD{constructor(n,e={}){super(),this.file=n,this.options=e,x.assert(n instanceof Uint8Array||(Q().get("IS_BROWSER")?n instanceof File||n instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=e.offset||0,this.chunkSize=e.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}next(){return z(this,null,function*(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:yield new Promise((e,r)=>{let o=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,o)));else{let i=new FileReader;i.onload=a=>{let l=i.result;if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),!(l instanceof Uint8Array))return r(new TypeError("FileReader returned unknown type."));e(l)},i.onabort=a=>r(new Error("Aborted")),i.onerror=a=>r(new Error(a.type));let s=this.file.slice(this.offset,o);i.readAsArrayBuffer(s)}this.offset=o}),done:!1}})}};function Tte(r){return z(this,arguments,function*(t,n={},e){let o,i;typeof t=="string"?o=t:(o=t.url,i=PRe(t));let s=yield(e||x.fetch)(o,i);if(s.ok){let a=new Uint8Array(yield s.arrayBuffer());return new $v(a,n)}else throw new Error(s.statusText)})}var PRe=t=>({method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity});function jD(t){return typeof t=="string"&&t.slice(0,7)==="file://"}var Vv=class extends Lv{constructor(n,e={}){super(),this.input=n,this.options=e}iterator(){return z(this,null,function*(){if(jD(this.input)&&Q().get("IS_NODE")){let n=Dte();this.input=n.readFileSync(this.input.slice(7))}return new $v(this.input,this.options)})}};var jv=class extends Lv{constructor(n,e={}){super(),this.url=n,this.fileOptions=e}iterator(){return z(this,null,function*(){return jD(this.url)?new Vv(this.url,this.fileOptions).iterator():Tte(this.url,this.fileOptions)})}};function Ete(t,n={}){return new Bv(new jv(t),n)}function Ite(t){let n=Sk(t);return us(()=>z(this,null,function*(){return n}))}function Nte(t){return us(()=>z(this,null,function*(){let n=yield t();return Sk(()=>n.next())}))}function Ate(t,n){return z(this,null,function*(){return $D.create(t,n)})}function Rte(t){return z(this,null,function*(){return LD.create(t)})}var zD="4.22.0";function _e(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&x.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the CPU backend.`)})}var BRe=Xo.whereImpl,HD=(()=>{class t extends kc{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Th(this,na())}write(e,r,o){this.firstUse&&(this.firstUse=!1,Q().get("IS_NODE")&&O.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:o,refCount:1}),i}makeTensorInfo(e,r,o){let i;if(r==="string"&&o!=null&&o.length>0&&x.isString(o[0])){let s=o.map(a=>x.encodeString(a));i=this.write(s,e,r)}else i=this.write(o,e,r);return{dataId:i,shape:e,dtype:r}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let r=this.data.get(e);r.refCount++}decRef(e){if(this.data.has(e)){let r=this.data.get(e);r.refCount--}}move(e,r,o,i,s){this.data.set(e,{values:r,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}read(e){return z(this,null,function*(){return this.readSync(e)})}readSync(e){let{dtype:r,complexTensorInfos:o}=this.data.get(e);if(r==="complex64"){let i=this.readSync(o.real.dataId),s=this.readSync(o.imag.dataId);return O.mergeRealAndImagArrays(i,s)}return x.convertBackendValuesAndArrayBuffer(this.data.get(e).values,r)}bufferSync(e){let r=this.readSync(e.dataId);if(e.dtype==="string")try{let o=r.map(i=>x.decodeString(i));return st(e.shape,e.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return st(e.shape,e.dtype,r)}makeOutput(e,r,o){return na().makeTensorFromTensorInfo(this.makeTensorInfo(r,o,e),this)}disposeData(e,r=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!r&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:o}=this.data.get(e);o!=null&&(this.disposeData(o.real.dataId,!0),this.disposeData(o.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}time(e){return z(this,null,function*(){let r=x.now();return e(),{kernelMs:x.now()-r}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){_e([e],"where");let r=this.readSync(e.dataId);return BRe(e.shape,r)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var Nk={};Qt(Nk,{addImpl:()=>fL,bincountImpl:()=>Uv,bincountReduceImpl:()=>UD,bitwiseAndImpl:()=>mL,castImpl:()=>hL,ceilImpl:()=>gL,concatImpl:()=>GD,equalImpl:()=>vL,expImpl:()=>yL,expm1Impl:()=>_L,floorDivImpl:()=>bL,floorImpl:()=>kL,gatherNdImpl:()=>WD,gatherV2Impl:()=>qD,greaterEqualImpl:()=>SL,greaterImpl:()=>CL,lessEqualImpl:()=>TL,lessImpl:()=>ML,linSpaceImpl:()=>KD,logImpl:()=>DL,maxImpl:()=>ZD,maximumImpl:()=>EL,minimumImpl:()=>IL,multiplyImpl:()=>Dk,negImpl:()=>NL,notEqualImpl:()=>AL,prodImpl:()=>RL,raggedGatherImpl:()=>XD,raggedRangeImpl:()=>YD,raggedTensorToTensorImpl:()=>QD,rangeImpl:()=>JD,rsqrtImpl:()=>FL,scatterImpl:()=>Gl,sigmoidImpl:()=>une,simpleAbsImpl:()=>pL,sliceImpl:()=>BL,sparseFillEmptyRowsImpl:()=>eE,sparseReshapeImpl:()=>tE,sparseSegmentReductionImpl:()=>Wv,sqrtImpl:()=>hne,squaredDifferenceImpl:()=>LL,staticRegexReplaceImpl:()=>$L,stridedSliceImpl:()=>nE,stringNGramsImpl:()=>rE,stringSplitImpl:()=>oE,stringToHashBucketFastImpl:()=>iE,subImpl:()=>jL,tileImpl:()=>sE,topKImpl:()=>aE,transposeImpl:()=>Gv,uniqueImpl:()=>lE});function pL(t){let n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}var LRe=t=>{let{x:n}=t.inputs,e=t.backend;_e(n,"abs");let r=new Float32Array(x.sizeFromShape(n.shape)),o=e.data.get(n.dataId).values;return r=pL(o),e.makeOutput(r,n.shape,n.dtype)},Ote={kernelName:vd,backendName:"cpu",kernelFunc:LRe};function sn(t){return(n,e,r,o,i)=>{let s=O.assertAndGetBroadcastShape(n,e),a=s.length,l=x.computeStrides(s),c=x.sizeFromShape(s),u=x.getTypedArrayFromDType(i,c),d=n.length,p=e.length,h=x.computeStrides(n),f=x.computeStrides(e),m=O.getBroadcastDims(n,s),g=O.getBroadcastDims(e,s);if(m.length+g.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],o[v%o.length]);else for(let v=0;v<u.length;++v){let w=x.indexToLoc(v,a,l),y=w.slice(-d);m.forEach(E=>y[E]=0);let _=x.locToIndex(y,d,h),k=w.slice(-p);g.forEach(E=>k[E]=0);let M=x.locToIndex(k,p,f);u[v]=t(r[_],o[M])}return[u,s]}}function vo(t){let{inputs:n,backend:e}=t,{real:r,imag:o}=n,i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,a=e.makeTensorInfo(r.shape,"complex64"),l=e.data.get(a.dataId);return l.complexTensorInfos={real:e.makeTensorInfo(r.shape,"float32",i),imag:e.makeTensorInfo(o.shape,"float32",s)},a}var Fte={kernelName:tg,backendName:"cpu",kernelFunc:vo};function zv(t,n,e="float32"){if(e==="complex64"){let o=zv(t,n,"float32"),i=zv(t,n,"float32");return vo({inputs:{real:o,imag:i},backend:t})}let r=x.makeZerosTypedArray(x.sizeFromShape(n),e);return t.makeTensorInfo(n,e,r)}function fi(t){let{inputs:n,backend:e}=t,{x:r}=n;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var Pte={kernelName:xl,backendName:"cpu",kernelFunc:fi};function Ha(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.data.get(r.dataId).complexTensorInfos.real,i=e.data.get(o.dataId).values;return e.makeTensorInfo(o.shape,o.dtype,i)}var Bte={kernelName:Rg,backendName:"cpu",kernelFunc:Ha};function hL(t,n,e,r){if(r==="int32"){let o=Int32Array.from(t);return[n,"int32",o]}if(r==="bool"){let o=x.toTypedArray([0],e),[i,s]=sn((a,l)=>a!==l?1:0)(n,[],t,o,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${e} to ${r}`)}function Ua(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return fi({inputs:{x:o},backend:e});let u=zv(e,o.shape,o.dtype),d=Ua({inputs:{x:o},backend:e,attrs:{dtype:"float32"}}),p=vo({inputs:{real:d,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),p}if(o.dtype==="complex64"){let u=Ha({inputs:{input:o},backend:e}),d=Ua({inputs:{x:u},backend:e,attrs:{dtype:i}});return e.disposeIntermediateTensorInfo(u),d}if(!x.hasEncodingLoss(o.dtype,i)){let u=fi({inputs:{x:o},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:i}}let s=e.data.get(o.dataId).values,[a,l,c]=hL(s,o.shape,o.dtype,i);return e.makeTensorInfo(a,l,c)}var Lte={kernelName:yl,backendName:"cpu",kernelFunc:Ua};function fn(t,n,e,r){return e==null?({inputs:o,backend:i})=>{let{a:s,b:a}=o,l=i;_e([s,a],t);let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=s.dtype==="string"?O.fromUint8ToStringArray(c):c,p=s.dtype==="string"?O.fromUint8ToStringArray(u):u,h=r||s.dtype,[f,m]=n(s.shape,a.shape,d,p,h);return l.makeTensorInfo(m,h,f)}:({inputs:o,backend:i})=>{let{a:s,b:a}=o,l=i;if(s.dtype==="complex64"||a.dtype==="complex64"){let c=Ua({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,p=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,f=l.data.get(p.dataId).values,m=Ua({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),v=g.complexTensorInfos.real,w=g.complexTensorInfos.imag,y=l.data.get(v.dataId).values,_=l.data.get(w.dataId).values,[k,M,E]=e(s.shape,a.shape,h,f,y,_),A=l.makeTensorInfo(E,"float32",k),P=l.makeTensorInfo(E,"float32",M),N=vo({inputs:{real:A,imag:P},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(A),l.disposeIntermediateTensorInfo(P),N}else{let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=r||s.dtype,[p,h]=n(s.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,p)}}}function Hv(t){return(n,e,r,o,i,s)=>{let a=O.assertAndGetBroadcastShape(n,e),l=x.sizeFromShape(a),c=a.length,u=x.computeStrides(a),d=x.getTypedArrayFromDType("float32",l),p=x.getTypedArrayFromDType("float32",l),h=O.getBroadcastDims(n,a),f=O.getBroadcastDims(e,a),m=O.mergeRealAndImagArrays(r,o),g=O.mergeRealAndImagArrays(i,s),v=n.length,w=x.computeStrides(n),y=e.length,_=x.computeStrides(e);if(h.length+f.length===0)for(let k=0;k<d.length;k++){let M=k%m.length,E=k%g.length,A=t(m[M*2],m[M*2+1],g[E*2],g[E*2+1]);d[k]=A.real,p[k]=A.imag}else for(let k=0;k<d.length;k++){let M=x.indexToLoc(k,c,u),E=M.slice(-v);h.forEach(S=>E[S]=0);let A=x.locToIndex(E,v,w),P=M.slice(-y);f.forEach(S=>P[S]=0);let N=x.locToIndex(P,y,_),B=t(m[A*2],m[A*2+1],g[N*2],g[N*2+1]);d[k]=B.real,p[k]=B.imag}return[d,p,a]}}var fL=sn((t,n)=>t+n),$Re=Hv((t,n,e,r)=>({real:t+e,imag:n+r})),Fu=fn(Ca,fL,$Re),$te={kernelName:Ca,backendName:"cpu",kernelFunc:Fu};function Uv(t,n,e,r,o){let i=x.sizeFromShape(r),s=x.makeZerosTypedArray(o,e);for(let a=0;a<t.length;a++){let l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(i>0?s[l]+=n[a]:s[l]+=1)}return s}function UD(t,n,e,r=!1){let o=t.shape[0],i=t.shape[1],s=st([o,e],n.dtype);for(let a=0;a<o;a++)for(let l=0;l<i;l++){let c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||(r?s.set(1,a,c):n.size>0?s.set(s.get(a,c)+n.get(a,l),a,c):s.set(s.get(a,c)+1,a,c))}return s}var mL=sn((t,n)=>t&n),VRe=fn(Eh,mL),Vte={kernelName:Eh,backendName:"cpu",kernelFunc:VRe};function Ao(t){return(n,e,r)=>{let o=x.getArrayFromDType(e,n.length);for(let i=0;i<n.length;++i)o[i]=t(n[i],r);return o}}function St(t,n,e){let r=Ao(n);return ds(t,r,e)}function ds(t,n,e){return({inputs:r,attrs:o,backend:i})=>{let{x:s}=r;_e(s,t);let a=i,l=a.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=O.fromUint8ToStringArray(l)}else c=l;let u=e||s.dtype,d=n(c,u,o);return a.makeTensorInfo(s.shape,u,d)}}var gL=Ao(t=>Math.ceil(t)),jRe=ds(Ac,gL),jte={kernelName:Ac,backendName:"cpu",kernelFunc:jRe};function GD(t,n,e,r){let o=x.getArrayFromDType(e,x.sizeFromShape(n));if(r&&e!=="string"){let i=0;t.forEach(s=>{let a=x.sizeFromShape(s.shape);o.set(s.vals,i),i+=a})}else{let i=0;t.forEach(s=>{let a=e==="string"?O.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let c=0;c<s.shape[0];++c){let u=c*n[1]+i;for(let d=0;d<s.shape[1];++d)o[u+d]=a[l++]}i+=s.shape[1]})}return o}var vL=sn((t,n)=>t===n?1:0),wL=fn(Ih,vL,null,"bool"),zte={kernelName:Ih,backendName:"cpu",kernelFunc:wL};var yL=Ao(t=>Math.exp(t)),xL=ds($c,yL,"float32"),Hte={kernelName:$c,backendName:"cpu",kernelFunc:xL};var _L=Ao(t=>Math.expm1(t)),zRe=ds(Vc,_L),Ute={kernelName:Vc,backendName:"cpu",kernelFunc:zRe};var kL=Ao(t=>Math.floor(t)),HRe=ds(jc,kL),Gte={kernelName:jc,backendName:"cpu",kernelFunc:HRe};var bL=sn((t,n)=>Math.floor(t/n)),URe=fn(zc,bL,null,"int32"),Wte={kernelName:zc,backendName:"cpu",kernelFunc:URe};function WD(t,n,e,r,o,i,s,a,l){let c=st([r,i],e);for(let u=0;u<r;u++){let d=[],p=0;for(let h=0;h<o;h++){let f=t[u*o+h];p+=f*s[h],d.push(f)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<i;h++)c.values[u*i+h]=n.get(...n.indexToLoc(p*i+h))}return c}function qD(t,n,e){let r=st(e,t.dtype);for(let o=0;o<r.size;++o){let s=r.indexToLoc(o).slice(),a=s[0],l=s[2],c=n.locToIndex([a,l]);s[2]=n.values[c];let u=t.locToIndex(s);0<=u&&u<t.values.length&&(r.values[o]=t.values[u])}return r}var CL=sn((t,n)=>t>n?1:0),GRe=fn(Nh,CL,null,"bool"),qte={kernelName:Nh,backendName:"cpu",kernelFunc:GRe};var SL=sn((t,n)=>t>=n?1:0),WRe=fn(Hc,SL,null,"bool"),Kte={kernelName:Hc,backendName:"cpu",kernelFunc:WRe};var ML=sn((t,n)=>t<n?1:0),qRe=fn(Ah,ML,null,"bool"),Zte={kernelName:Ah,backendName:"cpu",kernelFunc:qRe};var TL=sn((t,n)=>t<=n?1:0),KRe=fn(Rh,TL,null,"bool"),Xte={kernelName:Rh,backendName:"cpu",kernelFunc:KRe};function KD(t,n,e){let r=(n-t)/(e-1),o=x.makeZerosTypedArray(e,"float32");o[0]=t;for(let i=1;i<o.length;i++)o[i]=o[i-1]+r;return o}var DL=Ao(t=>Math.log(t)),ZRe=ds(qc,DL),Yte={kernelName:qc,backendName:"cpu",kernelFunc:ZRe};function ZD(t,n,e,r){let o=x.getTypedArrayFromDType(r,x.sizeFromShape(e));for(let i=0;i<o.length;++i){let s=i*n,a=t[s];for(let l=0;l<n;++l){let c=t[s+l];(Number.isNaN(c)||c>a)&&(a=c)}o[i]=a}return o}var EL=sn((t,n)=>Math.max(t,n)),XRe=fn(Zc,EL),Qte={kernelName:Zc,backendName:"cpu",kernelFunc:XRe};var IL=sn((t,n)=>Math.min(t,n)),YRe=fn(Xc,IL),Jte={kernelName:Xc,backendName:"cpu",kernelFunc:YRe};var Dk=sn((t,n)=>t*n),QRe=Hv((t,n,e,r)=>({real:t*e-n*r,imag:t*r+n*e})),Z0=fn(Qc,Dk,QRe),ene={kernelName:Qc,backendName:"cpu",kernelFunc:Z0};function NL(t,n,e){let r=x.createScalarValue(-1,e);return Dk([],n,r,t,e)}function JRe(t){let{inputs:n,backend:e}=t,{x:r}=n;_e(r,"neg");let o=e.data.get(r.dataId).values,[i,s]=NL(o,r.shape,r.dtype);return e.makeTensorInfo(s,r.dtype,i)}var tne={kernelName:Ud,backendName:"cpu",kernelFunc:JRe};var AL=sn((t,n)=>t!==n?1:0),e5e=fn(Bh,AL,null,"bool"),nne={kernelName:Bh,backendName:"cpu",kernelFunc:e5e};function Gv(t,n,e,r,o){let i=n.length,s=x.sizeFromShape(n),a=x.computeStrides(n),l=x.computeStrides(o),c=x.getTypedArrayFromDType(e,x.sizeFromShape(o));for(let u=0;u<s;++u){let d=x.indexToLoc(u,i,a),p=new Array(d.length);for(let f=0;f<p.length;f++)p[f]=d[r[f]];let h=x.locToIndex(p,i,l);c[h]=t[u]}return c}function gr(t){let{inputs:n,attrs:e,backend:r}=t,{x:o}=n,{perm:i}=e;_e(o,"transpose");let s=o.shape.length,a=new Array(s);for(let d=0;d<a.length;d++)a[d]=o.shape[i[d]];let l=r.data.get(o.dataId).values,c=Gv(l,o.shape,o.dtype,i,a);return{dataId:r.write(c,a,o.dtype),shape:a,dtype:o.dtype}}var rne={kernelName:kl,backendName:"cpu",kernelFunc:gr};function RL(t,n,e,r){let[o,i]=O.computeOutAndReduceShapes(t,r),s=Vr(n,"int32"),a=x.makeZerosTypedArray(x.sizeFromShape(o),s),l=x.sizeFromShape(i);for(let c=0;c<a.length;++c){let u=c*l,d=1;for(let p=0;p<l;++p)d*=e[u+p];a[c]=d}return{outVals:a,outShape:o,outDtype:s}}function t5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;_e(o,"prod");let a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=O.getAxesPermutation(l,a),u=l,d=o,p=[];c!=null&&(d=gr({inputs:{x:o},backend:e,attrs:{perm:c}}),p.push(d),u=O.getInnerMostAxes(u.length,a));let h=e.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=RL(d.shape,d.dtype,h,u),v=m;return s&&(v=O.expandShapeToKeepDim(m,l)),p.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.makeTensorInfo(v,g,f)}var one={kernelName:Xd,backendName:"cpu",kernelFunc:t5e};function n5e(t,n,e){t.forEach((r,o)=>{if(r<0||r>=e){let i=x.indexToLoc(o,n.length,x.computeStrides(n)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${e})`)}})}function r5e(t,n){for(let e=0;e<t.length;++e){let r=t[e],o=e===t.length-1?n:t[e+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function o5e(t,n,e,r){let o=[],i=0,s=n.length-1+e.length,a=new Array(s).fill(null).map(()=>[0]);r5e(e,r);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];let u=n[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let p=0;p<e.length;++p){let h=e[p],f=p+n.length-1;if(f>=0){let m=a[f],g=m[m.length-1]-h[u];for(let v=u;v<d;++v)a[f].push(h[v+1]+g)}u=h[u],d=h[d]}d!==u&&(o.push([u,d]),i+=d-u)}return{outSplits:a,valueSlices:o,numValues:i}}function i5e(t){let n=[];for(let e=0;e<t.length;++e){let r=t[e].length,o=x.getArrayFromDType("int32",r);n.push(o),t[e].forEach((i,s)=>o[s]=i)}return n}function ine(t,n){let e=t.slice(0,n);for(;e.length<n;)e.push(1);for(let r=n;r<t.length;r++)e[n-1]*=t[r];return e}function s5e(t,n,e,r,o,i){let s=ine(n,2)[1],a=ine(i,2)[1],l=0;for(let c of e)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)o[l*a+d]=t[u*s+d];++l}}function a5e(t,n,e,r,o){let i=n.slice();i[0]=o;let s=x.getArrayFromDType(e,x.sizeFromShape(i)),a=t.length,l=a===0?0:a/n[0];return s5e(t,n,r,l,s,i),[s,i]}function XD(t,n,e,r,o,i,s,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(n[0].length===0)throw new Error("Split tensors must not be scalars");let l=n[0][0]-1;if(n5e(i,s,l),r.length===0)throw new Error("params.rank must be nonzero");let c=r[0],{outSplits:u,valueSlices:d,numValues:p}=o5e(i,s,t,c),h=i5e(u),f=a5e(e,r,o,d,p);return[h,f[0],f[1]]}var sne=2147483647;function YD(t,n,e,r,o,i,s){if(n.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let a=n.length===0,l=o.length===0,c=s.length===0,u=[];a||u.push(n[0]),l||u.push(o[0]),c||u.push(s[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");let d=u.length===0?1:u[0],p=x.getArrayFromDType("int32",d+1);p[0]=0;for(let g=0;g<d;++g){let v=a?t[0]:t[g],w=l?r[0]:r[g],y=c?i[0]:i[g];if(y===0)throw new Error("Requires delta != 0");let _;if(y>0&&w<v||y<0&&w>v)_=0;else if(_=Math.ceil(Math.abs((w-v)/y)),_>sne)throw new Error(`Requires ((limit - start) / delta) <= ${sne}`);p[g+1]=p[g]+_}let h=p[d],f=x.getArrayFromDType(e,h),m=0;for(let g=0;g<d;++g){let v=p[g+1]-p[g],w=a?t[0]:t[g],y=c?i[0]:i[g];for(let _=0;_<v;++_)f[m++]=w,w+=y}return[p,f]}var Ga=O.RowPartitionType,OL=class t{constructor(n,e,r,o,i,s,a,l,c,u){this.shape=n,this.shapeShape=e,this.values=r,this.valuesShape=o,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=O.getRowPartitionTypesHelper(u),this.raggedRank=O.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===Ga.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===Ga.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){let e=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case Ga.VALUE_ROWIDS:return t.getMaxWidthValueRowID(e);case Ga.ROW_SPLITS:return t.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${Ga[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){let e=n.length;if(e===0||e===1)return 0;let r=0;for(let o=0;o<e-1;++o){let i=n[o+1]-n[o];i>r&&(r=i)}return r}static getMaxWidthValueRowID(n){let e=n.length;if(e===0)return 0;let r=0,o=n[0],i=0;for(let s=1;s<e;++s){let a=n[s];a!==o&&(o=a,i=Math.max(s-r,i),r=s)}return Math.max(e-r,i)}tensorShapeFromTensor(n,e,r=!0){if(e.length===0){if(n[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return lne(n,r)}calculateOutputSize(n){let e=this.valuesShape,r=this.defaultValueShape;O.validateDefaultValueShape(r,e);let o=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=O.combineRaggedTensorToTensorShapes(this.raggedRank,o,e);s[0]<0&&(s[0]=n);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(n,e,r){let o=Math.min(n,r),i=[],s=0;for(let a=0;a<o;++a,s+=e)i.push(s);for(let a=o;a<n;++a)i.push(-1);return x.assert(i.length===n,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(n,e,r,o){let i=n.length,s=[];for(let a=0;a<i-1;++a){let l=n[a+1]-n[a],c=Math.min(o,l),u=e[a];u===-1&&(c=0);for(let d=0;d<c;++d)s.push(u),u+=r;for(let d=0;d<l-c;++d)s.push(-1)}if(i>0&&s.length!==n[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(n,e,r,o){let i=n.length,s=[];if(i===0)return[];let a=0,l=n[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];s.push(c);for(let u=1;u<i;++u){let d=n[u];if(d===l)c>=0&&(++a,a<o?c+=r:c=-1);else{if(a=0,l=d,d>=e.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${e.length}`);c=e[d]}s.push(c)}if(s.length!==n.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(n,e,r,o){let i=this.getRowPartitionTensor(n),s=this.getRowPartitionTypeByDimension(n);switch(s){case Ga.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,e,r,o);case Ga.ROW_SPLITS:if(i.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(i,e,r,o);default:throw new Error(`Unsupported partition type: ${Ga[s]}`)}}getFirstDimensionSize(){let n=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let e=this.rowPartitionTypes[0];switch(e){case Ga.FIRST_DIM_SIZE:return n[0];case Ga.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ga.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ga[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),r=this.calculateOutputSize(e),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*r[l+1];let i=lne(r,!1),s=x.getArrayFromDType(this.valuesDType,x.sizeFromShape(i));if(o[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(e,o[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,o[c],r[c]);this.setOutput(this.raggedRank,l,s,i)}return[i,s]}setOutput(n,e,r,o){if(r.length===0)return;let i=this.values,s=r,a=o.slice();a=a.slice(n+1);let l=x.sizeFromShape(a),c=e.length,u=this.defaultValue;if(u.length!==l&&u.length!==1){let f=this.defaultValueShape;ne(()=>{let m=$(u,f);u=El(m,a).dataSync()})}let d=0,p=0,h=0;for(let f=0;f<=c;++f){let m=f<c?e[f]:-1;if(m===h){++h;continue}if(p<h){let g=i.subarray(d*l),v=s.subarray(p*l),w=(h-p)*l;ane(v,g,w)}if(f>=c){let g=r.length;m=Math.floor(g/l)}if(m>h)if(this.defaultValue.length===1)s.subarray(h*l,m*l).fill(this.defaultValue[0]),h=m;else for(;m>h;){let g=s.slice(h*l);ane(g,u,l),++h}m<0?(d=f+1,p=h):(d=f,p=h,h=p+1)}}};function ane(t,n,e){for(let r=0;r<e;r++)t[r]=n[r]}function lne(t,n){let e=[];for(let r of t){if(r<0){if(!n)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}e.push(r)}return e}function QD(t,n,e,r,o,i,s,a,l,c){return new OL(t,n,e,r,o,i,s,a,l,c).compute()}function JD(t,n,e,r){let o=t===n,i=t<n&&e<0,s=n<t&&e>1;if(o||i||s)return x.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((n-t)/e)),l=x.makeZerosTypedArray(a,r);n<t&&e===1&&(e=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}var FL=Ao(t=>1/Math.sqrt(t)),l5e=ds(ou,FL),cne={kernelName:ou,backendName:"cpu",kernelFunc:l5e};function Gl(t,n,e,r,o,i,s,a,l,c){let u=[r/o,o],d=t.values,p=n.values;if(r===0)return st(e,n.dtype);let h=l instanceof wn?l:st(u,n.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let f=0;f<i;f++){let m=[],g=0;for(let v=0;v<s;v++){let w=d[f*s+v];m.push(w),g+=w*a[v]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${e}`);for(let v=0;v<o;v++)c?h.values[g*o+v]+=p[f*o+v]:h.values[g*o+v]=n.rank===0?p[0]:p[f*o+v]}return h}var une=Ao(t=>1/(1+Math.exp(-t))),PL=St(cu,t=>1/(1+Math.exp(-t))),dne={kernelName:cu,backendName:"cpu",kernelFunc:PL};function BL(t,n,e,r,o){let i=go.isSliceContinous(r,n,e),s=x.sizeFromShape(e),a=x.computeStrides(r);if(i){let d=go.computeFlatOffset(n,a);return o==="string"?t.slice(d,d+s):t.subarray(d,d+s)}let l=o==="string"?O.fromUint8ToStringArray(t):t,c=st(r,o,l),u=st(e,o);for(let d=0;d<u.size;++d){let p=u.indexToLoc(d),h=p.map((f,m)=>f+n[m]);u.set(c.get(...h),...p)}return o==="string"?O.fromStringArrayToUint8(u.values):u.values}function Wa(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,size:s}=r;_e(o,"slice");let[a,l]=go.parseSliceParams(o,i,s);go.assertParamsValid(o,a,l);let c=e.data.get(o.dataId).values,u=BL(c,a,l,o.shape,o.dtype);return e.makeTensorInfo(l,o.dtype,u)}var pne={kernelName:np,backendName:"cpu",kernelFunc:Wa};function eE(t,n,e,r,o,i,s){let a=n[0],l=i[0],c=new Array(l),u=new Array(a),d=n[1];if(l===0){if(a!==0)throw new Error(O.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));let g=x.getArrayFromDType(e,0),v=x.getArrayFromDType(o,0);return[g,[0,d],v,c,u]}let p=!0,h=0,f=new Array(l).fill(0);for(let g=0;g<a;++g){let v=t[g*d];if(v<0)throw new Error(O.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,v));if(v>=l)throw new Error(O.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,v,l));++f[v],p=p&&v>=h,h=v}let m=!0;for(let g=0;g<l;++g){let v=f[g]===0;c[g]=v,m=m&&!v,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&p){let g=t,v=r;for(let w=0;w<a;++w)u[w]=w;return[g,[a,d],v,c,u]}else{let g=f[l-1],v=x.getArrayFromDType(e,g*d),w=x.getArrayFromDType(o,g),y=new Array(l).fill(0);for(let _=0;_<a;++_){let k=t[_*d],M=y[k],E=(k===0?0:f[k-1])+M;y[k]++;for(let A=0;A<d;++A)v[E*d+A]=t[_*d+A];w[E]=r[_],u[_]=E}for(let _=0;_<l;++_)if(y[_]===0){let M=_===0?0:f[_-1];v[M*d+0]=_;for(let E=1;E<d;++E)v[M*d+E]=0;w[M]=s}return[v,[g,d],w,c,u]}}function tE(t,n,e,r,o){let i=x.sizeFromShape(r),s=n[0],a=o.length,l=[],c=1,u=-1;for(let g=0;g<a;++g){let v=o[g];if(v===-1){if(u!==-1)throw new Error(O.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,g));u=g,l.push(1)}else{if(v<0)throw new Error(O.getSparseReshapeNegativeOutputDimErrorMessage(g,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(O.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let g=Math.trunc(i/c);if(c*g!==i)throw new Error(O.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=g}if(x.sizeFromShape(l)!==i)throw new Error(O.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let p=r.length,h=[];if(p>0){h[p-1]=1;for(let g=p-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}let f=[];if(a>0){f[a-1]=1;for(let g=a-2;g>=0;--g)f[g]=f[g+1]*l[g+1]}let m=x.getArrayFromDType(e,s*a);for(let g=0;g<s;++g){let v=0;for(let w=0;w<p;++w)v+=t[g*p+w]*h[w];for(let w=0;w<a;++w)m[g*a+w]=Math.trunc(v/f[w]),v%=f[w]}return[m,[s,a],l]}function Wv(t,n,e,r,o,i=!1,s=0){let a=r.length,l=[n[0],t.length/n[0]],c=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(O.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=n.slice();p[0]=d;let h=p.reduce((y,_)=>y*_,1),f=x.getArrayFromDType(e,h);if(a===0)return d>0&&f.fill(s),[f,p];if(d<=0)throw new Error(O.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,g=1,v=0,w=o[m];for(;;){let y=0;if(g<a){if(y=o[g],w===y){++g;continue}if(w>=y)throw new Error(O.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(w<0||w>=d)throw new Error(O.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(w,d));w>v&&f.fill(s,v*c,w*c);for(let _=m;_<g;++_){let k=r[_];if(k<0||k>=l[0])throw new Error(O.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_,r[_],l[0]));for(let M=0;M<c;M++)f[w*c+M]+=t[k*c+M]}if(i)for(let _=0;_<c;_++)f[w*c+_]/=g-m;if(m=g,++g,v=w+1,w=y,g>a)break}return v<d&&f.fill(s,v*c,d*c),[f,p]}var hne=Ao(t=>Math.sqrt(t)),c5e=St(du,t=>Math.sqrt(t)),fne={kernelName:du,backendName:"cpu",kernelFunc:c5e};var LL=sn((t,n)=>{let e=t-n;return e*e}),u5e=fn(pu,LL),mne={kernelName:pu,backendName:"cpu",kernelFunc:u5e};var $L=Ao((t,n)=>{let{pattern:e,replaceGlobal:r,rewrite:o}=n;return t.replace(new RegExp(e,r?"g":""),o)}),d5e=ds(Lh,$L),gne={kernelName:Lh,backendName:"cpu",kernelFunc:d5e};function nE(t,n,e,r){let o=st(t,n.dtype);for(let i=0;i<o.size;i++){let s=o.indexToLoc(i),a=new Array(s.length);for(let l=0;l<a.length;l++)a[l]=s[l]*e[l]+r[l];o.set(n.get(...a),...s)}return o}var VL=class{constructor(n,e,r,o,i,s){this.separator=x.encodeString(n),this.nGramWidths=e,this.leftPad=x.encodeString(r),this.rightPad=x.encodeString(o),this.padWidth=i,this.preserveShort=s}getPadWidth(n){return Math.min(this.padWidth<0?n-1:this.padWidth,n-1)}getNumNGrams(n,e){let r=this.getPadWidth(e);return Math.max(0,n+2*r-e+1)}createNGrams(n,e,r,o,i,s){for(let a=0;a<i;++a){let l=this.getPadWidth(s),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),d=s-(c+u),p=e+(c>0?0:a-l),h=0;h+=c*this.leftPad.length;for(let w=0;w<d;++w)h+=n[p+w].length;h+=u*this.rightPad.length;let f=c+u+d-1;h+=f*this.separator.length,r[o+a]=new Uint8Array(h);let m=r[o+a],g=0,v=w=>w.forEach(y=>m[g++]=y);for(let w=0;w<c;++w)v(this.leftPad),v(this.separator);for(let w=0;w<d-1;++w)v(n[p+w]),v(this.separator);if(d>0){v(n[p+d-1]);for(let w=0;w<u;++w)v(this.separator),v(this.rightPad)}else{for(let w=0;w<u-1;++w)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(n,e){let r=n.length,o=e.length;if(o>0){let l=e[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<o;++c){let u=e[c]>=l;if(u=u&&e[c]<=r,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${r}]`);l=e[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}let i=o-1,s=x.getArrayFromDType("int32",o);if(r===0||o===0){let l=new Array(r);for(let c=0;c<=i;++c)s[c]=0;return[l,s]}s[0]=0;for(let l=1;l<=i;++l){let c=e[l]-e[l-1],u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),s[l]=s[l-1]+u}let a=new Array(s[i]);for(let l=0;l<i;++l){let c=e[l],u=s[l];if(this.nGramWidths.forEach(d=>{let p=e[l+1]-e[l],h=this.getNumNGrams(p,d);this.createNGrams(n,c,a,u,h,d),u+=h}),this.preserveShort&&u===s[l]){let d=e[l+1]-e[l];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(n,c,a,u,1,p)}}return[a,s]}};function rE(t,n,e,r,o,i,s,a){return new VL(e,r,o,i,s,a).compute(t,n)}function p5e(t,n,e,r){if(!t.length)return;if(n.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(n.length===1){let i=n[0],s=t.indexOf(i);for(;s!==-1;){let a=t.subarray(0,s);(!e||a.length!==0)&&r.push(a),t=t.subarray(s+1),s=t.indexOf(i)}(!e||t.length!==0)&&r.push(t);return}let o=0;for(let i=0;i<t.length+1;i++)if(i===t.length||n.indexOf(t[i])!==-1){let s=t.subarray(o,i);(!e||s.length!==0)&&r.push(s),o=i+1}}function oE(t,n,e){let r=t.length,o=[],i=0,s=0,a=new Array(r);for(let p=0;p<r;++p){let h=o.length;p5e(t[p],n,e,o);let f=o.length-h;a[p]=f,i+=f,s=Math.max(s,f)}let l=x.getArrayFromDType("int32",i*2),c=new Array(i),u=[r,s],d=0;for(let p=0;p<r;++p)for(let h=0;h<a[p];++h)l[d*2]=p,l[d*2+1]=h,c[d]=o[d],++d;return[l,c,u]}function iE(t,n){let e=x.getArrayFromDType("int32",t.length);for(let r=0;r<t.length;++r)e[r]=x.fingerPrint64(t[r]).modulo(n).getLowBitsUnsigned();return e}var jL=sn((t,n)=>t-n),h5e=Hv((t,n,e,r)=>({real:t-e,imag:n-r})),Ek=fn(hu,jL,h5e),vne={kernelName:hu,backendName:"cpu",kernelFunc:Ek};function sE(t,n){let e=new Array(t.rank);for(let o=0;o<e.length;o++)e[o]=t.shape[o]*n[o];let r=st(e,t.dtype);for(let o=0;o<r.values.length;++o){let i=r.indexToLoc(o),s=new Array(t.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%t.shape[l];let a=t.locToIndex(s);r.values[o]=t.values[a]}return r}var Ik=(t,n)=>{let e=n.value-t.value;return e===0?t.index-n.index:e};function wne(t,n,e=0,r=t.length-1){for(;r>e;){if(r-e>600){let a=r-e+1,l=n-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),p=Math.max(e,Math.floor(n-l*u/a+d)),h=Math.min(r,Math.floor(n+(a-l)*u/a+d));wne(t,n,p,h)}let o=t[n],i=e,s=r;for(x.swap(t,e,n),Ik(t[r],o)>0&&x.swap(t,e,r);i<s;){for(x.swap(t,i,s),i++,s--;Ik(t[i],o)<0;)i=i+1;for(;Ik(t[s],o)>0;)s=s-1}Ik(t[e],o)===0?x.swap(t,e,s):(s=s+1,x.swap(t,s,r)),s<=n&&(e=s+1),n<=s&&(r=s-1)}}function aE(t,n,e,r,o){let i=n[n.length-1],[s,a]=[t.length/i,i],l=x.getTypedArrayFromDType(e,s*r),c=x.getTypedArrayFromDType("int32",s*r);for(let d=0;d<s;d++){let p=d*a,h=t.subarray(p,p+a),f=new Array(h.length);h.forEach((w,y)=>f[y]={value:w,index:y}),r<f.length&&(wne(f,r),f=f.slice(0,r)),o&&f.sort(Ik);let m=d*r,g=l.subarray(m,m+r),v=c.subarray(m,m+r);for(let w=0;w<r;w++)g[w]=f[w].value,v[w]=f[w].index}let u=n.slice();return u[u.length-1]=r,[st(u,e,l),st(u,"int32",c)]}function lE(t,n,e,r){let o=x.parseAxisParam(n,e)[0],i=[1,e[0],1];for(let f=0;f<o;f++)i[0]*=e[f];i[1]=e[o];for(let f=o+1;f<e.length;f++)i[2]*=e[f];let s=new Map,a=new Int32Array(e[o]),l=new wn(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let f=0;f<e[o];f++){let m;if(u)m=t[f].toString();else{let v=[];for(let w=0;w<i[0];w++)for(let y=0;y<i[2];y++)v.push(l.get(w,f,y));m=v.join(",")}let g=s.get(m);if(g!=null)a[f]=g;else{let v=s.size;s.set(m,v),a[f]=v,c.push(f)}}let d=i.slice();d[1]=s.size;let p=new wn(d,r);c.forEach((f,m)=>{for(let g=0;g<i[0];g++)for(let v=0;v<i[2];v++)p.set(l.get(g,f,v),g,m,v)});let h=e.slice();return h[o]=d[1],{outputValues:p.values,outputShape:h,indices:a}}var cE="4.22.0";Gx("cpu",()=>new HD,1);var zL=St(Bc,t=>t>=0?t:Math.exp(t)-1),yne={kernelName:Bc,backendName:"cpu",kernelFunc:zL};function HL(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{alpha:i}=r;_e([o],"leakyRelu");let s=x.sizeFromShape(o.shape),a=e.data.get(o.dataId).values,l=x.getTypedArrayFromDType("float32",s);for(let c=0;c<a.length;c++)l[c]=a[c]<0?i*a[c]:a[c];return e.makeTensorInfo(o.shape,"float32",l)}var xne={kernelName:Pd,backendName:"cpu",kernelFunc:HL};var f5e=sn((t,n)=>t<0?n*t:t);function UL(t){let{inputs:n,backend:e}=t,{x:r,alpha:o}=n;_e([r,o],"prelu");let i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,[a,l]=f5e(r.shape,o.shape,i,s,"float32");return e.makeTensorInfo(l,"float32",a)}var _ne={kernelName:Zd,backendName:"cpu",kernelFunc:UL};var GL=St(tu,t=>Math.max(0,t)),kne={kernelName:tu,backendName:"cpu",kernelFunc:GL};var WL=St(nu,t=>Math.min(Math.max(0,t),6)),bne={kernelName:nu,backendName:"cpu",kernelFunc:WL};function X0(t,n,e,r,o){if(e==="linear")return fi({inputs:{x:n},backend:t});if(e==="relu")return GL({inputs:{x:n},backend:t});if(e==="elu")return zL({inputs:{x:n},backend:t});if(e==="relu6")return WL({inputs:{x:n},backend:t});if(e==="prelu")return UL({inputs:{x:n,alpha:r},backend:t});if(e==="leakyrelu")return HL({inputs:{x:n},backend:t,attrs:{alpha:o}});if(e==="sigmoid")return PL({inputs:{x:n},backend:t});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}function an(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{shape:i}=r,s=x.sizeFromShape(o.shape),a=x.inferFromImplicitShape(i,s),l=x.sizeFromShape(a);x.assert(s===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),e.incRef(o.dataId);let c=e.data.get(o.dataId);if(c.complexTensorInfos!=null){let u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}var Cne={kernelName:Yd,backendName:"cpu",kernelFunc:an};function qL(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i}=n,{transposeA:s,transposeB:a}=r;_e([o,i],"matMul");let l=o.shape.length,c=i.shape.length,u=s?o.shape[l-2]:o.shape[l-1],d=a?i.shape[c-1]:i.shape[c-2],p=s?o.shape[l-1]:o.shape[l-2],h=a?i.shape[c-2]:i.shape[c-1],f=o.shape.slice(0,-2),m=i.shape.slice(0,-2),g=x.sizeFromShape(f),v=x.sizeFromShape(m),y=os.assertAndGetBroadcastShape(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,h]);x.assert(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${o.shape} and ${i.shape} and transposeA=${s} and transposeB=${a} must match.`);let _=s?[g,u,p]:[g,p,u],k=a?[v,h,d]:[v,d,h],M=an({inputs:{x:o},backend:e,attrs:{shape:_}}),E=an({inputs:{x:i},backend:e,attrs:{shape:k}}),A=s?M.shape[1]:M.shape[2],P=s?M.shape[2]:M.shape[1],N=a?E.shape[1]:E.shape[2],B=Math.max(g,v),S=e.data.get(M.dataId).values,W=e.data.get(E.dataId).values,ie=x.computeStrides(M.shape),Z=x.computeStrides(E.shape),[X,G,H]=s?[ie[0],1,ie[1]]:[ie[0],ie[1],1],[V,K,pe]=a?[1,Z[1],Z[0]]:[Z[1],1,Z[0]],le=P*N,se=st([B,P,N],M.dtype),ye=se.values,Ae=e.blockSize;for(let Re=0;Re<B;Re++){let Ce=Re%g,Je=Re%v;for(let qe=0;qe<P;qe+=Ae){let xt=Math.min(qe+Ae,P);for(let bt=0;bt<N;bt+=Ae){let T=Math.min(bt+Ae,N);for(let we=0;we<A;we+=Ae){let he=Math.min(we+Ae,A);for(let q=qe;q<xt;q++)for(let j=bt;j<T;j++){let oe=0;for(let xe=we;xe<he;xe++){let Fe=S[Ce*X+q*G+xe*H],ce=W[xe*V+j*K+Je*pe];oe+=Fe*ce}ye[Re*le+(q*N+j)]+=oe}}}}}return e.disposeIntermediateTensorInfo(M),e.disposeIntermediateTensorInfo(E),e.makeTensorInfo(y,se.dtype,se.values)}var Sne={kernelName:bd,backendName:"cpu",kernelFunc:qL};function m5e(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r,p,h,f,m=[];p=qL({inputs:{a:o,b:i},attrs:{transposeA:l,transposeB:c},backend:e}),s&&(h=Fu({inputs:{a:p,b:s},backend:e}),m.push(p),p=h),u&&(f=X0(e,p,u,a,d),m.push(p),p=f);for(let v of m)e.disposeIntermediateTensorInfo(v);return p}var Mne={kernelName:$h,backendName:"cpu",kernelFunc:m5e};var g5e=St(Sc,t=>Math.acos(t)),Tne={kernelName:Sc,backendName:"cpu",kernelFunc:g5e};var v5e=St(Mc,t=>Math.acosh(t)),Dne={kernelName:Mc,backendName:"cpu",kernelFunc:v5e};function w5e(t){let{inputs:n,backend:e}=t,r=n;_e(n,"addN");let o=r.map(a=>e.data.get(a.dataId).values),i=st(r[0].shape,r[0].dtype),s=i.values;for(let a=0;a<r.length;a++){let l=o[a];for(let c=0;c<s.length;c++)s[c]+=l[c]}return e.makeTensorInfo(i.shape,i.dtype,i.values)}var Ene={kernelName:wd,backendName:"cpu",kernelFunc:w5e};function y5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;_e(o,"all");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=gr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("all",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let _=0;_<h;++_){let k=m[w+_];y=y&&k}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=an({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var Ine={kernelName:Zm,backendName:"cpu",kernelFunc:y5e};function x5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;_e(o,"any");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=gr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("any",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let _=0;_<h;++_){let k=m[w+_];y=y||k}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=an({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var Nne={kernelName:Xm,backendName:"cpu",kernelFunc:x5e};function _5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r;_e(o,"argMax");let s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=gr({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],O.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,d]=O.computeOutAndReduceShapes(l.shape,s),p=x.sizeFromShape(u),h=x.makeZerosTypedArray(p,"int32"),f=x.sizeFromShape(d),m=e.data.get(l.dataId).values;for(let g=0;g<h.length;++g){let v=g*f,w=m[v],y=0;for(let _=0;_<f;++_){let k=m[v+_];k>w&&(w=k,y=_)}h[g]=y}return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),e.makeTensorInfo(u,"int32",h)}var Ane={kernelName:yd,backendName:"cpu",kernelFunc:_5e};function k5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r;_e(o,"argMin");let s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=gr({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],O.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,d]=O.computeOutAndReduceShapes(l.shape,s),p=x.sizeFromShape(u),h=x.makeZerosTypedArray(p,"int32"),f=x.sizeFromShape(d),m=e.data.get(l.dataId).values;for(let g=0;g<h.length;++g){let v=g*f,w=m[v],y=0;for(let _=0;_<f;++_){let k=m[v+_];k<w&&(w=k,y=_)}h[g]=y}return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),e.makeTensorInfo(u,"int32",h)}var Rne={kernelName:xd,backendName:"cpu",kernelFunc:k5e};var b5e=St(Tc,t=>Math.asin(t)),One={kernelName:Tc,backendName:"cpu",kernelFunc:b5e};var C5e=St(Dc,t=>Math.asinh(t)),Fne={kernelName:Dc,backendName:"cpu",kernelFunc:C5e};var S5e=St(Ec,t=>Math.atan(t)),Pne={kernelName:Ec,backendName:"cpu",kernelFunc:S5e};var M5e=sn((t,n)=>Math.atan2(t,n)),T5e=fn(Nc,M5e),Bne={kernelName:Nc,backendName:"cpu",kernelFunc:T5e};var D5e=St(Ic,t=>Math.atanh(t)),Lne={kernelName:Ic,backendName:"cpu",kernelFunc:D5e};function qv(t,n,e,r,o,i){let s=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,p=o.padInfo.top,h=o.padInfo.left,f=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=st(o.outShape,e),g=m.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],w=o.outShape[2]*o.outShape[3],y=o.outShape[3];for(let _=0;_<o.batchSize;++_){let k=_*v,M=_*r[0];for(let E=0;E<o.inChannels;++E)for(let A=0;A<o.outHeight;++A){let P=A*s-p,N=Math.max(0,P),B=Math.min(o.inHeight,u+P),S=k+A*w;for(let W=0;W<o.outWidth;++W){let ie=W*a-h,Z=Math.max(0,ie),X=Math.min(o.inWidth,d+ie),G=f,H=0,V=0;for(let pe=N;pe<B;pe+=l){let le=M+pe*r[1];for(let se=Z;se<X;se+=c){let ye=le+se*r[2],Ae=t[ye+E];i==="max"&&Ae>G?G=Ae:i==="avg"&&(H+=Ae,V++)}if(isNaN(G))break}let K=S+W*y+E;g[K]=i==="avg"?H/V:G}}}return m}function uE(t,n,e,r,o=!1,i=!1){let s=st(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,m=st(n,e,t);for(let g=0;g<r.batchSize;++g)for(let v=0;v<r.inChannels;++v)for(let w=0;w<r.outHeight;++w){let y=w*a-h,_=y;for(;_<0;)_+=c;let k=Math.min(r.inHeight,d+y);for(let M=0;M<r.outWidth;++M){let E=M*l-f,A=E;for(;A<0;)A+=u;let P=Math.min(r.inWidth,p+E),N=Number.NEGATIVE_INFINITY,B=-1;for(let S=_;S<k;S+=c){let W=S-y;for(let ie=A;ie<P;ie+=u){let Z=ie-E,X=m.get(g,S,ie,v);X>N&&(N=X,o?B=i?((g*r.inHeight+S)*r.inWidth+ie)*r.inChannels+v:(S*r.inWidth+ie)*r.inChannels+v:B=W*p+Z)}}s.set(B,g,w,M,v)}}return s}function dE(t,n,e,r,o,i){let s=o.strideDepth,a=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,u=o.dilationHeight,d=o.dilationWidth,p=o.effectiveFilterDepth,h=o.effectiveFilterHeight,f=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,v=o.padInfo.left,w=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=st(o.outShape,e),_=y.values,k=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],M=o.outShape[2]*o.outShape[3]*o.outShape[4],E=o.outShape[3]*o.outShape[4],A=o.outShape[4];for(let P=0;P<o.batchSize;++P){let N=P*k,B=P*r[0];for(let S=0;S<o.inChannels;++S)for(let W=0;W<o.outDepth;++W){let ie=W*s-m,Z=ie;for(;Z<0;)Z+=c;let X=Math.min(o.inDepth,p+ie),G=N+W*M;for(let H=0;H<o.outHeight;++H){let V=H*a-g,K=V;for(;K<0;)K+=u;let pe=Math.min(o.inHeight,h+V),le=G+H*E;for(let se=0;se<o.outWidth;++se){let ye=se*l-v,Ae=ye;for(;Ae<0;)Ae+=d;let Re=Math.min(o.inWidth,f+ye),Ce=le+se*A,Je=w,qe=0,xt=0;for(let T=Z;T<X;T+=c){let we=B+T*r[1];for(let he=K;he<pe;he+=u){let q=we+he*r[2];for(let j=Ae;j<Re;j+=d){let oe=q+j*r[3],xe=t[oe+S];if(i==="max"&&xe>Je?Je=xe:i==="avg"&&(qe+=xe,xt++),isNaN(Je))break}if(isNaN(Je))break}if(isNaN(Je))break}let bt=Ce+S;_[bt]=i==="avg"?qe/Math.max(xt,1):Je}}}}return y}function $ne(t,n){let e=st(n.outShape,"int32"),r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,s=n.dilationDepth,a=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,u=n.effectiveFilterHeight,d=n.effectiveFilterWidth,p=n.padInfo.front,h=n.padInfo.top,f=n.padInfo.left;for(let m=0;m<n.batchSize;++m)for(let g=0;g<n.inChannels;++g)for(let v=0;v<n.outDepth;++v){let w=v*r-p,y=w;for(;y<0;)y+=s;let _=Math.min(n.inDepth,c+w);for(let k=0;k<n.outHeight;++k){let M=k*o-h,E=M;for(;E<0;)E+=a;let A=Math.min(n.inHeight,u+M);for(let P=0;P<n.outWidth;++P){let N=P*i-f,B=N;for(;B<0;)B+=l;let S=Math.min(n.inWidth,d+N),W=Number.NEGATIVE_INFINITY,ie=-1;for(let Z=y;Z<_;Z+=s){let X=Z-w;for(let G=E;G<A;G+=a){let H=G-M;for(let V=B;V<S;V+=l){let K=V-N,pe=t.get(m,Z,G,V,g);pe>=W&&(W=pe,ie=X*u*d+H*u+K)}}}e.set(ie,m,v,k,P,g)}}}return e}function E5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;_e(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))d=fi({inputs:{x:o},backend:e});else{let p=e.data.get(o.dataId).values,h=x.computeStrides(o.shape),f=qv(p,o.shape,o.dtype,h,u,"avg");d=e.makeTensorInfo(u.outShape,o.dtype,f.values)}return d}var Vne={kernelName:_d,backendName:"cpu",kernelFunc:E5e};function I5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;_e(o,"avgPool3d");let u=O.computePool3DInfo(o.shape,i,s,1,a,l,c),d=e.data.get(o.dataId).values,p=dE(d,o.shape,o.dtype,x.computeStrides(o.shape),u,"avg");return e.makeTensorInfo(p.shape,"float32",p.values)}var jne={kernelName:kd,backendName:"cpu",kernelFunc:I5e};function N5e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;_e([o,i],"avgPool3DGrad");let u=O.computePool3DInfo(i.shape,s,a,1,l,c),d=u.strideDepth,p=u.strideHeight,h=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,v=u.dilationDepth,w=u.dilationHeight,y=u.dilationWidth,_=u.effectiveFilterDepth,k=u.effectiveFilterHeight,M=u.effectiveFilterWidth,E=_-1-u.padInfo.front,A=M-1-u.padInfo.left,P=k-1-u.padInfo.top,N=st(i.shape,"float32"),B=1/(f*m*g),S=e.bufferSync(o);for(let W=0;W<u.batchSize;++W)for(let ie=0;ie<u.inChannels;++ie)for(let Z=0;Z<u.inDepth;++Z)for(let X=0;X<u.inHeight;++X)for(let G=0;G<u.inWidth;++G){let H=Z-E,V=X-P,K=G-A,pe=0;for(let le=0;le<_;le+=v){let se=(H+le)/d;if(!(se<0||se>=u.outDepth||Math.floor(se)!==se))for(let ye=0;ye<k;ye+=w){let Ae=(V+ye)/p;if(!(Ae<0||Ae>=u.outHeight||Math.floor(Ae)!==Ae))for(let Re=0;Re<M;Re+=y){let Ce=(K+Re)/h;if(Ce<0||Ce>=u.outWidth||Math.floor(Ce)!==Ce)continue;let Je=S.get(W,se,Ae,Ce,ie);pe+=Je}}}N.set(pe*B,W,Z,X,G,ie)}return e.makeTensorInfo(N.shape,N.dtype,N.values)}var zne={kernelName:Qm,backendName:"cpu",kernelFunc:N5e};function A5e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i;_e([o,i],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=r,u=O.computePool2DInfo(s.shape,a,l,1,c),d=u.strideHeight,p=u.strideWidth,h=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,v=u.effectiveFilterHeight,w=u.effectiveFilterWidth,y=w-1-u.padInfo.left,_=v-1-u.padInfo.top,k=st(s.shape,"float32"),M=1/(h*f),E=e.data.get(o.dataId).values,A=st(o.shape,"float32",E);for(let P=0;P<u.batchSize;++P)for(let N=0;N<u.inChannels;++N)for(let B=0;B<u.inHeight;++B)for(let S=0;S<u.inWidth;++S){let W=B-_,ie=S-y,Z=0;for(let X=0;X<v;X+=m){let G=(W+X)/d;if(!(G<0||G>=u.outHeight||Math.floor(G)!==G))for(let H=0;H<w;H+=g){let V=(ie+H)/p;if(V<0||V>=u.outWidth||Math.floor(V)!==V)continue;let K=A.get(P,G,V,N);Z+=K}}k.set(Z*M,P,B,S,N)}return e.makeTensorInfo(k.shape,k.dtype,k.values)}var Hne={kernelName:Ym,backendName:"cpu",kernelFunc:A5e};function R5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,scale:i,offset:s,mean:a,variance:l}=n;x.assert(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),x.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),x.assert(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),_e([o,a,l,i,s],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);let u=e.data.get(o.dataId).values,d=e.data.get(a.dataId).values,p=e.data.get(l.dataId).values,h=i?e.data.get(i.dataId).values:new Float32Array([1]),f=s?e.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,v=h.length,w=p.length,y=d.length,_=0,k=0,M=0,E=0;for(let A=0;A<u.length;++A)m[A]=f[_++]+(u[A]-d[k++])*h[M++]/Math.sqrt(p[E++]+c),_>=g&&(_=0),k>=y&&(k=0),M>=v&&(M=0),E>=w&&(E=0);return e.makeTensorInfo(o.shape,o.dtype,m)}var Une={kernelName:Od,backendName:"cpu",kernelFunc:R5e};function O5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,crops:s}=r;_e([o],"batchToSpaceND");let a=i.reduce((v,w)=>v*w),l=O.getReshaped(o.shape,i,a),c=O.getPermuted(l.length,i.length),u=O.getReshapedPermuted(o.shape,i,a),d=O.getSliceBeginCoords(s,i.length),p=O.getSliceSize(u,s,i.length),h=an({inputs:{x:o},backend:e,attrs:{shape:l}}),f=gr({inputs:{x:h},backend:e,attrs:{perm:c}}),m=an({inputs:{x:f},backend:e,attrs:{shape:u}}),g=Wa({inputs:{x:m},backend:e,attrs:{begin:d,size:p}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),g}var Gne={kernelName:Cd,backendName:"cpu",kernelFunc:O5e};function F5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s}=r,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,c=Uv(a,l,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,c)}var Wne={kernelName:Jm,backendName:"cpu",kernelFunc:F5e};function P5e(t){let{inputs:n,backend:e}=t,{s0:r,s1:o}=n,i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,a=O.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var qne={kernelName:eg,backendName:"cpu",kernelFunc:P5e};var B5e=St(Rc,(t,n)=>{let e=n;return t>e.clipValueMax?e.clipValueMax:t<e.clipValueMin?e.clipValueMin:t}),Kne={kernelName:Rc,backendName:"cpu",kernelFunc:B5e};var L5e=t=>{let{x:n}=t.inputs,e=t.backend,r=new Float32Array(x.sizeFromShape(n.shape)),o=e.data.get(n.dataId),i=o.complexTensorInfos.real,s=o.complexTensorInfos.imag,a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values;for(let c=0;c<a.length;c++){let u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return e.makeOutput(r,n.shape,"float32")},Zne={kernelName:Sd,backendName:"cpu",kernelFunc:L5e};function Pu(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.data.get(r.dataId).complexTensorInfos.imag,i=e.data.get(o.dataId).values;return e.makeTensorInfo(o.shape,o.dtype,i)}var Xne={kernelName:yg,backendName:"cpu",kernelFunc:Pu};function vf(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r,i=x.parseAxisParam(o,n[0].shape)[0],s=n.map(m=>m.shape);O.assertParamsConsistent(s,i);let a=O.computeOutShape(n.map(m=>m.shape),i);if(x.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(m=>x.sizeFromShape(m.shape)>0);if(l.length===1)return fi({inputs:{x:l[0]},backend:e});if(l[0].dtype==="complex64"){let m=l.map(_=>Ha({inputs:{input:_},backend:e})),g=l.map(_=>Pu({inputs:{input:_},backend:e})),v=vf({inputs:m,backend:e,attrs:{axis:i}}),w=vf({inputs:g,backend:e,attrs:{axis:i}}),y=vo({inputs:{real:v,imag:w},backend:e});return m.forEach(_=>e.disposeIntermediateTensorInfo(_)),g.forEach(_=>e.disposeIntermediateTensorInfo(_)),e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(w),y}let c=l.map(m=>{let v=[-1,x.sizeFromShape(m.shape.slice(i))];return an({inputs:{x:m},backend:e,attrs:{shape:v}})}),u=c.map(m=>({vals:e.data.get(m.dataId).values,shape:m.shape}));a=O.computeOutShape(c.map(m=>m.shape),1);let d=c[0].shape[0]===1,p=GD(u,a,n[0].dtype,d),h=O.computeOutShape(l.map(m=>m.shape),i),f=e.makeTensorInfo(h,n[0].dtype,p);return c.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}var Yne={kernelName:Md,backendName:"cpu",kernelFunc:vf};function KL(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;_e([o,i],"conv2d");let d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,i.shape,s,c,a,u,!1,d),h=p.filterHeight,f=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,v=p.padInfo.left,w=p.padInfo.top,y=p.dataFormat==="channelsLast",_=new wn(p.outShape,o.dtype),k=x.computeStrides(o.shape),M=x.computeStrides(i.shape),E=k[0],A=y?k[1]:k[2],P=y?k[2]:1,N=y?1:k[1],B=_.strides[0],S=y?_.strides[1]:_.strides[2],W=y?_.strides[2]:1,ie=y?1:_.strides[1],Z=e.data.get(o.dataId).values,X=e.data.get(i.dataId).values,G=_.values;for(let H=0;H<p.batchSize;++H){let V=H*E,K=H*B;for(let pe=0;pe<p.outHeight;++pe){let le=K+pe*S,se=pe*p.strideHeight-w;for(let ye=0;ye<h;++ye){let Ae=se+ye*m;if(Ae<0||Ae>=p.inHeight)continue;let Re=ye*M[0],Ce=V+Ae*A;for(let Je=0;Je<p.outWidth;++Je){let qe=le+Je*W,xt=Je*p.strideWidth-v;for(let bt=0;bt<f;++bt){let T=xt+bt*g;if(T<0||T>=p.inWidth)continue;let we=Re+bt*M[1],he=Ce+T*P,q=we;for(let j=0;j<p.inChannels;++j){let oe=Z[he+j*N];for(let xe=0;xe<p.outChannels;++xe)G[qe+xe*ie]+=oe*X[q+xe];q+=p.outChannels}}}}}}return e.makeTensorInfo(_.shape,_.dtype,G)}var Qne={kernelName:Td,backendName:"cpu",kernelFunc:KL};function $5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;_e([o,i],"conv2dBackpropFilter");let d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,u,s,1,a,c,!1,d),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=p,v=p.dataFormat==="channelsLast",w=new wn(p.filterShape,"float32"),y=p.padInfo.left,_=p.padInfo.top,k=e.data.get(o.dataId).values,M=e.data.get(i.dataId).values,E=new wn(o.shape,o.dtype,k),A=new wn(i.shape,i.dtype,M);for(let P=0;P<m;++P){let N=Math.max(0,Math.ceil((_-P)/h)),B=Math.min(p.outHeight,(p.inHeight+_-P)/h);for(let S=0;S<g;++S){let W=Math.max(0,Math.ceil((y-S)/f)),ie=Math.min(p.outWidth,(p.inWidth+y-S)/f);for(let Z=0;Z<p.inChannels;++Z)for(let X=0;X<p.outChannels;++X){let G=0;for(let H=0;H<p.batchSize;++H)for(let V=N;V<B;++V){let K=P+V*h-_;for(let pe=W;pe<ie;++pe){let le=S+pe*f-y;v?G+=E.get(H,K,le,Z)*A.get(H,V,pe,X):G+=E.get(H,Z,K,le)*A.get(H,X,V,pe)}}w.set(G,P,S,Z,X)}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}var Jne={kernelName:ng,backendName:"cpu",kernelFunc:$5e};function V5e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;_e([o,i],"conv2dBackpropInput");let d=x.computeStrides(i.shape),p=x.computeStrides(o.shape),h=O.convertConv2DDataFormat(c),f=O.computeConv2DInfo(s,i.shape,a,1,l,u,!1,h),m=new wn(f.inShape,"float32"),g=m.values,v=e.data.get(o.dataId).values,w=e.data.get(i.dataId).values,[y,_,k]=d,{batchSize:M,filterHeight:E,filterWidth:A,inChannels:P,inHeight:N,inWidth:B,outChannels:S,outHeight:W,outWidth:ie,strideHeight:Z,strideWidth:X}=f;h=f.dataFormat;let G=E-1-f.padInfo.top,H=A-1-f.padInfo.left,V=h==="channelsLast",K=m.strides[0],pe=V?m.strides[1]:m.strides[2],le=V?m.strides[2]:1,se=V?1:m.strides[1],ye=p[0],Ae=V?p[1]:p[2],Re=V?p[2]:1,Ce=V?1:p[1];for(let Je=0;Je<M;++Je)for(let qe=0;qe<P;++qe)for(let xt=0;xt<N;++xt){let bt=xt-G,T=Math.max(0,Math.ceil(bt/Z)),we=Math.min(W,(E+bt)/Z);for(let he=0;he<B;++he){let q=he-H,j=Math.max(0,Math.ceil(q/X)),oe=Math.min(ie,(A+q)/X),xe=0;for(let ce=T;ce<we;++ce){let Ue=ce*Z-bt;for(let tt=j;tt<oe;++tt){let Ke=tt*X-q,mt=ye*Je+Ae*ce+Re*tt,kn=y*(E-1-Ue)+_*(A-1-Ke)+k*qe;for(let ln=0;ln<S;++ln){let lo=v[mt+Ce*ln],vs=w[kn+ln];xe+=lo*vs}}}let Fe=K*Je+pe*xt+le*he+se*qe;g[Fe]=xe}}return e.makeTensorInfo(m.shape,m.dtype,m.values)}var ere={kernelName:Dd,backendName:"cpu",kernelFunc:V5e};function j5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r;_e([o,i],"conv3d");let c=O.computeConv3DInfo(o.shape,i.shape,s,l,a),{filterDepth:u,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=c,v=g.front,w=g.left,y=g.top,_=new wn(c.outShape,o.dtype),k=e.data.get(o.dataId).values,M=e.data.get(i.dataId).values,E=_.values,A=x.computeStrides(o.shape),P=x.computeStrides(i.shape);for(let N=0;N<c.batchSize;++N){let B=N*A[0],S=N*_.strides[0];for(let W=0;W<c.outDepth;++W){let ie=S+W*_.strides[1],Z=W*c.strideDepth-v;for(let X=0;X<u;++X){let G=Z+X*h;if(G<0||G>=c.inDepth)continue;let H=X*P[0],V=B+G*A[1];for(let K=0;K<c.outHeight;++K){let pe=ie+K*_.strides[2],le=K*c.strideHeight-y;for(let se=0;se<d;++se){let ye=le+se*f;if(ye<0||ye>=c.inHeight)continue;let Ae=H+se*P[1],Re=V+ye*A[2];for(let Ce=0;Ce<c.outWidth;++Ce){let Je=pe+Ce*c.outChannels,qe=Ce*c.strideWidth-w;for(let xt=0;xt<p;++xt){let bt=qe+xt*m;if(bt<0||bt>=c.inWidth)continue;let T=Ae+xt*P[2],we=Re+bt*c.inChannels,he=T;for(let q=0;q<c.inChannels;++q){let j=k[we+q];for(let oe=0;oe<c.outChannels;++oe)E[Je+oe]+=j*M[he+oe];he+=c.outChannels}}}}}}}}return e.makeTensorInfo(_.shape,_.dtype,_.values)}var tre={kernelName:Ed,backendName:"cpu",kernelFunc:j5e};function z5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,filterShape:l}=r;_e([o,i],"conv3dBackpropFilterV2");let c=x.computeStrides(o.shape),u=x.computeStrides(i.shape),d=O.computeConv3DInfo(o.shape,l,s,1,a),p=d.strideDepth,h=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,w=new wn(d.filterShape,"float32"),y=w.values,[_,k,M,E]=w.strides,A=e.data.get(i.dataId).values,[P,N,B,S]=u,W=e.data.get(o.dataId).values,[ie,Z,X,G]=c,H=d.padInfo.front,V=d.padInfo.left,K=d.padInfo.top;for(let pe=0;pe<m;++pe){let le=Math.max(0,Math.ceil((H-pe)/p)),se=Math.min(d.outDepth,(d.inDepth+H-pe)/p),ye=pe*_;for(let Ae=0;Ae<g;++Ae){let Re=Math.max(0,Math.ceil((K-Ae)/h)),Ce=Math.min(d.outHeight,(d.inHeight+K-Ae)/h),Je=Ae*k+ye;for(let qe=0;qe<v;++qe){let xt=Math.max(0,Math.ceil((V-qe)/f)),bt=Math.min(d.outWidth,(d.inWidth+V-qe)/f),T=qe*M+Je;for(let we=0;we<d.inChannels;++we){let he=we*E+T;for(let q=0;q<d.outChannels;++q){let j=0;for(let oe=0;oe<d.batchSize;++oe){let xe=oe*ie,Fe=oe*P;for(let ce=le;ce<se;++ce){let tt=(pe+ce*p-H)*Z+xe,Ke=ce*N+Fe;for(let mt=Re;mt<Ce;++mt){let ln=(Ae+mt*h-K)*X+tt,lo=mt*B+Ke;for(let vs=xt;vs<bt;++vs){let Zu=(qe+vs*f-V)*G+ln,Cr=vs*S+lo;j+=W[Zu+we]*A[Cr+q]}}}}y[he+q]=j}}}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}var nre={kernelName:rg,backendName:"cpu",kernelFunc:z5e};function H5e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{pad:s,strides:a,inputShape:l}=r;_e([o],"conv3dBackpropInputV2");let c=x.computeStrides(o.shape),u=x.computeStrides(i.shape),d=O.computeConv3DInfo(l,i.shape,a,1,s),p=new wn(d.inShape,"float32"),h=p.values,[f,m,g,v]=p.strides,w=e.data.get(o.dataId).values,[y,_,k,M]=c,E=e.data.get(i.dataId).values,[A,P,N,B]=u,{batchSize:S,filterDepth:W,filterHeight:ie,filterWidth:Z,inChannels:X,inDepth:G,inHeight:H,inWidth:V,outChannels:K,outDepth:pe,outHeight:le,outWidth:se,strideDepth:ye,strideHeight:Ae,strideWidth:Re}=d,Ce=W-1-d.padInfo.front,Je=ie-1-d.padInfo.top,qe=Z-1-d.padInfo.left;for(let xt=0;xt<S;++xt)for(let bt=0;bt<X;++bt)for(let T=0;T<G;++T){let we=T-Ce,he=Math.max(0,Math.ceil(we/ye)),q=Math.min(pe,(W+we)/ye);for(let j=0;j<H;++j){let oe=j-Je,xe=Math.max(0,Math.ceil(oe/Ae)),Fe=Math.min(le,(ie+oe)/Ae);for(let ce=0;ce<V;++ce){let Ue=ce-qe,tt=Math.max(0,Math.ceil(Ue/Re)),Ke=Math.min(se,(Z+Ue)/Re),mt=0;for(let kn=he;kn<q;++kn){let ln=kn*ye-we;for(let lo=xe;lo<Fe;++lo){let vs=lo*Ae-oe;for(let Ti=tt;Ti<Ke;++Ti){let Zu=Ti*Re-Ue,Cr=y*xt+_*kn+k*lo+M*Ti,C2=A*(W-1-ln)+P*(ie-1-vs)+N*(Z-1-Zu)+B*bt;for(let eh=0;eh<K;++eh){let tl=w[Cr+eh],Xb=E[C2+eh];mt+=tl*Xb}}}}h[f*xt+m*T+g*j+v*ce+bt]=mt}}}return e.makeTensorInfo(p.shape,p.dtype,p.values)}var rre={kernelName:og,backendName:"cpu",kernelFunc:H5e};var U5e=St(Oc,t=>Math.cos(t)),ore={kernelName:Oc,backendName:"cpu",kernelFunc:U5e};var G5e=St(Fc,t=>Math.cosh(t)),ire={kernelName:Fc,backendName:"cpu",kernelFunc:G5e};function W5e(t){let{inputs:n,backend:e,attrs:r}=t,{image:o,boxes:i,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,p,h]=o.shape,f=i.shape[0],[m,g]=a,v=st([f,m,g,h],"float32"),w=e.data.get(i.dataId).values,y=e.data.get(s.dataId).values,_=e.data.get(o.dataId).values,k=x.computeStrides(o.shape),M=x.computeStrides(v.shape);for(let E=0;E<f;E++){let A=E*4,P=w[A],N=w[A+1],B=w[A+2],S=w[A+3],W=y[E];if(W>=u)continue;let ie=m>1?(B-P)*(d-1)/(m-1):0,Z=g>1?(S-N)*(p-1)/(g-1):0;for(let X=0;X<m;X++){let G=m>1?P*(d-1)+X*ie:.5*(P+B)*(d-1);if(G<0||G>d-1){for(let H=0;H<g;H++)for(let V=0;V<h;V++){let K=V+H*M[2]+X*M[1]+E*M[0];v.values[K]=c}continue}if(l==="bilinear"){let H=Math.floor(G),V=Math.ceil(G),K=G-H;for(let pe=0;pe<g;pe++){let le=g>1?N*(p-1)+pe*Z:.5*(N+S)*(p-1);if(le<0||le>p-1){for(let Re=0;Re<h;Re++){let Ce=Re+pe*M[2]+X*M[1]+E*M[0];v.values[Ce]=c}continue}let se=Math.floor(le),ye=Math.ceil(le),Ae=le-se;for(let Re=0;Re<h;Re++){let Ce=Re+se*k[2]+H*k[1]+W*k[0],Je=_[Ce];Ce=Re+ye*k[2]+H*k[1]+W*k[0];let qe=_[Ce];Ce=Re+se*k[2]+V*k[1]+W*k[0];let xt=_[Ce];Ce=Re+ye*k[2]+V*k[1]+W*k[0];let bt=_[Ce],T=Je+(qe-Je)*Ae,we=xt+(bt-xt)*Ae;Ce=Re+pe*M[2]+X*M[1]+E*M[0],v.values[Ce]=T+(we-T)*K}}}else for(let H=0;H<g;++H){let V=g>1?N*(p-1)+H*Z:.5*(N+S)*(p-1);if(V<0||V>p-1){for(let le=0;le<h;le++){let se=le+H*M[2]+X*M[1]+E*M[0];v.values[se]=c}continue}let K=Math.round(V),pe=Math.round(G);for(let le=0;le<h;le++){let se=le+K*k[2]+pe*k[1]+W*k[0],ye=le+H*M[2]+X*M[1]+E*M[0];v.values[ye]=_[se]}}}}return e.makeTensorInfo(v.shape,v.dtype,v.values)}var sre={kernelName:sg,backendName:"cpu",kernelFunc:W5e};function q5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;_e(o,"cumprod");let l=O.getAxesPermutation([i],o.shape.length),c=o;l!=null&&(c=gr({inputs:{x:o},backend:e,attrs:{perm:l}}));let u=O.getInnerMostAxes(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=Vr(c.dtype,"int32"),p=x.makeOnesTypedArray(x.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=a?(v,w)=>v+f-w-1:(v,w)=>v+w;for(let v=0;v<h.length;v+=f)for(let w=0;w<f;w++){let y=m(v,w);if(w===0)p[y]=s?1:h[y];else{let _=m(v,w-1);p[y]=s?h[_]*p[_]:h[y]*p[_]}}let g=e.makeTensorInfo(c.shape,d,p);if(l!=null){let v=O.getUndoAxesPermutation(l),w=gr({inputs:{x:g},backend:e,attrs:{perm:v}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(c),w}return g}var are={kernelName:ig,backendName:"cpu",kernelFunc:q5e};function K5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;_e(o,"cumsum");let l=O.getAxesPermutation([i],o.shape.length),c=o;l!=null&&(c=gr({inputs:{x:o},backend:e,attrs:{perm:l}}));let u=O.getInnerMostAxes(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=Vr(c.dtype,"int32"),p=x.makeZerosTypedArray(x.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=a?(v,w)=>v+f-w-1:(v,w)=>v+w;for(let v=0;v<h.length;v+=f)for(let w=0;w<f;w++){let y=m(v,w);if(w===0)p[y]=s?0:h[y];else{let _=m(v,w-1);p[y]=s?h[_]+p[_]:h[y]+p[_]}}let g=e.makeTensorInfo(c.shape,d,p);if(l!=null){let v=O.getUndoAxesPermutation(l),w=gr({inputs:{x:g},backend:e,attrs:{perm:v}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(c),w}return g}var lre={kernelName:Id,backendName:"cpu",kernelFunc:K5e};function Z5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s,binaryOutput:a}=r;if(o.shape.length===1){let l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=Uv(l,c,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,u)}else if(o.shape.length===2){let l=e.bufferSync(o),c=e.bufferSync(i),u=UD(l,c,s,a);return e.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var cre={kernelName:ag,backendName:"cpu",kernelFunc:Z5e};function X5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockSize:i,dataFormat:s}=r;x.assert(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);let a=o.shape[0],l=o.shape[1],c=o.shape[2],u=o.shape[3],d=l*i,p=c*i,h=u/(i*i),f=e.data.get(o.dataId).values,m=new Float32Array(a*d*p*h),g=0;for(let v=0;v<a;++v)for(let w=0;w<d;++w){let y=Math.floor(w/i),_=w%i;for(let k=0;k<p;++k){let M=Math.floor(k/i),E=k%i,A=(_*i+E)*h;for(let P=0;P<h;++P){let B=P+A+u*(M+c*(y+l*v));m[g++]=f[B]}}}return e.makeTensorInfo([a,d,p,h],o.dtype,m)}var ure={kernelName:lg,backendName:"cpu",kernelFunc:X5e};function ZL(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r;_e([o,i],"depthwiseConv2DNative");let u=x.computeStrides(o.shape),d=x.computeStrides(i.shape),p=l;p==null&&(p=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);let h=O.computeConv2DInfo(o.shape,i.shape,s,p,a,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:w}=h,y=w.left,_=w.top,k=h.outChannels/h.inChannels,M=new wn(h.outShape,o.dtype),E=e.data.get(o.dataId).values,A=e.data.get(i.dataId).values,P=M.values;for(let N=0;N<h.batchSize;++N){let B=N*u[0],S=N*M.strides[0];for(let W=0;W<h.outHeight;++W){let ie=S+W*M.strides[1],Z=W*h.strideHeight-_;for(let X=0;X<f;++X){let G=Z+X*g;if(G<0||G>=h.inHeight)continue;let H=X*d[0],V=B+G*u[1];for(let K=0;K<h.outWidth;++K){let pe=ie+K*M.strides[2],le=K*h.strideWidth-y;for(let se=0;se<m;++se){let ye=le+se*v;if(ye<0||ye>=h.inWidth)continue;let Ae=H+se*d[1],Re=V+ye*h.inChannels,Ce=pe,Je=Ae;for(let qe=0;qe<h.inChannels;++qe){let xt=E[Re+qe];for(let bt=0;bt<k;++bt)P[Ce+bt]+=xt*A[Je+bt];Ce+=k,Je+=k}}}}}}return e.makeTensorInfo(M.shape,M.dtype,M.values)}var dre={kernelName:Nd,backendName:"cpu",kernelFunc:ZL};function Y5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;_e([o,i],"depthwiseConv2dNativeBackpropFilter");let d=O.computeConv2DInfo(o.shape,u,s,a,l,c,!0),{strideHeight:p,strideWidth:h,filterHeight:f,filterWidth:m}=d,g=new wn(d.filterShape,"float32"),v=d.padInfo.left,w=d.padInfo.top,y=d.outChannels/d.inChannels,_=e.data.get(o.dataId).values,k=new wn(o.shape,o.dtype,_),M=e.data.get(i.dataId).values,E=new wn(i.shape,i.dtype,M);for(let A=0;A<f;++A){let P=Math.max(0,Math.ceil((w-A)/p)),N=Math.min(d.outHeight,(d.inHeight+w-A)/p);for(let B=0;B<m;++B){let S=Math.max(0,Math.ceil((v-B)/h)),W=Math.min(d.outWidth,(d.inWidth+v-B)/h);for(let ie=0;ie<d.outChannels;++ie){let Z=Math.trunc(ie/y),X=ie%y,G=0;for(let H=0;H<d.batchSize;++H)for(let V=P;V<N;++V){let K=A+V*p-w;for(let pe=S;pe<W;++pe){let le=B+pe*h-v;G+=k.get(H,K,le,Z)*E.get(H,V,pe,ie)}}g.set(G,A,B,Z,X)}}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}var pre={kernelName:cg,backendName:"cpu",kernelFunc:Y5e};function Q5e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;_e([o,i],"depthwiseConv2DNativeBackpropInput");let d=x.computeStrides(o.shape),p=x.computeStrides(i.shape),h=O.computeConv2DInfo(u,i.shape,s,a,l,c,!0),f=new wn(h.inShape,"float32"),m=f.values,[g,v,w]=f.strides,y=e.data.get(o.dataId).values,[_,k,M]=d,E=e.data.get(i.dataId).values,[A,P,N]=p,{batchSize:B,filterHeight:S,filterWidth:W,inChannels:ie,inHeight:Z,inWidth:X,outChannels:G,outHeight:H,outWidth:V,strideHeight:K,strideWidth:pe}=h,le=S-1-h.padInfo.top,se=W-1-h.padInfo.left,ye=G/ie;for(let Ae=0;Ae<B;++Ae)for(let Re=0;Re<ie;++Re)for(let Ce=0;Ce<Z;++Ce){let Je=Ce-le,qe=Math.max(0,Math.ceil(Je/K)),xt=Math.min(H,(S+Je)/K);for(let bt=0;bt<X;++bt){let T=bt-se,we=Math.max(0,Math.ceil(T/pe)),he=Math.min(V,(W+T)/pe),q=0;for(let j=qe;j<xt;++j){let oe=j*K-Je;for(let xe=we;xe<he;++xe){let Fe=xe*pe-T,ce=_*Ae+k*j+M*xe,Ue=A*(S-1-oe)+P*(W-1-Fe)+N*Re;for(let tt=0;tt<ye;++tt){let Ke=Re*ye+tt,mt=y[ce+Ke],kn=E[Ue+tt];q+=mt*kn}}}m[g*Ae+v*Ce+w*bt+Re]=q}}return e.makeTensorInfo(f.shape,f.dtype,f.values)}var hre={kernelName:ug,backendName:"cpu",kernelFunc:Q5e};function J5e(t){let{inputs:n,backend:e}=t,{x:r}=n,o=x.sizeFromShape(r.shape),i=e.data.get(r.dataId).values,s=st([o,o],r.dtype),a=s.values;for(let c=0;c<i.length;c++)a[c*o+c]=i[c];let l=[...r.shape,...r.shape];return e.makeTensorInfo(l,s.dtype,s.values)}var fre={kernelName:dg,backendName:"cpu",kernelFunc:J5e};var mre={kernelName:Ad,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o}=t,{strides:i,pad:s,dilations:a}=e,l=n,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(o.dataId).values,p=o.shape.length,{batchSize:h,inHeight:f,inWidth:m,inChannels:g,outHeight:v,outWidth:w,padInfo:y,strideHeight:_,strideWidth:k,filterHeight:M,filterWidth:E,dilationHeight:A,dilationWidth:P,outShape:N}=O.computeDilation2DInfo(r.shape,o.shape,i,s,"NHWC",a),B=x.sizeFromShape(N),S=N.length,W=x.getArrayFromDType(r.dtype,B);for(let Z=0;Z<h;++Z)for(let X=0;X<v;++X){let G=X*_-y.top;for(let H=0;H<w;++H){let V=H*k-y.left;for(let K=0;K<g;++K){let pe=Number.MIN_SAFE_INTEGER;for(let se=0;se<M;++se){let ye=G+se*A;if(ye>=0&&ye<f)for(let Ae=0;Ae<E;++Ae){let Re=V+Ae*P;if(Re>=0&&Re<m){let Ce=x.locToIndex([Z,ye,Re,K],u,x.computeStrides(r.shape)),Je=x.locToIndex([se,Ae,K],p,x.computeStrides(o.shape)),qe=c[Ce]+d[Je];qe>pe&&(pe=qe)}}}let le=x.locToIndex([Z,X,H,K],S,x.computeStrides(N));W[le]=pe}}}return{dataId:l.write(x.toTypedArray(W,r.dtype),N,r.dtype),shape:N,dtype:r.dtype}}};var gre={kernelName:H1,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o,dy:i}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=x.toNestedArray(r.shape,c.data.get(r.dataId).values),d=x.toNestedArray(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:w,strideHeight:y,strideWidth:_,filterHeight:k,filterWidth:M,dilationHeight:E,dilationWidth:A,outShape:P}=O.computeDilation2DInfo(r.shape,o.shape,s,a,"NHWC",l);x.assert(i.rank===P.length,()=>`Error in ${H1}, dy must have the same rank as output ${P.length}, but got ${i.rank}`);let N=x.toNestedArray(P,c.data.get(i.dataId).values),B=x.makeZerosNestedTypedArray(o.shape,o.dtype);for(let W=0;W<p;++W)for(let ie=0;ie<g;++ie){let Z=ie*y-w.top;for(let X=0;X<v;++X){let G=X*_-w.left;for(let H=0;H<m;++H){let V=Number.MIN_SAFE_INTEGER,K=0,pe=0;for(let le=0;le<k;++le){let se=Z+le*E;if(se>=0&&se<h)for(let ye=0;ye<M;++ye){let Ae=G+ye*A;if(Ae>=0&&Ae<f){let Re=u[W][se][Ae][H]+d[le][ye][H];Re>V&&(V=Re,K=le,pe=ye)}}}B[K][pe][H]+=N[W][ie][X][H]}}}return{dataId:c.write(x.toTypedArray(B,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};var vre={kernelName:z1,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o,dy:i}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=x.toNestedArray(r.shape,c.data.get(r.dataId).values),d=x.toNestedArray(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:w,strideHeight:y,strideWidth:_,filterHeight:k,filterWidth:M,dilationHeight:E,dilationWidth:A,outShape:P}=O.computeDilation2DInfo(r.shape,o.shape,s,a,"NHWC",l);x.assert(i.rank===P.length,()=>`Error in ${z1}, dy must have the same rank as output ${P.length}, but got ${i.rank}`);let N=x.toNestedArray(P,c.data.get(i.dataId).values),B=x.makeZerosNestedTypedArray(r.shape,r.dtype);for(let W=0;W<p;++W)for(let ie=0;ie<g;++ie){let Z=ie*y-w.top;for(let X=0;X<v;++X){let G=X*_-w.left;for(let H=0;H<m;++H){let V=Number.MIN_SAFE_INTEGER,K=Z<0?0:Z,pe=G<0?0:G;for(let le=0;le<k;++le){let se=Z+le*E;if(se>=0&&se<h)for(let ye=0;ye<M;++ye){let Ae=G+ye*A;if(Ae>=0&&Ae<f){let Re=u[W][se][Ae][H]+d[le][ye][H];Re>V&&(V=Re,K=se,pe=Ae)}}}B[W][K][pe][H]+=N[W][ie][X][H]}}}return{dataId:c.write(x.toTypedArray(B,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function eOe(t){let{inputs:n,backend:e,attrs:r}=t,{image:o}=n,{canvas:i,options:s}=r,{contextOptions:a,imageOptions:l}=s||{},c=l?.alpha||1,u=a?.contextType||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);let d=i.getContext(u,a?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);let[p,h]=o.shape.slice(0,2),f=o.shape.length===2?1:o.shape[2],m=e.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,v=new Uint8ClampedArray(h*p*4);for(let y=0;y<p*h;++y){let _=[0,0,0,255*c];for(let M=0;M<f;M++){let E=m[y*f+M];if(o.dtype==="float32"){if(E<0||E>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${E}.`)}else if(o.dtype==="int32"&&(E<0||E>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${E}.`);f===1?(_[0]=E*g,_[1]=E*g,_[2]=E*g):_[M]=E*g}let k=y*4;v[k+0]=Math.round(_[0]),v[k+1]=Math.round(_[1]),v[k+2]=Math.round(_[2]),v[k+3]=Math.round(_[3])}i.width=h,i.height=p;let w=new ImageData(v,h,p);return d.putImageData(w,0,0),o}var wre={kernelName:U1,backendName:"cpu",kernelFunc:eOe};function Vp(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;_e(o,"sum");let a;o.dtype==="bool"?a=Ua({inputs:{x:o},backend:e,attrs:{dtype:"int32"}}):a=fi({inputs:{x:o},backend:e});let l=a.shape.length,c=x.parseAxisParam(i,a.shape),u=O.getAxesPermutation(c,l),d=c,p=a;u!=null&&(p=gr({inputs:{x:a},backend:e,attrs:{perm:u}}),d=O.getInnerMostAxes(d.length,l)),O.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,f]=O.computeOutAndReduceShapes(p.shape,d),m=O.upcastType(p.dtype,"int32"),g=zv(e,h,m),v=x.sizeFromShape(f),w=e.data.get(g.dataId).values,y=e.data.get(p.dataId).values;for(let _=0;_<w.length;++_){let k=_*v,M=0;for(let E=0;E<v;++E)M+=y[k+E];w[_]=M}if(s){let _=O.expandShapeToKeepDim(g.shape,c),k=g;g=an({inputs:{x:g},backend:e,attrs:{shape:_}}),e.disposeIntermediateTensorInfo(k)}return e.disposeIntermediateTensorInfo(a),u!=null&&e.disposeIntermediateTensorInfo(p),g}var yre={kernelName:rp,backendName:"cpu",kernelFunc:Vp};function tOe(t){let{inputs:n,backend:e,attrs:r}=t,{equation:o}=r,i=n,{allDims:s,summedDims:a,idDims:l}=O.decodeEinsumEquation(o,i.length);O.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=O.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,f=[];for(let m=0;m<d;++m){for(let g of u[m]){let{permutationIndices:v,expandDims:w}=O.getEinsumPermutation(h,l[g]),y;O.isIdentityPermutation(v)?y=i[g]:(y=gr({inputs:{x:i[g]},backend:e,attrs:{perm:v}}),f.push(y));let _=y.shape.slice();for(let k=0;k<w.length;++k)_.splice(w[k],0,1);x.arraysEqual(y.shape,_)||(y=an({inputs:{x:y},backend:e,attrs:{shape:_}}),f.push(y)),p===null?p=y:(p=Z0({inputs:{a:y,b:p},backend:e}),f.push(p))}m<d-1&&(c[m]>=0&&(p=Vp({inputs:{x:p},backend:e,attrs:{axis:c[m]-(s.length-h),keepDims:!1}}),f.push(p)),h--)}for(let m of f)m!==p&&e.disposeIntermediateTensorInfo(m);return p}var xre={kernelName:pg,backendName:"cpu",kernelFunc:tOe};function nOe(t){let{inputs:n,backend:e}=t,{dy:r,y:o}=n;_e([r,o],"eluGrad");let i=new Float32Array(x.sizeFromShape(o.shape)),s=e.data.get(o.dataId).values,a=e.data.get(r.dataId).values;for(let l=0;l<s.length;++l){let c=s[l];c>=0?i[l]=a[l]:i[l]=a[l]*(c+1)}return e.makeTensorInfo(o.shape,"float32",i)}var _re={kernelName:hg,backendName:"cpu",kernelFunc:nOe};var rOe=O.ERF_P,oOe=O.ERF_A1,iOe=O.ERF_A2,sOe=O.ERF_A3,aOe=O.ERF_A4,lOe=O.ERF_A5,cOe=St(Lc,t=>{let n=Math.sign(t),e=Math.abs(t),r=1/(1+rOe*e);return n*(1-((((lOe*r+aOe)*r+sOe)*r+iOe)*r+oOe)*r*Math.exp(-e*e))}),kre={kernelName:Lc,backendName:"cpu",kernelFunc:cOe};function Kv(t){let{inputs:n,backend:e,attrs:r}=t,{input:o}=n,{dim:i}=r,s=o.shape.length,a=o.shape.slice(),l=i;return i<0&&(x.assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),a.splice(l,0,1),an({inputs:{x:o},backend:e,attrs:{shape:a}})}var bre={kernelName:Rd,backendName:"cpu",kernelFunc:Kv};var uOe=sn((t,n)=>t/n),Ak=fn(Pc,uOe),Rk={kernelName:Pc,backendName:"cpu",kernelFunc:Ak};function pE(t,n,e){let r=t.shape,o=r[0],i=r[1],s=e.data.get(t.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[o,i],u=x.sizeFromShape(c),d=x.getTypedArrayFromDType("float32",u),p=x.getTypedArrayFromDType("float32",u);for(let g=0;g<o;g++){let v=Wa({inputs:{x:a},backend:e,attrs:{begin:[g,0],size:[1,i]}}),w=Wa({inputs:{x:l},backend:e,attrs:{begin:[g,0],size:[1,i]}}),y=vo({inputs:{real:v,imag:w},backend:e}),{real:_,imag:k}=dOe(y,n,e),M=O.mergeRealAndImagArrays(_,k);for(let E=0;E<i;E++){let A=O.getComplexWithIndex(M,E);d[g*i+E]=A.real,p[g*i+E]=A.imag}e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(w),e.disposeIntermediateTensorInfo(y)}let h=e.makeTensorInfo(c,"float32",d),f=e.makeTensorInfo(c,"float32",p),m=vo({inputs:{real:h,imag:f},backend:e});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),m}function dOe(t,n,e){let r=x.sizeFromShape(t.shape),o=e.data.get(t.dataId),i=e.data.get(o.complexTensorInfos.real.dataId).values,s=e.data.get(o.complexTensorInfos.imag.dataId).values;if(pOe(r)){let a=XL(i,s,r,n,e),l=[t.shape[0],t.shape[1]];if(n){let c=e.makeTensorInfo(l,"float32",a.real),u=e.makeTensorInfo(l,"float32",a.imag),d=e.makeTensorInfo([],"float32",x.createScalarValue(r,"float32")),p=fi({inputs:{x:d},backend:e}),h=Rk.kernelFunc({inputs:{a:c,b:d},backend:e}),f=Rk.kernelFunc({inputs:{a:u,b:p},backend:e}),m=e.data.get(h.dataId).values,g=e.data.get(f.dataId).values;return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),{real:m,imag:g}}return a}else{let a=O.mergeRealAndImagArrays(i,s),l=hOe(a,r,n);return O.splitRealAndImagArrays(l)}}function pOe(t){return(t&t-1)===0}function XL(t,n,e,r,o){if(e===1)return{real:t,imag:n};let i=O.mergeRealAndImagArrays(t,n),s=e/2,a=O.complexWithEvenIndex(i),l=a.real,c=a.imag,u=[l.length],d=o.makeTensorInfo(u,"float32",l),p=o.makeTensorInfo(u,"float32",c),h=vo({inputs:{real:d,imag:p},backend:o}),f=O.complexWithOddIndex(i),m=f.real,g=f.imag,v=[m.length],w=o.makeTensorInfo(v,"float32",m),y=o.makeTensorInfo(v,"float32",g),_=vo({inputs:{real:w,imag:y},backend:o}),k=XL(l,c,s,r,o),M=k.real,E=k.imag,A=[M.length],P=o.makeTensorInfo(A,"float32",M),N=o.makeTensorInfo(A,"float32",E),B=vo({inputs:{real:P,imag:N},backend:o}),S=XL(m,g,s,r,o),W=S.real,ie=S.imag,Z=[W.length],X=o.makeTensorInfo(Z,"float32",W),G=o.makeTensorInfo(Z,"float32",ie),H=vo({inputs:{real:X,imag:G},backend:o}),V=O.exponents(e,r),K=[V.real.length],pe=o.makeTensorInfo(K,"float32",V.real),le=o.makeTensorInfo(K,"float32",V.imag),se=vo({inputs:{real:pe,imag:le},backend:o}),ye=Z0({inputs:{a:se,b:H},backend:o}),Ae=Fu({inputs:{a:B,b:ye},backend:o}),Re=Ek({inputs:{a:B,b:ye},backend:o}),Ce=Ha({inputs:{input:Ae},backend:o}),Je=Ha({inputs:{input:Re},backend:o}),qe=Pu({inputs:{input:Ae},backend:o}),xt=Pu({inputs:{input:Re},backend:o}),bt=vf({inputs:[Ce,Je],backend:o,attrs:{axis:0}}),T=vf({inputs:[qe,xt],backend:o,attrs:{axis:0}}),we=o.data.get(bt.dataId).values,he=o.data.get(T.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(_),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(le),o.disposeIntermediateTensorInfo(se),o.disposeIntermediateTensorInfo(ye),o.disposeIntermediateTensorInfo(Ae),o.disposeIntermediateTensorInfo(Re),o.disposeIntermediateTensorInfo(Ce),o.disposeIntermediateTensorInfo(qe),o.disposeIntermediateTensorInfo(Je),o.disposeIntermediateTensorInfo(xt),o.disposeIntermediateTensorInfo(bt),o.disposeIntermediateTensorInfo(T),{real:we,imag:he}}function hOe(t,n,e){let r=new Float32Array(n*2);for(let o=0;o<n;o++){let i=0,s=0;for(let a=0;a<n;a++){let l=O.exponent(o*a,n,e),c=O.getComplexWithIndex(t,a);i+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}e&&(i/=n,s/=n),O.assignToTypedArray(r,i,s,o)}return r}function fOe(t){let{inputs:n,backend:e}=t,{input:r}=n,o=x.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=an({inputs:{x:r},backend:e,attrs:{shape:[s,i]}}),l=pE(a,!1,e),c=an({inputs:{x:l},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var Cre={kernelName:fg,backendName:"cpu",kernelFunc:fOe};function Ok(t){let{backend:n,attrs:e}=t,{shape:r,value:o,dtype:i}=e,s=i||x.inferDtype(o),a=x.getArrayFromDType(s,x.sizeFromShape(r));return mOe(a,o,s),n.makeTensorInfo(r,s,a)}var Sre={kernelName:mg,backendName:"cpu",kernelFunc:Ok};function mOe(t,n,e){t.fill(n)}var Mre={kernelName:gg,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,o=e,i=x.getTypedArrayFromDType(r.dtype,x.sizeFromShape(r.shape)),[s,a,l,c]=r.shape,u=o.data.get(r.dataId).values;for(let p=0;p<s;p++){let h=p*l*a*c;for(let f=0;f<a;f++){let m=f*(l*c);for(let g=0;g<l;g++){let v=g*c;for(let w=0;w<c;w++){let y=Math.round(l-g-1),_=h+m+v+w,k=u[_];if(y>=0&&y<l){let M=y*c,E=h+m+M+w;k=u[E]}i[_]=k}}}}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function gOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=KL({inputs:{x:o,filter:i},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let g=m;if(u==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let v=an({inputs:{x:s},backend:e,attrs:{shape:[s.shape[0],1,1]}});m=Fu({inputs:{a:m,b:v},backend:e}),e.disposeIntermediateTensorInfo(v)}else m=Fu({inputs:{a:m,b:s},backend:e});e.disposeIntermediateTensorInfo(g)}if(h){let g=m;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){let v=an({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});m=X0(e,m,h,v,f),e.disposeIntermediateTensorInfo(v)}else m=X0(e,m,h,a,f);e.disposeIntermediateTensorInfo(g)}return m}var Tre={kernelName:Vh,backendName:"cpu",kernelFunc:gOe};function vOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=ZL({inputs:{x:o,filter:i},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let g=m;m=Fu({inputs:{a:m,b:s},backend:e}),e.disposeIntermediateTensorInfo(g)}if(h){let g=m;m=X0(e,m,h,a,f),e.disposeIntermediateTensorInfo(g)}return m}var Dre={kernelName:jh,backendName:"cpu",kernelFunc:vOe};function wOe(t){let{inputs:n,backend:e}=t,{params:r,indices:o}=n,i=x.sizeFromShape(r.shape),s=o.shape,a=s[s.length-1],[l,c,u,d]=O.prepareAndValidate(r,o);if(c===0)return e.makeTensorInfo(l,r.dtype,[]);let p=e.data.get(o.dataId).values,h=e.bufferSync(r),f=WD(p,h,r.dtype,c,a,u,d,r.shape,i);return e.makeTensorInfo(l,r.dtype,f.values)}var Ere={kernelName:vg,backendName:"cpu",kernelFunc:wOe};function yOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,indices:i}=n,{axis:s,batchDims:a}=r;_e([o,i],"gatherV2");let l=x.parseAxisParam(s,o.shape)[0],c=e.data.get(i.dataId).values,u=o.shape[l];for(let _=0;_<c.length;++_){let k=c[_];x.assert(k<=u-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);let p=x.sizeFromShape(i.shape),h=O.segment_util.collectGatherOpShapeInfo(o,i,l,d),f=an({inputs:{x:o},backend:e,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=an({inputs:{x:i},backend:e,attrs:{shape:[h.batchSize,p/h.batchSize]}}),g=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],v=e.bufferSync(m),w=e.bufferSync(f),y=qD(w,v,g);return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),e.makeTensorInfo(h.outputShape,y.dtype,y.values)}var Ire={kernelName:Fd,backendName:"cpu",kernelFunc:yOe};function xOe(t){let{inputs:n,backend:e}=t,{input:r}=n,o=x.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=an({inputs:{x:r},backend:e,attrs:{shape:[s,i]}}),l=pE(a,!0,e),c=an({inputs:{x:l},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var Nre={kernelName:wg,backendName:"cpu",kernelFunc:xOe};var _Oe=St(Uc,t=>Number.isFinite(t)?1:0,"bool"),Are={kernelName:Uc,backendName:"cpu",kernelFunc:_Oe};var kOe=St(Gc,t=>Math.abs(t)===1/0?1:0,"bool"),Rre={kernelName:Gc,backendName:"cpu",kernelFunc:kOe};var bOe=St(Wc,t=>Number.isNaN(t)?1:0,"bool"),Ore={kernelName:Wc,backendName:"cpu",kernelFunc:bOe};function COe(t){let{backend:n,attrs:e}=t,{start:r,stop:o,num:i}=e,s=KD(r,o,i);return n.makeTensorInfo([s.length],"float32",s)}var Fre={kernelName:xg,backendName:"cpu",kernelFunc:COe};var SOe=St(Kc,t=>Math.log1p(t)),Pre={kernelName:Kc,backendName:"cpu",kernelFunc:SOe};var MOe=sn((t,n)=>t&&n),TOe=fn(Oh,MOe,null,"bool"),Bre={kernelName:Oh,backendName:"cpu",kernelFunc:TOe};var DOe=St(Fh,t=>t?0:1,"bool"),Lre={kernelName:Fh,backendName:"cpu",kernelFunc:DOe};var EOe=sn((t,n)=>t||n),IOe=fn(Ph,EOe,null,"bool"),$re={kernelName:Ph,backendName:"cpu",kernelFunc:IOe};function NOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{depthRadius:i,bias:s,alpha:a,beta:l}=r;_e(o,"LRN");let c=o.shape[3],u=c-1,d=e.data.get(o.dataId).values,p=x.sizeFromShape(o.shape),h=new Float32Array(p);function f(m){let g=m%c,v=m-g+Math.max(0,g-i),w=m-g+Math.min(g+i,u),y=0;for(;v<=w;v++){let _=d[v];y+=_*_}return y}for(let m=0;m<p;m++){let g=f(m),v=d[m]*Math.pow(s+a*g,-l);h[m]=v}return e.makeTensorInfo(o.shape,o.dtype,h)}var Vre={kernelName:Bd,backendName:"cpu",kernelFunc:NOe};function AOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,y:i,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=r;_e(s,"LRNGrad");let d=x.sizeFromShape(s.shape),p=s.shape[3],h=e.data.get(s.dataId).values,f=e.data.get(o.dataId).values,m=e.data.get(i.dataId).values,g=new Float32Array(d),v=d;for(let w=0;w<v;w++){let y=w%p,_=w-y+Math.max(0,y-a),k=w-y+Math.min(p,y+a+1),M=0;for(let E=_;E<k;E++)M+=Math.pow(f[E],2);M=c*M+l;for(let E=_;E<k;E++){let A=-2*c*u*f[E]*m[w]/M;w===E&&(A+=Math.pow(M,-u)),A*=h[w],g[E]+=A}}return e.makeTensorInfo(s.shape,o.dtype,g)}var jre={kernelName:_g,backendName:"cpu",kernelFunc:AOe};function YL(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reductionIndices:i,keepDims:s}=r,a=e,l=o.shape,c=l.length,u=x.parseAxisParam(i,l),d=u,p=O.getAxesPermutation(d,c),h=a.data.get(o.dataId).values;if(p!=null){let _=new Array(c);for(let k=0;k<_.length;k++)_[k]=l[p[k]];h=Gv(h,l,o.dtype,p,_),d=O.getInnerMostAxes(d.length,c),l=_}_e(o,"max"),O.assertAxesAreInnerMostDims("max",d,c);let[f,m]=O.computeOutAndReduceShapes(l,d),g=x.sizeFromShape(m),v=ZD(h,g,f,o.dtype),w=a.write(v,f,o.dtype),y=f;return s&&(y=O.expandShapeToKeepDim(f,u)),{dataId:w,shape:y,dtype:o.dtype}}var zre={kernelName:Ld,backendName:"cpu",kernelFunc:YL};function ROe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;_e(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))d=fi({inputs:{x:o},backend:e});else{let p=e.data.get(o.dataId).values,h=x.computeStrides(o.shape),f=qv(p,o.shape,o.dtype,h,u,"max");d=e.makeTensorInfo(u.outShape,o.dtype,f.values)}return d}var Hre={kernelName:$d,backendName:"cpu",kernelFunc:ROe};function OOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;_e(o,"maxPool3d");let u=O.computePool3DInfo(o.shape,i,s,1,a,l,c),d=e.data.get(o.dataId).values,p=dE(d,o.shape,o.dtype,x.computeStrides(o.shape),u,"max");return e.makeTensorInfo(p.shape,"float32",p.values)}var Ure={kernelName:Vd,backendName:"cpu",kernelFunc:OOe};function FOe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;_e([o,i],"maxPool3DGrad");let u=O.computePool3DInfo(i.shape,s,a,1,l,c),d=e.bufferSync(i),p=$ne(d,u),h=u.strideDepth,f=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,v=u.dilationHeight,w=u.dilationWidth,y=u.effectiveFilterDepth,_=u.effectiveFilterHeight,k=u.effectiveFilterWidth,M=y-1-u.padInfo.front,E=k-1-u.padInfo.left,A=_-1-u.padInfo.top,P=st(i.shape,"float32"),N=e.bufferSync(o);for(let B=0;B<u.batchSize;++B)for(let S=0;S<u.inChannels;++S)for(let W=0;W<u.inDepth;++W)for(let ie=0;ie<u.inHeight;++ie)for(let Z=0;Z<u.inWidth;++Z){let X=W-M,G=ie-A,H=Z-E,V=0;for(let K=0;K<y;K+=g){let pe=(X+K)/h;if(!(pe<0||pe>=u.outDepth||Math.floor(pe)!==pe))for(let le=0;le<_;le+=v){let se=(G+le)/f;if(!(se<0||se>=u.outHeight||Math.floor(se)!==se))for(let ye=0;ye<k;ye+=w){let Ae=(H+ye)/m;if(Ae<0||Ae>=u.outWidth||Math.floor(Ae)!==Ae)continue;let Re=y*_*k-1-p.get(B,pe,se,Ae,S),Ce=K*_*k+le*k+ye,Je=Re===Ce?1:0;if(Je===0)continue;let qe=N.get(B,pe,se,Ae,S);V+=qe*Je}}}P.set(V,B,W,ie,Z,S)}return e.makeTensorInfo(P.shape,P.dtype,P.values)}var Gre={kernelName:bg,backendName:"cpu",kernelFunc:FOe};function POe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i,output:s}=n,a=i;_e([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=O.computePool2DInfo(a.shape,l,c,1,u,d),h=e.data.get(a.dataId).values,f=st(p.outShape,a.dtype,uE(h,a.shape,a.dtype,p).values),m=p.strideHeight,g=p.strideWidth,v=p.dilationHeight,w=p.dilationWidth,y=p.effectiveFilterHeight,_=p.effectiveFilterWidth,k=_-1-p.padInfo.left,M=y-1-p.padInfo.top,E=st(a.shape,"float32"),A=e.data.get(o.dataId).values,P=st(o.shape,"float32",A);for(let N=0;N<p.batchSize;++N)for(let B=0;B<p.inChannels;++B)for(let S=0;S<p.inHeight;++S)for(let W=0;W<p.inWidth;++W){let ie=S-M,Z=W-k,X=0;for(let G=0;G<y;G+=v){let H=(ie+G)/m;if(!(H<0||H>=p.outHeight||Math.floor(H)!==H))for(let V=0;V<_;V+=w){let K=(Z+V)/g;if(K<0||K>=p.outWidth||Math.floor(K)!==K)continue;let pe=y*_-1-f.get(N,H,K,B),le=G*_+V,se=pe===le?1:0;if(se===0)continue;let ye=P.get(N,H,K,B);X+=ye*se}}E.set(X,N,S,W,B)}return e.makeTensorInfo(E.shape,E.dtype,E.values)}var Wre={kernelName:kg,backendName:"cpu",kernelFunc:POe};function qre(t,n,e,r,o){let i=x.computeStrides(n),s=qv(t,n,e,i,o,"max"),a=uE(t,n,e,o,!0,r);return[s.values,a.values]}var Kre={kernelName:Cg,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=n,l=e;_e(r,"MaxPoolWithArgmax");let c=l.data.get(r.dataId).values,u=O.computePool2DInfo(r.shape,o,i,[1,1],s),[d,p]=qre(c,r.shape,r.dtype,a,u),h=l.write(d,u.outShape,r.dtype),f=l.write(p,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:f,shape:u.outShape,dtype:"int32"}]}};function BOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=x.parseAxisParam(i,o.shape),c=O.computeOutAndReduceShapes(o.shape,a)[1],u=x.sizeFromShape(c),d=[],p=e.makeTensorInfo([],"float32",new Float32Array([u]));d.push(p);let h=Ua({inputs:{x:o},backend:e,attrs:{dtype:"float32"}});d.push(h);let f=Ak({inputs:{a:h,b:p},backend:e});d.push(f);let m=Vp({inputs:{x:f},backend:e,attrs:{axis:i,keepDims:s}});return d.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}var Zre={kernelName:jd,backendName:"cpu",kernelFunc:BOe};function LOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;_e(o,"min");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=gr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("min",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let _=0;_<h;++_){let k=m[w+_];(Number.isNaN(k)||k<y)&&(y=k)}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=an({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var Xre={kernelName:zd,backendName:"cpu",kernelFunc:LOe};function $Oe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,mode:s}=r;_e(o,"mirrorPad");let a=i.map((y,_)=>y[0]+o.shape[_]+y[1]),l=i.map(y=>y[0]),c=i.map((y,_)=>y[0]+o.shape[_]),u=s==="reflect"?0:1,d=e.data.get(o.dataId).values,p=o.shape.length,h=x.computeStrides(o.shape),f=x.sizeFromShape(a),m=a.length,g=x.computeStrides(a),v=x.getTypedArrayFromDType(o.dtype,f);for(let y=0;y<f;y++){let _=x.indexToLoc(y,m,g);for(let M=0;M<m;M++)_[M]<l[M]?_[M]=l[M]*2-_[M]-u:_[M]>=c[M]&&(_[M]=(c[M]-1)*2-_[M]+u);_=_.map((M,E)=>M-l[E]);let k=x.locToIndex(_,p,h);v[y]=d[k]}return{dataId:e.write(v,a,o.dtype),shape:a,dtype:o.dtype}}var Yre={kernelName:Hd,backendName:"cpu",kernelFunc:$Oe};var VOe=sn((t,n)=>{let e=t%n;return t<0&&n<0||t>=0&&n>=0?e:(e+n)%n}),jOe=fn(Yc,VOe),Qre={kernelName:Yc,backendName:"cpu",kernelFunc:jOe};var eoe=S2(P_());function QL(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{dim:i}=r,s=o.shape.length,a=i;if(a===-1&&(a=s-1),a!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${a}`);let l=x.parseAxisParam([a],o.shape),c=YL({inputs:{x:o},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),u=O.expandShapeToKeepDim(c.shape,l),d=an({inputs:{x:c},backend:e,attrs:{shape:u}}),p=Ek({inputs:{a:o,b:d},backend:e}),h=xL({inputs:{x:p},backend:e}),f=Vp({inputs:{x:h},backend:e,attrs:{axis:l,keepDims:!1}}),m=an({inputs:{x:f},backend:e,attrs:{shape:u}}),g=Ak({inputs:{a:h,b:m},backend:e});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),g}var Jre={kernelName:sp,backendName:"cpu",kernelFunc:QL};function zOe(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{numSamples:i,seed:s,normalized:a}=r;_e(o,"multinomial");let l=a?o:QL({inputs:{logits:o},backend:e,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=e.data.get(l.dataId).values,p=[c,i],h=x.makeZerosTypedArray(x.sizeFromShape(p),"int32");for(let f=0;f<c;++f){let m=f*u,g=new Float32Array(u-1);g[0]=d[m];for(let y=1;y<g.length;++y)g[y]=g[y-1]+d[m+y];let v=eoe.alea(s.toString()),w=f*i;for(let y=0;y<i;++y){let _=v();h[w+y]=g.length;for(let k=0;k<g.length;k++)if(_<g[k]){h[w+y]=k;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(p,"int32",h)}var toe={kernelName:Sg,backendName:"cpu",kernelFunc:zOe};var HOe=Xo.nonMaxSuppressionV3Impl;function UOe(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r;_e(o,"NonMaxSuppression");let c=e.data.get(o.dataId).values,u=e.data.get(i.dataId).values,{selectedIndices:d}=HOe(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var noe={kernelName:Mg,backendName:"cpu",kernelFunc:UOe};var GOe=Xo.nonMaxSuppressionV4Impl;function WOe(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;_e(o,"NonMaxSuppressionPadded");let u=e.data.get(o.dataId).values,d=e.data.get(i.dataId).values,{selectedIndices:p,validOutputs:h}=GOe(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var roe={kernelName:Tg,backendName:"cpu",kernelFunc:WOe};var qOe=Xo.nonMaxSuppressionV5Impl;function KOe(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;_e(o,"NonMaxSuppressionWithScore");let u=e.data.get(o.dataId).values,d=e.data.get(i.dataId).values,p=s,h=a,f=l,m=c,{selectedIndices:g,selectedScores:v}=qOe(u,d,p,h,f,m);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var ooe={kernelName:Dg,backendName:"cpu",kernelFunc:KOe};function ZOe(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o}=n,{dtype:i,depth:s,onValue:a,offValue:l}=r;_e(o,"oneHot");let c=x.sizeFromShape(o.shape),u=new Float32Array(c*s);u.fill(l);let d=e.data.get(o.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<s&&(u[p*s+d[p]]=a);return e.makeTensorInfo([...o.shape,s],i,u)}var ioe={kernelName:Wd,backendName:"cpu",kernelFunc:ZOe};function Fk(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){let o=Ha({inputs:{input:r},backend:e}),i=Fk({inputs:{x:o},backend:e}),s=Pu({inputs:{input:r},backend:e}),a=Fk({inputs:{x:s},backend:e}),l=vo({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return Ok({backend:e,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var soe={kernelName:cp,backendName:"cpu",kernelFunc:Fk};function aoe(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){let o=Ha({inputs:{input:r},backend:e}),i=aoe({inputs:{x:o},backend:e}),s=Pu({inputs:{input:r},backend:e}),a=Fk({inputs:{x:s},backend:e}),l=vo({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return Ok({backend:e,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}var loe={kernelName:Gd,backendName:"cpu",kernelFunc:aoe};function JL(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r;if(n.length===1)return Kv({inputs:{input:n[0]},backend:e,attrs:{dim:o}});let i=n[0].shape,s=n[0].dtype;n.forEach(u=>{x.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),x.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=Kv({inputs:{input:u},backend:e,attrs:{dim:o}});return a.push(d),d}),c=vf({inputs:l,backend:e,attrs:{axis:o}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var coe={kernelName:qd,backendName:"cpu",kernelFunc:JL};function XOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,constantValue:s}=r;_e(o,"pad");let a=i.map((w,y)=>w[0]+o.shape[y]+w[1]),l=i.map(w=>w[0]),c=e.data.get(o.dataId).values,u=x.sizeFromShape(o.shape),d=o.shape.length,p=x.computeStrides(o.shape),h=x.sizeFromShape(a),f=a.length,m=x.computeStrides(a),g=x.getTypedArrayFromDType(o.dtype,h);s!==0&&g.fill(s);for(let w=0;w<u;w++){let _=x.indexToLoc(w,d,p).map((M,E)=>M+l[E]),k=x.locToIndex(_,f,m);g[k]=c[w]}return{dataId:e.write(g,a,o.dtype),shape:a,dtype:o.dtype}}var hE={kernelName:Kd,backendName:"cpu",kernelFunc:XOe};var YOe=sn((t,n)=>Math.pow(t,n)),QOe=fn(Jc,YOe),uoe={kernelName:Jc,backendName:"cpu",kernelFunc:QOe};function JOe(t){let{inputs:n,backend:e,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=n,{outputRaggedRank:a}=r,l=o.map(v=>e.data.get(v.dataId).values),c=o.map(v=>v.shape),u=e.data.get(i.dataId).values,d=e.data.get(s.dataId).values,[p,h,f]=XD(l,c,u,i.shape,i.dtype,d,s.shape,a),m=p.map(v=>e.makeTensorInfo([v.length],"int32",v)),g=e.makeTensorInfo(f,i.dtype,h);return m.concat([g])}var doe={kernelName:Eg,backendName:"cpu",kernelFunc:JOe};function eFe(t){let{inputs:n,backend:e}=t,{starts:r,limits:o,deltas:i}=n,s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=YD(s,r.shape,r.dtype,a,o.shape,l,i.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],r.dtype,u);return[d,p]}var poe={kernelName:Ig,backendName:"cpu",kernelFunc:eFe};function tFe(t){let{inputs:n,backend:e,attrs:r}=t,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=r,c=e.data.get(o.dataId).values,u=e.data.get(i.dataId).values,d=e.data.get(s.dataId).values,p=a.map(g=>e.data.get(g.dataId).values),h=a.map(g=>g.shape),[f,m]=QD(c,o.shape,u,i.shape,i.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(f,i.dtype,m)}var hoe={kernelName:Ng,backendName:"cpu",kernelFunc:tFe};function nFe(t){let{backend:n,attrs:e}=t,{start:r,stop:o,dtype:i,step:s}=e,a=JD(r,o,s,i);return n.makeTensorInfo([a.length],i,a)}var foe={kernelName:Ag,backendName:"cpu",kernelFunc:nFe};var rFe=St(eu,t=>1/t),moe={kernelName:eu,backendName:"cpu",kernelFunc:rFe};function oFe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r;_e(o,"resizeBilinear");let l=x.computeStrides(o.shape),[c,u]=a,[d,p,h,f]=o.shape,m=e.data.get(o.dataId).values,g=new Float32Array(x.sizeFromShape([d,c,u,f])),v=[i&&c>1?p-1:p,i&&u>1?h-1:h],w=[i&&c>1?c-1:c,i&&u>1?u-1:u],y=0,_=v[0]/w[0],k=v[1]/w[1];for(let M=0;M<d;M++)for(let E=0;E<c;E++){let A;s?A=_*(E+.5)-.5:A=_*E;let P=Math.max(0,Math.floor(A)),N=A-P,B=Math.min(p-1,Math.ceil(A)),S=M*l[0]+P*l[1],W=M*l[0]+B*l[1];for(let ie=0;ie<u;ie++){let Z;s?Z=k*(ie+.5)-.5:Z=k*ie;let X=Math.max(0,Math.floor(Z)),G=Z-X,H=Math.min(h-1,Math.ceil(Z)),V=S+X*l[2],K=W+X*l[2],pe=S+H*l[2],le=W+H*l[2];for(let se=0;se<f;se++){let ye=m[V+se],Ae=m[K+se],Re=m[pe+se],Ce=m[le+se],Je=ye+(Re-ye)*G,qe=Ae+(Ce-Ae)*G,xt=Je+(qe-Je)*N;g[y++]=xt}}}return e.makeTensorInfo([d,c,u,f],"float32",g)}var goe={kernelName:Jd,backendName:"cpu",kernelFunc:oFe};function iFe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r;_e([i,o],"resizeBilinearGrad");let a=x.computeStrides(o.shape),[l,c,u,d]=o.shape,[,p,h]=i.shape,f=new Float32Array(l*c*u*d),m=[s&&p>1?c-1:c,s&&h>1?u-1:u],g=[s&&p>1?p-1:p,s&&h>1?h-1:h],v=m[0]/g[0],w=m[1]/g[1],y=e.data.get(i.dataId).values,_=0;for(let k=0;k<l;k++){let M=k*a[0];for(let E=0;E<p;E++){let A=E*v,P=Math.floor(A),N=Math.min(Math.ceil(A),c-1),B=M+P*a[1],S=M+N*a[1],W=A-P,ie=1-W;for(let Z=0;Z<h;Z++){let X=Z*w,G=Math.floor(X),H=Math.min(Math.ceil(X),u-1),V=X-G,K=1-V,pe=B+G*a[2],le=B+H*a[2],se=S+G*a[2],ye=S+H*a[2],Ae=ie*K,Re=ie*V,Ce=W*K,Je=W*V;for(let qe=0;qe<d;qe++){let xt=y[_++];f[pe+qe]+=xt*Ae,f[le+qe]+=xt*Re,f[se+qe]+=xt*Ce,f[ye+qe]+=xt*Je}}}}return e.makeTensorInfo([l,u,c,d],"float32",f)}var voe={kernelName:Fg,backendName:"cpu",kernelFunc:iFe};function sFe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r;_e(o,"resizeNearestNeighbor");let l=x.computeStrides(o.shape),[c,u]=a,[d,p,h,f]=o.shape,m=e.data.get(o.dataId).values,g=new Float32Array(d*c*u*f),v=[i&&c>1?p-1:p,i&&u>1?h-1:h],w=[i&&c>1?c-1:c,i&&u>1?u-1:u],y=v[0]/w[0],_=v[1]/w[1],k=0;for(let M=0;M<d;M++){let E=M*l[0];for(let A=0;A<c;A++){let P=s?y*(A+.5):y*A,N=Math.min(p-1,i?Math.round(P):Math.floor(P));s&&(N=Math.max(0,N));let B=E+N*l[1];for(let S=0;S<u;S++){let W=s?_*(S+.5):_*S,ie=Math.min(h-1,i?Math.round(W):Math.floor(W));s&&(ie=Math.max(0,ie));let Z=B+ie*l[2];for(let X=0;X<f;X++){let G=m[Z+X];g[k++]=G}}}}return e.makeTensorInfo([d,c,u,f],o.dtype,g)}var woe={kernelName:Qd,backendName:"cpu",kernelFunc:sFe};function aFe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r;_e([i,o],"resizeNearestNeighborGrad");let a=x.computeStrides(o.shape),l=x.computeStrides(i.shape),[c,u,d,p]=o.shape,[,h,f]=i.shape,m=new Float32Array(c*u*d*p),g=e.data.get(i.dataId).values,v=[s&&h>1?u-1:u,s&&f>1?d-1:d],w=[s&&h>1?h-1:h,s&&f>1?f-1:f],y=v[0]/w[0],_=v[1]/w[1],k=1/y,M=1/_,E=Math.ceil(k)*2+2,A=Math.ceil(M)*2+2;for(let P=0;P<c;P++){let N=P*a[0];for(let B=0;B<u;B++){let S=N+B*a[1],W=Math.floor(B*k),ie=Math.floor(W-E/2);for(let Z=0;Z<d;Z++){let X=S+Z*a[2],G=Math.floor(Z*M),H=Math.floor(G-A/2);for(let V=0;V<p;V++){let K=0;for(let pe=0;pe<E;pe++){let le=pe+ie;if(le<0||le>=h)continue;let se=N+le*l[1],ye=le*y,Ae=Math.min(u-1,s?Math.round(ye):Math.floor(ye));if(B===Ae)for(let Re=0;Re<A;Re++){let Ce=Re+H;if(Ce<0||Ce>=f)continue;let Je=se+Ce*l[2],qe=Ce*_,xt=Math.min(d-1,s?Math.round(qe):Math.floor(qe));Z===xt&&(K+=g[Je+V])}}m[X+V]=K}}}}return e.makeTensorInfo(o.shape,o.dtype,m)}var yoe={kernelName:Og,backendName:"cpu",kernelFunc:aFe};function lFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dims:i}=r;_e(o,"reverse");let s=o.shape.length,a=x.parseAxisParam(i,o.shape);if(s===0)return fi({inputs:{x:o},backend:e});let l=new wn(o.shape,o.dtype),c=e.bufferSync(o);for(let u=0;u<l.size;u++){let d=l.indexToLoc(u),p=d.slice();a.forEach(h=>p[h]=o.shape[h]-1-p[h]),l.set(c.get(...p),...d)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}var xoe={kernelName:ep,backendName:"cpu",kernelFunc:lFe};var _oe={kernelName:Qg,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,{radians:o,fillValue:i,center:s}=n,a=e,l=x.getTypedArrayFromDType(r.dtype,x.sizeFromShape(r.shape)),[c,u,d,p]=r.shape,[h,f]=O.getImageCenter(s,u,d),m=255,g=Math.sin(o),v=Math.cos(o),w=a.data.get(r.dataId).values;for(let _=0;_<c;_++){let k=_*d*u*p;for(let M=0;M<u;M++){let E=M*(d*p);for(let A=0;A<d;A++){let P=A*p;for(let N=0;N<p;N++){let B=[c,M,A,N],S=B[2],W=B[1],ie=(S-h)*v-(W-f)*g,Z=(S-h)*g+(W-f)*v;ie=Math.round(ie+h),Z=Math.round(Z+f);let X=i;if(typeof i!="number"&&(N===3?X=m:X=i[N]),ie>=0&&ie<d&&Z>=0&&Z<u){let H=Z*(d*p),V=ie*p,K=k+H+V+N;X=w[K]}let G=k+E+P+N;l[G]=X}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var cFe=St(ru,t=>{let n=Math.floor(t);return t-n<.5?Math.floor(t):t-n>.5?Math.ceil(t):n%2===0?n:n+1}),koe={kernelName:ru,backendName:"cpu",kernelFunc:cFe};function uFe(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o,updates:i}=n,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(i,o,s),p=!0,h=e.bufferSync(o),f=e.bufferSync(i),m=Gl(h,f,s,d,c,l,a,u,0,p);return e.makeTensorInfo(s,m.dtype,m.values)}var boe={kernelName:Pg,backendName:"cpu",kernelFunc:uFe};function dFe(t,n){let e=0,r=t.length,o=0;for(;e<r;)o=Math.floor((e+r)/2),t[o]<n?e=o+1:r=o;return r}function pFe(t,n){let e=0,r=t.length,o=0;for(;e<r;)o=Math.floor((e+r)/2),t[o]<=n?e=o+1:r=o;return r}function Coe(t,n,e,r,o,i){let s=x.getArrayFromDType("int32",e*o);for(let a=0;a<e;++a){let l=t.slice(a*r,(a+1)*r),c=a*o;for(let u=0;u<o;++u)s[c+u]=i==="left"?dFe(l,n[u+c]):pFe(l,n[u+c])}return s}function hFe(t){let{inputs:n,backend:e,attrs:r}=t,{sortedSequence:o,values:i}=n,{side:s}=r,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,c=Coe(a,l,o.shape[0],o.shape[1],i.shape[1],s);return e.makeTensorInfo(i.shape,"int32",c)}var Soe={kernelName:Lg,backendName:"cpu",kernelFunc:hFe};function fFe(t){let{inputs:n,backend:e}=t,{condition:r,t:o,e:i}=n;_e([r,o,i],"select");let s=r.shape.length,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=Vr(o.dtype,i.dtype),d=x.makeZerosTypedArray(x.sizeFromShape(o.shape),u),p=0,h=s===0||s>1||o.shape.length===1?1:x.sizeFromShape(o.shape.slice(1));for(let f=0;f<a.length;f++)for(let m=0;m<h;m++)a[f]===1?d[p++]=l[f]:d[p++]=c[f];return e.makeTensorInfo(o.shape,u,d)}var Moe={kernelName:tp,backendName:"cpu",kernelFunc:fFe};var mFe=O.SELU_SCALEALPHA,gFe=O.SELU_SCALE,vFe=St(iu,t=>t>=0?gFe*t:mFe*(Math.exp(t)-1)),Toe={kernelName:iu,backendName:"cpu",kernelFunc:vFe};var wFe=St(lu,t=>t<0?-1:t>0?1:0),Doe={kernelName:lu,backendName:"cpu",kernelFunc:wFe};var yFe=St(su,t=>Math.sin(t)),Eoe={kernelName:su,backendName:"cpu",kernelFunc:yFe};var xFe=St(au,t=>Math.sinh(t)),Ioe={kernelName:au,backendName:"cpu",kernelFunc:xFe};var _Fe=11920928955078125e-23,Noe=Math.log(_Fe)+2,kFe=St(uu,t=>{let n=t>-Noe,e=t<Noe,r=Math.exp(t),o;return e?o=r:n?o=t:o=Math.log(1+r),o}),Aoe={kernelName:uu,backendName:"cpu",kernelFunc:kFe};function bFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,paddings:s}=r;_e([o],"spaceToBatchND");let a=x.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let M=1+i.length;M<o.shape.length;++M)l.push([0,0]);let c=hE.kernelFunc({inputs:{x:o},backend:e,attrs:{paddings:l,constantValue:0}}),u=O.getReshaped(c.shape,i,a,!1),d=O.getPermuted(u.length,i.length,!1),p=O.getReshapedPermuted(c.shape,i,a,!1),m=an({inputs:{x:c},backend:e,attrs:{shape:u}}),w=gr({inputs:{x:m},backend:e,attrs:{perm:d}}),k=an({inputs:{x:w},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(w),k}var Roe={kernelName:op,backendName:"cpu",kernelFunc:bFe};function CFe(t){let{inputs:n,backend:e}=t,{indices:r,values:o,denseShape:i,defaultValue:s}=n;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=e.data.get(s.dataId).values[0],[d,p,h,f,m]=eE(a,r.shape,r.dtype,l,o.dtype,c,u);return[e.makeTensorInfo(p,r.dtype,d),e.makeTensorInfo([p[0]],o.dtype,h),e.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),e.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var Ooe={kernelName:$g,backendName:"cpu",kernelFunc:CFe};function SFe(t){let{inputs:n,backend:e}=t,{inputIndices:r,inputShape:o,newShape:i}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(e.data.get(o.dataId).values),a=e.data.get(r.dataId).values,l=Array.from(e.data.get(i.dataId).values),[c,u,d]=tE(a,r.shape,r.dtype,s,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var Foe={kernelName:Vg,backendName:"cpu",kernelFunc:SFe};function MFe(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=Wv(s,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}var Poe={kernelName:jg,backendName:"cpu",kernelFunc:MFe};function TFe(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=Wv(s,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}var Boe={kernelName:zg,backendName:"cpu",kernelFunc:TFe};function DFe(t){let{inputs:n,backend:e,attrs:r}=t,{sparseIndices:o,sparseValues:i,defaultValue:s}=n,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=O.calculateShapes(i,o,a),h=!1,f=e.bufferSync(o),m;switch(i.dtype){case"bool":{let g=e.bufferSync(i),v=!!e.data.get(s.dataId).values[0];m=Gl(f,g,a,p,u,c,l,d,v,h);break}case"float32":{let g=e.bufferSync(i),v=e.data.get(s.dataId).values[0];m=Gl(f,g,a,p,u,c,l,d,v,h);break}case"int32":{let g=e.bufferSync(i),v=e.data.get(s.dataId).values[0];m=Gl(f,g,a,p,u,c,l,d,v,h);break}case"string":{let g=e.bufferSync(i),v=x.decodeString(e.data.get(s.dataId).values[0]);m=Gl(f,g,a,p,u,c,l,d,v,h);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return e.makeTensorInfo(a,m.dtype,m.values)}var Loe={kernelName:Hg,backendName:"cpu",kernelFunc:DFe};function EFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{numOrSizeSplits:i,axis:s}=r,a=x.parseAxisParam(s,o.shape)[0],l=O.prepareSplitSize(o,i,a),c=new Array(o.shape.length).fill(0),u=o.shape.slice();return l.map(d=>{let p=[...u];p[a]=d;let h=Wa({inputs:{x:o},backend:e,attrs:{begin:c,size:p}});return c[a]+=d,h})}var $oe={kernelName:ip,backendName:"cpu",kernelFunc:EFe};var Voe={kernelName:Ug,backendName:"cpu",kernelFunc:({inputs:t,backend:n})=>{let{x:e}=t,r=n;_e(e,"square");let o=r.data.get(e.dataId).values,i=new Float32Array(o.length);for(let a=0;a<o.length;++a){let l=o[a];i[a]=l*l}return{dataId:r.write(i,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}};var IFe=St(gu,(t,n)=>{let e=n;return isNaN(t)?NaN:t>0?1:e.alpha}),joe={kernelName:gu,backendName:"cpu",kernelFunc:IFe};function NFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r;_e(o,"stridedSlice");let{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:w,end:y,strides:_}=go.sliceInfo(o.shape,i,s,a,l,c,u,d,p),k;if(m)k=an({inputs:{x:o},backend:e,attrs:{shape:f}});else if(g||v){x.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let M=go.computeOutShape(w,y,_),E=Wa({inputs:{x:o},backend:e,attrs:{begin:w,size:M}});k=an({inputs:{x:E},backend:e,attrs:{shape:f}}),e.disposeIntermediateTensorInfo(E)}else{let M=e.bufferSync(o),E=nE(h,M,_,w);k=e.makeTensorInfo(f,E.dtype,E.values)}return k}var zoe={kernelName:Gg,backendName:"cpu",kernelFunc:NFe};function AFe(t){let{inputs:n,backend:e,attrs:r}=t,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=n,p=e.data.get(u.dataId).values,h=e.data.get(d.dataId).values,[f,m]=rE(p,h,o,i,s,a,l,c);return[e.makeTensorInfo([f.length],"string",f),e.makeTensorInfo(d.shape,"int32",m)]}var Hoe={kernelName:Wg,backendName:"cpu",kernelFunc:AFe};function RFe(t){let{inputs:n,backend:e,attrs:r}=t,{skipEmpty:o}=r,{input:i,delimiter:s}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values[0],[c,u,d]=oE(a,l,o),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var Uoe={kernelName:qg,backendName:"cpu",kernelFunc:RFe};function OFe(t){let{inputs:n,backend:e,attrs:r}=t,{numBuckets:o}=r,{input:i}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let s=e.data.get(i.dataId).values,a=iE(s,o);return e.makeTensorInfo(i.shape,"int32",a)}var Goe={kernelName:Kg,backendName:"cpu",kernelFunc:OFe};var FFe=St(fu,t=>Math.tan(t)),Woe={kernelName:fu,backendName:"cpu",kernelFunc:FFe};var PFe=St(mu,t=>Math.tanh(t)),qoe={kernelName:mu,backendName:"cpu",kernelFunc:PFe};function BFe(t){let{inputs:n,backend:e}=t,{tensor:r,indices:o,updates:i}=n,{sliceRank:s,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=O.calculateShapes(i,o,r.shape),d=!1,p=e.bufferSync(o),h=e.bufferSync(i),f=e.bufferSync(r),m=Gl(p,h,r.shape,u,l,a,s,c,f,d);return e.makeTensorInfo(r.shape,m.dtype,m.values)}var Koe={kernelName:Bg,backendName:"cpu",kernelFunc:BFe};function LFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reps:i}=r;_e(o,"tile");let s=sE(e.bufferSync(o),i);return e.makeTensorInfo(s.shape,s.dtype,s.values)}var Zoe={kernelName:_l,backendName:"cpu",kernelFunc:LFe};function $Fe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{k:i,sorted:s}=r;_e(o,"topk");let a=e.data.get(o.dataId).values,[l,c]=aE(a,o.shape,o.dtype,i,s);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(c.shape,c.dtype,c.values)]}var Xoe={kernelName:Zg,backendName:"cpu",kernelFunc:$Fe};function VFe(t){let{inputs:n,attrs:e,backend:r}=t,{image:o,transforms:i}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=e,[u,d,p,h]=o.shape,[f,m]=c??[d,p],g=[u,f,m,h],v=x.computeStrides(o.shape),w=v[0],y=v[1],_=v[2],k=x.computeStrides(g),M=k[0],E=k[1],A=k[2],P=x.getTypedArrayFromDType(o.dtype,x.sizeFromShape(g));P.fill(l);let N=r.data.get(o.dataId).values,B=r.data.get(i.dataId).values;for(let W=0;W<u;++W){let ie=i.shape[0]===1?B:B.subarray(W*8,W*8+8);for(let Z=0;Z<f;++Z)for(let X=0;X<m;++X)for(let G=0;G<h;++G){let H,V=ie[6]*X+ie[7]*Z+1;if(V===0)continue;let K=(ie[0]*X+ie[1]*Z+ie[2])/V,pe=(ie[3]*X+ie[4]*Z+ie[5])/V,le=Yoe(K,p,a),se=Yoe(pe,d,a);switch(s){case"nearest":H=GFe(N,d,p,w,y,_,W,se,le,G,l);break;case"bilinear":H=WFe(N,d,p,w,y,_,W,se,le,G,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}let ye=W*M+Z*E+X*A+G;P[ye]=H}return r.makeTensorInfo(g,o.dtype,P)}return{dataId:r.write(P,g,o.dtype),shape:o.shape,dtype:o.dtype}}var Qoe={kernelName:Xg,backendName:"cpu",kernelFunc:VFe};function Yoe(t,n,e){switch(e){case"reflect":return jFe(t,n);case"wrap":return zFe(t,n);case"nearest":return UFe(t,n);case"constant":default:return HFe(t,n)}}function jFe(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let r=2*n;e<r&&(e=r*Math.trunc(-e/r)+e),e=e<-n?e+r:-e-1}else if(e>n-1)if(n<=1)e=0;else{let r=2*n;e-=r*Math.trunc(e/r),e>=n&&(e=r-e-1)}return x.clamp(0,e,n-1)}function zFe(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let r=n-1;e+=n*(Math.trunc(-e/r)+1)}else if(e>n-1)if(n<=1)e=0;else{let r=n-1;e-=n*Math.trunc(e/r)}return x.clamp(0,e,n-1)}function HFe(t,n){return t}function UFe(t,n){return x.clamp(0,t,n-1)}function Pk(t,n,e,r,o,i,s,a,l,c,u){let d=s*r+a*o+l*i+c;return 0<=a&&a<n&&0<=l&&l<e?t[d]:u}function GFe(t,n,e,r,o,i,s,a,l,c,u){let d=Math.round(a),p=Math.round(l);return Pk(t,n,e,r,o,i,s,d,p,c,u)}function WFe(t,n,e,r,o,i,s,a,l,c,u){let d=Math.floor(a),p=Math.floor(l),h=d+1,f=p+1,m=(f-l)*Pk(t,n,e,r,o,i,s,d,p,c,u)+(l-p)*Pk(t,n,e,r,o,i,s,d,f,c,u),g=(f-l)*Pk(t,n,e,r,o,i,s,h,p,c,u)+(l-p)*Pk(t,n,e,r,o,i,s,h,f,c,u);return(h-a)*m+(a-d)*g}function qFe(t){let{inputs:n,attrs:e,backend:r}=t,{axis:o}=e,{x:i}=n;_e(i,"unique");let s=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:c}=lE(s,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var Joe={kernelName:Yg,backendName:"cpu",kernelFunc:qFe};function KFe(t){let{inputs:n,backend:e,attrs:r}=t,{value:o}=n,{axis:i}=r;i<0&&(i+=o.shape.length);let s=o.shape.length,a=o.shape[i],l=new Array(s-1),c=0;for(let h=0;h<s;h++)h!==i&&(l[c++]=o.shape[h]);let u=new Array(s).fill(0),d=o.shape.slice();d[i]=1;let p=new Array(a);for(let h=0;h<p.length;h++){u[i]=h;let f=Wa({inputs:{x:o},backend:e,attrs:{begin:u,size:d}});p[h]=an({inputs:{x:f},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(f)}return p}var eie={kernelName:ap,backendName:"cpu",kernelFunc:KFe};function ZFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,segmentIds:i}=n,{numSegments:s}=r;_e(o,"unsortedSegmentSum");let a=o.shape.length,l=i.shape.length,c=[],u=[],d=a-l,p=i;for(let f=0;f<d;++f){let m=Kv({inputs:{input:p},backend:e,attrs:{dim:f+1}});p=m,u.push(m)}for(let f=0;f<s;++f){let m=x.createScalarValue(f,"int32"),g=e.makeTensorInfo([],"int32",m),v=wL({inputs:{a:g,b:p},backend:e}),w=Ua({inputs:{x:v},backend:e,attrs:{dtype:"float32"}}),y=Z0({inputs:{a:w,b:o},backend:e}),_=Vp({inputs:{x:y},backend:e,attrs:{axis:0,keepDims:!1}});c.push(_),u.push(g),u.push(v),u.push(w),u.push(y),u.push(_)}let h=JL({inputs:c,backend:e,attrs:{axis:0}});return u.forEach(f=>e.disposeIntermediateTensorInfo(f)),h}var tie={kernelName:lp,backendName:"cpu",kernelFunc:ZFe};var XFe=[Mne,Ote,Tne,Dne,$te,Ene,Ine,Nne,Ane,Rne,One,Fne,Pne,Bne,Lne,Vne,jne,zne,Hne,Sne,Une,Gne,Wne,Vte,qne,Lte,jte,Kne,Fte,Zne,Yne,Qne,Jne,ere,tre,nre,rre,ore,ire,sre,are,lre,cre,ure,dre,pre,hre,fre,mre,gre,vre,wre,xre,yne,_re,zte,kre,Hte,bre,Ute,Cre,Sre,Mre,Gte,Wte,Tre,Dre,Ere,Ire,qte,Kte,Pte,Nre,Xne,Are,Rre,Ore,xne,Zte,Xte,Fre,Yte,Pre,Bre,Lre,$re,Vre,jre,zre,Qte,Hre,Ure,Gre,Wre,Kre,Zre,Xre,Jte,Yre,Qre,toe,ene,tne,noe,roe,ooe,nne,ioe,loe,coe,hE,uoe,_ne,one,doe,poe,hoe,foe,Bte,Rk,moe,kne,bne,Cne,goe,voe,woe,yoe,xoe,_oe,koe,cne,boe,Soe,Moe,Toe,dne,Doe,Eoe,Ioe,pne,Jre,Aoe,Roe,Ooe,Foe,Poe,Boe,Loe,$oe,fne,Voe,mne,gne,joe,zoe,Hoe,Uoe,Goe,vne,yre,Woe,qoe,Koe,Zoe,Xoe,Qoe,rne,Joe,eie,tie,soe];for(let t of XFe)q1(t);var e2={};Qt(e2,{assertNotComplex:()=>Wl,bindCanvasToFramebuffer:()=>i6e,bindColorTextureToFramebuffer:()=>Vk,bindTextureToProgramUniformSampler:()=>f7,bindTextureUnit:()=>iie,bindVertexBufferToProgramAttribute:()=>xE,callAndCheck:()=>Qe,canBeRepresented:()=>n7,createFragmentShader:()=>o7,createFramebuffer:()=>d7,createProgram:()=>i7,createStaticIndexBuffer:()=>l7,createStaticVertexBuffer:()=>a7,createTexture:()=>c7,createVertexShader:()=>r7,getBatchDim:()=>zp,getExtensionOrThrow:()=>Zv,getFramebufferErrorMessage:()=>sie,getMaxTexturesInShader:()=>v7,getNumChannels:()=>r6e,getProgramUniformLocation:()=>h7,getProgramUniformLocationOrThrow:()=>p7,getRowsCols:()=>Hp,getShapeAs3D:()=>Yv,getTextureShapeFromLogicalShape:()=>m7,getWebGLDisjointQueryTimerVersion:()=>w7,getWebGLErrorMessage:()=>oie,getWebGLMaxTextureSize:()=>g7,hasExtension:()=>Vs,isCapableOfRenderingToFloatTexture:()=>y7,isDownloadFloatTextureEnabled:()=>x7,isReshapeFree:()=>wf,isWebGLFenceEnabled:()=>_7,isWebGLVersionEnabled:()=>kE,linkProgram:()=>s7,logShaderSourceAndInfoLog:()=>yE,resetMaxTextureSize:()=>s6e,resetMaxTexturesInShader:()=>a6e,unbindColorTextureFromFramebuffer:()=>_E,unbindTextureUnit:()=>o6e,validateFramebuffer:()=>Xv,validateProgram:()=>$k,validateTextureSize:()=>u7});var Y0={},fE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function mE(t,n){Y0[t]=n}function $s(t,n){if(!(t in Y0)||n!=null){let r=QFe(t,n);if(r!==null)Y0[t]=r;else return console.log("Could not get context for WebGL version",t),null}let e=Y0[t];return e==null||e.isContextLost()?(delete Y0[t],$s(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Y0[t])}function YFe(t){if(!Q().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function QFe(t,n){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let e=n??YFe(t);return e.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Y0[t]},!1),Q().getBool("SOFTWARE_WEBGL_ENABLED")&&(fE.failIfMajorPerformanceCaveat=!1),t===1?e.getContext("webgl",fE)||e.getContext("experimental-webgl",fE):e.getContext("webgl2",fE)}var Q0=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(Q0||{}),Mi=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(Mi||{}),mi=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(mi||{});function J0(t,n){return[n,t]}function nie(t,n){return t*n}function Bk(t){let n=x.sizeFromShape(t),e=Math.ceil(n/4);return x.sizeToSquarishShape(e)}function Bu(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function rie(t,n){let[e,r]=Bu(t,n);return e*r*4}function Lk(t,n){let e=t,r,o,i,s,a,l,c,u,d,p;return Q().getNumber("WEBGL_VERSION")===2?(r=e.R32F,o=e.R16F,i=e.RGBA16F,s=e.RGBA32F,a=e.RED,c=4,u=1,d=e.HALF_FLOAT,p=e.FLOAT,l=e.RGBA8):(r=t.RGBA,o=t.RGBA,i=t.RGBA,s=e.RGBA,a=t.RGBA,c=4,u=4,d=n!=null?n.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:p}}function Qe(t,n){let e=n();return Q().getBool("DEBUG")&&JFe(t),e}function JFe(t){let n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+oie(t,n))}var e6e=596e-10,t6e=65504;function n7(t){return!!(Q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||e6e<Math.abs(t)&&Math.abs(t)<t6e)}function oie(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}function Zv(t,n){return jp(t,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}function r7(t,n){let e=jp(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Qe(t,()=>t.shaderSource(e,n)),Qe(t,()=>t.compileShader(e)),t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}function o7(t,n){let e=jp(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Qe(t,()=>t.shaderSource(e,n)),Qe(t,()=>t.compileShader(e)),Q().get("ENGINE_COMPILE_ONLY"))return e;if(t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw yE(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}var n6e=/ERROR: [0-9]+:([0-9]+):/g;function yE(t,n){let e=n6e.exec(n);if(e==null){console.log(`Couldn't parse line number in error: ${n}`),console.log(t);return}let r=+e[1],o=t.split(`
`),i=o.length.toString().length+2,s=o.map((d,p)=>x.rightPad((p+1).toString(),i)+d),a=0;for(let d=0;d<s.length;d++)a=Math.max(s[d].length,a);let l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join(`
`)),console.log(n.split(`
`)[0]),console.log(`%c ${x.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function i7(t){return jp(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function s7(t,n){if(Qe(t,()=>t.linkProgram(n)),!Q().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function $k(t,n){if(Qe(t,()=>t.validateProgram(n)),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function a7(t,n){let e=jp(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),Qe(t,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function l7(t,n){let e=jp(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Qe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)),Qe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function r6e(){return Q().getNumber("WEBGL_VERSION")===2?1:4}function c7(t){return jp(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function u7(t,n){let e=Q().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){let r=`[${t}x${n}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e){let r=`[${t}x${n}]`,o=`[${e}x${e}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function d7(t){return jp(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function xE(t,n,e,r,o,i,s){let a=t.getAttribLocation(n,e);return a===-1?!1:(Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Qe(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,i,s)),Qe(t,()=>t.enableVertexAttribArray(a)),!0)}function iie(t,n,e){aie(t,e),Qe(t,()=>t.activeTexture(t.TEXTURE0+e)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,n))}function o6e(t,n){aie(t,n),Qe(t,()=>t.activeTexture(t.TEXTURE0+n)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function p7(t,n,e){return jp(t,()=>t.getUniformLocation(n,e),'uniform "'+e+'" not present in program.')}function h7(t,n,e){return t.getUniformLocation(n,e)}function f7(t,n,e,r){Qe(t,()=>iie(t,n,r)),Qe(t,()=>t.uniform1i(e,r))}function i6e(t){Qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Qe(t,()=>t.viewport(0,0,t.canvas.width,t.canvas.height)),Qe(t,()=>t.scissor(0,0,t.canvas.width,t.canvas.height))}function Vk(t,n,e){Qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Qe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function _E(t,n){Qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Qe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Xv(t){let n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+sie(t,n))}function sie(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}function jp(t,n,e){let r=Qe(t,()=>n());if(r==null)throw new Error(e);return r}function aie(t,n){let e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e){let o=`[gl.TEXTURE0, gl.TEXTURE${e}]`;throw new Error(`textureUnit must be in ${o}.`)}}function zp(t,n=2){return x.sizeFromShape(t.slice(0,t.length-n))}function Hp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Yv(t){let n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[zp(t),...Hp(t)]),n}function m7(t,n=!1){let e=Q().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Q().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Q().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=e/2),n&&(e=e*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?x.nearestLargerEven(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=x.squeezeShape(t).newShape);let o=x.sizeFromShape(t),i=null;t.length<=1&&o<=e?i=[1,o]:t.length===2&&t[0]<=e&&t[1]<=e?i=t:t.length===3&&t[0]*t[1]<=e&&t[2]<=e?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=e&&t[1]*t[2]<=e?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=e&&t[3]<=e?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=e&&t[1]*t[2]*t[3]<=e&&(i=[t[0],t[1]*t[2]*t[3]]);let s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(n?2:1)&&Math.min(...i)>0;if(i==null||s)if(n){let a=zp(t),l=2,c=2;t.length&&([l,c]=Hp(t)),o=a*(l/2)*(c/2),i=x.sizeToSquarishShape(o).map(u=>u*2)}else i=x.sizeToSquarishShape(o);return i}function gE(t){return t%2===0}function wf(t,n){if(t=t.slice(-2),n=n.slice(-2),x.arraysEqual(t,n)||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){let e=t[t.length-1],r=n[n.length-1];if(e===r||gE(e)&&gE(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&gE(t[0])&&gE(n[0])}var vE,wE;function g7(t){if(vE==null){let n=$s(t);vE=n.getParameter(n.MAX_TEXTURE_SIZE)}return vE}function s6e(){vE=null}function a6e(){wE=null}function v7(t){if(wE==null){let n=$s(t);wE=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,wE)}function w7(t){if(t===0)return 0;let n,e=$s(t);return Vs(e,"EXT_disjoint_timer_query_webgl2")&&t===2?n=2:Vs(e,"EXT_disjoint_timer_query")?n=1:n=0,n}function Vs(t,n){return t.getExtension(n)!=null}function kE(t){try{if($s(t)!=null)return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function y7(t){if(t===0)return!1;let n=$s(t);if(t===1){if(!Vs(n,"OES_texture_float"))return!1}else if(!Vs(n,"EXT_color_buffer_float"))return!1;return t7(n)}function x7(t){if(t===0)return!1;let n=$s(t);if(t===1){if(!Vs(n,"OES_texture_float")||!Vs(n,"WEBGL_color_buffer_float"))return!1}else{if(Vs(n,"EXT_color_buffer_float"))return t7(n);let r="EXT_color_buffer_half_float";if(Vs(n,r)){let o=n.getExtension(r);return l6e(n,o)}return!1}return t7(n)}function t7(t){let n=Lk(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);let i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(i),s}function l6e(t,n){let e=Lk(t,n),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),a}function _7(t){return t!==2?!1:$s(t).fenceSync!=null}function Wl(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&x.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}var vt=Q();vt.registerFlag("HAS_WEBGL",()=>vt.getNumber("WEBGL_VERSION")>0);vt.registerFlag("WEBGL_VERSION",()=>kE(2)?2:kE(1)?1:0);vt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);vt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>vt.get("WEBGL_VERSION")===2);vt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);vt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);vt.registerFlag("WEBGL_PACK",()=>vt.getBool("HAS_WEBGL"));vt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CLIP",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_REDUCE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_LAZILY_UNPACK",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_CONV_IM2COL",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>g7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>v7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=vt.getNumber("WEBGL_VERSION");return t===0?0:w7(t)});vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>vt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!up.isMobile());vt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>y7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>vt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:vt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));vt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>x7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>_7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>vt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);vt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});vt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>up.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});vt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);vt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);vt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);vt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);vt.registerFlag("WEBGL_EXP_CONV",()=>!1);vt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>vt.getBool("IS_TEST"));vt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);vt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);vt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);vt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function vr(){let t,n,e,r,o,i,s,a,l,c;return Q().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",o="texture",i="outputColor",s="out vec4 outputColor;",a=Q().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",o="texture2D",i="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:o,output:i,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function ql(t,n,e="index"){let r=x.computeStrides(n);return r.map((o,i)=>{let s=`int ${t[i]} = ${e} / ${o}`,a=i===r.length-1?`int ${t[i+1]} = ${e} - ${t[i]} * ${o}`:`index -= ${t[i]} * ${o}`;return`${s}; ${a};`}).join("")}function t2(t,n,e="index"){let r=x.computeStrides(n);return r.map((o,i)=>{let s=`int ${t[i]} = ${e} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${e} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${s}; ${a};`}).join("")}function c6e(t,n){let e=t.length,r=t.map(i=>`${n}[${i}]`),o=new Array(e-1);o[e-2]=r[e-1];for(let i=e-3;i>=0;--i)o[i]=`(${o[i+1]} * ${r[i+1]})`;return o}function lie(t,n,e="index"){let r=t.map((i,s)=>s),o=c6e(r,n);return o.map((i,s)=>{let a=`int ${t[s]} = ${e} / ${o[s]}`,l=s===o.length-1?`int ${t[s+1]} = ${e} - ${t[s]} * ${o[s]}`:`index -= ${t[s]} * ${o[s]}`;return`${a}; ${l};`}).join("")}function Qv(t){let n=x.computeStrides(t).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;
  }
`}function Jv(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var bE=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:cie}=O;function uie(t,n,e){let r=[];if(t.forEach(h=>{let f=x.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),e.enableShapeUniforms){let{uniformShape:m}=CE(e.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break;default:break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),e.enableShapeUniforms){switch(n.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break;default:break}r.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});let o=r.join(`
`),i=t.map(h=>u6e(h,n,e.packedInputs,e.enableShapeUniforms)).join(`
`),s=n.texShape,a=vr(),l=h6e(a),c,u,d=g6e(a);return n.isPacked?(c=d6e(n.logicalShape,s,e.enableShapeUniforms),u=m6e(a)):(c=p6e(n.logicalShape,s,e.enableShapeUniforms),u=f6e(a)),e.packedInputs&&(d+=x6e),[d,l,u,o,c,i,e.userCode].join(`
`)}function tw(t,n=!1){let e=t.shapeInfo.logicalShape;switch(e.length){case 0:return A6e(t,n);case 1:return O6e(t,n);case 2:return P6e(t,n);case 3:return L6e(t,n);case 4:return V6e(t,n);case 5:return j6e(t);case 6:return z6e(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function die(t,n){switch(t.shapeInfo.logicalShape.length){case 0:return N6e(t);case 1:return R6e(t,n);case 2:return F6e(t,n);case 3:return B6e(t,n);default:return $6e(t,n)}}function u6e(t,n,e=!1,r){let o="";e?o+=die(t,r):o+=tw(t,r);let i=t.shapeInfo.logicalShape,s=n.logicalShape;return i.length<=s.length&&(e?o+=H6e(t,n):o+=U6e(t,n)),o}function d6e(t,n,e){switch(t.length){case 0:return pie();case 1:return _6e(t,n,e);case 2:return E6e(t,n,e);case 3:return b6e(t,n,e);default:return S6e(t,n,e)}}function p6e(t,n,e){switch(t.length){case 0:return pie();case 1:return k6e(t,n,e);case 2:return I6e(t,n,e);case 3:return C6e(t,n,e);case 4:return M6e(t,n,e);case 5:return T6e(t,n);case 6:return D6e(t,n);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function h6e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function f6e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function m6e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function g6e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${v6e}
    ${w6e}
    ${y6e}
  `}var v6e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,w6e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,y6e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,x6e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function pie(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function _6e(t,n,e){let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return r[0]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function k6e(t,n,e){return n[0]===1?e?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${n[1]}.0);
      }
    `:n[1]===1?e?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${n[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      return resTexRC.x * ${n[1]} + resTexRC.y;
    }
  `}function b6e(t,n,e){if(e)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(t[2]/2),i=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function C6e(t,n,e){if(e)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${t2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let r=ql(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function S6e(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(t[t.length-1]/2),i=o*Math.ceil(t[t.length-2]/2),s=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)s*=t[t.length-c-1],a=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${l});
    }
  `}function M6e(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${t2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let r=ql(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function T6e(t,n){let e=ql(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},
                             ${n[1]}));

      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function D6e(t,n){let e=ql(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function E6e(t,n,e){let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(x.arraysEqual(t,n))return e?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;let o=Math.ceil(t[1]/2);return e?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function I6e(t,n,e){return x.arraysEqual(t,n)?e?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));
      }
    `:t[1]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:e?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function n2(t){return`offset${t}`}function N6e(t){let n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=vr();return`
    vec4 ${e}() {
      return ${r.texture2D}(${n}, halfCR);
    }
  `}function A6e(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${e};}`;let[o,i]=t.shapeInfo.texShape;if(o===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${e}, halfCR);
      }
    `;let s=n2(e);if(n)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${s});
      return sampleTexture(${e}, uv);
    }
  `;let[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${s});
      return sampleTexture(${e}, uv);
    }
  `}function R6e(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=t.shapeInfo.texShape,i=vr();if(n)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${e}, uv);
    }
  `;let s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${e}, uv);
    }
  `}function O6e(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${nw(t)}
      }
    `;let o=t.shapeInfo.texShape,i=o[0],s=o[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;let a=n2(e);return s===1?n?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${e}, uv);
      }
    `:i===1?n?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:n?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});
      return sampleTexture(${e}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});
      return sampleTexture(${e}, uv);
    }
  `}function F6e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=i[0],a=i[1],l=vr();if(i!=null&&x.arraysEqual(e,i))return n?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(n)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;let c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(e[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function P6e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&x.arraysEqual(e,i)){if(n)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;let p=i[0],h=i[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}let{newShape:s,keptDims:a}=x.squeezeShape(e),l=s;if(l.length<e.length){let p=rw(t,l),h=["row","col"];return`
      ${tw(p,n)}
      float ${o}(int row, int col) {
        return ${o}(${ow(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${nw(t)}
      }
    `;let c=i[0],u=i[1],d=n2(r);return u===1?n?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?n?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:n?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function B6e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(e[0]===1){let p=e.slice(1),h=[1,2],f=rw(t,p),m=["b","row","col"];return`
        ${die(f,n)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${ow(m,h)});
        }
      `}let a=vr();if(n)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;let l=s[0],c=s[1],u=Math.ceil(e[2]/2),d=u*Math.ceil(e[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function L6e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e[1]*e[2],s=e[2],{newShape:a,keptDims:l}=x.squeezeShape(e),c=a;if(c.length<e.length){let m=rw(t,c),g=["row","col","depth"];return`
        ${tw(m,n)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${ow(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${nw(t)}
      }
    `;let u=t.shapeInfo.texShape,d=u[0],p=u[1],h=t.shapeInfo.flatOffset;if(p===i&&h==null)return n?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===s&&h==null)return n?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;let f=n2(r);return n?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${f};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${f};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function $6e(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=vr();if(n)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${e}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${e}, uv);
    }
  `;let i=t.shapeInfo.logicalShape,s=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[s-1]/2),p=d*Math.ceil(i[s-2]/2),h="int b, int row, int col",f=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<s-1;m++)h=`int b${m}, `+h,p*=i[s-m-1],f=`b${m} * ${p} + `+f;return`
    vec4 ${r}(${h}) {
      int index = ${f};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${o.texture2D}(${e}, uv);
    }
  `}function V6e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e[3],s=e[2]*i,a=e[1]*s,{newShape:l,keptDims:c}=x.squeezeShape(e);if(l.length<e.length){let w=rw(t,l),y=["row","col","depth","depth2"];return`
      ${tw(w,n)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${ow(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${i}, 1)));
        ${nw(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&u==null)return n?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${f}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&u==null)return n?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;let v=n2(r);return n?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${f}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function j6e(t){let n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=n[4],i=n[3]*o,s=n[2]*i,a=n[1]*s,{newShape:l,keptDims:c}=x.squeezeShape(n);if(l.length<n.length){let m=rw(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${tw(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${ow(g,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${i}, ${o})) +
          depth3;
        ${nw(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];if(h===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(h===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]},
               ${n[2]*n[3]}, ${n[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;let f=n2(e);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${i} +
          depth2 * ${o} + depth3 + ${f};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${e}, uv);
    }
  `}function z6e(t){let n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:o,keptDims:i}=x.squeezeShape(n);if(o.length<n.length){let g=rw(t,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${tw(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${ow(v,i)});
      }
    `}let s=n[5],a=n[4]*s,l=n[3]*a,c=n[2]*l,u=n[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${nw(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],f=p[1];if(f===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(f===s&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]*n[4]},
               ${n[2]*n[3]*n[4]},
               ${n[3]*n[4]},
               ${n[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;let m=n2(e);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${e}, uv);
    }
  `}function nw(t){let n=t.name,e=x.sizeFromShape(t.shapeInfo.logicalShape);return e<2?`return ${n};`:`
    for (int i = 0; i < ${e}; i++) {
      if (i == index) {
        return ${n}[i];
      }
    }
  `}function H6e(t,n){let e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),o="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=n.logicalShape.length,a=cie(t.shapeInfo.logicalShape,n.logicalShape),l=$t(s),c=s-i,u,d=["x","y","z","w","u","v"];i===0?u="":s<2&&a.length>=1?u="coords = 0;":u=a.map(w=>`coords.${d[w+c]} = 0;`).join(`
`);let p="";s<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((w,y)=>`coords.${d[y+c]}`).join(", ");let h="return outputValue;",m=x.sizeFromShape(t.shapeInfo.logicalShape)===1,v=x.sizeFromShape(n.logicalShape)===1;if(i===1&&!m&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!v)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){let w=i-2,y=i-1;a.indexOf(w)>-1&&a.indexOf(y)>-1?h="return vec4(outputValue.x);":a.indexOf(w)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(y)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${p});
      ${h}
    }
  `}function U6e(t,n){let e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),o="get"+r+"AtOutCoords",i=n.texShape,s=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&x.arraysEqual(s,i))return`
      float ${o}() {
        return sampleTexture(${e}, resultUV);
      }
    `;let c=$t(l),u=cie(t.shapeInfo.logicalShape,n.logicalShape),d=l-a,p,h=["x","y","z","w","u","v"];a===0?p="":l<2&&u.length>=1?p="coords = 0;":p=u.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let f="";return l<2&&a>0?f="coords":f=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${f});
    }
  `}function $t(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function CE(t,n,e){let{newShape:r,keptDims:o}=x.squeezeShape(n),i=n.length,s=t&&i===3&&n[0]===1,a=s?n.slice(1):r,l=!t&&i>1&&!x.arraysEqual(n,e)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?a:n,keptDims:o}}function rw(t,n){let e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function ow(t,n){return n.map(e=>t[e]).join(", ")}function fie(t,n,e,r){let o=e.map((u,d)=>{let p={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(p.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[d],shapeInfo:p}}),i=o.map(u=>u.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=uie(o,s,n),l=o7(t.gl,a),c=t.createProgram(l);return Q().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},k7(t,n,c)))}function k7(t,n,e){let r=[],o=[],i,s,a,l=null,c=null;c=t.getUniformLocation(e,"NAN",!1),Q().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(e,"INFINITY",!1));let u=!1;for(let d of n.variableNames){let p={name:d,uniform:t.getUniformLocation(e,d,u),offset:t.getUniformLocation(e,`offset${d}`,u)};n.enableShapeUniforms&&(p.shape=t.getUniformLocation(e,`${d}Shape`,u),p.texShape=t.getUniformLocation(e,`${d}TexShape`,u)),r.push(p)}if(n.enableShapeUniforms&&(i=t.getUniformLocation(e,"outShape",u),a=t.getUniformLocation(e,"outShapeStrides",u),s=t.getUniformLocation(e,"outTexShape",u)),n.customUniforms)for(let d of n.customUniforms)o.push(t.getUniformLocation(e,d.name,u));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:s}}function hie(t,n){if(t.length!==n.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${n.length} inputs`);t.forEach((e,r)=>{let o=e.logicalShape,i=n[r],s=i.shape;if(!x.arraysEqual(o,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${s} must match`);if(e.isUniform&&i.isUniform)return;let a=e.texShape,l=i.isUniform?null:i.texData.texShape;if(!x.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function mie(t,n,e,r,o){n.program.enableShapeUniforms||(hie(n.inShapeInfos,e),hie([n.outShapeInfo],[r]));let i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):t.setOutputMatrixTexture(i.texture,s[0],s[1]),t.setProgram(n.webGLProgram),t.bindVertexArray(n.webGLProgram.vao),Q().getNumber("WEBGL_VERSION")===1&&n.infLoc!==null&&t.gl.uniform1f(n.infLoc,1/0),n.nanLoc!==null&&t.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<e.length;++l){let c=e[l],{uniform:u,offset:d,shape:p,texShape:h}=n.variablesLocations[l];if(p){let{uniformShape:f}=CE(n.program.packedInputs,c.shape,c.texData.texShape);switch(f.length){case 1:t.gl.uniform1iv(p,new Int32Array(f));break;case 2:t.gl.uniform2iv(p,new Int32Array(f));break;case 3:t.gl.uniform3iv(p,new Int32Array(f));break;case 4:t.gl.uniform4iv(p,new Int32Array(f));break;default:break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(x.sizeFromShape(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let f=c.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),t.gl.uniform1fv(u,f)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}let a=n.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break;default:break}if(n.outShapeStridesLocation){let l=x.computeStrides(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l));break;default:break}}if(n.outTexShapeLocation&&t.gl.uniform2i(n.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),n.program.customUniforms&&o)for(let l=0;l<n.program.customUniforms.length;++l){let c=n.program.customUniforms[l],u=n.customUniformLocations[l],d=o[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function gie(t,n,e){let r="";n.concat(e).forEach(s=>{let a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=CE(t.packedInputs,s.shape,l),p="",h="",f="";if(u.length===1&&t.packedInputs){let k=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${k[0]>1}_${k[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){let k=x.computeStrides(u);f=`${k[0]===l[1]}_${k[k.length-1]===l[1]}`}let m=s.shape.length,g=u.length===2&&x.arraysEqual(s.shape,l),v=x.sizeFromShape(s.shape)===1,w=O.getBroadcastDims(s.shape,e.shape),y=!t.packedInputs&&m===e.shape.length&&x.arraysEqual(l,e.texData.texShape),_=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${y}_${c?d:""}_${u.length}_${v}_${w}_${g}_${p}_${h}_${f}_${_}_${a}`}else{let l=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${l}_${a}`}});let o=t.userCode,i=t.constructor.name;return i+="_"+r+"_"+o+`${Q().getNumber("WEBGL_VERSION")}`,i}function In(t){return Q().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var SE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Q0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=vr();this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?t2(["r","c","d"],n):ql(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${e.output} = result;
      }
    `}};var ME=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Q0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=vr();this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?t2(["r","c","d"],n):ql(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${e.output} = result;
      }
    `}};var TE=class{constructor(n){this.variableNames=["A"],this.outTexUsage=Mi.DOWNLOAD;let e=vr();this.outputShape=n,this.userCode=`
      ${bE}

      void main() {
        float x = getAAtOutCoords();
        ${e.output} = encode_float(x);
      }
    `}};var DE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Mi.DOWNLOAD;let e=vr();this.outputShape=n,this.userCode=`
      ${bE}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${e.output} = encode_float(x);
      }
    `}};var q6e={R:0,G:1,B:2,A:3},jk=class{constructor(n,e=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=vr();this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length);let i="result";e&&(i="floor(result * 255. + 0.5)");let s="";for(let a=0;a<r.length;a++){let l=r[a];s+=`
          if(offset == ${a}) {
            result = values[${q6e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?Jv():Qv(n)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${s}
        }
        ${o.output} = vec4(${i}, 0., 0., 0.);
      }
    `}};var EE=class{constructor(n,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=vr();this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length);let o="",i="result";e&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){let l=s*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${n[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${n[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?Jv():Qv(n)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${i};
        }
    `}};var FE={};Qt(FE,{bindVertexProgramAttributeStreams:()=>N7,createBufferFromOutputTexture:()=>O7,createFloat16MatrixTexture:()=>T7,createFloat16PackedMatrixTexture:()=>I7,createFloat32MatrixTexture:()=>M7,createIndexBuffer:()=>S7,createPackedMatrixTexture:()=>E7,createUnsignedBytesMatrixTexture:()=>D7,createVertexBuffer:()=>C7,createVertexShader:()=>b7,downloadByteEncodedFloatMatrixFromOutputTexture:()=>P7,downloadFloat32MatrixFromBuffer:()=>F7,downloadMatrixFromPackedOutputTexture:()=>L7,downloadPackedMatrixFromBuffer:()=>B7,getInternalFormatForFloat16MatrixTexture:()=>NE,getInternalFormatForFloat16PackedMatrixTexture:()=>OE,getInternalFormatForFloat32MatrixTexture:()=>IE,getInternalFormatForPackedMatrixTexture:()=>RE,getInternalFormatForUnsignedBytesMatrixTexture:()=>AE,uploadDenseMatrixToTexture:()=>A7,uploadPixelDataToTexture:()=>R7});function b7(t){let n=vr(),e=`${n.version}
    precision highp float;
    ${n.attribute} vec3 clipSpacePos;
    ${n.attribute} vec2 uv;
    ${n.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return r7(t,e)}function C7(t){let n=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return a7(t,n)}function S7(t){let n=new Uint16Array([0,1,2,2,1,3]);return l7(t,n)}function zk(t,n,e,r,o,i){u7(n,e);let s=c7(t),a=t.TEXTURE_2D;return Qe(t,()=>t.bindTexture(a,s)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Q().getNumber("WEBGL_VERSION")===1?Qe(t,()=>t.texImage2D(a,0,r,n,e,0,o,i,null)):Qe(t,()=>t.texStorage2D(a,1,r,n,e)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[e,n]}}function IE(t){return t.internalFormatFloat}function M7(t,n,e,r){let[o,i]=J0(n,e);return zk(t,o,i,IE(r),r.textureFormatFloat,t.FLOAT)}function NE(t){return t.internalFormatHalfFloat}function T7(t,n,e,r){let[o,i]=J0(n,e);return zk(t,o,i,NE(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function AE(t){return t.downloadTextureFormat}function D7(t,n,e,r){let[o,i]=J0(n,e);return zk(t,o,i,AE(r),t.RGBA,t.UNSIGNED_BYTE)}function RE(t){return t.internalFormatPackedFloat}function E7(t,n,e,r){let[o,i]=Bu(n,e);return zk(t,o,i,RE(r),t.RGBA,t.FLOAT)}function OE(t){return t.internalFormatPackedHalfFloat}function I7(t,n,e,r){let[o,i]=Bu(n,e);return zk(t,o,i,OE(r),t.RGBA,r.textureTypeHalfFloat)}function N7(t,n,e){return Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),xE(t,n,"clipSpacePos",e,3,20,0)&&xE(t,n,"uv",e,2,20,12)}function A7(t,n,e,r,o,i){Qe(t,()=>t.bindTexture(t.TEXTURE_2D,n));let s,a,l;o instanceof Uint8Array?(s=new Uint8Array(e*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(e*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),s.set(o),Q().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e,r,t.RGBA,a,s)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,e,r,0,t.RGBA,a,s)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function R7(t,n,e){Qe(t,()=>t.bindTexture(t.TEXTURE_2D,n)),e.data instanceof Uint8Array?Q().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e.data)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)):Q().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function O7(t,n,e,r){let o=t.createBuffer();Qe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));let a=4*4*n*e;return Qe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Qe(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)),Qe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function F7(t,n,e){let r=t,o=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function P7(t,n,e,r){let[o,i]=J0(n,e),s=4,a=new Uint8Array(nie(n*e,s));return Qe(t,()=>t.readPixels(0,0,o,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function B7(t,n,e,r,o,i,s,a){let l=t,c=new Float32Array(rie(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function L7(t,n,e){let r=new Float32Array(n*e*4);return Qe(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,r)),r}var yf=class{constructor(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let e=Q().getNumber("WEBGL_VERSION");if(n!=null?(this.gl=n,mE(e,n)):this.gl=$s(e),n=this.gl,Q().getNumber("WEBGL_VERSION")===2){let i=n;this.createVertexArray=()=>Qe(i,()=>i.createVertexArray()),this.bindVertexArray=s=>Qe(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>Qe(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>Qe(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(n!=null){let i=n.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Qe(n,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>Qe(n,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>Qe(n,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>Qe(n,()=>n.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Q().getNumber("WEBGL_VERSION")===1){let i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=Zv(this.gl,i),Vs(this.gl,s))this.textureHalfFloatExtension=Zv(this.gl,s);else if(Q().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Vs(this.gl,o))this.colorBufferHalfFloatExtension=Zv(this.gl,o);else if(Q().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Vs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Vs(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=C7(this.gl),this.indexBuffer=S7(this.gl),this.framebuffer=d7(this.gl),this.textureConfig=Lk(this.gl,this.textureHalfFloatExtension)}get debug(){return Q().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let n=this.gl;Qe(n,()=>n.finish()),Qe(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),Qe(n,()=>n.deleteFramebuffer(this.framebuffer)),Qe(n,()=>n.bindBuffer(n.ARRAY_BUFFER,null)),Qe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)),Qe(n,()=>n.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(n,e){return this.throwIfDisposed(),M7(this.gl,n,e,this.textureConfig)}createFloat16MatrixTexture(n,e){return this.throwIfDisposed(),T7(this.gl,n,e,this.textureConfig)}createUnsignedBytesMatrixTexture(n,e){return this.throwIfDisposed(),D7(this.gl,n,e,this.textureConfig)}uploadPixelDataToTexture(n,e){this.throwIfDisposed(),R7(this.gl,n,e)}uploadDenseMatrixToTexture(n,e,r,o){this.throwIfDisposed(),A7(this.gl,n,e,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(n,e){return this.throwIfDisposed(),I7(this.gl,n,e,this.textureConfig)}createPackedMatrixTexture(n,e){return this.throwIfDisposed(),E7(this.gl,n,e,this.textureConfig)}deleteMatrixTexture(n){this.throwIfDisposed(),this.outputTexture===n&&(_E(this.gl,this.framebuffer),this.outputTexture=null),Qe(this.gl,()=>this.gl.deleteTexture(n))}downloadByteEncodedFloatMatrixFromOutputTexture(n,e,r){return this.downloadMatrixDriver(n,()=>P7(this.gl,e,r,this.textureConfig))}downloadPackedMatrixFromBuffer(n,e,r,o,i,s){return B7(this.gl,n,e,r,o,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(n,e){return F7(this.gl,n,e)}createBufferFromTexture(n,e,r){this.bindTextureToFrameBuffer(n);let o=O7(this.gl,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){let n=this.createFence(this.gl);return this.pollFence(n)}createFence(n){let e,r;if(Q().getBool("WEBGL_FENCE_API_ENABLED")){let o=n,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=()=>{let s=o.clientWaitSync(i,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=i}else Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(e,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:e,isFencePassed:r}}downloadMatrixFromPackedTexture(n,e,r){return this.downloadMatrixDriver(n,()=>L7(this.gl,e,r))}createProgram(n){this.throwIfDisposed();let e=this.gl;this.vertexShader==null&&(this.vertexShader=b7(e));let r=i7(e);Qe(e,()=>e.attachShader(r,this.vertexShader)),Qe(e,()=>e.attachShader(r,n)),s7(e,r);let o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&$k(e,o),o}buildVao(n){this.setProgram(n),this.bindVertexArray(n.vao);let e=this.gl;Qe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),N7(e,n,this.vertexBuffer)}deleteProgram(n){this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&(Qe(this.gl,()=>this.gl.deleteProgram(n)),this.deleteVertexArray(n.vao))}setProgram(n){this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&$k(this.gl,this.program),Qe(this.gl,()=>this.gl.useProgram(n))}getUniformLocation(n,e,r=!0){return this.throwIfDisposed(),r?p7(this.gl,n,e):h7(this.gl,n,e)}getAttributeLocation(n,e){return this.throwIfDisposed(),Qe(this.gl,()=>this.gl.getAttribLocation(n,e))}getUniformLocationNoThrow(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)}setInputMatrixTexture(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),f7(this.gl,n,e,r)}setOutputMatrixTexture(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)}setOutputPackedMatrixTexture(n,e,r){this.throwIfDisposed();let[o,i]=Bu(e,r);this.setOutputMatrixTextureDriver(n,o,i)}setOutputMatrixWriteRegion(n,e,r,o){this.setOutputMatrixWriteRegionDriver(r,n,o,e)}setOutputPackedMatrixWriteRegion(n,e,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&$k(this.gl,this.program),Xv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let n=this.gl;if(this.debug){let e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Qe(n,()=>n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Qe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Zv(this.gl,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,i),i}let n=this.getQueryTimerExtensionWebGL1(),e=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),e}endQuery(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT);return}let n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(n){return z(this,null,function*(){return yield x.repeatedTry(()=>this.disposed||this.isQueryAvailable(n,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(n,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(n,e){if(e===0)return null;if(e===2){let r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}else{let r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(n,e){if(e===0)return!0;if(e===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{let r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(n,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(n){return new Promise(e=>{this.addItemToPoll(()=>n.isFencePassed(),()=>e())})}pollItems(){let n=K6e(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=n;++e){let{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(n+1)}addItemToPoll(n,e){if(this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Q().platform&&(r=Q().platform.setTimeoutCustom.bind(Q().platform)),x.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(n){this.throwIfDisposed(),Vk(this.gl,n,this.framebuffer),this.debug&&Xv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Vk(this.gl,this.outputTexture,this.framebuffer),this.debug&&Xv(this.gl)):_E(this.gl,this.framebuffer)}downloadMatrixDriver(n,e){this.bindTextureToFrameBuffer(n);let r=e();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(n,e,r){this.throwIfDisposed();let o=this.gl;Vk(o,n,this.framebuffer),this.debug&&Xv(o),this.outputTexture=n,Qe(o,()=>o.viewport(0,0,e,r)),Qe(o,()=>o.scissor(0,0,e,r))}setOutputMatrixWriteRegionDriver(n,e,r,o){this.throwIfDisposed(),Qe(this.gl,()=>this.gl.scissor(n,e,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function K6e(t){let n=0;for(;n<t.length&&t[n]();++n);return n-1}var{addImpl:vie,bincountImpl:PE,bincountReduceImpl:wie,bitwiseAndImpl:yie,castImpl:xie,ceilImpl:_ie,concatImpl:kie,equalImpl:bie,expImpl:Cie,expm1Impl:Sie,floorImpl:Mie,gatherNdImpl:Tie,gatherV2Impl:Die,greaterImpl:Eie,greaterEqualImpl:Iie,lessImpl:Nie,lessEqualImpl:Aie,linSpaceImpl:Rie,logImpl:Oie,maxImpl:Fie,maximumImpl:Pie,minimumImpl:Bie,multiplyImpl:Lie,negImpl:$ie,notEqualImpl:Vie,prodImpl:jie,raggedGatherImpl:zie,raggedRangeImpl:Hie,raggedTensorToTensorImpl:Uie,rangeImpl:Gie,rsqrtImpl:Wie,scatterImpl:qie,sigmoidImpl:Kie,simpleAbsImpl:BE,sliceImpl:Zie,sparseFillEmptyRowsImpl:Xie,sparseReshapeImpl:Yie,sparseSegmentReductionImpl:LE,sqrtImpl:Qie,staticRegexReplaceImpl:Jie,stridedSliceImpl:ese,stringNGramsImpl:tse,stringSplitImpl:nse,stringToHashBucketFastImpl:rse,subImpl:ose,tileImpl:ise,topKImpl:sse,transposeImpl:r2,uniqueImpl:ase}=Nk;function $7(t,n){return["x","y","z","w","u","v"].slice(0,n).map(e=>`${t}.${e}`)}function Rr(t,n){return n===1?[t]:$7(t,n)}function lse(t,n){if(t===1)return"rc";let e="";for(let r=0;r<t;r++)e+=n[r],r<t-1&&(e+=",");return e}var $E=class{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=In(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let e=Rr("rc",this.rank),r=$t(this.rank),o=this.getOutOfBoundsCondition(e),i=this.getSetup(e),s=this.getOutput(e);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(n){let e=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let i=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${n[n.length-1-s]},`+i;e.push(i)}return e}getOutOfBoundsCondition(n){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let r=this.rank-2;r<this.rank;r++)e+=`${n[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(e+="||");return e}getSetup(n){if(this.rank===1)return"";let e=n.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${e[0]};
      int c = ${e[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(n){let e=this.getSourceCoordsArr(n);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),
            cEdge ? 0. : getA(${e[1]}),
            rEdge ? 0. : getA(${e[2]}),
            rEdge || cEdge ? 0. : getA(${e[3]})`}};var iw=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length);let r="";for(let o=0;o<4;o++){let i="thisRC = rc;";o%2===1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${Z6e(e,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?Jv():Qv(n)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};

        ${r}

        setOutput(result);
      }
    `}};function Z6e(t,n){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${n?lie(["r","c","d"],"inputShape"):ql(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}var VE=class{constructor(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(n,e,r){let o=use(e,r),i=dse(n,o,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let s=cse(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return o===mi.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===mi.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===mi.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===mi.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===mi.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(n,e,r,o){if(this.freeTextures==null)return;let i=use(r,o),s=dse(e,i,o);s in this.freeTextures||(this.freeTextures[s]=[]);let a=cse(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=Q().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(n.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(n),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let c=this.usedTextures[s],u=c&&c.indexOf(n);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${n})`);let e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let n in this.freeTextures)this.freeTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let n in this.usedTextures)this.usedTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function X6e(t,n){let e=t;if(n===e.R32F)return 4;if(n===e.R16F)return 2;if(n===e.RGBA32F)return 16;if(n===t.RGBA)return 16;if(n===e.RGBA16F)return 8;if(n===e.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}function cse(t,n,e,r,o){let i=Y6e(n,r),s;if(o){let[l,c]=Bu(t[0],t[1]);s=l*c}else{let[l,c]=J0(t[0],t[1]);s=l*c}let a=X6e(e,i);return s*a}function Y6e(t,n){switch(t){case mi.PACKED_2X2_FLOAT32:return RE(n);case mi.PACKED_2X2_FLOAT16:return OE(n);case mi.UNPACKED_FLOAT32:return IE(n);case mi.UNPACKED_FLOAT16:return NE(n);case mi.PACKED_4X1_UNSIGNED_BYTE:return AE(n);default:throw new Error(`Unknown physical texture type ${t}`)}}function Q6e(t){return Q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?mi.PACKED_2X2_FLOAT32:mi.UNPACKED_FLOAT32:t?mi.PACKED_2X2_FLOAT16:mi.UNPACKED_FLOAT16}function use(t,n){if(t===Mi.UPLOAD)return mi.PACKED_2X2_FLOAT32;if(t===Mi.RENDER||t==null)return Q6e(n);if(t===Mi.DOWNLOAD||t===Mi.PIXELS)return mi.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function dse(t,n,e){return`${t[0]}_${t[1]}_${n}_${e}`}var Qo=class{constructor(n,e){this.variableNames=["A"],this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${e}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},so="if (isnan(x)) return x;",pse="return x;",V7="return abs(x);";var hse="return (x >= 0.0) ? x : (exp(x) - 1.0);",fse=so+`
  return (x < 0.0) ? 0.0 : x;
`,mse=so+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Lu="return x;",gse="return 1.0 / (1.0 + exp(-1.0 * x));";var wse="return x;",yse=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,xse=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_se=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kse="return 1.0 / (1.0 + exp(-1.0 * x));",ps=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${e}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var jE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length);let e=n.length,r=Rr("rc",e),o=$t(e),i=lse(e,r),s=r.slice(-2),a=e<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var e8e=Xo.whereImpl,t8e=1e-7,n8e=1e-4,zE={};function r8e(t){return t in zE||(zE[t]={}),zE[t]}var o8e=Q().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),i8e=600;function s8e(){return Q().global.screen==null?1024:Q().global.screen.height*Q().global.screen.width*window.devicePixelRatio*i8e/1024/1024}var HE=(()=>{class t extends kc{nextDataId(){return t.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Q().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let r;if(e!=null){if(e instanceof yf)r=e;else{let o=$s(Q().getNumber("WEBGL_VERSION"),e);r=new yf(o)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let o=$s(Q().getNumber("WEBGL_VERSION"));r=new yf(o),this.binaryCache=r8e(Q().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=r,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new VE(this.gpgpu),this.numMBBeforeWarning=s8e(),this.texData=new Th(this,na())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,r,o,i,s,a){let l=this.makeTensorInfo(r,o),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[i,s]},c.texShape=[i,s];let u=Yv(r),d=new jk(u,!1,a),p=this.runWebGLProgram(d,[l],o,[[i,s]]);return p.shape=r,c.texture=null,this.disposeIntermediateTensorInfo(l),p.dataId}write(e,r,o){if((Q().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Q().getBool("DEBUG"))&&this.checkNumericalProblems(e),o==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let i={id:this.nextDataId()};return this.texData.set(i,{shape:r,dtype:o,values:e,usage:Mi.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let r=this.texData.get(e);r.refCount++}decRef(e){if(this.texData.has(e)){let r=this.texData.get(e);r.refCount--}}move(e,r,o,i,s){if(Q().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:o,dtype:i,values:r,usage:Mi.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let r=this.texData.get(e),{values:o,dtype:i,complexTensorInfos:s,slice:a,shape:l,isPacked:c}=r;if(a!=null){let h;c?h=new ps(l,Lu):h=new Qo(l,Lu);let f=this.runWebGLProgram(h,[{dataId:e,shape:l,dtype:i}],i),m=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(o!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return o;let u=this.activeTimers!=null,d;u&&(d=x.now());let p;if(i==="complex64"){let h=this.readSync(s.real.dataId),f=this.readSync(s.imag.dataId);p=O.mergeRealAndImagArrays(h,f)}else p=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=x.now()-d),this.convertAndCacheOnCPU(e,p)}read(e){return z(this,null,function*(){if(this.pendingRead.has(e)){let m=this.pendingRead.get(e);return new Promise(g=>m.push(g))}let r=this.texData.get(e),{values:o,shape:i,slice:s,dtype:a,complexTensorInfos:l,isPacked:c}=r;if(s!=null){let m;c?m=new ps(i,Lu):m=new Qo(i,Lu);let g=this.runWebGLProgram(m,[{dataId:e,shape:i,dtype:a}],a),v=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),v}if(o!=null)return this.convertAndCacheOnCPU(e);if(Q().getBool("DEBUG")&&!Q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Q().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,d;if(a!=="complex64"&&Q().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);let m=this.texData.get(d.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...Bk(i))}this.pendingRead.set(e,[]),a!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(a==="complex64"){let m=yield Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]),g=m[0],v=m[1];p=O.mergeRealAndImagArrays(g,v)}else if(u==null)p=this.getValuesFromTexture(e);else{let m=x.sizeFromShape(i);p=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(d!=null&&this.disposeIntermediateTensorInfo(d),u!=null){let m=this.gpgpu.gl;Qe(m,()=>m.deleteBuffer(u))}let h=this.convertAndCacheOnCPU(e,p),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(m=>m(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&na().removeDataId(e,this),this.pendingDeletes--),h})}readToGPU(e,r={}){let o=this.texData.get(e),{values:i,shape:s,slice:a,dtype:l,isPacked:c,texture:u}=o;if(l==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let f;c?f=new ps(s,Lu):f=new Qo(s,Lu);let m=this.runWebGLProgram(f,[{dataId:e,shape:s,dtype:l}],l),g=this.readToGPU(m,r);return this.disposeIntermediateTensorInfo(m),g}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(e,r.customTexShape),p=na().makeTensorFromTensorInfo(d),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}bufferSync(e){let r=this.readSync(e.dataId);if(e.dtype==="string")try{let o=r.map(i=>x.decodeString(i));return st(e.shape,e.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return st(e.shape,e.dtype,r)}checkNumericalProblems(e){if(e!=null)for(let r=0;r<e.length;r++){let o=e[r];if(!n7(o))throw Q().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${o} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${o} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:r,dtype:o,isPacked:i}=this.texData.get(e),s=x.sizeFromShape(r);if(Q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let h=this.decode(e),f=this.texData.get(h.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...Bk(r)).subarray(0,s);return this.disposeIntermediateTensorInfo(h),m}let a=Q().getBool("WEBGL_PACK")&&i===!0,l=a?Yv(r):r,c=a?new DE(l):new TE(l),u=this.runWebGLProgram(c,[{shape:l,dtype:o,dataId:e}],"float32"),d=this.texData.get(u.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),p}timerAvailable(){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let r=this.activeTimers,o=[],i=!1;this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,e();let s=x.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=x.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=r,i&&(this.programTimersStack=null);let l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return z(this,null,function*(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(s);l.kernelMs=x.sum(c),l.getExtraProfileInfo=()=>c.map((u,d)=>({name:a[d],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:x.now(),endMs:null}}endTimer(e){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=x.now(),e)}getQueryTime(e){return z(this,null,function*(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let r=e;return r.endMs-r.startMs})}disposeData(e,r=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(r?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!r&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:o}=this.texData.get(e);return o!=null&&(this.disposeData(o.real.dataId,r),this.disposeData(o.imag.dataId,r)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:r,dtype:o,texShape:i,usage:s,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),r!=null&&(this.numBytesInGPU-=this.computeBytes(i,o),this.textureManager.releaseTexture(r,i,s,a)));let d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,r=o8e){return Q().getBool("WEBGL_CPU_FORWARD")&&e.every(o=>this.texData.get(o.dataId).texture==null&&x.sizeFromShape(o.shape)<r)}getGPGPUContext(){return this.gpgpu}where(e){O.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let r=e.dataSync();return e8e(e.shape,r)}packedUnaryOp(e,r,o){let i=new ps(e.shape,r),s=this.compileAndRun(i,[e],o);return na().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let i=BE(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,V7,e.dtype);let r=new Qo(e.shape,V7),o=this.compileAndRun(r,[e]);return na().makeTensorFromTensorInfo(o)}makeTensorInfo(e,r,o){let i;if(r==="string"&&o!=null&&o.length>0&&x.isString(o[0])){let s=o.map(a=>x.encodeString(a));i=this.write(s,e,r)}else i=this.write(o,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}}makeOutput(e,r,o){return na().makeTensorFromTensorInfo(this.makeTensorInfo(e,r,o),this)}unpackTensor(e){let r=new jE(e.shape);return this.runWebGLProgram(r,[e],e.dtype)}packTensor(e){let r=new $E(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)}packedReshape(e,r){let o=[zp(e.shape),...Hp(e.shape)],i={dtype:e.dtype,shape:o,dataId:e.dataId},s=[zp(r),...Hp(r)],a=new iw(s,o),l=!0,c=[o],u=this.runWebGLProgram(a,[i],e.dtype,c,l);return{dataId:u.dataId,shape:r,dtype:u.dtype}}decode(e,r){let o=this.texData.get(e),{isPacked:i,shape:s,dtype:a}=o;if(r!=null){let h=x.sizeFromShape(s),f=r[0]*r[1]*4;x.assert(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let l=Yv(s),c;i?c=new ME(l):c=new SE(l);let u=!0,d=[r??Bk(l)],p=this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,u,r);return{dtype:a,shape:s,dataId:p.dataId}}runWebGLProgram(e,r,o,i,s=!1,a){let l=this.makeTensorInfo(e.outputShape,o),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===Q0.DENSE){let w=a??Bk(e.outputShape);c.texShape=w.map(y=>y*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),x.sizeFromShape(l.shape)===0)return c.values=x.getTypedArrayFromDType(l.dtype,0),l;let u=[],d=r.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(w.dataId);if(y.texture==null){if(!e.packedInputs&&x.sizeFromShape(w.shape)<=Q().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!y.isPacked!=!!e.packedInputs)w=y.isPacked?this.unpackTensor(w):this.packTensor(w),u.push(w),y=this.texData.get(w.dataId);else if(y.isPacked&&!wf(y.shape,w.shape)){let _=w,k=w.shape;w.shape=y.shape,w=this.packedReshape(w,k),u.push(w),y=this.texData.get(w.dataId),_.shape=k}return{shape:w.shape,texData:y,isUniform:!1}});this.uploadToGPU(l.dataId);let p={shape:l.shape,texData:c,isUniform:!1},h=gie(e,d,p),f=this.getAndSaveBinary(h,()=>fie(this.gpgpu,e,d,p)),m=this.activeTimers!=null,g;m&&(g=this.startTimer()),Q().get("ENGINE_COMPILE_ONLY")||mie(this.gpgpu,f,d,p,i),u.forEach(w=>this.disposeIntermediateTensorInfo(w)),m&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));let v=Q().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){let w=x.now();w-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!Q().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){let w=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),w}return l}compileAndRun(e,r,o,i,s=!1){return o=o||r[0].dtype,this.runWebGLProgram(e,r,o,i,s)}getAndSaveBinary(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Q().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(r=>{this.gpgpu.deleteProgram(this.binaryCache[r].webGLProgram),delete this.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ne(()=>{if(!Q().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=Q().getBool("DEBUG");Q().set("DEBUG",!1);let r=this.abs(ze(1e-8)).dataSync()[0];if(Q().set("DEBUG",e),r>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?t8e:n8e}uploadToGPU(e){let r=this.texData.get(e),{shape:o,dtype:i,values:s,texture:a,usage:l,isPacked:c}=r;if(a!=null)return;let u=this.activeTimers!=null,d;u&&(d=x.now());let p=r.texShape;if(p==null&&(p=m7(o,c),r.texShape=p),s!=null){let h=Yv(o),f,m=p[1],g=p[0],v=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(c||!v)&&([m,g]=Bu(p[0],p[1])),c?f=new EE(h,v):f=new jk(h,v);let w=v?[g,m]:p,y=this.makeTensorInfo(w,i),_=this.texData.get(y.dataId);v?_.usage=Mi.PIXELS:_.usage=Mi.UPLOAD,_.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),m,g,s);let k=[[g,m]],E=this.runWebGLProgram(f,[y],i,k,!0),A=this.texData.get(E.dataId);r.texShape=A.texShape,r.isPacked=A.isPacked,r.usage=A.usage,Q().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(r.texture=A.texture,r.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(y),u&&(this.uploadWaitMs+=x.now()-d)}else{let h=this.acquireTexture(p,l,i,c);r.texture=h}}convertAndCacheOnCPU(e,r){let o=this.texData.get(e),{dtype:i}=o;return r!=null&&(o.values=a8e(r,i)),o.values}acquireTexture(e,r,o,i){if(this.numBytesInGPU+=this.computeBytes(e,o),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,r,i)}computeBytes(e,r){return e[0]*e[1]*x.bytesPerElement(r)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){return z(this,null,function*(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,r]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(r));return Promise.all(e)}else{for(let[,r]of Object.entries(this.binaryCache)){let o=new Promise(i=>{try{this.checkCompletion_(r),i(!0)}catch(s){throw s}});e.push(o)}return Promise.all(e)}})}checkCompletionAsync_(e){return z(this,null,function*(){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(yield hv(),this.checkCompletionAsync_(e))})}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(yE(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:r,customUniformLocations:o,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=k7(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=r,e.customUniformLocations=o,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,r,o){e.channels=e.channels||"RGBA";let{texture:i,height:s,width:a,channels:l}=e,c=na().backend;if(!c.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let u=c.writeTexture(i,r,o,s,a,l);return na().makeTensorFromDataId(u,r,o,c)}}return t.nextDataId=0,t})();function a8e(t,n){if(n==="float32"||n==="complex64")return t;if(n==="int32"||n==="bool"){let e=n==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<e.length;++r)e[r]=Math.round(t[r]);return e}else throw new Error(`Unknown dtype ${n}`)}var UE="4.22.0";function j7(){Q().set("WEBGL_FORCE_F16_TEXTURES",!0)}up.isBrowser()&&Gx("webgl",()=>new HE,2);var l8e={forceHalfFloat:j7};var sw=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var hs=class{constructor(n,e,r){this.variableNames=["A","B"],this.outputShape=O.assertAndGetBroadcastShape(e,r),this.enableShapeUniforms=In(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${n}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};var zs=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var js=class{constructor(n,e,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=O.assertAndGetBroadcastShape(e,r);let i=this.outputShape.length;this.enableShapeUniforms=In(i);let s="";if(o)if(i===0||x.sizeFromShape(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${$t(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let l=Rr("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${n}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}};function Or(t){let{inputs:n,backend:e}=t,{x:r}=n;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var bse={kernelName:xl,backendName:"webgl",kernelFunc:Or};function fs(t){let{inputs:n,backend:e}=t,{real:r,imag:o}=n,i=e.makeTensorInfo(r.shape,"complex64"),s=e.texData.get(i.dataId),a=Or({inputs:{x:r},backend:e}),l=Or({inputs:{x:o},backend:e});return s.complexTensorInfos={real:a,imag:l},i}var Cse={kernelName:tg,backendName:"webgl",kernelFunc:fs};var z7="return (a < 0.) ? b * a : a;",H7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function c8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{alpha:i}=r,s=e.makeTensorInfo([],"float32",x.createScalarValue(i,"float32")),a=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new js(H7,o.shape,s.shape):new hs(z7,o.shape,s.shape),l=e.runWebGLProgram(a,[o,s],"float32");return e.disposeIntermediateTensorInfo(s),l}var Sse={kernelName:Pd,backendName:"webgl",kernelFunc:c8e};var U7="return (a < 0.) ? b * a : a;",G7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function u8e(t){let{inputs:n,backend:e}=t,{x:r,alpha:o}=n,i=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new js(G7,r.shape,o.shape):new hs(U7,r.shape,o.shape);return e.runWebGLProgram(i,[r,o],"float32")}var Mse={kernelName:Zd,backendName:"webgl",kernelFunc:u8e};var qa="if (isnan(x)) return x;";function ut({opSnippet:t,packedOpSnippet:n,cpuKernelImpl:e,dtype:r}){return({inputs:o,backend:i})=>{let{x:s}=o,a=i,l=r||s.dtype;if(a.shouldExecuteOnCPU([s])&&e!=null){let d=a.texData.get(s.dataId),p=e(d.values,l);return a.makeTensorInfo(s.shape,l,p)}let c=Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&n!=null,u;return c?u=new ps(s.shape,n):u=new Qo(s.shape,t),a.runWebGLProgram(u,[s],l)}}function Sn({opSnippet:t,packedOpSnippet:n,checkOutOfBounds:e=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:i}){return({inputs:s,backend:a})=>{let{a:l,b:c}=s,u=a;if(r&&l.dtype==="complex64"){let f=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,v]=[[f.complexTensorInfos.real,m.complexTensorInfos.real],[f.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(y=>{let[_,k]=y,M={dataId:_.dataId,dtype:_.dtype,shape:l.shape},E={dataId:k.dataId,dtype:k.dtype,shape:c.shape},A=new hs(t,l.shape,c.shape);return u.runWebGLProgram(A,[M,E],Vr(_.dtype,k.dtype))}),w=fs({inputs:{real:g,imag:v},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(v),w}let d=i||Vr(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&o!=null){let f=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g=l.dtype==="string"?O.fromUint8ToStringArray(f):f,v=l.dtype==="string"?O.fromUint8ToStringArray(m):m,[w,y]=o(l.shape,c.shape,g,v,d),_=u.makeTensorInfo(y,d),k=u.texData.get(_.dataId);return k.values=w,_}let p=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&n!=null,h;return p?h=new js(n,l.shape,c.shape,e):h=new hs(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function Up(t,n=!1){if(t==="linear")return n?wse:pse;if(t==="relu")return n?xse:fse;if(t==="elu")return n?yse:hse;if(t==="relu6")return n?_se:mse;if(t==="prelu")return n?G7:U7;if(t==="leakyrelu")return n?H7:z7;if(t==="sigmoid")return n?kse:gse;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var aw=class{constructor(n,e,r,o=!1,i=!1,s=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=In(this.outputShape.length);let u=o?n[1]:n[2],d=Math.ceil(u/2),p=o?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",f=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");let w=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let y="rc.x",_="rc.x";n[0]<e[0]?y=`imod(rc.x, ${n[0]})`:e[0]<n[0]&&(_=`imod(rc.x, ${e[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${y};
        int batchB = ${_};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${f[0]} * ${m[0]});
          result += (${f[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${w}

        ${v}

        setOutput(result);
      }
    `}};var W7={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},Hk=class{constructor(n,e,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=O.assertAndGetBroadcastShape(e,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${n}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var Tse="return a * b;";function Uk(t){let{inputs:n,backend:e}=t,{a:r,b:o}=n,i=O.upcastType(r.dtype,o.dtype);if(r.dtype==="complex64"){let a=e.texData.get(r.dataId),l=e.texData.get(o.dataId),c=new Hk(W7.REAL,r.shape,o.shape),u=new Hk(W7.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),f=fs({inputs:{real:p,imag:h},backend:e});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),f}if(e.shouldExecuteOnCPU([r,o])){let a=e.texData.get(r.dataId),l=e.texData.get(o.dataId),[c,u]=Lie(r.shape,o.shape,a.values,l.values,i),d=e.makeTensorInfo(u,i),p=e.texData.get(d.dataId);return p.values=c,d}let s;return Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new js(Tse,r.shape,o.shape):s=new hs(Tse,r.shape,o.shape),e.runWebGLProgram(s,[r,o],i)}var Dse={kernelName:Qc,backendName:"webgl",kernelFunc:Uk};function Ese(t,n,e){let r=[zp(t.shape),...Hp(t.shape)],o={dtype:t.dtype,shape:r,dataId:t.dataId},i=[zp(n),...Hp(n)],s=new iw(i,r),a=!0,l=[r],c=e.runWebGLProgram(s,[o],t.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}function Ie(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{shape:i}=r,s=e,a=x.sizeFromShape(o.shape),l=x.inferFromImplicitShape(i,a),c=x.sizeFromShape(l);x.assert(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let u=s.texData.get(o.dataId);return u.isPacked&&!wf(o.shape,l)&&!(u.texture!==null&&wf(u.shape,l))?Ese(o,l,s):(s.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}var Ise={kernelName:Yd,backendName:"webgl",kernelFunc:Ie};var Gk=class{constructor(n,e){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=n;this.outputShape=[o,s];let a=Math.floor(r/4)*4,l=r%4,c="sumValue += dot(values, ones);";if(e!=null){let d=1/e;c=`sumValue += dot(values * ${x.isInt(d)?d.toPrecision(2):d}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var GE=class{constructor(n,e){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=n;this.outputShape=[o,s];let a="0.0",l="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",l="min"):e==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");let u=Math.floor(r/4)*4,d=r%4,p=`
      if (${e==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${e==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${e==="min"} || ${e==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";e==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function p8e(t){let n=[];for(;n.length===0||n[n.length-1].outSize!==1;){let e=n.length?n[n.length-1].outSize:t[1],r=O.computeOptimalWindowSize(e);n.push({inSize:e,windowSize:r,outSize:Math.ceil(e/r)})}return n}function Hs(t,n,e,r){let o=p8e(t.shape),i=t;for(let s=0;s<o.length;s++){let{inSize:a,windowSize:l,outSize:c}=o[s],u,d;e==="mean"?u=s===0?new Gk({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new Gk({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new GE({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},e),d=i,i=r.runWebGLProgram(u,[i],n),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}var WE=class{constructor(n,e){this.variableNames=["A"];let r=new Array(n.length);for(let s=0;s<r.length;s++)r[s]=n[e[s]];this.outputShape=r,this.rank=r.length;let o=$t(this.rank),i=h8e(e);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}};function h8e(t){let n=t.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(n);for(let o=0;o<t.length;o++)r[t[o]]=e[o];return r.join()}var qE=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let r=new Array(n.length);for(let u=0;u<r.length;u++)r[u]=n[e[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let o=$t(this.rank),i=$7("rc",this.rank),s=new Array(this.rank);for(let u=0;u<e.length;u++)s[e[u]]=i[u];let a=`vec2(${s.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function xf(t,n,e){let r=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qE(t.shape,n):new WE(t.shape,n);return e.runWebGLProgram(r,[t],t.dtype)}function Nse(t,n,e,r){let o=n,i=t.shape.length,s=x.parseAxisParam(o,t.shape),a=s,l=O.getAxesPermutation(a,i),c=l!=null,u=t;c&&(u=xf(t,l,r),a=O.getInnerMostAxes(a.length,i)),O.assertAxesAreInnerMostDims("sum",a,i);let[d,p]=O.computeOutAndReduceShapes(u.shape,a),h=d;e&&(h=O.expandShapeToKeepDim(d,s));let f=x.sizeFromShape(p),g=x.sizeFromShape(t.shape)/f,v=Ie({inputs:{x:u},attrs:{shape:[g,f]},backend:r}),w=Uh(t.dtype),y=Hs(v,w,"sum",r),_=Ie({inputs:{x:y},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(u),_}function o2(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;return Nse(o,i,s,e)}var Ase={kernelName:rp,backendName:"webgl",kernelFunc:o2};function or(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{perm:i}=r,s=e,a=o.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=o.shape[i[u]];let c;if(s.shouldExecuteOnCPU([o])){let d=s.texData.get(o.dataId).values,p=r2(d,o.shape,o.dtype,i,l);c=s.makeTensorInfo(l,o.dtype);let h=s.texData.get(c.dataId);h.values=p}else c=xf(o,i,s);return c}var Rse={kernelName:kl,backendName:"webgl",kernelFunc:or};var q7=1e3;function i2({a:t,b:n,transposeA:e,transposeB:r,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let c=t.shape.length,u=n.shape.length,d=e?t.shape[c-2]:t.shape[c-1],p=r?n.shape[u-1]:n.shape[u-2],h=e?t.shape[c-1]:t.shape[c-2],f=r?n.shape[u-2]:n.shape[u-1],m=t.shape.slice(0,-2),g=n.shape.slice(0,-2),v=x.sizeFromShape(m),w=x.sizeFromShape(g),_=os.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([h,f]);x.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${e} and transposeB=${r} must match.`);let k=e?[v,d,h]:[v,h,d],M=r?[w,f,p]:[w,p,f],E=Ie({inputs:{x:t},backend:o,attrs:{shape:k}}),A=Ie({inputs:{x:n},backend:o,attrs:{shape:M}}),P=[E,A],N=Math.max(v,w),B=e?E.shape[1]:E.shape[2],S=i!=null,W=s!=null,ie=l==="leakyrelu",Z=l!=null?Up(l,!0):null,X=S||W||ie||Z!=null,G;if((h===1||f===1)&&B>q7&&X===!1){let V=E,K=A;e&&(V=or({inputs:{x:E},backend:o,attrs:{perm:[0,2,1]}}),P.push(V)),r&&(K=or({inputs:{x:A},backend:o,attrs:{perm:[0,2,1]}}),P.push(K));let pe=f!==1,le=f===1,se=V;pe&&(se=Ie({inputs:{x:V},backend:o,attrs:{shape:[N,B,1]}}),P.push(se));let ye=f===1?2:1,Ae=K;le&&(Ae=Ie({inputs:{x:K},backend:o,attrs:{shape:[N,1,B]}}),P.push(Ae));let Re=Uk({inputs:{a:se,b:Ae},backend:o});G=o2({inputs:{x:Re},backend:o,attrs:{axis:ye,keepDims:!0}}),P.push(Re)}else{let V=Vr(t.dtype,n.dtype),K=new aw(k,M,[N,h,f],e,r,S,Z,W,ie),pe=[E,A];if(i!=null&&pe.push(i),W&&pe.push(s),ie){let le=o.makeTensorInfo([],"float32",x.createScalarValue(a,"float32"));pe.push(le),P.push(le)}G=o.runWebGLProgram(K,pe,V)}let H=Ie({inputs:{x:G},backend:o,attrs:{shape:_}});P.push(G);for(let V of P)o.disposeIntermediateTensorInfo(V);return H}function f8e(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return i2({a:o,b:i,transposeA:l,transposeB:c,backend:e,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}var Ose={kernelName:$h,backendName:"webgl",kernelFunc:f8e};var Fse="return abs(x);";function m8e(t){let{inputs:n,backend:e}=t,{x:r}=n;if(e.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let i=e.texData.get(r.dataId),s=BE(i.values);return e.makeTensorInfo(r.shape,r.dtype,s)}let o;return Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new ps(r.shape,Fse):o=new Qo(r.shape,Fse),e.runWebGLProgram(o,[r],r.dtype)}var Pse={kernelName:vd,backendName:"webgl",kernelFunc:m8e};var g8e=so+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,v8e=ut({opSnippet:g8e}),Bse={kernelName:Sc,backendName:"webgl",kernelFunc:v8e};var w8e=so+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,y8e=ut({opSnippet:w8e}),Lse={kernelName:Mc,backendName:"webgl",kernelFunc:y8e};var $se="return a + b;",x8e=Sn({opSnippet:$se,packedOpSnippet:$se,supportsComplex:!0,cpuKernelImpl:vie}),Vse={kernelName:Ca,backendName:"webgl",kernelFunc:x8e};var KE=class{constructor(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}};var ZE=class{constructor(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}};function XE(t){let{inputs:n,backend:e}=t,r=n;if(r.length===1)return Or({inputs:{x:r[0]},backend:e});if(r.length>Q().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let l=Math.floor(r.length/2),c=XE({inputs:r.slice(0,l),backend:e}),u=XE({inputs:r.slice(l),backend:e});return XE({inputs:[c,u],backend:e})}let o=r.map(l=>l.dtype).reduce((l,c)=>Vr(l,c)),i=r.map(l=>l.shape),a=Q().getBool("WEBGL_PACK")?new ZE(r[0].shape,i):new KE(r[0].shape,i);return e.runWebGLProgram(a,r,o)}var jse={kernelName:wd,backendName:"webgl",kernelFunc:XE};function _8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=or({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,a)),O.assertAxesAreInnerMostDims("all",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=Ie({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Hs(m,m.dtype,"all",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=Ie({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=Ie({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var zse={kernelName:Zm,backendName:"webgl",kernelFunc:_8e};function k8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=or({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,a)),O.assertAxesAreInnerMostDims("any",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=Ie({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Hs(m,m.dtype,"any",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=Ie({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=Ie({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var Hse={kernelName:Xm,backendName:"webgl",kernelFunc:k8e};var YE=class{constructor(n,e,r){this.variableNames=["A"];let{windowSize:o,batchSize:i,outSize:s}=n;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];let a=e==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};var QE=class{constructor(n,e,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,x.assert(n.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);let i=n[n.length-1],s=Math.ceil(i/e);this.outputShape=n.slice(0,-1),s>1&&this.outputShape.push(s),o||this.variableNames.push("bestIndicesA");let a=this.outputShape,l=a.length,c=$t(l),u=Rr("coords",l),d,p;if(s===1){p=l+1;let A=$t(p);d=`
        ${A} sourceLocR = ${A}(${u.join()}, 0);
        ++${u[l-1]};
        ${A} sourceLocG = ${A}(${u.join()}, 0);
        ++${u[l-2]};
        ${A} sourceLocA = ${A}(${u.join()}, 0);
        --${u[l-1]};
        ${A} sourceLocB = ${A}(${u.join()}, 0);
        --${u[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;let h=["x","y","z","w","u","v"].slice(0,p),f="."+h[p-1],m=h.map(A=>"int "+A),g=Rr("sourceLocR",p-1).concat("inIdx.r"),v=Rr("sourceLocG",p-1).concat("inIdx.g"),w=Rr("sourceLocB",p-1).concat("inIdx.b"),y=Rr("sourceLocA",p-1).concat("inIdx.a"),_=r==="max"?"greaterThan":"lessThan",k=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${y.join()})));`,M=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${w.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,E=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${f}, sourceLocG${f},
          sourceLocB${f}, sourceLocA${f}) * ${e};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${M};

        for (int i = 0; i < ${e}; i++) {
          inIdx = srcIdx;
          ${k}
          vec4 candidate = ${M};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function Use(t,n,e,r=null){let o=n.shape[0],i=n.shape[1];r!=null&&(o=r.shape[0],i=r.shape[1]);let s=O.computeOptimalWindowSize(i),a={windowSize:s,inSize:i,batchSize:o,outSize:Math.ceil(i/s)},l=new YE(a,e,r==null),c=[n];r!=null&&c.push(r);let u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;let d=Use(t,n,e,u);return t.disposeIntermediateTensorInfo(u),d}function Gse(t,n,e,r=null){let o=r!=null?r.shape:n.shape,i=o[o.length-1],s=O.computeOptimalWindowSize(i),a=new QE(o,s,e,r==null),l=r==null?[n]:[n,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===n.shape.length){let u=Gse(t,n,e,c);return t.disposeIntermediateTensorInfo(c),u}return c}function JE(t,n,e,r){let o=[e];if(O.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,n.shape.length),!Q().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){let i=[],s=t.texData.get(n.dataId),a=s!==null&&s.isPacked,l=n;a&&(l=t.unpackTensor(n),i.push(l));let[c,u]=O.computeOutAndReduceShapes(l.shape,o),d=x.sizeFromShape(u),p=Ie({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);let h=Use(t,p,r);i.push(h);let f=Ie({inputs:{x:h},backend:t,attrs:{shape:c}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),f}return Gse(t,n,r)}function b8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r,s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=or({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),O.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=JE(e,l,s[0],"max");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var Wse={kernelName:yd,backendName:"webgl",kernelFunc:b8e};function C8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r,s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=or({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),O.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=JE(e,l,s[0],"min");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var qse={kernelName:xd,backendName:"webgl",kernelFunc:C8e};var S8e=so+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,M8e=ut({opSnippet:S8e}),Kse={kernelName:Tc,backendName:"webgl",kernelFunc:M8e};var T8e=so+"return log(x + sqrt(x * x + 1.0));",D8e=ut({opSnippet:T8e}),Zse={kernelName:Dc,backendName:"webgl",kernelFunc:D8e};var E8e=so+`
  return atan(x);
`,I8e=ut({opSnippet:E8e}),Xse={kernelName:Ec,backendName:"webgl",kernelFunc:I8e};var N8e=sw+`
  return atan(a, b);
`,A8e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+zs+`
  return result;
`,R8e=Sn({opSnippet:N8e,packedOpSnippet:A8e}),Yse={kernelName:Nc,backendName:"webgl",kernelFunc:R8e};var O8e=so+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,F8e=ut({opSnippet:O8e}),Qse={kernelName:Ic,backendName:"webgl",kernelFunc:F8e};var Kl=class{constructor(n,e,r,o=!1,i=!1){if(this.variableNames=["x"],e==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,h=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;let m=e==="avg",g=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,v=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`,w="0.0";if(m||(w="-1.0 / 1e-20"),r){let A=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${f});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${A} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?i?g:v:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let y="max",_=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(_="avgValue / max(count, 1.0)");let k=Math.floor(s/4)*4,M=s%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${y}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${f});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${k}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${k};
          if (${M===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${M===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${M===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${_});
      }
    `}},_f=class{constructor(n,e,r,o=!1,i=!1){if(this.variableNames=["x"],e==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideDepth,l=n.strideHeight,c=n.strideWidth,u=n.dilationDepth,d=n.dilationHeight,p=n.dilationWidth,h=n.effectiveFilterDepth,f=n.effectiveFilterHeight,m=n.effectiveFilterWidth,g=n.padInfo.front,v=n.padInfo.top,w=n.padInfo.left;this.outputShape=n.outShape;let y=e==="avg",_="0.0";if(y||(_="-1.0 / 1e-20"),r){let N=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${g}, ${v}, ${w});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${n.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${f};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${N} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?i?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${f} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let k="max",M=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(M="avgValue / max(count, 1.0)");let E=Math.floor(s/4)*4,A=s%4,P=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${g}, ${v}, ${w});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${P}
            }

            int xC = xCCorner + ${E};
            if (${A===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${A===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${A===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${P}
            }
          }
        }
        setOutput(${M});
      }
    `}};function P8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;Wl(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))return Or({inputs:{x:o},backend:e});let d=new Kl(u,"avg",!1);return e.runWebGLProgram(d,[o],"float32")}var Jse={kernelName:_d,backendName:"webgl",kernelFunc:P8e};function B8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=O.computePool3DInfo(o.shape,i,s,u,a,l,c),p=new _f(d,"avg",!1);return e.runWebGLProgram(p,[o],"float32")}var eae={kernelName:kd,backendName:"webgl",kernelFunc:B8e};var eI=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,u=l-1-n.padInfo.top,d=c-1-n.padInfo.left,p=1/(e*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},tI=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterDepth,r=n.filterHeight,o=n.filterWidth,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,h=n.effectiveFilterWidth,f=d-1-n.padInfo.front,m=p-1-n.padInfo.top,g=h-1-n.padInfo.left,v=1/(e*r*o);this.userCode=`
      const ivec3 pads = ivec3(${f}, ${m}, ${g});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function L8e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],p=O.computePool3DInfo(s.shape,a,l,d,c,u),h=new tI(p);return e.runWebGLProgram(h,[o],s.dtype)}var tae={kernelName:Qm,backendName:"webgl",kernelFunc:L8e};function $8e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i;Wl([o,i],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=r,u=O.computePool2DInfo(s.shape,a,l,1,c),d=new eI(u);return e.runWebGLProgram(d,[o],s.dtype)}var nae={kernelName:Ym,backendName:"webgl",kernelFunc:$8e};function V8e(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i}=n,{transposeA:s,transposeB:a}=r;return i2({a:o,b:i,transposeA:s,transposeB:a,backend:e})}var rae={kernelName:bd,backendName:"webgl",kernelFunc:V8e};var nI=class{constructor(n,e,r,o,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],O.assertAndGetBroadcastShape(n,e),O.assertAndGetBroadcastShape(n,r);let a="0.0";o!=null&&(O.assertAndGetBroadcastShape(n,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(O.assertAndGetBroadcastShape(n,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};var rI=class{constructor(n,e,r,o,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],O.assertAndGetBroadcastShape(n,e),O.assertAndGetBroadcastShape(n,r);let a="vec4(0.0)";o!=null&&(O.assertAndGetBroadcastShape(n,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(O.assertAndGetBroadcastShape(n,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var j8e=({inputs:t,backend:n,attrs:e})=>{let{x:r,mean:o,variance:i,offset:s,scale:a}=t;x.assert(o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),x.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),x.assert(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;l==null&&(l=.001);let c=[r,o,i],u=null;s!=null&&(u=s.shape,c.push(s));let d=null;a!=null&&(d=a.shape,c.push(a));let p=Q().getBool("WEBGL_PACK_NORMALIZATION")?new rI(r.shape,o.shape,i.shape,u,d,l):new nI(r.shape,o.shape,i.shape,u,d,l);return n.runWebGLProgram(p,c,c[0].dtype)},oae={kernelName:Od,backendName:"webgl",kernelFunc:j8e};var oI=class{constructor(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;let e=$t(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=z8e(this.rank),o,i=n.map((s,a)=>`sourceLoc.${K7[a]} = start[${a}] + coords.${K7[a]};`);o=`
        ${e} sourceLoc;
        ${e} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}},K7=["x","y","z","w","u","v"];function z8e(t){if(t===1)return"sourceLoc";if(t<=6)return K7.slice(0,t).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var iI=class{constructor(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let e=$t(this.rank),r=Rr("coords",this.rank),o=Rr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,s=`getChannel(getSource(${o.join()}), ${i})`,a=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${n[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${s};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${n[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${n[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${e}(${n.map((u,d)=>`start[${d}]`).join()});`:n.map((u,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${e} coords = getOutputCoords();
        ${e} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}};function H8e(t,n,e,r){let o=r.texData.get(t.dataId),i=r.makeTensorInfo(e,t.dtype),s=r.texData.get(i.dataId);Object.assign(s,o),s.refCount=1,s.shape=e,s.dtype=t.dtype;let a=go.computeFlatOffset(n,x.computeStrides(t.shape));o.slice&&(a+=o.slice.flatOffset),s.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};let l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}function Zl(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,size:s}=r,[a,l]=go.parseSliceParams(o,i,s);if(go.assertParamsValid(o,a,l),x.sizeFromShape(l)===0)return e.makeTensorInfo(l,o.dtype,[]);if(e.shouldExecuteOnCPU([o])||o.dtype==="string"){let d=e.texData.get(o.dataId),p=Zie(d.values,a,l,o.shape,o.dtype);return e.makeTensorInfo(l,o.dtype,p)}let{isPacked:c}=e.texData.get(o.dataId),u=go.isSliceContinous(o.shape,a,l);if(c||!u){let d=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iI(l):new oI(l),p=[a];return e.runWebGLProgram(d,[o],o.dtype,p)}return e.uploadToGPU(o.dataId),H8e(o,a,l,e)}var iae={kernelName:np,backendName:"webgl",kernelFunc:Zl};var U8e=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,crops:s}=r;x.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((w,y)=>w*y),l=O.getReshaped(o.shape,i,a),c=O.getPermuted(l.length,i.length),u=O.getReshapedPermuted(o.shape,i,a),d=O.getSliceBeginCoords(s,i.length),p=O.getSliceSize(u,s,i.length),h=[],f=Ie({inputs:{x:o},backend:e,attrs:{shape:l}}),m=or({inputs:{x:f},backend:e,attrs:{perm:c}}),g=Ie({inputs:{x:m},backend:e,attrs:{shape:u}}),v=Zl({inputs:{x:g},backend:e,attrs:{begin:d,size:p}});return h.push(f),h.push(m),h.push(g),h.forEach(w=>e.disposeIntermediateTensorInfo(w)),v},sae={kernelName:Cd,backendName:"webgl",kernelFunc:U8e};function G8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s}=r,a=e.readSync(o.dataId),l=e.readSync(i.dataId),c=PE(a,l,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,c)}var aae={kernelName:Jm,backendName:"webgl",kernelFunc:G8e};var W8e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,q8e=`
  return float(int(a.r) & int(b.r));
`;function K8e(t){let{inputs:n,backend:e}=t,{a:r,b:o}=n,i=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Q().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([r,o])||s===1){let l=e.texData.get(r.dataId).values,c=e.texData.get(o.dataId).values,[u,d]=yie(r.shape,o.shape,l,c,r.dtype),p=e.makeTensorInfo(d,r.dtype),h=e.texData.get(p.dataId);return h.values=u,p}let a;return i?a=new js(W8e,r.shape,o.shape,!1):a=new hs(q8e,r.shape,o.shape),e.runWebGLProgram(a,[r,o],r.dtype)}var lae={kernelName:Eh,backendName:"webgl",kernelFunc:K8e};function Z8e(t){let{inputs:n,backend:e}=t,{s0:r,s1:o}=n,i=e.readSync(r.dataId),s=e.readSync(o.dataId),a=O.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var cae={kernelName:eg,backendName:"webgl",kernelFunc:Z8e};var X8e="return float(a != b);",Z7=Sn({opSnippet:X8e,cpuKernelImpl:Vie,dtype:"bool"}),uae={kernelName:Bh,backendName:"webgl",kernelFunc:Z7};function Gp(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.texData.get(r.dataId);return Or({inputs:{x:o.complexTensorInfos.real},backend:e})}var dae={kernelName:Rg,backendName:"webgl",kernelFunc:Gp};var Y8e="return float(int(x));";function pae(t,n){let e=new Qo(t.shape,Y8e),r=n.runWebGLProgram(e,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function X7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return Or({inputs:{x:o},backend:e});let s=Bn(o.shape),a=X7({inputs:{x:o},backend:e,attrs:{dtype:"float32"}}),l=fs({inputs:{real:a,imag:s},backend:e});return s.dispose(),e.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){let s=Gp({inputs:{input:o},backend:e}),a=X7({inputs:{x:s},backend:e,attrs:{dtype:i}});return e.disposeIntermediateTensorInfo(s),a}if(!x.hasEncodingLoss(o.dtype,i)){let s=Or({inputs:{x:o},backend:e});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(e.shouldExecuteOnCPU([o])){let s=e.texData.get(o.dataId).values,[a,l,c]=xie(s,o.shape,o.dtype,i);return e.makeTensorInfo(a,l,c)}if(i==="int32")return pae(o,e);if(i==="bool"){let s=e.makeTensorInfo([],"bool",x.getTypedArrayFromDType("bool",1)),l=Z7({inputs:{a:o,b:s},backend:e});return e.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}var hae={kernelName:yl,backendName:"webgl",kernelFunc:X7};var fae="return ceil(x);",Q8e=ut({opSnippet:fae,packedOpSnippet:fae,cpuKernelImpl:_ie}),mae={kernelName:Ac,backendName:"webgl",kernelFunc:Q8e};var sI=class{constructor(n){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var aI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function J8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{clipValueMin:i,clipValueMax:s}=r,a;Q().getBool("WEBGL_PACK_CLIP")?a=new aI(o.shape):a=new sI(o.shape);let l=[[i],[s]];return e.runWebGLProgram(a,[o],o.dtype,l)}var gae={kernelName:Rc,backendName:"webgl",kernelFunc:J8e};var lI=class{constructor(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function vae(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}}function ePe(t){let{inputs:n,backend:e}=t,{x:r}=n,o=e.texData.get(r.dataId),i=new lI(r.shape),s=[vae(r,o.complexTensorInfos.real),vae(r,o.complexTensorInfos.imag)];return e.runWebGLProgram(i,s,s[0].dtype)}var wae={kernelName:Sd,backendName:"webgl",kernelFunc:ePe};var cI=class{constructor(n){this.outputShape=[],this.outputShape=O.computeOutShape(n,1),this.variableNames=n.map((s,a)=>`T${a}`);let e=new Array(n.length-1);e[0]=n[0][1];for(let s=1;s<e.length;s++)e[s]=e[s-1]+n[s][1];let r=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<e.length;s++){let a=e[s-1];r.push(`else if (yC < ${e[s]}) setOutput(getT${s}(yR, yC-${a}));`)}let o=e.length,i=e[e.length-1];r.push(`else setOutput(getT${o}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}};var dI=class{constructor(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=O.computeOutShape(n,e);let r=this.outputShape,o=r.length,i=$t(o),s=Rr("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=n.map((m,g)=>`T${g}`);let l=new Array(n.length-1);l[0]=n[0][e];for(let m=1;m<l.length;m++)l[m]=l[m-1]+n[m][e];let c=a[e],u=a.slice(-2),d=a.join(),p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){let g=l[m-1];p+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${uI(a,c,g)}),
            vec2(${uI(u,c,g)}));
        }`}let h=l.length,f=l[l.length-1];p+=`
        return getChannel(
          getT${h}(${uI(a,c,f)}),
          vec2(${uI(u,c,f)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[o-1]} = ${s[o-1]} + 1;
        if (${s[o-1]} < ${r[o-1]}) {
          result.g = getValue(${s});
        }

        ${s[o-2]} = ${s[o-2]} + 1;
        if (${s[o-2]} < ${r[o-2]}) {
          result.a = getValue(${s});
        }

        ${s[o-1]} = ${s[o-1]} - 1;
        if (${s[o-2]} < ${r[o-2]} &&
            ${s[o-1]} < ${r[o-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}};function uI(t,n,e){let r=t.indexOf(n);return t.map((i,s)=>s===r?`${i} - ${e}`:i).join()}function s2(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.texData.get(r.dataId);return Or({inputs:{x:o.complexTensorInfos.imag},backend:e})}var yae={kernelName:yg,backendName:"webgl",kernelFunc:s2};function lw(t,n,e){let r=t[0].dtype;if(r==="complex64"){let h=t.map(w=>Gp({inputs:{input:w},backend:e})),f=t.map(w=>s2({inputs:{input:w},backend:e})),m=lw(h,n,e),g=lw(f,n,e),v=fs({inputs:{real:m,imag:g},backend:e});return h.forEach(w=>e.disposeIntermediateTensorInfo(w)),f.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),v}let o=e.shouldExecuteOnCPU(t);if(r==="string"&&(o=!0),o){let h=t.map(_=>{let M=[-1,x.sizeFromShape(_.shape.slice(n))];return Ie({inputs:{x:_},backend:e,attrs:{shape:M}})}),f=h.map(_=>({vals:e.readSync(_.dataId),shape:_.shape})),m=O.computeOutShape(h.map(_=>_.shape),1),g=h[0].shape[0]===1,v=kie(f,m,r,g),w=O.computeOutShape(t.map(_=>_.shape),n),y=e.makeTensorInfo(w,r,v);return h.forEach(_=>e.disposeIntermediateTensorInfo(_)),y}let i=t.filter(h=>x.sizeFromShape(h.shape)>0),s=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){let h=s?new Qo(t[0].shape,Lu):new ps(t[0].shape,Lu);return e.runWebGLProgram(h,t,r)}let a=Q().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){let h=[];for(let m=0;m<i.length;m+=a){let g=i.slice(m,m+a);h.push(lw(g,n,e))}let f=lw(h,n,e);for(let m of h)e.disposeIntermediateTensorInfo(m);return f}if(s){let h=new dI(i.map(f=>f.shape),n);return e.runWebGLProgram(h,i,r)}let{tensors2D:l,outShape:c}=tPe(i,n,e),u=new cI(l.map(h=>h.shape)),d=e.runWebGLProgram(u,l,r);l.forEach(h=>e.disposeIntermediateTensorInfo(h));let p=Ie({inputs:{x:d},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(d),p}function tPe(t,n,e){let r=O.computeOutShape(t.map(i=>i.shape),n);return{tensors2D:t.map(i=>Ie({inputs:{x:i},attrs:{shape:[-1,x.sizeFromShape(i.shape.slice(n))]},backend:e})),outShape:r}}function Y7(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r,i=x.parseAxisParam(o,n[0].shape)[0],s=n.map(c=>c.shape);O.assertParamsConsistent(s,i);let a=O.computeOutShape(n.map(c=>c.shape),i);if(x.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(c=>x.sizeFromShape(c.shape)>0);return l.length===1?Or({inputs:{x:l[0]},backend:e}):lw(l,i,e)}var xae={kernelName:Md,backendName:"webgl",kernelFunc:Y7};var cw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;let s=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,c=n.strideWidth,u=n.dilationHeight,d=n.dilationWidth,p=n.filterHeight,h=n.filterWidth,f=Math.floor(n.inChannels/4)*4,m=n.inChannels%4,g=n.dataFormat==="channelsLast",v=g?1:2,w=g?2:3,y=g?3:1,_="",k="";r&&(o?_=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?_=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:_=`
          float activation(float x) {
            ${r}
          }
        `,k="result = activation(result);");let M=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${y}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${w}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${n.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${f}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${f}) *
                    getW(wR, wC, ${f}, d2);
              } else {
                dotProd +=
                    getX(batch, ${f}, xR, xC) *
                    getW(wR, wC, ${f}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2),
                getW(wR, wC, ${f} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1),
                  getX(batch, xR, xC, ${f} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC),
                  getX(batch, ${f} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${M}
        ${k}
        setOutput(result);
      }
    `}},pI=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let e=n.padInfo.front,r=n.padInfo.top,o=n.padInfo.left,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.filterDepth,p=n.filterHeight,h=n.filterWidth,f=Math.floor(n.inChannels/4)*4,m=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${a});
      const ivec3 pads = ivec3(${e}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${f}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${f}) *
                  getW(wF, wR, wC, ${f}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1),
                  getX(batch, xF, xR, xC, ${f} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2),
                  getW(wF, wR, wC, ${f} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};var uw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=In(this.outputShape.length);let s=n.padInfo.left,a=n.strideWidth,l=n.dilationWidth,c=n.filterHeight,u=n.filterWidth,d=u,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)p+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${n.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)p+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){let v=g*2;if(p+=`
           xC = xCCorner + ${v*l};
           `,a===1){if(v<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?p+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){let w=s%2===0?x.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${w};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:p+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):w===1?p+=`
                     xC${v+1} = xTexelC${v};
                     `:p+=`
                     xCOffset = xC + ${w};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(p+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(p+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${n.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(p+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${n.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let h="",f="";r&&(o?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,f="result = activation(result);");let m=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${f}
         setOutput(result);
       }
     `}};var hI=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=n,this.enableShapeUniforms=In(this.outputShape.length);let{dataFormat:r}=e,o=vr(),i=r==="channelsLast",s=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${n[2]} && pos < ${n[1]}) {`,c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${o.output} = result;
      }
    `}};function fI(t,n){let e=t.length;return e>=3?n?[...t.slice(0,-3),t[e-3]*t[e-2],t[e-1]]:[...t.slice(0,-3),t[e-3],t[e-2]*t[e-1]]:!n&&e===1&&t[0]>1?[t[0],1]:null}function mI({x:t,filter:n,convInfo:e,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let l=t.shape,c=r.texData.get(t.dataId),u=e.inChannels,d=l[0]*l[1]*l[2],p=e.outChannels,h=e.dataFormat==="channelsLast",f=!1,m=!1,g,v=[];if(i!=null){let _=fI(i.shape,h);_!=null&&(i=Ie({inputs:{x:i},backend:r,attrs:{shape:_}}),v.push(i))}if(o!=null){let _=fI(o.shape,h);_!=null&&(o=Ie({inputs:{x:o},backend:r,attrs:{shape:_}}),v.push(o))}if(!((d===1||p===1)&&u>q7)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&x.arraysEqual(c.shape.slice(-3),l.slice(-3))){let _=l[0]*l[1]*(l[2]+1),k={dataId:t.dataId,shape:[1,_,e.inChannels],dtype:t.dtype},M=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,x.assert(wf(c.shape,k.shape),()=>`packed reshape ${c.shape} to ${k.shape} isn't free`);let E=Ie({inputs:{x:n},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}});v.push(E);let A=i2({a:k,b:E,backend:r,transposeA:f,transposeB:m,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s}),P=r.texData.get(A.dataId);x.assert(P.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=M,P.shape=e.outShape,g=Or({inputs:{x:A},backend:r}),g.shape=e.outShape,v.push(A)}else{let _=e.outHeight*e.outWidth,k=Ie({inputs:{x:t},backend:r,attrs:{shape:h?[e.batchSize,_,e.inChannels]:[e.batchSize,e.inChannels,_]}}),M=Ie({inputs:{x:n},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}}),E=i2({a:h?k:M,b:h?M:k,transposeA:!h,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s});g=Ie({inputs:{x:E},backend:r,attrs:{shape:e.outShape}}),v.push(k),v.push(M),v.push(E)}for(let _ of v)r.disposeIntermediateTensorInfo(_);return g}function gI({x:t,filter:n,convInfo:e,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:p,dataFormat:h}=e,f=h==="channelsLast",m=l*c*u,g=p*d,v=[e.batchSize,m,g],w=!0,y=!1,_=[];if(i!=null){let H=fI(i.shape,f);H!=null&&(i=Ie({inputs:{x:i},backend:r,attrs:{shape:H}}),_.push(i))}if(o!=null){let H=fI(o.shape,f);H!=null&&(o=Ie({inputs:{x:o},backend:r,attrs:{shape:H}}),_.push(o))}let k=Ie({inputs:{x:n},backend:r,attrs:{shape:[1,m,x.sizeFromShape(n.shape)/m]}});_.push(k);let M=new hI(v,e),E=[t.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]],A=r.runWebGLProgram(M,[t],"float32",E),P=Ie({inputs:{x:A},backend:r,attrs:{shape:v}});_.push(A),_.push(P);let N=o!=null,B=i!=null,S=a==="leakyrelu",W=a?Up(a,!0):null,ie=new aw(f?P.shape:k.shape,f?k.shape:P.shape,f?[e.batchSize,g,e.outChannels]:[e.batchSize,e.outChannels,g],w,y,N,W,B,S),Z=f?[P,k]:[k,P];if(o&&Z.push(o),B&&Z.push(i),S){let H=r.makeTensorInfo([],"float32",x.createScalarValue(s,"float32"));Z.push(H),_.push(H)}let X=r.runWebGLProgram(ie,Z,"float32"),G=Ie({inputs:{x:X},backend:r,attrs:{shape:e.outShape}});_.push(X);for(let H of _)r.disposeIntermediateTensorInfo(H);return G}function nPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,i.shape,s,c,a,u,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=mI({x:o,filter:i,convInfo:p,backend:e});else if(p.strideWidth<=2&&d==="channelsLast"&&Q().getBool("WEBGL_EXP_CONV")){let m=new uw(p),g=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=e.runWebGLProgram(m,[o,i],"float32",g)}else if(Q().getBool("WEBGL_CONV_IM2COL"))h=gI({x:o,filter:i,convInfo:p,backend:e});else{let m=new cw(p);h=e.runWebGLProgram(m,[o,i],"float32")}let f=Ie({inputs:{x:h},backend:e,attrs:{shape:p.outShape}});return e.disposeIntermediateTensorInfo(h),f}var _ae={kernelName:Td,backendName:"webgl",kernelFunc:nPe};var vI=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,r=n.strideWidth,o=n.padInfo.top,i=n.padInfo.left,s=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${o};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},wI=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=n.dataFormat==="channelsLast",a=e-1-n.padInfo.top,l=r-1-n.padInfo.left,c=s?1:2,u=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},yI=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideDepth,r=n.strideHeight,o=n.strideWidth,i=n.padInfo.front,s=n.padInfo.top,a=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yF = 0; yF < ${n.outDepth}; yF++) {
            int xF = wF + yF * ${e} - ${i};

            if (xF < 0 || xF >= ${n.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${n.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${n.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},xI=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterDepth,r=n.filterHeight,o=n.filterWidth,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=e-1-n.padInfo.front,c=r-1-n.padInfo.top,u=o-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${e}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${e} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function rPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,u,s,1,a,c,!1,d),h=new vI(p);return e.runWebGLProgram(h,[o,i],"float32")}var kae={kernelName:ng,backendName:"webgl",kernelFunc:rPe};var _I=class{constructor(n){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=n.inShape,this.enableShapeUniforms=In(this.outputShape.length);let e=n.filterHeight,r=n.filterWidth,o=e-1-n.padInfo.top,i=r-1-n.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${n.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${n.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function oPe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=O.convertConv2DDataFormat(c),p=O.computeConv2DInfo(s,i.shape,a,1,l,u,!1,d);if(Q().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],f=new _I(p);return e.runWebGLProgram(f,[o,i],"float32",h)}else{let h=new wI(p);return e.runWebGLProgram(h,[o,i],"float32")}}var bae={kernelName:Dd,backendName:"webgl",kernelFunc:oPe};function iPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r,c=O.computeConv3DInfo(o.shape,i.shape,s,l,a),u=new pI(c);return e.runWebGLProgram(u,[o,i],"float32")}var Cae={kernelName:Ed,backendName:"webgl",kernelFunc:iPe};function sPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,filterShape:l}=r,c=O.computeConv3DInfo(o.shape,l,s,1,a),u=new yI(c);return e.runWebGLProgram(u,[o,i],"float32")}var Sae={kernelName:rg,backendName:"webgl",kernelFunc:sPe};function aPe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{pad:s,strides:a,inputShape:l}=r,c=O.computeConv3DInfo(l,i.shape,a,1,s),u=new xI(c);return e.runWebGLProgram(u,[o,i],"float32")}var Mae={kernelName:og,backendName:"webgl",kernelFunc:aPe};var lPe=qa+`
  return cos(x);
`,cPe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${zs}
  return result;
`,uPe=ut({opSnippet:lPe,packedOpSnippet:cPe}),Tae={kernelName:Oc,backendName:"webgl",kernelFunc:uPe};var dPe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,pPe=ut({opSnippet:dPe}),Dae={kernelName:Fc,backendName:"webgl",kernelFunc:pPe};var kI=class{constructor(n,e,r,o,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,a,l,c]=n,[u]=e,[d,p]=r;this.outputShape=[u,d,p,c];let h=o==="bilinear"?1:0,[f,m]=[`${a-1}.0`,`${l-1}.0`],[g,v,w]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${f} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${f}`],[y,_,k]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${y});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${_};

        float in_y = ${w};
        if( in_y < 0.0 || in_y > ${f} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${k};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var hPe=t=>{let{inputs:n,backend:e,attrs:r}=t,{image:o,boxes:i,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=r,u=new kI(o.shape,i.shape,a,l,c);return e.runWebGLProgram(u,[o,i,s],"float32")},Eae={kernelName:sg,backendName:"webgl",kernelFunc:hPe};var dw=function(t){return t.Prod="*",t.Sum="+",t}(dw||{}),Wk=class{constructor(n,e,r,o){this.op=n,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,s=this.op===dw.Prod?"1.0":"0.0",a=r?s:`getX(${Iae(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1],c="",u="";r?(c=o?`end != ${l-1}`:"end != 0",u=o?"end + 1":"end - 1"):(c=o?`end + pow2 < ${l}`:"end >= pow2",u=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${$t(i)} coords = getOutputCoords();
        int end = ${Nae(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${Nae(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${Iae(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function Iae(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.x, ${n}.y`;if(t===3)return`${n}.x, ${n}.y, ${n}.z`;if(t===4)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function Nae(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.y`;if(t===3)return`${n}.z`;if(t===4)return`${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function bI(t,n,e,r,o,i){let s=n.shape.length,a=O.getAxesPermutation([r],s),l=n;a!=null&&(l=or({inputs:{x:n},backend:e,attrs:{perm:a}}));let c=O.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${r}`);let u=l.shape[c],d=Or({inputs:{x:l},backend:e});for(let p=0;p<=Math.ceil(Math.log2(u))-1;p++){let h=new Wk(t,l.shape,!1,i),f=[[p]],m=d;d=e.runWebGLProgram(h,[d],d.dtype,f),e.disposeIntermediateTensorInfo(m)}if(o){let p=new Wk(t,l.shape,o,i),h=d;d=e.runWebGLProgram(p,[d],d.dtype),e.disposeIntermediateTensorInfo(h)}if(a!=null){let p=O.getUndoAxesPermutation(a),h=or({inputs:{x:d},backend:e,attrs:{perm:p}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(l),h}return d}function fPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;return bI(dw.Prod,o,e,i,s,a)}var Aae={kernelName:ig,backendName:"webgl",kernelFunc:fPe};function mPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;return bI(dw.Sum,o,e,i,s,a)}var Rae={kernelName:Id,backendName:"webgl",kernelFunc:mPe};function gPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s,binaryOutput:a}=r;if(o.shape.length===1){let l=e.readSync(o.dataId),c=e.readSync(i.dataId),u=PE(l,c,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,u)}else if(o.shape.length===2){let l=e.bufferSync(o),c=e.bufferSync(i),u=wie(l,c,s,a);return e.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var Oae={kernelName:ag,backendName:"webgl",kernelFunc:gPe};var CI=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${e};
      int offset_h = imod(h, ${e});
      int in_w = w / ${e};
      int offset_w = imod(w, ${e});
      int offset_d = (offset_h * ${e} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function vPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockSize:i,dataFormat:s}=r,a=o.shape[0],l=s==="NHWC"?o.shape[1]:o.shape[2],c=s==="NHWC"?o.shape[2]:o.shape[3],u=s==="NHWC"?o.shape[3]:o.shape[1],d=l*i,p=c*i,h=u/(i*i),f=s==="NHWC"?[a,d,p,h]:[a,h,d,p],m=new CI(f,i,s);return e.runWebGLProgram(m,[o],o.dtype)}var Fae={kernelName:lg,backendName:"webgl",kernelFunc:vPe};var pw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=In(this.outputShape.length);let s=n.filterHeight,a=n.filterWidth,l=n.outChannels/n.inChannels,c="",u="";r&&(o?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");let d=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}};var hw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=In(this.outputShape.length);let s=n.outChannels/n.inChannels,a=n.padInfo.left,l=n.strideWidth,c=n.dilationWidth,u=n.filterHeight,d=n.filterWidth,p=d,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(p+1)/2;v++){let w=v*2;if(h+=`
          xC = xCCorner + ${w*c};
          `,l===1){if(w<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }
              `,c===1&&w>0?h+=`
                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                  } else {
                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xC${w} = xTexelC${w};
                `,w+1<d)){let y=a%2===0?x.nearestLargerEven(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${y};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${w+1}.zw = vec2(0.0);
                    }
                    xTexelC${w+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                    } else {
                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                    }
                    `:h+=`
                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                    `):y===1?h+=`
                    xC${w+1} = xTexelC${w};
                    `:h+=`
                    xCOffset = xC + ${y};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${w+1}.zw = vec2(0.0);
                      }
                      xTexelC${w+1}Ready = 1;
                    }

                    xC${w+1} = xTexelC${w+1};
                    `}}else w<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.0);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
              `,w+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(
                  xTexelC${w}.xy, xTexelC${w+1}.xy);
              `,w+1<d&&(h+=`
                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                `)));w<d&&(h+=`
            wTexel = getW(r, ${w}, d1, q);
            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);
          `,w+1<d&&(h+=`
              wTexel = getW(r, ${w+1}, d1, q);
              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let f="",m="";r&&(o?f=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?f=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:f=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");let g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${f}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}};function wPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r,u=l;u==null&&(u=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(s,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let d=O.computeConv2DInfo(o.shape,i.shape,s,u,a,c,!0),p;Q().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new hw(d):p=new pw(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return e.runWebGLProgram(p,[o,i],"float32",h)}var Pae={kernelName:Nd,backendName:"webgl",kernelFunc:wPe};var SI=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,r=n.strideWidth,o=n.padInfo.top,i=n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${o};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},MI=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=e-1-n.padInfo.top,a=r-1-n.padInfo.left,l=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function yPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=O.computeConv2DInfo(o.shape,u,s,a,l,c,!0),p=new SI(d);return e.runWebGLProgram(p,[o,i],"float32")}var Bae={kernelName:cg,backendName:"webgl",kernelFunc:yPe};function xPe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=O.computeConv2DInfo(u,i.shape,s,a,l,c,!0),p=new MI(d);return e.runWebGLProgram(p,[o,i],"float32")}var Lae={kernelName:ug,backendName:"webgl",kernelFunc:xPe};var TI=class{constructor(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function _Pe(t){let{inputs:n,backend:e}=t,{x:r}=n,o=[...r.shape,...r.shape],i=x.sizeFromShape(r.shape),s=Ie({inputs:{x:r},backend:e,attrs:{shape:[i]}}),a=new TI(i),l=e.runWebGLProgram(a,[s],s.dtype),c=Ie({inputs:{x:l},backend:e,attrs:{shape:o}});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(l),c}var $ae={kernelName:dg,backendName:"webgl",kernelFunc:_Pe};var DI=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let{inHeight:e,inWidth:r,padInfo:o,strideHeight:i,strideWidth:s,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=n,{top:d,left:p}=o;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${e}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function kPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r,c=O.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",l),u,d=new DI(c);u=e.runWebGLProgram(d,[o,i],"float32");let p=Ie({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),p}var Vae={kernelName:Ad,backendName:"webgl",kernelFunc:kPe};function bPe(t){let{inputs:n,backend:e,attrs:r}=t,{equation:o}=r,i=n,{allDims:s,summedDims:a,idDims:l}=O.decodeEinsumEquation(o,i.length);O.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=O.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,f=[];for(let m=0;m<d;++m){for(let g of u[m]){let{permutationIndices:v,expandDims:w}=O.getEinsumPermutation(h,l[g]),y;O.isIdentityPermutation(v)?y=i[g]:(y=or({inputs:{x:i[g]},backend:e,attrs:{perm:v}}),f.push(y));let _=y.shape.slice();for(let k=0;k<w.length;++k)_.splice(w[k],0,1);x.arraysEqual(y.shape,_)||(y=Ie({inputs:{x:y},backend:e,attrs:{shape:_}}),f.push(y)),p===null?p=y:(p=Uk({inputs:{a:y,b:p},backend:e}),f.push(p))}m<d-1&&(c[m]>=0&&(p=o2({inputs:{x:p},backend:e,attrs:{axis:c[m]-(s.length-h),keepDims:!1}}),f.push(p)),h--)}for(let m of f)m!==p&&e.disposeIntermediateTensorInfo(m);return p}var jae={kernelName:pg,backendName:"webgl",kernelFunc:bPe};var CPe="return (x >= 0.0) ? x : (exp(x) - 1.0);",SPe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,MPe=ut({opSnippet:CPe,packedOpSnippet:SPe}),zae={kernelName:Bc,backendName:"webgl",kernelFunc:MPe};var TPe="return (b >= 0.0) ? a : a * (b + 1.0);",DPe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,EPe=t=>{let{inputs:n,backend:e}=t,{dy:r,y:o}=n,i=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new js(DPe,r.shape,o.shape):new hs(TPe,r.shape,o.shape);return e.runWebGLProgram(i,[r,o],r.dtype)},Hae={kernelName:hg,backendName:"webgl",kernelFunc:EPe};var IPe=`
  return vec4(equal(a, b));
`,NPe="return float(a == b);",APe=Sn({opSnippet:NPe,packedOpSnippet:IPe,dtype:"bool",cpuKernelImpl:bie}),Uae={kernelName:Ih,backendName:"webgl",kernelFunc:APe};var RPe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${O.ERF_P};
  float a1 = ${O.ERF_A1};
  float a2 = ${O.ERF_A2};
  float a3 = ${O.ERF_A3};
  float a4 = ${O.ERF_A4};
  float a5 = ${O.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,OPe=ut({opSnippet:RPe}),Gae={kernelName:Lc,backendName:"webgl",kernelFunc:OPe};var FPe=qa+`
  return exp(x);
`,PPe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Q7=ut({opSnippet:FPe,packedOpSnippet:PPe,cpuKernelImpl:Cie,dtype:"float32"}),Wae={kernelName:$c,backendName:"webgl",kernelFunc:Q7};function EI(t){let{inputs:n,attrs:e,backend:r}=t,{dim:o}=e,{input:i}=n,s=i.shape.length,a=i.shape.slice(),l=o;return o<0&&(x.assert(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+o+1),a.splice(l,0,1),Ie({inputs:{x:i},backend:r,attrs:{shape:a}})}var qae={kernelName:Rd,backendName:"webgl",kernelFunc:EI};var Kae="return exp(x) - 1.0;",BPe=ut({opSnippet:Kae,packedOpSnippet:Kae,cpuKernelImpl:Sie}),Zae={kernelName:Vc,backendName:"webgl",kernelFunc:BPe};var qk=class{constructor(n,e,r){this.variableNames=["real","imag"];let o=e[1];this.outputShape=e;let i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${o}.0`:"1.0",a;if(n==="real")a="return real * expR - imag * expI;";else if(n==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${n}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function II(t,n,e){let r=e.texData.get(t.dataId),o=x.sizeFromShape(t.shape),i=t.shape[t.shape.length-1],s=o/i,a=Ie({inputs:{x:t},backend:e,attrs:{shape:[s,i]}}),l=a.shape,c=new qk("real",l,n),u=new qk("imag",l,n),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),f=fs({inputs:{real:p,imag:h},backend:e});e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h);let m=Ie({inputs:{x:f},backend:e,attrs:{shape:t.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(f),m}function LPe(t){let{inputs:n,backend:e}=t,{input:r}=n;return II(r,!1,e)}var Xae={kernelName:fg,backendName:"webgl",kernelFunc:LPe};var NI=class{constructor(n,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function Wp(t){let{backend:n,attrs:e}=t,{shape:r,value:o}=e,{dtype:i}=e;if(i=i||x.inferDtype(o),i==="string"){let s=x.getArrayFromDType(i,x.sizeFromShape(r));return s.fill(o),n.makeTensorInfo(r,i,s)}else{let s=new NI(r,o),a=[[o]];return n.runWebGLProgram(s,[],i,a)}}var Yae={kernelName:mg,backendName:"webgl",kernelFunc:Wp};var AI=class{constructor(n){this.variableNames=["Image"],this.outputShape=[];let e=n[2];this.outputShape=n,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${e} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${e}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var Qae={kernelName:gg,backendName:"webgl",kernelFunc:({inputs:t,backend:n})=>{let{image:e}=t,r=n,o=new AI(e.shape);return r.runWebGLProgram(o,[e],e.dtype)}};var Jae="return floor(x);",$Pe=ut({opSnippet:Jae,packedOpSnippet:Jae,cpuKernelImpl:Mie}),ele={kernelName:jc,backendName:"webgl",kernelFunc:$Pe};var VPe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,jPe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,zPe=Sn({opSnippet:VPe,packedOpSnippet:jPe,dtype:"int32"}),tle={kernelName:zc,backendName:"webgl",kernelFunc:zPe};var RI=class{constructor(n){this.variableNames=["A"];let e=vr(),[r,o]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${e.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var OI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let e=vr(),[r,o]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${e.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${e.output} = result;
      }
    `}};var nle={kernelName:G1,backendName:"webgl",kernelFunc:HPe},fw,J7=Q().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function HPe(t){let{inputs:n,backend:e,attrs:r}=t,{pixels:o}=n,{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,c]=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[c,l],d=[c,l,i];if(a||s){let m=Q().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(fw==null||m!==J7)&&(J7=m,fw=document.createElement("canvas").getContext("2d",{willReadFrequently:J7})),fw.canvas.width=l,fw.canvas.height=c,fw.drawImage(o,0,0,l,c),o=fw.canvas}let p=e.makeTensorInfo(u,"int32");e.texData.get(p.dataId).usage=Mi.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(p.dataId),o);let h=Q().getBool("WEBGL_PACK")?new OI(d):new RI(d),f=e.runWebGLProgram(h,[p],"int32");return e.disposeData(p.dataId),f}function UPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=O.convertConv2DDataFormat(u),g=O.computeConv2DInfo(o.shape,i.shape,l,d,c,p,!1,m),v,w=[],y=s!=null,_=a!=null,k=h==="leakyrelu",M=()=>{let A=[o,i],P=(N,B)=>{if(B==="NCHW"&&N.shape.length===1&&N.shape[0]!==1){let S=Ie({inputs:{x:N},backend:e,attrs:{shape:[N.shape[0],1,1]}});return w.push(S),S}return N};if(y&&A.push(P(s,u)),_&&A.push(P(a,u)),k){let N=e.makeTensorInfo([],"float32",x.createScalarValue(f,"float32"));A.push(N),w.push(N)}return A};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))v=mI({x:o,filter:i,convInfo:g,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:f});else if(g.strideWidth<=2&&m==="channelsLast"&&Q().getBool("WEBGL_EXP_CONV")){let A=h?Up(h,!0):null,P=new uw(g,y,A,_,k),N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],B=M();v=e.runWebGLProgram(P,B,"float32",N)}else if(Q().getBool("WEBGL_CONV_IM2COL"))v=gI({x:o,filter:i,convInfo:g,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:f});else{let A=h?Up(h,!1):null,P=new cw(g,y,A,_,k),N=M();v=e.runWebGLProgram(P,N,"float32")}let E=Ie({inputs:{x:v},backend:e,attrs:{shape:g.outShape}});return w.push(v),w.forEach(A=>e.disposeIntermediateTensorInfo(A)),E}var rle={kernelName:Vh,backendName:"webgl",kernelFunc:UPe};function GPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=r,f=[],m=u;m==null&&(m=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let g=O.computeConv2DInfo(o.shape,i.shape,l,m,c,d,!0),v=Q().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,w=p?Up(p,v):null,y=[o,i],_=s!=null,k=a!=null,M=p==="leakyrelu";if(_&&y.push(s),k&&y.push(a),M){let N=e.makeTensorInfo([],"float32",x.createScalarValue(h,"float32"));y.push(N),f.push(N)}let E;v?E=new hw(g,_,w,k,M):E=new pw(g,_,w,k,M);let A=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],P=e.runWebGLProgram(E,y,"float32",A);return f.forEach(N=>e.disposeIntermediateTensorInfo(N)),P}var ole={kernelName:jh,backendName:"webgl",kernelFunc:GPe};var FI=class{constructor(n,e,r,o){this.sliceDim=n,this.strides=e,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;let i=$t(r.length),s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function WPe(t){let{inputs:n,backend:e}=t,{params:r,indices:o}=n,i=o.shape,s=i[i.length-1],a=x.sizeFromShape(r.shape),[l,c,u,d]=O.prepareAndValidate(r,o),p=Ie({inputs:{x:o},backend:e,attrs:{shape:[c,s]}}),h=Ie({inputs:{x:r},backend:e,attrs:{shape:[x.sizeFromShape(r.shape)/u,u]}});if(e.shouldExecuteOnCPU([r,o])||r.dtype==="string"){let v=e.readSync(o.dataId),w=e.bufferSync(r),y=Tie(v,w,r.dtype,c,s,u,d,r.shape,a);return e.makeTensorInfo(l,r.dtype,y.values)}let f=new FI(s,d,[c,u],r.shape),m=e.runWebGLProgram(f,[h,p],h.dtype),g=Ie({inputs:{x:m},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),g}var ile={kernelName:vg,backendName:"webgl",kernelFunc:WPe};var PI=class{constructor(n,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;let r=$t(this.rank),o=qPe(n,2);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${n[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}};function qPe(t,n){let e=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<t.length;o++)o===2?r.push("index"):r.push(`${e[o]}`);return r.join()}function e$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,indices:i}=n,{axis:s,batchDims:a}=r,l=x.parseAxisParam(s,o.shape)[0];if(Q().get("DEBUG")){let w=e.readSync(i.dataId),y=o.shape[l];for(let _=0;_<w.length;++_){let k=w[_];x.assert(k<=y-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${y-1}]`)}}let c=O.segment_util.collectGatherOpShapeInfo(o,i,l,a),u=x.sizeFromShape(i.shape),d=[],p=Ie({inputs:{x:o},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=Ie({inputs:{x:i},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(p),d.push(h);let f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let w=e.bufferSync(h),y=e.bufferSync(p),_=Die(y,w,f);return d.forEach(k=>e.disposeIntermediateTensorInfo(k)),e.makeTensorInfo(c.outputShape,_.dtype,_.values)}let m=new PI(p.shape,f),g=e.runWebGLProgram(m,[p,h],p.dtype);d.push(g);let v=Ie({inputs:{x:g},backend:e,attrs:{shape:c.outputShape}});return d.forEach(w=>e.disposeIntermediateTensorInfo(w)),v}var sle={kernelName:Fd,backendName:"webgl",kernelFunc:e$};var KPe="return float(a > b);",ZPe=`
  return vec4(greaterThan(a, b));
`,XPe=Sn({opSnippet:KPe,packedOpSnippet:ZPe,cpuKernelImpl:Eie,dtype:"bool"}),ale={kernelName:Nh,backendName:"webgl",kernelFunc:XPe};var YPe="return float(a >= b);",QPe=`
  return vec4(greaterThanEqual(a, b));
`,JPe=Sn({opSnippet:YPe,packedOpSnippet:QPe,dtype:"bool",cpuKernelImpl:Iie}),lle={kernelName:Hc,backendName:"webgl",kernelFunc:JPe};function eBe(t){let{inputs:n,backend:e}=t,{input:r}=n;return II(r,!0,e)}var cle={kernelName:wg,backendName:"webgl",kernelFunc:eBe};var tBe="return float(!isnan(x) && !isinf(x));",nBe=ut({opSnippet:tBe,dtype:"bool"}),ule={kernelName:Uc,backendName:"webgl",kernelFunc:nBe};var rBe="return float(isinf(x));",oBe=ut({opSnippet:rBe,dtype:"bool"}),dle={kernelName:Gc,backendName:"webgl",kernelFunc:oBe};var iBe="return float(isnan(x));",sBe=ut({opSnippet:iBe,dtype:"bool"}),ple={kernelName:Wc,backendName:"webgl",kernelFunc:sBe};var aBe="return float(a < b);",lBe=`
  return vec4(lessThan(a, b));
`,cBe=Sn({opSnippet:aBe,packedOpSnippet:lBe,cpuKernelImpl:Nie,dtype:"bool"}),hle={kernelName:Ah,backendName:"webgl",kernelFunc:cBe};var uBe="return float(a <= b);",dBe=`
  return vec4(lessThanEqual(a, b));
`,pBe=Sn({opSnippet:uBe,packedOpSnippet:dBe,cpuKernelImpl:Aie,dtype:"bool"}),fle={kernelName:Rh,backendName:"webgl",kernelFunc:pBe};function hBe(t){let{backend:n,attrs:e}=t,{start:r,stop:o,num:i}=e,s=Rie(r,o,i);return n.makeTensorInfo([s.length],"float32",s)}var mle={kernelName:xg,backendName:"webgl",kernelFunc:hBe};var fBe=qa+`
  return x < 0.0 ? 0./0. : log(x);
`,mBe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,gBe=ut({opSnippet:fBe,packedOpSnippet:mBe,cpuKernelImpl:Oie}),gle={kernelName:qc,backendName:"webgl",kernelFunc:gBe};var vBe=qa+`
  return log(1.0 + x);
`,wBe=ut({opSnippet:vBe}),vle={kernelName:Kc,backendName:"webgl",kernelFunc:wBe};var yBe="return float(a >= 1.0 && b >= 1.0);",xBe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,_Be=Sn({opSnippet:yBe,packedOpSnippet:xBe,dtype:"bool"}),wle={kernelName:Oh,backendName:"webgl",kernelFunc:_Be};var kBe="return float(!(x >= 1.0));",bBe=ut({opSnippet:kBe}),yle={kernelName:Fh,backendName:"webgl",kernelFunc:bBe};var CBe="return float(a >= 1.0 || b >= 1.0);",SBe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,MBe=Sn({opSnippet:CBe,packedOpSnippet:SBe,dtype:"bool"}),xle={kernelName:Ph,backendName:"webgl",kernelFunc:MBe};var BI=class{constructor(n,e,r,o,i){this.variableNames=["x"],this.outputShape=[];let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${r}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}};var LI=class{constructor(n,e,r,o,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${r}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}};var TBe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{depthRadius:i,bias:s,alpha:a,beta:l}=r,c=Q().getBool("WEBGL_PACK_NORMALIZATION")?new LI(o.shape,i,s,a,l):new BI(o.shape,i,s,a,l);return e.runWebGLProgram(c,[o],o.dtype)},_le={kernelName:Bd,backendName:"webgl",kernelFunc:TBe};var $I=class{constructor(n,e,r,o,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=r,this.alpha=o,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${e})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${e} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var DBe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o,y:i,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new $I(o.shape,a,l,c,u);return e.runWebGLProgram(d,[o,i,s],o.dtype)},kle={kernelName:_g,backendName:"webgl",kernelFunc:DBe};function ble(t,n,e,r){let o=x.sizeFromShape(n),s=x.sizeFromShape(t.shape)/o,a=Ie({inputs:{x:t},attrs:{shape:[s,o]},backend:r}),l=Hs(a,t.dtype,"max",r),c=Ie({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}function t$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reductionIndices:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=u!=null,p=e.shouldExecuteOnCPU([o]),h=o;if(d){if(p){let y=e.texData.get(h.dataId).values,_=new Array(a);for(let E=0;E<_.length;E++)_[E]=o.shape[u[E]];let k=r2(y,o.shape,o.dtype,u,_);h=e.makeTensorInfo(_,o.dtype);let M=e.texData.get(h.dataId);M.values=k}else h=xf(o,u,e);c=O.getInnerMostAxes(c.length,a)}O.assertAxesAreInnerMostDims("max",c,a);let[f,m]=O.computeOutAndReduceShapes(h.shape,c),g=f;s&&(g=O.expandShapeToKeepDim(f,l));let v;if(p){let y=e.texData.get(h.dataId).values,_=Fie(y,x.sizeFromShape(m),g,o.dtype);v=e.makeTensorInfo(g,o.dtype);let k=e.texData.get(v.dataId);k.values=_}else v=ble(h,m,g,e);return d&&e.disposeIntermediateTensorInfo(h),v}var Cle={kernelName:Ld,backendName:"webgl",kernelFunc:t$};var EBe=sw+`
  return max(a, b);
`,IBe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+zs+`
  return result;
`,NBe=Sn({opSnippet:EBe,packedOpSnippet:IBe,cpuKernelImpl:Pie}),Sle={kernelName:Zc,backendName:"webgl",kernelFunc:NBe};function ABe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;Wl(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))return Or({inputs:{x:o},backend:e});let d=new Kl(u,"max",!1);return e.runWebGLProgram(d,[o],o.dtype)}var Mle={kernelName:$d,backendName:"webgl",kernelFunc:ABe};function RBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=O.computePool3DInfo(o.shape,i,s,u,a,c,l),p=new _f(d,"max",!1);return e.runWebGLProgram(p,[o],o.dtype)}var Tle={kernelName:Vd,backendName:"webgl",kernelFunc:RBe};var VI=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideHeight,r=n.strideWidth,o=n.dilationHeight,i=n.effectiveFilterHeight,s=n.effectiveFilterWidth,a=i-1-n.padInfo.top,l=s-1-n.padInfo.left,c=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${e}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},jI=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideDepth,r=n.strideHeight,o=n.strideWidth,i=n.dilationDepth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,d=l-1-n.padInfo.front,p=c-1-n.padInfo.top,h=u-1-n.padInfo.left,f=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${e}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${f} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function OBe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],p=O.computePool3DInfo(s.shape,a,l,d,c,u),h=new _f(p,"max",!0),f=e.runWebGLProgram(h,[s],s.dtype),m=new jI(p),g=e.runWebGLProgram(m,[o,f],s.dtype);return e.disposeIntermediateTensorInfo(f),g}var Dle={kernelName:bg,backendName:"webgl",kernelFunc:OBe};function FBe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i,output:s}=n,a=i;Wl([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=O.computePool2DInfo(a.shape,l,c,1,u,d),h=!0,f=new Kl(p,"max",h),m=e.runWebGLProgram(f,[a],a.dtype),g=new VI(p),v=e.runWebGLProgram(g,[o,m],a.dtype);return e.disposeIntermediateTensorInfo(m),v}var Ele={kernelName:kg,backendName:"webgl",kernelFunc:FBe};function Ile(t,n,e,r){let o=new Kl(e,"max",!1),i=r.runWebGLProgram(o,[t],"float32");o=new Kl(e,"max",!0,!0,n);let s=r.runWebGLProgram(o,[t],"float32");return[i,s]}var Nle={kernelName:Cg,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=n,l=e;x.assert(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let c=[1,1];x.assert(O.eitherStridesOrDilationsAreOne(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let u=O.computePool2DInfo(r.shape,o,i,c,s),[d,p]=Ile(r,a,u,l);return[d,p]}};function Ale(t,n,e,r){let o=x.sizeFromShape(n),s=x.sizeFromShape(t.shape)/o,a=Ie({inputs:{x:t},attrs:{shape:[s,o]},backend:r}),l=Hs(a,"float32","mean",r),c=Ie({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}var Rle={kernelName:jd,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{keepDims:o,axis:i}=n,s=e,a=r.shape.length,l=x.parseAxisParam(i,r.shape),c=l,u=O.getAxesPermutation(c,a),d=u!=null,p=s.shouldExecuteOnCPU([r]),h=[],f=r;if(d){if(p){let _=s.texData.get(f.dataId).values,k=new Array(a);for(let A=0;A<k.length;A++)k[A]=r.shape[u[A]];let M=r2(_,r.shape,r.dtype,u,k);f=s.makeTensorInfo(k,r.dtype);let E=s.texData.get(f.dataId);E.values=M}else f=xf(r,u,s);h.push(f),c=O.getInnerMostAxes(c.length,a)}O.assertAxesAreInnerMostDims("sum",c,a);let[m,g]=O.computeOutAndReduceShapes(f.shape,c),v=m;o&&(v=O.expandShapeToKeepDim(m,l));let w=Ale(f,g,v,s);for(let y of h)s.disposeIntermediateTensorInfo(y);return w}};function PBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=or({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,o.shape.length)),O.assertAxesAreInnerMostDims("min",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=Ie({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Hs(m,m.dtype,"min",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=Ie({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=Ie({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var Ole={kernelName:zd,backendName:"webgl",kernelFunc:PBe};var BBe=sw+`
  return min(a, b);
`,LBe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+zs+`
  return result;
`,$Be=Sn({opSnippet:BBe,packedOpSnippet:LBe,cpuKernelImpl:Bie}),Fle={kernelName:Xc,backendName:"webgl",kernelFunc:$Be};var zI=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=e.map((u,d)=>u[0]+n[d]+u[1]);let o=n.length,i=$t(o),s=e.map(u=>u[0]).join(","),a=e.map((u,d)=>u[0]+n[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}};var HI=class{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((f,m)=>f[0]+n[m]+f[1]);let o=n.length,i=$t(o),s=e.map(f=>f[0]).join(","),a=e.map((f,m)=>f[0]+n[m]).join(","),l=Rr("rc",o),c=Rr("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1,h="";if(o===1){let f=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${f}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${f}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let f=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${f}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${f}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${f}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[o-1]} += 1;
          if(${u}) {
            ${f}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var VBe=({inputs:t,backend:n,attrs:e})=>{let{x:r}=t,{paddings:o,mode:i}=e,s=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new HI(r.shape,o,i):new zI(r.shape,o,i);return n.runWebGLProgram(s,[r],r.dtype)},Ple={kernelName:Hd,backendName:"webgl",kernelFunc:VBe};var jBe=`if (b == 0.0) return NAN;
  return mod(a, b);`,zBe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+zs+`
  return result;
`,HBe=Sn({opSnippet:jBe,packedOpSnippet:zBe}),Ble={kernelName:Yc,backendName:"webgl",kernelFunc:HBe};var UI=class{constructor(n,e,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${e-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${e-1}));
      }
    `}};var UBe=`
if (a == b) {
  return 1.0;
};
return a / b;`,GBe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,n$=Sn({opSnippet:UBe,packedOpSnippet:GBe,checkOutOfBounds:!0}),Lle={kernelName:Pc,backendName:"webgl",kernelFunc:n$};var $le="return a - b;",r$=Sn({opSnippet:$le,packedOpSnippet:$le,supportsComplex:!0,cpuKernelImpl:ose}),Vle={kernelName:hu,backendName:"webgl",kernelFunc:r$};function o$(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{dim:i}=r,s=x.parseAxisParam([i],o.shape),a=t$({inputs:{x:o},backend:e,attrs:{reductionIndices:s,keepDims:!1}}),l=O.expandShapeToKeepDim(a.shape,s),c=Ie({inputs:{x:a},backend:e,attrs:{shape:l}}),u=r$({inputs:{a:o,b:c},backend:e}),d=Q7({inputs:{x:u},backend:e}),p=o2({inputs:{x:d},backend:e,attrs:{axis:s,keepDims:!1}}),h=Ie({inputs:{x:p},backend:e,attrs:{shape:l}}),f=n$({inputs:{a:d,b:h},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),f}var jle={kernelName:sp,backendName:"webgl",kernelFunc:o$};function WBe(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{numSamples:i,seed:s,normalized:a}=r,l=a?o:o$({inputs:{logits:o},backend:e,attrs:{dim:o.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new UI(c,u,i),p=[[s]],h=e.runWebGLProgram(d,[l],"int32",p);return a||e.disposeIntermediateTensorInfo(l),h}var zle={kernelName:Sg,backendName:"webgl",kernelFunc:WBe};var qBe=so+`
  return -x;
`,KBe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function ZBe(t){let{inputs:n,backend:e}=t,{x:r}=n;if(e.shouldExecuteOnCPU([r])){let i=e.texData.get(r.dataId),[s,a]=$ie(i.values,r.shape,r.dtype);return e.makeTensorInfo(a,r.dtype,s)}let o;return Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new ps(r.shape,KBe):o=new Qo(r.shape,qBe),e.runWebGLProgram(o,[r],r.dtype)}var Hle={kernelName:Ud,backendName:"webgl",kernelFunc:ZBe};var XBe=Xo.nonMaxSuppressionV3Impl;function YBe(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r,c=e.readSync(o.dataId),u=e.readSync(i.dataId),{selectedIndices:d}=XBe(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Ule={kernelName:Mg,backendName:"webgl",kernelFunc:YBe};var QBe=Xo.nonMaxSuppressionV4Impl;function JBe(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=e.readSync(o.dataId),d=e.readSync(i.dataId),{selectedIndices:p,validOutputs:h}=QBe(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var Gle={kernelName:Tg,backendName:"webgl",kernelFunc:JBe};var eLe=Xo.nonMaxSuppressionV5Impl;function tLe(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=e.readSync(o.dataId),d=e.readSync(i.dataId),p=s,h=a,f=l,m=c,{selectedIndices:g,selectedScores:v}=eLe(u,d,p,h,f,m);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var Wle={kernelName:Dg,backendName:"webgl",kernelFunc:tLe};var GI=class{constructor(n,e,r,o){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}};var nLe=t=>{let{inputs:n,backend:e,attrs:r}=t,{indices:o}=n,{dtype:i,depth:s,onValue:a,offValue:l}=r,c=x.sizeFromShape(o.shape),u=new GI(c,s,a,l),d=Ie({inputs:{x:o},backend:e,attrs:{shape:[c]}}),p=e.runWebGLProgram(u,[d],i);e.disposeIntermediateTensorInfo(d);let h=[...o.shape,s],f=Ie({inputs:{x:p},backend:e,attrs:{shape:h}});return e.disposeIntermediateTensorInfo(p),f},qle={kernelName:Wd,backendName:"webgl",kernelFunc:nLe};function Kk(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="complex64"){let o=Gp({inputs:{input:r},backend:e}),i=Kk({inputs:{x:o},backend:e}),s=s2({inputs:{input:r},backend:e}),a=Kk({inputs:{x:s},backend:e}),l=fs({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return Wp({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:e})}var Kle={kernelName:cp,backendName:"webgl",kernelFunc:Kk};function Zle(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let o=Gp({inputs:{input:r},backend:e}),i=Zle({inputs:{x:o},backend:e}),s=s2({inputs:{input:r},backend:e}),a=Kk({inputs:{x:s},backend:e}),l=fs({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return Wp({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:e})}var Xle={kernelName:Gd,backendName:"webgl",kernelFunc:Zle};function rLe(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r;if(n.length===1)return EI({inputs:{input:n[0]},backend:e,attrs:{dim:o}});let i=n[0].shape,s=n[0].dtype;n.forEach(u=>{x.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),x.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=EI({inputs:{input:u},backend:e,attrs:{dim:o}});return a.push(d),d}),c=Y7({inputs:l,backend:e,attrs:{axis:o}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var Yle={kernelName:qd,backendName:"webgl",kernelFunc:rLe};var WI=class{constructor(n,e,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+n[u]+c[1]);let o=n.length,i=$t(o),s=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+n[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}};var qI=class{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((m,g)=>m[0]+n[g]+m[1]);let o=n.length,i=$t(o),s=e.map(m=>m[0]).join(","),a=e.map((m,g)=>m[0]+n[g]).join(","),l=Rr("rc",o),c=Rr("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${u}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${u}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="";for(let m=0,g=o===1?2:4;m<g;m++)f+=`
        ${p[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${d});
        }
      `;f+=o===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}};var i$=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,constantValue:s}=r;if(x.sizeFromShape(o.shape)===0){let c=i.map((u,d)=>u[0]+o.shape[d]+u[1]);return Wp({backend:e,attrs:{shape:c,value:s,dtype:o.dtype}})}let a=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qI(o.shape,i,s):new WI(o.shape,i,s),l=[[s]];return e.runWebGLProgram(a,[o],o.dtype,l)},Qle={kernelName:Kd,backendName:"webgl",kernelFunc:i$};var oLe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,iLe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+zs+`
  return result;
`,sLe=Sn({opSnippet:oLe,packedOpSnippet:iLe}),Jle={kernelName:Jc,backendName:"webgl",kernelFunc:sLe};function aLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=[],c=x.parseAxisParam(i,o.shape),u=c,d=O.getAxesPermutation(u,a),p=o;d!=null&&(p=or({inputs:{x:o},backend:e,attrs:{perm:d}}),u=O.getInnerMostAxes(u.length,a),l.push(p)),O.assertAxesAreInnerMostDims("prod",u,a);let h;if(e.shouldExecuteOnCPU([p])){let f=e.texData.get(p.dataId).values,{outVals:m,outShape:g,outDtype:v}=jie(p.shape,p.dtype,f,u);h=e.makeTensorInfo(g,v,m)}else{let[f,m]=O.computeOutAndReduceShapes(p.shape,u),g=x.sizeFromShape(m),v=Ie({inputs:{x:p},backend:e,attrs:{shape:[-1,g]}}),w=Uh(o.dtype),y=Hs(v,w,"prod",e);h=Ie({inputs:{x:y},backend:e,attrs:{shape:f}}),l.push(v),l.push(y)}if(s){l.push(h);let f=O.expandShapeToKeepDim(h.shape,c);h=Ie({inputs:{x:h},backend:e,attrs:{shape:f}})}return l.forEach(f=>e.disposeIntermediateTensorInfo(f)),h}var ece={kernelName:Xd,backendName:"webgl",kernelFunc:aLe};function lLe(t){let{inputs:n,backend:e,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=n,{outputRaggedRank:a}=r,l=o.map(v=>e.readSync(v.dataId)),c=o.map(v=>v.shape),u=e.readSync(i.dataId),d=e.readSync(s.dataId),[p,h,f]=zie(l,c,u,i.shape,i.dtype,d,s.shape,a),m=p.map(v=>e.makeTensorInfo([v.length],"int32",v)),g=e.makeTensorInfo(f,i.dtype,h);return m.concat([g])}var tce={kernelName:Eg,backendName:"webgl",kernelFunc:lLe};function cLe(t){let{inputs:n,backend:e}=t,{starts:r,limits:o,deltas:i}=n,s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=Hie(s,r.shape,r.dtype,a,o.shape,l,i.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],r.dtype,u);return[d,p]}var nce={kernelName:Ig,backendName:"webgl",kernelFunc:cLe};function uLe(t){let{inputs:n,backend:e,attrs:r}=t,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=r,c=e.readSync(o.dataId),u=e.readSync(i.dataId),d=e.readSync(s.dataId),p=a.map(g=>e.readSync(g.dataId)),h=a.map(g=>g.shape),[f,m]=Uie(c,o.shape,u,i.shape,i.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(f,i.dtype,m)}var rce={kernelName:Ng,backendName:"webgl",kernelFunc:uLe};var s$=t=>{let{backend:n,attrs:e}=t,{start:r,stop:o,step:i,dtype:s}=e,a=Gie(r,o,i,s);return n.makeTensorInfo([a.length],s,a)},oce={kernelName:Ag,backendName:"webgl",kernelFunc:s$};var dLe="return 1.0 / x;",pLe=ut({opSnippet:dLe}),ice={kernelName:eu,backendName:"webgl",kernelFunc:pLe};var hLe=so+`
  return (x < 0.0) ? 0.0 : x;
`,fLe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mLe=ut({opSnippet:hLe,packedOpSnippet:fLe}),sce={kernelName:tu,backendName:"webgl",kernelFunc:mLe};var gLe=so+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,vLe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,wLe=ut({opSnippet:gLe,packedOpSnippet:vLe}),ace={kernelName:nu,backendName:"webgl",kernelFunc:wLe};var KI=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var ZI=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function yLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r,[l,c]=a,u=Q().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZI(o.shape,l,c,i,s):new KI(o.shape,l,c,i,s);return e.runWebGLProgram(u,[o],"float32")}var lce={kernelName:Jd,backendName:"webgl",kernelFunc:yLe};var XI=class{constructor(n,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,o,i]=e,[,s,a]=n,l=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,f=Math.ceil(p)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${f});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function xLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r,a=new XI(i.shape,o.shape,s);return e.runWebGLProgram(a,[i],i.dtype)}var cce={kernelName:Fg,backendName:"webgl",kernelFunc:xLe};var YI=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p=o?"0.5":"0.0",h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var QI=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p=o?"0.5":"0.0",h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function _Le(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r,[l,c]=a,u=Q().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new QI(o.shape,l,c,i,s):new YI(o.shape,l,c,i,s);return e.runWebGLProgram(u,[o],o.dtype)}var uce={kernelName:Qd,backendName:"webgl",kernelFunc:_Le};var JI=class{constructor(n,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,o,i]=e,[,s,a]=n,l=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,f=Math.ceil(p)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${f});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function kLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r,a=new JI(i.shape,o.shape,s);return e.runWebGLProgram(a,[i],i.dtype)}var dce={kernelName:Og,backendName:"webgl",kernelFunc:kLe};var e3=class{constructor(n,e){this.variableNames=["x"];let r=n.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=n,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${n[0]} - coord - 1));
        }
      `;return}let o=a=>e.indexOf(a)!==-1&&n[a]!==1?`${n[a]} - coords[${a}] - 1`:`coords[${a}]`,i=n.map((a,l)=>o(l)).join(","),s=$t(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}};var t3=class{constructor(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let r=n.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=n;let o=Rr("rc",r),i=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=$t(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${n[0]} - rc - 1),
            ${n[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),
                ${n[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${i}){
            result.g = ${c(o.slice())};
          }
          if(${s}) {
            result.b = ${u(o.slice())};
            if(${i}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(f){return p(f)}function c(f){return f[r-1]="("+f[r-1]+" + 1)",p(f)}function u(f){return f[r-2]="("+f[r-2]+" + 1)",p(f)}function d(f){return f[r-1]="("+f[r-1]+" + 1)",f[r-2]="("+f[r-2]+" + 1)",p(f)}function p(f){let m=n.map((w,y)=>h(y,f)),g=m.join(","),v=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${v}))`}function h(f,m){return e.indexOf(f)!==-1&&n[f]!==1?`${n[f]} - ${m[f]} - 1`:`${m[f]}`}}};function bLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dims:i}=r,s=o.shape.length,a=x.parseAxisParam(i,o.shape);if(s===0)return Or({inputs:{x:o},backend:e});let l=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t3(o.shape,a):new e3(o.shape,a);return e.runWebGLProgram(l,[o],o.dtype)}var pce={kernelName:ep,backendName:"webgl",kernelFunc:bLe};var n3=class{constructor(n,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let r=n[1],o=n[2];this.outputShape=n;let i="";typeof e=="number"?i=`float outputValue = ${e.toFixed(2)};`:i=`
        vec3 fill = vec3(${e.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var hce={kernelName:Qg,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,{radians:o,fillValue:i,center:s}=n,a=e,l=new n3(r.shape,i),[c,u]=O.getImageCenter(s,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};var CLe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,SLe=ut({opSnippet:CLe}),fce={kernelName:ru,backendName:"webgl",kernelFunc:SLe};var MLe="return inversesqrt(x);",TLe=ut({opSnippet:MLe,cpuKernelImpl:Wie}),mce={kernelName:ou,backendName:"webgl",kernelFunc:TLe};var kf=class{constructor(n,e,r,o,i,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let c=$t(i.length),u=$t(s.length),d="";r===1?d="i":r===2&&(d="i, j");let p=`getIndices(${d})`,h="";o===1?h="i":o===2&&(h="i, coords[1]");let f=`getUpdates(${h})`,m="";l&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,v=e>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${n}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${e}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}};var r3=class{constructor(n,e,r,o,i,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;let c=$t(i.length),u=$t(s.length),d="";r===1?d="i":r===2&&(d="i, j");let p=`getIndices(${d})`,h="";o===1?h="i":o===2&&(h="i, coords[1]");let f=`getUpdates(${h})`,m="";l&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,v=e>1?"strides[j]":"strides",w=e>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${n}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${e}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${e}) {
                flattenedIndex += index.yw * ${w};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${f};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}};function DLe(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o,updates:i}=n,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(i,o,s),p=[d/c,c];if(d===0)return e.makeTensorInfo(s,o.dtype);let h=Ie({inputs:{x:o},backend:e,attrs:{shape:[l,a]}}),f=Ie({inputs:{x:i},backend:e,attrs:{shape:[l,c]}}),m=e.makeTensorInfo([],"float32",new Float32Array([0])),g;Q().getBool("WEBGL_PACK")?g=new r3(l,a,h.shape.length,f.shape.length,u,p):g=new kf(l,a,h.shape.length,f.shape.length,u,p);let v=e.runWebGLProgram(g,[f,h,m],f.dtype),w=Ie({inputs:{x:v},backend:e,attrs:{shape:s}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(m),w}var gce={kernelName:Pg,backendName:"webgl",kernelFunc:DLe};var o3=class{constructor(n,e,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[n,r];let i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=Q().getNumber("WEBGL_VERSION")===2?i:s,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function ELe(t){let{inputs:n,backend:e,attrs:r}=t,{sortedSequence:o,values:i}=n,{side:s}=r,a=new o3(o.shape[0],o.shape[1],i.shape[1],s),l=[[o.shape[1]]];return e.runWebGLProgram(a,[o,i],"int32",l)}var vce={kernelName:Lg,backendName:"webgl",kernelFunc:ELe};var i3=class{constructor(n,e,r){this.variableNames=["c","a","b"],this.outputShape=e;let o,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",o="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<n&&l.push(`${a[u]}`);o=l.join(),i=c.join()}let s=$t(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}};function ILe(t){let{inputs:n,backend:e}=t,{condition:r,t:o,e:i}=n,s=new i3(r.shape.length,o.shape,o.shape.length);return e.runWebGLProgram(s,[r,o,i],Vr(o.dtype,i.dtype))}var wce={kernelName:tp,backendName:"webgl",kernelFunc:ILe};var NLe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${O.SELU_SCALEALPHA};
  float scale = ${O.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ALe=ut({opSnippet:NLe}),yce={kernelName:iu,backendName:"webgl",kernelFunc:ALe};var RLe=qa+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,OLe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,FLe=ut({opSnippet:RLe,packedOpSnippet:OLe,cpuKernelImpl:Kie}),xce={kernelName:cu,backendName:"webgl",kernelFunc:FLe};var PLe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,BLe=ut({opSnippet:PLe}),_ce={kernelName:lu,backendName:"webgl",kernelFunc:BLe};var LLe=qa+`
  return sin(x);
`,$Le=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${zs}
  return result;
`,VLe=ut({opSnippet:LLe,packedOpSnippet:$Le}),kce={kernelName:su,backendName:"webgl",kernelFunc:VLe};var jLe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,zLe=ut({opSnippet:jLe}),bce={kernelName:au,backendName:"webgl",kernelFunc:zLe};var HLe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,ULe=ut({opSnippet:HLe}),Cce={kernelName:uu,backendName:"webgl",kernelFunc:ULe};var GLe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,paddings:s}=r;x.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((v,w)=>v*w),l=[[0,0]];l.push(...s);for(let v=1+i.length;v<o.shape.length;++v)l.push([0,0]);let c=[],u=i$({inputs:{x:o},backend:e,attrs:{paddings:l,constantValue:0}}),d=O.getReshaped(u.shape,i,a,!1),p=O.getPermuted(d.length,i.length,!1),h=O.getReshapedPermuted(u.shape,i,a,!1),f=Ie({inputs:{x:u},backend:e,attrs:{shape:d}}),m=or({inputs:{x:f},backend:e,attrs:{perm:p}}),g=Ie({inputs:{x:m},backend:e,attrs:{shape:h}});return c.push(u),c.push(f),c.push(m),c.forEach(v=>e.disposeIntermediateTensorInfo(v)),g},Sce={kernelName:op,backendName:"webgl",kernelFunc:GLe};function WLe(t){let{inputs:n,backend:e}=t,{indices:r,values:o,denseShape:i,defaultValue:s}=n;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.readSync(r.dataId),l=e.readSync(o.dataId),c=e.readSync(i.dataId),u=e.readSync(s.dataId)[0],[d,p,h,f,m]=Xie(a,r.shape,r.dtype,l,o.dtype,c,u);return[e.makeTensorInfo(p,r.dtype,d),e.makeTensorInfo([p[0]],o.dtype,h),e.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),e.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var Mce={kernelName:$g,backendName:"webgl",kernelFunc:WLe};function qLe(t){let{inputs:n,backend:e}=t,{inputIndices:r,inputShape:o,newShape:i}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(e.readSync(o.dataId)),a=e.readSync(r.dataId),l=Array.from(e.readSync(i.dataId)),[c,u,d]=Yie(a,r.shape,r.dtype,s,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var Tce={kernelName:Vg,backendName:"webgl",kernelFunc:qLe};function KLe(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);let s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=LE(s,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}var Dce={kernelName:jg,backendName:"webgl",kernelFunc:KLe};function ZLe(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);let s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=LE(s,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}var Ece={kernelName:zg,backendName:"webgl",kernelFunc:ZLe};function XLe(t){let{inputs:n,backend:e,attrs:r}=t,{sparseIndices:o,sparseValues:i,defaultValue:s}=n,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=O.calculateShapes(i,o,a),h=!1;if(i.dtype==="string"){let v=e.bufferSync(o),w=e.bufferSync(i),y=x.decodeString(e.readSync(s.dataId)[0]),_=qie(v,w,a,p,u,c,l,d,y,h);return e.makeTensorInfo(a,_.dtype,_.values)}let f=new kf(c,l,o.shape.length,i.shape.length,d,[p,1],h),m=e.runWebGLProgram(f,[i,o,s],i.dtype),g=Ie({inputs:{x:m},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(m),g}var Ice={kernelName:Hg,backendName:"webgl",kernelFunc:XLe};function YLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{numOrSizeSplits:i,axis:s}=r,a=x.parseAxisParam(s,o.shape)[0],l=O.prepareSplitSize(o,i,a),c=o.shape.length,u=new Array(c).fill(0),d=o.shape.slice();return l.map(p=>{let h=[...d];h[a]=p;let f=Zl({inputs:{x:o},backend:e,attrs:{begin:u,size:h}});return u[a]+=p,f})}var Nce={kernelName:ip,backendName:"webgl",kernelFunc:YLe};var Ace="return sqrt(x);",QLe=ut({opSnippet:Ace,packedOpSnippet:Ace,cpuKernelImpl:Qie}),Rce={kernelName:du,backendName:"webgl",kernelFunc:QLe};var JLe="return x * x;",e7e=ut({opSnippet:JLe}),Oce={kernelName:Ug,backendName:"webgl",kernelFunc:e7e};var Fce="return (a - b) * (a - b);",t7e=Sn({opSnippet:Fce,packedOpSnippet:Fce}),Pce={kernelName:pu,backendName:"webgl",kernelFunc:t7e};function n7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");let i=e.readSync(o.dataId),s=O.fromUint8ToStringArray(i),a=Jie(s,"string",r);return e.makeTensorInfo(o.shape,"string",a)}var Bce={kernelName:Lh,backendName:"webgl",kernelFunc:n7e};function r7e({inputs:t,attrs:n,backend:e}){let{x:r}=t,o=so+`
    return x > 0.0 ? 1.0 : float(${n.alpha});
  `,i=new Qo(r.shape,o);return e.runWebGLProgram(i,[r],r.dtype)}var Lce={kernelName:gu,backendName:"webgl",kernelFunc:r7e};var s3=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=r;let o=r.length,i=$t(r.length),s=$t(r.length),a="";if(o===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${n});
      ${i} strides = ${i}(${e});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function o7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:w,end:y,strides:_}=go.sliceInfo(o.shape,i,s,a,l,c,u,d,p),k;if(m)k=Ie({inputs:{x:o},backend:e,attrs:{shape:f}});else if(g||v){x.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let E=go.computeOutShape(w,y,_),A=Zl({inputs:{x:o},backend:e,attrs:{begin:w,size:E}});k=Ie({inputs:{x:A},backend:e,attrs:{shape:f}}),e.disposeIntermediateTensorInfo(A)}else if(e.shouldExecuteOnCPU([o])){let A=e.readSync(o.dataId),P=st(o.shape,o.dtype,A),N=ese(h,P,_,w);k=e.makeTensorInfo(f,o.dtype,N.values)}else{let A=new s3(w,_,h);k=e.runWebGLProgram(A,[o],o.dtype)}let M=Ie({inputs:{x:k},backend:e,attrs:{shape:f}});return e.disposeIntermediateTensorInfo(k),M}var $ce={kernelName:Gg,backendName:"webgl",kernelFunc:o7e};function i7e(t){let{inputs:n,backend:e,attrs:r}=t,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=n,p=e.readSync(u.dataId),h=e.readSync(d.dataId),[f,m]=tse(p,h,o,i,s,a,l,c);return[e.makeTensorInfo([f.length],"string",f),e.makeTensorInfo(d.shape,"int32",m)]}var Vce={kernelName:Wg,backendName:"webgl",kernelFunc:i7e};function s7e(t){let{inputs:n,backend:e,attrs:r}=t,{skipEmpty:o}=r,{input:i,delimiter:s}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.readSync(i.dataId),l=e.readSync(s.dataId)[0],[c,u,d]=nse(a,l,o),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var jce={kernelName:qg,backendName:"webgl",kernelFunc:s7e};function a7e(t){let{inputs:n,backend:e,attrs:r}=t,{numBuckets:o}=r,{input:i}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let s=e.readSync(i.dataId),a=rse(s,o);return e.makeTensorInfo(i.shape,"int32",a)}var zce={kernelName:Kg,backendName:"webgl",kernelFunc:a7e};var l7e="return tan(x);",c7e=ut({opSnippet:l7e}),Hce={kernelName:fu,backendName:"webgl",kernelFunc:c7e};var u7e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,d7e=ut({opSnippet:u7e}),Uce={kernelName:mu,backendName:"webgl",kernelFunc:d7e};function p7e(t){let{inputs:n,backend:e,attrs:r}=t,{tensor:o,indices:i,updates:s}=n,{}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(s,i,o.shape),p=[d/c,c];if(d===0)return e.makeTensorInfo(o.shape,i.dtype);let h=Ie({inputs:{x:i},backend:e,attrs:{shape:[l,a]}}),f=Ie({inputs:{x:s},backend:e,attrs:{shape:[l,c]}}),m=Ie({inputs:{x:o},backend:e,attrs:{shape:p}}),g=new kf(l,a,h.shape.length,f.shape.length,u,p,!1,!0),v=e.runWebGLProgram(g,[f,h,m],m.dtype),w=Ie({inputs:{x:v},backend:e,attrs:{shape:o.shape}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(v),w}var Gce={kernelName:Bg,backendName:"webgl",kernelFunc:p7e};var a3=class{constructor(n,e){this.variableNames=["A"];let r=new Array(n.length);for(let s=0;s<r.length;s++)r[s]=n[s]*e[s];this.outputShape=r,this.rank=r.length;let o=$t(this.rank),i=h7e(n);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}};function h7e(t){let n=t.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(n===1)return`imod(resRC, ${t[0]})`;let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<t.length;o++)r.push(`imod(${e[o]}, ${t[o]})`);return r.join()}function a$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reps:i}=r;if(o.dtype==="string"||o.shape.length>5){let l=e.readSync(o.dataId),c=o.dtype==="string"?l.map(p=>x.decodeString(p)):l,u=st(o.shape,o.dtype,c),d=ise(u,i);return e.makeTensorInfo(d.shape,d.dtype,d.values)}let s=new a3(o.shape,i);return e.runWebGLProgram(s,[o],o.dtype)}var Wce={kernelName:_l,backendName:"webgl",kernelFunc:a$};var l3=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=n,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},c3=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=n,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function a2(t,n){n!==null&&t.disposeIntermediateTensorInfo(n)}function qce(t){let n=1;for(;n<t;)n*=2;return n}function f7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{k:i,sorted:s}=r,a=Q().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Q().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([o])||u<a||i>l){let N=e.readSync(o.dataId),[B,S]=sse(N,c,o.dtype,i,s);return[e.makeTensorInfo(B.shape,B.dtype,B.values),e.makeTensorInfo(S.shape,S.dtype,S.values)]}if(i===0)return c[c.length-1]=0,[e.makeTensorInfo(c,o.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(u===1)return[o,Wp({attrs:{shape:c,dtype:"int32",value:0},backend:e})];let d=e.texData.get(o.dataId),p=d!==null&&d.isPacked,h=p?e.unpackTensor(o):o,m=x.sizeFromShape(c)/u,g=Ie({inputs:{x:h},attrs:{shape:[m,u]},backend:e});p&&a2(e,h);let v=qce(i),w=qce(u),y=null,_=()=>y===null?[g,g]:[g,y],k=(N,B,S)=>{let W=_(),ie=new l3(S),X=[[u],[y===null?1:0],[Number.NEGATIVE_INFINITY],[N],[B]],G=y;y=e.runWebGLProgram(ie,W,"int32",X),a2(e,G)};for(let N=1;N<v;N*=2){let B=N*2;for(let S=N;S>=1;S/=2)k(B,S,[m,w])}for(let N=w;N>v;N/=2){let B=_(),S=new c3([m,N/2]),ie=[[u],[y===null?1:0],[v]],Z=y;y=e.runWebGLProgram(S,B,"int32",ie),a2(e,Z);let X=v/2,G=X*2;for(let H=X;H>=1;H/=2)k(G,H,y.shape)}let M=y;y=Zl({inputs:{x:y},backend:e,attrs:{begin:0,size:[m,i]}}),a2(e,M);let E=e$({inputs:{x:g,indices:y},backend:e,attrs:{axis:1,batchDims:1}});a2(e,g);let A=c.slice(0,-1);A.push(i),M=y,y=Ie({inputs:{x:y},attrs:{shape:A},backend:e}),a2(e,M);let P=E;return E=Ie({inputs:{x:E},attrs:{shape:A},backend:e}),a2(e,P),[E,y]}var Kce={kernelName:Zg,backendName:"webgl",kernelFunc:f7e};var u3=class{constructor(n,e,r,o,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;let a=r==="nearest"?1:2,l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${e}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${e}));
                float mapY = mapCoord(inY, float(${n}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function m7e(t){let{inputs:n,backend:e,attrs:r}=t,{image:o,transforms:i}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,p,h]=o.shape,[f,m]=c??[d,p],g=[u,f,m,h],v=new u3(d,p,s,a,l,g);return e.runWebGLProgram(v,[o,i],"float32")}var Zce={kernelName:Xg,backendName:"webgl",kernelFunc:m7e};function g7e(t){let{inputs:n,attrs:e,backend:r}=t,{axis:o}=e,{x:i}=n;Wl(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=ase(s,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var Xce={kernelName:Yg,backendName:"webgl",kernelFunc:g7e};function v7e(t){let{inputs:n,backend:e,attrs:r}=t,{value:o}=n,{axis:i}=r;i<0&&(i+=o.shape.length);let s=o,a=s.shape.length,l=o.shape[i],c=new Array(a-1),u=0;for(let m=0;m<a;m++)m!==i&&(c[u++]=s.shape[m]);let d=[],p=new Array(a).fill(0),h=s.shape.slice();h[i]=1;let f=new Array(l);for(let m=0;m<f.length;m++){p[i]=m;let g=Zl({inputs:{x:s},backend:e,attrs:{begin:p,size:h}}),v=Ie({inputs:{x:g},backend:e,attrs:{shape:c}});f[m]=v,d.push(g)}return d.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}var Yce={kernelName:ap,backendName:"webgl",kernelFunc:v7e};var d3=class{constructor(n,e){this.variableNames=["x","segmentIds"];let r=n.windowSize,o=n.batchSize,i=n.inSize,s=n.numSegments,a=s*Math.ceil(i/r);this.outputShape=[o,a];let l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `,h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${f}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function w7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,segmentIds:i}=n,{numSegments:s}=r,a=o.shape.length,l=[],c=0,u=O.getAxesPermutation([c],a),d=o;u!=null&&(d=or({inputs:{x:o},backend:e,attrs:{perm:u}}),l.push(d),c=O.getInnerMostAxes(1,a)[0]);let p=O.segment_util.computeOutShape(d.shape,c,s),h=x.sizeFromShape([d.shape[c]]),f=Ie({inputs:{x:d},backend:e,attrs:{shape:[-1,h]}});l.push(f);let m=Uh(o.dtype),g=(_,k,M,E,A)=>{let P=_.shape[0],N=_.shape[1],B=O.segment_util.segOpComputeOptimalWindowSize(N,A),S={windowSize:B,inSize:N,batchSize:P,numSegments:A},W=new d3(S,k),ie=e.compileAndRun(W,[_,M],E);if(l.push(ie),ie.shape[1]===A)return ie;let Z=s$({backend:e,attrs:{start:0,stop:A,step:1,dtype:"float32"}}),X=a$({inputs:{x:Z},backend:e,attrs:{reps:[N/B]}});return l.push(Z),l.push(X),g(ie,k,X,E,A)},v=g(f,"unsortedSegmentSum",i,m,s),w=Ie({inputs:{x:v},backend:e,attrs:{shape:p}}),y=w;if(u!=null){l.push(w);let _=O.getUndoAxesPermutation(u);y=or({inputs:{x:y},backend:e,attrs:{perm:_}})}return l.forEach(_=>e.disposeIntermediateTensorInfo(_)),y}var Qce={kernelName:lp,backendName:"webgl",kernelFunc:w7e};var y7e=[Ose,Pse,Bse,Lse,Vse,jse,zse,Hse,Wse,qse,Kse,Zse,Xse,Yse,Qse,Jse,eae,tae,nae,rae,oae,sae,aae,lae,cae,hae,mae,gae,Cse,wae,xae,_ae,kae,bae,Cae,Sae,Mae,Tae,Dae,Eae,Aae,Rae,Oae,Fae,Pae,Bae,Lae,$ae,Vae,jae,zae,Hae,Uae,Gae,Wae,qae,Zae,Xae,Yae,Qae,ele,tle,nle,rle,ole,ile,sle,ale,lle,bse,cle,yae,ule,dle,ple,Sse,hle,fle,mle,gle,vle,wle,yle,xle,_le,kle,Cle,Sle,Mle,Tle,Dle,Ele,Nle,Rle,Ole,Fle,Ple,Ble,zle,Dse,Hle,Ule,Gle,Wle,uae,qle,Xle,Yle,Qle,Jle,Mse,ece,tce,nce,rce,oce,dae,Lle,ice,sce,ace,Ise,lce,cce,uce,dce,pce,hce,fce,mce,gce,vce,wce,yce,xce,_ce,kce,bce,iae,jle,Cce,Sce,Mce,Tce,Dce,Ece,Ice,Nce,Rce,Oce,Pce,Bce,Lce,$ce,Vce,jce,zce,Vle,Ase,Hce,Uce,Gce,Wce,Kce,Zce,Rse,Xce,Yce,Qce,Kle];for(let t of y7e)q1(t);var Jce="4.22.0";var x7e={"tfjs-core":sT,"tfjs-backend-cpu":cE,"tfjs-backend-webgl":UE,"tfjs-data":zD,"tfjs-layers":df,"tfjs-converter":MD,tfjs:Jce};var nue=S2(tue());var u$=t=>z(void 0,null,function*(){let n=yield t.async("blob");return new File([n],t.name,{type:n.type||"application/octet-stream"})}),rue=t=>z(void 0,null,function*(){let n=yield nue.default.loadAsync(t),e=/(^|\/)(__MACOSX|\.DS_Store|\.?_\w+)/,r=n.file(/\.json$/).filter(({name:s})=>!e.test(s)),o=n.file(/\.bin$/).filter(({name:s})=>!e.test(s)),i=n.file(/\.js$/).filter(({name:s})=>!e.test(s));if(r.length!==1||o.length<1||i.length!==1)throw new Error("Invalid zip file");return Promise.all([u$(r[0]),Promise.all(o.map(s=>u$(s))),u$(i[0])])});var Xl=class t{constructor(n){this.config=n;let e=localStorage.getItem("models")?.split(",");e&&e.length>0&&Promise.all(e.map(r=>Mv(`localstorage://${r}_model`))).then(r=>{this._models=e.map((o,i)=>{let s=r[i],a=localStorage.getItem(`${o}_script`),l=gF(a);return{id:o,name:s.name,model:s,script:l}}),this._modelsSubject.next(this._models)}),this._modelsSubject=new Kn(this._models)}static _instance;static get instance(){return t._instance}_models;_modelsSubject;get models(){return this._models}get models$(){return this._modelsSubject.asObservable()}static init(n){return t.instance||(t._instance=new t(n)),t.instance}_load(n){return z(this,null,function*(){let e=[];for(let r of n){let[o,i,s]=yield rue(r),a=yield Mv(Xr.browserFiles([o,...i])),l=yield s.text(),c=gF(l),u=a.name.toLowerCase().replace(/\s+/g,"_"),d=a.name;e.push({id:u,name:d,model:a,script:c}),a.save(`localstorage://${u}_model`),localStorage.setItem(`${u}_script`,l)}this._models=e,this._modelsSubject.next(this._models),localStorage.setItem("models",e.map(({id:r})=>r).join(","))})}loadFromFile(){Ns.promise(Gn.openFile(".zip",!0).then(n=>this._load(n)),{loading:this.config.translate.instant("MODELS_LOADING"),success:()=>this.config.translate.instant("MODELS_LOADED"),error:n=>(console.error(n),this.config.translate.instant("MODELS_NOT_LOADED"))})}deleteFile(){for(let n of this._models??[])Xr.removeModel(`localstorage://${n.id}_model`),localStorage.removeItem(`${n.id}_script`);localStorage.removeItem("models"),this._models=void 0,this._modelsSubject.next(this._models),Ns.success(this.config.translate.instant("MODELS_DELETED"))}static \u0275fac=function(e){return new(e||t)(Xe(Gn))};static \u0275prov=ke({token:t,factory:t.\u0275fac})};var k7e=40,Fr=class t{static _instance;static get instance(){return t._instance}static UseState=n=>class extends n{constructor(...e){super(...e),this.fromObject(t.instance.state),t.instance.state$.subscribe(r=>this.fromObject(r)),t.instance._requestStateSubject.pipe(fa(500)).subscribe(()=>t.instance.setState(this.toObject(),!1))}};static SetState=(n,e,r)=>{let{value:o,set:i}=r;if(o)r.value=function(...s){let a=o.apply(this,s);return t.instance._requestStateSubject.next(),a};else if(i)r.set=function(s){i.apply(this,[s]),t.instance._requestStateSubject.next()};else throw new Error("The setState decorator can only be used on methods or properties that change the state.")};_states;_index;get state(){return this._states[this._index]}_requestStateSubject;_stateSubject;get state$(){return this._stateSubject.asObservable()}get canUndo(){return this._index>0}get canRedo(){return this._index<this._states.length-1}constructor(){let n=sessionStorage.getItem("state");n?this._states=[JSON.parse(n)]:this._states=[{}],this._index=0,this._requestStateSubject=new Qu(1),this._stateSubject=new Kn(this._states[this._index])}static init(){return t.instance||(t._instance=new t),t.instance}setState(n,e=!0){this._states=this._states.slice(0,this._index+1),this._states.push(n),this._index++,this._states.length>k7e&&(this._states.shift(),this._index--),e&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}replaceState(n,e=!0){this._states[this._index]=n,e&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}undo(n=!0){this.canUndo&&(this._index--,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state)))}redo(n=!0){this.canRedo&&(this._index++,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state)))}reset(n=!0){this._states=[{}],this._index=0,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac})};var C7e=["frame"],S7e=["*"],M7e=(t,n)=>({width:t,height:n}),T7e=(t,n,e,r,o)=>({minWidth:t,maxWidth:n,minHeight:e,maxHeight:r,transform:o}),D7e=t=>({"grid-view":t}),mw=class t{config=I(Gn);frame=oi.required("frame");showGrid=this.config.grid;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-canvas"]],viewQuery:function(e,r){e&1&&si(r.frame,C7e,5),e&2&&no()},ngContentSelectors:S7e,decls:5,vars:14,consts:[["frame",""],[1,"frame","fixed","left-0","top-0","h-screen","w-screen","cursor-default","overflow-scroll"],[1,"m-auto","flex","items-center","justify-center","overflow-visible",3,"ngStyle"],[1,"relative","overflow-hidden","transition-transform",3,"ngStyle","ngClass"]],template:function(e,r){e&1&&(Rt(),J(0,"div",1,0)(2,"div",2)(3,"div",3),it(4),re()()()),e&2&&(ee(2),Be("ngStyle",mh(3,M7e,r.config.size()*r.config.zoom()+"px",r.config.size()*r.config.zoom()+"px")),ee(),Be("ngStyle",bU(6,T7e,r.config.size()+"px",r.config.size()+"px",r.config.size()+"px",r.config.size()+"px","scale("+r.config.zoom()+")"))("ngClass",wa(12,D7e,r.showGrid())))},dependencies:[_r,Tm,Dm],styles:[".frame[_ngcontent-%COMP%]{background-color:hsl(var(--background))}  .high-contrast .frame{background-color:hsl(var(--border))!important}.grid-view[_ngcontent-%COMP%]{background-image:radial-gradient(circle,hsl(var(--border)) 1.5px,transparent 1.5px);background-size:20px 20px}  .high-contrast .grid-view{background-image:radial-gradient(circle,hsl(var(--muted-foreground)) 1.5px,transparent 1.5px)}"]})};function oue(t){var n,e,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(e=oue(t[n]))&&(r&&(r+=" "),r+=e)}else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function p3(){for(var t,n,e=0,r="",o=arguments.length;e<o;e++)(t=arguments[e])&&(n=oue(t))&&(r&&(r+=" "),r+=n);return r}var g$="-",E7e=t=>{let n=N7e(t),{conflictingClassGroups:e,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{let a=s.split(g$);return a[0]===""&&a.length!==1&&a.shift(),cue(a,n)||I7e(s)},getConflictingClassGroupIds:(s,a)=>{let l=e[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},cue=(t,n)=>{if(t.length===0)return n.classGroupId;let e=t[0],r=n.nextPart.get(e),o=r?cue(t.slice(1),r):void 0;if(o)return o;if(n.validators.length===0)return;let i=t.join(g$);return n.validators.find(({validator:s})=>s(i))?.classGroupId},iue=/^\[(.+)\]$/,I7e=t=>{if(iue.test(t)){let n=iue.exec(t)[1],e=n?.substring(0,n.indexOf(":"));if(e)return"arbitrary.."+e}},N7e=t=>{let{theme:n,classGroups:e}=t,r={nextPart:new Map,validators:[]};for(let o in e)h$(e[o],r,o,n);return r},h$=(t,n,e,r)=>{t.forEach(o=>{if(typeof o=="string"){let i=o===""?n:sue(n,o);i.classGroupId=e;return}if(typeof o=="function"){if(A7e(o)){h$(o(r),n,e,r);return}n.validators.push({validator:o,classGroupId:e});return}Object.entries(o).forEach(([i,s])=>{h$(s,sue(n,i),e,r)})})},sue=(t,n)=>{let e=t;return n.split(g$).forEach(r=>{e.nextPart.has(r)||e.nextPart.set(r,{nextPart:new Map,validators:[]}),e=e.nextPart.get(r)}),e},A7e=t=>t.isThemeGetter,R7e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let n=0,e=new Map,r=new Map,o=(i,s)=>{e.set(i,s),n++,n>t&&(n=0,r=e,e=new Map)};return{get(i){let s=e.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){e.has(i)?e.set(i,s):o(i,s)}}},f$="!",m$=":",O7e=m$.length,F7e=t=>{let{prefix:n,experimentalParseClassName:e}=t,r=o=>{let i=[],s=0,a=0,l=0,c;for(let f=0;f<o.length;f++){let m=o[f];if(s===0&&a===0){if(m===m$){i.push(o.slice(l,f)),l=f+O7e;continue}if(m==="/"){c=f;continue}}m==="["?s++:m==="]"?s--:m==="("?a++:m===")"&&a--}let u=i.length===0?o:o.substring(l),d=P7e(u),p=d!==u,h=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:d,maybePostfixModifierPosition:h}};if(n){let o=n+m$,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(e){let o=r;r=i=>e({className:i,parseClassName:o})}return r},P7e=t=>t.endsWith(f$)?t.substring(0,t.length-1):t.startsWith(f$)?t.substring(1):t,B7e=t=>{let n=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;let o=[],i=[];return r.forEach(s=>{s[0]==="["||n[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},L7e=t=>ue({cache:R7e(t.cacheSize),parseClassName:F7e(t),sortModifiers:B7e(t)},E7e(t)),$7e=/\s+/,V7e=(t,n)=>{let{parseClassName:e,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=n,s=[],a=t.trim().split($7e),l="";for(let c=a.length-1;c>=0;c-=1){let u=a[c],{isExternal:d,modifiers:p,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=e(u);if(d){l=u+(l.length>0?" "+l:l);continue}let g=!!m,v=r(g?f.substring(0,m):f);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(f),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}let w=i(p).join(":"),y=h?w+f$:w,_=y+v;if(s.includes(_))continue;s.push(_);let k=o(v,g);for(let M=0;M<k.length;++M){let E=k[M];s.push(y+E)}l=u+(l.length>0?" "+l:l)}return l};function j7e(){let t=0,n,e,r="";for(;t<arguments.length;)(n=arguments[t++])&&(e=uue(n))&&(r&&(r+=" "),r+=e);return r}var uue=t=>{if(typeof t=="string")return t;let n,e="";for(let r=0;r<t.length;r++)t[r]&&(n=uue(t[r]))&&(e&&(e+=" "),e+=n);return e};function z7e(t,...n){let e,r,o,i=s;function s(l){let c=n.reduce((u,d)=>d(u),t());return e=L7e(c),r=e.cache.get,o=e.cache.set,i=a,a(l)}function a(l){let c=r(l);if(c)return c;let u=V7e(l,e);return o(l,u),u}return function(){return i(j7e.apply(null,arguments))}}var Jo=t=>{let n=e=>e[t]||[];return n.isThemeGetter=!0,n},due=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,pue=/^\((?:(\w[\w-]*):)?(.+)\)$/i,H7e=/^\d+\/\d+$/,U7e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G7e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,W7e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,q7e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K7e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gw=t=>H7e.test(t),vn=t=>!!t&&!Number.isNaN(Number(t)),bf=t=>!!t&&Number.isInteger(Number(t)),d$=t=>t.endsWith("%")&&vn(t.slice(0,-1)),qp=t=>U7e.test(t),Z7e=()=>!0,X7e=t=>G7e.test(t)&&!W7e.test(t),hue=()=>!1,Y7e=t=>q7e.test(t),Q7e=t=>K7e.test(t),J7e=t=>!wt(t)&&!yt(t),e$e=t=>vw(t,gue,hue),wt=t=>due.test(t),l2=t=>vw(t,vue,X7e),p$=t=>vw(t,i$e,vn),aue=t=>vw(t,fue,hue),t$e=t=>vw(t,mue,Q7e),h3=t=>vw(t,wue,Y7e),yt=t=>pue.test(t),Zk=t=>ww(t,vue),n$e=t=>ww(t,s$e),lue=t=>ww(t,fue),r$e=t=>ww(t,gue),o$e=t=>ww(t,mue),f3=t=>ww(t,wue,!0),vw=(t,n,e)=>{let r=due.exec(t);return r?r[1]?n(r[1]):e(r[2]):!1},ww=(t,n,e=!1)=>{let r=pue.exec(t);return r?r[1]?n(r[1]):e:!1},fue=t=>t==="position"||t==="percentage",mue=t=>t==="image"||t==="url",gue=t=>t==="length"||t==="size"||t==="bg-size",vue=t=>t==="length",i$e=t=>t==="number",s$e=t=>t==="family-name",wue=t=>t==="shadow";var a$e=()=>{let t=Jo("color"),n=Jo("font"),e=Jo("text"),r=Jo("font-weight"),o=Jo("tracking"),i=Jo("leading"),s=Jo("breakpoint"),a=Jo("container"),l=Jo("spacing"),c=Jo("radius"),u=Jo("shadow"),d=Jo("inset-shadow"),p=Jo("text-shadow"),h=Jo("drop-shadow"),f=Jo("blur"),m=Jo("perspective"),g=Jo("aspect"),v=Jo("ease"),w=Jo("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[..._(),yt,wt],M=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],A=()=>[yt,wt,l],P=()=>[gw,"full","auto",...A()],N=()=>[bf,"none","subgrid",yt,wt],B=()=>["auto",{span:["full",bf,yt,wt]},bf,yt,wt],S=()=>[bf,"auto",yt,wt],W=()=>["auto","min","max","fr",yt,wt],ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Z=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...A()],G=()=>[gw,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],H=()=>[t,yt,wt],V=()=>[..._(),lue,aue,{position:[yt,wt]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],pe=()=>["auto","cover","contain",r$e,e$e,{size:[yt,wt]}],le=()=>[d$,Zk,l2],se=()=>["","none","full",c,yt,wt],ye=()=>["",vn,Zk,l2],Ae=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[vn,d$,lue,aue],Je=()=>["","none",f,yt,wt],qe=()=>["none",vn,yt,wt],xt=()=>["none",vn,yt,wt],bt=()=>[vn,yt,wt],T=()=>[gw,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qp],breakpoint:[qp],color:[Z7e],container:[qp],"drop-shadow":[qp],ease:["in","out","in-out"],font:[J7e],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qp],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qp],shadow:[qp],spacing:["px",vn],text:[qp],"text-shadow":[qp],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",gw,wt,yt,g]}],container:["container"],columns:[{columns:[vn,wt,yt,a]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[bf,"auto",yt,wt]}],basis:[{basis:[gw,"full","auto",a,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[vn,gw,"auto","initial","none",wt]}],grow:[{grow:["",vn,yt,wt]}],shrink:[{shrink:["",vn,yt,wt]}],order:[{order:[bf,"first","last","none",yt,wt]}],"grid-cols":[{"grid-cols":N()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":N()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...ie(),"normal"]}],"justify-items":[{"justify-items":[...Z(),"normal"]}],"justify-self":[{"justify-self":["auto",...Z()]}],"align-content":[{content:["normal",...ie()]}],"align-items":[{items:[...Z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Z(),{baseline:["","last"]}]}],"place-content":[{"place-content":ie()}],"place-items":[{"place-items":[...Z(),"baseline"]}],"place-self":[{"place-self":["auto",...Z()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[a,"screen",...G()]}],"min-w":[{"min-w":[a,"screen","none",...G()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...G()]}],h:[{h:["screen",...G()]}],"min-h":[{"min-h":["screen","none",...G()]}],"max-h":[{"max-h":["screen",...G()]}],"font-size":[{text:["base",e,Zk,l2]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,yt,p$]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",d$,wt]}],"font-family":[{font:[n$e,wt,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,yt,wt]}],"line-clamp":[{"line-clamp":[vn,"none",yt,p$]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",yt,wt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",yt,wt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[vn,"from-font","auto",yt,l2]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[vn,"auto",yt,wt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yt,wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yt,wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:V()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:pe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},bf,yt,wt],radial:["",yt,wt],conic:[bf,yt,wt]},o$e,t$e]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ae(),"hidden","none"]}],"divide-style":[{divide:[...Ae(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...Ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[vn,yt,wt]}],"outline-w":[{outline:["",vn,Zk,l2]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",u,f3,h3]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",d,f3,h3]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[vn,l2]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",p,f3,h3]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[vn,yt,wt]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[vn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[yt,wt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[vn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:V()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:pe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",yt,wt]}],filter:[{filter:["","none",yt,wt]}],blur:[{blur:Je()}],brightness:[{brightness:[vn,yt,wt]}],contrast:[{contrast:[vn,yt,wt]}],"drop-shadow":[{"drop-shadow":["","none",h,f3,h3]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",vn,yt,wt]}],"hue-rotate":[{"hue-rotate":[vn,yt,wt]}],invert:[{invert:["",vn,yt,wt]}],saturate:[{saturate:[vn,yt,wt]}],sepia:[{sepia:["",vn,yt,wt]}],"backdrop-filter":[{"backdrop-filter":["","none",yt,wt]}],"backdrop-blur":[{"backdrop-blur":Je()}],"backdrop-brightness":[{"backdrop-brightness":[vn,yt,wt]}],"backdrop-contrast":[{"backdrop-contrast":[vn,yt,wt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",vn,yt,wt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[vn,yt,wt]}],"backdrop-invert":[{"backdrop-invert":["",vn,yt,wt]}],"backdrop-opacity":[{"backdrop-opacity":[vn,yt,wt]}],"backdrop-saturate":[{"backdrop-saturate":[vn,yt,wt]}],"backdrop-sepia":[{"backdrop-sepia":["",vn,yt,wt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",yt,wt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[vn,"initial",yt,wt]}],ease:[{ease:["linear","initial",v,yt,wt]}],delay:[{delay:[vn,yt,wt]}],animate:[{animate:["none",w,yt,wt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,yt,wt]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:qe()}],"rotate-x":[{"rotate-x":qe()}],"rotate-y":[{"rotate-y":qe()}],"rotate-z":[{"rotate-z":qe()}],scale:[{scale:xt()}],"scale-x":[{"scale-x":xt()}],"scale-y":[{"scale-y":xt()}],"scale-z":[{"scale-z":xt()}],"scale-3d":["scale-3d"],skew:[{skew:bt()}],"skew-x":[{"skew-x":bt()}],"skew-y":[{"skew-y":bt()}],transform:[{transform:[yt,wt,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:T()}],"translate-x":[{"translate-x":T()}],"translate-y":[{"translate-y":T()}],"translate-z":[{"translate-z":T()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yt,wt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yt,wt]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[vn,Zk,l2,p$]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var yue=z7e(a$e);function m3(t){let n=new Me(t);return[(i={})=>I(n,i),i=>({provide:n,useValue:i}),i=>({provide:n,useExisting:vi(i)}),n]}var[xue,O7n,_ue,F7n]=m3("@spartan-ng SET_CLASS_TO_CUSTOM_ELEMENT_TOKEN");var[kue,P7n,bue,B7n]=m3("@spartan-ng EXPOSES_SIDE_TOKEN"),[Cue,L7n,v$,$7n]=m3("@spartan-ng EXPOSES_STATE_TOKEN");function Ze(...t){return yue(p3(t))}var[Sue,V7n,Mue,j7n]=m3("@spartan-ng SET_TABLE_CLASSES_TOKEN");var c2=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmDialogClose",""],["","brnDialogClose","","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var e$n=new Me("Ng Glyph Config");var t$n=new Me("NgGlyphsToken");function l$e(t){return t==null?"":/^\d+$/.test(t)?`${t}px`:t}var c$e=new Me("Ng Icon Pre Processor"),u$e=new Me("Ng Icon Post Processor");function d$e(){return I(c$e,{optional:!0})??(t=>t)}function p$e(){return I(u$e,{optional:!0})??(()=>{})}var h$e=new Me("Ng Icon Logger"),w$=class{log(n){console.log(n)}warn(n){console.warn(n)}error(n){console.error(n)}};function f$e(){return I(h$e,{optional:!0})??new w$}var m$e=new Me("Ng Icon Config");function g$e(){return I(m$e,{optional:!0})??{}}var v$e=new Me("Ng Icon Loader Token");var w$e=new Me("Ng Icon Cache Token");function y$e(){return I(v$e,{optional:!0})}function x$e(){return I(w$e,{optional:!0})}function ir(t){return[{provide:y$,useFactory:(n=I(y$,{optional:!0,skipSelf:!0}))=>ue(ue({},n?.reduce((e,r)=>ue(ue({},e),r),{})),t),multi:!0}]}var y$=new Me("Icons Token");function _$e(){return I(y$,{optional:!0})??[]}function k$e(t){return typeof t=="string"?Promise.resolve(t):xs(t)?t.toPromise():t}function b$e(t){return t.replace(/([^a-zA-Z0-9])+(.)?/g,(n,e,r)=>r?r.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,n=>n.toLowerCase())}var C$e=0,sr=(()=>{class t{constructor(){this.config=g$e(),this.icons=_$e(),this.loader=y$e(),this.cache=x$e(),this.preProcessor=d$e(),this.postProcessor=p$e(),this.injector=I(Yt),this.renderer=I(po),this.platform=I(xo),this.elementRef=I(Mt),this.uniqueId=C$e++,this.logger=f$e(),this.name=Y(),this.svg=Y(),this.size=Y(this.config.size,{transform:l$e}),this.strokeWidth=Y(this.config.strokeWidth),this.color=Y(this.config.color),Gt(()=>this.updateIcon()),I(new Y2("aria-hidden"),{optional:!0})||this.elementRef.nativeElement.setAttribute("aria-hidden","true")}ngOnDestroy(){this.svgElement=void 0}updateIcon(){return z(this,null,function*(){let e=this.name(),r=this.svg();if(r!==void 0){this.setSvg(r);return}if(e===void 0)return;let o=b$e(e);for(let i of[...this.icons].reverse())if(i[o]){this.setSvg(i[o]);return}if(this.loader){let i=yield this.requestIconFromLoader(e);if(i!==null){this.setSvg(i);return}}this.logger.warn(`No icon named ${e} was found. You may need to import it using the withIcons function.`)})}setSvg(e){if(d1(this.platform)){this.elementRef.nativeElement.innerHTML=e,this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");return}if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===e)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),e===""))return;let r=this.renderer.createElement("template");e=this.replaceIds(e),this.renderer.setProperty(r,"innerHTML",this.preProcessor(e)),this.svgElement=r.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}replaceIds(e){if(!e.includes("ID_PLACEHOLDER_"))return e;let r=/ID_PLACEHOLDER_(\d+)/g,o=new Map,i=new Set(e.match(r));if(i===null)return e;for(let s of i){let a=s.replace("ID_PLACEHOLDER_",""),l=`ng-icon-${this.uniqueId}-${o.size}`;o.set(a,l),e=e.replace(new RegExp(s,"g"),l)}return e}requestIconFromLoader(e){return new Promise(r=>{Vo(this.injector,()=>z(this,null,function*(){if(this.cache){let s=this.cache.get(e);if(typeof s=="string"){r(s);return}if(s instanceof Promise){let a=yield s;r(a);return}}let o=k$e(this.loader(e));this.cache?.set(e,o);let i=yield o;this.cache?.set(e,i),r(i)}))})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Oe({type:t,selectors:[["ng-icon"]],hostAttrs:["role","img"],hostVars:6,hostBindings:function(r,o){r&2&&bm("--ng-icon__stroke-width",o.strokeWidth())("--ng-icon__size",o.size())("--ng-icon__color",o.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},decls:0,vars:0,template:function(r,o){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0})}}return t})();var g3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 6 9 17l-5-5"></path></svg>';var v3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m6 9 6 6 6-6"></path></svg>';var Tue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m15 18-6-6 6-6"></path></svg>',w3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m9 18 6-6-6-6"></path></svg>',Due='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m18 15-6-6-6 6"></path></svg>';var Eue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m18 8 4 4-4 4"></path><path d="m6 8-4 4 4 4"></path><path d="M8 12h.01"></path><path d="M12 12h.01"></path><path d="M16 12h.01"></path></svg>';var Iue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><circle cx="12" cy="12" r="10"></circle></svg>';var Nue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><rect width="16" height="16" x="4" y="4" rx="2"></rect><rect width="6" height="6" x="9" y="9" rx="1"></rect><path d="M15 2v2"></path><path d="M15 20v2"></path><path d="M2 15h2"></path><path d="M2 9h2"></path><path d="M20 15h2"></path><path d="M20 9h2"></path><path d="M9 2v2"></path><path d="M9 20v2"></path></svg>';var Aue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><polyline points="15 17 20 12 15 7"></polyline><path d="M4 18v-2a4 4 0 0 1 4-4h12"></path></svg>';var yw='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg>';var Rue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M5 22h14"></path><path d="M5 2h14"></path><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"></path><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"></path></svg>';var Oue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16"></path></svg>';var Fue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m17 2 4 4-4 4"></path><path d="M3 11v-1a4 4 0 0 1 4-4h14"></path><path d="m7 22-4-4 4-4"></path><path d="M21 13v1a4 4 0 0 1-4 4H3"></path></svg>';var Pue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><polyline points="9 17 4 12 9 7"></polyline><path d="M20 18v-2a4 4 0 0 0-4-4H4"></path></svg>';var Bue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><rect width="20" height="8" x="2" y="14" rx="2"></rect><path d="M6.01 18H6"></path><path d="M10.01 18H10"></path><path d="M15 10v4"></path><path d="M17.84 7.17a4 4 0 0 0-5.66 0"></path><path d="M20.66 4.34a8 8 0 0 0-11.31 0"></path></svg>';var Lue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>';var $ue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path></svg>';var Vue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M9.3 6.2a4.55 4.55 0 0 0 5.4 0"></path><path d="M7.9 10.7c.9.8 2.4 1.3 4.1 1.3s3.2-.5 4.1-1.3"></path><path d="M13.9 3.5a1.93 1.93 0 0 0-3.8-.1l-3 10c-.1.2-.1.4-.1.6 0 1.7 2.2 3 5 3s5-1.3 5-3c0-.2 0-.4-.1-.5Z"></path><path d="m7.5 12.2-4.7 2.7c-.5.3-.8.7-.8 1.1s.3.8.8 1.1l7.6 4.5c.9.5 2.1.5 3 0l7.6-4.5c.7-.3 1-.7 1-1.1s-.3-.8-.8-1.1l-4.7-2.8"></path></svg>';var jue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path></svg>';var y3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m19 5 3-3"></path><path d="m2 22 3-3"></path><path d="M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z"></path><path d="M7.5 13.5 10 11"></path><path d="M10.5 16.5 13 14"></path><path d="m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z"></path></svg>';var x3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>';function xw(t,n=0){return zue(t)?Number(t):arguments.length===2?n:0}function zue(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Kp(t){return t instanceof Mt?t.nativeElement:t}function x$(t){return Array.isArray(t)?t:[t]}function wo(t){return t==null?"":typeof t=="string"?t:`${t}px`}var _$;try{_$=typeof Intl<"u"&&Intl.v8BreakIterator}catch{_$=!1}var ei=(()=>{class t{_platformId=I(xo);isBrowser=this._platformId?Ys(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||_$)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zp(t,n,e,r,o){let i=parseInt(O5.major),s=parseInt(O5.minor);return i>19||i===19&&s>0||i===0&&s===0?t.listen(n,e,r,o):(n.addEventListener(e,r,o),()=>{n.removeEventListener(e,r,o)})}var k$;function S$e(){if(k$==null){let t=typeof document<"u"?document.head:null;k$=!!(t&&(t.createShadowRoot||t.attachShadow))}return k$}function Hue(t){if(S$e()){let n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function _3(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function ca(t){return t.composedPath?t.composedPath()[0]:t.target}function b$(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var k3=new WeakMap,Xk=(()=>{class t{_appRef;_injector=I(Yt);_environmentInjector=I(to);load(e){let r=this._appRef=this._appRef||this._injector.get(ll),o=k3.get(r);o||(o={loaders:new Set,refs:[]},k3.set(r,o),r.onDestroy(()=>{k3.get(r)?.refs.forEach(i=>i.destroy()),k3.delete(r)})),o.loaders.has(e)||(o.loaders.add(e),o.refs.push(Z4(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Uue=new Me("cdk-dir-doc",{providedIn:"root",factory:M$e});function M$e(){return I(un)}var T$e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function D$e(t){let n=t?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?T$e.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var Ki=(()=>{class t{value="ltr";change=new Xt;constructor(){let e=I(Uue,{optional:!0});if(e){let r=e.body?e.body.dir:null,o=e.documentElement?e.documentElement.dir:null;this.value=D$e(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var u2;function Gue(){if(u2==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return u2=!1,u2;if("scrollBehavior"in document.documentElement.style)u2=!0;else{let t=Element.prototype.scrollTo;t?u2=!/\{\s*\[native code\]\s*\}/.test(t.toString()):u2=!1}}return u2}function b3(t){return t&&typeof t.connect=="function"&&!(t instanceof rh)}var d2=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(d2||{}),C$=new Me("_ViewRepeater");var Yk=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})}return t})();var Wue=20,M$=(()=>{class t{_ngZone=I(Pt);_platform=I(ei);_renderer=I(yo).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ot;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Wue){return this._platform.isBrowser?new Jt(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let o=e>0?this._scrolled.pipe(NC(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):at()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){let o=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(xn(i=>!i||o.indexOf(i)>-1))}getAncestorScrollContainers(e){let r=[];return this.scrollContainers.forEach((o,i)=>{this._scrollableContainsElement(i,e)&&r.push(i)}),r}_scrollableContainsElement(e,r){let o=Kp(r),i=e.getElementRef().nativeElement;do if(o==i)return!0;while(o=o.parentElement);return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var que=20,Cf=(()=>{class t{_platform=I(ei);_listeners;_viewportSize;_change=new ot;_document=I(un,{optional:!0});constructor(){let e=I(Pt),r=I(yo).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=i=>this._change.next(i);this._listeners=[r.listen("window","resize",o),r.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,r=this._getWindow(),o=e.documentElement,i=o.getBoundingClientRect(),s=-i.top||e.body.scrollTop||r.scrollY||o.scrollTop||0,a=-i.left||e.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:s,left:a}}change(e=que){return e>0?this._change.pipe(NC(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var S$=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})}return t})(),_w=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({imports:[Yk,S$,Yk,S$]})}return t})();var Qk=class{_attachedHost;attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},kw=class extends Qk{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(n,e,r,o,i){super(),this.component=n,this.viewContainerRef=e,this.injector=r,this.projectableNodes=i}},Xp=class extends Qk{templateRef;viewContainerRef;context;injector;constructor(n,e,r,o){super(),this.templateRef=n,this.viewContainerRef=e,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}},T$=class extends Qk{element;constructor(n){super(),this.element=n instanceof Mt?n.nativeElement:n}},bw=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof kw)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof Xp)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof T$)return this._attachedPortal=n,this.attachDomPortal(n)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var C3=class extends bw{outletElement;_appRef;_defaultInjector;_document;constructor(n,e,r,o,i){super(),this.outletElement=n,this._appRef=r,this._defaultInjector=o,this._document=i}attachComponentPortal(n){let e;if(n.viewContainerRef){let r=n.injector||n.viewContainerRef.injector,o=r.get(uc,null,{optional:!0})||void 0;e=n.viewContainerRef.createComponent(n.component,{index:n.viewContainerRef.length,injector:r,ngModuleRef:o,projectableNodes:n.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let r=this._appRef,o=n.injector||this._defaultInjector||Yt.NULL,i=o.get(to,r.injector);e=Z4(n.component,{elementInjector:o,environmentInjector:i,projectableNodes:n.projectableNodes||void 0}),r.attachView(e.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=n,e}attachTemplatePortal(n){let e=n.viewContainerRef,r=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(o=>this.outletElement.appendChild(o)),r.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(r);o!==-1&&e.remove(o)}),this._attachedPortal=n,r}attachDomPortal=n=>{let e=n.element;e.parentNode;let r=this._document.createComment("dom-portal");e.parentNode.insertBefore(r,e),this.outletElement.appendChild(e),this._attachedPortal=n,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(e,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var D$=(()=>{class t extends bw{_moduleRef=I(uc,{optional:!0});_document=I(un);_viewContainerRef=I(Br);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new Xt;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let r=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,o=r.createComponent(e.component,{index:r.length,injector:e.injector||r.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=e=>{let r=e.element;r.parentNode;let o=this._document.createComment("dom-portal");e.setAttachedHost(this),r.parentNode.insertBefore(o,r),this._getRootNode().appendChild(r),this._attachedPortal=e,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(r,o)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Mn]})}return t})();var E$=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})}return t})();var I$={},Sf=(()=>{class t{_appId=I(By);getId(e){return this._appId!=="ng"&&(e+=this._appId),I$.hasOwnProperty(e)||(I$[e]=0),`${e}${I$[e]++}`}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Jr(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var Kue=Gue(),S3=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(n,e){this._viewportRuler=n,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=wo(-this._previousScrollPosition.left),n.style.top=wo(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,e=this._document.body,r=n.style,o=e.style,i=r.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),Kue&&(r.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Kue&&(r.scrollBehavior=i,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}};var M3=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(n,e,r,o){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=r,this._config=o}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(xn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},Jk=class{enable(){}disable(){}attach(){}};function N$(t,n){return n.some(e=>{let r=t.bottom<e.top,o=t.top>e.bottom,i=t.right<e.left,s=t.left>e.right;return r||o||i||s})}function Zue(t,n){return n.some(e=>{let r=t.top<e.top,o=t.bottom>e.bottom,i=t.left<e.left,s=t.right>e.right;return r||o||i||s})}var T3=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(n,e,r,o){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=r,this._config=o}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:o}=this._viewportRuler.getViewportSize();N$(e,[{width:r,height:o,bottom:o,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},tb=(()=>{class t{_scrollDispatcher=I(M$);_viewportRuler=I(Cf);_ngZone=I(Pt);_document=I(un);constructor(){}noop=()=>new Jk;close=e=>new M3(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new S3(this._viewportRuler,this._document);reposition=e=>new T3(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$u=class{positionStrategy;scrollStrategy=new Jk;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(n){if(n){let e=Object.keys(n);for(let r of e)n[r]!==void 0&&(this[r]=n[r])}}};var D3=class{connectionPair;scrollableViewProperties;constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}};var tde=(()=>{class t{_attachedOverlays=[];_document=I(un);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nde=(()=>{class t extends tde{_ngZone=I(Pt);_renderer=I(yo).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[o]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rde=(()=>{class t extends tde{_platform=I(ei);_ngZone=I(Pt);_renderer=I(yo).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let r=this._document.body,o={capture:!0};this._cleanups=this._ngZone.runOutsideAngular(()=>[Zp(this._renderer,r,"pointerdown",this._pointerDownListener,o),Zp(this._renderer,r,"click",this._clickListener,o),Zp(this._renderer,r,"auxclick",this._clickListener,o),Zp(this._renderer,r,"contextmenu",this._clickListener,o)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=ca(e)};_clickListener=e=>{let r=ca(e),o=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){let a=i[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Xue(a.overlayElement,r)||Xue(a.overlayElement,o))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Xue(t,n){let e=typeof ShadowRoot<"u"&&ShadowRoot,r=n;for(;r;){if(r===t)return!0;r=e&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var ode=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,o){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return t})(),nb=(()=>{class t{_platform=I(ei);_containerElement;_document=I(un);_styleLoader=I(Xk);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||b$()){let o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let i=0;i<o.length;i++)o[i].remove()}let r=this._document.createElement("div");r.classList.add(e),b$()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(ode)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),A$=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(n,e,r,o){this._renderer=e,this._ngZone=r,this.element=n.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",o)}detach(){this._ngZone.runOutsideAngular(()=>{let n=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(n,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),n.style.pointerEvents="none",n.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},h2=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ot;_attachments=new ot;_detachments=new ot;_positionStrategy;_scrollStrategy;_locationChanges=On.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new ot;_outsidePointerEvents=new ot;_renders=new ot;_afterRenderRef;_afterNextRenderRef;constructor(n,e,r,o,i,s,a,l,c,u=!1,d,p){this._portalOutlet=n,this._host=e,this._pane=r,this._config=o,this._ngZone=i,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=p,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy,this._afterRenderRef=Un(()=>c5(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=wi(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=ue(ue({},this._config),n),this._updateElementSize()}setDirection(n){this._config=pt(ue({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=wo(this._config.width),n.height=wo(this._config.height),n.minWidth=wo(this._config.minWidth),n.minHeight=wo(this._config.minHeight),n.maxWidth=wo(this._config.maxWidth),n.maxHeight=wo(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new A$(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(n))}):this._backdropRef.element.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(n,e,r){let o=x$(e||[]).filter(i=>!!i);o.length&&(r?n.classList.add(...o):n.classList.remove(...o))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let n=this._renders.pipe(en(nc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){let n=this._scrollStrategy;n?.disable(),n?.detach?.()}},Yue="cdk-overlay-connected-position-bounding-box",E$e=/([A-Za-z%]+)$/,E3=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ot;_resizeSubscription=On.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(n,e,r,o,i){this._viewportRuler=e,this._document=r,this._platform=o,this._overlayContainer=i,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(Yue),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,e=this._overlayRect,r=this._viewportRect,o=this._containerRect,i=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(n,o,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,r)){i.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(i.length){let a=null,l=-1;for(let c of i){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&p2(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Yue),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,r){let o;if(r.originX=="center")o=n.left+n.width/2;else{let s=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;o=r.originX=="start"?s:a}e.left<0&&(o-=e.left);let i;return r.originY=="center"?i=n.top+n.height/2:i=r.originY=="top"?n.top:n.bottom,e.top<0&&(i-=e.top),{x:o,y:i}}_getOverlayPoint(n,e,r){let o;r.overlayX=="center"?o=-e.width/2:r.overlayX==="start"?o=this._isRtl()?-e.width:0:o=this._isRtl()?0:-e.width;let i;return r.overlayY=="center"?i=-e.height/2:i=r.overlayY=="top"?0:-e.height,{x:n.x+o,y:n.y+i}}_getOverlayFit(n,e,r,o){let i=Jue(e),{x:s,y:a}=n,l=this._getOffset(o,"x"),c=this._getOffset(o,"y");l&&(s+=l),c&&(a+=c);let u=0-s,d=s+i.width-r.width,p=0-a,h=a+i.height-r.height,f=this._subtractOverflows(i.width,u,d),m=this._subtractOverflows(i.height,p,h),g=f*m;return{visibleArea:g,isCompletelyWithinViewport:i.width*i.height===g,fitsInViewportVertically:m===i.height,fitsInViewportHorizontally:f==i.width}}_canFitWithFlexibleDimensions(n,e,r){if(this._hasFlexibleDimensions){let o=r.bottom-e.y,i=r.right-e.x,s=Que(this._overlayRef.getConfig().minHeight),a=Que(this._overlayRef.getConfig().minWidth),l=n.fitsInViewportVertically||s!=null&&s<=o,c=n.fitsInViewportHorizontally||a!=null&&a<=i;return l&&c}return!1}_pushOverlayOnScreen(n,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let o=Jue(e),i=this._viewportRect,s=Math.max(n.x+o.width-i.width,0),a=Math.max(n.y+o.height-i.height,0),l=Math.max(i.top-r.top-n.y,0),c=Math.max(i.left-r.left-n.x,0),u=0,d=0;return o.width<=i.width?u=c||-s:u=n.x<this._viewportMargin?i.left-r.left-n.x:0,o.height<=i.height?d=l||-a:d=n.y<this._viewportMargin?i.top-r.top-n.y:0,this._previousPushAmount={x:u,y:d},{x:n.x+u,y:n.y+d}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!I$e(this._lastScrollVisibility,r)){let o=new D3(n,r);this._positionChanges.next(o)}this._lastScrollVisibility=r}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,o=n.overlayY;n.overlayX==="center"?r="center":this._isRtl()?r=n.overlayX==="start"?"right":"left":r=n.overlayX==="start"?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${r} ${o}`}_calculateBoundingBoxRect(n,e){let r=this._viewportRect,o=this._isRtl(),i,s,a;if(e.overlayY==="top")s=n.y,i=r.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=r.height-n.y+this._viewportMargin*2,i=r.height-a+this._viewportMargin;else{let h=Math.min(r.bottom-n.y+r.top,n.y),f=this._lastBoundingBoxSize.height;i=h*2,s=n.y-h,i>f&&!this._isInitialRender&&!this._growAfterOpen&&(s=n.y-f/2)}let l=e.overlayX==="start"&&!o||e.overlayX==="end"&&o,c=e.overlayX==="end"&&!o||e.overlayX==="start"&&o,u,d,p;if(c)p=r.width-n.x+this._viewportMargin*2,u=n.x-this._viewportMargin;else if(l)d=n.x,u=r.right-n.x;else{let h=Math.min(r.right-n.x+r.left,n.x),f=this._lastBoundingBoxSize.width;u=h*2,d=n.x-h,u>f&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.x-f/2)}return{top:s,left:d,bottom:a,right:p,width:u,height:i}}_setBoundingBoxStyles(n,e){let r=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=wo(r.height),o.top=wo(r.top),o.bottom=wo(r.bottom),o.width=wo(r.width),o.left=wo(r.left),o.right=wo(r.right),e.overlayX==="center"?o.alignItems="center":o.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?o.justifyContent="center":o.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",i&&(o.maxHeight=wo(i)),s&&(o.maxWidth=wo(s))}this._lastBoundingBoxSize=r,p2(this._boundingBox.style,o)}_resetBoundingBoxStyles(){p2(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){p2(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){let r={},o=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let u=this._viewportRuler.getViewportScrollPosition();p2(r,this._getExactOverlayY(e,n,u)),p2(r,this._getExactOverlayX(e,n,u))}else r.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(o?r.maxHeight=wo(s.maxHeight):i&&(r.maxHeight="")),s.maxWidth&&(o?r.maxWidth=wo(s.maxWidth):i&&(r.maxWidth="")),p2(this._pane.style,r)}_getExactOverlayY(n,e,r){let o={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,n);if(this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r)),n.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(i.y+this._overlayRect.height)}px`}else o.top=wo(i.y);return o}_getExactOverlayX(n,e,r){let o={left:"",right:""},i=this._getOverlayPoint(e,this._overlayRect,n);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r));let s;if(this._isRtl()?s=n.overlayX==="end"?"left":"right":s=n.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;o.right=`${a-(i.x+this._overlayRect.width)}px`}else o.left=wo(i.x);return o}_getScrollVisibility(){let n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Zue(n,r),isOriginOutsideView:N$(n,r),isOverlayClipped:Zue(e,r),isOverlayOutsideView:N$(e,r)}}_subtractOverflows(n,...e){return e.reduce((r,o)=>r-Math.max(o,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+n-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return e==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&x$(n).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof Mt)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let e=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+e,height:r,width:e}}};function p2(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function Que(t){if(typeof t!="number"&&t!=null){let[n,e]=t.split(E$e);return!e||e==="px"?parseFloat(n):null}return t||null}function Jue(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function I$e(t,n){return t===n?!0:t.isOriginClipped===n.isOriginClipped&&t.isOriginOutsideView===n.isOriginOutsideView&&t.isOverlayClipped===n.isOverlayClipped&&t.isOverlayOutsideView===n.isOverlayOutsideView}var N3=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],O$=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}],ede="cdk-global-overlay-wrapper",I3=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(n){let e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(ede),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:o,height:i,maxWidth:s,maxHeight:a}=r,l=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(i==="100%"||i==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",h="",f="",m="";l?m="flex-start":u==="center"?(m="center",p?f=d:h=d):p?u==="left"||u==="end"?(m="flex-end",h=d):(u==="right"||u==="start")&&(m="flex-start",f=d):u==="left"||u==="start"?(m="flex-start",h=d):(u==="right"||u==="end")&&(m="flex-end",f=d),n.position=this._cssPosition,n.marginLeft=l?"0":h,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":f,e.justifyContent=m,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(ede),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},rb=(()=>{class t{_viewportRuler=I(Cf);_document=I(un);_platform=I(ei);_overlayContainer=I(nb);constructor(){}global(){return new I3}flexibleConnectedTo(e){return new E3(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ka=(()=>{class t{scrollStrategies=I(tb);_overlayContainer=I(nb);_positionBuilder=I(rb);_keyboardDispatcher=I(nde);_injector=I(Yt);_ngZone=I(Pt);_document=I(un);_directionality=I(Ki);_location=I(hc);_outsideClickDispatcher=I(rde);_animationsModuleType=I(ym,{optional:!0});_idGenerator=I(Sf);_renderer=I(yo).createRenderer(null,null);_appRef;_styleLoader=I(Xk);constructor(){}create(e){this._styleLoader.load(ode);let r=this._createHostElement(),o=this._createPaneElement(r),i=this._createPortalOutlet(o),s=new $u(e);return s.direction=s.direction||this._directionality.value,new h2(i,r,o,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(to),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){let r=this._document.createElement("div");return r.id=this._idGenerator.getId("cdk-overlay-"),r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ll)),new C3(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),N$e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],ide=new Me("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=I(Ka);return()=>t.scrollStrategies.reposition()}}),eb=(()=>{class t{elementRef=I(Mt);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),Cw=(()=>{class t{_overlay=I(Ka);_dir=I(Ki,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=On.EMPTY;_attachSubscription=On.EMPTY;_detachSubscription=On.EMPTY;_positionSubscription=On.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=I(ide);_disposeOnNavigation=!1;_ngZone=I(Pt);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new Xt;positionChange=new Xt;attach=new Xt;detach=new Xt;overlayKeydown=new Xt;overlayOutsideClick=new Xt;constructor(){let e=I(er),r=I(Br);this._templatePortal=new Xp(e,r),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=N$e);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),r.keyCode===27&&!this.disableClose&&!Jr(r)&&(r.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{let o=this._getOriginElement(),i=ca(r);(!o||o!==i&&!o.contains(i))&&this.overlayOutsideClick.next(r)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),r=new $u({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(r.width=this.width),(this.height||this.height===0)&&(r.height=this.height),(this.minWidth||this.minWidth===0)&&(r.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(e){let r=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof eb?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof eb?this.origin.elementRef.nativeElement:this.origin instanceof Mt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(gA(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",rt],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",rt],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",rt],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",rt],push:[2,"cdkConnectedOverlayPush","push",rt],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",rt]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[uo]})}return t})();function A$e(t){return()=>t.scrollStrategies.reposition()}var R$e={provide:ide,deps:[Ka],useFactory:A$e},ob=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({providers:[Ka,R$e],imports:[Yk,E$,_w,_w]})}return t})();function sde(t){return t.buttons===0||t.detail===0}function ade(t){let n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var ib;function lde(){if(ib==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ib=!0}))}finally{ib=ib||!1}return ib}function sb(t){return lde()?t:!!t.capture}var cde=new Me("cdk-input-modality-detector-options"),ude={ignoreKeys:[18,17,224,91,16]},dde=650,F$={passive:!0,capture:!0},lb=(()=>{class t{_platform=I(ei);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Kn(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(r=>r===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ca(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<dde||(this._modality.next(sde(e)?"keyboard":"mouse"),this._mostRecentTarget=ca(e))};_onTouchstart=e=>{if(ade(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ca(e)};constructor(){let e=I(Pt),r=I(un),o=I(cde,{optional:!0});if(this._options=ue(ue({},ude),o),this.modalityDetected=this._modality.pipe(nm(1)),this.modalityChanged=this.modalityDetected.pipe(L2()),this._platform.isBrowser){let i=I(yo).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[Zp(i,r,"keydown",this._onKeydown,F$),Zp(i,r,"mousedown",this._onMousedown,F$),Zp(i,r,"touchstart",this._onTouchstart,F$)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ab=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(ab||{}),pde=new Me("cdk-focus-monitor-default-options"),A3=sb({passive:!0,capture:!0}),f2=(()=>{class t{_ngZone=I(Pt);_platform=I(ei);_inputModalityDetector=I(lb);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=I(un,{optional:!0});_stopInputModalityDetector=new ot;constructor(){let e=I(pde,{optional:!0});this._detectionMode=e?.detectionMode||ab.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let r=ca(e);for(let o=r;o;o=o.parentElement)e.type==="focus"?this._onFocus(e,o):this._onBlur(e,o)};monitor(e,r=!1){let o=Kp(e);if(!this._platform.isBrowser||o.nodeType!==1)return at();let i=Hue(o)||this._getDocument(),s=this._elementInfo.get(o);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new ot,rootNode:i};return this._elementInfo.set(o,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let r=Kp(e),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(e,r,o){let i=Kp(e),s=this._getDocument().activeElement;i===s?this._getClosestElementsInfo(i).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),typeof i.focus=="function"&&i.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===ab.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused",r==="touch"),e.classList.toggle("cdk-keyboard-focused",r==="keyboard"),e.classList.toggle("cdk-mouse-focused",r==="mouse"),e.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&r,this._detectionMode===ab.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?dde:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(e,r){let o=this._elementInfo.get(r),i=ca(e);!o||!o.checkChildren&&r!==i||this._originChanged(r,this._getFocusOrigin(i),o)}_onBlur(e,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let r=e.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,A3),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,A3)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(en(this._stopInputModalityDetector)).subscribe(i=>{this._setOrigin(i,!0)}))}_removeGlobalListeners(e){let r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,A3),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,A3),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,o){this._setClasses(e,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){let r=[];return this._elementInfo.forEach((o,i)=>{(i===e||o.checkChildren&&i.contains(e))&&r.push([i,o])}),r}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let i=e.labels;if(i){for(let s=0;s<i.length;s++)if(i[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var hde=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,o){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return t})();function F$e(t){if(t.type==="characterData"&&t.target instanceof Comment)return!0;if(t.type==="childList"){for(let n=0;n<t.addedNodes.length;n++)if(!(t.addedNodes[n]instanceof Comment))return!1;for(let n=0;n<t.removedNodes.length;n++)if(!(t.removedNodes[n]instanceof Comment))return!1;return!0}return!1}var fde=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mde=(()=>{class t{_mutationObserverFactory=I(fde);_observedElements=new Map;_ngZone=I(Pt);constructor(){}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){let r=Kp(e);return new Jt(o=>{let s=this._observeElement(r).pipe(It(a=>a.filter(l=>!F$e(l))),xn(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{o.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(e))this._observedElements.get(e).count++;else{let r=new ot,o=this._mutationObserverFactory.create(i=>r.next(i));o&&o.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:o,stream:r,count:1})}return this._observedElements.get(e).stream})}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){let{observer:r,stream:o}=this._observedElements.get(e);r&&r.disconnect(),o.complete(),this._observedElements.delete(e)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),P$=(()=>{class t{_contentObserver=I(mde);_elementRef=I(Mt);event=new Xt;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(e){this._debounce=xw(e),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let e=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?e.pipe(fa(this.debounce)):e).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",rt],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return t})();var L$=(()=>{class t{_platform=I(ei);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return B$e(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let r=P$e(G$e(e));if(r&&(gde(r)===-1||!this.isVisible(r)))return!1;let o=e.nodeName.toLowerCase(),i=gde(e);return e.hasAttribute("contenteditable")?i!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!H$e(e)?!1:o==="audio"?e.hasAttribute("controls")?i!==-1:!1:o==="video"?i===-1?!1:i!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,r){return U$e(e)&&!this.isDisabled(e)&&(r?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function P$e(t){try{return t.frameElement}catch{return null}}function B$e(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function L$e(t){let n=t.nodeName.toLowerCase();return n==="input"||n==="select"||n==="button"||n==="textarea"}function $$e(t){return j$e(t)&&t.type=="hidden"}function V$e(t){return z$e(t)&&t.hasAttribute("href")}function j$e(t){return t.nodeName.toLowerCase()=="input"}function z$e(t){return t.nodeName.toLowerCase()=="a"}function vde(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let n=t.getAttribute("tabindex");return!!(n&&!isNaN(parseInt(n,10)))}function gde(t){if(!vde(t))return null;let n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}function H$e(t){let n=t.nodeName.toLowerCase(),e=n==="input"&&t.type;return e==="text"||e==="password"||n==="select"||n==="textarea"}function U$e(t){return $$e(t)?!1:L$e(t)||V$e(t)||t.hasAttribute("contenteditable")||vde(t)}function G$e(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var B$=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_enabled=!0;constructor(n,e,r,o,i=!1,s){this._element=n,this._checker=e,this._ngZone=r,this._document=o,this._injector=s,i||this.attachAnchors()}destroy(){let n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){let e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return n=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let r=this._getFirstTabbableElement(e);return r?.focus(n),!!r}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){let e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){let e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let r=0;r<e.length;r++){let o=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(o)return o}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let r=e.length-1;r>=0;r--){let o=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(o)return o}return null}_createAnchor(){let n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?wi(n,{injector:this._injector}):setTimeout(n)}},wde=(()=>{class t{_checker=I(L$);_ngZone=I(Pt);_document=I(un);_injector=I(Yt);constructor(){I(Xk).load(hde)}create(e,r=!1){return new B$(e,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function W$e(t,n){}var Sw=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var q$e=(()=>{class t extends bw{_elementRef=I(Mt);_focusTrapFactory=I(wde);_config;_interactivityChecker=I(L$);_ngZone=I(Pt);_overlayRef=I(h2);_focusMonitor=I(f2);_renderer=I(po);_platform=I(ei);_document=I(un,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=I(Lr);_injector=I(Yt);_isDestroyed=!1;constructor(){super(),this._config=I(Sw,{optional:!0})||new Sw,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let r=this._ariaLabelledByQueue.indexOf(e);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),r}attachTemplatePortal(e){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),r}attachDomPortal=e=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i(),s(),e.removeAttribute("tabindex")},i=this._renderer.listen(e,"blur",o),s=this._renderer.listen(e,"mousedown",o)})),e.focus(r)}_focusByCssSelector(e,r){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,r)}_trapFocus(){this._isDestroyed||wi(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,r=null;if(typeof e=="string"?r=this._document.querySelector(e):typeof e=="boolean"?r=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(r=e),this._config.restoreFocus&&r&&typeof r.focus=="function"){let o=_3(),i=this._elementRef.nativeElement;(!o||o===this._document.body||o===i||i.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,r=_3();return e===r||e.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=_3()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(r&1&&Mm(D$,7),r&2){let i;Mr(i=Tr())&&(o._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){r&2&&At("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Mn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){r&1&&lt(0,W$e,0,0,"ng-template",0)},dependencies:[D$],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})(),cb=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new ot;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,e){this.overlayRef=n,this.config=e,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!Jr(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(n,e){if(this.containerInstance){let r=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(n),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},K$e=new Me("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=I(Ka);return()=>t.scrollStrategies.block()}}),V$=new Me("DialogData"),Z$e=new Me("DefaultDialogConfig");var yde=(()=>{class t{_overlay=I(Ka);_injector=I(Yt);_defaultOptions=I(Z$e,{optional:!0});_parentDialog=I(t,{optional:!0,skipSelf:!0});_overlayContainer=I(nb);_idGenerator=I(Sf);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ot;_afterOpenedAtThisLevel=new ot;_ariaHiddenElements=new Map;_scrollStrategy=I(K$e);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=td(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ma(void 0)));constructor(){}open(e,r){let o=this._defaultOptions||new Sw;r=ue(ue({},o),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let i=this._getOverlayConfig(r),s=this._overlay.create(i),a=new cb(s,r),l=this._attachContainer(s,a,r);return a.containerInstance=l,this._attachDialogContent(e,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){$$(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){$$(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),$$(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let r=new $u({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(r.backdropClass=e.backdropClass),r}_attachContainer(e,r,o){let i=o.injector||o.viewContainerRef?.injector,s=[{provide:Sw,useValue:o},{provide:cb,useValue:r},{provide:h2,useValue:e}],a;o.container?typeof o.container=="function"?a=o.container:(a=o.container.type,s.push(...o.container.providers(o))):a=q$e;let l=new kw(a,o.viewContainerRef,Yt.create({parent:i||this._injector,providers:s}));return e.attach(l).instance}_attachDialogContent(e,r,o,i){if(e instanceof er){let s=this._createInjector(i,r,o,void 0),a={$implicit:i.data,dialogRef:r};i.templateContext&&(a=ue(ue({},a),typeof i.templateContext=="function"?i.templateContext():i.templateContext)),o.attachTemplatePortal(new Xp(e,null,a,s))}else{let s=this._createInjector(i,r,o,this._injector),a=o.attachComponentPortal(new kw(e,i.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(e,r,o,i){let s=e.injector||e.viewContainerRef?.injector,a=[{provide:V$,useValue:e.data},{provide:cb,useValue:r}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(r,e,o)):a.push(...e.providers)),e.direction&&(!s||!s.get(Ki,null,{optional:!0}))&&a.push({provide:Ki,useValue:{value:e.direction,change:at()}}),Yt.create({parent:s||i,providers:a})}_removeOpenDialog(e,r){let o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let r=e.parentElement.children;for(let o=r.length-1;o>-1;o--){let i=r[o];i!==e&&i.nodeName!=="SCRIPT"&&i.nodeName!=="STYLE"&&!i.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $$(t,n){let e=t.length;for(;e--;)n(t[e])}var X$e=["*"],Mw=(t,n="")=>{if(typeof t=="string"){let e=t.trim().split(" ");return e.length===0?[n]:e}return t??[]},ms=class{_cdkDialogRef;_open;state;dialogId;_options;_closing$=new ot;closing$=this._closing$.asObservable();closed$;_previousTimeout;get open(){return this.state()==="open"}constructor(n,e,r,o,i){this._cdkDialogRef=n,this._open=e,this.state=r,this.dialogId=o,this._options=i,this.closed$=this._cdkDialogRef.closed.pipe(eo(1))}close(n,e=this._options?.closeDelay??0){!this.open||this._options?.disableClose||(this._closing$.next(),this._open.set(!1),this._previousTimeout&&clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._cdkDialogRef.close(n)},e))}setPanelClass(n){this._cdkDialogRef.config.panelClass=Mw(n)}setOverlayClass(n){this._cdkDialogRef.config.backdropClass=Mw(n)}setAriaDescribedBy(n){this._cdkDialogRef.config.ariaDescribedBy=n}setAriaLabelledBy(n){this._cdkDialogRef.config.ariaLabelledBy=n}setAriaLabel(n){this._cdkDialogRef.config.ariaLabel=n}},xde=(()=>{class t{_brnDialogRef=I(ms);delay=Y(void 0,{transform:xw});close(){this._brnDialogRef.close(void 0,this.delay())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["button","brnDialogClose",""]],hostBindings:function(r,o){r&1&&je("click",function(){return o.close()})},inputs:{delay:[1,"delay"]}})}return t})(),j$={attachPositions:[],autoFocus:"first-tabbable",closeDelay:100,closeOnBackdropClick:!0,closeOnOutsidePointerEvents:!1,disableClose:!1,hasBackdrop:!0,positionStrategy:null,restoreFocus:!0,role:"dialog",scrollStrategy:null},_de=new Me("brn-dialog-default-options",{providedIn:"root",factory:()=>j$});function kde(t){return{provide:_de,useValue:ue(ue({},j$),t)}}function Y$e(){return I(_de,{optional:!0})??j$}var Q$e=0;var Vu=(t={})=>I(V$,t),z$=(()=>{class t{_cdkDialog=I(yde);_rendererFactory=I(yo);_renderer=this._rendererFactory.createRenderer(null,null);_positionBuilder=I(rb);_sso=I(tb);_injector=I(Yt);open(e,r,o,i){if(i?.id&&this._cdkDialog.getDialogById(i.id))throw new Error(`Dialog with ID: ${i.id} already exists`);let s=i?.positionStrategy??(i?.attachTo&&i?.attachPositions&&i?.attachPositions?.length>0?this._positionBuilder?.flexibleConnectedTo(i.attachTo).withPositions(i.attachPositions??[]):this._positionBuilder.global().centerHorizontally().centerVertically()),a,l,c=pt(ue({},o),{close:(v=void 0)=>a.close(v,i?.closeDelay)}),u=new ot,d=Ye(!0),p=ae(()=>d()?"open":"closed"),h=Q$e++,f=this._cdkDialog.open(e,{id:i?.id??`brn-dialog-${h}`,role:i?.role,viewContainerRef:r,templateContext:()=>({$implicit:c}),data:c,hasBackdrop:i?.hasBackdrop,panelClass:Mw(i?.panelClass),backdropClass:Mw(i?.backdropClass,"bg-transparent"),positionStrategy:s,scrollStrategy:i?.scrollStrategy??this._sso?.block(),restoreFocus:i?.restoreFocus,disableClose:!0,autoFocus:i?.autoFocus??"first-tabbable",ariaDescribedBy:i?.ariaDescribedBy??`brn-dialog-description-${h}`,ariaLabelledBy:i?.ariaLabelledBy??`brn-dialog-title-${h}`,ariaLabel:i?.ariaLabel,ariaModal:i?.ariaModal,providers:v=>{a=new ms(v,d,p,h,i),Vo(this._injector,()=>{l=Gt(()=>{m&&this._renderer.setAttribute(m,"data-state",p()),g&&this._renderer.setAttribute(g,"data-state",p())})});let w=[{provide:ms,useValue:a}];return i?.providers&&(typeof i.providers=="function"&&w.push(...i.providers()),Array.isArray(i.providers)&&w.push(...i.providers)),w}}),m=f.overlayRef.overlayElement,g=f.overlayRef.backdropElement;return i?.closeOnOutsidePointerEvents&&f.outsidePointerEvents.pipe(en(u)).subscribe(()=>{a.close(void 0,i?.closeDelay)}),i?.closeOnBackdropClick&&f.backdropClick.pipe(en(u)).subscribe(()=>{a.close(void 0,i?.closeDelay)}),i?.disableClose||f.keydownEvents.pipe(xn(v=>v.key==="Escape"),en(u)).subscribe(()=>{a.close(void 0,i?.closeDelay)}),f.closed.pipe(en(u)).subscribe(()=>{l?.destroy(),u.next()}),a}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),R3=(()=>{class t{_dialogService=I(z$);_vcr=I(Br);positionBuilder=I(rb);ssos=I(tb);_injector=I(Yt);_defaultOptions=Y$e();_context={};stateComputed=ae(()=>this._dialogRef()?.state()??"closed");_contentTemplate;_dialogRef=Ye(void 0);_dialogStateEffectRef;_backdropClass=Ye(null);_panelClass=Ye(null);closed=$n();stateChanged=$n();state=Y(null);role=Y(this._defaultOptions.role);hasBackdrop=Y(this._defaultOptions.hasBackdrop,{transform:rt});positionStrategy=Y(this._defaultOptions.positionStrategy);mutablePositionStrategy=ae(()=>Ye(this.positionStrategy()));_positionStrategyState=ae(()=>this.mutablePositionStrategy()());scrollStrategy=Y(this._defaultOptions.scrollStrategy);_options=ae(()=>{let e=this.scrollStrategy(),r;return e==="close"?r=this.ssos.close():e==="reposition"?r=this.ssos.reposition():r=e,{role:this.role(),hasBackdrop:this.hasBackdrop(),positionStrategy:this._positionStrategyState(),scrollStrategy:r,restoreFocus:this.restoreFocus(),closeOnOutsidePointerEvents:this._closeOnOutsidePointerEventsState(),closeOnBackdropClick:this.closeOnBackdropClick(),attachTo:this._attachToState(),attachPositions:this._attachPositionsState(),autoFocus:this.autoFocus(),closeDelay:this.closeDelay(),disableClose:this.disableClose(),backdropClass:this._backdropClass()??"",panelClass:this._panelClass()??"",ariaDescribedBy:this._ariaDescribedByState(),ariaLabelledBy:this._ariaLabelledByState(),ariaLabel:this._ariaLabelState(),ariaModal:this._ariaModalState()}});constructor(){Gt(()=>{let e=this.state();e==="open"&&Un(()=>this.open()),e==="closed"&&Un(()=>this.close())})}restoreFocus=Y(this._defaultOptions.restoreFocus);closeOnOutsidePointerEvents=Y(this._defaultOptions.closeOnOutsidePointerEvents,{transform:rt});mutableCloseOnOutsidePointerEvents=ae(()=>Ye(this.closeOnOutsidePointerEvents()));_closeOnOutsidePointerEventsState=ae(()=>this.mutableCloseOnOutsidePointerEvents()());closeOnBackdropClick=Y(this._defaultOptions.closeOnBackdropClick,{transform:rt});attachTo=Y(null);mutableAttachTo=ae(()=>Ye(this.attachTo()));_attachToState=ae(()=>this.mutableAttachTo()());attachPositions=Y(this._defaultOptions.attachPositions);mutableAttachPositions=ae(()=>Ye(this.attachPositions()));_attachPositionsState=ae(()=>this.mutableAttachPositions()());autoFocus=Y(this._defaultOptions.autoFocus);closeDelay=Y(this._defaultOptions.closeDelay,{transform:Xs});disableClose=Y(this._defaultOptions.disableClose,{transform:rt});ariaDescribedBy=Y(null,{alias:"aria-describedby"});_mutableAriaDescribedBy=ae(()=>Ye(this.ariaDescribedBy()));_ariaDescribedByState=ae(()=>this._mutableAriaDescribedBy()());ariaLabelledBy=Y(null,{alias:"aria-labelledby"});_mutableAriaLabelledBy=ae(()=>Ye(this.ariaLabelledBy()));_ariaLabelledByState=ae(()=>this._mutableAriaLabelledBy()());ariaLabel=Y(null,{alias:"aria-label"});_mutableAriaLabel=ae(()=>Ye(this.ariaLabel()));_ariaLabelState=ae(()=>this._mutableAriaLabel()());ariaModal=Y(!0,{alias:"aria-modal",transform:rt});_mutableAriaModal=ae(()=>Ye(this.ariaModal()));_ariaModalState=ae(()=>this._mutableAriaModal()());open(){if(!this._contentTemplate||this._dialogRef())return;this._dialogStateEffectRef?.destroy();let e=this._dialogService.open(this._contentTemplate,this._vcr,this._context,this._options());this._dialogRef.set(e),Vo(this._injector,()=>{this._dialogStateEffectRef=Gt(()=>{let r=e.state();Un(()=>this.stateChanged.emit(r))})}),e.closed$.pipe(eo(1)).subscribe(r=>{this._dialogRef.set(void 0),this.closed.emit(r)})}close(e,r){this._dialogRef()?.close(e,r??this._options().closeDelay)}registerTemplate(e){this._contentTemplate=e}setOverlayClass(e){this._backdropClass.set(e),this._dialogRef()?.setOverlayClass(e)}setPanelClass(e){this._panelClass.set(e??""),this._dialogRef()?.setPanelClass(e)}setContext(e){this._context=ue(ue({},this._context),e)}setAriaDescribedBy(e){this._mutableAriaDescribedBy().set(e),this._dialogRef()?.setAriaDescribedBy(e)}setAriaLabelledBy(e){this._mutableAriaLabelledBy().set(e),this._dialogRef()?.setAriaLabelledBy(e)}setAriaLabel(e){this._mutableAriaLabel().set(e),this._dialogRef()?.setAriaLabel(e)}setAriaModal(e){this._mutableAriaModal().set(e)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-dialog"]],inputs:{state:[1,"state"],role:[1,"role"],hasBackdrop:[1,"hasBackdrop"],positionStrategy:[1,"positionStrategy"],scrollStrategy:[1,"scrollStrategy"],restoreFocus:[1,"restoreFocus"],closeOnOutsidePointerEvents:[1,"closeOnOutsidePointerEvents"],closeOnBackdropClick:[1,"closeOnBackdropClick"],attachTo:[1,"attachTo"],attachPositions:[1,"attachPositions"],autoFocus:[1,"autoFocus"],closeDelay:[1,"closeDelay"],disableClose:[1,"disableClose"],ariaDescribedBy:[1,"aria-describedby","ariaDescribedBy"],ariaLabelledBy:[1,"aria-labelledby","ariaLabelledBy"],ariaLabel:[1,"aria-label","ariaLabel"],ariaModal:[1,"aria-modal","ariaModal"]},outputs:{closed:"closed",stateChanged:"stateChanged"},exportAs:["brnDialog"],ngContentSelectors:X$e,decls:1,vars:0,template:function(r,o){r&1&&(Rt(),it(0))},encapsulation:2,changeDetection:0})}return t})();var bde=(()=>{class t{_brnDialogRef=I(ms);_id=Ye(`brn-dialog-description-${this._brnDialogRef?.dialogId}`);constructor(){Gt(()=>{this._brnDialogRef.setAriaDescribedBy(this._id())})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnDialogDescription",""]],hostVars:1,hostBindings:function(r,o){r&2&&Gr("id",o._id())}})}return t})(),Cde=(()=>{class t{_brnDialog=I(R3);className=Y(void 0,{alias:"class"});setClassToCustomElement(e){this._brnDialog.setOverlayClass(e)}constructor(){Gt(()=>{if(!this._brnDialog)return;let e=this.className();Un(()=>this._brnDialog.setOverlayClass(e))})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-dialog-overlay"]],inputs:{className:[1,"class","className"]},features:[ht([_ue(()=>t)])],decls:0,vars:0,template:function(r,o){},encapsulation:2,changeDetection:0})}return t})(),Sde=(()=>{class t{_brnDialogRef=I(ms);_id=Ye(`brn-dialog-title-${this._brnDialogRef?.dialogId}`);constructor(){Gt(()=>{this._brnDialogRef.setAriaLabelledBy(this._id())})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnDialogTitle",""]],hostVars:1,hostBindings:function(r,o){r&2&&Gr("id",o._id())}})}return t})();var Mde={role:"dialog",attachPositions:[],attachTo:null,autoFocus:"first-tabbable",backdropClass:"",closeDelay:100,closeOnBackdropClick:!0,closeOnOutsidePointerEvents:!1,hasBackdrop:!0,panelClass:"",positionStrategy:null,restoreFocus:!0,scrollStrategy:null,disableClose:!1,ariaLabel:void 0,ariaModal:!0};var Dde={size:"base"},Ede=new Me("HlmIconConfig");function Ide(t){return{provide:Ede,useValue:ue(ue({},Dde),t)}}function Nde(){return I(Ede,{optional:!0})??Dde}var ao=class t{_config=Nde();size=Y(this._config.size);_computedSize=ae(()=>{let n=this.size();switch(n){case"xs":return"12px";case"sm":return"16px";case"base":return"24px";case"lg":return"32px";case"xl":return"48px";default:return n}});static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["ng-icon","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&bm("--ng-icon__size",r._computedSize())},inputs:{size:[1,"size"]}})};var J$e=["*"];function eVe(t,n){if(t&1&&wr(0,0),t&2){let e=be();Be("ngComponentOutlet",e.component)}}function tVe(t,n){t&1&&it(0)}var ub=class t{_dialogRef=I(ms);_dialogContext=Vu({optional:!0});state=ae(()=>this._dialogRef?.state()??"closed");component=this._dialogContext?.$component;_dynamicComponentClass=this._dialogContext?.$dynamicComponentClass;userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("border-border grid w-full max-w-lg relative gap-4 border bg-background p-6 shadow-lg [animation-duration:200] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[2%]  data-[state=open]:slide-in-from-top-[2%] sm:rounded-lg md:w-full",this.userClass(),this._dynamicComponentClass));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-dialog-content"]],hostVars:3,hostBindings:function(e,r){e&2&&(At("data-state",r.state()),Ve(r._computedClass()))},inputs:{userClass:[1,"class","userClass"]},features:[ht([ir({lucideX:x3})])],ngContentSelectors:J$e,decls:6,vars:1,consts:[[3,"ngComponentOutlet"],["brnDialogClose","","hlm",""],[1,"sr-only"],["hlm","","size","sm","name","lucideX"]],template:function(e,r){e&1&&(Rt(),lt(0,eVe,1,1,"ng-container",0)(1,tVe,1,0),J(2,"button",1)(3,"span",2),de(4,"Close"),re(),Le(5,"ng-icon",3),re()),e&2&&Ct(r.component?0:1)},dependencies:[Ky,xde,c2,sr,ao],encapsulation:2,changeDetection:0})};var db=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("text-sm text-muted-foreground",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmDialogDescription",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([bde])]})};var nVe=["*"],m2=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-dialog-footer"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:nVe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var rVe=["*"],Yl=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("flex flex-col space-y-1.5 text-center sm:text-left",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-dialog-header"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:rVe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var H$="bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",pb=class t{_classSettable=xue({optional:!0,host:!0});userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(H$,this.userClass()));constructor(){Gt(()=>{let n=this._computedClass();Un(()=>this._classSettable?.setClassToCustomElement(n))})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmDialogOverlay",""],["brn-dialog-overlay","hlm",""]],inputs:{userClass:[1,"class","userClass"]}})};var Ql=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("text-lg font-semibold leading-none tracking-tight",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmDialogTitle",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([Sde])]})};var oVe=["*"],U$=class t extends R3{static \u0275fac=(()=>{let n;return function(r){return(n||(n=Ur(t)))(r||t)}})();static \u0275cmp=Oe({type:t,selectors:[["hlm-dialog"]],exportAs:["hlmDialog"],features:[ht([{provide:R3,useExisting:vi(()=>t)},kde({})]),Mn],ngContentSelectors:oVe,decls:2,vars:0,consts:[["hlm",""]],template:function(e,r){e&1&&(Rt(),Le(0,"brn-dialog-overlay",0),it(1))},dependencies:[Cde,pb],encapsulation:2,changeDetection:0})};var Mf=class t{_brnDialogService=I(z$);open(n,e){let r=pt(ue(ue({},Mde),e??{}),{backdropClass:Mw(`${H$} ${e?.backdropClass??""}`),context:pt(ue({},e?.context??{}),{$component:n,$dynamicComponentClass:e?.contentClass})});return this._brnDialogService.open(ub,void 0,r.context,r)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})};var Tw=(t,n)=>Math.floor(Math.random()*(n-t+1))+t;var Ade=(t,n)=>{let e=Math.random()+Math.random()+Math.random();return Math.max(1,Math.floor(t+n*(e-1.5)))};var hb=class hb{_state;get state(){return this._state}get enabled(){return this._models!==void 0&&this._state!=="disabled"}set enabled(n){this._state=this._models!==void 0&&n?"waiting":"disabled"}_models;get models(){return this._models?Object.values(this._models).map(({id:n,name:e})=>({id:n,name:e})):[]}_model;get model(){return this._model}set model(n){n&&this._models?this._model=n:this._model=void 0,this._state="waiting"}constructor(){this._state="disabled",this._model=void 0,this._models=void 0,Xl.instance.models$.subscribe(n=>this.loadModels(n))}loadModels(n){if(n){this._models={};for(let{id:e,name:r,model:o,script:i}of n)this._models[e]={id:e,name:r,model:o,analyze:i(l$,o).analyze}}else this._state="disabled",this._models=void 0}analyze(n){try{let e=this._models?.[this._model??""];if(this.enabled&&e){let r=e.analyze(n);typeof r=="boolean"?r?this._state="attack":this._state="safe":this._state="waiting"}}catch(e){console.error(e)}}toObject(){return{enabled:this.enabled,model:this.model}}static fromObject(n){let e=new hb;return n.enabled&&(e._state="waiting"),n.model&&(e._model=n.model),e}};ws([Fr.SetState],hb.prototype,"enabled",1),ws([Fr.SetState],hb.prototype,"model",1);var fb=hb;var Dw=class Dw{_queue;_processing;node1;node2;_latency;get latency(){return this._latency}set latency(n){if(n<0)throw new Error("The latency cannot be negative");this._latency=n}_latencyVariation;get latencyVariation(){return this._latencyVariation}set latencyVariation(n){if(n<0)throw new Error("The latency variation cannot be negative");this._latencyVariation=n}_bandwidth;get bandwidth(){return this._bandwidth}set bandwidth(n){if(n<=0)throw new Error("The bandwidth cannot be negative or zero");this._bandwidth=n}_status;get status(){return this._status}_cyberShield;get cyberShield(){return this._cyberShield}constructor(n,e,r,o,i,s){this._queue=[],this._processing=!1,this.node1=n,this.node2=e,this._latency=r??Tw(0,1e3),this._latencyVariation=o??0,this._bandwidth=i??Tw(1e5,1e6),this._status=0,this._cyberShield=s??new fb}_processQueue(){return z(this,null,function*(){if(!(this._processing||this._queue.length===0)){for(this._processing=!0;this._queue.length>0;){let n=this._queue.shift(),e;n.dstIP===this.node2.ip?(this._status=1,e=this.node2):(this._status=2,e=this.node1);let r=Ade(this._latency,this._latencyVariation),o=n.totalBytes/this._bandwidth*1e3;yield new Promise(i=>setTimeout(i,r+o)),this.cyberShield.analyze(n),e.receivePacket(n)}this._processing=!1,this._status=0}})}spreadPacket(n){this._queue.push(n),this._processQueue()}toObject(){return{latency:this.latency,latencyVariation:this.latencyVariation,bandwidth:this.bandwidth,cyberShield:this.cyberShield.toObject()}}static fromObject(n,e,r){return new Dw(n,e,r.latency,r.latencyVariation,r.bandwidth,fb.fromObject(r.cyberShield))}};ws([Fr.SetState],Dw.prototype,"latency",1),ws([Fr.SetState],Dw.prototype,"latencyVariation",1),ws([Fr.SetState],Dw.prototype,"bandwidth",1);var Ew=Dw;var Vde=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||t)(Ut(po),Ut(Mt))};static \u0275dir=me({type:t})}return t})(),jde=(()=>{class t extends Vde{static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275dir=me({type:t,features:[Mn]})}return t})(),v2=new Me("");var sVe={provide:v2,useExisting:vi(()=>Df),multi:!0};function aVe(){let t=ya()?ya().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var lVe=new Me(""),Df=(()=>{class t extends Vde{_compositionMode;_composing=!1;constructor(e,r,o){super(e,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!aVe())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||t)(Ut(po),Ut(Mt),Ut(lVe,8))};static \u0275dir=me({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&je("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[ht([sVe]),Mn]})}return t})();var Z$=new Me(""),X$=new Me("");function zde(t){return t!=null}function Hde(t){return km(t)?Zn(t):t}function Ude(t){let n={};return t.forEach(e=>{n=e!=null?ue(ue({},n),e):n}),Object.keys(n).length===0?null:n}function Gde(t,n){return n.map(e=>e(t))}function cVe(t){return!t.validate}function Wde(t){return t.map(n=>cVe(n)?n:e=>n.validate(e))}function uVe(t){if(!t)return null;let n=t.filter(zde);return n.length==0?null:function(e){return Ude(Gde(e,n))}}function Y$(t){return t!=null?uVe(Wde(t)):null}function dVe(t){if(!t)return null;let n=t.filter(zde);return n.length==0?null:function(e){let r=Gde(e,n).map(Hde);return my(r).pipe(It(Ude))}}function Q$(t){return t!=null?dVe(Wde(t)):null}function Rde(t,n){return t===null?[n]:Array.isArray(t)?[...t,n]:[t,n]}function qde(t){return t._rawValidators}function Kde(t){return t._rawAsyncValidators}function G$(t){return t?Array.isArray(t)?t:[t]:[]}function F3(t,n){return Array.isArray(t)?t.includes(n):t===n}function Ode(t,n){let e=G$(n);return G$(t).forEach(o=>{F3(e,o)||e.push(o)}),e}function Fde(t,n){return G$(n).filter(e=>!F3(t,e))}var P3=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Y$(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Q$(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},g2=class extends P3{name;get formDirective(){return null}get path(){return null}},Za=class extends P3{_parent=null;name=null;valueAccessor=null},W$=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pVe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},oHn=pt(ue({},pVe),{"[class.ng-submitted]":"isSubmitted"}),ju=(()=>{class t extends W${constructor(e){super(e)}static \u0275fac=function(r){return new(r||t)(Ut(Za,2))};static \u0275dir=me({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Sr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Mn]})}return t})();var mb="VALID",O3="INVALID",Iw="PENDING",gb="DISABLED",Tf=class{},B3=class extends Tf{value;source;constructor(n,e){super(),this.value=n,this.source=e}},wb=class extends Tf{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},yb=class extends Tf{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},Nw=class extends Tf{status;source;constructor(n,e){super(),this.status=n,this.source=e}},q$=class extends Tf{source;constructor(n){super(),this.source=n}},K$=class extends Tf{source;constructor(n){super(),this.source=n}};function Zde(t){return(H3(t)?t.validators:t)||null}function hVe(t){return Array.isArray(t)?Y$(t):t||null}function Xde(t,n){return(H3(n)?n.asyncValidators:t)||null}function fVe(t){return Array.isArray(t)?Q$(t):t||null}function H3(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function mVe(t,n,e){let r=t.controls;if(!(n?Object.keys(r):r).length)throw new Ne(1e3,"");if(!r[e])throw new Ne(1001,"")}function gVe(t,n,e){t._forEachChild((r,o)=>{if(e[o]===void 0)throw new Ne(1002,"")})}var L3=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Un(this.statusReactive)}set status(n){Un(()=>this.statusReactive.set(n))}_status=ae(()=>this.statusReactive());statusReactive=Ye(void 0);get valid(){return this.status===mb}get invalid(){return this.status===O3}get pending(){return this.status==Iw}get disabled(){return this.status===gb}get enabled(){return this.status!==gb}errors;get pristine(){return Un(this.pristineReactive)}set pristine(n){Un(()=>this.pristineReactive.set(n))}_pristine=ae(()=>this.pristineReactive());pristineReactive=Ye(!0);get dirty(){return!this.pristine}get touched(){return Un(this.touchedReactive)}set touched(n){Un(()=>this.touchedReactive.set(n))}_touched=ae(()=>this.touchedReactive());touchedReactive=Ye(!1);get untouched(){return!this.touched}_events=new ot;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Ode(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Ode(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Fde(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Fde(n,this._rawAsyncValidators))}hasValidator(n){return F3(this._rawValidators,n)}hasAsyncValidator(n){return F3(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(pt(ue({},n),{sourceControl:r})),e&&n.emitEvent!==!1&&this._events.next(new yb(!0,r))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=n.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),e&&n.emitEvent!==!1&&this._events.next(new yb(!1,r))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(pt(ue({},n),{sourceControl:r})),e&&n.emitEvent!==!1&&this._events.next(new wb(!1,r))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=n.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),e&&n.emitEvent!==!1&&this._events.next(new wb(!0,r))}markAsPending(n={}){this.status=Iw;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Nw(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(pt(ue({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=gb,this.errors=null,this._forEachChild(o=>{o.disable(pt(ue({},n),{onlySelf:!0}))}),this._updateValue();let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new B3(this.value,r)),this._events.next(new Nw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pt(ue({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=mb,this._forEachChild(r=>{r.enable(pt(ue({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(pt(ue({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mb||this.status===Iw)&&this._runAsyncValidator(r,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new B3(this.value,e)),this._events.next(new Nw(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(pt(ue({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gb:mb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=Iw,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=Hde(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(n,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new Nw(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,r)}_initObservables(){this.valueChanges=new Xt,this.statusChanges=new Xt}_calculateStatus(){return this._allControlsDisabled()?gb:this.errors?O3:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Iw)?Iw:this._anyControlsHaveStatus(O3)?O3:mb}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),o&&this._events.next(new wb(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new yb(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){H3(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=hVe(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=fVe(this._rawAsyncValidators)}},$3=class extends L3{constructor(n,e,r){super(Zde(e),Xde(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){gVe(this,!0,n),Object.keys(n).forEach(r=>{mVe(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(r=>{let o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n?n[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var U3=new Me("",{providedIn:"root",factory:()=>J$}),J$="always";function vVe(t,n){return[...n.path,t]}function V3(t,n,e=J$){eV(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(t.disabled),yVe(t,n),_Ve(t,n),xVe(t,n),wVe(t,n)}function Pde(t,n,e=!0){let r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),z3(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function j3(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function wVe(t,n){if(n.valueAccessor.setDisabledState){let e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}function eV(t,n){let e=qde(t);n.validator!==null?t.setValidators(Rde(e,n.validator)):typeof e=="function"&&t.setValidators([e]);let r=Kde(t);n.asyncValidator!==null?t.setAsyncValidators(Rde(r,n.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let o=()=>t.updateValueAndValidity();j3(n._rawValidators,o),j3(n._rawAsyncValidators,o)}function z3(t,n){let e=!1;if(t!==null){if(n.validator!==null){let o=qde(t);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==n.validator);i.length!==o.length&&(e=!0,t.setValidators(i))}}if(n.asyncValidator!==null){let o=Kde(t);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==n.asyncValidator);i.length!==o.length&&(e=!0,t.setAsyncValidators(i))}}}let r=()=>{};return j3(n._rawValidators,r),j3(n._rawAsyncValidators,r),e}function yVe(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Yde(t,n)})}function xVe(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Yde(t,n),t.updateOn!=="submit"&&t.markAsTouched()})}function Yde(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function _Ve(t,n){let e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}function Qde(t,n){t==null,eV(t,n)}function kVe(t,n){return z3(t,n)}function bVe(t,n){if(!t.hasOwnProperty("model"))return!1;let e=t.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function CVe(t){return Object.getPrototypeOf(t.constructor)===jde}function Jde(t,n){t._syncPendingControls(),n.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function SVe(t,n){if(!n)return null;Array.isArray(n);let e,r,o;return n.forEach(i=>{i.constructor===Df?e=i:CVe(i)?r=i:o=i}),o||r||e||null}function MVe(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}var TVe={provide:g2,useExisting:vi(()=>xb)},vb=Promise.resolve(),xb=(()=>{class t extends g2{callSetDisabledState;get submitted(){return Un(this.submittedReactive)}_submitted=ae(()=>this.submittedReactive());submittedReactive=Ye(!1);_directives=new Set;form;ngSubmit=new Xt;options;constructor(e,r,o){super(),this.callSetDisabledState=o,this.form=new $3({},Y$(e),Q$(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){vb.then(()=>{let r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),V3(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){vb.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){vb.then(()=>{let r=this._findContainer(e.path),o=new $3({});Qde(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){vb.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){vb.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Jde(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(r){return new(r||t)(Ut(Z$,10),Ut(X$,10),Ut(U3,8))};static \u0275dir=me({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&je("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ht([TVe]),Mn]})}return t})();function Bde(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function Lde(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var epe=class extends L3{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,r){super(Zde(e),Xde(r,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),H3(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Lde(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Bde(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Bde(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){Lde(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var DVe=t=>t instanceof epe;var EVe={provide:Za,useExisting:vi(()=>Jl)},$de=Promise.resolve(),Jl=(()=>{class t extends Za{_changeDetectorRef;callSetDisabledState;control=new epe;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Xt;constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=SVe(this,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),bVe(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){V3(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){$de.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,o=r!==0&&rt(r);$de.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?vVe(e,this._parent):[e]}static \u0275fac=function(r){return new(r||t)(Ut(g2,9),Ut(Z$,10),Ut(X$,10),Ut(v2,10),Ut(Lr,8),Ut(U3,8))};static \u0275dir=me({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ht([EVe]),Mn,uo]})}return t})();var IVe={provide:v2,useExisting:vi(()=>tV),multi:!0},tV=(()=>{class t extends jde{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275dir=me({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&je("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[ht([IVe]),Mn]})}return t})();var NVe={provide:g2,useExisting:vi(()=>_b)},_b=(()=>{class t extends g2{callSetDisabledState;get submitted(){return Un(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=ae(()=>this._submittedReactive());_submittedReactive=Ye(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Xt;constructor(e,r,o){super(),this.callSetDisabledState=o,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(z3(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return V3(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Pde(e.control||null,e,!1),MVe(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),Jde(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new q$(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new K$(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,o=this.form.get(e.path);r!==o&&(Pde(r||null,e),DVe(o)&&(V3(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);Qde(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&kVe(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){eV(this.form,this),this._oldForm&&z3(this._oldForm,this)}static \u0275fac=function(r){return new(r||t)(Ut(Z$,10),Ut(X$,10),Ut(U3,8))};static \u0275dir=me({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&je("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ht([NVe]),Mn,uo]})}return t})();var AVe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})}return t})();var zu=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:U3,useValue:e.callSetDisabledState??J$}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({imports:[AVe]})}return t})();var bb=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform group-data-[state=checked]:translate-x-5 group-data-[state=unchecked]:translate-x-0",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["brn-switch-thumb","hlm",""],["","hlmSwitchThumb",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var RVe=200,G3=class{_letterKeyStream=new ot;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new ot;selectedItem=this._selectedItem;constructor(n,e){let r=typeof e?.debounceInterval=="number"?e.debounceInterval:RVe;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(Bo(e=>this._pressedLetters.push(e)),fa(n),xn(()=>this._pressedLetters.length>0),It(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let r=1;r<this._items.length+1;r++){let o=(this._selectedItemIndex+r)%this._items.length,i=this._items[o];if(!this._skipPredicateFn?.(i)&&i.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(i);break}}this._pressedLetters=[]})}};var Aw=class{_items;_activeItemIndex=-1;_activeItem=Ye(null);_wrap=!1;_typeaheadSubscription=On.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof Q2?this._itemChangesSubscription=n.changes.subscribe(r=>this._itemsChanged(r.toArray())):O4(n)&&(this._effectRef=Gt(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new ot;change=new ot;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new G3(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){let e=n.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(i=>!n[i]||this._allowedModifierKeys.indexOf(i)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&o){this.setNextItemActive();break}else return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&o){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&o){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&o){let i=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(i>0?i:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&o){let i=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(i<s?i:s-1,-1);break}else return;default:(o||Jr(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),r=typeof n=="number"?n:e.indexOf(n),o=e[r];this._activeItem.set(o??null),this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let r=1;r<=e.length;r++){let o=(this._activeItemIndex+n*r+e.length)%e.length,i=e[o];if(!this._skipPredicateFn(i)){this.setActiveItem(o);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){let r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(n+=e,!r[n])return;this.setActiveItem(n)}}_getItemsArray(){return O4(this._items)?this._items():this._items instanceof Q2?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let r=n.indexOf(e);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r))}}};var Mb=class extends Aw{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}};var Ef=class extends Aw{_origin="program";setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}};function Xa(t){t||(uh(Xa),t=I(jo));let n=new Jt(e=>t.onDestroy(e.next.bind(e)));return e=>e.pipe(en(n))}var rV=class{source;destroyed=!1;destroyRef=I(jo);constructor(n){this.source=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(n){if(this.destroyed)throw new Ne(953,!1);let e=this.source.pipe(Xa(this.destroyRef)).subscribe({next:r=>n(r)});return{unsubscribe:()=>e.unsubscribe()}}};function W3(t,n){return new rV(t)}function Tb(t,n){!n?.injector&&uh(Tb);let e=n?.injector??I(Yt),r=new Qu(1),o=Gt(()=>{let i;try{i=t()}catch(s){Un(()=>r.error(s));return}Un(()=>r.next(i))},{injector:e,manualCleanup:!0});return e.get(jo).onDestroy(()=>{o.destroy(),r.complete()}),r.asObservable()}function Rw(t,n){let e=!n?.manualCleanup;e&&!n?.injector&&uh(Rw);let r=e?n?.injector?.get(jo)??I(jo):null,o=OVe(n?.equal),i;n?.requireSync?i=Ye({kind:0},{equal:o}):i=Ye({kind:1,value:n?.initialValue},{equal:o});let s=t.subscribe({next:a=>i.set({kind:1,value:a}),error:a=>{if(n?.rejectErrors)throw a;i.set({kind:2,error:a})}});if(n?.requireSync&&i().kind===0)throw new Ne(601,!1);return r?.onDestroy(s.unsubscribe.bind(s)),ae(()=>{let a=i();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new Ne(601,!1)}},{equal:n?.equal})}function OVe(t=Object.is){return(n,e)=>n.kind===1&&e.kind===1&&t(n.value,e.value)}var FVe=["checkBox"],PVe=[[["brn-switch-thumb"]]],BVe=["brn-switch-thumb"],LVe=t=>({position:"absolute",width:"1px",height:"1px",padding:"0",margin:t,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"}),rpe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-switch-thumb"]],decls:0,vars:0,template:function(r,o){},encapsulation:2})}return t})(),$Ve={provide:v2,useExisting:vi(()=>iV),multi:!0},oV="-switch",iV=(()=>{class t{_destroyRef=I(jo);_renderer=I(po);_isBrowser=Ys(I(xo));_elementRef=I(Mt);_focusMonitor=I(f2);_cdr=I(Lr);focusVisible=Ye(!1);focused=Ye(!1);checked=ii(!1);id=Y(null);name=Y(null);ariaLabel=Y(null,{alias:"aria-label"});ariaLabelledby=Y(null,{alias:"aria-labelledby"});ariaDescribedby=Y(null,{alias:"aria-describedby"});required=Y(!1,{transform:rt});disabled=Y(!1,{transform:rt});_onChange=()=>{};_onTouched=()=>{};checkbox=oi.required("checkBox");changed=$n();touched=$n();state=ae(()=>{let e=this.name(),r=this.id();return{disabled:Ye(this.disabled()),name:e?e+oV:null,id:r?r+oV:null}});constructor(){Gt(()=>{let e=this._renderer.parentNode(this._elementRef.nativeElement);if(!e||(e?.tagName==="HLM-SWITCH"&&(e=this._renderer.parentNode(e)),!e))return;if(e?.tagName==="LABEL"){this._renderer.setAttribute(e,"data-disabled",this.state().disabled()?"true":"false");return}if(!this._isBrowser)return;let r=e?.querySelector(`label[for="${this.forChild(this.state().id)}"]`);r&&this._renderer.setAttribute(r,"data-disabled",this.state().disabled()?"true":"false")})}toggle(e){this.state().disabled()||(e.preventDefault(),this.checked.update(r=>!r),this._onChange(this.checked()),this.changed.emit(this.checked()))}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).pipe(Xa(this._destroyRef)).subscribe(e=>{e&&this.focused.set(!0),(e==="keyboard"||e==="program")&&(this.focusVisible.set(!0),this._cdr.markForCheck()),e||Promise.resolve().then(()=>{this.focusVisible.set(!1),this.focused.set(!1),this._onTouched(),this.touched.emit(),this._cdr.markForCheck()})}),this.checkbox()&&(this.checkbox().nativeElement.value=this.checked()?"on":"off",this.checkbox().nativeElement.dispatchEvent(new Event("change")))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}forChild(e){return e?e.replace(oV,""):null}writeValue(e){this.checked.set(!!e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.state().disabled.set(e),this._cdr.markForCheck()}preventScrolling(e){e.preventDefault()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-switch"]],viewQuery:function(r,o){r&1&&si(o.checkbox,FVe,5),r&2&&no()},hostAttrs:["tabindex","0"],hostVars:9,hostBindings:function(r,o){r&1&&je("click",function(s){return o.toggle(s)})("keyup.enter",function(s){return o.toggle(s)})("keyup.space",function(s){return o.toggle(s)})("keydown.space",function(s){return o.preventScrolling(s)}),r&2&&At("data-state",o.checked()?"checked":"unchecked")("data-focus-visible",o.focusVisible())("data-focus",o.focused())("data-disabled",o.state().disabled())("aria-labelledby",null)("aria-label",null)("aria-describedby",null)("id",o.state().id)("name",o.state().name)},inputs:{checked:[1,"checked"],id:[1,"id"],name:[1,"name"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[1,"aria-describedby","ariaDescribedby"],required:[1,"required"],disabled:[1,"disabled"]},outputs:{checked:"checkedChange",changed:"changed",touched:"touched"},features:[ht([$Ve])],ngContentSelectors:BVe,decls:3,vars:11,consts:[["checkBox",""],["tabindex","-1","type","checkbox","role","switch",3,"id","name","value","ngStyle","checked"]],template:function(r,o){if(r&1&&(Rt(PVe),Le(0,"input",1,0),it(2)),r&2){let i,s;Be("id",(i=o.forChild(o.state().id))!==null&&i!==void 0?i:"")("name",(s=o.forChild(o.state().name))!==null&&s!==void 0?s:"")("value",o.checked()?"on":"off")("ngStyle",wa(9,LVe,-"1px"))("checked",o.checked()),At("aria-label",o.ariaLabel())("aria-labelledby",o.ariaLabelledby())("aria-describedby",o.ariaDescribedby())("aria-required",o.required()||null)}},dependencies:[Dm],encapsulation:2,changeDetection:0})}return t})();var VVe={provide:v2,useExisting:vi(()=>w2),multi:!0},w2=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("group inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",this.disabled()?"cursor-not-allowed opacity-50":"",this.userClass()));checked=ii(!1);disabledInput=Y(!1,{transform:rt,alias:"disabled"});id=Y(null);ariaLabel=Y(null,{alias:"aria-label"});ariaLabelledby=Y(null,{alias:"aria-labelledby"});ariaDescribedby=Y(null,{alias:"aria-describedby"});changed=$n();_writableDisabled=ae(()=>Ye(this.disabledInput()));disabled=ae(()=>this._writableDisabled()());_onChange;_onTouched;handleChange(n){this.checked.set(n),this._onChange?.(n),this.changed.emit(n)}writeValue(n){this.checked.set(!!n)}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this._writableDisabled().set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-switch"]],hostAttrs:[1,"contents"],hostVars:4,hostBindings:function(e,r){e&2&&At("id",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{userClass:[1,"class","userClass"],checked:[1,"checked"],disabledInput:[1,"disabled","disabledInput"],id:[1,"id"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[1,"aria-describedby","ariaDescribedby"]},outputs:{checked:"checkedChange",changed:"changed"},features:[ht([VVe])],decls:2,vars:8,consts:[[3,"changed","touched","checked","disabled","id","aria-label","aria-labelledby","aria-describedby"],["hlm",""]],template:function(e,r){e&1&&(J(0,"brn-switch",0),je("changed",function(i){return r.handleChange(i)})("touched",function(){return r._onTouched==null?null:r._onTouched()}),Le(1,"brn-switch-thumb",1),re()),e&2&&(Ve(r._computedClass()),Be("checked",r.checked())("disabled",r.disabled())("id",r.id())("aria-label",r.ariaLabel())("aria-labelledby",r.ariaLabelledby())("aria-describedby",r.ariaDescribedby()))},dependencies:[rpe,iV,bb],encapsulation:2})};var Ow=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({imports:[w2]})};var zVe=0,Hu=(()=>{class t{_ngControl=I(Za,{optional:!0});id=Y(`brn-label-${zVe++}`);_isBrowser=Ys(I(xo));_element=I(Mt).nativeElement;_changes;_dataDisabled=Ye("auto");dataDisabled=this._dataDisabled.asReadonly();ngOnInit(){this._isBrowser&&(this._changes=new MutationObserver(e=>{e.forEach(r=>{if(r.attributeName!=="data-disabled")return;let o=r.target.attributes.getNamedItem(r.attributeName)?.value==="true";this._dataDisabled.set(o??"auto")})}),this._changes?.observe(this._element,{attributes:!0,childList:!0,characterData:!0}))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnLabel",""]],hostVars:9,hostBindings:function(r,o){r&2&&(Gr("id",o.id()),Sr("ng-invalid",(o._ngControl==null?null:o._ngControl.invalid)||null)("ng-dirty",(o._ngControl==null?null:o._ngControl.dirty)||null)("ng-valid",(o._ngControl==null?null:o._ngControl.valid)||null)("ng-touched",(o._ngControl==null?null:o._ngControl.touched)||null))},inputs:{id:[1,"id"]}})}return t})();var ipe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})}return t})();var q3=(()=>{class t{ngControl=null;errorState=Ye(!1);static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t})}return t})();var K3=(()=>{class t{isInvalid(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fw=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;errorState=Ye(!1);matcher=null;constructor(n,e,r,o){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=r,this._parentForm=o}updateErrorState(){let n=this.errorState(),e=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,o=this.ngControl?this.ngControl.control:null,i=r?.isInvalid(o,e)??!1;i!==n&&this.errorState.set(i)}};var HVe=["viewport"],UVe=["*",[["hlm-select-scroll-up"]],[["brnSelectScrollUp"]],[["brnSelectScrollDown"]],[["hlm-select-scroll-down"]]],GVe=["*","hlm-select-scroll-up","brnSelectScrollUp","brnSelectScrollDown","hlm-select-scroll-down"];function WVe(t,n){t&1&&(it(0,1),it(1,2))}function qVe(t,n){t&1&&wr(0)}function KVe(t,n){t&1&&(it(0,3),it(1,4))}function ZVe(t,n){t&1&&wr(0)}var XVe=t=>({$implicit:t});function YVe(t,n){if(t&1&&wr(0,2),t&2){let e,r=be(),o=yr(5);Be("ngTemplateOutlet",(e=(e=r.customPlaceholderTemplate())==null?null:e.templateRef)!==null&&e!==void 0?e:o)}}function QVe(t,n){if(t&1&&wr(0,3),t&2){let e,r=be(),o=yr(3);Be("ngTemplateOutlet",(e=(e=r.customValueTemplate())==null?null:e.templateRef)!==null&&e!==void 0?e:o)("ngTemplateOutletContext",wa(2,XVe,r._select.value()))}}function JVe(t,n){if(t&1&&de(0),t&2){let e=be();ct(e.value())}}function e9e(t,n){if(t&1&&de(0),t&2){let e=be();ct(e.placeholder())}}var t9e=[[["hlm-select-trigger"],["","brnSelectTrigger",""]],[["label","hlmLabel",""],["label","brnLabel",""]],"*"],n9e=["hlm-select-trigger,[brnSelectTrigger]","label[hlmLabel],label[brnLabel]","*"];function r9e(t,n){if(t&1&&(J(0,"label",1),de(1),re()),t&2){let e=be();At("id",e.labelId()),ee(),ct(e.placeholder())}}function o9e(t,n){t&1&&it(0,1)}function i9e(t,n){t&1&&it(0,2)}var cpe=new Me("BrnSelectContentToken");function s9e(){return I(cpe)}function a9e(t){return{provide:cpe,useExisting:t}}var upe=new Me("BrnSelectToken");function Y3(){return I(upe)}function l9e(t){return{provide:upe,useExisting:t}}var c9e=0,If=(()=>{class t{_select=Y3();_content=s9e();elementRef=I(Mt);id=Y(`brn-option-${c9e++}`);value=Y();_disabled=Y(!1,{alias:"disabled",transform:rt});get disabled(){return this._disabled()}selected=ae(()=>this.value()!==void 0&&this._select.isSelected(this.value()));_active=Ye(!1);checkedState=ae(()=>this.selected()?"checked":"unchecked");dir=this._select.dir;select(){if(!this._disabled()){if(this._select.multiple()){this._select.toggleSelect(this.value());return}this._select.selectOption(this.value())}}getLabel(){return this.elementRef.nativeElement.textContent?.trim()??""}setActiveStyles(){this._active.set(!0),this.elementRef.nativeElement.scrollIntoView({block:"nearest"})}setInactiveStyles(){this._active.set(!1)}activate(){this._disabled()||this._content.setActiveOption(this)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnOption",""]],hostAttrs:["role","option"],hostVars:6,hostBindings:function(r,o){r&1&&je("click",function(){return o.select()})("mouseenter",function(){return o.activate()}),r&2&&(Gr("id",o.id()),At("aria-selected",o.selected())("aria-disabled",o._disabled())("dir",o._select.dir())("data-active",o._active()?"":void 0)("data-disabled",o._disabled()?"":void 0))},inputs:{id:[1,"id"],value:[1,"value"],_disabled:[1,"disabled","_disabled"]}})}return t})(),Z3=100,spe=(()=>{class t{_el=I(Mt);_selectContent=I(Us);_endReached=new ot;_destroyRef=I(jo);startEmittingEvents(){let e=ol(this._el.nativeElement,"mouseleave");IC(100).pipe(en(e),en(this._endReached),Xa(this._destroyRef)).subscribe(()=>this._selectContent.moveFocusUp())}stopEmittingEvents(){this._endReached.next(!0)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectScrollUp",""],["brn-select-scroll-up"],["hlm-select-scroll-up",5,"noHlm"]],hostAttrs:["aria-hidden","true"],hostBindings:function(r,o){r&1&&je("mouseenter",function(){return o.startEmittingEvents()})}})}return t})(),ape=(()=>{class t{_el=I(Mt);_selectContent=I(Us);_endReached=new ot;_destroyRef=I(jo);startEmittingEvents(){let e=ol(this._el.nativeElement,"mouseleave");IC(100).pipe(en(e),en(this._endReached),Xa(this._destroyRef)).subscribe(()=>this._selectContent.moveFocusDown())}stopEmittingEvents(){this._endReached.next(!0)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectScrollDown",""],["brn-select-scroll-down"],["hlm-select-scroll-down",5,"noHlm"]],hostAttrs:["aria-hidden","true"],hostBindings:function(r,o){r&1&&je("mouseenter",function(){return o.startEmittingEvents()})}})}return t})(),Us=(()=>{class t{_elementRef=I(Mt);_injector=I(Yt);_select=Y3();canScrollUp=Ye(!1);canScrollDown=Ye(!1);viewport=oi.required("viewport");scrollUpBtn=cd(spe);scrollDownBtn=cd(ape);_options=_m(If,{descendants:!0});keyManager=null;constructor(){Gt(()=>{this._select.open()&&wi(()=>this.updateArrowDisplay(),{injector:this._injector})})}ngAfterContentInit(){this.keyManager=new Mb(this._options,this._injector).withHomeAndEnd().withVerticalOrientation().withTypeAhead().withAllowedModifierKeys(["shiftKey"]).withWrap().skipPredicate(e=>e._disabled()),Gt(()=>{let e=this._select.open(),r=this._options();!e||!r.length||Un(()=>{let o=r.find(i=>i.selected());o?this.keyManager?.setActiveItem(o):this.keyManager?.setFirstItemActive()})},{injector:this._injector})}updateArrowDisplay(){let{scrollTop:e,scrollHeight:r,clientHeight:o}=this.viewport().nativeElement;this.canScrollUp.set(e>0);let i=r-o;this.canScrollDown.set(Math.ceil(e)<i)}handleScroll(){this.updateArrowDisplay()}focusList(){this._elementRef.nativeElement.focus()}moveFocusUp(){this.viewport().nativeElement.scrollBy({top:-Z3,behavior:"smooth"}),this.viewport().nativeElement.scrollTop===0&&this.scrollUpBtn()?.stopEmittingEvents()}moveFocusDown(){this.viewport().nativeElement.scrollBy({top:Z3,behavior:"smooth"});let e=this._elementRef.nativeElement.scrollHeight,r=this.viewport().nativeElement.scrollTop;e+r+Z3>this.viewport().nativeElement.scrollHeight+Z3/2&&this.scrollDownBtn()?.stopEmittingEvents()}setActiveOption(e){let r=this._options().findIndex(o=>o===e);r!==-1&&this.keyManager?.setActiveItem(r)}selectActiveItem(e){e.preventDefault();let r=this.keyManager?.activeItem;r&&this._select.selectOption(r.value())}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-select-content"],["hlm-select-content",5,"noHlm"]],contentQueries:function(r,o,i){r&1&&(es(i,o.scrollUpBtn,spe,5),es(i,o.scrollDownBtn,ape,5),es(i,o._options,If,5)),r&2&&no(3)},viewQuery:function(r,o){r&1&&si(o.viewport,HVe,5),r&2&&no()},hostAttrs:["role","listbox","tabindex","0","aria-orientation","vertical"],hostVars:7,hostBindings:function(r,o){r&1&&je("keydown",function(s){return o.keyManager==null?null:o.keyManager.onKeydown(s)})("keydown.enter",function(s){return o.selectActiveItem(s)})("keydown.space",function(s){return o.selectActiveItem(s)}),r&2&&(Gr("id",o._select.id()+"--content"),At("aria-multiselectable",o._select.multiple())("aria-disabled",o._select.disabled()||o._select._formDisabled())("aria-activedescendant",o.keyManager==null||o.keyManager.activeItem==null?null:o.keyManager.activeItem.id())("aria-labelledBy",o._select.labelId())("aria-controlledBy",o._select.id()+"--trigger")("dir",o._select.dir()))},features:[ht([a9e(t)])],ngContentSelectors:GVe,decls:9,vars:2,consts:[["scrollUp",""],["viewport",""],["scrollDown",""],[4,"ngTemplateOutlet"],["data-brn-select-viewport","",2,"flex","1 1 0%","position","relative","width","100%","overflow","auto","min-height","36px","padding-bottom","2px","margin-bottom","-2px",3,"scroll"]],template:function(r,o){if(r&1){let i=bn();Rt(UVe),lt(0,WVe,2,0,"ng-template",null,0,ko)(2,qVe,1,0,"ng-container",3),J(3,"div",4,1),je("scroll",function(){return Ge(i),We(o.handleScroll())}),it(5),re(),lt(6,KVe,2,0,"ng-template",null,2,ko)(8,ZVe,1,0,"ng-container",3)}if(r&2){let i=yr(1),s=yr(7);ee(2),Be("ngTemplateOutlet",o.canScrollUp()&&o.scrollUpBtn()?i:null),ee(6),Be("ngTemplateOutlet",o.canScrollDown()&&o.scrollDownBtn()?s:null)}},dependencies:[gh],styles:["[_nghost-%COMP%]{display:flex;box-sizing:border-box;flex-direction:column;outline:none;pointer-events:auto}[data-brn-select-viewport][_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch}[data-brn-select-viewport][_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"],changeDetection:0})}return t})(),sV=(()=>{class t{labelledBy=Ye("");static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectGroup",""]],hostAttrs:["role","group"],hostVars:1,hostBindings:function(r,o){r&2&&At("aria-labelledby",o.labelledBy())}})}return t})(),dpe=(()=>{class t{_group=I(sV,{optional:!0});_label=I(Hu,{host:!0});constructor(){this._group?.labelledBy.set(this._label.id())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectLabel",""]],features:[qt([Hu])]})}return t})(),lpe=(()=>{class t{templateRef=I(er);static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectPlaceholder",""],["","hlmSelectPlaceholder",""]]})}return t})(),ppe=(()=>{class t{_elementRef=I(Mt);_select=Y3();_ngControl=I(Za,{optional:!0});_platform=I(xo);_triggerId=ae(()=>`${this._select.id()}--trigger`);_contentId=ae(()=>`${this._select.id()}--content`);_disabled=ae(()=>this._select.disabled()||this._select._formDisabled());_labelledBy=ae(()=>{let e=this._select.value();return Array.isArray(e)&&e.length>0?`${this._select.labelId()} ${this._select.id()}--value`:this._select.labelId()});_resizeObserver;constructor(){this._select.trigger.set(this)}ngAfterViewInit(){this._select.triggerWidth.set(this._elementRef.nativeElement.offsetWidth),Ys(this._platform)&&(this._resizeObserver=new ResizeObserver(()=>this._select.triggerWidth.set(this._elementRef.nativeElement.offsetWidth)),this._resizeObserver.observe(this._elementRef.nativeElement))}ngOnDestroy(){this._resizeObserver?.disconnect()}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectTrigger",""]],hostAttrs:["type","button","role","combobox","aria-autocomplete","none"],hostVars:18,hostBindings:function(r,o){r&1&&je("keydown.ArrowDown",function(){return o._select.show()}),r&2&&(Gr("disabled",o._disabled()),At("id",o._triggerId())("aria-expanded",o._select.open())("aria-controls",o._contentId())("aria-labelledBy",o._labelledBy())("dir",o._select.dir()),Sr("ng-invalid",(o._ngControl==null?null:o._ngControl.invalid)||null)("ng-dirty",(o._ngControl==null?null:o._ngControl.dirty)||null)("ng-valid",(o._ngControl==null?null:o._ngControl.valid)||null)("ng-touched",(o._ngControl==null?null:o._ngControl.touched)||null)("ng-untouched",(o._ngControl==null?null:o._ngControl.untouched)||null)("ng-pristine",(o._ngControl==null?null:o._ngControl.pristine)||null))}})}return t})(),X3=(()=>{class t{templateRef=I(er);static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectValue",""],["","hlmSelectValue",""]]})}return t})(),Uu=(()=>{class t{_select=Y3();id=ae(()=>`${this._select.id()}--value`);placeholder=ae(()=>this._select.placeholder());_showPlaceholder=ae(()=>this.value()===null||this.value()===void 0||this.value()==="");customValueTemplate=cd(X3,{descendants:!0});customPlaceholderTemplate=cd(lpe,{descendants:!0});value=ae(()=>{let e=this._values();if(e.length===0)return null;let o=e.filter(s=>this._select.options().some(a=>this._select.compareWith()(a.value(),s))).map(s=>this._select.options().find(a=>this._select.compareWith()(a.value(),s)));if(o.length===0)return null;let i=o.map(s=>s?.getLabel());return this._select.dir()==="rtl"&&i.reverse(),this.transformFn()(i)});_values=ae(()=>Array.isArray(this._select.value())?this._select.value():[this._select.value()]);transformFn=Y(e=>(e??[]).join(", "));static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-select-value"],["hlm-select-value"]],contentQueries:function(r,o,i){r&1&&(es(i,o.customValueTemplate,X3,5),es(i,o.customPlaceholderTemplate,lpe,5)),r&2&&no(2)},hostVars:2,hostBindings:function(r,o){r&2&&(Gr("id",o.id()),At("data-placeholder",o._showPlaceholder()?"":null))},inputs:{transformFn:[1,"transformFn"]},decls:6,vars:1,consts:[["defaultValueTemplate",""],["defaultPlaceholderTemplate",""],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,o){r&1&&lt(0,YVe,1,1,"ng-container",2)(1,QVe,1,4,"ng-container",3)(2,JVe,1,1,"ng-template",null,0,ko)(4,e9e,1,1,"ng-template",null,1,ko),r&2&&Ct(o._showPlaceholder()?0:1)},dependencies:[gh],styles:["[_nghost-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;white-space:nowrap;pointer-events:none}"],changeDetection:0})}return t})(),u9e=0,ua=(()=>{class t{_defaultErrorStateMatcher=I(K3);_parentForm=I(xb,{optional:!0});_injector=I(Yt);_parentFormGroup=I(_b,{optional:!0});ngControl=I(Za,{optional:!0,self:!0});id=Y(`brn-select-${u9e++}`);multiple=Y(!1,{transform:rt});placeholder=Y("");disabled=Y(!1,{transform:rt});dir=Y("ltr");closeDelay=Y(100,{transform:Xs});open=ii(!1);value=ii();compareWith=Y((e,r)=>e===r);_formDisabled=Ye(!1);selectLabel=cd(Hu,{descendants:!1});selectContent=cd.required(Us);options=_m(If,{descendants:!0});selectedOptions=ae(()=>this.options().filter(e=>e.selected()));_overlayDir=oi.required(Cw);trigger=Ye(null);triggerWidth=Ye(0);_delayedExpanded=Rw(Tb(this.open).pipe(Pr(e=>e?at(e):at(e).pipe(dA(this.closeDelay()))),Xa()),{initialValue:!1});state=ae(()=>this.open()?"open":"closed");_positionChanges$=new ot;side=Rw(this._positionChanges$.pipe(It(e=>e.connectionPair.originY==="center"?e.connectionPair.originX==="start"?"left":"right":e.connectionPair.originY)),{initialValue:"bottom"});labelId=ae(()=>this.selectLabel()?.id??`${this.id()}--label`);_onChange=()=>{};_onTouched=()=>{};_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}];errorStateTracker;errorState=ae(()=>this.errorStateTracker.errorState());constructor(){this.ngControl!==null&&(this.ngControl.valueAccessor=this),this.errorStateTracker=new Fw(this._defaultErrorStateMatcher,this.ngControl,this._parentFormGroup,this._parentForm)}ngDoCheck(){this.errorStateTracker.updateErrorState()}toggle(){this.open()?this.hide():this.show()}show(){this.open()||this.disabled()||this._formDisabled()||this.options()?.length==0||(this.open.set(!0),wi(()=>this.selectContent().focusList(),{injector:this._injector}))}hide(){this.open()&&(this.open.set(!1),this._onTouched(),this.trigger()?.focus())}writeValue(e){this.value.set(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._formDisabled.set(e)}selectOption(e){if(this.multiple()){let r=this.value(),o=r?[...r,e]:[e];this.value.set(o)}else this.value.set(e);this._onChange?.(this.value()),this.multiple()||this.hide()}deselectOption(e){if(this.multiple()){let o=this.value().filter(s=>!this.compareWith()(s,e)),i=o.length?o:null;this.value.set(i)}else this.value.set(null);this._onChange?.(this.value())}toggleSelect(e){this.isSelected(e)?this.deselectOption(e):this.selectOption(e)}isSelected(e){let r=this.value();return Array.isArray(r)?r.some(o=>this.compareWith()(o,e)):e!==void 0?this.compareWith()(r,e):!1}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-select"],["hlm-select"]],contentQueries:function(r,o,i){r&1&&(es(i,o.selectLabel,Hu,4),es(i,o.selectContent,Us,5),es(i,o.options,If,5)),r&2&&no(3)},viewQuery:function(r,o){r&1&&si(o._overlayDir,Cw,5),r&2&&no()},inputs:{id:[1,"id"],multiple:[1,"multiple"],placeholder:[1,"placeholder"],disabled:[1,"disabled"],dir:[1,"dir"],closeDelay:[1,"closeDelay"],open:[1,"open"],value:[1,"value"],compareWith:[1,"compareWith"]},outputs:{open:"openChange",value:"valueChange"},features:[ht([bue(()=>t),v$(()=>t),l9e(t),{provide:q3,useExisting:t}])],ngContentSelectors:n9e,decls:6,vars:5,consts:[["trigger","cdkOverlayOrigin"],[1,"hidden"],["cdk-overlay-origin","",3,"click"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","detach","positionChange","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"]],template:function(r,o){if(r&1){let i=bn();Rt(t9e),lt(0,r9e,2,2,"label",1)(1,o9e,1,0),J(2,"div",2,0),je("click",function(){return Ge(i),We(o.toggle())}),it(4),re(),lt(5,i9e,1,0,"ng-template",3),je("backdropClick",function(){return Ge(i),We(o.hide())})("detach",function(){return Ge(i),We(o.hide())})("positionChange",function(a){return Ge(i),We(o._positionChanges$.next(a))})}if(r&2){let i=yr(3);Ct(!o.selectLabel()&&o.placeholder()?0:1),ee(5),Be("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",o._delayedExpanded())("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayWidth",o.triggerWidth()>0?o.triggerWidth():"auto")}},dependencies:[ob,Cw,eb,ipe],encapsulation:2,changeDetection:0})}return t})();var Nf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({imports:[ua]})}return t})();var hpe=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,fpe=p3,ar=(t,n)=>e=>{var r;if(n?.variants==null)return fpe(t,e?.class,e?.className);let{variants:o,defaultVariants:i}=n,s=Object.keys(o).map(c=>{let u=e?.[c],d=i?.[c];if(u===null)return null;let p=hpe(u)||hpe(d);return o[c][p]}),a=e&&Object.entries(e).reduce((c,u)=>{let[d,p]=u;return p===void 0||(c[d]=p),c},{}),l=n==null||(r=n.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let f=u,{class:d,className:p}=f,h=Uf(f,["class","className"]);return Object.entries(h).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes(ue(ue({},i),a)[g]):ue(ue({},i),a)[g]===v})?[...c,d,p]:c},[]);return fpe(t,s,l,e?.class,e?.className)};var KUn=ar("text-destructive text-sm font-medium",{variants:{},defaultVariants:{}});var d9e=ar("flex rounded-md border font-normal border-input bg-transparent text-base md:text-sm ring-offset-background file:border-0 file:text-foreground file:bg-transparent file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{size:{default:"h-10 py-2 px-4 file:max-md:py-0",sm:"h-9 px-3 file:md:py-2 file:max-md:py-1.5",lg:"h-11 px-8 file:md:py-3 file:max-md:py-2.5"},error:{auto:"[&.ng-invalid.ng-touched]:text-destructive [&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:focus-visible:ring-destructive",true:"text-destructive border-destructive focus-visible:ring-destructive"}},defaultVariants:{size:"default",error:"auto"}}),Rf=class t{size=Y("default");error=Y("auto");state=ae(()=>({error:Ye(this.error())}));userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(d9e({size:this.size(),error:this.state().error()}),this.userClass()));_injector=I(Yt);ngControl=this._injector.get(Za,null);_errorStateTracker;_defaultErrorStateMatcher=I(K3);_parentForm=I(xb,{optional:!0});_parentFormGroup=I(_b,{optional:!0});errorState=ae(()=>this._errorStateTracker.errorState());constructor(){this._errorStateTracker=new Fw(this._defaultErrorStateMatcher,this.ngControl,this._parentFormGroup,this._parentForm),Gt(()=>{let n=this._errorStateTracker.errorState();Un(()=>{this.ngControl&&this.setError(n)})})}ngDoCheck(){this._errorStateTracker.updateErrorState()}setError(n){this.state().error.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmInput",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{size:[1,"size"],error:[1,"error"],userClass:[1,"class","userClass"]},features:[ht([{provide:q3,useExisting:t}])]})};var Pw=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})};var h9e=ar("text-sm font-medium leading-none [&>[hlmInput]]:my-1 [&:has([hlmInput]:disabled)]:cursor-not-allowed [&:has([hlmInput]:disabled)]:opacity-70",{variants:{variant:{default:""},error:{auto:"[&:has([hlmInput].ng-invalid.ng-touched)]:text-destructive",true:"text-destructive"},disabled:{auto:"[&:has([hlmInput]:disabled)]:opacity-70",true:"opacity-70",false:""}},defaultVariants:{variant:"default",error:"auto"}}),Ya=class t{_brn=I(Hu,{host:!0});userClass=Y("",{alias:"class"});variant=Y("default");error=Y("auto");state=ae(()=>({error:Ye(this.error())}));_computedClass=ae(()=>Ze(h9e({variant:this.variant(),error:this.state().error(),disabled:this._brn?.dataDisabled()??"auto"}),"[&.ng-invalid.ng-touched]:text-destructive",this.userClass()));setError(n){this.state().error.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmLabel",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"],variant:[1,"variant"],error:[1,"error"]},features:[qt([{directive:Hu,inputs:["id","id"]}])]})};var Of=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})};var gs=class t{userClass=Y("",{alias:"class"});stickyLabels=Y(!1);_stateProvider=Cue({optional:!0});_sideProvider=kue({optional:!0});_computedClass=ae(()=>Ze("w-full relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md p-1 data-[side=bottom]:top-[2px] data-[side=top]:bottom-[2px] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmSelectContent",""],["hlm-select-content"]],hostVars:4,hostBindings:function(e,r){if(e&2){let o,i;At("data-state",(o=r._stateProvider==null?null:r._stateProvider.state())!==null&&o!==void 0?o:"open")("data-side",(i=r._sideProvider==null?null:r._sideProvider.side())!==null&&i!==void 0?i:"bottom"),Ve(r._computedClass())}},inputs:{userClass:[1,"class","userClass"],stickyLabels:[1,"stickyLabels"]}})};var lV=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmSelectGroup",""],["hlm-select-group"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([sV])]})};var cV=class t{_selectContent=I(gs);_stickyLabels=ae(()=>this._selectContent.stickyLabels());userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("pl-8 pr-2 text-sm font-semibold rtl:pl-2 rtl:pr-8",this._stickyLabels()?"sticky top-0 bg-popover block z-[2]":"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmSelectLabel",""],["hlm-select-label"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([dpe])]})};var f9e=["*"];function m9e(t,n){t&1&&Le(0,"ng-icon",1)}var Gs=class t{_brnSelectOption=I(If,{host:!0});userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 rtl:flex-reverse rtl:pr-8 rtl:pl-2 text-sm outline-none data-[active]:bg-accent data-[active]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-option"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ht([ir({lucideCheck:g3})]),qt([{directive:If,inputs:["disabled","disabled","value","value"]}])],ngContentSelectors:f9e,decls:3,vars:3,consts:[[1,"absolute","left-2","flex","h-3.5","w-3.5","items-center","justify-center","rtl:left-auto","rtl:right-2"],["hlm","","size","sm","aria-hidden","true","name","lucideCheck"]],template:function(e,r){e&1&&(Rt(),it(0),J(1,"span",0),lt(2,m9e,1,0,"ng-icon",1),re()),e&2&&(ee(),At("dir",r._brnSelectOption.dir())("data-state",r._brnSelectOption.checkedState()),ee(),Ct(r._brnSelectOption.selected()?2:-1))},dependencies:[sr,ao],encapsulation:2,changeDetection:0})};var Q3=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-select-scroll-down"]],hostAttrs:[1,"flex","cursor-default","items-center","justify-center","py-1"],features:[ht([ir({lucideChevronDown:v3})])],decls:1,vars:0,consts:[["hlm","","size","sm","name","lucideChevronDown",1,"ml-2"]],template:function(e,r){e&1&&Le(0,"ng-icon",0)},dependencies:[sr,ao],encapsulation:2})};var J3=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-select-scroll-up"]],hostAttrs:[1,"flex","cursor-default","items-center","justify-center","py-1"],features:[ht([ir({lucideChevronUp:Due})])],decls:1,vars:0,consts:[["hlm","","size","sm","name","lucideChevronUp",1,"ml-2"]],template:function(e,r){e&1&&Le(0,"ng-icon",0)},dependencies:[sr,ao],encapsulation:2})};var g9e=["*",[["ng-icon"]]],v9e=["*","ng-icon"];function w9e(t,n){t&1&&it(0,1)}function y9e(t,n){t&1&&Le(0,"ng-icon",2)}var x9e=ar("flex items-center justify-between rounded-md border border-input bg-background text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{size:{default:"h-10 py-2 px-4",sm:"h-9 px-3",lg:"h-11 px-8"},error:{auto:"[&.ng-invalid.ng-touched]:text-destructive [&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:focus-visible:ring-destructive",true:"text-destructive border-destructive focus-visible:ring-destructive"}},defaultVariants:{size:"default",error:"auto"}}),Ws=class t{icon=cd(ao);brnSelect=I(ua,{optional:!0});_size=Y("default");userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(x9e({size:this._size(),error:this.brnSelect?.errorState()}),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-select-trigger"]],contentQueries:function(e,r,o){e&1&&es(o,r.icon,ao,5),e&2&&no()},inputs:{_size:[1,"_size"],userClass:[1,"class","userClass"]},features:[ht([ir({lucideChevronDown:v3})])],ngContentSelectors:v9e,decls:5,vars:3,consts:[["button",""],["hlmInput","","brnSelectTrigger","","type","button"],["hlm","","size","sm","name","lucideChevronDown",1,"ml-2","flex-none"]],template:function(e,r){e&1&&(Rt(g9e),J(0,"button",1,0),it(2),lt(3,w9e,1,0)(4,y9e,1,0,"ng-icon",2),re()),e&2&&(Ve(r._computedClass()),ee(3),Ct(r.icon()?3:4))},dependencies:[ppe,sr,ao],encapsulation:2})};var da=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("!inline-block ltr:text-left rtl:text-right border-border w-[calc(100%)]] min-w-0 pointer-events-none truncate data-[placeholder]:text-muted-foreground",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["hlm-select-value"],["","hlmSelectValue",""],["brn-select-value","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var Zi=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({imports:[Ws,Gs,J3,Q3]})};function _9e(t,n){if(t&1&&(J(0,"hlm-option",11),de(1),re()),t&2){let e=n.$implicit;Be("value",e.id),ee(),et(" ",e.name," ")}}function k9e(t,n){if(t&1){let e=bn();J(0,"div",2)(1,"label",3),de(2),Te(3,"translate"),re(),J(4,"brn-select",9),Te(5,"translate"),Ai("ngModelChange",function(o){Ge(e);let i=be();return ts(i.connection.cyberShield.model,o)||(i.connection.cyberShield.model=o),We(o)}),J(6,"hlm-select-trigger",10),Le(7,"hlm-select-value"),re(),J(8,"hlm-select-content"),zo(9,_9e,2,2,"hlm-option",11,Ss),re()()()}if(t&2){let e=be();ee(2),ct(Ee(3,4,"MODEL")),ee(2),Ni("ngModel",e.connection.cyberShield.model),Be("disabled",e.connection.cyberShield.models.length===0)("placeholder",Ee(5,6,"SELECT_MODEL")),ee(5),Ho(e.context.connection.cyberShield.models)}}var eN=class t{Math=Math;context=Vu();connection=this.context.connection;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-edit-connection-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],decls:27,vars:21,consts:[["hlmDialogTitle",""],[1,"grid","gap-4","py-4"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"text-right"],["hlmInput","","type","number","placeholder","ms",1,"col-span-3",3,"ngModelChange","ngModel"],["hlmInput","","type","number",1,"col-span-3",3,"ngModelChange","ngModel"],["hlmInput","","type","number","placeholder","Bytes/s",1,"col-span-3",3,"ngModelChange","ngModel"],[1,"col-span-3","inline-flex","items-center","justify-end"],[3,"ngModelChange","ngModel","disabled"],[1,"col-span-3","inline-block","w-full",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"w-full"],[3,"value"]],template:function(e,r){e&1&&(J(0,"hlm-dialog-header")(1,"h3",0),de(2),Te(3,"translate"),re()(),J(4,"div",1)(5,"div",2)(6,"label",3),de(7),Te(8,"translate"),re(),J(9,"input",4),je("ngModelChange",function(i){return r.connection.latency=r.Math.max(i,0)}),re()(),J(10,"div",2)(11,"label",3),de(12),Te(13,"translate"),re(),J(14,"input",5),je("ngModelChange",function(i){return r.connection.latencyVariation=r.Math.max(i,0)}),re()(),J(15,"div",2)(16,"label",3),de(17),Te(18,"translate"),re(),J(19,"input",6),je("ngModelChange",function(i){return r.connection.bandwidth=r.Math.max(i,1)}),re()(),J(20,"div",2)(21,"label",3),de(22),Te(23,"translate"),re(),J(24,"div",7)(25,"hlm-switch",8),Ai("ngModelChange",function(i){return ts(r.connection.cyberShield.enabled,i)||(r.connection.cyberShield.enabled=i),i}),re()()(),lt(26,k9e,11,8,"div",2),re()),e&2&&(ee(2),ct(Ee(3,11,"MODIFY_CONNECTION")),ee(5),ct(Ee(8,13,"LATENCY")),ee(2),Be("ngModel",r.connection.latency),ee(3),ct(Ee(13,15,"VARIABILITY")),ee(2),Be("ngModel",r.connection.latencyVariation),ee(3),ct(Ee(18,17,"BANDWIDTH")),ee(2),Be("ngModel",r.connection.bandwidth),ee(3),ct(Ee(23,19,"CYBER_SHIELD")),ee(3),Ni("ngModel",r.connection.cyberShield.enabled),Be("disabled",r.connection.cyberShield.models.length===0),ee(),Ct(r.connection.cyberShield.enabled?26:-1))},dependencies:[_r,zu,Df,tV,ju,Jl,ro,Co,Nf,ua,Us,Uu,Yl,Ql,Rf,Ya,Zi,gs,Ws,Gs,da,Ow,w2],encapsulation:2})};var b9e=(t,n,e,r)=>({left:t,top:n,width:e,height:r}),C9e=(t,n)=>({animate:t,reverse:n}),S9e=t=>({animate:t}),tN=class t{dialog=I(Mf);connection=Y.required();get animate(){return this.connection().status!==0}get reverse(){return this.connection().status===2}get node1(){return this.connection().node1.position}get node2(){return this.connection().node2.position}get point(){let e=this.node2.x-this.node1.x,r=this.node2.y-this.node1.y,o=Math.sqrt(e*e+r*r);return o===0?{x:this.node1.x,y:this.node1.y}:{x:this.node1.x+e/o*Math.min(60,o/2),y:this.node1.y+r/o*Math.min(60,o/2)}}get w(){return Math.abs(this.node2.x-this.node1.x)+60}get h(){return Math.abs(this.node2.y-this.node1.y)+60}get t(){return{x:(this.node1.x+this.node2.x)/2-this.w/2,y:(this.node1.y+this.node2.y)/2+this.h/2}}onClick(){this.dialog.open(eN,{context:{connection:this.connection()}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-connection"]],hostAttrs:[1,"contents"],inputs:{connection:[1,"connection"]},decls:4,vars:27,consts:[[1,"pointer-events-none","absolute","z-0","origin-center","-translate-x-1/2","-translate-y-1/2"],["hlmTooltipTrigger","",1,"pseudo-connection",3,"click"],[1,"connection",3,"ngClass"],["r","5",3,"ngClass"]],template:function(e,r){e&1&&(ph(),J(0,"svg",0)(1,"line",1),je("click",function(){return r.onClick()}),re(),Le(2,"line",2)(3,"circle",3),re()),e&2&&(ud(kU(17,b9e,"calc(50% + "+(r.node1.x+r.node2.x)/2+"px)","calc(50% - "+(r.node1.y+r.node2.y)/2+"px)",r.w+"px",r.h+"px")),ee(),At("x1",r.node1.x-r.t.x)("y1",r.t.y-r.node1.y)("x2",r.node2.x-r.t.x)("y2",r.t.y-r.node2.y),ee(),Be("ngClass",mh(22,C9e,r.animate,r.reverse)),At("x1",r.node1.x-r.t.x)("y1",r.t.y-r.node1.y)("x2",r.node2.x-r.t.x)("y2",r.t.y-r.node2.y),ee(),mU("cyber-shield ",r.connection().cyberShield.model?r.connection().cyberShield.state:"disabled",""),Be("ngClass",wa(25,S9e,r.animate)),At("cx",r.point.x-r.t.x)("cy",r.t.y-r.point.y))},dependencies:[_r,Tm],styles:[".connection[_ngcontent-%COMP%]{stroke:hsl(var(--border));stroke-width:1;transition-property:stroke-width,stroke-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;stroke-linecap:round}  .high-contrast .connection{stroke:hsl(var(--primary))!important}.connection.animate[_ngcontent-%COMP%]{stroke:hsl(var(--primary));stroke-width:2;stroke-dasharray:10;animation:5s linear 0ms infinite forwards normal _ngcontent-%COMP%_dash}.connection.animate.reverse[_ngcontent-%COMP%]{animation-direction:reverse}.cyber-shield[_ngcontent-%COMP%]{fill:transparent;opacity:0;transition-property:opacity,fill-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.cyber-shield.waiting[_ngcontent-%COMP%]{fill:#2563eb;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.waiting[_ngcontent-%COMP%]{fill:#60a5fa}}  .high-contrast .cyber-shield.waiting{fill:#1d4ed8}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.waiting{fill:#3b82f6}}.cyber-shield.safe[_ngcontent-%COMP%]{fill:#16a34a;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.safe[_ngcontent-%COMP%]{fill:#4ade80}}  .high-contrast .cyber-shield.safe{fill:#15803d}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.safe{fill:#22c55e}}.cyber-shield.attack[_ngcontent-%COMP%]{fill:#dc2626;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.attack[_ngcontent-%COMP%]{fill:#f87171}}  .high-contrast .cyber-shield.attack{fill:#b91c1c}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.attack{fill:#ef4444}}.cyber-shield.animate[_ngcontent-%COMP%]{animation:.8s ease-in-out 0ms infinite alternate _ngcontent-%COMP%_pulse}.pseudo-connection[_ngcontent-%COMP%]{pointer-events:auto;cursor:pointer;stroke:transparent;stroke-width:20}.pseudo-connection[_ngcontent-%COMP%]:hover ~ .connection[_ngcontent-%COMP%]{stroke-width:4}@keyframes _ngcontent-%COMP%_dash{0%{stroke-dashoffset:100%}to{stroke-dashoffset:0%}}@keyframes _ngcontent-%COMP%_pulse{0%{r:5}to{r:7}}"]})};var Gu;(a=>(a.ICMPEchoRequest=(l,c,u="Ping request")=>{let p=new TextEncoder().encode(u).length;return{srcIP:l,dstIP:c,transportProtocol:1,payload:u,totalBytes:8+p,headerSize:8,payloadSize:p,timestamp:new Date,ttl:64,type:8,code:0,identifier:Math.floor(Math.random()*65535),sequence:Math.floor(Math.random()*65535)}},a.ICMPEchoReply=(l,c,u,d,p="Pong response")=>{let f=new TextEncoder().encode(p).length;return{srcIP:l,dstIP:c,transportProtocol:1,payload:p,totalBytes:8+f,headerSize:8,payloadSize:f,timestamp:new Date,ttl:64,type:0,code:0,identifier:u,sequence:d}},a.TCP=(l,c,u,d,p,h,f,m="")=>{let v=new TextEncoder().encode(m).length;return{srcIP:l,dstIP:c,srcPort:u,dstPort:d,transportProtocol:6,payload:m,totalBytes:20+v,headerSize:20,payloadSize:v,timestamp:new Date,ttl:64,sequence:p,ack:h,tcpFlags:f}},a.TCPSYN=(l,c,u,d)=>(0,a.TCP)(l,c,u,d,Math.floor(Math.random()*1e3),0,2),a.TCPSYNACK=(l,c,u,d,p)=>(0,a.TCP)(l,c,u,d,Math.floor(Math.random()*1e3),p+1,18),a.TCPACK=(l,c,u,d,p,h)=>(0,a.TCP)(l,c,u,d,h+1,p+1,16),a.UDP=(l,c,u,d,p="")=>{let f=new TextEncoder().encode(p).length;return{srcIP:l,dstIP:c,srcPort:u,dstPort:d,transportProtocol:17,payload:p,totalBytes:8+f,headerSize:8,payloadSize:f,timestamp:new Date,ttl:64}}))(Gu||={});var y2=class{constructor(n,e){this.node=n;this.interceptor=e}library;internalCommands=[{id:"ping",name:"Ping",multiple:!1},{id:"threeWayHandshake",name:"Three-Way Handshake",multiple:!1}];_externalCommands=[];get externalCommands(){return[...this._externalCommands]}ping(n){this.node.sendPacket(Gu.ICMPEchoRequest(this.node.ip,n))}threeWayHandshake(n,e,r){this.node.sendPacket(Gu.TCPSYN(this.node.ip,n,e,r))}loadLibrary(n){if(!n){this.library=void 0,this._externalCommands=[];return}let e=Object.keys(n).filter(r=>r.startsWith("cmd_"));this.library={},this._externalCommands=[];for(let r of e)this.library[r]=(...o)=>n[r]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:i=>this.node.sendPacket(i)},...o),this._externalCommands.push({id:r,name:r.substring(4).replace("_"," "),multiple:mM(n[r])===1/0})}execute(n,...e){if(this.library&&this.library[n])try{this.library[n](...e)}catch(r){console.error(r)}}};var nN=class{constructor(n){this.node=n}_intercept=new Kn(null);get intercept$(){return this._intercept}_externalInterceptor;_interceptICMP(n){switch(n.type){case 8:this.node.sendPacket(Gu.ICMPEchoReply(this.node.ip??"",n.srcIP,n.identifier,n.sequence));break;case 0:break}}_interceptTCP(n){switch(n.tcpFlags){case 2:this.node.sendPacket(Gu.TCPSYNACK(this.node.ip,n.srcIP,n.dstPort,n.srcPort,n.sequence));break;case 18:this.node.sendPacket(Gu.TCPACK(this.node.ip,n.srcIP,n.dstPort,n.srcPort,n.sequence,n.ack));break;case 16:break}}intercept(n){if(this._externalInterceptor)try{if(this._externalInterceptor(ue({},n))!==void 0)return}catch(e){console.error(e)}switch(this._intercept.next(ue({},n)),n.transportProtocol){case 1:this._interceptICMP(n);break;case 6:this._interceptTCP(n);break;case 17:break}}loadLibrary(n){if(!n){this._externalInterceptor=void 0;return}let e=Object.keys(n).find(r=>r===`intcp_${this.node.type}`)??Object.keys(n).find(r=>r==="intcp");e&&(this._externalInterceptor=r=>n[e]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:o=>this.node.sendPacket(o)},r))}};var Bw=class extends y2{internalAttacks=[{id:"dos",name:"Denial of Service (DoS)",multiple:!1}];_externalAttacks=[];get externalAttacks(){return[...this._externalAttacks]}dos(n,e,r,o){for(let i=0;i<o;i++){let s=Gu.TCPSYN(this.node.ip,n,Tw(1024,65535),e);s.ttl=Tw(r[0],r[1]),this.node.sendPacket(s)}}loadLibrary(n){if(!n){this.library=void 0,this._externalAttacks=[];return}let e=Object.keys(n).filter(r=>r.startsWith("atk_"));super.loadLibrary(n),this._externalAttacks=[];for(let r of e)this.library[r]=(...o)=>n[r]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:i=>this.node.sendPacket(i)},...o),this._externalAttacks.push({id:r,name:r.substring(4).replace("_"," "),multiple:mM(n[r])===1/0})}attack(n,...e){this.execute(n,...e)}};var M9e=/^([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})$/,gpe=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/,qn=(r=>(r.ROUTER="router",r.COMPUTER="computer",r.IOT="iot",r))(qn||{});(s=>(s.Types=["router","computer","iot"],s.RouterTypes=["router"],s.DeviceTypes=["computer","iot"],s.AttackerTypes=["computer"],s.getTypes=a=>{switch(a){case"router":return s.RouterTypes;case"computer":case"iot":return s.DeviceTypes;default:return s.Types}},s.toString=a=>{switch(a){case"router":return"ROUTER";case"computer":return"COMPUTER";case"iot":return"IOT_DEVICE"}}))(qn||={});var Wu=class{_mac;get mac(){return this._mac}_ip;get ip(){return this._ip}set ip(n){if(n!==void 0&&(typeof n!="string"||!gpe.test(n)))throw new Error("Invalid IP address");this._ip=n}_name;get name(){return this._name}set name(n){this._name!==n&&(this._name=n)}_type;get type(){return this._type}set type(n){if(this._type!==n){if(!qn.Types.includes(n))throw new Error("Invalid node type");if(this._type==="router"&&n!=="router")throw new Error("Cannot change the type of a router");if(this._type!=="router"&&n==="router")throw new Error("Cannot change the type of a device to a router");qn.AttackerTypes.includes(n)?this._generator=new Bw(this,this.interceptor):this._generator instanceof Bw&&(this._generator=new y2(this,this.interceptor)),this._generator.loadLibrary(this._library),this._type=n}}_library;interceptor;_generator;get generator(){return this._generator}_traffic;get traffic(){return this._traffic.map(n=>ue({},n))}_position;get position(){return ue({},this._position)}constructor(n,e,r={x:0,y:0}){this._mac=this._generateMac(),this._ip=void 0,this._name=n,this._type=e,this.interceptor=new nN(this),this._generator=qn.AttackerTypes.includes(e)?new Bw(this,this.interceptor):new y2(this,this.interceptor),this._traffic=[],this._position={x:Math.min(Math.max(r.x,-_c/2),_c/2),y:Math.min(Math.max(r.y,-_c/2),_c/2)},vl.instance.library$.subscribe(o=>this.loadLibrary(o))}init(n,e,r){if(n&&!M9e.test(n))throw new Error("Invalid MAC address");if(n&&(this._mac=n),e&&!gpe.test(e))throw new Error("Invalid IP address");return e&&(this._ip=e),r&&(this._traffic=r.map(o=>ue({},o))),this}_generateMac(){return"XX:XX:XX:XX:XX:XX".replace(/X/g,()=>Math.floor(Math.random()*16).toString(16))}loadLibrary(n){this._library=n?n():void 0,this.interceptor.loadLibrary(this._library),this.generator.loadLibrary(this._library)}logTraffic(n){this._traffic.push(n)}clearTraffic(){this._traffic=[]}move(n,e,r=!1){!r&&this._position.x===n&&this._position.y===e||(r&&(n=this._position.x+n,e=this._position.y+e),this._position={x:Math.min(Math.max(n,-_c/2),_c/2),y:Math.min(Math.max(e,-_c/2),_c/2)})}static fromObject(n){throw new Error("Method not implemented")}};ws([Fr.SetState],Wu.prototype,"ip",1),ws([Fr.SetState],Wu.prototype,"name",1),ws([Fr.SetState],Wu.prototype,"type",1),ws([Fr.SetState],Wu.prototype,"move",1);var Yp=class t extends Wu{_connection;get connected(){return this._connection!==void 0}get communicating(){return this._connection!==void 0&&this._connection.status!==0}constructor(n,e,r){super(n,e,r)}connect(n,e){let r=n.acceptConnection(this,e);if(!r)throw new Error(`${this.mac} could not connect to router`);let[o,i]=r;this.ip!==o&&(this.ip=o),this._connection=i}disconnect(n){n.removeConnection(this)&&(this._connection=void 0,this.ip=void 0)}sendPacket(n){if(this._connection===void 0)throw new Error(`${this.mac} is not connected to a router`);this.logTraffic(n),this._connection.spreadPacket(n)}receivePacket(n){if(this.ip!==n.dstIP)throw new Error(`Packet is not addressed to ${this.mac}`);this.logTraffic(n),this.interceptor.intercept(n)}static fromObject(n){return new t(n.name,n.type,n.position).init(n.mac,n.ip,n.traffic)}toObject(){let n=this.traffic;return{name:this.name,mac:this.mac,ip:this.ip,type:this.type,position:this.position,connection:this._connection?.toObject(),traffic:n.length>0?n:void 0}}};var uV=class{_table;get connections(){return[...this._table.values()]}constructor(){this._table=new Map}get(n){return this._table.get(n)}add(n,e){this._table.set(n,e)}remove(n){return this._table.delete(n)}has(n){return this._table.has(n)}clear(){this._table.clear()}size(){return this._table.size}},dV=class{_availableIPs;_assignedIPs;get leasedIPs(){return ue({},this._assignedIPs)}constructor(n,e,r){this._availableIPs=new Set,this._assignedIPs=new Map;for(let o=e;o<=r;o++)this._availableIPs.add(`${n}.${o}`)}requestIP(n){if(this._assignedIPs.has(n))return this._assignedIPs.get(n);let e=this._availableIPs.values().next().value;return e?(this._availableIPs.delete(e),this._assignedIPs.set(n,e),e):null}releaseIP(n){let e=this._assignedIPs.get(n);e&&(this._assignedIPs.delete(n),this._availableIPs.add(e))}registerFixedIP(n,e){this._availableIPs.delete(e),this._assignedIPs.set(n,e)}},Lw=class t extends Wu{_arpTable;_dhcpServer;get connections(){return this._arpTable.connections}get connected(){return this.connections.length>0}get communicating(){return this.connections.some(n=>n.status!==0)}constructor(n,e){super(n,"router",e),this.init(void 0,"192.168.0.1"),this._arpTable=new uV,this._dhcpServer=new dV("192.168.0",2,254)}_forwardPacket(n){let e=this._arpTable.get(n.dstIP);if(e)this.logTraffic(n),n=pt(ue({},n),{ttl:(n.ttl??1)-1}),n.ttl>0&&e.spreadPacket(n);else throw new Error(`Impossible to forward the packet ${JSON.stringify(n,null,2)}, destination IP not found`)}acceptConnection(n,e){n.ip&&this._dhcpServer.registerFixedIP(n.mac,n.ip);let r=n.ip??this._dhcpServer.requestIP(n.mac);return r?(e||(e=new Ew(this,n)),this._arpTable.add(r,e),[r,e]):null}removeConnection(n){return this._arpTable.get(n.ip??"")?(this._arpTable.remove(n.ip??""),this._dhcpServer.releaseIP(n.mac),!0):!1}removeAllConnections(){for(let n of this._arpTable.connections)n.node1 instanceof Yp?n.node1.disconnect(this):n.node2 instanceof Yp&&n.node2.disconnect(this);return this._arpTable.size()===0}sendPacket(n){this._forwardPacket(n)}receivePacket(n){n.dstIP===this.ip?(this.logTraffic(n),this.interceptor.intercept(n)):this._forwardPacket(n)}static fromObject(n){return new t(n.name,n.position).init(n.mac,n.ip,n.traffic)}toObject(){let n=this.traffic;return{name:this.name,mac:this.mac,ip:this.ip,position:ue({},this.position),traffic:n.length>0?n:void 0}}};var $w=class{_nodes=new Map;get nodes(){return[...this._nodes.values()]}_router;get router(){return this._router}get devices(){let n=this.nodes.filter(({type:e})=>!qn.RouterTypes.includes(e));return n.length>0?n:void 0}reset(){this._nodes.clear(),this._router=void 0}addNode(n){if(this._router&&qn.RouterTypes.includes(n.type))throw new Error("Cannot add more than one router to the network");return qn.RouterTypes.includes(n.type)&&(this._router=n),this._nodes.set(n.mac,n),n}deleteNode(n){let e=this._nodes.get(n);if(!e)throw new Error("Does not exist a node with the specified MAC address");return qn.RouterTypes.includes(e.type)?(this._router=void 0,e.removeAllConnections()):this._router&&e.disconnect(this._router),this._nodes.delete(e.mac),!0}getNode(n){return this._nodes.get(n)}getConnectedNodes(n){return this.nodes.filter(e=>e.ip&&n!==e.mac)}toObject(){return{exportedAt:new Date().toISOString(),router:this.router?.toObject(),devices:this.devices?.map(n=>n.toObject())}}fromObject(n){this.reset(),n.router&&this.addNode(Lw.fromObject(n.router)),n.devices&&n.devices.forEach(e=>{let r=this.addNode(Yp.fromObject(e));e.connection&&r.connect(this.router,Ew.fromObject(this.router,r,e.connection))})}};$w=ws([Fr.UseState],$w);var T9e={variant:"default",size:"default"},D9e=new Me("BrnButtonConfig");function vpe(){return I(D9e,{optional:!0})??T9e}var pV=ar("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Qa=class t{_config=vpe();_additionalClasses=Ye("");userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(pV({variant:this.variant(),size:this.size()}),this.userClass(),this._additionalClasses()));variant=Y(this._config.variant);size=Y(this._config.size);setClass(n){this._additionalClasses.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmBtn",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"],variant:[1,"variant"],size:[1,"size"]},exportAs:["hlmBtn"]})};var Ja=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})};function E9e(t,n){if(t&1&&(J(0,"hlm-option",7),de(1),Te(2,"translate"),re()),t&2){let e=n.$implicit,r=be();Be("value",e),ee(),ct(Ee(2,2,r.NodeType.toString(e)))}}var rN=class t{NodeType=qn;ref=I(ms);context=Vu();types=ae(()=>Array.isArray(this.context.type)?this.context.type:[this.context.type]);name=ii(null);type=ii(this.types().length===1?this.types()[0]:null);submit(){this.ref.close({name:this.name(),type:this.type()})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-add-node-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],inputs:{name:[1,"name"],type:[1,"type"]},outputs:{name:"nameChange",type:"typeChange"},decls:25,vars:19,consts:[["hlmDialogTitle",""],[1,"grid","gap-4","py-4"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"text-right"],["hlmInput","",1,"col-span-3",3,"ngModelChange","ngModel"],[1,"col-span-3","inline-block",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"w-full"],[3,"value"],["hlmBtn","",3,"click","disabled"]],template:function(e,r){e&1&&(J(0,"hlm-dialog-header")(1,"h3",0),de(2),Te(3,"translate"),re()(),J(4,"div",1)(5,"div",2)(6,"label",3),de(7),Te(8,"translate"),re(),J(9,"input",4),Ai("ngModelChange",function(i){return ts(r.name,i)||(r.name=i),i}),re()(),J(10,"div",2)(11,"label",3),de(12),Te(13,"translate"),re(),J(14,"brn-select",5),Te(15,"translate"),Ai("ngModelChange",function(i){return ts(r.type,i)||(r.type=i),i}),J(16,"hlm-select-trigger",6),Le(17,"hlm-select-value"),re(),J(18,"hlm-select-content"),zo(19,E9e,3,4,"hlm-option",7,Ss),re()()()(),J(21,"hlm-dialog-footer")(22,"button",8),je("click",function(){return r.submit()}),de(23),Te(24,"translate"),re()()),e&2&&(ee(2),ct(Ee(3,9,"ADD_NODE")),ee(5),ct(Ee(8,11,"NAME")),ee(2),Ni("ngModel",r.name),ee(3),ct(Ee(13,13,"TYPE")),ee(2),Ni("ngModel",r.type),Be("placeholder",Ee(15,15,"SELECT_DEVICE_TYPE"))("disabled",r.types().length===1),ee(5),Ho(r.types()),ee(3),Be("disabled",!(r.name()&&r.type())),ee(),et(" ",Ee(24,17,"ADD")," "))},dependencies:[_r,zu,Df,ju,Jl,ro,Co,ua,Us,Uu,Qa,Yl,Ql,m2,Rf,Ya,Zi,gs,Ws,Gs,da],encapsulation:2})};var I9e=t=>({name:t}),oN=class t{ref=I(ms);context=Vu();name=ae(()=>this.context.node.name);cancel(){this.ref.close()}delete(){this.ref.close({node:this.context.node})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-delete-node-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],decls:14,vars:15,consts:[["hlmDialogTitle",""],["hlmDialogDescription",""],["hlmBtn","","variant","outline",3,"click"],["hlmBtn","","variant","destructive",3,"click"]],template:function(e,r){e&1&&(J(0,"hlm-dialog-header")(1,"h3",0),de(2),Te(3,"translate"),re()(),J(4,"p",1),de(5),Te(6,"translate"),re(),J(7,"hlm-dialog-footer")(8,"button",2),je("click",function(){return r.cancel()}),de(9),Te(10,"translate"),re(),J(11,"button",3),je("click",function(){return r.delete()}),de(12),Te(13,"translate"),re()()),e&2&&(ee(2),et(" ",DU(3,4,"DELETE_NODE",wa(13,I9e,r.name()))," "),ee(3),et(" ",Ee(6,7,"DELETE_DESC")," "),ee(4),et(" ",Ee(10,9,"CANCEL")," "),ee(3),et(" ",Ee(13,11,"DELETE")," "))},dependencies:[_r,ro,Co,Qa,db,Yl,Ql,m2,Zi],encapsulation:2})};function Rpe(t){return typeof t>"u"||t===null}function N9e(t){return typeof t=="object"&&t!==null}function A9e(t){return Array.isArray(t)?t:Rpe(t)?[]:[t]}function R9e(t,n){var e,r,o,i;if(n)for(i=Object.keys(n),e=0,r=i.length;e<r;e+=1)o=i[e],t[o]=n[o];return t}function O9e(t,n){var e="",r;for(r=0;r<n;r+=1)e+=t;return e}function F9e(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var P9e=Rpe,B9e=N9e,L9e=A9e,$9e=O9e,V9e=F9e,j9e=R9e,ti={isNothing:P9e,isObject:B9e,toArray:L9e,repeat:$9e,isNegativeZero:V9e,extend:j9e};function Ope(t,n){var e="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(e+='in "'+t.mark.name+'" '),e+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!n&&t.mark.snippet&&(e+=`

`+t.mark.snippet),r+" "+e):r}function Rb(t,n){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=n,this.message=Ope(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Rb.prototype=Object.create(Error.prototype);Rb.prototype.constructor=Rb;Rb.prototype.toString=function(n){return this.name+": "+Ope(this,n)};var qs=Rb;function fV(t,n,e,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-n>a&&(i=" ... ",n=r-a+i.length),e-r>a&&(s=" ...",e=r+a-s.length),{str:i+t.slice(n,e).replace(/\t/g,"\u2192")+s,pos:r-n+i.length}}function mV(t,n){return ti.repeat(" ",n-t.length)+t}function z9e(t,n){if(n=Object.create(n||null),!t.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var e=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=e.exec(t.buffer);)o.push(i.index),r.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",l,c,u=Math.min(t.line+n.linesAfter,o.length).toString().length,d=n.maxLength-(n.indent+u+3);for(l=1;l<=n.linesBefore&&!(s-l<0);l++)c=fV(t.buffer,r[s-l],o[s-l],t.position-(r[s]-r[s-l]),d),a=ti.repeat(" ",n.indent)+mV((t.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=fV(t.buffer,r[s],o[s],t.position,d),a+=ti.repeat(" ",n.indent)+mV((t.line+1).toString(),u)+" | "+c.str+`
`,a+=ti.repeat("-",n.indent+u+3+c.pos)+`^
`,l=1;l<=n.linesAfter&&!(s+l>=o.length);l++)c=fV(t.buffer,r[s+l],o[s+l],t.position-(r[s]-r[s+l]),d),a+=ti.repeat(" ",n.indent)+mV((t.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var H9e=z9e,U9e=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],G9e=["scalar","sequence","mapping"];function W9e(t){var n={};return t!==null&&Object.keys(t).forEach(function(e){t[e].forEach(function(r){n[String(r)]=e})}),n}function q9e(t,n){if(n=n||{},Object.keys(n).forEach(function(e){if(U9e.indexOf(e)===-1)throw new qs('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.options=n,this.tag=t,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(e){return e},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=W9e(n.styleAliases||null),G9e.indexOf(this.kind)===-1)throw new qs('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Xi=q9e;function wpe(t,n){var e=[];return t[n].forEach(function(r){var o=e.length;e.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),e[o]=r}),e}function K9e(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,e;function r(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(n=0,e=arguments.length;n<e;n+=1)arguments[n].forEach(r);return t}function vV(t){return this.extend(t)}vV.prototype.extend=function(n){var e=[],r=[];if(n instanceof Xi)r.push(n);else if(Array.isArray(n))r=r.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(e=e.concat(n.implicit)),n.explicit&&(r=r.concat(n.explicit));else throw new qs("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(i){if(!(i instanceof Xi))throw new qs("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new qs("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new qs("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof Xi))throw new qs("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(vV.prototype);return o.implicit=(this.implicit||[]).concat(e),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=wpe(o,"implicit"),o.compiledExplicit=wpe(o,"explicit"),o.compiledTypeMap=K9e(o.compiledImplicit,o.compiledExplicit),o};var Z9e=vV,X9e=new Xi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Y9e=new Xi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Q9e=new Xi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),J9e=new Z9e({explicit:[X9e,Y9e,Q9e]});function eje(t){if(t===null)return!0;var n=t.length;return n===1&&t==="~"||n===4&&(t==="null"||t==="Null"||t==="NULL")}function tje(){return null}function nje(t){return t===null}var rje=new Xi("tag:yaml.org,2002:null",{kind:"scalar",resolve:eje,construct:tje,predicate:nje,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function oje(t){if(t===null)return!1;var n=t.length;return n===4&&(t==="true"||t==="True"||t==="TRUE")||n===5&&(t==="false"||t==="False"||t==="FALSE")}function ije(t){return t==="true"||t==="True"||t==="TRUE"}function sje(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var aje=new Xi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:oje,construct:ije,predicate:sje,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function lje(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function cje(t){return 48<=t&&t<=55}function uje(t){return 48<=t&&t<=57}function dje(t){if(t===null)return!1;var n=t.length,e=0,r=!1,o;if(!n)return!1;if(o=t[e],(o==="-"||o==="+")&&(o=t[++e]),o==="0"){if(e+1===n)return!0;if(o=t[++e],o==="b"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(!lje(t.charCodeAt(e)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(!cje(t.charCodeAt(e)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;e<n;e++)if(o=t[e],o!=="_"){if(!uje(t.charCodeAt(e)))return!1;r=!0}return!(!r||o==="_")}function pje(t){var n=t,e=1,r;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),r=n[0],(r==="-"||r==="+")&&(r==="-"&&(e=-1),n=n.slice(1),r=n[0]),n==="0")return 0;if(r==="0"){if(n[1]==="b")return e*parseInt(n.slice(2),2);if(n[1]==="x")return e*parseInt(n.slice(2),16);if(n[1]==="o")return e*parseInt(n.slice(2),8)}return e*parseInt(n,10)}function hje(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ti.isNegativeZero(t)}var fje=new Xi("tag:yaml.org,2002:int",{kind:"scalar",resolve:dje,construct:pje,predicate:hje,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),mje=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function gje(t){return!(t===null||!mje.test(t)||t[t.length-1]==="_")}function vje(t){var n,e;return n=t.replace(/_/g,"").toLowerCase(),e=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:e*parseFloat(n,10)}var wje=/^[-+]?[0-9]+e/;function yje(t,n){var e;if(isNaN(t))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ti.isNegativeZero(t))return"-0.0";return e=t.toString(10),wje.test(e)?e.replace("e",".e"):e}function xje(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ti.isNegativeZero(t))}var _je=new Xi("tag:yaml.org,2002:float",{kind:"scalar",resolve:gje,construct:vje,predicate:xje,represent:yje,defaultStyle:"lowercase"}),kje=J9e.extend({implicit:[rje,aje,fje,_je]}),bje=kje,Fpe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ppe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Cje(t){return t===null?!1:Fpe.exec(t)!==null||Ppe.exec(t)!==null}function Sje(t){var n,e,r,o,i,s,a,l=0,c=null,u,d,p;if(n=Fpe.exec(t),n===null&&(n=Ppe.exec(t)),n===null)throw new Error("Date resolve error");if(e=+n[1],r=+n[2]-1,o=+n[3],!n[4])return new Date(Date.UTC(e,r,o));if(i=+n[4],s=+n[5],a=+n[6],n[7]){for(l=n[7].slice(0,3);l.length<3;)l+="0";l=+l}return n[9]&&(u=+n[10],d=+(n[11]||0),c=(u*60+d)*6e4,n[9]==="-"&&(c=-c)),p=new Date(Date.UTC(e,r,o,i,s,a,l)),c&&p.setTime(p.getTime()-c),p}function Mje(t){return t.toISOString()}var Tje=new Xi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Cje,construct:Sje,instanceOf:Date,represent:Mje});function Dje(t){return t==="<<"||t===null}var Eje=new Xi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Dje}),kV=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ije(t){if(t===null)return!1;var n,e,r=0,o=t.length,i=kV;for(e=0;e<o;e++)if(n=i.indexOf(t.charAt(e)),!(n>64)){if(n<0)return!1;r+=6}return r%8===0}function Nje(t){var n,e,r=t.replace(/[\r\n=]/g,""),o=r.length,i=kV,s=0,a=[];for(n=0;n<o;n++)n%4===0&&n&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(n));return e=o%4*6,e===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):e===18?(a.push(s>>10&255),a.push(s>>2&255)):e===12&&a.push(s>>4&255),new Uint8Array(a)}function Aje(t){var n="",e=0,r,o,i=t.length,s=kV;for(r=0;r<i;r++)r%3===0&&r&&(n+=s[e>>18&63],n+=s[e>>12&63],n+=s[e>>6&63],n+=s[e&63]),e=(e<<8)+t[r];return o=i%3,o===0?(n+=s[e>>18&63],n+=s[e>>12&63],n+=s[e>>6&63],n+=s[e&63]):o===2?(n+=s[e>>10&63],n+=s[e>>4&63],n+=s[e<<2&63],n+=s[64]):o===1&&(n+=s[e>>2&63],n+=s[e<<4&63],n+=s[64],n+=s[64]),n}function Rje(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Oje=new Xi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ije,construct:Nje,predicate:Rje,represent:Aje}),Fje=Object.prototype.hasOwnProperty,Pje=Object.prototype.toString;function Bje(t){if(t===null)return!0;var n=[],e,r,o,i,s,a=t;for(e=0,r=a.length;e<r;e+=1){if(o=a[e],s=!1,Pje.call(o)!=="[object Object]")return!1;for(i in o)if(Fje.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(n.indexOf(i)===-1)n.push(i);else return!1}return!0}function Lje(t){return t!==null?t:[]}var $je=new Xi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Bje,construct:Lje}),Vje=Object.prototype.toString;function jje(t){if(t===null)return!0;var n,e,r,o,i,s=t;for(i=new Array(s.length),n=0,e=s.length;n<e;n+=1){if(r=s[n],Vje.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[n]=[o[0],r[o[0]]]}return!0}function zje(t){if(t===null)return[];var n,e,r,o,i,s=t;for(i=new Array(s.length),n=0,e=s.length;n<e;n+=1)r=s[n],o=Object.keys(r),i[n]=[o[0],r[o[0]]];return i}var Hje=new Xi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:jje,construct:zje}),Uje=Object.prototype.hasOwnProperty;function Gje(t){if(t===null)return!0;var n,e=t;for(n in e)if(Uje.call(e,n)&&e[n]!==null)return!1;return!0}function Wje(t){return t!==null?t:{}}var qje=new Xi("tag:yaml.org,2002:set",{kind:"mapping",resolve:Gje,construct:Wje}),Bpe=bje.extend({implicit:[Tje,Eje],explicit:[Oje,$je,Hje,qje]}),Pf=Object.prototype.hasOwnProperty,iN=1,Lpe=2,$pe=3,sN=4,gV=1,Kje=2,ype=3,Zje=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Xje=/[\x85\u2028\u2029]/,Yje=/[,\[\]\{\}]/,Vpe=/^(?:!|!!|![a-z\-]+!)$/i,jpe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function xpe(t){return Object.prototype.toString.call(t)}function qu(t){return t===10||t===13}function _2(t){return t===9||t===32}function Ks(t){return t===9||t===32||t===10||t===13}function jw(t){return t===44||t===91||t===93||t===123||t===125}function Qje(t){var n;return 48<=t&&t<=57?t-48:(n=t|32,97<=n&&n<=102?n-97+10:-1)}function Jje(t){return t===120?2:t===117?4:t===85?8:0}function eze(t){return 48<=t&&t<=57?t-48:-1}function _pe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function tze(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var zpe=new Array(256),Hpe=new Array(256);for(x2=0;x2<256;x2++)zpe[x2]=_pe(x2)?1:0,Hpe[x2]=_pe(x2);var x2;function nze(t,n){this.input=t,this.filename=n.filename||null,this.schema=n.schema||Bpe,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Upe(t,n){var e={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return e.snippet=H9e(e),new qs(n,e)}function Et(t,n){throw Upe(t,n)}function aN(t,n){t.onWarning&&t.onWarning.call(null,Upe(t,n))}var kpe={YAML:function(n,e,r){var o,i,s;n.version!==null&&Et(n,"duplication of %YAML directive"),r.length!==1&&Et(n,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Et(n,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Et(n,"unacceptable YAML version of the document"),n.version=r[0],n.checkLineBreaks=s<2,s!==1&&s!==2&&aN(n,"unsupported YAML version of the document")},TAG:function(n,e,r){var o,i;r.length!==2&&Et(n,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],Vpe.test(o)||Et(n,"ill-formed tag handle (first argument) of the TAG directive"),Pf.call(n.tagMap,o)&&Et(n,'there is a previously declared suffix for "'+o+'" tag handle'),jpe.test(i)||Et(n,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Et(n,"tag prefix is malformed: "+i)}n.tagMap[o]=i}};function Ff(t,n,e,r){var o,i,s,a;if(n<e){if(a=t.input.slice(n,e),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Et(t,"expected valid JSON character");else Zje.test(a)&&Et(t,"the stream contains non-printable characters");t.result+=a}}function bpe(t,n,e,r){var o,i,s,a;for(ti.isObject(e)||Et(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(e),s=0,a=o.length;s<a;s+=1)i=o[s],Pf.call(n,i)||(n[i]=e[i],r[i]=!0)}function zw(t,n,e,r,o,i,s,a,l){var c,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),c=0,u=o.length;c<u;c+=1)Array.isArray(o[c])&&Et(t,"nested arrays are not supported inside keys"),typeof o=="object"&&xpe(o[c])==="[object Object]"&&(o[c]="[object Object]");if(typeof o=="object"&&xpe(o)==="[object Object]"&&(o="[object Object]"),o=String(o),n===null&&(n={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(c=0,u=i.length;c<u;c+=1)bpe(t,n,i[c],e);else bpe(t,n,i,e);else!t.json&&!Pf.call(e,o)&&Pf.call(n,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,Et(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(n,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):n[o]=i,delete e[o];return n}function bV(t){var n;n=t.input.charCodeAt(t.position),n===10?t.position++:n===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Et(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ro(t,n,e){for(var r=0,o=t.input.charCodeAt(t.position);o!==0;){for(;_2(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(n&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(qu(o))for(bV(t),o=t.input.charCodeAt(t.position),r++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return e!==-1&&r!==0&&t.lineIndent<e&&aN(t,"deficient indentation"),r}function uN(t){var n=t.position,e;return e=t.input.charCodeAt(n),!!((e===45||e===46)&&e===t.input.charCodeAt(n+1)&&e===t.input.charCodeAt(n+2)&&(n+=3,e=t.input.charCodeAt(n),e===0||Ks(e)))}function CV(t,n){n===1?t.result+=" ":n>1&&(t.result+=ti.repeat(`
`,n-1))}function rze(t,n,e){var r,o,i,s,a,l,c,u,d=t.kind,p=t.result,h;if(h=t.input.charCodeAt(t.position),Ks(h)||jw(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(o=t.input.charCodeAt(t.position+1),Ks(o)||e&&jw(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;h!==0;){if(h===58){if(o=t.input.charCodeAt(t.position+1),Ks(o)||e&&jw(o))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Ks(r))break}else{if(t.position===t.lineStart&&uN(t)||e&&jw(h))break;if(qu(h))if(l=t.line,c=t.lineStart,u=t.lineIndent,Ro(t,!1,-1),t.lineIndent>=n){a=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(Ff(t,i,s,!1),CV(t,t.line-l),i=s=t.position,a=!1),_2(h)||(s=t.position+1),h=t.input.charCodeAt(++t.position)}return Ff(t,i,s,!1),t.result?!0:(t.kind=d,t.result=p,!1)}function oze(t,n){var e,r,o;if(e=t.input.charCodeAt(t.position),e!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=o=t.position;(e=t.input.charCodeAt(t.position))!==0;)if(e===39)if(Ff(t,r,t.position,!0),e=t.input.charCodeAt(++t.position),e===39)r=t.position,t.position++,o=t.position;else return!0;else qu(e)?(Ff(t,r,o,!0),CV(t,Ro(t,!1,n)),r=o=t.position):t.position===t.lineStart&&uN(t)?Et(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);Et(t,"unexpected end of the stream within a single quoted scalar")}function ize(t,n){var e,r,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,e=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Ff(t,e,t.position,!0),t.position++,!0;if(a===92){if(Ff(t,e,t.position,!0),a=t.input.charCodeAt(++t.position),qu(a))Ro(t,!1,n);else if(a<256&&zpe[a])t.result+=Hpe[a],t.position++;else if((s=Jje(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=Qje(a))>=0?i=(i<<4)+s:Et(t,"expected hexadecimal character");t.result+=tze(i),t.position++}else Et(t,"unknown escape sequence");e=r=t.position}else qu(a)?(Ff(t,e,r,!0),CV(t,Ro(t,!1,n)),e=r=t.position):t.position===t.lineStart&&uN(t)?Et(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Et(t,"unexpected end of the stream within a double quoted scalar")}function sze(t,n){var e=!0,r,o,i,s=t.tag,a,l=t.anchor,c,u,d,p,h,f=Object.create(null),m,g,v,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,h=!1,a=[];else if(w===123)u=125,h=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(Ro(t,!0,n),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=s,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=a,!0;e?w===44&&Et(t,"expected the node content, but found ','"):Et(t,"missed comma between flow collection entries"),g=m=v=null,d=p=!1,w===63&&(c=t.input.charCodeAt(t.position+1),Ks(c)&&(d=p=!0,t.position++,Ro(t,!0,n))),r=t.line,o=t.lineStart,i=t.position,Hw(t,n,iN,!1,!0),g=t.tag,m=t.result,Ro(t,!0,n),w=t.input.charCodeAt(t.position),(p||t.line===r)&&w===58&&(d=!0,w=t.input.charCodeAt(++t.position),Ro(t,!0,n),Hw(t,n,iN,!1,!0),v=t.result),h?zw(t,a,f,g,m,v,r,o,i):d?a.push(zw(t,null,f,g,m,v,r,o,i)):a.push(m),Ro(t,!0,n),w=t.input.charCodeAt(t.position),w===44?(e=!0,w=t.input.charCodeAt(++t.position)):e=!1}Et(t,"unexpected end of the stream within a flow collection")}function aze(t,n){var e,r,o=gV,i=!1,s=!1,a=n,l=0,c=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)gV===o?o=d===43?ype:Kje:Et(t,"repeat of a chomping mode identifier");else if((u=eze(d))>=0)u===0?Et(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Et(t,"repeat of an indentation width identifier"):(a=n+u-1,s=!0);else break;if(_2(d)){do d=t.input.charCodeAt(++t.position);while(_2(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!qu(d)&&d!==0)}for(;d!==0;){for(bV(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),qu(d)){l++;continue}if(t.lineIndent<a){o===ype?t.result+=ti.repeat(`
`,i?1+l:l):o===gV&&i&&(t.result+=`
`);break}for(r?_2(d)?(c=!0,t.result+=ti.repeat(`
`,i?1+l:l)):c?(c=!1,t.result+=ti.repeat(`
`,l+1)):l===0?i&&(t.result+=" "):t.result+=ti.repeat(`
`,l):t.result+=ti.repeat(`
`,i?1+l:l),i=!0,s=!0,l=0,e=t.position;!qu(d)&&d!==0;)d=t.input.charCodeAt(++t.position);Ff(t,e,t.position,!1)}return!0}function Cpe(t,n){var e,r=t.tag,o=t.anchor,i=[],s,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Et(t,"tab characters must not be used in indentation")),!(l!==45||(s=t.input.charCodeAt(t.position+1),!Ks(s))));){if(a=!0,t.position++,Ro(t,!0,-1)&&t.lineIndent<=n){i.push(null),l=t.input.charCodeAt(t.position);continue}if(e=t.line,Hw(t,n,$pe,!1,!0),i.push(t.result),Ro(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===e||t.lineIndent>n)&&l!==0)Et(t,"bad indentation of a sequence entry");else if(t.lineIndent<n)break}return a?(t.tag=r,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function lze(t,n,e){var r,o,i,s,a,l,c=t.tag,u=t.anchor,d={},p=Object.create(null),h=null,f=null,m=null,g=!1,v=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);w!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Et(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),i=t.line,(w===63||w===58)&&Ks(r))w===63?(g&&(zw(t,d,p,h,f,null,s,a,l),h=f=m=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):Et(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=r;else{if(s=t.line,a=t.lineStart,l=t.position,!Hw(t,e,Lpe,!1,!0))break;if(t.line===i){for(w=t.input.charCodeAt(t.position);_2(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),Ks(w)||Et(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(zw(t,d,p,h,f,null,s,a,l),h=f=m=null),v=!0,g=!1,o=!1,h=t.tag,f=t.result;else if(v)Et(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(v)Et(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===i||t.lineIndent>n)&&(g&&(s=t.line,a=t.lineStart,l=t.position),Hw(t,n,sN,!0,o)&&(g?f=t.result:m=t.result),g||(zw(t,d,p,h,f,m,s,a,l),h=f=m=null),Ro(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>n)&&w!==0)Et(t,"bad indentation of a mapping entry");else if(t.lineIndent<n)break}return g&&zw(t,d,p,h,f,null,s,a,l),v&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),v}function cze(t){var n,e=!1,r=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Et(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(e=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",n=t.position,e){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(n,t.position),s=t.input.charCodeAt(++t.position)):Et(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ks(s);)s===33&&(r?Et(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(n-1,t.position+1),Vpe.test(o)||Et(t,"named tag handle cannot contain such characters"),r=!0,n=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(n,t.position),Yje.test(i)&&Et(t,"tag suffix cannot contain flow indicator characters")}i&&!jpe.test(i)&&Et(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Et(t,"tag name is malformed: "+i)}return e?t.tag=i:Pf.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:Et(t,'undeclared tag handle "'+o+'"'),!0}function uze(t){var n,e;if(e=t.input.charCodeAt(t.position),e!==38)return!1;for(t.anchor!==null&&Et(t,"duplication of an anchor property"),e=t.input.charCodeAt(++t.position),n=t.position;e!==0&&!Ks(e)&&!jw(e);)e=t.input.charCodeAt(++t.position);return t.position===n&&Et(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(n,t.position),!0}function dze(t){var n,e,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),n=t.position;r!==0&&!Ks(r)&&!jw(r);)r=t.input.charCodeAt(++t.position);return t.position===n&&Et(t,"name of an alias node must contain at least one character"),e=t.input.slice(n,t.position),Pf.call(t.anchorMap,e)||Et(t,'unidentified alias "'+e+'"'),t.result=t.anchorMap[e],Ro(t,!0,-1),!0}function Hw(t,n,e,r,o){var i,s,a,l=1,c=!1,u=!1,d,p,h,f,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=sN===e||$pe===e,r&&Ro(t,!0,-1)&&(c=!0,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)),l===1)for(;cze(t)||uze(t);)Ro(t,!0,-1)?(c=!0,a=i,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)):a=!1;if(a&&(a=c||o),(l===1||sN===e)&&(iN===e||Lpe===e?m=n:m=n+1,g=t.position-t.lineStart,l===1?a&&(Cpe(t,g)||lze(t,g,m))||sze(t,m)?u=!0:(s&&aze(t,m)||oze(t,m)||ize(t,m)?u=!0:dze(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Et(t,"alias node should not have any properties")):rze(t,m,iN===e)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=a&&Cpe(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Et(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,p=t.implicitTypes.length;d<p;d+=1)if(f=t.implicitTypes[d],f.resolve(t.result)){t.result=f.construct(t.result),t.tag=f.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Pf.call(t.typeMap[t.kind||"fallback"],t.tag))f=t.typeMap[t.kind||"fallback"][t.tag];else for(f=null,h=t.typeMap.multi[t.kind||"fallback"],d=0,p=h.length;d<p;d+=1)if(t.tag.slice(0,h[d].tag.length)===h[d].tag){f=h[d];break}f||Et(t,"unknown tag !<"+t.tag+">"),t.result!==null&&f.kind!==t.kind&&Et(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+f.kind+'", not "'+t.kind+'"'),f.resolve(t.result,t.tag)?(t.result=f.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Et(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function pze(t){var n=t.position,e,r,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Ro(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),e=t.position;s!==0&&!Ks(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(e,t.position),o=[],r.length<1&&Et(t,"directive name must not be less than one character in length");s!==0;){for(;_2(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!qu(s));break}if(qu(s))break;for(e=t.position;s!==0&&!Ks(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(e,t.position))}s!==0&&bV(t),Pf.call(kpe,r)?kpe[r](t,r,o):aN(t,'unknown document directive "'+r+'"')}if(Ro(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ro(t,!0,-1)):i&&Et(t,"directives end mark is expected"),Hw(t,t.lineIndent-1,sN,!1,!0),Ro(t,!0,-1),t.checkLineBreaks&&Xje.test(t.input.slice(n,t.position))&&aN(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&uN(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ro(t,!0,-1));return}if(t.position<t.length-1)Et(t,"end of the stream or a document separator is expected");else return}function Gpe(t,n){t=String(t),n=n||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var e=new nze(t,n),r=t.indexOf("\0");for(r!==-1&&(e.position=r,Et(e,"null byte is not allowed in input")),e.input+="\0";e.input.charCodeAt(e.position)===32;)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)pze(e);return e.documents}function hze(t,n,e){n!==null&&typeof n=="object"&&typeof e>"u"&&(e=n,n=null);var r=Gpe(t,e);if(typeof n!="function")return r;for(var o=0,i=r.length;o<i;o+=1)n(r[o])}function fze(t,n){var e=Gpe(t,n);if(e.length!==0){if(e.length===1)return e[0];throw new qs("expected a single document in the stream, but found more")}}var mze=hze,gze=fze,Wpe={loadAll:mze,load:gze},qpe=Object.prototype.toString,Kpe=Object.prototype.hasOwnProperty,SV=65279,vze=9,Ob=10,wze=13,yze=32,xze=33,_ze=34,wV=35,kze=37,bze=38,Cze=39,Sze=42,Zpe=44,Mze=45,lN=58,Tze=61,Dze=62,Eze=63,Ize=64,Xpe=91,Ype=93,Nze=96,Qpe=123,Aze=124,Jpe=125,Yi={};Yi[0]="\\0";Yi[7]="\\a";Yi[8]="\\b";Yi[9]="\\t";Yi[10]="\\n";Yi[11]="\\v";Yi[12]="\\f";Yi[13]="\\r";Yi[27]="\\e";Yi[34]='\\"';Yi[92]="\\\\";Yi[133]="\\N";Yi[160]="\\_";Yi[8232]="\\L";Yi[8233]="\\P";var Rze=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Oze=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Fze(t,n){var e,r,o,i,s,a,l;if(n===null)return{};for(e={},r=Object.keys(n),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(n[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=t.compiledTypeMap.fallback[s],l&&Kpe.call(l.styleAliases,a)&&(a=l.styleAliases[a]),e[s]=a;return e}function Pze(t){var n,e,r;if(n=t.toString(16).toUpperCase(),t<=255)e="x",r=2;else if(t<=65535)e="u",r=4;else if(t<=4294967295)e="U",r=8;else throw new qs("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+e+ti.repeat("0",r-n.length)+n}var Bze=1,Fb=2;function Lze(t){this.schema=t.schema||Bpe,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ti.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Fze(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Fb:Bze,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Spe(t,n){for(var e=ti.repeat(" ",n),r=0,o=-1,i="",s,a=t.length;r<a;)o=t.indexOf(`
`,r),o===-1?(s=t.slice(r),r=a):(s=t.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=e),i+=s;return i}function yV(t,n){return`
`+ti.repeat(" ",t.indent*n)}function $ze(t,n){var e,r,o;for(e=0,r=t.implicitTypes.length;e<r;e+=1)if(o=t.implicitTypes[e],o.resolve(n))return!0;return!1}function cN(t){return t===yze||t===vze}function Pb(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==SV||65536<=t&&t<=1114111}function Mpe(t){return Pb(t)&&t!==SV&&t!==wze&&t!==Ob}function Tpe(t,n,e){var r=Mpe(t),o=r&&!cN(t);return(e?r:r&&t!==Zpe&&t!==Xpe&&t!==Ype&&t!==Qpe&&t!==Jpe)&&t!==wV&&!(n===lN&&!o)||Mpe(n)&&!cN(n)&&t===wV||n===lN&&o}function Vze(t){return Pb(t)&&t!==SV&&!cN(t)&&t!==Mze&&t!==Eze&&t!==lN&&t!==Zpe&&t!==Xpe&&t!==Ype&&t!==Qpe&&t!==Jpe&&t!==wV&&t!==bze&&t!==Sze&&t!==xze&&t!==Aze&&t!==Tze&&t!==Dze&&t!==Cze&&t!==_ze&&t!==kze&&t!==Ize&&t!==Nze}function jze(t){return!cN(t)&&t!==lN}function Ab(t,n){var e=t.charCodeAt(n),r;return e>=55296&&e<=56319&&n+1<t.length&&(r=t.charCodeAt(n+1),r>=56320&&r<=57343)?(e-55296)*1024+r-56320+65536:e}function ehe(t){var n=/^\n* /;return n.test(t)}var the=1,xV=2,nhe=3,rhe=4,Vw=5;function zze(t,n,e,r,o,i,s,a){var l,c=0,u=null,d=!1,p=!1,h=r!==-1,f=-1,m=Vze(Ab(t,0))&&jze(Ab(t,t.length-1));if(n||s)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Ab(t,l),!Pb(c))return Vw;m=m&&Tpe(c,u,a),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Ab(t,l),c===Ob)d=!0,h&&(p=p||l-f-1>r&&t[f+1]!==" ",f=l);else if(!Pb(c))return Vw;m=m&&Tpe(c,u,a),u=c}p=p||h&&l-f-1>r&&t[f+1]!==" "}return!d&&!p?m&&!s&&!o(t)?the:i===Fb?Vw:xV:e>9&&ehe(t)?Vw:s?i===Fb?Vw:xV:p?rhe:nhe}function Hze(t,n,e,r,o){t.dump=function(){if(n.length===0)return t.quotingType===Fb?'""':"''";if(!t.noCompatMode&&(Rze.indexOf(n)!==-1||Oze.test(n)))return t.quotingType===Fb?'"'+n+'"':"'"+n+"'";var i=t.indent*Math.max(1,e),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&e>=t.flowLevel;function l(c){return $ze(t,c)}switch(zze(n,a,t.indent,s,l,t.quotingType,t.forceQuotes&&!r,o)){case the:return n;case xV:return"'"+n.replace(/'/g,"''")+"'";case nhe:return"|"+Dpe(n,t.indent)+Epe(Spe(n,i));case rhe:return">"+Dpe(n,t.indent)+Epe(Spe(Uze(n,s),i));case Vw:return'"'+Gze(n)+'"';default:throw new qs("impossible error: invalid scalar style")}}()}function Dpe(t,n){var e=ehe(t)?String(n):"",r=t[t.length-1]===`
`,o=r&&(t[t.length-2]===`
`||t===`
`),i=o?"+":r?"":"-";return e+i+`
`}function Epe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Uze(t,n){for(var e=/(\n+)([^\n]*)/g,r=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,e.lastIndex=c,Ipe(t.slice(0,c),n)}(),o=t[0]===`
`||t[0]===" ",i,s;s=e.exec(t);){var a=s[1],l=s[2];i=l[0]===" ",r+=a+(!o&&!i&&l!==""?`
`:"")+Ipe(l,n),o=i}return r}function Ipe(t,n){if(t===""||t[0]===" ")return t;for(var e=/ [^ ]/g,r,o=0,i,s=0,a=0,l="";r=e.exec(t);)a=r.index,a-o>n&&(i=s>o?s:a,l+=`
`+t.slice(o,i),o=i+1),s=a;return l+=`
`,t.length-o>n&&s>o?l+=t.slice(o,s)+`
`+t.slice(s+1):l+=t.slice(o),l.slice(1)}function Gze(t){for(var n="",e=0,r,o=0;o<t.length;e>=65536?o+=2:o++)e=Ab(t,o),r=Yi[e],!r&&Pb(e)?(n+=t[o],e>=65536&&(n+=t[o+1])):n+=r||Pze(e);return n}function Wze(t,n,e){var r="",o=t.tag,i,s,a;for(i=0,s=e.length;i<s;i+=1)a=e[i],t.replacer&&(a=t.replacer.call(e,String(i),a)),(Qp(t,n,a,!1,!1)||typeof a>"u"&&Qp(t,n,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}function Npe(t,n,e,r){var o="",i=t.tag,s,a,l;for(s=0,a=e.length;s<a;s+=1)l=e[s],t.replacer&&(l=t.replacer.call(e,String(s),l)),(Qp(t,n+1,l,!0,!0,!1,!0)||typeof l>"u"&&Qp(t,n+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=yV(t,n)),t.dump&&Ob===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function qze(t,n,e){var r="",o=t.tag,i=Object.keys(e),s,a,l,c,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=i[s],c=e[l],t.replacer&&(c=t.replacer.call(e,l,c)),Qp(t,n,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Qp(t,n,c,!1,!1)&&(u+=t.dump,r+=u));t.tag=o,t.dump="{"+r+"}"}function Kze(t,n,e,r){var o="",i=t.tag,s=Object.keys(e),a,l,c,u,d,p;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new qs("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)p="",(!r||o!=="")&&(p+=yV(t,n)),c=s[a],u=e[c],t.replacer&&(u=t.replacer.call(e,c,u)),Qp(t,n+1,c,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&Ob===t.dump.charCodeAt(0)?p+="?":p+="? "),p+=t.dump,d&&(p+=yV(t,n)),Qp(t,n+1,u,!0,d)&&(t.dump&&Ob===t.dump.charCodeAt(0)?p+=":":p+=": ",p+=t.dump,o+=p));t.tag=i,t.dump=o||"{}"}function Ape(t,n,e){var r,o,i,s,a,l;for(o=e?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof n=="object"&&n instanceof a.instanceOf)&&(!a.predicate||a.predicate(n))){if(e?a.multi&&a.representName?t.tag=a.representName(n):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,qpe.call(a.represent)==="[object Function]")r=a.represent(n,l);else if(Kpe.call(a.represent,l))r=a.represent[l](n,l);else throw new qs("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=r}return!0}return!1}function Qp(t,n,e,r,o,i,s){t.tag=null,t.dump=e,Ape(t,e,!1)||Ape(t,e,!0);var a=qpe.call(t.dump),l=r,c;r&&(r=t.flowLevel<0||t.flowLevel>n);var u=a==="[object Object]"||a==="[object Array]",d,p;if(u&&(d=t.duplicates.indexOf(e),p=d!==-1),(t.tag!==null&&t.tag!=="?"||p||t.indent!==2&&n>0)&&(o=!1),p&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&p&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(Kze(t,n,t.dump,o),p&&(t.dump="&ref_"+d+t.dump)):(qze(t,n,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&n>0?Npe(t,n-1,t.dump,o):Npe(t,n,t.dump,o),p&&(t.dump="&ref_"+d+t.dump)):(Wze(t,n,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&Hze(t,t.dump,n,i,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new qs("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function Zze(t,n){var e=[],r=[],o,i;for(_V(t,e,r),o=0,i=r.length;o<i;o+=1)n.duplicates.push(e[r[o]]);n.usedDuplicates=new Array(i)}function _V(t,n,e){var r,o,i;if(t!==null&&typeof t=="object")if(o=n.indexOf(t),o!==-1)e.indexOf(o)===-1&&e.push(o);else if(n.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)_V(t[o],n,e);else for(r=Object.keys(t),o=0,i=r.length;o<i;o+=1)_V(t[r[o]],n,e)}function Xze(t,n){n=n||{};var e=new Lze(n);e.noRefs||Zze(t,e);var r=t;return e.replacer&&(r=e.replacer.call({"":r},"",r)),Qp(e,0,r,!0,!0)?e.dump+`
`:""}var Yze=Xze,Qze={dump:Yze};function MV(t,n){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var ohe=Wpe.load,fKn=Wpe.loadAll,ihe=Qze.dump;var mKn=MV("safeLoad","load"),gKn=MV("safeLoadAll","loadAll"),vKn=MV("safeDump","dump");var Oo=class t{constructor(n,e,r,o,i,s){this.navigationRouter=n;this.dialog=e;this.config=r;this.state=o;this.focusedNode=Rw(this.navigationRouter.events.pipe(xn(a=>a instanceof ns),It(({url:a})=>a.split("/").length>1?a.split("/")[1]:void 0),It(a=>this._network.getNode(a??""))))}_network=new $w;get nodes(){return this._network.nodes}get router(){return this._network.router}get devices(){return this._network.devices}focusedNode;new(){this._network.reset(),this.focusedNode()&&this.navigationRouter.navigate([""]),this.state.reset(!1),Ns.success(this.config.translate.instant("PROJECT_CREATED"))}loadFromFile(){Ns.promise(Gn.openFile(".yaml"),{loading:this.config.translate.instant("PROJECT_IMPORTING"),success:n=>(this._network.fromObject(ohe(n)),this.focusedNode()&&!this._network.getNode(this.focusedNode().mac??"")&&this.navigationRouter.navigate([""]),this.state.reset(!1),this.state.setState(this._network.toObject(),!1),this.config.translate.instant("PROJECT_IMPORTED")),error:()=>this.config.translate.instant("PROJECT_NOT_IMPORTED")})}saveToFile(){Ns.promise(new Promise((n,e)=>{let r=["iot","simulator",...new Date().toISOString().split(/T|\./g,2)].join("_").replace(/-|:/g,"").concat(".yaml"),o=ihe(this._network.toObject(),{noCompatMode:!0,forceQuotes:!0});n([r,o,"application/x-yaml"])}).then(([n,e,r])=>Gn.saveFile(n,e,r)),{loading:this.config.translate.instant("PROJECT_EXPORTING"),success:()=>(this.state.replaceState(this._network.toObject(),!1),this.config.translate.instant("PROJECT_EXPORTED")),error:()=>this.config.translate.instant("PROJECT_NOT_EXPORTED")})}addNode(n,e){return new Promise((r,o)=>{if(this._network.router&&(Array.isArray(n)?qn.RouterTypes.some(i=>n.includes(i)):qn.RouterTypes.includes(n)))return Ns.error(this.config.translate.instant("ROUTER_EXISTS")),o();this.dialog.open(rN,{context:{type:n}}).closed$.subscribe(i=>i?(this._network.addNode(qn.RouterTypes.includes(i.type)?new Lw(i.name,e):new Yp(i.name,i.type,e)),this.state.setState(this._network.toObject(),!1),Ns.success(this.config.translate.instant("NODE_ADDED",{name:i.name})),r(!0)):r(!1))})}deleteNode(n){return new Promise((e,r)=>{let o=this._network.getNode(n);if(!o)return Ns.error(this.config.translate.instant("NODE_NOT_FOUND",{name:n})),r();this.dialog.open(oN,{context:{node:o}}).closed$.subscribe(i=>i?(this._network.deleteNode(i.node.mac),this.focusedNode()?.mac===o.mac&&this.navigationRouter.navigate([""]),this.state.setState(this._network.toObject(),!1),Ns.success(this.config.translate.instant("NODE_DELETED",{name:i.node.name})),e(!0)):e(!1))})}getNode(n){return this._network.getNode(n)}getConnectedNodes(n){return this._network.getConnectedNodes(n)}static \u0275fac=function(e){return new(e||t)(Xe(Go),Xe(Mf),Xe(Gn),Xe(Fr),Xe(Xl),Xe(vl))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})};var dN=(()=>{class t{_listeners=[];notify(e,r){for(let o of this._listeners)o(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $b=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenuGroup",""]],hostAttrs:["role","group",1,"cdk-menu-group"],exportAs:["cdkMenuGroup"],features:[ht([{provide:dN,useClass:dN}])]})}return t})(),pN=new Me("cdk-menu"),ec=function(t){return t[t.nextItem=0]="nextItem",t[t.previousItem=1]="previousItem",t[t.currentItem=2]="currentItem",t}(ec||{}),Ku=new Me("cdk-menu-stack"),Jze={provide:Ku,deps:[[new r1,new Ay,new b4(Ku)]],useFactory:t=>t||new hN},eHe=t=>({provide:Ku,deps:[[new r1,new Ay,new b4(Ku)]],useFactory:n=>n||hN.inline(t)}),hN=(()=>{class t{id=I(Sf).getId("cdk-menu-stack-");_elements=[];_close=new ot;_empty=new ot;_hasFocus=new ot;closed=this._close;hasFocus=this._hasFocus.pipe(ma(!1),fa(0),L2());emptied=this._empty;_inlineMenuOrientation=null;static inline(e){let r=new t;return r._inlineMenuOrientation=e,r}push(e){this._elements.push(e)}close(e,r){let{focusNextOnEmpty:o,focusParentTrigger:i}=ue({},r);if(this._elements.indexOf(e)>=0){let s;do s=this._elements.pop(),this._close.next({item:s,focusParentTrigger:i});while(s!==e);this.isEmpty()&&this._empty.next(o)}}closeSubMenuOf(e){let r=!1;if(this._elements.indexOf(e)>=0)for(r=this.peek()!==e;this.peek()!==e;)this._close.next({item:this._elements.pop()});return r}closeAll(e){let{focusNextOnEmpty:r,focusParentTrigger:o}=ue({},e);if(!this.isEmpty()){for(;!this.isEmpty();){let i=this._elements.pop();i&&this._close.next({item:i,focusParentTrigger:o})}this._empty.next(r)}}isEmpty(){return!this._elements.length}length(){return this._elements.length}peek(){return this._elements[this._elements.length-1]}hasInlineMenu(){return this._inlineMenuOrientation!=null}inlineMenuOrientation(){return this._inlineMenuOrientation}setHasFocus(e){this._hasFocus.next(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})(),fN=new Me("cdk-menu-trigger"),tHe=new Me("cdk-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=I(Ka);return()=>t.scrollStrategies.reposition()}}),she=(()=>{class t{injector=I(Yt);viewContainerRef=I(Br);menuStack=I(Ku);menuScrollStrategy=I(tHe);menuPosition;opened=new Xt;closed=new Xt;menuTemplateRef;menuData;overlayRef=null;destroyed=new ot;stopOutsideClicksListener=nc(this.closed,this.destroyed);childMenu;_menuPortal;_childMenuInjector;ngOnDestroy(){this._destroyOverlay(),this.destroyed.next(),this.destroyed.complete()}isOpen(){return!!this.overlayRef?.hasAttached()}registerChildMenu(e){this.childMenu=e}getMenuContentPortal(){let e=this.menuTemplateRef!==this._menuPortal?.templateRef;return this.menuTemplateRef&&(!this._menuPortal||e)&&(this._menuPortal=new Xp(this.menuTemplateRef,this.viewContainerRef,this.menuData,this._getChildMenuInjector())),this._menuPortal}isElementInsideMenuStack(e){for(let r=e;r;r=r?.parentElement??null)if(r.getAttribute("data-cdk-menu-stack-id")===this.menuStack.id)return!0;return!1}_destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}_getChildMenuInjector(){return this._childMenuInjector=this._childMenuInjector||Yt.create({providers:[{provide:fN,useValue:this},{provide:Ku,useValue:this.menuStack}],parent:this.injector}),this._childMenuInjector}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,hostVars:2,hostBindings:function(r,o){r&2&&At("aria-controls",o.childMenu==null?null:o.childMenu.id)("data-cdk-menu-stack-id",o.menuStack.id)}})}return t})();var DV=new Me("cdk-menu-aim");function ahe(t,n){if(!n.isTrusted)return!1;let e=t.nativeElement,r=n.keyCode;return e.nodeName==="BUTTON"&&!e.disabled?r===13||r===32:e.nodeName==="A"?r===13:!1}var Vb=(()=>{class t extends she{_elementRef=I(Mt);_overlay=I(Ka);_ngZone=I(Pt);_changeDetectorRef=I(Lr);_inputModalityDetector=I(lb);_directionality=I(Ki,{optional:!0});_renderer=I(po);_cleanupMouseenter;_parentMenu=I(pN,{optional:!0});_menuAim=I(DV,{optional:!0});constructor(){super(),this._setRole(),this._registerCloseHandler(),this._subscribeToMenuStackClosed(),this._subscribeToMouseEnter(),this._subscribeToMenuStackHasFocus(),this._setType()}toggle(){this.isOpen()?this.close():this.open()}open(){!this.isOpen()&&this.menuTemplateRef!=null&&(this.opened.next(),this.overlayRef=this.overlayRef||this._overlay.create(this._getOverlayConfig()),this.overlayRef.attach(this.getMenuContentPortal()),this._changeDetectorRef.markForCheck(),this._subscribeToOutsideClicks())}close(){this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this._changeDetectorRef.markForCheck()),this._closeSiblingTriggers()}getMenu(){return this.childMenu}ngOnChanges(e){e.menuPosition&&this.overlayRef&&this.overlayRef.updatePositionStrategy(this._getOverlayPositionStrategy())}ngOnDestroy(){this._cleanupMouseenter(),super.ngOnDestroy()}_toggleOnKeydown(e){let r=this._parentMenu?.orientation==="vertical";switch(e.keyCode){case 32:case 13:!Jr(e)&&!ahe(this._elementRef,e)&&(this.toggle(),this.childMenu?.focusFirstItem("keyboard"));break;case 39:Jr(e)||this._parentMenu&&r&&this._directionality?.value!=="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 37:Jr(e)||this._parentMenu&&r&&this._directionality?.value==="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 40:case 38:Jr(e)||r||(e.preventDefault(),this.open(),e.keyCode===40?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusLastItem("keyboard"));break}}_handleClick(){this.toggle(),this.childMenu?.focusFirstItem("mouse")}_setHasFocus(e){this._parentMenu||this.menuStack.setHasFocus(e)}_subscribeToMouseEnter(){this._cleanupMouseenter=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"mouseenter",()=>{if(this._inputModalityDetector.mostRecentModality!=="touch"&&!this.menuStack.isEmpty()&&!this.isOpen()){let e=()=>this._ngZone.run(()=>{this._closeSiblingTriggers(),this.open()});this._menuAim?this._menuAim.toggle(e):e()}}))}_closeSiblingTriggers(){this._parentMenu?!this.menuStack.closeSubMenuOf(this._parentMenu)&&this.menuStack.peek()!==this._parentMenu&&this.menuStack.closeAll():this.menuStack.closeAll()}_getOverlayConfig(){return new $u({positionStrategy:this._getOverlayPositionStrategy(),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._elementRef).withLockedPosition().withFlexibleDimensions(!1).withPositions(this._getOverlayPositions())}_getOverlayPositions(){return this.menuPosition??(!this._parentMenu||this._parentMenu.orientation==="horizontal"?N3:O$)}_registerCloseHandler(){this._parentMenu||this.menuStack.closed.pipe(en(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.close()})}_subscribeToOutsideClicks(){this.overlayRef&&this.overlayRef.outsidePointerEvents().pipe(en(this.stopOutsideClicksListener)).subscribe(e=>{let r=ca(e),o=this._elementRef.nativeElement;r!==o&&!o.contains(r)&&(this.isElementInsideMenuStack(r)?this._closeSiblingTriggers():this.menuStack.closeAll())})}_subscribeToMenuStackHasFocus(){this._parentMenu||this.menuStack.hasFocus.pipe(en(this.destroyed)).subscribe(e=>{e||this.menuStack.closeAll()})}_subscribeToMenuStackClosed(){this._parentMenu||this.menuStack.closed.subscribe(({focusParentTrigger:e})=>{e&&!this.menuStack.length()&&this._elementRef.nativeElement.focus()})}_setRole(){this._parentMenu||this._elementRef.nativeElement.setAttribute("role","button")}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenuTriggerFor",""]],hostAttrs:[1,"cdk-menu-trigger"],hostVars:2,hostBindings:function(r,o){r&1&&je("focusin",function(){return o._setHasFocus(!0)})("focusout",function(){return o._setHasFocus(!1)})("keydown",function(s){return o._toggleOnKeydown(s)})("click",function(){return o._handleClick()}),r&2&&At("aria-haspopup",o.menuTemplateRef?"menu":null)("aria-expanded",o.menuTemplateRef==null?null:o.isOpen())},inputs:{menuTemplateRef:[0,"cdkMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkMenuPosition","menuPosition"],menuData:[0,"cdkMenuTriggerData","menuData"]},outputs:{opened:"cdkMenuOpened",closed:"cdkMenuClosed"},exportAs:["cdkMenuTriggerFor"],features:[ht([{provide:fN,useExisting:t},Jze]),Mn,uo]})}return t})(),Bf=(()=>{class t{_dir=I(Ki,{optional:!0});_elementRef=I(Mt);_ngZone=I(Pt);_inputModalityDetector=I(lb);_renderer=I(po);_cleanupMouseEnter;_menuAim=I(DV,{optional:!0});_menuStack=I(Ku);_parentMenu=I(pN,{optional:!0});_menuTrigger=I(Vb,{optional:!0,self:!0});disabled=!1;typeaheadLabel;triggered=new Xt;get hasMenu(){return this._menuTrigger?.menuTemplateRef!=null}_tabindex=-1;closeOnSpacebarTrigger=!0;destroyed=new ot;constructor(){this._setupMouseEnter(),this._setType(),this._isStandaloneItem()&&(this._tabindex=0)}ngOnDestroy(){this._cleanupMouseEnter?.(),this.destroyed.next(),this.destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}trigger(e){let{keepOpen:r}=ue({},e);!this.disabled&&!this.hasMenu&&(this.triggered.next(),r||this._menuStack.closeAll({focusParentTrigger:!0}))}isMenuOpen(){return!!this._menuTrigger?.isOpen()}getMenu(){return this._menuTrigger?.getMenu()}getMenuTrigger(){return this._menuTrigger}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}_resetTabIndex(){this._isStandaloneItem()||(this._tabindex=-1)}_setTabIndex(e){this.disabled||(!e||!this._menuStack.isEmpty())&&(this._tabindex=0)}_onKeydown(e){switch(e.keyCode){case 32:case 13:if(!Jr(e)&&!ahe(this._elementRef,e)){let r=this._elementRef.nativeElement.nodeName;r!=="A"&&r!=="BUTTON"&&e.preventDefault(),this.trigger({keepOpen:e.keyCode===32&&!this.closeOnSpacebarTrigger})}break;case 39:Jr(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._forwardArrowPressed(e):this._backArrowPressed(e));break;case 37:Jr(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._backArrowPressed(e):this._forwardArrowPressed(e));break}}_isStandaloneItem(){return!this._parentMenu}_backArrowPressed(e){let r=this._parentMenu;(this._menuStack.hasInlineMenu()||this._menuStack.length()>1)&&(e.preventDefault(),this._menuStack.close(r,{focusNextOnEmpty:this._menuStack.inlineMenuOrientation()==="horizontal"?ec.previousItem:ec.currentItem,focusParentTrigger:!0}))}_forwardArrowPressed(e){!this.hasMenu&&this._menuStack.inlineMenuOrientation()==="horizontal"&&(e.preventDefault(),this._menuStack.closeAll({focusNextOnEmpty:ec.nextItem,focusParentTrigger:!0}))}_setupMouseEnter(){if(!this._isStandaloneItem()){let e=()=>this._ngZone.run(()=>this._menuStack.closeSubMenuOf(this._parentMenu));this._cleanupMouseEnter=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"mouseenter",()=>{this._inputModalityDetector.mostRecentModality!=="touch"&&!this._menuStack.isEmpty()&&!this.hasMenu&&(this._menuAim?this._menuAim.toggle(e):e())}))}}_isParentVertical(){return this._parentMenu?.orientation==="vertical"}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenuItem",""]],hostAttrs:["role","menuitem",1,"cdk-menu-item"],hostVars:2,hostBindings:function(r,o){r&1&&je("blur",function(){return o._resetTabIndex()})("focus",function(){return o._setTabIndex()})("click",function(){return o.trigger()})("keydown",function(s){return o._onKeydown(s)}),r&2&&(Gr("tabindex",o._tabindex),At("aria-disabled",o.disabled||null))},inputs:{disabled:[2,"cdkMenuItemDisabled","disabled",rt],typeaheadLabel:[0,"cdkMenuitemTypeaheadLabel","typeaheadLabel"]},outputs:{triggered:"cdkMenuItemTriggered"},exportAs:["cdkMenuItem"]})}return t})(),TV=class{_renderer;_items;_eventCleanups;_itemsSubscription;entered=new ot;exited=new ot;activeElement;previousElement;constructor(n,e){this._renderer=n,this._items=e,this._bindEvents(),this.entered.subscribe(r=>this.activeElement=r),this.exited.subscribe(()=>{this.previousElement=this.activeElement,this.activeElement=void 0})}destroy(){this._cleanupEvents(),this._itemsSubscription?.unsubscribe()}_bindEvents(){this._itemsSubscription=this._items.changes.pipe(ma(this._items)).subscribe(()=>{this._cleanupEvents(),this._eventCleanups=[],this._items.forEach(n=>{let e=n._elementRef.nativeElement;this._eventCleanups.push(this._renderer.listen(e,"mouseenter",()=>{this.entered.next(n)}),this._renderer.listen(e,"mouseout",()=>{this.exited.next(n)}))})})}_cleanupEvents(){this._eventCleanups?.forEach(n=>n()),this._eventCleanups=void 0}},lhe=(()=>{class t extends $b{_focusMonitor=I(f2);ngZone=I(Pt);_renderer=I(po);nativeElement=I(Mt).nativeElement;menuStack=I(Ku);menuAim=I(DV,{optional:!0,self:!0});dir=I(Ki,{optional:!0});id=I(Sf).getId("cdk-menu-");items;orientation="vertical";isInline=!1;keyManager;destroyed=new ot;triggerItem;pointerTracker;_menuStackHasFocus=Ye(!1);_tabIndexSignal=ae(()=>{let e=this._menuStackHasFocus()?-1:0;return this.isInline?e:null});ngAfterContentInit(){this.isInline||this.menuStack.push(this),this._setKeyManager(),this._handleFocus(),this._subscribeToMenuStackHasFocus(),this._subscribeToMenuOpen(),this._subscribeToMenuStackClosed(),this._setUpPointerTracker()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.nativeElement),this.keyManager?.destroy(),this.destroyed.next(),this.destroyed.complete(),this.pointerTracker?.destroy()}focusFirstItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setFirstItemActive()}focusLastItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setLastItemActive()}_getTabIndex(){return this._tabIndexSignal()}closeOpenMenu(e,r){let{focusParentTrigger:o}=ue({},r),i=this.keyManager,s=this.triggerItem;e===s?.getMenuTrigger()?.getMenu()&&(s?.getMenuTrigger()?.close(),o&&(s?i.setActiveItem(s):i.setFirstItemActive()))}_setKeyManager(){this.keyManager=new Ef(this.items).withWrap().withTypeAhead().withHomeAndEnd(),this.orientation==="horizontal"?this.keyManager.withHorizontalOrientation(this.dir?.value||"ltr"):this.keyManager.withVerticalOrientation()}_subscribeToMenuOpen(){let e=nc(this.items.changes,this.destroyed);this.items.changes.pipe(ma(this.items),lr(r=>r.filter(o=>o.hasMenu).map(o=>o.getMenuTrigger().opened.pipe(gy(o),en(e)))),pa(),Pr(r=>(this.triggerItem=r,r.getMenuTrigger().closed)),en(this.destroyed)).subscribe(()=>this.triggerItem=void 0)}_subscribeToMenuStackClosed(){this.menuStack.closed.pipe(en(this.destroyed)).subscribe(({item:e,focusParentTrigger:r})=>this.closeOpenMenu(e,{focusParentTrigger:r}))}_subscribeToMenuStackHasFocus(){this.isInline&&this.menuStack.hasFocus.pipe(en(this.destroyed)).subscribe(e=>{this._menuStackHasFocus.set(e)})}_setUpPointerTracker(){this.menuAim&&(this.ngZone.runOutsideAngular(()=>{this.pointerTracker=new TV(this._renderer,this.items)}),this.menuAim.initialize(this,this.pointerTracker))}_handleFocus(){this._focusMonitor.monitor(this.nativeElement,!1).pipe(en(this.destroyed)).subscribe(e=>{e!==null&&e!=="mouse"&&this.focusFirstItem(e)})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275dir=me({type:t,contentQueries:function(r,o,i){if(r&1&&_o(i,Bf,5),r&2){let s;Mr(s=Tr())&&(o.items=s)}},hostAttrs:["role","menu"],hostVars:4,hostBindings:function(r,o){r&1&&je("focusin",function(){return o.menuStack.setHasFocus(!0)})("focusout",function(){return o.menuStack.setHasFocus(!1)}),r&2&&(Gr("tabindex",o._getTabIndex())("id",o.id),At("aria-orientation",o.orientation)("data-cdk-menu-stack-id",o.menuStack.id))},inputs:{id:"id"},features:[Mn]})}return t})(),mN=(()=>{class t extends lhe{_parentTrigger=I(fN,{optional:!0});closed=new Xt;orientation="vertical";isInline=!this._parentTrigger;constructor(){super(),this.destroyed.subscribe(this.closed),this._parentTrigger?.registerChildMenu(this)}ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}ngOnDestroy(){super.ngOnDestroy(),this.closed.complete()}_handleKeyEvent(e){let r=this.keyManager;switch(e.keyCode){case 37:case 39:Jr(e)||(e.preventDefault(),r.setFocusOrigin("keyboard"),r.onKeydown(e));break;case 27:Jr(e)||(e.preventDefault(),this.menuStack.close(this,{focusNextOnEmpty:ec.currentItem,focusParentTrigger:!0}));break;case 9:Jr(e,"altKey","metaKey","ctrlKey")||this.menuStack.closeAll({focusParentTrigger:!0});break;default:r.onKeydown(e)}}_toggleMenuFocus(e){let r=this.keyManager;switch(e){case ec.nextItem:r.setFocusOrigin("keyboard"),r.setNextItemActive();break;case ec.previousItem:r.setFocusOrigin("keyboard"),r.setPreviousItemActive();break;case ec.currentItem:r.activeItem&&(r.setFocusOrigin("keyboard"),r.setActiveItem(r.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack.emptied.pipe(en(this.destroyed)).subscribe(e=>this._toggleMenuFocus(e))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenu",""]],hostAttrs:["role","menu",1,"cdk-menu"],hostVars:2,hostBindings:function(r,o){r&1&&je("keydown",function(s){return o._handleKeyEvent(s)}),r&2&&Sr("cdk-menu-inline",o.isInline)},outputs:{closed:"closed"},exportAs:["cdkMenu"],features:[ht([{provide:$b,useExisting:t},{provide:pN,useExisting:t},eHe("vertical")]),Mn]})}return t})(),che=(()=>{class t extends lhe{orientation="horizontal";isInline=!0;ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}_handleKeyEvent(e){let r=this.keyManager;switch(e.keyCode){case 38:case 40:case 37:case 39:if(!Jr(e)&&(e.keyCode===37||e.keyCode===39)){e.preventDefault();let i=r.activeItem?.isMenuOpen();r.activeItem?.getMenuTrigger()?.close(),r.setFocusOrigin("keyboard"),r.onKeydown(e),i&&r.activeItem?.getMenuTrigger()?.open()}break;case 27:Jr(e)||(e.preventDefault(),r.activeItem?.getMenuTrigger()?.close());break;case 9:Jr(e,"altKey","metaKey","ctrlKey")||r.activeItem?.getMenuTrigger()?.close();break;default:r.onKeydown(e)}}_toggleOpenMenu(e){let r=this.keyManager;switch(e){case ec.nextItem:r.setFocusOrigin("keyboard"),r.setNextItemActive(),r.activeItem?.getMenuTrigger()?.open();break;case ec.previousItem:r.setFocusOrigin("keyboard"),r.setPreviousItemActive(),r.activeItem?.getMenuTrigger()?.open();break;case ec.currentItem:r.activeItem&&(r.setFocusOrigin("keyboard"),r.setActiveItem(r.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack?.emptied.pipe(en(this.destroyed)).subscribe(e=>this._toggleOpenMenu(e))}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275dir=me({type:t,selectors:[["","cdkMenuBar",""]],hostAttrs:["role","menubar",1,"cdk-menu-bar"],hostBindings:function(r,o){r&1&&je("keydown",function(s){return o._handleKeyEvent(s)})},exportAs:["cdkMenuBar"],features:[ht([{provide:$b,useExisting:t},{provide:pN,useExisting:t},{provide:Ku,useFactory:()=>hN.inline("horizontal")}]),Mn]})}return t})(),Uw=(()=>{class t extends Bf{checked=!1;closeOnSpacebarTrigger=!1;static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275dir=me({type:t,hostVars:2,hostBindings:function(r,o){r&2&&At("aria-checked",!!o.checked)("aria-disabled",o.disabled||null)},inputs:{checked:[2,"cdkMenuItemChecked","checked",rt]},features:[Mn]})}return t})(),gN=(()=>{class t extends Uw{_selectionDispatcher=I(dN);_id=I(Sf).getId("cdk-menu-item-radio-");_removeDispatcherListener;constructor(){super(),this._registerDispatcherListener()}ngOnDestroy(){super.ngOnDestroy(),this._removeDispatcherListener()}trigger(e){super.trigger(e),this.disabled||this._selectionDispatcher.notify(this._id,"")}_registerDispatcherListener(){this._removeDispatcherListener=this._selectionDispatcher.listen(e=>{this.checked=this._id===e})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenuItemRadio",""]],hostAttrs:["role","menuitemradio"],hostVars:2,hostBindings:function(r,o){r&2&&Sr("cdk-menu-item-radio",!0)},exportAs:["cdkMenuItemRadio"],features:[ht([{provide:Uw,useExisting:t},{provide:Bf,useExisting:Uw}]),Mn]})}return t})(),vN=(()=>{class t extends Uw{trigger(e){super.trigger(e),this.disabled||(this.checked=!this.checked)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ur(t)))(o||t)}})();static \u0275dir=me({type:t,selectors:[["","cdkMenuItemCheckbox",""]],hostAttrs:["role","menuitemcheckbox"],hostVars:2,hostBindings:function(r,o){r&2&&Sr("cdk-menu-item-checkbox",!0)},exportAs:["cdkMenuItemCheckbox"],features:[ht([{provide:Uw,useExisting:t},{provide:Bf,useExisting:Uw}]),Mn]})}return t})(),nHe=N3.map(t=>{let n=t.overlayX==="start"?2:-2,e=t.overlayY==="top"?2:-2;return pt(ue({},t),{offsetX:n,offsetY:e})}),rHe=(()=>{class t{static _openContextMenuTrigger;update(e){t._openContextMenuTrigger!==e&&(t._openContextMenuTrigger?.close(),t._openContextMenuTrigger=e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wN=(()=>{class t extends she{_overlay=I(Ka);_directionality=I(Ki,{optional:!0});_contextMenuTracker=I(rHe);_changeDetectorRef=I(Lr);disabled=!1;constructor(){super(),this._setMenuStackCloseListener()}open(e){this._open(null,e),this._changeDetectorRef.markForCheck()}close(){this.menuStack.closeAll()}_openOnContextMenu(e){this.disabled||(e.preventDefault(),e.stopPropagation(),this._contextMenuTracker.update(this),this._open(e,{x:e.clientX,y:e.clientY}),e.button===2?this.childMenu?.focusFirstItem("mouse"):e.button===0?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusFirstItem("program"))}_getOverlayConfig(e){return new $u({positionStrategy:this._getOverlayPositionStrategy(e),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(e){return this._overlay.position().flexibleConnectedTo(e).withLockedPosition().withGrowAfterOpen().withPositions(this.menuPosition??nHe)}_setMenuStackCloseListener(){this.menuStack.closed.pipe(en(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this.childMenu=void 0,this._changeDetectorRef.markForCheck())})}_subscribeToOutsideClicks(e){if(this.overlayRef){let r=this.overlayRef.outsidePointerEvents();if(e){let[o,i]=cA(r,({type:s})=>s==="auxclick");r=nc(i.pipe(mA((s,a)=>e.ctrlKey&&a===0&&s.ctrlKey)),o.pipe(nm(1)))}r.pipe(en(this.stopOutsideClicksListener)).subscribe(o=>{this.isElementInsideMenuStack(ca(o))||this.menuStack.closeAll()})}}_open(e,r){this.disabled||(this.isOpen()?(this.menuStack.closeSubMenuOf(this.childMenu),this.overlayRef.getConfig().positionStrategy.setOrigin(r),this.overlayRef.updatePosition()):(this.opened.next(),this.overlayRef?(this.overlayRef.getConfig().positionStrategy.setOrigin(r),this.overlayRef.updatePosition()):this.overlayRef=this._overlay.create(this._getOverlayConfig(r)),this.overlayRef.attach(this.getMenuContentPortal()),this._subscribeToOutsideClicks(e)))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkContextMenuTriggerFor",""]],hostVars:1,hostBindings:function(r,o){r&1&&je("contextmenu",function(s){return o._openOnContextMenu(s)}),r&2&&At("data-cdk-menu-stack-id",null)},inputs:{menuTemplateRef:[0,"cdkContextMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkContextMenuPosition","menuPosition"],menuData:[0,"cdkContextMenuTriggerData","menuData"],disabled:[2,"cdkContextMenuDisabled","disabled",rt]},outputs:{opened:"cdkContextMenuOpened",closed:"cdkContextMenuClosed"},exportAs:["cdkContextMenuTriggerFor"],features:[ht([{provide:fN,useExisting:t},{provide:Ku,useClass:hN}]),Mn]})}return t})();var uhe=t=>[{originX:t,originY:"bottom",overlayX:t,overlayY:"top"},{originX:t,originY:"top",overlayX:t,overlayY:"bottom"}],EV=(()=>{class t{_cdkTrigger=I(wN,{host:!0});brnCtxMenuTriggerFor=Y(null);brnCtxMenuTriggerData=Y(void 0);align=Y(void 0);constructor(){this._cdkTrigger.opened.pipe(Xa()).subscribe(()=>setTimeout(()=>this._cdkTrigger._spartanLastPosition=this._cdkTrigger.overlayRef._positionStrategy._lastPosition)),Gt(()=>this._cdkTrigger.menuTemplateRef=this.brnCtxMenuTriggerFor()),Gt(()=>this._cdkTrigger.menuData=this.brnCtxMenuTriggerData()),Gt(()=>{let e=this.align();e&&(this._cdkTrigger.menuPosition=uhe(e))})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnCtxMenuTriggerFor",""]],inputs:{brnCtxMenuTriggerFor:[1,"brnCtxMenuTriggerFor"],brnCtxMenuTriggerData:[1,"brnCtxMenuTriggerData"],align:[1,"align"]},features:[qt([wN])]})}return t})(),IV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuBar",""]],features:[qt([che])]})}return t})(),NV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuGroup",""]],features:[qt([$b])]})}return t})(),AV=(()=>{class t{_cdkMenuItem=I(vN);checked=Y(this._cdkMenuItem.checked,{transform:rt});disabled=Y(this._cdkMenuItem.disabled,{transform:rt});triggered=W3(this._cdkMenuItem.triggered);constructor(){Gt(()=>this._cdkMenuItem.disabled=this.disabled()),Gt(()=>this._cdkMenuItem.checked=this.checked())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuItemCheckbox",""]],hostVars:3,hostBindings:function(r,o){r&2&&(Gr("disabled",o.disabled()),Sr("checked",o.checked()))},inputs:{checked:[1,"checked"],disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[qt([vN])]})}return t})(),RV=(()=>{class t{_cdkMenuItem=I(gN);checked=Y(this._cdkMenuItem.checked,{transform:rt});disabled=Y(this._cdkMenuItem.disabled,{transform:rt});triggered=W3(this._cdkMenuItem.triggered);constructor(){Gt(()=>this._cdkMenuItem.disabled=this.disabled()),Gt(()=>this._cdkMenuItem.checked=this.checked())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuItemRadio",""]],hostVars:3,hostBindings:function(r,o){r&2&&(Gr("disabled",o.disabled()),Sr("checked",o.checked()))},inputs:{checked:[1,"checked"],disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[qt([gN])]})}return t})(),jb=(()=>{class t{_cdkMenuItem=I(Bf);disabled=Y(this._cdkMenuItem.disabled,{transform:rt});triggered=W3(this._cdkMenuItem.triggered);constructor(){Gt(()=>this._cdkMenuItem.disabled=this.disabled())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuItem",""]],hostVars:1,hostBindings:function(r,o){r&2&&Gr("disabled",o.disabled())},inputs:{disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[qt([Bf])]})}return t})(),OV=(()=>{class t{_cdkTrigger=I(Vb,{host:!0});align=Y(void 0);constructor(){this._cdkTrigger.opened.pipe(Xa()).subscribe(()=>setTimeout(()=>this._cdkTrigger._spartanLastPosition=this._cdkTrigger.overlayRef._positionStrategy._lastPosition)),Gt(()=>{let e=this.align();e&&(this._cdkTrigger.menuPosition=uhe(e))})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuTriggerFor",""]],inputs:{align:[1,"align"]},features:[qt([{directive:Vb,inputs:["cdkMenuTriggerFor","brnMenuTriggerFor","cdkMenuTriggerData","brnMenuTriggerData"],outputs:["cdkMenuOpened","brnMenuOpened","cdkMenuClosed","brnMenuClosed"]}])]})}return t})(),zb=(()=>{class t{_host=I(mN);_state=Ye("open");_side=Ye("top");constructor(){this.setSideWithDarkMagic(),this._host.closed.pipe(Xa()).subscribe(()=>this._state.set("closed"))}setSideWithDarkMagic(){let e=this._host.menuStack.peek()===void 0;setTimeout(()=>{let r=this._host._parentTrigger._spartanLastPosition;if(!r){this._side.set(e?"top":"left");return}let o=e?r.originY:r.originX==="end"?"right":"left";this._side.set(o)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenu",""],["","brnSubMenu",""]],hostVars:2,hostBindings:function(r,o){r&2&&At("data-state",o._state())("data-side",o._side())},features:[qt([mN])]})}return t})(),iHe=[NV,jb,RV,AV],dhe=[OV,zb,...iHe],cZn=[...dhe,IV],uZn=[...dhe,EV];var Gw=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground aria-expanded:bg-accent aria-expanded:text-accent-foreground",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuBarItem",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([jb])]})};var sHe=["*"],Ww=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("border-border flex h-10 items-center space-x-1 rounded-md border bg-background p-1",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu-bar"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([IV])],ngContentSelectors:sHe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var aHe=["*"],$f=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu-group"]],hostAttrs:[1,"block"],features:[qt([NV])],ngContentSelectors:aHe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var qw=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("group-[.checked]:opacity-100 opacity-0 absolute left-2 flex h-3.5 w-3.5 items-center justify-center",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu-item-check"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ht([ir({lucideCheck:g3})])],decls:1,vars:0,consts:[["hlm","","size","1rem","name","lucideCheck"]],template:function(e,r){e&1&&Le(0,"ng-icon",0)},dependencies:[sr,ao],encapsulation:2})};var Kw=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("group w-full relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground disabled:pointer-events-none disabled:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuItemCheckbox",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([{directive:AV,inputs:["disabled","disabled","checked","checked"],outputs:["triggered","triggered"]}])]})};var Zw=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("mr-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuIcon",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ht([Ide({size:"sm"})])]})};var yN=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("group-[.checked]:opacity-100 opacity-0 absolute left-2 flex h-3.5 w-3.5 items-center justify-center",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu-item-radio"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ht([ir({lucideCircle:Iue})])],decls:1,vars:0,consts:[["hlm","","size","0.5rem","name","lucideCircle",1,"*:*:fill-current"]],template:function(e,r){e&1&&Le(0,"ng-icon",0)},dependencies:[sr,ao],encapsulation:2})};var xN=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("group w-full relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground disabled:pointer-events-none disabled:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuItemRadio",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([{directive:RV,inputs:["disabled","disabled","checked","checked"],outputs:["triggered","triggered"]}])]})};var Xw=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("inline-block ml-auto h-4 w-4",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu-item-sub-indicator"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ht([ir({lucideChevronRight:w3})])],decls:1,vars:0,consts:[["hlm","","size","1rem","name","lucideChevronRight",1,"h-full","w-full"]],template:function(e,r){e&1&&Le(0,"ng-icon",0)},dependencies:[sr,ao],encapsulation:2})};var lHe=ar("group w-full relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground disabled:pointer-events-none disabled:opacity-50",{variants:{inset:{true:"pl-8",false:""}},defaultVariants:{inset:!1}}),Vf=class t{_inset=Ye(!1);userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(lHe({inset:this._inset()}),this.userClass()));set inset(n){this._inset.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuItem",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"],inset:[2,"inset","inset",rt]},features:[qt([{directive:jb,inputs:["disabled","disabled"],outputs:["triggered","triggered"]}])]})};var cHe=["*"],_N=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("block px-2 py-1.5 text-sm font-semibold",this._inset()&&"pl-8",this.userClass()));_inset=Ye(!1);set inset(n){this._inset.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu-label"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"],inset:[2,"inset","inset",rt]},ngContentSelectors:cHe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var el=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("block -mx-1 my-1 h-px bg-muted",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu-separator"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},decls:0,vars:0,template:function(e,r){},encapsulation:2})};var uHe=["*"],jf=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("ml-auto font-light text-xs tracking-widest opacity-60",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu-shortcut"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:uHe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var dHe=["*"],pHe=ar("block border-border min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",{variants:{variant:{default:"my-0.5",menubar:"my-2"}},defaultVariants:{variant:"default"}}),zf=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(pHe({variant:this._variant()}),this.userClass()));_variant=Ye("default");set variant(n){this._variant.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-menu"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"],variant:"variant"},features:[qt([zb])],ngContentSelectors:dHe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var hHe=["*"],Yw=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("border-border min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-sub-menu"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[qt([zb])],ngContentSelectors:hHe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var fHe=[Vf,Zw,$f,Xw,yN,qw,jf,Kw,xN],mHe=[_N,el],gHe=[...fHe,...mHe,zf,Yw],UXn=[...gHe,Ww,Gw];function vHe(t,n){if(t&1&&(J(0,"button",11),de(1),Te(2,"translate"),Le(3,"hlm-menu-item-sub-indicator"),re()),t&2){be(2);let e=yr(16);Be("brnMenuTriggerFor",e),ee(),et(" ",Ee(2,2,"EXTERNAL_LIBRARY")," ")}}function wHe(t,n){if(t&1){let e=bn();J(0,"button",10),je("click",function(){Ge(e);let o=be(2);return We(o.handleOnLoadExternalLibrary())}),de(1),Te(2,"translate"),re()}t&2&&(ee(),et(" ",Ee(2,1,"IMPORT_EXTERNAL_LIBRARY")," "))}function yHe(t,n){if(t&1&&(J(0,"button",11),de(1),Te(2,"translate"),Le(3,"hlm-menu-item-sub-indicator"),re()),t&2){be(2);let e=yr(18);Be("brnMenuTriggerFor",e),ee(),et(" ",Ee(2,2,"MODELS")," ")}}function xHe(t,n){if(t&1){let e=bn();J(0,"button",10),je("click",function(){Ge(e);let o=be(2);return We(o.handleOnLoadModels())}),de(1),Te(2,"translate"),re()}t&2&&(ee(),et(" ",Ee(2,1,"IMPORT_MODELS")," "))}function _He(t,n){if(t&1){let e=bn();J(0,"hlm-menu",9)(1,"hlm-menu-group")(2,"button",10),je("click",function(){Ge(e);let o=be();return We(o.handleOnNewFile())}),de(3),Te(4,"translate"),J(5,"hlm-menu-shortcut"),de(6,"\u2318N"),re()(),J(7,"button",10),je("click",function(){Ge(e);let o=be();return We(o.handleOnOpenFile())}),de(8),Te(9,"translate"),J(10,"hlm-menu-shortcut"),de(11,"\u2318O"),re()()(),Le(12,"hlm-menu-separator"),J(13,"hlm-menu-group"),lt(14,vHe,4,4,"button",11)(15,wHe,3,3,"button",12)(16,yHe,4,4,"button",11)(17,xHe,3,3,"button",12),re(),Le(18,"hlm-menu-separator"),J(19,"hlm-menu-group")(20,"button",10),je("click",function(){Ge(e);let o=be();return We(o.handleOnSaveFile())}),de(21),Te(22,"translate"),J(23,"hlm-menu-shortcut"),de(24,"\u2318S"),re()()()()}if(t&2){let e=be();ee(3),et(" ",Ee(4,5,"NEW_FILE")," "),ee(5),et(" ",Ee(9,7,"OPEN")," "),ee(6),Ct(e.externalLibrary()?14:15),ee(2),Ct(e.models()?16:17),ee(5),et(" ",Ee(22,9,"SAVE")," ")}}function kHe(t,n){if(t&1){let e=bn();J(0,"hlm-sub-menu")(1,"button",10),je("click",function(){Ge(e);let o=be();return We(o.handleOnLoadExternalLibrary())}),de(2),Te(3,"translate"),re(),J(4,"button",10),je("click",function(){Ge(e);let o=be();return We(o.handleOnDeleteExternalLibrary())}),de(5),Te(6,"translate"),re()()}t&2&&(ee(2),et(" ",Ee(3,2,"IMPORT_EXTERNAL_LIBRARY")," "),ee(3),et(" ",Ee(6,4,"DELETE_EXTERNAL_LIBRARY")," "))}function bHe(t,n){if(t&1){let e=bn();J(0,"hlm-sub-menu")(1,"button",10),je("click",function(){Ge(e);let o=be();return We(o.handleOnLoadModels())}),de(2),Te(3,"translate"),re(),J(4,"button",10),je("click",function(){Ge(e);let o=be();return We(o.handleOnDeleteModels())}),de(5),Te(6,"translate"),re()()}t&2&&(ee(2),et(" ",Ee(3,2,"IMPORT_MODELS")," "),ee(3),et(" ",Ee(6,4,"DELETE_MODELS")," "))}function CHe(t,n){if(t&1){let e=bn();J(0,"hlm-menu",9)(1,"hlm-menu-group")(2,"button",13),je("click",function(){Ge(e);let o=be();return We(o.handleOnUndo())}),de(3),Te(4,"translate"),J(5,"hlm-menu-shortcut"),de(6,"\u2318Z"),re()(),J(7,"button",13),je("click",function(){Ge(e);let o=be();return We(o.handleOnRedo())}),de(8),Te(9,"translate"),J(10,"hlm-menu-shortcut"),de(11,"\u21E7\u2318Z"),re()()()()}if(t&2){let e=be();ee(2),Be("disabled",!e.canUndo),ee(),et(" ",Ee(4,4,"UNDO")," "),ee(4),Be("disabled",!e.canRedo),ee(),et(" ",Ee(9,6,"REDO")," ")}}function SHe(t,n){if(t&1){let e=bn();J(0,"hlm-menu",9)(1,"hlm-menu-group")(2,"button",13),je("click",function(){Ge(e);let o=be();return We(o.handleOnInsertRouter())}),de(3),Te(4,"translate"),J(5,"hlm-menu-shortcut"),de(6,"\u2318\u21E7R"),re()(),J(7,"button",10),je("click",function(){Ge(e);let o=be();return We(o.handleOnInsertDevice())}),de(8),Te(9,"translate"),J(10,"hlm-menu-shortcut"),de(11,"\u2318\u21E7D"),re()()()()}if(t&2){let e=be();ee(2),Be("disabled",!e.canInsertRouter),ee(),et(" ",Ee(4,3,"ROUTER")," "),ee(5),et(" ",Ee(9,5,"DEVICE")," ")}}function MHe(t,n){if(t&1){let e=bn();J(0,"hlm-menu",9)(1,"button",14),de(2),Te(3,"translate"),Le(4,"hlm-menu-item-sub-indicator"),re(),Le(5,"hlm-menu-separator"),J(6,"hlm-menu-group")(7,"button",15),je("click",function(){Ge(e);let o=be();return We(o.handleOnHighContrast())}),Le(8,"hlm-menu-item-check"),de(9),Te(10,"translate"),re(),J(11,"button",15),je("click",function(){Ge(e);let o=be();return We(o.handleOnGrid())}),Le(12,"hlm-menu-item-check"),de(13),Te(14,"translate"),re()(),Le(15,"hlm-menu-separator"),J(16,"button",16),je("click",function(){Ge(e);let o=be();return We(o.handleOnCenter())}),de(17),Te(18,"translate"),J(19,"hlm-menu-shortcut"),de(20,"\u23250"),re()(),Le(21,"hlm-menu-separator"),J(22,"hlm-menu-group")(23,"button",16),je("click",function(){Ge(e);let o=be();return We(o.handleOnZoomReset())}),de(24),Te(25,"translate"),J(26,"hlm-menu-shortcut"),de(27,"\u23180"),re()(),J(28,"button",16),je("click",function(){Ge(e);let o=be();return We(o.handleOnZoomIn())}),de(29),Te(30,"translate"),J(31,"hlm-menu-shortcut"),de(32,"\u2318+"),re()(),J(33,"button",16),je("click",function(){Ge(e);let o=be();return We(o.handleOnZoomOut())}),de(34),Te(35,"translate"),J(36,"hlm-menu-shortcut"),de(37,"\u2318-"),re()()()()}if(t&2){let e=be(),r=yr(26);ee(),Be("brnMenuTriggerFor",r),ee(),et(" ",Ee(3,10,"LANGUAGE")," "),ee(5),Be("checked",e.highContrast()),ee(2),et(" ",Ee(10,12,"HIGH_CONTRAST")," "),ee(2),Be("checked",e.showGrid()),ee(2),et(" ",Ee(14,14,"SHOW_GRID")," "),ee(4),et(" ",Ee(18,16,"CENTER")," "),ee(7),et(" ",Ee(25,18,"ORIGINAL_ZOOM")," "),ee(5),et(" ",Ee(30,20,"ZOOM_IN")," "),ee(5),et(" ",Ee(35,22,"ZOOM_OUT")," ")}}function THe(t,n){if(t&1){let e=bn();J(0,"hlm-sub-menu")(1,"button",15),je("click",function(){Ge(e);let o=be();return We(o.handleOnLanguage("de"))}),Le(2,"hlm-menu-item-check"),de(3," Deutsch "),re(),J(4,"button",15),je("click",function(){Ge(e);let o=be();return We(o.handleOnLanguage("en"))}),Le(5,"hlm-menu-item-check"),de(6," English "),re(),J(7,"button",15),je("click",function(){Ge(e);let o=be();return We(o.handleOnLanguage("es"))}),Le(8,"hlm-menu-item-check"),de(9," Espa\xF1ol "),re(),J(10,"button",15),je("click",function(){Ge(e);let o=be();return We(o.handleOnLanguage("fr"))}),Le(11,"hlm-menu-item-check"),de(12," Fran\xE7ais "),re(),J(13,"button",15),je("click",function(){Ge(e);let o=be();return We(o.handleOnLanguage("it"))}),Le(14,"hlm-menu-item-check"),de(15," Italiano "),re(),J(16,"button",15),je("click",function(){Ge(e);let o=be();return We(o.handleOnLanguage("pt"))}),Le(17,"hlm-menu-item-check"),de(18," Portugu\xEAs "),re()()}if(t&2){let e=be();ee(),Be("checked",e.language()==="de"),ee(3),Be("checked",e.language()==="en"),ee(3),Be("checked",e.language()==="es"),ee(3),Be("checked",e.language()==="fr"),ee(3),Be("checked",e.language()==="it"),ee(3),Be("checked",e.language()==="pt")}}var kN=class t{config=I(Gn);state=I(Fr);network=I(Oo);onNewFile=$n();onOpenFile=$n();externalLibrary=Y.required();onLoadExternalLibrary=$n();onDeleteExternalLibrary=$n();models=Y.required();onLoadModels=$n();onDeleteModels=$n();onSaveFile=$n();onUndo=$n();get canUndo(){return this.state.canUndo}onRedo=$n();get canRedo(){return this.state.canRedo}onInsertRouter=$n();onInsertDevice=$n();get canInsertRouter(){return!this.network.router}language=Y.required();onChangeLanguage=$n();highContrast=Y.required();onHighContrast=$n();showGrid=Y.required();onShowGrid=$n();onCenter=$n();onZoomReset=$n();onZoomIn=$n();get canZoomIn(){return this.config.zoom()<2}onZoomOut=$n();get canZoomOut(){return this.config.zoom()>.5}handleOnNewFile(){this.onNewFile.emit()}handleOnOpenFile(){this.onOpenFile.emit()}handleOnLoadExternalLibrary(){this.onLoadExternalLibrary.emit()}handleOnDeleteExternalLibrary(){this.onDeleteExternalLibrary.emit()}handleOnLoadModels(){this.onLoadModels.emit()}handleOnDeleteModels(){this.onDeleteModels.emit()}handleOnSaveFile(){this.onSaveFile.emit()}handleOnUndo(){this.onUndo.emit()}handleOnRedo(){this.onRedo.emit()}handleOnInsertRouter(){this.onInsertRouter.emit()}handleOnInsertDevice(){this.onInsertDevice.emit()}handleOnLanguage(n){this.onChangeLanguage.emit(n)}handleOnHighContrast(){this.onHighContrast.emit()}handleOnGrid(){this.onShowGrid.emit()}handleOnCenter(){this.onCenter.emit()}handleOnZoomReset(){this.onZoomReset.emit()}handleOnZoomIn(){this.onZoomIn.emit()}handleOnZoomOut(){this.onZoomOut.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-menu-bar"]],inputs:{externalLibrary:[1,"externalLibrary"],models:[1,"models"],language:[1,"language"],highContrast:[1,"highContrast"],showGrid:[1,"showGrid"]},outputs:{onNewFile:"onNewFile",onOpenFile:"onOpenFile",onLoadExternalLibrary:"onLoadExternalLibrary",onDeleteExternalLibrary:"onDeleteExternalLibrary",onLoadModels:"onLoadModels",onDeleteModels:"onDeleteModels",onSaveFile:"onSaveFile",onUndo:"onUndo",onRedo:"onRedo",onInsertRouter:"onInsertRouter",onInsertDevice:"onInsertDevice",onChangeLanguage:"onChangeLanguage",onHighContrast:"onHighContrast",onShowGrid:"onShowGrid",onCenter:"onCenter",onZoomReset:"onZoomReset",onZoomIn:"onZoomIn",onZoomOut:"onZoomOut"},decls:27,vars:16,consts:[["file",""],["librarySubmenu",""],["modelsSubmenu",""],["edit",""],["insert",""],["view",""],["languageSubmenu",""],[1,"w-fit"],["hlmMenuBarItem","",3,"brnMenuTriggerFor"],["variant","menubar",1,"w-48"],["hlmMenuItem","",3,"click"],["hlmMenuItem","",3,"brnMenuTriggerFor"],["hlmMenuItem",""],["hlmMenuItem","",3,"click","disabled"],["inset","","hlmMenuItem","",3,"brnMenuTriggerFor"],["hlmMenuItemCheckbox","",3,"click","checked"],["inset","","hlmMenuItem","",3,"click"]],template:function(e,r){if(e&1&&(J(0,"hlm-menu-bar",7)(1,"button",8),de(2),Te(3,"translate"),re(),J(4,"button",8),de(5),Te(6,"translate"),re(),J(7,"button",8),de(8),Te(9,"translate"),re(),J(10,"button",8),de(11),Te(12,"translate"),re()(),lt(13,_He,25,11,"ng-template",null,0,ko)(15,kHe,7,6,"ng-template",null,1,ko)(17,bHe,7,6,"ng-template",null,2,ko)(19,CHe,12,8,"ng-template",null,3,ko)(21,SHe,12,7,"ng-template",null,4,ko)(23,MHe,38,24,"ng-template",null,5,ko)(25,THe,19,6,"ng-template",null,6,ko)),e&2){let o=yr(14),i=yr(20),s=yr(22),a=yr(24);ee(),Be("brnMenuTriggerFor",o),ee(),et(" ",Ee(3,8,"FILE")," "),ee(2),Be("brnMenuTriggerFor",i),ee(),et(" ",Ee(6,10,"EDIT")," "),ee(2),Be("brnMenuTriggerFor",s),ee(),et(" ",Ee(9,12,"INSERT")," "),ee(2),Be("brnMenuTriggerFor",a),ee(),et(" ",Ee(12,14,"VIEW")," ")}},dependencies:[_r,ro,Co,OV,zf,Ww,Yw,Vf,Xw,jf,el,Gw,qw,$f,Kw],encapsulation:2})};var DHe=ar("p-6 pt-0",{variants:{},defaultVariants:{}}),Hb=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(DHe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCardContent",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var IHe=ar("text-sm text-muted-foreground",{variants:{},defaultVariants:{}}),Ub=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(IHe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCardDescription",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var DYn=ar("flex p-6 pt-0",{variants:{direction:{row:"flex-row items-center space-x-1.5",column:"flex-col space-y-1.5"}},defaultVariants:{direction:"row"}});var AHe=ar("flex p-6",{variants:{direction:{row:"flex-row items-center space-x-1.5",column:"flex-col space-y-1.5"}},defaultVariants:{direction:"column"}}),Gb=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(AHe({direction:this.direction()}),this.userClass()));direction=Y("column");static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCardHeader",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"],direction:[1,"direction"]}})};var OHe=ar("text-lg font-semibold leading-none tracking-tight",{variants:{},defaultVariants:{}}),Wb=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(OHe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCardTitle",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var PHe=ar("rounded-lg border border-border bg-card focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-card-foreground shadow-sm",{variants:{},defaultVariants:{}}),k2=class t{userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(PHe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCard",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var Qw=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})};var $He=(t,n,e)=>({focused:t,dragging:n,communicating:e}),phe=(t,n)=>({left:t,top:n}),VHe=(t,n)=>({dragging:t,communicating:n});function jHe(t,n){t&1&&Le(0,"ng-icon",1)}function zHe(t,n){t&1&&Le(0,"ng-icon",2)}function HHe(t,n){t&1&&Le(0,"ng-icon",6)(1,"ng-icon",7)}var bN=class t{router=I(Go);config=I(Gn);network=I(Oo);NodeType=qn;node=Y.required();focused=ae(()=>this.network.focusedNode()?.mac===this.node().mac);clicked=!1;dragging=!1;_mouseDown(n){n.preventDefault(),n.button===0&&(this.clicked=!0)}_mouseMove(n){n.preventDefault(),this.clicked&&Math.sqrt(n.movementX**2+n.movementY**2)>1&&(this.dragging=!0,this.router.navigate([""])),this.dragging&&(this.clicked=!1,this.node().move(n.movementX/this.config.zoom(),-n.movementY/this.config.zoom(),!0))}_mouseUp(n){if(n.preventDefault(),this.clicked)if(this.focused())this.router.navigate([""]);else{let e=this.router.url.split("/").length>2?this.router.url.split("/")[2]:"network-traffic";this.router.navigate([this.node().mac,e])}this.dragging&&this.node().move(Math.round(this.node().position.x/20)*20,Math.round(this.node().position.y/20)*20),this.clicked=!1,this.dragging=!1}_supr(n){n.preventDefault(),this.focused()&&this.network.deleteNode(this.node().mac)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-node"]],hostAttrs:[1,"contents"],hostBindings:function(e,r){e&1&&je("mousedown",function(i){return r._mouseDown(i)})("mousemove",function(i){return r._mouseMove(i)},!1,yi)("mouseup",function(i){return r._mouseUp(i)},!1,yi)("keydown.delete",function(i){return r._supr(i)},!1,yi)("keydown.meta.backspace",function(i){return r._supr(i)},!1,yi)},inputs:{node:[1,"node"]},features:[ht([ir({lucideCpu:Nue,lucideGhost:yw,lucideLaptop:Oue,lucideRouter:Bue,lucideShield:$ue})])],decls:9,vars:20,consts:[["hlmCard","",1,"node",3,"ngClass","ngStyle"],["name","lucideRouter","size","24"],["name","lucideCpu","size","24"],[1,"node-info",3,"ngClass","ngStyle"],[1,"name","text-lg","font-bold"],[1,"ip","text-sm","text-muted-foreground","opacity-60"],["name","lucideLaptop","size","24"],["name","lucideGhost","size","1rem",1,"phantom-attacker"]],template:function(e,r){if(e&1&&(J(0,"div",0),lt(1,jHe,1,0,"ng-icon",1)(2,zHe,1,0,"ng-icon",2)(3,HHe,2,0),re(),J(4,"div",3)(5,"span",4),de(6),re(),J(7,"span",5),de(8),re()()),e&2){let o;Be("ngClass",_U(7,$He,r.focused(),r.dragging,r.node().communicating))("ngStyle",mh(11,phe,"calc(50% + "+r.node().position.x+"px)","calc(50% - "+r.node().position.y+"px)")),ee(),Ct((o=r.node().type)===r.NodeType.ROUTER?1:o===r.NodeType.IOT?2:o===r.NodeType.COMPUTER?3:-1),ee(3),Be("ngClass",mh(14,VHe,r.dragging,r.node().communicating))("ngStyle",mh(17,phe,"calc(50% + "+r.node().position.x+"px)","calc(50% - "+r.node().position.y+"px)")),ee(2),ct(r.node().name),ee(2),ct(r.node().ip)}},dependencies:[Ix,_r,Tm,Dm,Qw,k2,sr],styles:[".node[_ngcontent-%COMP%]{display:flex;position:absolute;justify-content:center;align-items:center;z-index:20;width:60px;height:60px;border-radius:.75rem;transform:translate(-50%,-50%);transform-origin:center;transition:top .1s,left .1s,border .1s,color .1s,background-color .1s,transform .1s;cursor:pointer}.node[_ngcontent-%COMP%]   .phantom-attacker[_ngcontent-%COMP%]{position:absolute;transform:translate(8px,8px)}.node[_ngcontent-%COMP%]     .phantom-attacker svg{stroke-width:2.5px!important;fill:hsl(var(--card-foreground));color:hsl(var(--card))}.node[_ngcontent-%COMP%]:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 0px}.node.dragging[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.2);z-index:30;transition:transform .1s;cursor:grabbing}.node.focused[_ngcontent-%COMP%]{z-index:30;border-width:0px;border-color:hsl(var(--primary));color:hsl(var(--primary-foreground));background-color:hsl(var(--primary))}.node.focused[_ngcontent-%COMP%]     .phantom-attacker svg{fill:hsl(var(--primary-foreground));color:hsl(var(--primary))}.node.communicating[_ngcontent-%COMP%]{z-index:30;border-width:2px;border-color:hsl(var(--primary))}.node-info[_ngcontent-%COMP%]{display:flex;position:absolute;flex-direction:column;justify-content:center;align-items:flex-start;transform:translateY(-50%);transform-origin:center;z-index:10;transition:top .1s,left .1s,opacity .1s;margin-left:42px;width:auto;height:60px;pointer-events:none;-webkit-user-select:none;user-select:none}  .high-contrast .node-info{margin-left:34px}  .high-contrast .node-info{border-radius:calc(var(--radius) - 2px)!important}  .high-contrast .node-info{background-color:hsl(var(--card))!important}  .high-contrast .node-info{padding-left:.5rem!important;padding-right:.5rem!important}  .high-contrast .node-info{padding-top:.25rem!important;padding-bottom:.25rem!important}  .high-contrast .node-info *{color:hsl(var(--primary))!important}  .high-contrast .node-info *{opacity:1!important}.node-info.dragging[_ngcontent-%COMP%]{opacity:0;transition:opacity .1s}"]})};var CN=class t{invert=Y(!1,{transform:rt});theme=Y("light");position=Y("bottom-right");hotKey=Y(["altKey","KeyT"]);richColors=Y(!1,{transform:rt});expand=Y(!1,{transform:rt});duration=Y(4e3,{transform:Xs});visibleToasts=Y(3,{transform:Xs});closeButton=Y(!1,{transform:rt});toastOptions=Y({classes:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}});offset=Y(null);dir=Y("auto");userClass=Y("",{alias:"class"});userStyle=Y({},{alias:"style"});_computedClass=ae(()=>Ze("toaster group",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-toaster"]],inputs:{invert:[1,"invert"],theme:[1,"theme"],position:[1,"position"],hotKey:[1,"hotKey"],richColors:[1,"richColors"],expand:[1,"expand"],duration:[1,"duration"],visibleToasts:[1,"visibleToasts"],closeButton:[1,"closeButton"],toastOptions:[1,"toastOptions"],offset:[1,"offset"],dir:[1,"dir"],userClass:[1,"class","userClass"],userStyle:[1,"style","userStyle"]},decls:1,vars:16,consts:[[3,"invert","theme","position","hotKey","richColors","expand","duration","visibleToasts","closeButton","toastOptions","offset","dir"]],template:function(e,r){e&1&&Le(0,"ngx-sonner-toaster",0),e&2&&(ud(r.userStyle()),Ve(r._computedClass()),Be("invert",r.invert())("theme",r.theme())("position",r.position())("hotKey",r.hotKey())("richColors",r.richColors())("expand",r.expand())("duration",r.duration())("visibleToasts",r.visibleToasts())("closeButton",r.closeButton())("toastOptions",r.toastOptions())("offset",r.offset())("dir",r.dir()))},dependencies:[Hq],encapsulation:2,changeDetection:0})};var hhe=gS("floatAnimation",[v1("_ => *",[Rm(":enter",[Ts({transform:"translateX(100%) translateY(-50%)",opacity:0}),g1("0.5s ease-in-out",Ts({transform:"translateX(0) translateY(-50%)",opacity:1}))],{optional:!0})]),v1("* => _",[Rm(":leave",[Ts({transform:"translateX(0) translateY(-50%)",opacity:1}),g1("0.5s ease-in-out",Ts({transform:"translateX(100%) translateY(-50%)",opacity:0}))],{optional:!0})])]),fhe=gS("fadeAnimation",[v1("_ <=> *",[]),v1("* => *",[Rm(":enter",[Ts({display:"none",opacity:0})],{optional:!0}),Rm(":leave",[g1("0.25s ease-in-out",Ts({opacity:0})),Ts({display:"none"})],{optional:!0}),Rm(":enter",[Ts({display:"flex"}),g1("0.25s ease-in-out",Ts({opacity:1}))],{optional:!0})])]);var UHe=t=>({$implicit:t}),GHe=(t,n)=>n.mac,WHe=(t,n)=>`${n.node1.mac}::${n.node2.mac}`;function qHe(t,n){if(t&1&&Le(0,"app-node",8),t&2){let e=n.$implicit;be();let r=yr(14);Be("node",e)("brnCtxMenuTriggerFor",r)("brnCtxMenuTriggerData",wa(3,UHe,e))}}function KHe(t,n){if(t&1&&Le(0,"app-connection",9),t&2){let e=n.$implicit;Be("connection",e)}}function ZHe(t,n){if(t&1){let e=bn();J(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",11),je("click",function(o){Ge(e);let i=be();return We(i.onInsertNode(i.NodeType.RouterTypes,o))}),de(3),Te(4,"translate"),J(5,"hlm-menu-shortcut"),de(6,"\u2318\u21E7R"),re()(),J(7,"button",12),je("click",function(o){Ge(e);let i=be();return We(i.onInsertNode(i.NodeType.DeviceTypes,o))}),de(8),Te(9,"translate"),J(10,"hlm-menu-shortcut"),de(11,"\u2318\u21E7D"),re()()()()}if(t&2){let e=be();ee(2),Be("disabled",e.router),ee(),et(" ",Ee(4,3,"INSERT_ROUTER")," "),ee(5),et(" ",Ee(9,5,"INSERT_DEVICE")," ")}}function XHe(t,n){if(t&1){let e=bn();J(0,"button",12),je("click",function(o){Ge(e);let i=be().$implicit,s=be();return We(s.onNodeAttack(i.mac,o))}),Le(1,"ng-icon",18),de(2),Te(3,"translate"),re()}t&2&&(ee(2),et(" ",Ee(3,1,"PHANTOM_ATTACKER")," "))}function YHe(t,n){if(t&1){let e=bn();J(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",12),je("click",function(o){let i=Ge(e).$implicit,s=be();return We(s.onNodeTraffic(i.mac,o))}),Le(3,"ng-icon",13),de(4),Te(5,"translate"),re(),lt(6,XHe,4,3,"button",14),J(7,"button",12),je("click",function(o){let i=Ge(e).$implicit,s=be();return We(s.onNodeConfig(i.mac,o))}),Le(8,"ng-icon",15),de(9),Te(10,"translate"),re()(),Le(11,"hlm-menu-separator"),J(12,"hlm-menu-group")(13,"button",16),je("click",function(o){let i=Ge(e).$implicit,s=be();return We(s.onDeleteNode(i.mac,o))}),Le(14,"ng-icon",17),de(15),Te(16,"translate"),re()()()}if(t&2){let e=n.$implicit,r=be();ee(4),et(" ",Ee(5,4,"NETWORK_TRAFFIC")," "),ee(2),Ct(r.NodeType.AttackerTypes.includes(e.type)?6:-1),ee(3),et(" ",Ee(10,6,"CONFIGURATION")," "),ee(6),et(" ",Ee(16,8,"DELETE")," ")}}var SN=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,r){},encapsulation:2})},MN=class t{navigationRouter=I(Go);config=I(Gn);state=I(Fr);network=I(Oo);library=I(vl);model=I(Xl);NodeType=qn;canvas=oi.required(mw);get nodes(){return this.network.nodes}get router(){return this.network.router}get connections(){return this.router?.connections??[]}ngAfterViewInit(){this.onCenter("instant")}getAnimationData(n){return n&&!n.isActivated?"_":n.activatedRoute.snapshot.params.mac??"_"}onNewFile(n){n?.preventDefault(),this.network.new()}onOpenFile(n){n?.preventDefault(),this.network.loadFromFile()}onLoadExternalLibrary(n){n?.preventDefault(),this.library.loadFromFile()}onDeleteExternalLibrary(n){n?.preventDefault(),this.library.deleteFile()}onLoadModels(n){n?.preventDefault(),this.model.loadFromFile()}onDeleteModels(n){n?.preventDefault(),this.model.deleteFile()}onSaveFile(n){n?.preventDefault(),this.network.saveToFile()}onUndo(n){n?.preventDefault(),this.state.undo()}onRedo(n){n?.preventDefault(),this.state.redo()}onInsertNode(n,e){let{scrollWidth:r,scrollHeight:o,scrollLeft:i,scrollTop:s}=this.canvas().frame().nativeElement,{left:a,top:l,width:c,height:u}=this.canvas().frame().nativeElement.getBoundingClientRect(),d=r/2,p=o/2;if(e?.preventDefault(),e instanceof MouseEvent){let{clientX:h,clientY:f}=e;this.network.addNode(n,{x:(h-a+i-d)/this.config.zoom(),y:(p-(f-l+s))/this.config.zoom()})}else this.network.addNode(n,{x:(c/2-a+i-d)/this.config.zoom(),y:(p-(u/2-l+s))/this.config.zoom()})}onChangeLanguage(n){this.config.language.set(n)}onHighContrast(){this.config.highContrast.update(n=>!n)}onShowGrid(){this.config.grid.update(n=>!n)}onCenter(n,e){let r=this.canvas().frame().nativeElement,{scrollHeight:o,clientHeight:i,scrollWidth:s,clientWidth:a}=r;e?.preventDefault(),r.scrollTo({top:(o-i)/2,left:(s-a)/2,behavior:n})}onZoomReset(n){n?.preventDefault(),this.config.resetZoom()}onZoomIn(n){n?.preventDefault(),this.config.zoomIn()}onZoomOut(n){n?.preventDefault(),this.config.zoomOut()}onDeleteNode(n,e){e?.preventDefault(),this.network.deleteNode(n)}onNodeTraffic(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"network-traffic"])}onNodeAttack(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"attack"])}onNodeConfig(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"configuration"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-root"]],viewQuery:function(e,r){e&1&&si(r.canvas,mw,5),e&2&&no()},hostVars:2,hostBindings:function(e,r){e&1&&je("keydown.meta.n",function(i){return r.onNewFile(i)},!1,yi)("keydown.meta.o",function(i){return r.onOpenFile(i)},!1,yi)("keydown.meta.s",function(i){return r.onSaveFile(i)},!1,yi)("keydown.meta.z",function(i){return r.onUndo(i)},!1,yi)("keydown.meta.shift.z",function(i){return r.onRedo(i)},!1,yi)("keydown.meta.shift.r",function(i){return r.onInsertNode(r.NodeType.RouterTypes,i)},!1,yi)("keydown.meta.shift.d",function(i){return r.onInsertNode(r.NodeType.DeviceTypes,i)},!1,yi)("keydown.alt.0",function(i){return r.onCenter("smooth",i)},!1,yi)("keydown.meta.0",function(i){return r.onZoomReset(i)},!1,yi)("keydown.meta.+",function(i){return r.onZoomIn(i)},!1,yi)("keydown.meta.-",function(i){return r.onZoomOut(i)},!1,yi),e&2&&Sr("high-contrast",r.config.highContrast())},features:[ht([ir({lucideChevronsLeftRightEllipsis:Eue,lucideGhost:yw,lucideSettings:Lue,lucideTrash:jue})])],decls:15,vars:7,consts:[["outlet","outlet"],["canvas",""],["canvasContextMenu",""],["nodeContextMenu",""],[1,"fixed","left-5","top-5","z-inf",3,"onNewFile","onOpenFile","onLoadExternalLibrary","onDeleteExternalLibrary","onLoadModels","onDeleteModels","onSaveFile","onUndo","onRedo","onInsertRouter","onInsertDevice","onChangeLanguage","onHighContrast","onShowGrid","onCenter","onZoomReset","onZoomIn","onZoomOut","externalLibrary","models","language","highContrast","showGrid"],[1,"relative","z-inf"],["richColors","","theme","system"],[3,"brnCtxMenuTriggerFor"],[3,"node","brnCtxMenuTriggerFor","brnCtxMenuTriggerData"],[3,"connection"],[1,"w-64"],["hlmMenuItem","",3,"click","disabled"],["hlmMenuItem","",3,"click"],["hlmMenuIcon","","name","lucideChevronsLeftRightEllipsis"],["hlmMenuItem",""],["hlmMenuIcon","","name","lucideSettings"],["hlmMenuItem","",1,"text-red-500","hover:bg-red-50","hover:text-red-600","dark:text-red-400","dark:hover:bg-red-950","dark:hover:text-red-300",3,"click"],["hlmMenuIcon","","name","lucideTrash"],["hlmMenuIcon","","name","lucideGhost"]],template:function(e,r){if(e&1){let o=bn();J(0,"app-menu-bar",4),je("onNewFile",function(){return Ge(o),We(r.onNewFile())})("onOpenFile",function(){return Ge(o),We(r.onOpenFile())})("onLoadExternalLibrary",function(){return Ge(o),We(r.onLoadExternalLibrary())})("onDeleteExternalLibrary",function(){return Ge(o),We(r.onDeleteExternalLibrary())})("onLoadModels",function(){return Ge(o),We(r.onLoadModels())})("onDeleteModels",function(){return Ge(o),We(r.onDeleteModels())})("onSaveFile",function(){return Ge(o),We(r.onSaveFile())})("onUndo",function(){return Ge(o),We(r.onUndo())})("onRedo",function(){return Ge(o),We(r.onRedo())})("onInsertRouter",function(){return Ge(o),We(r.onInsertNode(r.NodeType.RouterTypes))})("onInsertDevice",function(){return Ge(o),We(r.onInsertNode(r.NodeType.DeviceTypes))})("onChangeLanguage",function(s){return Ge(o),We(r.onChangeLanguage(s))})("onHighContrast",function(){return Ge(o),We(r.onHighContrast())})("onShowGrid",function(){return Ge(o),We(r.onShowGrid())})("onCenter",function(){return Ge(o),We(r.onCenter("smooth"))})("onZoomReset",function(){return Ge(o),We(r.onZoomReset())})("onZoomIn",function(){return Ge(o),We(r.onZoomIn())})("onZoomOut",function(){return Ge(o),We(r.onZoomOut())}),re(),J(1,"div",5),Le(2,"router-outlet",null,0),re(),Le(4,"hlm-toaster",6),J(5,"app-canvas",7,1),zo(7,qHe,1,5,"app-node",8,GHe),zo(9,KHe,1,1,"app-connection",9,WHe),re(),lt(11,ZHe,12,7,"ng-template",null,2,ko)(13,YHe,17,10,"ng-template",null,3,ko)}if(e&2){let o=yr(3),i=yr(12);Be("externalLibrary",r.library.library!==void 0)("models",r.model.models!==void 0)("language",r.config.language())("highContrast",r.config.highContrast())("showGrid",r.config.grid()),ee(),Be("@floatAnimation",r.getAnimationData(o)),ee(4),Be("brnCtxMenuTriggerFor",i),ee(2),Ho(r.nodes),ee(2),Ho(r.connections)}},dependencies:[Hm,EV,mw,tN,Ja,zf,$f,Vf,Zw,el,jf,CN,kN,bN,sr,ro,Co],encapsulation:2,data:{animation:[hhe]}})};var mhe=(t,n)=>{let e=I(Go),r=I(Oo),{mac:o}=t.parent.params,i=r.getNode(o);return qn.AttackerTypes.includes(i.type)?!0:new bh(e.parseUrl(`/${o}/network-traffic`))};var ghe=(t,n)=>{let e=I(Oo),{mac:r}=t.params;return!!e.getNode(r)};function QHe(t,n){t&1&&Le(0,"hlm-menu-separator")}function JHe(t,n){if(t&1&&(J(0,"hlm-option",5),de(1),re()),t&2){let e=be().$implicit;Be("value",e),ee(),ct(e.name)}}function eUe(t,n){if(t&1&&lt(0,QHe,1,0,"hlm-menu-separator")(1,JHe,2,2,"hlm-option",5),t&2){let e=n.$implicit;Ct(e==="---"?0:1)}}function tUe(t,n){t&1&&(J(0,"hlm-option",3),de(1),Te(2,"translate"),re()),t&2&&(ee(),et(" ",Ee(2,1,"NO_ATTACKS")," "))}function nUe(t,n){if(t&1&&(J(0,"hlm-option",5),de(1),re()),t&2){let e=n.$implicit;Be("value",e.ip),ee(),ct(e.ip)}}function rUe(t,n){if(t&1){let e=bn();J(0,"label",0),de(1),Te(2,"translate"),J(3,"brn-select",1),Te(4,"translate"),Ai("ngModelChange",function(o){Ge(e);let i=be();return ts(i.attack,o)||(i.attack=o),We(o)}),J(5,"hlm-select-trigger",2),Le(6,"hlm-select-value"),re(),J(7,"hlm-select-content"),zo(8,eUe,2,1,null,null,Ss,!1,tUe,3,3,"hlm-option",3),re()()(),J(11,"label",0),de(12),Te(13,"translate"),J(14,"brn-select",4),Te(15,"translate"),Ai("ngModelChange",function(o){Ge(e);let i=be();return ts(i.target,o)||(i.target=o),We(o)}),J(16,"hlm-select-trigger",2),Le(17,"hlm-select-value"),re(),J(18,"hlm-select-content"),zo(19,nUe,2,2,"hlm-option",5,Ss),re()()(),J(21,"button",6),je("click",function(){Ge(e);let o=be();return We(o.execute())}),de(22),Te(23,"translate"),re()}if(t&2){let e=be();ee(),et(" ",Ee(2,10,"ATTACK")," "),ee(2),Ni("ngModel",e.attack),Be("placeholder",Ee(4,12,"SELECT_ATTACK")),ee(5),Ho(e.attacks),ee(4),et(" ",Ee(13,14,e.multipleTargets()?"TARGETS":"TARGET")," "),ee(2),Ni("ngModel",e.target),Be("placeholder",Ee(15,16,e.multipleTargets()?"TARGETS_IP":"TARGET_IP"))("multiple",e.multipleTargets()),ee(5),Ho(e.connectedNodes),ee(2),Be("disabled",!(e.attack()&&e.target())),ee(),et(" ",Ee(23,18,"LAUNCH_ATTACK")," ")}}function oUe(t,n){t&1&&(Le(0,"ng-icon",7),J(1,"p",8),de(2),Te(3,"translate"),re()),t&2&&(ee(2),et(" ",Ee(3,1,"ATTACKER_NOT_CONNECTED")," "))}var TN=class t{network=I(Oo);node=Y.required();attack=ii(null);target=ii(null);multipleTargets=ae(()=>this.attack()?.multiple??!1);get canConnect(){return this.network.router!==void 0}get attacks(){let n=this.node().generator.internalAttacks,e=this.node().generator.externalAttacks;return n.length>0&&e.length>0?[...n,"---",...e]:[...n,...e]}get connectedNodes(){return this.network.getConnectedNodes(this.node().mac)}constructor(){Gt(()=>{this.multipleTargets()?this.target.update(n=>n&&!Array.isArray(n)?[n]:n):this.target.update(n=>n&&Array.isArray(n)?n[0]:n)})}connect(){this.node().connect(this.network.router)}execute(){switch(this.attack().id){case"dos":this.node().generator.dos(this.target(),53,[32,128],200);break;default:this.node().generator.attack(this.attack().id,...Array.isArray(this.target())?this.target():[this.target()]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4"],inputs:{node:[1,"node"],attack:[1,"attack"],target:[1,"target"]},outputs:{attack:"attackChange",target:"targetChange"},features:[ht([ir({lucideUnplug:y3})])],decls:2,vars:1,consts:[["hlmLabel",""],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder"],[1,"w-full"],["disabled","",1,"px-2"],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","multiple"],[3,"value"],["hlmBtn","",3,"click","disabled"],["name","lucideUnplug","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"w-96","self-center","text-center","text-sm","text-muted-foreground"]],template:function(e,r){e&1&&lt(0,rUe,24,20)(1,oUe,4,3),e&2&&Ct(r.node().connected?0:1)},dependencies:[_r,zu,ju,Jl,ro,Co,Nf,ua,Us,Uu,Ja,Qa,Of,Ya,el,Zi,gs,Ws,Gs,da,sr],encapsulation:2})};function iUe(t,n){if(t&1&&(Cm(0),de(1),Te(2,"translate"),Sm()),t&2){let e=n.$implicit,r=be();ee(),et(" ",Ee(2,1,r.NodeType.toString(e))," ")}}function sUe(t,n){if(t&1&&(J(0,"hlm-option",6),de(1),re()),t&2){let e=n.$implicit,r=be();Be("value",e),ee(),et(" ",r.config.translate.instant(r.NodeType.toString(e))," ")}}var DN=class t{config=I(Gn);network=I(Oo);NodeType=qn;node=Y.required();delete(){this.network.deleteNode(this.node().mac)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4"],inputs:{node:[1,"node"]},decls:24,vars:25,consts:[["hlmLabel",""],["hlmInput","","type","text",1,"!mt-2","w-full",3,"ngModelChange","ngModel","placeholder"],["hlmInput","","type","text","disabled","",1,"!mt-2","w-full",3,"ngModel","placeholder"],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"w-full"],[4,"brnSelectValue"],[3,"value"],["hlmBtn","","variant","destructive",3,"click"]],template:function(e,r){e&1&&(J(0,"label",0),de(1),Te(2,"translate"),J(3,"input",1),Te(4,"translate"),Ai("ngModelChange",function(i){return ts(r.node().name,i)||(r.node().name=i),i}),re()(),J(5,"label",0),de(6),Te(7,"translate"),Le(8,"input",2),Te(9,"translate"),re(),J(10,"label",0),de(11),Te(12,"translate"),J(13,"brn-select",3),Te(14,"translate"),Ai("ngModelChange",function(i){return ts(r.node().type,i)||(r.node().type=i),i}),J(15,"hlm-select-trigger",4)(16,"hlm-select-value"),lt(17,iUe,3,3,"ng-container",5),re()(),J(18,"hlm-select-content"),zo(19,sUe,2,2,"hlm-option",6,Ss),re()()(),J(21,"button",7),je("click",function(){return r.delete()}),de(22),Te(23,"translate"),re()),e&2&&(ee(),et(" ",Ee(2,11,"NAME")," "),ee(2),Ni("ngModel",r.node().name),Be("placeholder",Ee(4,13,"DEVICE_NAME")),ee(3),et(" ",Ee(7,15,"IP")," "),ee(2),Be("ngModel",r.node().ip)("placeholder",Ee(9,17,"DEVICE_IP")),ee(3),et(" ",Ee(12,19,"TYPE")," "),ee(2),Ni("ngModel",r.node().type),Be("placeholder",Ee(14,21,"SELECT_DEVICE_TYPE"))("disabled",r.NodeType.getTypes(r.node().type).length<=1),ee(6),Ho(r.NodeType.getTypes(r.node().type)),ee(3),et(" ",Ee(23,23,"DELETE"),`
`))},dependencies:[_r,zu,Df,ju,Jl,ro,Co,Nf,ua,Us,Uu,X3,Ja,Qa,Pw,Rf,Of,Ya,Zi,gs,Ws,Gs,da,Ow],encapsulation:2})};function aUe(t,n){if(t&1&&(J(0,"div",2)(1,"label",3),de(2),Te(3,"translate"),re(),J(4,"span",4),de(5),re()()),t&2){let e=be();ee(2),ct(Ee(3,2,"PACKET_TYPE")),ee(3),ct(e.context.packet.type)}}function lUe(t,n){if(t&1&&(J(0,"div",2)(1,"label",3),de(2),Te(3,"translate"),re(),J(4,"span",4),de(5),re()()),t&2){let e=be();ee(2),ct(Ee(3,2,"PACKET_CODE")),ee(3),ct(e.context.packet.code)}}function cUe(t,n){if(t&1&&(J(0,"div",2)(1,"label",3),de(2),Te(3,"translate"),re(),J(4,"span",4),de(5),re()()),t&2){let e=be();ee(2),ct(Ee(3,2,"PACKET_IDENTIFIER")),ee(3),ct(e.context.packet.identifier)}}function uUe(t,n){if(t&1&&(J(0,"div",2)(1,"label",3),de(2),Te(3,"translate"),re(),J(4,"span",4),de(5),re()()),t&2){let e=be();ee(2),ct(Ee(3,2,"PACKET_SEQUENCE")),ee(3),ct(e.context.packet.sequence)}}function dUe(t,n){if(t&1&&(J(0,"div",2)(1,"label",3),de(2),Te(3,"translate"),re(),J(4,"span",4),de(5),re()()),t&2){let e=be();ee(2),ct(Ee(3,2,"PACKET_TCP_FLAGS")),ee(3),ct(e.context.packet.tcpFlags)}}function pUe(t,n){if(t&1&&(J(0,"div",2)(1,"label",3),de(2),Te(3,"translate"),re(),J(4,"span",4),de(5),re()()),t&2){let e=be();ee(2),ct(Ee(3,2,"PACKET_ACK")),ee(3),ct(e.context.packet.ack)}}var EN=class t{config=I(Gn);ref=I(ms);context=Vu();ngOnInit(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["app-show-packet-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],decls:84,vars:62,consts:[["hlmDialogTitle",""],[1,"grid","gap-4","py-4"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"items-center","text-right","text-sm","font-medium","text-muted-foreground"],[1,"col-span-3","overflow-hidden","text-ellipsis"]],template:function(e,r){e&1&&(J(0,"hlm-dialog-header")(1,"h3",0),de(2),Te(3,"translate"),re()(),J(4,"div",1)(5,"div",2)(6,"label",3),de(7),Te(8,"translate"),re(),J(9,"span",4),de(10),re()(),J(11,"div",2)(12,"label",3),de(13),Te(14,"translate"),re(),J(15,"span",4),de(16),re()(),J(17,"div",2)(18,"label",3),de(19),Te(20,"translate"),re(),J(21,"span",4),de(22),re()(),J(23,"div",2)(24,"label",3),de(25),Te(26,"translate"),re(),J(27,"span",4),de(28),re()(),J(29,"div",2)(30,"label",3),de(31),Te(32,"translate"),re(),J(33,"span",4),de(34),re()(),J(35,"div",2)(36,"label",3),de(37),Te(38,"translate"),re(),J(39,"span",4),de(40),re()(),J(41,"div",2)(42,"label",3),de(43),Te(44,"translate"),re(),J(45,"span",4),de(46),re()(),J(47,"div",2)(48,"label",3),de(49),Te(50,"translate"),re(),J(51,"span",4),de(52),re()(),J(53,"div",2)(54,"label",3),de(55),Te(56,"translate"),re(),J(57,"span",4),de(58),re()(),J(59,"div",2)(60,"label",3),de(61),Te(62,"translate"),re(),J(63,"span",4),de(64),re()(),J(65,"div",2)(66,"label",3),de(67),Te(68,"translate"),re(),J(69,"span",4),de(70),Te(71,"date"),re()(),J(72,"div",2)(73,"label",3),de(74),Te(75,"translate"),re(),J(76,"span",4),de(77),re()(),lt(78,aUe,6,4,"div",2)(79,lUe,6,4,"div",2)(80,cUe,6,4,"div",2)(81,uUe,6,4,"div",2)(82,dUe,6,4,"div",2)(83,pUe,6,4,"div",2),re()),e&2&&(ee(2),ct(Ee(3,31,"PACKET_DETAILS")),ee(5),ct(Ee(8,33,"PACKET_SRC_IP")),ee(3),ct(r.context.packet.srcIP),ee(3),ct(Ee(14,35,"PACKET_DST_IP")),ee(3),ct(r.context.packet.dstIP),ee(3),ct(Ee(20,37,"PACKET_SRC_PORT")),ee(3),ct(r.context.packet.srcPort),ee(3),ct(Ee(26,39,"PACKET_DST_PORT")),ee(3),ct(r.context.packet.dstPort),ee(3),ct(Ee(32,41,"PACKET_TRANSPORT_PROTOCOL")),ee(3),ct(r.context.packet.transportProtocol),ee(3),ct(Ee(38,43,"PACKET_APPLICATION_PROTOCOL")),ee(3),ct(r.context.packet.applicationProtocol),ee(3),ct(Ee(44,45,"PACKET_PAYLOAD")),ee(3),ct(r.context.packet.payload),ee(3),ct(Ee(50,47,"PACKET_TOTAL_BYTES")),ee(3),ct(r.context.packet.totalBytes),ee(3),ct(Ee(56,49,"PACKET_HEADER_SIZE")),ee(3),ct(r.context.packet.headerSize),ee(3),ct(Ee(62,51,"PACKET_PAYLOAD_SIZE")),ee(3),ct(r.context.packet.payloadSize),ee(3),ct(Ee(68,53,"PACKET_TIMESTAMP")),ee(3),ct(IU(71,55,r.context.packet.timestamp,"medium",void 0,r.config.language())),ee(4),ct(Ee(75,60,"PACKET_TTL")),ee(3),ct(r.context.packet.ttl),ee(),Ct(r.context.packet.type?78:-1),ee(),Ct(r.context.packet.code?79:-1),ee(),Ct(r.context.packet.identifier?80:-1),ee(),Ct(r.context.packet.sequence?81:-1),ee(),Ct(r.context.packet.tcpFlags?82:-1),ee(),Ct(r.context.packet.ack?83:-1))},dependencies:[_r,H5,ro,Co,Yl,Ql,Zi],encapsulation:2})};var IN=class{applyChanges(n,e,r,o,i){n.forEachOperation((s,a,l)=>{let c,u;if(s.previousIndex==null){let d=r(s,a,l);c=e.createEmbeddedView(d.templateRef,d.context,d.index),u=d2.INSERTED}else l==null?(e.remove(a),u=d2.REMOVED):(c=e.get(a),e.move(c,l),u=d2.MOVED);i&&i({context:c?.context,operation:u,record:s})})}detach(){}};var hUe=[[["caption"]],[["colgroup"],["col"]],"*"],fUe=["caption","colgroup, col","*"];function mUe(t,n){t&1&&it(0,2)}function gUe(t,n){t&1&&(J(0,"thead",0),wr(1,1),re(),J(2,"tbody",0),wr(3,2)(4,3),re(),J(5,"tfoot",0),wr(6,4),re())}function vUe(t,n){t&1&&wr(0,1)(1,2)(2,3)(3,4)}var Jp=new Me("CDK_TABLE");var PV=(()=>{class t{template=I(er);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkCellDef",""]]})}return t})(),BV=(()=>{class t{template=I(er);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkHeaderCellDef",""]]})}return t})(),LV=(()=>{class t{template=I(er);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkFooterCellDef",""]]})}return t})(),qb=(()=>{class t{_table=I(Jp,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(e){this._setNameInput(e)}_name;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(r,o,i){if(r&1&&(_o(i,PV,5),_o(i,BV,5),_o(i,LV,5)),r&2){let s;Mr(s=Tr())&&(o.cell=s.first),Mr(s=Tr())&&(o.headerCell=s.first),Mr(s=Tr())&&(o.footerCell=s.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",rt],stickyEnd:[2,"stickyEnd","stickyEnd",rt]},features:[ht([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}])]})}return t})();var AN=class{tasks=[];endTasks=[]},vhe=new Me("_COALESCED_STYLE_SCHEDULER"),wUe=(()=>{class t{_currentSchedule=null;_ngZone=I(Pt);constructor(){}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new AN,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let e=this._currentSchedule;this._currentSchedule=new AN;for(let r of e.tasks)r();for(let r of e.endTasks)r()}this._currentSchedule=null})))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac})}return t})();var $V=(()=>{class t{template=I(er);_differs=I(dd);columns;_columnsDiffer;constructor(){}ngOnChanges(e){if(!this._columnsDiffer){let r=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof ON?e.headerCell.template:this instanceof _he?e.footerCell.template:e.cell.template}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,features:[uo]})}return t})(),ON=(()=>{class t extends $V{_table=I(Jp,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(I(er),I(dd))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",rt]},features:[Mn,uo]})}return t})(),_he=(()=>{class t extends $V{_table=I(Jp,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(I(er),I(dd))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",rt]},features:[Mn,uo]})}return t})(),Kb=(()=>{class t extends $V{_table=I(Jp,{optional:!0});when;constructor(){super(I(er),I(dd))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[Mn]})}return t})(),RN=(()=>{class t{_viewContainer=I(Br);cells;context;static mostRecentCellOutlet=null;constructor(){t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkCellOutlet",""]]})}return t})(),khe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,o){r&1&&wr(0,0)},dependencies:[RN],encapsulation:2})}return t})();var bhe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,o){r&1&&wr(0,0)},dependencies:[RN],encapsulation:2})}return t})(),VV=(()=>{class t{templateRef=I(er);_contentClassName="cdk-no-data-row";constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["ng-template","cdkNoDataRow",""]]})}return t})(),whe=["top","bottom","left","right"],FV=class{_isNativeHtmlTable;_stickCellCss;direction;_coalescedStyleScheduler;_isBrowser;_needsPositionStickyOnElement;_positionListener;_tableInjector;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(n=>this._updateCachedSizes(n)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;_destroyed=!1;constructor(n,e,r,o,i=!0,s=!0,a,l){this._isNativeHtmlTable=n,this._stickCellCss=e,this.direction=r,this._coalescedStyleScheduler=o,this._isBrowser=i,this._needsPositionStickyOnElement=s,this._positionListener=a,this._tableInjector=l,this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(n);let r=[];for(let o of n)o.nodeType===o.ELEMENT_NODE&&r.push(o,...Array.from(o.children));this._afterNextRender({write:()=>{for(let o of r)this._removeStickyStyle(o,e)}})}updateStickyColumns(n,e,r,o=!0,i=!0){if(!n.length||!this._isBrowser||!(e.some(g=>g)||r.some(g=>g))){this._positionListener?.stickyColumnsUpdated({sizes:[]}),this._positionListener?.stickyEndColumnsUpdated({sizes:[]});return}let s=n[0],a=s.children.length,l=this.direction==="rtl",c=l?"right":"left",u=l?"left":"right",d=e.lastIndexOf(!0),p=r.indexOf(!0),h,f,m;i&&this._updateStickyColumnReplayQueue({rows:[...n],stickyStartStates:[...e],stickyEndStates:[...r]}),this._afterNextRender({earlyRead:()=>{h=this._getCellWidths(s,o),f=this._getStickyStartColumnPositions(h,e),m=this._getStickyEndColumnPositions(h,r)},write:()=>{for(let g of n)for(let v=0;v<a;v++){let w=g.children[v];e[v]&&this._addStickyStyle(w,c,f[v],v===d),r[v]&&this._addStickyStyle(w,u,m[v],v===p)}this._positionListener&&h.some(g=>!!g)&&(this._positionListener.stickyColumnsUpdated({sizes:d===-1?[]:h.slice(0,d+1).map((g,v)=>e[v]?g:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:p===-1?[]:h.slice(p).map((g,v)=>r[v+p]?g:null).reverse()}))}})}stickRows(n,e,r){if(!this._isBrowser)return;let o=r==="bottom"?n.slice().reverse():n,i=r==="bottom"?e.slice().reverse():e,s=[],a=[],l=[];this._afterNextRender({earlyRead:()=>{for(let c=0,u=0;c<o.length;c++){if(!i[c])continue;s[c]=u;let d=o[c];l[c]=this._isNativeHtmlTable?Array.from(d.children):[d];let p=this._retrieveElementSize(d).height;u+=p,a[c]=p}},write:()=>{let c=i.lastIndexOf(!0);for(let u=0;u<o.length;u++){if(!i[u])continue;let d=s[u],p=u===c;for(let h of l[u])this._addStickyStyle(h,r,d,p)}r==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:s,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:s,elements:l})}})}updateStickyFooterContainer(n,e){this._isNativeHtmlTable&&this._afterNextRender({write:()=>{let r=n.querySelector("tfoot");r&&(e.some(o=>!o)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1))}})}destroy(){this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._resizeObserver?.disconnect(),this._destroyed=!0}_removeStickyStyle(n,e){if(!n.classList.contains(this._stickCellCss))return;for(let o of e)n.style[o]="",n.classList.remove(this._borderCellCss[o]);whe.some(o=>e.indexOf(o)===-1&&n.style[o])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,r,o){n.classList.add(this._stickCellCss),o&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${r}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){let e={top:100,bottom:10,left:1,right:1},r=0;for(let o of whe)n.style[o]&&(r+=e[o]);return r?`${r}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let r=[],o=n.children;for(let i=0;i<o.length;i++){let s=o[i];r.push(this._retrieveElementSize(s).width)}return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(n,e){let r=[],o=0;for(let i=0;i<n.length;i++)e[i]&&(r[i]=o,o+=n[i]);return r}_getStickyEndColumnPositions(n,e){let r=[],o=0;for(let i=n.length;i>0;i--)e[i]&&(r[i]=o,o+=n[i]);return r}_retrieveElementSize(n){let e=this._elemSizeCache.get(n);if(e)return e;let r=n.getBoundingClientRect(),o={width:r.width,height:r.height};return this._resizeObserver&&(this._elemSizeCache.set(n,o),this._resizeObserver.observe(n,{box:"border-box"})),o}_updateStickyColumnReplayQueue(n){this._removeFromStickyColumnReplayQueue(n.rows),this._stickyColumnsReplayTimeout||this._updatedStickyColumnsParamsToReplay.push(n)}_removeFromStickyColumnReplayQueue(n){let e=new Set(n);for(let r of this._updatedStickyColumnsParamsToReplay)r.rows=r.rows.filter(o=>!e.has(o));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(r=>!!r.rows.length)}_updateCachedSizes(n){let e=!1;for(let r of n){let o=r.borderBoxSize?.length?{width:r.borderBoxSize[0].inlineSize,height:r.borderBoxSize[0].blockSize}:{width:r.contentRect.width,height:r.contentRect.height};o.width!==this._elemSizeCache.get(r.target)?.width&&yUe(r.target)&&(e=!0),this._elemSizeCache.set(r.target,o)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{if(!this._destroyed){for(let r of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(r.rows,r.stickyStartStates,r.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null}},0))}_afterNextRender(n){this._tableInjector?wi(n,{injector:this._tableInjector}):this._coalescedStyleScheduler.schedule(()=>{n.earlyRead?.(),n.write()})}};function yUe(t){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(n=>t.classList.contains(n))}var yhe=new Me("CDK_SPL");var xUe=(()=>{class t{viewContainer=I(Br);elementRef=I(Mt);constructor(){let e=I(Jp);e._rowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","rowOutlet",""]]})}return t})(),_Ue=(()=>{class t{viewContainer=I(Br);elementRef=I(Mt);constructor(){let e=I(Jp);e._headerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","headerRowOutlet",""]]})}return t})(),kUe=(()=>{class t{viewContainer=I(Br);elementRef=I(Mt);constructor(){let e=I(Jp);e._footerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","footerRowOutlet",""]]})}return t})(),bUe=(()=>{class t{viewContainer=I(Br);elementRef=I(Mt);constructor(){let e=I(Jp);e._noDataRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","noDataRowOutlet",""]]})}return t})();var FN=(()=>{class t{_differs=I(dd);_changeDetectorRef=I(Lr);_elementRef=I(Mt);_dir=I(Ki,{optional:!0});_platform=I(ei);_viewRepeater=I(C$);_coalescedStyleScheduler=I(vhe);_viewportRuler=I(Cf);_stickyPositioningListener=I(yhe,{optional:!0,skipSelf:!0});_document=I(un);_data;_onDestroy=new ot;_renderRows;_renderChangeSubscription;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}_trackByFn;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;contentChanged=new Xt;viewChange=new Kn({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;_injector=I(Yt);constructor(){I(new Y2("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE",this._dataDiffer=this._differs.find([]).create((r,o)=>this.trackBy?this.trackBy(o.dataIndex,o.data):o)}ngOnInit(){this._setupStickyStyler(),this._viewportRuler.change().pipe(en(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){this._stickyStyler?.destroy(),[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),b3(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,r,(o,i,s)=>this._getEmbeddedViewArgs(o.item,s),o=>o.item.data,o=>{o.operation===d2.INSERTED&&o.context&&this._renderCellTemplateForItem(o.record.item.rowDef,o.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);i.context.$implicit=o.item.data}),this._updateNoDataRow(),this.contentChanged.next(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let o=xhe(this._headerRowOutlet,"thead");o&&(o.style.display=e.length?"":"none")}let r=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,r,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let o=xhe(this._footerRowOutlet,"tfoot");o&&(o.style.display=e.length?"":"none")}let r=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,r,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,r),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),o=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...r,...o],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((i,s)=>{this._addStickyColumnStyles([i],this._headerRowDefs[s])}),this._rowDefs.forEach(i=>{let s=[];for(let a=0;a<r.length;a++)this._renderRows[a].rowDef===i&&s.push(r[a]);this._addStickyColumnStyles(s,i)}),o.forEach((i,s)=>{this._addStickyColumnStyles([i],this._footerRowDefs[s])}),Array.from(this._columnDefsByName.values()).forEach(i=>i.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],r=this._cachedRenderRowsMap;if(this._cachedRenderRowsMap=new Map,!this._data)return e;for(let o=0;o<this._data.length;o++){let i=this._data[o],s=this._getRenderRowsForData(i,o,r.get(i));this._cachedRenderRowsMap.has(i)||this._cachedRenderRowsMap.set(i,new WeakMap);for(let a=0;a<s.length;a++){let l=s[a],c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,r,o){return this._getRowDefs(e,r).map(s=>{let a=o&&o.has(s)?o.get(s):[];if(a.length){let l=a.shift();return l.dataIndex=r,l}else return{data:e,rowDef:s,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),NN(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=NN(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=NN(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=NN(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(r=>!r.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(s,a)=>{let l=!!a.getColumnsDiff();return s||l},r=this._rowDefs.reduce(e,!1);r&&this._forceRenderDataRows();let o=this._headerRowDefs.reduce(e,!1);o&&this._forceRenderHeaderRows();let i=this._footerRowDefs.reduce(e,!1);return i&&this._forceRenderFooterRows(),r||o||i}_switchDataSource(e){this._data=[],b3(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;b3(this.dataSource)?e=this.dataSource.connect(this):xs(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=at(this.dataSource)),this._renderChangeSubscription=e.pipe(en(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,r)=>this._renderRow(this._headerRowOutlet,e,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,r)=>this._renderRow(this._footerRowOutlet,e,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,r){let o=Array.from(r?.columns||[]).map(a=>{let l=this._columnDefsByName.get(a);return l}),i=o.map(a=>a.sticky),s=o.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,i,s,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let r=[];for(let o=0;o<e.viewContainer.length;o++){let i=e.viewContainer.get(o);r.push(i.rootNodes[0])}return r}_getRowDefs(e,r){if(this._rowDefs.length==1)return[this._rowDefs[0]];let o=[];if(this.multiTemplateDataRows)o=this._rowDefs.filter(i=>!i.when||i.when(r,e));else{let i=this._rowDefs.find(s=>s.when&&s.when(r,e))||this._defaultRowDef;i&&o.push(i)}return o.length,o}_getEmbeddedViewArgs(e,r){let o=e.rowDef,i={$implicit:e.data};return{templateRef:o.template,context:i,index:r}}_renderRow(e,r,o,i={}){let s=e.viewContainer.createEmbeddedView(r.template,i,o);return this._renderCellTemplateForItem(r,i),s}_renderCellTemplateForItem(e,r){for(let o of this._getCellTemplates(e))RN.mostRecentCellOutlet&&RN.mostRecentCellOutlet._viewContainer.createEmbeddedView(o,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let r=0,o=e.length;r<o;r++){let s=e.get(r).context;s.count=o,s.first=r===0,s.last=r===o-1,s.even=r%2===0,s.odd=!s.even,this.multiTemplateDataRows?(s.dataIndex=this._renderRows[r].dataIndex,s.renderIndex=r):s.index=this._renderRows[r].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,r=>{let o=this._columnDefsByName.get(r);return e.extractCellTemplate(o)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(r,o)=>r||o.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new FV(this._isNativeHtmlTable,this.stickyCssClass,e,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener,this._injector),(this._dir?this._dir.change:at()).pipe(en(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let r=this._rowOutlet.viewContainer.length===0;if(r===this._isShowingNoDataRow)return;let o=this._noDataRowOutlet.viewContainer;if(r){let i=o.createEmbeddedView(e.templateRef),s=i.rootNodes[0];i.rootNodes.length===1&&s?.nodeType===this._document.ELEMENT_NODE&&(s.setAttribute("role","row"),s.classList.add(e._contentClassName))}else o.clear();this._isShowingNoDataRow=r,this._changeDetectorRef.markForCheck()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(r,o,i){if(r&1&&(_o(i,VV,5),_o(i,qb,5),_o(i,Kb,5),_o(i,ON,5),_o(i,_he,5)),r&2){let s;Mr(s=Tr())&&(o._noDataRow=s.first),Mr(s=Tr())&&(o._contentColumnDefs=s),Mr(s=Tr())&&(o._contentRowDefs=s),Mr(s=Tr())&&(o._contentHeaderRowDefs=s),Mr(s=Tr())&&(o._contentFooterRowDefs=s)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(r,o){r&2&&Sr("cdk-table-fixed-layout",o.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",rt],fixedLayout:[2,"fixedLayout","fixedLayout",rt]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[ht([{provide:Jp,useExisting:t},{provide:C$,useClass:IN},{provide:vhe,useClass:wUe},{provide:yhe,useValue:null}])],ngContentSelectors:fUe,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,o){r&1&&(Rt(hUe),it(0),it(1,1),lt(2,mUe,1,0)(3,gUe,7,0)(4,vUe,4,0)),r&2&&(ee(2),Ct(o._isServer?2:-1),ee(),Ct(o._isNativeHtmlTable?3:4))},dependencies:[_Ue,xUe,bUe,kUe],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return t})();function NN(t,n){return t.concat(Array.from(n))}function xhe(t,n){let e=n.toUpperCase(),r=t.viewContainer.element.nativeElement;for(;r;){let o=r.nodeType===1?r.nodeName:null;if(o===e)return r;if(o==="TABLE")break;r=r.parentNode}return null}var jV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({imports:[_w]})}return t})();var SUe=[[["","brnHeaderDef",""]],[["","brnCellDef",""]],[["","brnFooterDef",""]]],MUe=["[brnHeaderDef]","[brnCellDef]","[brnFooterDef]"],TUe=["cdkTable"],DUe=["*",[["","brnNoDataRow",""]]],EUe=["*","[brnNoDataRow]"];function IUe(t,n){if(t&1&&Le(0,"cdk-header-row"),t&2){let e=be();Ve(e.headerRowClasses)}}function NUe(t,n){if(t&1){let e=bn();J(0,"cdk-row",6),je("keydown.enter",function(){let o=Ge(e).$implicit,i=be(2);return We(!!i.onRowClick&&i.onRowClick(o))})("click",function(){let o=Ge(e).$implicit,i=be(2);return We(!!i.onRowClick&&i.onRowClick(o))}),re()}if(t&2){let e=be(2);Ve(e.bodyRowClasses),Sr("row-interactive",!!e.onRowClick),Be("tabindex",e.onRowClick?0:-1),At("role",e.onRowClick?"button":"row")}}function AUe(t,n){if(t&1&&lt(0,NUe,1,6,"cdk-row",5),t&2){let e=be();Be("cdkRowDefColumns",e.displayedColumns)}}function RUe(t,n){t&1&&it(0,1)}var zV=(()=>{class t extends PV{template;constructor(){let e=I(er);super(e),this.template=e}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnCellDef",""]],exportAs:["brnCellDef"],features:[Mn]})}return t})(),OUe=(()=>{class t extends LV{template;constructor(){let e=I(er);super(e),this.template=e}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnFooterDef",""]],exportAs:["brnFooterDef"],features:[Mn]})}return t})(),HV=(()=>{class t extends BV{template;constructor(){let e=I(er);super(e),this.template=e}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnHeaderDef",""]],exportAs:["brnHeaderDef"],features:[Mn]})}return t})(),Hf=(()=>{class t{get columnDef(){return this._columnDef}get cell(){return this._columnDef.cell}_name="";get name(){return this._name}set name(e){this._name=e,this._columnDef&&(this._columnDef.name=e)}class=Y("");_columnDef;_cellDef;_footerCellDef;_headerCellDef;ngAfterContentChecked(){this._columnDef.name=this.name,this._cellDef&&(this._columnDef.cell=this._cellDef),this._headerCellDef&&(this._columnDef.headerCell=this._headerCellDef),this._footerCellDef&&(this._columnDef.footerCell=this._footerCellDef)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-column-def"]],contentQueries:function(r,o,i){if(r&1&&(_o(i,zV,7),_o(i,OUe,7),_o(i,HV,7)),r&2){let s;Mr(s=Tr())&&(o._cellDef=s.first),Mr(s=Tr())&&(o._footerCellDef=s.first),Mr(s=Tr())&&(o._headerCellDef=s.first)}},viewQuery:function(r,o){if(r&1&&Mm(qb,7),r&2){let i;Mr(i=Tr())&&(o._columnDef=i.first)}},inputs:{name:"name",class:[1,"class"]},ngContentSelectors:MUe,decls:4,vars:1,consts:[[3,"cdkColumnDef"]],template:function(r,o){r&1&&(Rt(SUe),Cm(0,0),it(1),it(2,1),it(3,2),Sm()),r&2&&Be("cdkColumnDef",o.name)},dependencies:[jV,qb],encapsulation:2,changeDetection:0})}return t})();var UV=(()=>{class t{_cdkTable;dataSource=[];fixedLayout=!1;multiTemplateDataRows=!1;displayedColumns=[];_trackBy;get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e,this._cdkTable&&(this._cdkTable.trackBy=this._trackBy)}contentChanged=new Xt;customTemplateDataRows=!1;onRowClick;stickyHeader=!1;tableClasses="";headerRowClasses="";bodyRowClasses="";columnDefComponents;rowDefs;ngAfterContentInit(){this.columnDefComponents.forEach(e=>{this._cdkTable&&e.cell&&this._cdkTable.addColumnDef(e.columnDef)}),this.rowDefs.forEach(e=>{this._cdkTable&&this._cdkTable.addRowDef(e)})}setTableClasses({table:e,headerRow:r,bodyRow:o}){e&&(this.tableClasses=e),r&&(this.headerRowClasses=r),o&&(this.bodyRowClasses=o)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Oe({type:t,selectors:[["brn-table"]],contentQueries:function(r,o,i){if(r&1&&(_o(i,Hf,4),_o(i,Kb,4)),r&2){let s;Mr(s=Tr())&&(o.columnDefComponents=s),Mr(s=Tr())&&(o.rowDefs=s)}},viewQuery:function(r,o){if(r&1&&Mm(TUe,7,FN),r&2){let i;Mr(i=Tr())&&(o._cdkTable=i.first)}},inputs:{dataSource:"dataSource",fixedLayout:[2,"fixedLayout","fixedLayout",rt],multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",rt],displayedColumns:"displayedColumns",trackBy:"trackBy",customTemplateDataRows:[2,"customTemplateDataRows","customTemplateDataRows",rt],onRowClick:"onRowClick",stickyHeader:[2,"stickyHeader","stickyHeader",rt],tableClasses:"tableClasses",headerRowClasses:"headerRowClasses",bodyRowClasses:"bodyRowClasses"},outputs:{contentChanged:"contentChanged"},features:[ht([Mue(()=>t)])],ngContentSelectors:EUe,decls:6,vars:8,consts:[["cdkTable",""],[3,"contentChanged","dataSource","fixedLayout","multiTemplateDataRows"],[3,"class",4,"cdkHeaderRowDef","cdkHeaderRowDefSticky"],[3,"tabindex","row-interactive","class"],["cdkNoDataRow",""],[3,"tabindex","row-interactive","class","keydown.enter","click",4,"cdkRowDef","cdkRowDefColumns"],[3,"keydown.enter","click","tabindex"]],template:function(r,o){if(r&1){let i=bn();Rt(DUe),J(0,"cdk-table",1,0),je("contentChanged",function(){return Ge(i),We(o.contentChanged.emit())}),it(2),lt(3,IUe,1,2,"cdk-header-row",2)(4,AUe,1,1,"cdk-row",3)(5,RUe,1,0,"ng-template",4),re()}r&2&&(Ve(o.tableClasses),Be("dataSource",o.dataSource)("fixedLayout",o.fixedLayout)("multiTemplateDataRows",o.multiTemplateDataRows),ee(3),Be("cdkHeaderRowDef",o.displayedColumns)("cdkHeaderRowDefSticky",o.stickyHeader),ee(),Ct(o.customTemplateDataRows?-1:4))},dependencies:[jV,FN,Kb,bhe,khe,ON,VV],encapsulation:2,changeDetection:0})}return t})();var Che=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({imports:[Hf,UV]})}return t})();var Jw=class t{_tableClassesSettable=Sue({host:!0,optional:!0});constructor(){this._tableClassesSettable?.setTableClasses({table:"flex flex-col text-sm [&_cdk-row:last-child]:border-0",headerRow:"flex min-w-[100%] w-fit border-b border-border [&.cdk-table-sticky]:bg-background [&.cdk-table-sticky>*]:z-[101] [&.cdk-table-sticky]:before:z-0 [&.cdk-table-sticky]:before:block [&.cdk-table-sticky]:hover:before:bg-muted/50 [&.cdk-table-sticky]:before:absolute [&.cdk-table-sticky]:before:inset-0",bodyRow:"flex min-w-[100%] w-fit border-b border-border transition-[background-color] hover:bg-muted/50 [&:has([role=checkbox][aria-checked=true])]:bg-muted"})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmTable",""],["brn-table","hlm",""]]})};var BUe=["*"];function LUe(t,n){t&1&&it(0)}function $Ue(t,n){if(t&1&&(J(0,"span",1),wr(1,2),re()),t&2){be();let e=yr(1);ee(),Be("ngTemplateOutlet",e)}}function VUe(t,n){if(t&1&&wr(0,2),t&2){be();let e=yr(1);Be("ngTemplateOutlet",e)}}var ey=class t{_columnDef=I(Hf,{optional:!0});truncate=Y(!1,{transform:rt});userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("flex flex-none p-4 items-center [&:has([role=checkbox])]:pr-0",this._columnDef?.class(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-td"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{truncate:[1,"truncate"],userClass:[1,"class","userClass"]},ngContentSelectors:BUe,decls:4,vars:1,consts:[["content",""],[1,"flex-1","truncate"],[3,"ngTemplateOutlet"]],template:function(e,r){e&1&&(Rt(),lt(0,LUe,1,0,"ng-template",null,0,ko)(2,$Ue,2,1,"span",1)(3,VUe,1,1,"ng-container",2)),e&2&&(ee(2),Ct(r.truncate()?2:3))},dependencies:[gh],encapsulation:2,changeDetection:0})};var zUe=["*"];function HUe(t,n){t&1&&it(0)}function UUe(t,n){if(t&1&&(J(0,"span",1),wr(1,2),re()),t&2){be();let e=yr(1);ee(),Be("ngTemplateOutlet",e)}}function GUe(t,n){if(t&1&&wr(0,2),t&2){be();let e=yr(1);Be("ngTemplateOutlet",e)}}var ty=class t{_columnDef=I(Hf,{optional:!0});truncate=Y(!1,{transform:rt});userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("flex flex-none h-12 px-4 text-sm items-center font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",this._columnDef?.class(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-th"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{truncate:[1,"truncate"],userClass:[1,"class","userClass"]},ngContentSelectors:zUe,decls:4,vars:1,consts:[["content",""],[1,"flex-1","truncate"],[3,"ngTemplateOutlet"]],template:function(e,r){e&1&&(Rt(),lt(0,HUe,1,0,"ng-template",null,0,ko)(2,UUe,2,1,"span",1)(3,GUe,1,1,"ng-container",2)),e&2&&(ee(2),Ct(r.truncate()?2:3))},dependencies:[gh],encapsulation:2,changeDetection:0})};var PN=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({})};var GV=class{_box;_destroyed=new ot;_resizeSubject=new ot;_resizeObserver;_elementObservables=new Map;constructor(n){this._box=n,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new Jt(e=>{let r=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),r.unsubscribe(),this._elementObservables.delete(n)}}).pipe(xn(e=>e.some(r=>r.target===n)),tm({bufferSize:1,refCount:!0}),en(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Mhe=(()=>{class t{_cleanupErrorListener;_observers=new Map;_ngZone=I(Pt);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(e,r){let o=r?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new GV(o)),this._observers.get(o).observe(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Dhe=(()=>{class t{_root=I(ny);_elementRef=I(Mt);contentFor=Y.required({alias:"brnTabsContent"});_isSelected=ae(()=>this._root.$activeTab()===this.contentFor());contentId=ae(()=>`brn-tabs-content-${this.contentFor()}`);labelId=ae(()=>`brn-tabs-label-${this.contentFor()}`);constructor(){Gt(()=>{let e=this.contentFor();Un(()=>this._root.registerContent(e,this))})}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTabsContent",""]],hostAttrs:["role","tabpanel","tabindex","0"],hostVars:3,hostBindings:function(r,o){r&2&&(Gr("id",o.contentId())("hidden",o._isSelected()===!1),At("aria-labelledby",o.labelId()))},inputs:{contentFor:[1,"brnTabsContent","contentFor"]},exportAs:["brnTabsContent"]})}return t})(),ny=(()=>{class t{orientation=Y("horizontal");$orientation=this.orientation;direction=Y("ltr");$direction=this.direction;_activeTab=ii(void 0,{alias:"brnTabs"});$activeTab=this._activeTab.asReadonly();activationMode=Y("automatic");$activationMode=this.activationMode;tabActivated=$n();_tabs=Ye({});$tabs=this._tabs.asReadonly();registerTrigger(e,r){this._tabs.update(o=>pt(ue({},o),{[e]:{trigger:r,content:o[e]?.content}}))}registerContent(e,r){this._tabs.update(o=>pt(ue({},o),{[e]:{trigger:o[e]?.trigger,content:r}}))}emitTabActivated(e){this.tabActivated.emit(e)}setActiveTab(e){this._activeTab.set(e)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTabs",""]],hostVars:2,hostBindings:function(r,o){r&2&&At("data-orientation",o.orientation())("dir",o.direction())},inputs:{orientation:[1,"orientation"],direction:[1,"direction"],_activeTab:[1,"brnTabs","_activeTab"],activationMode:[1,"activationMode"]},outputs:{_activeTab:"brnTabsChange",tabActivated:"tabActivated"},exportAs:["brnTabs"]})}return t})(),b2=(()=>{class t{elementRef=I(Mt);_root=I(ny);_orientation=this._root.$orientation;triggerFor=Y.required({alias:"brnTabsTrigger"});selected=ae(()=>this._root.$activeTab()===this.triggerFor());contentId=ae(()=>`brn-tabs-content-${this.triggerFor()}`);labelId=ae(()=>`brn-tabs-label-${this.triggerFor()}`);disabled=!1;constructor(){Gt(()=>{let e=this.triggerFor();Un(()=>this._root.registerTrigger(e,this))})}focus(){this.elementRef.nativeElement.focus(),this._root.$activationMode()==="automatic"&&this.activate()}activate(){this.triggerFor()&&(this._root.setActiveTab(this.triggerFor()),this._root.emitTabActivated(this.triggerFor()))}get key(){return this.triggerFor()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["button","brnTabsTrigger",""]],hostAttrs:["type","button","role","tab"],hostVars:7,hostBindings:function(r,o){r&1&&je("click",function(){return o.activate()}),r&2&&(Gr("id",o.labelId())("tabindex",o.selected()?"0":"-1"),At("aria-selected",o.selected())("aria-controls",o.contentId())("data-state",o.selected()?"active":"inactive")("data-orientation",o._orientation())("data-disabled",o.disabled?"":void 0))},inputs:{triggerFor:[1,"brnTabsTrigger","triggerFor"],disabled:"disabled"},exportAs:["brnTabsTrigger"]})}return t})(),Ehe=(()=>{class t{_root=I(ny);_orientation=this._root.$orientation;_direction=this._root.$direction;_activeTab=this._root.$activeTab;_tabs=this._root.$tabs;_elementRef=I(Mt);_keyDownListener=ol(this._elementRef.nativeElement,"keydown");_keyManager;triggers=_m(b2,{descendants:!0});ngAfterContentInit(){this._keyManager=new Ef(this.triggers()).withHorizontalOrientation(this._direction()).withHomeAndEnd().withPageUpDown().withWrap(),this._keyDownListener.pipe(eo(1)).subscribe(()=>{let e=this._activeTab(),r=this._tabs(),o=0;if(e){let i=r[e];i&&(o=this.triggers().indexOf(i.trigger))}this._keyManager?.setActiveItem(o)}),this._keyDownListener.subscribe(e=>{"key"in e&&(this._orientation()==="horizontal"&&(e.key==="ArrowUp"||e.key==="ArrowDown")||this._orientation()==="vertical"&&(e.key==="ArrowLeft"||e.key==="ArrowRight"))||this._keyManager?.onKeydown(e)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTabsList",""]],contentQueries:function(r,o,i){r&1&&es(i,o.triggers,b2,5),r&2&&no()},hostAttrs:["role","tablist"],hostVars:2,hostBindings:function(r,o){r&2&&At("aria-orientation",o._orientation())("data-orientation",o._orientation())},exportAs:["brnTabsList"]})}return t})();var The=sb({passive:!0}),ZUe=650,XUe=100,Ihe=(()=>{class t{_scrollDistance=0;_selectedIndexChanged=!1;_root=I(ny);_activeTab=this._root.$activeTab;_tabs=this._root.$tabs;_destroyed=new ot;_showPaginationControls=Ye(!1);_disableScrollAfter=!0;_disableScrollBefore=!0;_tabLabelCount;_scrollDistanceChanged;_keyManager;_currentTextContent;_stopScrolling=new ot;disablePagination=Y(!1,{transform:rt});_selectedIndex=ae(()=>{let e=this._activeTab(),r=this._tabs(),o=0;if(e&&this._items()){let i=r[e];i&&(o=this._items().indexOf(i.trigger))}return o});selectFocusedIndex=$n();indexFocused=$n();_sharedResizeObserver=I(Mhe);_injector=I(Yt);_elementRef=I(Mt);_changeDetectorRef=I(Lr);_viewportRuler=I(Cf);_dir=I(Ki,{optional:!0});_ngZone=I(Pt);_platform=I(ei);_animationMode=I(ym,{optional:!0});constructor(){this._ngZone.runOutsideAngular(()=>{ol(this._elementRef.nativeElement,"mouseleave").pipe(en(this._destroyed)).subscribe(()=>{this._stopInterval()})}),Gt(()=>{let e=this._selectedIndex();e!==0&&(this._selectedIndexChanged=!0,this._keyManager&&this._keyManager.updateActiveItem(e))})}ngAfterViewInit(){ol(this._previousPaginator().nativeElement,"touchstart",The).pipe(en(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),ol(this._nextPaginator().nativeElement,"touchstart",The).pipe(en(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let e=this._dir?this._dir.change:at("ltr"),r=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(fa(32),en(this._destroyed)),o=this._viewportRuler.change(150).pipe(en(this._destroyed)),i=()=>{this.updatePagination()};this._keyManager=new Ef(this._items()).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex()),wi(i,{injector:this._injector}),nc(e,o,r,this._itemsChanges,this._itemsResized()).pipe(en(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),i()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?ri:this._itemsChanges.pipe(ma(this._items()),Pr(e=>new Jt(r=>this._ngZone.runOutsideAngular(()=>{let o=new ResizeObserver(i=>r.next(i));for(let i of e)o.observe(i.elementRef.nativeElement);return()=>{o.disconnect()}}))),nm(1),xn(e=>e.some(r=>r.contentRect.width>0&&r.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!==this._items().length&&(this.updatePagination(),this._tabLabelCount=this._items().length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex()),this._checkScrollingControls(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!Jr(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this._selectedIndex()){let r=this._items()[this.focusIndex];r&&!r.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex??0:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items()?!!this._items()[e]:!0}_setTabFocus(e){if(this._showPaginationControls()&&this._scrollToLabel(e),this._items()?.length){this._items()[e].focus();let r=this._tabListContainer().nativeElement;this._getLayoutDirection()==="ltr"?r.scrollLeft=0:r.scrollLeft=r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination())return;let e=this.scrollDistance,r=this._getLayoutDirection()==="ltr"?-e:e;this._tabList().nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer().nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let r=this._tabListContainer().nativeElement.offsetWidth,o=(e==="before"?-1:1)*r/3;return this._scrollTo(this._scrollDistance+o)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination())return;let r=this._items()?this._items()[e]:null;if(!r)return;let o=this._tabListContainer().nativeElement.offsetWidth,{offsetLeft:i,offsetWidth:s}=r.elementRef.nativeElement,a,l;this._getLayoutDirection()==="ltr"?(a=i,l=a+s):(l=this._tabListInner().nativeElement.offsetWidth-i,a=l-s);let c=this.scrollDistance,u=this.scrollDistance+o;a<c?this.scrollDistance-=c-a:l>u&&(this.scrollDistance+=Math.min(l-u,a-c))}_checkPaginationEnabled(){if(this.disablePagination())this._showPaginationControls.set(!1);else{let e=this._tabListInner().nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls()&&this._changeDetectorRef.markForCheck(),this._showPaginationControls.set(e)}}_checkScrollingControls(){this.disablePagination()?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance===0,this._disableScrollAfter=this.scrollDistance===this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner().nativeElement.scrollWidth,r=this._tabListContainer().nativeElement.offsetWidth;return e-r||0}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,r){r&&r.button!==null&&r.button!==0||(this._stopInterval(),nd(ZUe,XUe).pipe(en(nc(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:o,distance:i}=this._scrollHeader(e);(i===0||i>=o)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination())return{maxScrollDistance:0,distance:0};let r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,inputs:{disablePagination:[1,"disablePagination"]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}})}return t})();var WV=class t{contentFor=Y.required({alias:"hlmTabsContent"});userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmTabsContent",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{contentFor:[1,"hlmTabsContent","contentFor"],userClass:[1,"class","userClass"]},features:[qt([{directive:Dhe,inputs:["brnTabsContent","hlmTabsContent"]}])]})};var YUe=["*"],KV=ar("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",{variants:{orientation:{horizontal:"h-10 space-x-1",vertical:"mt-2 flex-col h-fit space-y-1"}},defaultVariants:{orientation:"horizontal"}}),qV=class t{orientation=Y("horizontal");userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze(KV({orientation:this.orientation()}),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-tabs-list"]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{orientation:[1,"orientation"],userClass:[1,"class","userClass"]},features:[qt([Ehe])],ngContentSelectors:YUe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var QUe=["tabListContainer"],JUe=["tabList"],eGe=["tabListInner"],tGe=["nextPaginator"],nGe=["previousPaginator"],rGe=["*"],LN=class t extends Ihe{_items=_m(b2,{descendants:!1});_itemsChanges=Tb(this._items);_tabListContainer=oi.required("tabListContainer");_tabList=oi.required("tabList");_tabListInner=oi.required("tabListInner");_nextPaginator=oi.required("nextPaginator");_previousPaginator=oi.required("previousPaginator");userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("flex overflow-hidden relative gap-1 flex-shrink-0",this.userClass()));tabLisClass=Y("",{alias:"class"});_tabListClass=ae(()=>Ze(KV(),this.tabLisClass()));paginationButtonClass=Y("",{alias:"class"});_paginationButtonClass=ae(()=>Ze("relative z-[2] select-none disabled:cursor-default",pV({variant:"ghost",size:"icon"}),this.paginationButtonClass()));_itemSelected(n){n.preventDefault()}static \u0275fac=(()=>{let n;return function(r){return(n||(n=Ur(t)))(r||t)}})();static \u0275cmp=Oe({type:t,selectors:[["hlm-paginated-tabs-list"]],contentQueries:function(e,r,o){e&1&&es(o,r._items,b2,4),e&2&&no()},viewQuery:function(e,r){e&1&&(si(r._tabListContainer,QUe,5),si(r._tabList,JUe,5),si(r._tabListInner,eGe,5),si(r._nextPaginator,tGe,5),si(r._previousPaginator,nGe,5)),e&2&&no(5)},hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{userClass:[1,"class","userClass"],tabLisClass:[1,"class","tabLisClass"],paginationButtonClass:[1,"class","paginationButtonClass"]},features:[ht([ir({lucideChevronRight:w3,lucideChevronLeft:Tue})]),Mn],ngContentSelectors:rGe,decls:13,vars:16,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["data-pagination","previous","type","button","aria-hidden","true","tabindex","-1",3,"click","mousedown","touchend","disabled"],["hlm","","size","base","name","lucideChevronLeft"],[1,"z-[1]","flex","grow","overflow-hidden",3,"keydown"],["role","tablist",1,"relative","grow","transition-transform",3,"cdkObserveContent"],["data-pagination","next","type","button","aria-hidden","true","tabindex","-1",3,"click","mousedown","touchend","disabled"],["hlm","","size","base","name","lucideChevronRight"]],template:function(e,r){if(e&1){let o=bn();Rt(),J(0,"button",5,0),je("click",function(){return Ge(o),We(r._handlePaginatorClick("before"))})("mousedown",function(s){return Ge(o),We(r._handlePaginatorPress("before",s))})("touchend",function(){return Ge(o),We(r._stopInterval())}),Le(2,"ng-icon",6),re(),J(3,"div",7,1),je("keydown",function(s){return Ge(o),We(r._handleKeydown(s))}),J(5,"div",8,2),je("cdkObserveContent",function(){return Ge(o),We(r._onContentChanges())}),J(7,"div",null,3),it(9),re()()(),J(10,"button",9,4),je("click",function(){return Ge(o),We(r._handlePaginatorClick("after"))})("mousedown",function(s){return Ge(o),We(r._handlePaginatorPress("after",s))})("touchend",function(){return Ge(o),We(r._stopInterval())}),Le(12,"ng-icon",10),re()}e&2&&(Ve(r._paginationButtonClass()),Sr("flex",r._showPaginationControls())("hidden",!r._showPaginationControls()),Be("disabled",r._disableScrollBefore||null),ee(7),Ve(r._tabListClass()),ee(3),Ve(r._paginationButtonClass()),Sr("flex",r._showPaginationControls())("hidden",!r._showPaginationControls()),Be("disabled",r._disableScrollAfter||null))},dependencies:[P$,sr,ao],encapsulation:2})};var ZV=class t{triggerFor=Y.required({alias:"hlmTabsTrigger"});userClass=Y("",{alias:"class"});_computedClass=ae(()=>Ze("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmTabsTrigger",""]],hostVars:2,hostBindings:function(e,r){e&2&&Ve(r._computedClass())},inputs:{triggerFor:[1,"hlmTabsTrigger","triggerFor"],userClass:[1,"class","userClass"]},features:[qt([{directive:b2,inputs:["brnTabsTrigger","hlmTabsTrigger","disabled","disabled"]}])]})};var oGe=["*"],XV=class t{tab=Y.required();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["hlm-tabs"]],inputs:{tab:[1,"tab"]},features:[qt([{directive:ny,inputs:["orientation","orientation","direction","direction","activationMode","activationMode","brnTabs","tab"],outputs:["tabActivated","tabActivated"]}])],ngContentSelectors:oGe,decls:1,vars:0,template:function(e,r){e&1&&(Rt(),it(0))},encapsulation:2})};var $N=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Dt({type:t});static \u0275inj=Tt({imports:[LN]})};function iGe(t,n){t&1&&Le(0,"hlm-th")}function sGe(t,n){t&1&&Le(0,"ng-icon",19)}function aGe(t,n){t&1&&Le(0,"ng-icon",20)}function lGe(t,n){t&1&&Le(0,"ng-icon",21)}function cGe(t,n){if(t&1&&(J(0,"hlm-td"),lt(1,sGe,1,0,"ng-icon",19)(2,aGe,1,0,"ng-icon",20)(3,lGe,1,0,"ng-icon",21),re()),t&2){let e,r=n.$implicit,o=be(3);ee(),Ct((e=o.node().ip)===r.srcIP?1:e===r.dstIP?2:3)}}function uGe(t,n){t&1&&(J(0,"hlm-th"),de(1),Te(2,"translate"),re()),t&2&&(ee(),ct(Ee(2,1,"SOURCE")))}function dGe(t,n){if(t&1&&(J(0,"hlm-td"),de(1),re()),t&2){let e=n.$implicit;ee(),et(" ",e.srcIP," ")}}function pGe(t,n){t&1&&(J(0,"hlm-th"),de(1),Te(2,"translate"),re()),t&2&&(ee(),ct(Ee(2,1,"DESTINATION")))}function hGe(t,n){if(t&1&&(J(0,"hlm-td"),de(1),re()),t&2){let e=n.$implicit;ee(),et(" ",e.dstIP," ")}}function fGe(t,n){t&1&&(J(0,"hlm-th"),de(1),Te(2,"translate"),re()),t&2&&(ee(),ct(Ee(2,1,"BYTES")))}function mGe(t,n){if(t&1&&(J(0,"hlm-td",22),de(1),re()),t&2){let e=n.$implicit;ee(),et(" ",e.totalBytes," ")}}function gGe(t,n){t&1&&(J(0,"hlm-th"),de(1),Te(2,"translate"),re()),t&2&&(ee(),ct(Ee(2,1,"DATA")))}function vGe(t,n){if(t&1&&(J(0,"hlm-td",23),de(1),re()),t&2){let e=n.$implicit;ee(),et(" ",e.payload," ")}}function wGe(t,n){if(t&1&&(J(0,"brn-table",0)(1,"brn-column-def",10),lt(2,iGe,1,0,"hlm-th",11)(3,cGe,4,1,"hlm-td",12),re(),J(4,"brn-column-def",13),lt(5,uGe,3,3,"hlm-th",11)(6,dGe,2,1,"hlm-td",12),re(),J(7,"brn-column-def",14),lt(8,pGe,3,3,"hlm-th",11)(9,hGe,2,1,"hlm-td",12),re(),J(10,"brn-column-def",15),lt(11,fGe,3,3,"hlm-th",11)(12,mGe,2,1,"hlm-td",16),re(),J(13,"brn-column-def",17),lt(14,gGe,3,3,"hlm-th",11)(15,vGe,2,1,"hlm-td",18),re()()),t&2){let e=be(2);Be("dataSource",e.node().traffic.slice(-50))("displayedColumns",e.displayedColumns())("onRowClick",e.viewPacket.bind(e))}}function yGe(t,n){t&1&&(Le(0,"ng-icon",24),J(1,"p",25),de(2),Te(3,"translate"),re()),t&2&&(ee(2),et(" ",Ee(3,1,"NO_TRAFFIC")," "))}function xGe(t,n){t&1&&Le(0,"hlm-menu-separator")}function _Ge(t,n){if(t&1&&(J(0,"hlm-option",8),de(1),re()),t&2){let e=be().$implicit;Be("value",e),ee(),ct(e.name)}}function kGe(t,n){if(t&1&&lt(0,xGe,1,0,"hlm-menu-separator")(1,_Ge,2,2,"hlm-option",8),t&2){let e=n.$implicit;Ct(e==="---"?0:1)}}function bGe(t,n){t&1&&(J(0,"hlm-option",5),de(1),Te(2,"translate"),re()),t&2&&(ee(),et(" ",Ee(2,1,"NO_COMMANDS")," "))}function CGe(t,n){if(t&1&&(J(0,"hlm-option",8),de(1),re()),t&2){let e=n.$implicit;Be("value",e.ip),ee(),ct(e.ip)}}function SGe(t,n){if(t&1){let e=bn();lt(0,wGe,16,3,"brn-table",0)(1,yGe,4,3),J(2,"div",1)(3,"label",2),de(4),Te(5,"translate"),J(6,"brn-select",3),Te(7,"translate"),Ai("ngModelChange",function(o){Ge(e);let i=be();return ts(i.command,o)||(i.command=o),We(o)}),J(8,"hlm-select-trigger",4),Le(9,"hlm-select-value"),re(),J(10,"hlm-select-content"),zo(11,kGe,2,1,null,null,Ss,!1,bGe,3,3,"hlm-option",5),re()()(),J(14,"label",6),de(15),Te(16,"translate"),J(17,"brn-select",7),Te(18,"translate"),Ai("ngModelChange",function(o){Ge(e);let i=be();return ts(i.target,o)||(i.target=o),We(o)}),J(19,"hlm-select-trigger",4),Le(20,"hlm-select-value"),re(),J(21,"hlm-select-content"),zo(22,CGe,2,2,"hlm-option",8,Ss),re()()(),J(24,"button",9),je("click",function(){Ge(e);let o=be();return We(o.execute())}),de(25),Te(26,"translate"),re()()}if(t&2){let e=be();Ct(e.node().traffic.length>0?0:1),ee(4),et(" ",Ee(5,11,"COMMAND")," "),ee(2),Ni("ngModel",e.command),Be("placeholder",Ee(7,13,"SELECT_COMMAND")),ee(5),Ho(e.commands),ee(4),et(" ",Ee(16,15,e.multipleTargets()?"TARGETS":"TARGET")," "),ee(2),Ni("ngModel",e.target),Be("placeholder",Ee(18,17,e.multipleTargets()?"TARGETS_IP":"TARGET_IP"))("multiple",e.multipleTargets()),ee(5),Ho(e.connectedNodes),ee(2),Be("disabled",!(e.command()&&e.target())),ee(),et(" ",Ee(26,19,"LAUNCH_COMMAND")," ")}}function MGe(t,n){t&1&&(Le(0,"ng-icon",26),J(1,"p",27),de(2),Te(3,"translate"),re()),t&2&&(ee(2),et(" ",Ee(3,1,"NO_CONNECTED_DEVICES")," "))}function TGe(t,n){if(t&1){let e=bn();Le(0,"ng-icon",28),J(1,"p",27),de(2),Te(3,"translate"),re(),J(4,"button",29),je("click",function(){Ge(e);let o=be(2);return We(o.connect())}),de(5),Te(6,"translate"),re()}if(t&2){let e=be(2);ee(2),et(" ",Ee(3,3,"NO_ROUTER")," "),ee(2),Be("disabled",!e.canConnect),ee(),et(" ",Ee(6,5,"CONNECT")," ")}}function DGe(t,n){if(t&1&&lt(0,MGe,4,3)(1,TGe,7,7),t&2){let e=be();Ct(e.NodeType.RouterTypes.includes(e.node().type)?0:1)}}var VN=class t{dialog=I(Mf);network=I(Oo);node=Y.required();NodeType=qn;displayedColumns=ae(()=>["icon","source","destination","size","data"]);command=ii(null);target=ii(null);multipleTargets=ae(()=>this.command()?.multiple??!1);get canConnect(){return this.network.router!==void 0}get commands(){let n=this.node().generator.internalCommands,e=this.node().generator.externalCommands;return n.length>0&&e.length>0?[...n,"---",...e]:[...n,...e]}get connectedNodes(){return this.network.getConnectedNodes(this.node().mac)}constructor(){Gt(()=>{this.multipleTargets()?this.target.update(n=>n&&!Array.isArray(n)?[n]:n):this.target.update(n=>n&&Array.isArray(n)?n[0]:n)})}connect(){this.node().connect(this.network.router)}viewPacket(n){this.dialog.open(EN,{context:{packet:n}})}execute(){switch(this.command().id){case"ping":this.node().generator.ping(this.target());break;case"threeWayHandshake":this.node().generator.threeWayHandshake(this.target(),80,80);break;default:this.node().generator.execute(this.command().id,...Array.isArray(this.target())?this.target():[this.target()]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Oe({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4"],inputs:{node:[1,"node"],command:[1,"command"],target:[1,"target"]},outputs:{command:"commandChange",target:"targetChange"},features:[ht([ir({lucideForward:Aue,lucideHourglass:Rue,lucideUnplug:y3,lucideRepeat:Fue,lucideReply:Pue,lucideTrafficCone:Vue})])],decls:2,vars:1,consts:[["hlm","","stickyHeader","",1,"block","max-h-[280px]","overflow-auto","rounded-md","border","border-border",3,"dataSource","displayedColumns","onRowClick"],[1,"flex","w-[584px]","flex-row","items-center","justify-end","gap-2"],["hlmLabel","",1,"w-40"],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder"],[1,"w-full"],["disabled","",1,"px-2"],["hlmLabel","",1,"grow"],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","multiple"],[3,"value"],["hlmBtn","",1,"self-end",3,"click","disabled"],["name","icon",1,"w-12"],[4,"brnHeaderDef"],[4,"brnCellDef"],["name","source",1,"w-28"],["name","destination",1,"w-28"],["name","size",1,"w-[86px]"],["class","justify-center",4,"brnCellDef"],["name","data",1,"w-56"],["truncate","",4,"brnCellDef"],["name","lucideReply","size","1rem",1,"text-red-600","dark:text-red-400"],["name","lucideForward","size","1rem",1,"text-green-600","dark:text-green-400"],["name","lucideRepeat","size","1rem",1,"text-yellow-600","dark:text-yellow-400"],[1,"justify-center"],["truncate",""],["name","lucideTrafficCone","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"mb-4","w-96","self-center","text-center","text-sm","text-muted-foreground"],["name","lucideHourglass","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"w-96","self-center","text-center","text-sm","text-muted-foreground"],["name","lucideUnplug","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],["hlmBtn","",3,"click","disabled"]],template:function(e,r){e&1&&lt(0,SGe,27,21)(1,DGe,2,1),e&2&&Ct(r.node().connected?0:1)},dependencies:[_r,zu,ju,Jl,ro,Co,Nf,ua,Us,Uu,Che,zV,Hf,HV,UV,Ja,Qa,Pw,Of,Ya,el,Zi,gs,Ws,Gs,da,PN,Jw,ty,ey,$N,sr],encapsulation:2})};function EGe(t,n){t&1&&(J(0,"button",8),Le(1,"ng-icon",11),de(2),Te(3,"translate"),re()),t&2&&(ee(2),et(" ",Ee(3,1,"PHANTOM_ATTACKER")," "))}var jN=class t{constructor(n){this.cdr=n}node=Y.required();NodeType=qn;_loaded=!1;ngAfterViewInit(){this._loaded=!0,this.cdr.detectChanges()}getAnimationData(n){return n&&!n.isActivated||!this._loaded?"_":n.activatedRoute.snapshot.url[0]?.path??"_"}static \u0275fac=function(e){return new(e||t)(Ut(Lr))};static \u0275cmp=Oe({type:t,selectors:[["app-panel-node"]],hostAttrs:[1,"fixed","right-5","top-1/2","flex","flex-col","max-h-[calc(100%-2.5rem)]","min-w-[512px]","max-w-[calc(100%-2.5rem)]","-translate-y-1/2","rounded-xl","overflow-hidden"],inputs:{node:[1,"node"]},features:[ht([ir({lucideGhost:yw,lucideX:x3})]),qt([k2])],decls:18,vars:10,consts:[["outlet","outlet"],["routerLink","/","hlmDialogClose",""],["name","lucideX","size","1rem"],["hlmCardHeader",""],["hlmCardTitle",""],["hlmCardDescription",""],[1,"mx-6","mb-4","inline-flex","h-10","items-center","justify-center","space-x-1","rounded-md","bg-muted","p-1","text-muted-foreground"],["routerLink","network-traffic","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["routerLink","attack","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","gap-1","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["routerLink","configuration","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["hlmCardContent","",1,"overflow-scroll"],["name","lucideGhost","size","1rem"]],template:function(e,r){if(e&1&&(J(0,"button",1),Le(1,"ng-icon",2),re(),J(2,"div",3)(3,"h3",4),de(4),re(),J(5,"p",5),de(6),re()(),J(7,"div",6)(8,"button",7),de(9),Te(10,"translate"),re(),lt(11,EGe,4,3,"button",8),J(12,"button",9),de(13),Te(14,"translate"),re()(),J(15,"div",10),Le(16,"router-outlet",null,0),re()),e&2){let o=yr(17);ee(4),ct(r.node().name),ee(2),ct(r.node().ip),ee(3),et(" ",Ee(10,6,"NETWORK_TRAFFIC")," "),ee(2),Ct(r.NodeType.AttackerTypes.includes(r.node().type)?11:-1),ee(2),et(" ",Ee(14,8,"CONFIGURATION")," "),ee(2),Be("@fadeAnimation",r.getAnimationData(o))}},dependencies:[_r,Ix,Hm,R1,rF,ro,Co,Ja,Qw,Gb,Wb,Ub,Hb,c2,sr],encapsulation:2,data:{animation:[fhe]}})};var Zb=(t,n)=>{let e=I(Oo),r=t.params.mac;return r||(r=t.parent.params.mac),e.getNode(r)};var Nhe=[{path:"",title:"IoT Simulator",component:SN},{path:":mac",canActivate:[ghe],resolve:{node:Zb},title:"Dispositivo",component:jN,children:[{path:"network-traffic",resolve:{node:Zb},title:"Tr\xE1fico de red",component:VN},{path:"attack",canActivate:[mhe],resolve:{node:Zb},title:"Phantom Attacker",component:TN},{path:"configuration",resolve:{node:Zb},title:"Configuraci\xF3n",component:DN}]},{path:"**",redirectTo:""}];Im(yG,"de");Im(xG,"en");Im(_G,"es");Im(kG,"fr");Im(bG,"it");Im(CG,"pt");var IGe={providers:[AU({eventCoalescing:!0}),oF(Nhe,sF(),pM()),q5(),NW(),VR(ro.forRoot({loader:{provide:Mh,useFactory:t=>new Fq(t,"./assets/i18n/",".json"),deps:[m1]}})),{provide:Fr,useFactory:()=>Fr.init()},{provide:vl,useFactory:t=>vl.init(t),deps:[Gn]},{provide:Xl,useFactory:t=>Xl.init(t),deps:[Gn]}]};eO(MN,IGe).catch(t=>console.error(t));
