var sfe=Object.create;var cy=Object.defineProperty,afe=Object.defineProperties,u9=Object.getOwnPropertyDescriptor,lfe=Object.getOwnPropertyDescriptors,cfe=Object.getOwnPropertyNames,rC=Object.getOwnPropertySymbols,ufe=Object.getPrototypeOf,tA=Object.prototype.hasOwnProperty,d9=Object.prototype.propertyIsEnumerable;var c9=(t,n,e)=>n in t?cy(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,le=(t,n)=>{for(var e in n||={})tA.call(n,e)&&c9(t,e,n[e]);if(rC)for(var e of rC(n))d9.call(n,e)&&c9(t,e,n[e]);return t},ht=(t,n)=>afe(t,lfe(n));var uy=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,e)=>(typeof require<"u"?require:n)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var qf=(t,n)=>{var e={};for(var r in t)tA.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&rC)for(var r of rC(t))n.indexOf(r)<0&&d9.call(t,r)&&(e[r]=t[r]);return e};var Lo=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Jt=(t,n)=>{for(var e in n)cy(t,e,{get:n[e],enumerable:!0})},dfe=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of cfe(n))!tA.call(t,o)&&o!==e&&cy(t,o,{get:()=>n[o],enumerable:!(r=u9(n,o))||r.enumerable});return t};var I2=(t,n,e)=>(e=t!=null?sfe(ufe(t)):{},dfe(n||!t||!t.__esModule?cy(e,"default",{value:t,enumerable:!0}):e,t));var _s=(t,n,e,r)=>{for(var o=r>1?void 0:r?u9(n,e):n,i=t.length-1,s;i>=0;i--)(s=t[i])&&(o=(r?s(n,e,o):s(o))||o);return r&&o&&cy(n,e,o),o};var z=(t,n,e)=>new Promise((r,o)=>{var i=l=>{try{a(e.next(l))}catch(c){o(c)}},s=l=>{try{a(e.throw(l))}catch(c){o(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);a((e=e.apply(t,n)).next())});var vK=Lo((_it,gK)=>{"use strict";gK.exports=Sr;var Ma=null;try{Ma=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Sr(t,n,e){this.low=t|0,this.high=n|0,this.unsigned=!!e}Sr.prototype.__isLong__;Object.defineProperty(Sr.prototype,"__isLong__",{value:!0});function Bs(t){return(t&&t.__isLong__)===!0}Sr.isLong=Bs;var aK={},lK={};function o0(t,n){var e,r,o;return n?(t>>>=0,(o=0<=t&&t<256)&&(r=lK[t],r)?r:(e=Mr(t,(t|0)<0?-1:0,!0),o&&(lK[t]=e),e)):(t|=0,(o=-128<=t&&t<128)&&(r=aK[t],r)?r:(e=Mr(t,t<0?-1:0,!1),o&&(aK[t]=e),e))}Sr.fromInt=o0;function Ta(t,n){if(isNaN(t))return n?r0:Da;if(n){if(t<0)return r0;if(t>=pK)return mK}else{if(t<=-uK)return Ps;if(t+1>=uK)return fK}return t<0?Ta(-t,n).neg():Mr(t%ev|0,t/ev|0,n)}Sr.fromNumber=Ta;function Mr(t,n,e){return new Sr(t,n,e)}Sr.fromBits=Mr;var DM=Math.pow;function HF(t,n,e){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Da;if(typeof n=="number"?(e=n,n=!1):n=!!n,e=e||10,e<2||36<e)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return HF(t.substring(1),n,e).neg();for(var o=Ta(DM(e,8)),i=Da,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),e);if(a<8){var c=Ta(DM(e,a));i=i.mul(c).add(Ta(l))}else i=i.mul(o),i=i.add(Ta(l))}return i.unsigned=n,i}Sr.fromString=HF;function Cl(t,n){return typeof t=="number"?Ta(t,n):typeof t=="string"?HF(t,n):Mr(t.low,t.high,typeof n=="boolean"?n:t.unsigned)}Sr.fromValue=Cl;var cK=65536,Jke=1<<24,ev=cK*cK,pK=ev*ev,uK=pK/2,dK=o0(Jke),Da=o0(0);Sr.ZERO=Da;var r0=o0(0,!0);Sr.UZERO=r0;var J1=o0(1);Sr.ONE=J1;var hK=o0(1,!0);Sr.UONE=hK;var zF=o0(-1);Sr.NEG_ONE=zF;var fK=Mr(-1,2147483647,!1);Sr.MAX_VALUE=fK;var mK=Mr(-1,-1,!0);Sr.MAX_UNSIGNED_VALUE=mK;var Ps=Mr(0,-2147483648,!1);Sr.MIN_VALUE=Ps;var rt=Sr.prototype;rt.toInt=function(){return this.unsigned?this.low>>>0:this.low};rt.toNumber=function(){return this.unsigned?(this.high>>>0)*ev+(this.low>>>0):this.high*ev+(this.low>>>0)};rt.toString=function(n){if(n=n||10,n<2||36<n)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ps)){var e=Ta(n),r=this.div(e),o=r.mul(e).sub(this);return r.toString(n)+o.toInt().toString(n)}else return"-"+this.neg().toString(n);for(var i=Ta(DM(n,6),this.unsigned),s=this,a="";;){var l=s.div(i),c=s.sub(l.mul(i)).toInt()>>>0,u=c.toString(n);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};rt.getHighBits=function(){return this.high};rt.getHighBitsUnsigned=function(){return this.high>>>0};rt.getLowBits=function(){return this.low};rt.getLowBitsUnsigned=function(){return this.low>>>0};rt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ps)?64:this.neg().getNumBitsAbs();for(var n=this.high!=0?this.high:this.low,e=31;e>0&&(n&1<<e)==0;e--);return this.high!=0?e+33:e+1};rt.isZero=function(){return this.high===0&&this.low===0};rt.eqz=rt.isZero;rt.isNegative=function(){return!this.unsigned&&this.high<0};rt.isPositive=function(){return this.unsigned||this.high>=0};rt.isOdd=function(){return(this.low&1)===1};rt.isEven=function(){return(this.low&1)===0};rt.equals=function(n){return Bs(n)||(n=Cl(n)),this.unsigned!==n.unsigned&&this.high>>>31===1&&n.high>>>31===1?!1:this.high===n.high&&this.low===n.low};rt.eq=rt.equals;rt.notEquals=function(n){return!this.eq(n)};rt.neq=rt.notEquals;rt.ne=rt.notEquals;rt.lessThan=function(n){return this.comp(n)<0};rt.lt=rt.lessThan;rt.lessThanOrEqual=function(n){return this.comp(n)<=0};rt.lte=rt.lessThanOrEqual;rt.le=rt.lessThanOrEqual;rt.greaterThan=function(n){return this.comp(n)>0};rt.gt=rt.greaterThan;rt.greaterThanOrEqual=function(n){return this.comp(n)>=0};rt.gte=rt.greaterThanOrEqual;rt.ge=rt.greaterThanOrEqual;rt.compare=function(n){if(Bs(n)||(n=Cl(n)),this.eq(n))return 0;var e=this.isNegative(),r=n.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?n.high>>>0>this.high>>>0||n.high===this.high&&n.low>>>0>this.low>>>0?-1:1:this.sub(n).isNegative()?-1:1};rt.comp=rt.compare;rt.negate=function(){return!this.unsigned&&this.eq(Ps)?Ps:this.not().add(J1)};rt.neg=rt.negate;rt.add=function(n){Bs(n)||(n=Cl(n));var e=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=n.high>>>16,a=n.high&65535,l=n.low>>>16,c=n.low&65535,u=0,d=0,p=0,h=0;return h+=i+c,p+=h>>>16,h&=65535,p+=o+l,d+=p>>>16,p&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=e+s,u&=65535,Mr(p<<16|h,u<<16|d,this.unsigned)};rt.subtract=function(n){return Bs(n)||(n=Cl(n)),this.add(n.neg())};rt.sub=rt.subtract;rt.multiply=function(n){if(this.isZero())return Da;if(Bs(n)||(n=Cl(n)),Ma){var e=Ma.mul(this.low,this.high,n.low,n.high);return Mr(e,Ma.get_high(),this.unsigned)}if(n.isZero())return Da;if(this.eq(Ps))return n.isOdd()?Ps:Da;if(n.eq(Ps))return this.isOdd()?Ps:Da;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(dK)&&n.lt(dK))return Ta(this.toNumber()*n.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=n.high>>>16,l=n.high&65535,c=n.low>>>16,u=n.low&65535,d=0,p=0,h=0,f=0;return f+=s*u,h+=f>>>16,f&=65535,h+=i*u,p+=h>>>16,h&=65535,h+=s*c,p+=h>>>16,h&=65535,p+=o*u,d+=p>>>16,p&=65535,p+=i*c,d+=p>>>16,p&=65535,p+=s*l,d+=p>>>16,p&=65535,d+=r*u+o*c+i*l+s*a,d&=65535,Mr(h<<16|f,d<<16|p,this.unsigned)};rt.mul=rt.multiply;rt.divide=function(n){if(Bs(n)||(n=Cl(n)),n.isZero())throw Error("division by zero");if(Ma){if(!this.unsigned&&this.high===-2147483648&&n.low===-1&&n.high===-1)return this;var e=(this.unsigned?Ma.div_u:Ma.div_s)(this.low,this.high,n.low,n.high);return Mr(e,Ma.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?r0:Da;var r,o,i;if(this.unsigned){if(n.unsigned||(n=n.toUnsigned()),n.gt(this))return r0;if(n.gt(this.shru(1)))return hK;i=r0}else{if(this.eq(Ps)){if(n.eq(J1)||n.eq(zF))return Ps;if(n.eq(Ps))return J1;var s=this.shr(1);return r=s.div(n).shl(1),r.eq(Da)?n.isNegative()?J1:zF:(o=this.sub(n.mul(r)),i=r.add(o.div(n)),i)}else if(n.eq(Ps))return this.unsigned?r0:Da;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();i=Da}for(o=this;o.gte(n);){r=Math.max(1,Math.floor(o.toNumber()/n.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:DM(2,a-48),c=Ta(r),u=c.mul(n);u.isNegative()||u.gt(o);)r-=l,c=Ta(r,this.unsigned),u=c.mul(n);c.isZero()&&(c=J1),i=i.add(c),o=o.sub(u)}return i};rt.div=rt.divide;rt.modulo=function(n){if(Bs(n)||(n=Cl(n)),Ma){var e=(this.unsigned?Ma.rem_u:Ma.rem_s)(this.low,this.high,n.low,n.high);return Mr(e,Ma.get_high(),this.unsigned)}return this.sub(this.div(n).mul(n))};rt.mod=rt.modulo;rt.rem=rt.modulo;rt.not=function(){return Mr(~this.low,~this.high,this.unsigned)};rt.and=function(n){return Bs(n)||(n=Cl(n)),Mr(this.low&n.low,this.high&n.high,this.unsigned)};rt.or=function(n){return Bs(n)||(n=Cl(n)),Mr(this.low|n.low,this.high|n.high,this.unsigned)};rt.xor=function(n){return Bs(n)||(n=Cl(n)),Mr(this.low^n.low,this.high^n.high,this.unsigned)};rt.shiftLeft=function(n){return Bs(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?Mr(this.low<<n,this.high<<n|this.low>>>32-n,this.unsigned):Mr(0,this.low<<n-32,this.unsigned)};rt.shl=rt.shiftLeft;rt.shiftRight=function(n){return Bs(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?Mr(this.low>>>n|this.high<<32-n,this.high>>n,this.unsigned):Mr(this.high>>n-32,this.high>=0?0:-1,this.unsigned)};rt.shr=rt.shiftRight;rt.shiftRightUnsigned=function(n){if(Bs(n)&&(n=n.toInt()),n&=63,n===0)return this;var e=this.high;if(n<32){var r=this.low;return Mr(r>>>n|e<<32-n,e>>>n,this.unsigned)}else return n===32?Mr(e,0,this.unsigned):Mr(e>>>n-32,0,this.unsigned)};rt.shru=rt.shiftRightUnsigned;rt.shr_u=rt.shiftRightUnsigned;rt.toSigned=function(){return this.unsigned?Mr(this.low,this.high,!1):this};rt.toUnsigned=function(){return this.unsigned?this:Mr(this.low,this.high,!0)};rt.toBytes=function(n){return n?this.toBytesLE():this.toBytesBE()};rt.toBytesLE=function(){var n=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,n&255,n>>>8&255,n>>>16&255,n>>>24]};rt.toBytesBE=function(){var n=this.high,e=this.low;return[n>>>24,n>>>16&255,n>>>8&255,n&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Sr.fromBytes=function(n,e,r){return r?Sr.fromBytesLE(n,e):Sr.fromBytesBE(n,e)};Sr.fromBytesLE=function(n,e){return new Sr(n[0]|n[1]<<8|n[2]<<16|n[3]<<24,n[4]|n[5]<<8|n[6]<<16|n[7]<<24,e)};Sr.fromBytesBE=function(n,e){return new Sr(n[4]<<24|n[5]<<16|n[6]<<8|n[7],n[0]<<24|n[1]<<16|n[2]<<8|n[3],e)}});var aZ=Lo((lv,sZ)=>{"use strict";var Zbe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},d0=Zbe();sZ.exports=lv=d0.fetch;d0.fetch&&(lv.default=d0.fetch.bind(d0));lv.Headers=d0.Headers;lv.Request=d0.Request;lv.Response=d0.Response});var lZ=Lo(()=>{"use strict"});var xZ=Lo((yZ,L6)=>{"use strict";(function(t,n,e){function r(a){var l=this,c=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function i(a,l){var c=new r(a),u=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}function s(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.alea=i})(yZ,typeof L6=="object"&&L6,typeof define=="function"&&define)});var kZ=Lo((_Z,$6)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xor128=i})(_Z,typeof $6=="object"&&$6,typeof define=="function"&&define)});var CZ=Lo((bZ,V6)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xorwow=i})(bZ,typeof V6=="object"&&V6,typeof define=="function"&&define)});var MZ=Lo((SZ,j6)=>{"use strict";(function(t,n,e){function r(s){var a=this;a.next=function(){var c=a.x,u=a.i,d,p,h;return d=c[u],d^=d>>>7,p=d^d<<24,d=c[u+1&7],p^=d^d>>>10,d=c[u+3&7],p^=d^d>>>3,d=c[u+4&7],p^=d^d<<7,d=c[u+7&7],d=d^d<<13,p^=d^d<<9,c[u]=p,a.i=u+1&7,p};function l(c,u){var d,p,h=[];if(u===(u|0))p=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?p=h[7]=-1:p=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.x&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xorshift7=i})(SZ,typeof j6=="object"&&j6,typeof define=="function"&&define)});var DZ=Lo((TZ,z6)=>{"use strict";(function(t,n,e){function r(s){var a=this;a.next=function(){var c=a.w,u=a.X,d=a.i,p,h;return a.w=c=c+1640531527|0,h=u[d+34&127],p=u[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=u[d]=h^p,a.i=d,h+(c^c>>>16)|0};function l(c,u){var d,p,h,f,m,g=[],v=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,v=Math.max(v,u.length)),h=0,f=-32;f<v;++f)u&&(p^=u.charCodeAt((f+32)%u.length)),f===0&&(m=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,f>=0&&(m=m+1640531527|0,d=g[f&127]^=p+m,h=d==0?h+1:0);for(h>=128&&(g[(u&&u.length||0)&127]=-1),h=127,f=4*128;f>0;--f)p=g[h+34&127],d=g[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,g[h]=p^d;c.w=m,c.X=g,c.i=h}l(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.X&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xor4096=i})(TZ,typeof z6=="object"&&z6,typeof define=="function"&&define)});var IZ=Lo((EZ,H6)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.next=function(){var u=a.b,d=a.c,p=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-p|0,a.d=p<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.tychei=i})(EZ,typeof H6=="object"&&H6,typeof define=="function"&&define)});var NZ=Lo(()=>{"use strict"});var RZ=Lo((AZ,GM)=>{"use strict";(function(t,n,e){var r=256,o=6,i=52,s="random",a=e.pow(r,o),l=e.pow(2,i),c=l*2,u=r-1,d;function p(y,_,k){var T=[];_=_==!0?{entropy:!0}:_||{};var I=g(m(_.entropy?[y,w(n)]:y??v(),3),T),A=new h(T),P=function(){for(var N=A.g(o),B=a,S=0;N<l;)N=(N+S)*r,B*=r,S=A.g(1);for(;N>=c;)N/=2,B/=2,S>>>=1;return(N+S)/B};return P.int32=function(){return A.g(4)|0},P.quick=function(){return A.g(4)/4294967296},P.double=P,g(w(A.S),n),(_.pass||k||function(N,B,S,W){return W&&(W.S&&f(W,A),N.state=function(){return f(A,{})}),S?(e[s]=N,B):N})(P,I,"global"in _?_.global:this==e,_.state)}function h(y){var _,k=y.length,T=this,I=0,A=T.i=T.j=0,P=T.S=[];for(k||(y=[k++]);I<r;)P[I]=I++;for(I=0;I<r;I++)P[I]=P[A=u&A+y[I%k]+(_=P[I])],P[A]=_;(T.g=function(N){for(var B,S=0,W=T.i,ie=T.j,Q=T.S;N--;)B=Q[W=u&W+1],S=S*r+Q[u&(Q[W]=Q[ie=u&ie+B])+(Q[ie]=B)];return T.i=W,T.j=ie,S})(r)}function f(y,_){return _.i=y.i,_.j=y.j,_.S=y.S.slice(),_}function m(y,_){var k=[],T=typeof y,I;if(_&&T=="object")for(I in y)try{k.push(m(y[I],_-1))}catch{}return k.length?k:T=="string"?y:y+"\0"}function g(y,_){for(var k=y+"",T,I=0;I<k.length;)_[u&I]=u&(T^=_[u&I]*19)+k.charCodeAt(I++);return w(_)}function v(){try{var y;return d&&(y=d.randomBytes)?y=y(r):(y=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(y)),w(y)}catch{var _=t.navigator,k=_&&_.plugins;return[+new Date,t,k,t.screen,w(n)]}}function w(y){return String.fromCharCode.apply(0,y)}if(g(e.random(),n),typeof GM=="object"&&GM.exports){GM.exports=p;try{d=NZ()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):e["seed"+s]=p})(typeof self<"u"?self:AZ,[],Math)});var j_=Lo((lyt,OZ)=>{"use strict";var OSe=xZ(),FSe=kZ(),PSe=CZ(),BSe=MZ(),LSe=DZ(),$Se=IZ(),k0=RZ();k0.alea=OSe;k0.xor128=FSe;k0.xorwow=PSe;k0.xorshift7=BSe;k0.xor4096=LSe;k0.tychei=$Se;OZ.exports=k0});var rte=Lo(RD=>{"use strict";RD.byteLength=mRe;RD.toByteArray=vRe;RD.fromByteArray=xRe;var Fu=[],Ha=[],fRe=typeof Uint8Array<"u"?Uint8Array:Array,WB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(K0=0,tte=WB.length;K0<tte;++K0)Fu[K0]=WB[K0],Ha[WB.charCodeAt(K0)]=K0;var K0,tte;Ha[45]=62;Ha[95]=63;function nte(t){var n=t.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");e===-1&&(e=n);var r=e===n?0:4-e%4;return[e,r]}function mRe(t){var n=nte(t),e=n[0],r=n[1];return(e+r)*3/4-r}function gRe(t,n,e){return(n+e)*3/4-e}function vRe(t){var n,e=nte(t),r=e[0],o=e[1],i=new fRe(gRe(t,r,o)),s=0,a=o>0?r-4:r,l;for(l=0;l<a;l+=4)n=Ha[t.charCodeAt(l)]<<18|Ha[t.charCodeAt(l+1)]<<12|Ha[t.charCodeAt(l+2)]<<6|Ha[t.charCodeAt(l+3)],i[s++]=n>>16&255,i[s++]=n>>8&255,i[s++]=n&255;return o===2&&(n=Ha[t.charCodeAt(l)]<<2|Ha[t.charCodeAt(l+1)]>>4,i[s++]=n&255),o===1&&(n=Ha[t.charCodeAt(l)]<<10|Ha[t.charCodeAt(l+1)]<<4|Ha[t.charCodeAt(l+2)]>>2,i[s++]=n>>8&255,i[s++]=n&255),i}function wRe(t){return Fu[t>>18&63]+Fu[t>>12&63]+Fu[t>>6&63]+Fu[t&63]}function yRe(t,n,e){for(var r,o=[],i=n;i<e;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(wRe(r));return o.join("")}function xRe(t){for(var n,e=t.length,r=e%3,o=[],i=16383,s=0,a=e-r;s<a;s+=i)o.push(yRe(t,s,s+i>a?a:s+i));return r===1?(n=t[e-1],o.push(Fu[n>>2]+Fu[n<<4&63]+"==")):r===2&&(n=(t[e-2]<<8)+t[e-1],o.push(Fu[n>>10]+Fu[n>>4&63]+Fu[n<<2&63]+"=")),o.join("")}});var ote=Lo(qB=>{"use strict";qB.read=function(t,n,e,r,o){var i,s,a=o*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=e?o-1:0,p=e?-1:1,h=t[n+d];for(d+=p,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=i*256+t[n+d],d+=p,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=s*256+t[n+d],d+=p,u-=8);if(i===0)i=1-c;else{if(i===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-c}return(h?-1:1)*s*Math.pow(2,i-r)};qB.write=function(t,n,e,r,o,i){var s,a,l,c=i*8-o-1,u=(1<<c)-1,d=u>>1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,m=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(a=isNaN(n)?1:0,s=u):(s=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?n+=p/l:n+=p*Math.pow(2,1-d),n*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(n*l-1)*Math.pow(2,o),s=s+d):(a=n*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;t[e+h]=a&255,h+=f,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[e+h]=s&255,h+=f,s/=256,c-=8);t[e+h-f]|=m*128}});var vte=Lo($v=>{"use strict";var KB=rte(),Lv=ote(),ite=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;$v.Buffer=Ee;$v.SlowBuffer=MRe;$v.INSPECT_MAX_BYTES=50;var OD=2147483647;$v.kMaxLength=OD;Ee.TYPED_ARRAY_SUPPORT=_Re();!Ee.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _Re(){try{var t=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(t,n),t.foo()===42}catch{return!1}}Object.defineProperty(Ee.prototype,"parent",{enumerable:!0,get:function(){if(Ee.isBuffer(this))return this.buffer}});Object.defineProperty(Ee.prototype,"offset",{enumerable:!0,get:function(){if(Ee.isBuffer(this))return this.byteOffset}});function zp(t){if(t>OD)throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=new Uint8Array(t);return Object.setPrototypeOf(n,Ee.prototype),n}function Ee(t,n,e){if(typeof t=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return QB(t)}return lte(t,n,e)}Ee.poolSize=8192;function lte(t,n,e){if(typeof t=="string")return bRe(t,n);if(ArrayBuffer.isView(t))return CRe(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Pu(t,ArrayBuffer)||t&&Pu(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pu(t,SharedArrayBuffer)||t&&Pu(t.buffer,SharedArrayBuffer)))return XB(t,n,e);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(r!=null&&r!==t)return Ee.from(r,n,e);var o=SRe(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return Ee.from(t[Symbol.toPrimitive]("string"),n,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}Ee.from=function(t,n,e){return lte(t,n,e)};Object.setPrototypeOf(Ee.prototype,Uint8Array.prototype);Object.setPrototypeOf(Ee,Uint8Array);function cte(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function kRe(t,n,e){return cte(t),t<=0?zp(t):n!==void 0?typeof e=="string"?zp(t).fill(n,e):zp(t).fill(n):zp(t)}Ee.alloc=function(t,n,e){return kRe(t,n,e)};function QB(t){return cte(t),zp(t<0?0:JB(t)|0)}Ee.allocUnsafe=function(t){return QB(t)};Ee.allocUnsafeSlow=function(t){return QB(t)};function bRe(t,n){if((typeof n!="string"||n==="")&&(n="utf8"),!Ee.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var e=ute(t,n)|0,r=zp(e),o=r.write(t,n);return o!==e&&(r=r.slice(0,o)),r}function ZB(t){for(var n=t.length<0?0:JB(t.length)|0,e=zp(n),r=0;r<n;r+=1)e[r]=t[r]&255;return e}function CRe(t){if(Pu(t,Uint8Array)){var n=new Uint8Array(t);return XB(n.buffer,n.byteOffset,n.byteLength)}return ZB(t)}function XB(t,n,e){if(n<0||t.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<n+(e||0))throw new RangeError('"length" is outside of buffer bounds');var r;return n===void 0&&e===void 0?r=new Uint8Array(t):e===void 0?r=new Uint8Array(t,n):r=new Uint8Array(t,n,e),Object.setPrototypeOf(r,Ee.prototype),r}function SRe(t){if(Ee.isBuffer(t)){var n=JB(t.length)|0,e=zp(n);return e.length===0||t.copy(e,0,0,n),e}if(t.length!==void 0)return typeof t.length!="number"||eL(t.length)?zp(0):ZB(t);if(t.type==="Buffer"&&Array.isArray(t.data))return ZB(t.data)}function JB(t){if(t>=OD)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+OD.toString(16)+" bytes");return t|0}function MRe(t){return+t!=t&&(t=0),Ee.alloc(+t)}Ee.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==Ee.prototype};Ee.compare=function(n,e){if(Pu(n,Uint8Array)&&(n=Ee.from(n,n.offset,n.byteLength)),Pu(e,Uint8Array)&&(e=Ee.from(e,e.offset,e.byteLength)),!Ee.isBuffer(n)||!Ee.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===e)return 0;for(var r=n.length,o=e.length,i=0,s=Math.min(r,o);i<s;++i)if(n[i]!==e[i]){r=n[i],o=e[i];break}return r<o?-1:o<r?1:0};Ee.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Ee.concat=function(n,e){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return Ee.alloc(0);var r;if(e===void 0)for(e=0,r=0;r<n.length;++r)e+=n[r].length;var o=Ee.allocUnsafe(e),i=0;for(r=0;r<n.length;++r){var s=n[r];if(Pu(s,Uint8Array))i+s.length>o.length?Ee.from(s).copy(o,i):Uint8Array.prototype.set.call(o,s,i);else if(Ee.isBuffer(s))s.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=s.length}return o};function ute(t,n){if(Ee.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Pu(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var e=t.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&e===0)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return YB(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return gte(t).length;default:if(o)return r?-1:YB(t).length;n=(""+n).toLowerCase(),o=!0}}Ee.byteLength=ute;function TRe(t,n,e){var r=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,n>>>=0,e<=n))return"";for(t||(t="utf8");;)switch(t){case"hex":return BRe(this,n,e);case"utf8":case"utf-8":return pte(this,n,e);case"ascii":return FRe(this,n,e);case"latin1":case"binary":return PRe(this,n,e);case"base64":return RRe(this,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return LRe(this,n,e);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}Ee.prototype._isBuffer=!0;function Z0(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}Ee.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<n;e+=2)Z0(this,e,e+1);return this};Ee.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<n;e+=4)Z0(this,e,e+3),Z0(this,e+1,e+2);return this};Ee.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<n;e+=8)Z0(this,e,e+7),Z0(this,e+1,e+6),Z0(this,e+2,e+5),Z0(this,e+3,e+4);return this};Ee.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?pte(this,0,n):TRe.apply(this,arguments)};Ee.prototype.toLocaleString=Ee.prototype.toString;Ee.prototype.equals=function(n){if(!Ee.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:Ee.compare(this,n)===0};Ee.prototype.inspect=function(){var n="",e=$v.INSPECT_MAX_BYTES;return n=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(n+=" ... "),"<Buffer "+n+">"};ite&&(Ee.prototype[ite]=Ee.prototype.inspect);Ee.prototype.compare=function(n,e,r,o,i){if(Pu(n,Uint8Array)&&(n=Ee.from(n,n.offset,n.byteLength)),!Ee.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(e===void 0&&(e=0),r===void 0&&(r=n?n.length:0),o===void 0&&(o=0),i===void 0&&(i=this.length),e<0||r>n.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&e>=r)return 0;if(o>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,o>>>=0,i>>>=0,this===n)return 0;for(var s=i-o,a=r-e,l=Math.min(s,a),c=this.slice(o,i),u=n.slice(e,r),d=0;d<l;++d)if(c[d]!==u[d]){s=c[d],a=u[d];break}return s<a?-1:a<s?1:0};function dte(t,n,e,r,o){if(t.length===0)return-1;if(typeof e=="string"?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,eL(e)&&(e=o?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(o)return-1;e=t.length-1}else if(e<0)if(o)e=0;else return-1;if(typeof n=="string"&&(n=Ee.from(n,r)),Ee.isBuffer(n))return n.length===0?-1:ste(t,n,e,r,o);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,n,e):Uint8Array.prototype.lastIndexOf.call(t,n,e):ste(t,[n],e,r,o);throw new TypeError("val must be string, number or Buffer")}function ste(t,n,e,r,o){var i=1,s=t.length,a=n.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||n.length<2)return-1;i=2,s/=2,a/=2,e/=2}function l(h,f){return i===1?h[f]:h.readUInt16BE(f*i)}var c;if(o){var u=-1;for(c=e;c<s;c++)if(l(t,c)===l(n,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===a)return u*i}else u!==-1&&(c-=c-u),u=-1}else for(e+a>s&&(e=s-a),c=e;c>=0;c--){for(var d=!0,p=0;p<a;p++)if(l(t,c+p)!==l(n,p)){d=!1;break}if(d)return c}return-1}Ee.prototype.includes=function(n,e,r){return this.indexOf(n,e,r)!==-1};Ee.prototype.indexOf=function(n,e,r){return dte(this,n,e,r,!0)};Ee.prototype.lastIndexOf=function(n,e,r){return dte(this,n,e,r,!1)};function DRe(t,n,e,r){e=Number(e)||0;var o=t.length-e;r?(r=Number(r),r>o&&(r=o)):r=o;var i=n.length;r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(n.substr(s*2,2),16);if(eL(a))return s;t[e+s]=a}return s}function ERe(t,n,e,r){return FD(YB(n,t.length-e),t,e,r)}function IRe(t,n,e,r){return FD(jRe(n),t,e,r)}function NRe(t,n,e,r){return FD(gte(n),t,e,r)}function ARe(t,n,e,r){return FD(zRe(n,t.length-e),t,e,r)}Ee.prototype.write=function(n,e,r,o){if(e===void 0)o="utf8",r=this.length,e=0;else if(r===void 0&&typeof e=="string")o=e,r=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(r)?(r=r>>>0,o===void 0&&(o="utf8")):(o=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-e;if((r===void 0||r>i)&&(r=i),n.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return DRe(this,n,e,r);case"utf8":case"utf-8":return ERe(this,n,e,r);case"ascii":case"latin1":case"binary":return IRe(this,n,e,r);case"base64":return NRe(this,n,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ARe(this,n,e,r);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};Ee.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function RRe(t,n,e){return n===0&&e===t.length?KB.fromByteArray(t):KB.fromByteArray(t.slice(n,e))}function pte(t,n,e){e=Math.min(t.length,e);for(var r=[],o=n;o<e;){var i=t[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=e){var l,c,u,d;switch(a){case 1:i<128&&(s=i);break;case 2:l=t[o+1],(l&192)===128&&(d=(i&31)<<6|l&63,d>127&&(s=d));break;case 3:l=t[o+1],c=t[o+2],(l&192)===128&&(c&192)===128&&(d=(i&15)<<12|(l&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:l=t[o+1],c=t[o+2],u=t[o+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(d=(i&15)<<18|(l&63)<<12|(c&63)<<6|u&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),o+=a}return ORe(r)}var ate=4096;function ORe(t){var n=t.length;if(n<=ate)return String.fromCharCode.apply(String,t);for(var e="",r=0;r<n;)e+=String.fromCharCode.apply(String,t.slice(r,r+=ate));return e}function FRe(t,n,e){var r="";e=Math.min(t.length,e);for(var o=n;o<e;++o)r+=String.fromCharCode(t[o]&127);return r}function PRe(t,n,e){var r="";e=Math.min(t.length,e);for(var o=n;o<e;++o)r+=String.fromCharCode(t[o]);return r}function BRe(t,n,e){var r=t.length;(!n||n<0)&&(n=0),(!e||e<0||e>r)&&(e=r);for(var o="",i=n;i<e;++i)o+=HRe[t[i]];return o}function LRe(t,n,e){for(var r=t.slice(n,e),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+r[i+1]*256);return o}Ee.prototype.slice=function(n,e){var r=this.length;n=~~n,e=e===void 0?r:~~e,n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<n&&(e=n);var o=this.subarray(n,e);return Object.setPrototypeOf(o,Ee.prototype),o};function hi(t,n,e){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+n>e)throw new RangeError("Trying to access beyond buffer length")}Ee.prototype.readUintLE=Ee.prototype.readUIntLE=function(n,e,r){n=n>>>0,e=e>>>0,r||hi(n,e,this.length);for(var o=this[n],i=1,s=0;++s<e&&(i*=256);)o+=this[n+s]*i;return o};Ee.prototype.readUintBE=Ee.prototype.readUIntBE=function(n,e,r){n=n>>>0,e=e>>>0,r||hi(n,e,this.length);for(var o=this[n+--e],i=1;e>0&&(i*=256);)o+=this[n+--e]*i;return o};Ee.prototype.readUint8=Ee.prototype.readUInt8=function(n,e){return n=n>>>0,e||hi(n,1,this.length),this[n]};Ee.prototype.readUint16LE=Ee.prototype.readUInt16LE=function(n,e){return n=n>>>0,e||hi(n,2,this.length),this[n]|this[n+1]<<8};Ee.prototype.readUint16BE=Ee.prototype.readUInt16BE=function(n,e){return n=n>>>0,e||hi(n,2,this.length),this[n]<<8|this[n+1]};Ee.prototype.readUint32LE=Ee.prototype.readUInt32LE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216};Ee.prototype.readUint32BE=Ee.prototype.readUInt32BE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])};Ee.prototype.readIntLE=function(n,e,r){n=n>>>0,e=e>>>0,r||hi(n,e,this.length);for(var o=this[n],i=1,s=0;++s<e&&(i*=256);)o+=this[n+s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o};Ee.prototype.readIntBE=function(n,e,r){n=n>>>0,e=e>>>0,r||hi(n,e,this.length);for(var o=e,i=1,s=this[n+--o];o>0&&(i*=256);)s+=this[n+--o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s};Ee.prototype.readInt8=function(n,e){return n=n>>>0,e||hi(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]};Ee.prototype.readInt16LE=function(n,e){n=n>>>0,e||hi(n,2,this.length);var r=this[n]|this[n+1]<<8;return r&32768?r|4294901760:r};Ee.prototype.readInt16BE=function(n,e){n=n>>>0,e||hi(n,2,this.length);var r=this[n+1]|this[n]<<8;return r&32768?r|4294901760:r};Ee.prototype.readInt32LE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24};Ee.prototype.readInt32BE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]};Ee.prototype.readFloatLE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),Lv.read(this,n,!0,23,4)};Ee.prototype.readFloatBE=function(n,e){return n=n>>>0,e||hi(n,4,this.length),Lv.read(this,n,!1,23,4)};Ee.prototype.readDoubleLE=function(n,e){return n=n>>>0,e||hi(n,8,this.length),Lv.read(this,n,!0,52,8)};Ee.prototype.readDoubleBE=function(n,e){return n=n>>>0,e||hi(n,8,this.length),Lv.read(this,n,!1,52,8)};function js(t,n,e,r,o,i){if(!Ee.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<i)throw new RangeError('"value" argument is out of bounds');if(e+r>t.length)throw new RangeError("Index out of range")}Ee.prototype.writeUintLE=Ee.prototype.writeUIntLE=function(n,e,r,o){if(n=+n,e=e>>>0,r=r>>>0,!o){var i=Math.pow(2,8*r)-1;js(this,n,e,r,i,0)}var s=1,a=0;for(this[e]=n&255;++a<r&&(s*=256);)this[e+a]=n/s&255;return e+r};Ee.prototype.writeUintBE=Ee.prototype.writeUIntBE=function(n,e,r,o){if(n=+n,e=e>>>0,r=r>>>0,!o){var i=Math.pow(2,8*r)-1;js(this,n,e,r,i,0)}var s=r-1,a=1;for(this[e+s]=n&255;--s>=0&&(a*=256);)this[e+s]=n/a&255;return e+r};Ee.prototype.writeUint8=Ee.prototype.writeUInt8=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,1,255,0),this[e]=n&255,e+1};Ee.prototype.writeUint16LE=Ee.prototype.writeUInt16LE=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,2,65535,0),this[e]=n&255,this[e+1]=n>>>8,e+2};Ee.prototype.writeUint16BE=Ee.prototype.writeUInt16BE=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,2,65535,0),this[e]=n>>>8,this[e+1]=n&255,e+2};Ee.prototype.writeUint32LE=Ee.prototype.writeUInt32LE=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,4,4294967295,0),this[e+3]=n>>>24,this[e+2]=n>>>16,this[e+1]=n>>>8,this[e]=n&255,e+4};Ee.prototype.writeUint32BE=Ee.prototype.writeUInt32BE=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,4,4294967295,0),this[e]=n>>>24,this[e+1]=n>>>16,this[e+2]=n>>>8,this[e+3]=n&255,e+4};Ee.prototype.writeIntLE=function(n,e,r,o){if(n=+n,e=e>>>0,!o){var i=Math.pow(2,8*r-1);js(this,n,e,r,i-1,-i)}var s=0,a=1,l=0;for(this[e]=n&255;++s<r&&(a*=256);)n<0&&l===0&&this[e+s-1]!==0&&(l=1),this[e+s]=(n/a>>0)-l&255;return e+r};Ee.prototype.writeIntBE=function(n,e,r,o){if(n=+n,e=e>>>0,!o){var i=Math.pow(2,8*r-1);js(this,n,e,r,i-1,-i)}var s=r-1,a=1,l=0;for(this[e+s]=n&255;--s>=0&&(a*=256);)n<0&&l===0&&this[e+s+1]!==0&&(l=1),this[e+s]=(n/a>>0)-l&255;return e+r};Ee.prototype.writeInt8=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,1,127,-128),n<0&&(n=255+n+1),this[e]=n&255,e+1};Ee.prototype.writeInt16LE=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,2,32767,-32768),this[e]=n&255,this[e+1]=n>>>8,e+2};Ee.prototype.writeInt16BE=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,2,32767,-32768),this[e]=n>>>8,this[e+1]=n&255,e+2};Ee.prototype.writeInt32LE=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,4,2147483647,-2147483648),this[e]=n&255,this[e+1]=n>>>8,this[e+2]=n>>>16,this[e+3]=n>>>24,e+4};Ee.prototype.writeInt32BE=function(n,e,r){return n=+n,e=e>>>0,r||js(this,n,e,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[e]=n>>>24,this[e+1]=n>>>16,this[e+2]=n>>>8,this[e+3]=n&255,e+4};function hte(t,n,e,r,o,i){if(e+r>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function fte(t,n,e,r,o){return n=+n,e=e>>>0,o||hte(t,n,e,4,34028234663852886e22,-34028234663852886e22),Lv.write(t,n,e,r,23,4),e+4}Ee.prototype.writeFloatLE=function(n,e,r){return fte(this,n,e,!0,r)};Ee.prototype.writeFloatBE=function(n,e,r){return fte(this,n,e,!1,r)};function mte(t,n,e,r,o){return n=+n,e=e>>>0,o||hte(t,n,e,8,17976931348623157e292,-17976931348623157e292),Lv.write(t,n,e,r,52,8),e+8}Ee.prototype.writeDoubleLE=function(n,e,r){return mte(this,n,e,!0,r)};Ee.prototype.writeDoubleBE=function(n,e,r){return mte(this,n,e,!1,r)};Ee.prototype.copy=function(n,e,r,o){if(!Ee.isBuffer(n))throw new TypeError("argument should be a Buffer");if(r||(r=0),!o&&o!==0&&(o=this.length),e>=n.length&&(e=n.length),e||(e=0),o>0&&o<r&&(o=r),o===r||n.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),n.length-e<o-r&&(o=n.length-e+r);var i=o-r;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,r,o):Uint8Array.prototype.set.call(n,this.subarray(r,o),e),i};Ee.prototype.fill=function(n,e,r,o){if(typeof n=="string"){if(typeof e=="string"?(o=e,e=0,r=this.length):typeof r=="string"&&(o=r,r=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!Ee.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(n.length===1){var i=n.charCodeAt(0);(o==="utf8"&&i<128||o==="latin1")&&(n=i)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e=e>>>0,r=r===void 0?this.length:r>>>0,n||(n=0);var s;if(typeof n=="number")for(s=e;s<r;++s)this[s]=n;else{var a=Ee.isBuffer(n)?n:Ee.from(n,o),l=a.length;if(l===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=a[s%l]}return this};var $Re=/[^+/0-9A-Za-z-_]/g;function VRe(t){if(t=t.split("=")[0],t=t.trim().replace($Re,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function YB(t,n){n=n||1/0;for(var e,r=t.length,o=null,i=[],s=0;s<r;++s){if(e=t.charCodeAt(s),e>55295&&e<57344){if(!o){if(e>56319){(n-=3)>-1&&i.push(239,191,189);continue}else if(s+1===r){(n-=3)>-1&&i.push(239,191,189);continue}o=e;continue}if(e<56320){(n-=3)>-1&&i.push(239,191,189),o=e;continue}e=(o-55296<<10|e-56320)+65536}else o&&(n-=3)>-1&&i.push(239,191,189);if(o=null,e<128){if((n-=1)<0)break;i.push(e)}else if(e<2048){if((n-=2)<0)break;i.push(e>>6|192,e&63|128)}else if(e<65536){if((n-=3)<0)break;i.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((n-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return i}function jRe(t){for(var n=[],e=0;e<t.length;++e)n.push(t.charCodeAt(e)&255);return n}function zRe(t,n){for(var e,r,o,i=[],s=0;s<t.length&&!((n-=2)<0);++s)e=t.charCodeAt(s),r=e>>8,o=e%256,i.push(o),i.push(r);return i}function gte(t){return KB.toByteArray(VRe(t))}function FD(t,n,e,r){for(var o=0;o<r&&!(o+e>=n.length||o>=t.length);++o)n[o+e]=t[o];return o}function Pu(t,n){return t instanceof n||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===n.name}function eL(t){return t!==t}var HRe=function(){for(var t="0123456789abcdef",n=new Array(256),e=0;e<16;++e)for(var r=e*16,o=0;o<16;++o)n[r+o]=t[e]+t[o];return n}()});var xte=Lo((tL,yte)=>{"use strict";var PD=vte(),Bu=PD.Buffer;function wte(t,n){for(var e in t)n[e]=t[e]}Bu.from&&Bu.alloc&&Bu.allocUnsafe&&Bu.allocUnsafeSlow?yte.exports=PD:(wte(PD,tL),tL.Buffer=X0);function X0(t,n,e){return Bu(t,n,e)}X0.prototype=Object.create(Bu.prototype);wte(Bu,X0);X0.from=function(t,n,e){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Bu(t,n,e)};X0.alloc=function(t,n,e){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=Bu(t);return n!==void 0?typeof e=="string"?r.fill(n,e):r.fill(n):r.fill(0),r};X0.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Bu(t)};X0.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return PD.SlowBuffer(t)}});var oL=Lo(kte=>{"use strict";var rL=xte().Buffer,_te=rL.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function URe(t){if(!t)return"utf8";for(var n;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(n)return;t=(""+t).toLowerCase(),n=!0}}function GRe(t){var n=URe(t);if(typeof n!="string"&&(rL.isEncoding===_te||!_te(t)))throw new Error("Unknown encoding: "+t);return n||t}kte.StringDecoder=Ek;function Ek(t){this.encoding=GRe(t);var n;switch(this.encoding){case"utf16le":this.text=YRe,this.end=QRe,n=4;break;case"utf8":this.fillLast=KRe,n=4;break;case"base64":this.text=JRe,this.end=e5e,n=3;break;default:this.write=t5e,this.end=n5e;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=rL.allocUnsafe(n)}Ek.prototype.write=function(t){if(t.length===0)return"";var n,e;if(this.lastNeed){if(n=this.fillLast(t),n===void 0)return"";e=this.lastNeed,this.lastNeed=0}else e=0;return e<t.length?n?n+this.text(t,e):this.text(t,e):n||""};Ek.prototype.end=XRe;Ek.prototype.text=ZRe;Ek.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function nL(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function WRe(t,n,e){var r=n.length-1;if(r<e)return 0;var o=nL(n[r]);return o>=0?(o>0&&(t.lastNeed=o-1),o):--r<e||o===-2?0:(o=nL(n[r]),o>=0?(o>0&&(t.lastNeed=o-2),o):--r<e||o===-2?0:(o=nL(n[r]),o>=0?(o>0&&(o===2?o=0:t.lastNeed=o-3),o):0))}function qRe(t,n,e){if((n[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&n.length>1){if((n[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&n.length>2&&(n[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function KRe(t){var n=this.lastTotal-this.lastNeed,e=qRe(this,t,n);if(e!==void 0)return e;if(this.lastNeed<=t.length)return t.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,n,0,t.length),this.lastNeed-=t.length}function ZRe(t,n){var e=WRe(this,t,n);if(!this.lastNeed)return t.toString("utf8",n);this.lastTotal=e;var r=t.length-(e-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",n,r)}function XRe(t){var n=t&&t.length?this.write(t):"";return this.lastNeed?n+"\uFFFD":n}function YRe(t,n){if((t.length-n)%2===0){var e=t.toString("utf16le",n);if(e){var r=e.charCodeAt(e.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",n,t.length-1)}function QRe(t){var n=t&&t.length?this.write(t):"";if(this.lastNeed){var e=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,e)}return n}function JRe(t,n){var e=(t.length-n)%3;return e===0?t.toString("base64",n):(this.lastNeed=3-e,this.lastTotal=3,e===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",n,t.length-e))}function e5e(t){var n=t&&t.length?this.write(t):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function t5e(t){return t.toString(this.encoding)}function n5e(t){return t&&t.length?this.write(t):""}});var Lte=Lo(()=>{"use strict"});var due=Lo((uue,k$)=>{"use strict";(function(t){typeof uue=="object"&&typeof k$<"u"?k$.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=t()})(function(){return function t(n,e,r){function o(a,l){if(!e[a]){if(!n[a]){var c=typeof uy=="function"&&uy;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=e[a]={exports:{}};n[a][0].call(d.exports,function(p){var h=n[a][1][p];return o(h||p)},d,d.exports,t,n,e,r)}return e[a].exports}for(var i=typeof uy=="function"&&uy,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n,e){"use strict";var r=t("./utils"),o=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var a,l,c,u,d,p,h,f=[],m=0,g=s.length,v=g,w=r.getTypeOf(s)!=="string";m<s.length;)v=g-m,c=w?(a=s[m++],l=m<g?s[m++]:0,m<g?s[m++]:0):(a=s.charCodeAt(m++),l=m<g?s.charCodeAt(m++):0,m<g?s.charCodeAt(m++):0),u=a>>2,d=(3&a)<<4|l>>4,p=1<v?(15&l)<<2|c>>6:64,h=2<v?63&c:64,f.push(i.charAt(u)+i.charAt(d)+i.charAt(p)+i.charAt(h));return f.join("")},e.decode=function(s){var a,l,c,u,d,p,h=0,f=0,m="data:";if(s.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var g,v=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&v--,s.charAt(s.length-2)===i.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=o.uint8array?new Uint8Array(0|v):new Array(0|v);h<s.length;)a=i.indexOf(s.charAt(h++))<<2|(u=i.indexOf(s.charAt(h++)))>>4,l=(15&u)<<4|(d=i.indexOf(s.charAt(h++)))>>2,c=(3&d)<<6|(p=i.indexOf(s.charAt(h++))),g[f++]=a,d!==64&&(g[f++]=l),p!==64&&(g[f++]=c);return g}},{"./support":30,"./utils":32}],2:[function(t,n,e){"use strict";var r=t("./external"),o=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(l,c,u,d,p){this.compressedSize=l,this.uncompressedSize=c,this.crc32=u,this.compression=d,this.compressedContent=p}a.prototype={getContentWorker:function(){var l=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),c=this;return l.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,c,u){return l.pipe(new i).pipe(new s("uncompressedSize")).pipe(c.compressWorker(u)).pipe(new s("compressedSize")).withStreamInfo("compression",c)},n.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,e){"use strict";var r=t("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},e.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,e){"use strict";var r=t("./utils"),o=function(){for(var i,s=[],a=0;a<256;a++){i=a;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;s[a]=i}return s}();n.exports=function(i,s){return i!==void 0&&i.length?r.getTypeOf(i)!=="string"?function(a,l,c,u){var d=o,p=u+c;a^=-1;for(var h=u;h<p;h++)a=a>>>8^d[255&(a^l[h])];return-1^a}(0|s,i,i.length,0):function(a,l,c,u){var d=o,p=u+c;a^=-1;for(var h=u;h<p;h++)a=a>>>8^d[255&(a^l.charCodeAt(h))];return-1^a}(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(t,n,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(t,n,e){"use strict";var r=null;r=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:r}},{lie:37}],7:[function(t,n,e){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),i=t("./utils"),s=t("./stream/GenericWorker"),a=r?"uint8array":"array";function l(c,u){s.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=u,this.meta={}}e.magic="\b\0",i.inherits(l,s),l.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(a,c.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(u){c.push({data:u,meta:c.meta})}},e.compressWorker=function(c){return new l("Deflate",c)},e.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,e){"use strict";function r(d,p){var h,f="";for(h=0;h<p;h++)f+=String.fromCharCode(255&d),d>>>=8;return f}function o(d,p,h,f,m,g){var v,w,y=d.file,_=d.compression,k=g!==a.utf8encode,T=i.transformTo("string",g(y.name)),I=i.transformTo("string",a.utf8encode(y.name)),A=y.comment,P=i.transformTo("string",g(A)),N=i.transformTo("string",a.utf8encode(A)),B=I.length!==y.name.length,S=N.length!==A.length,W="",ie="",Q="",J=y.dir,G=y.date,H={crc32:0,compressedSize:0,uncompressedSize:0};p&&!h||(H.crc32=d.crc32,H.compressedSize=d.compressedSize,H.uncompressedSize=d.uncompressedSize);var V=0;p&&(V|=8),k||!B&&!S||(V|=2048);var K=0,pe=0;J&&(K|=16),m==="UNIX"?(pe=798,K|=function(se,ye){var Re=se;return se||(Re=ye?16893:33204),(65535&Re)<<16}(y.unixPermissions,J)):(pe=20,K|=function(se){return 63&(se||0)}(y.dosPermissions)),v=G.getUTCHours(),v<<=6,v|=G.getUTCMinutes(),v<<=5,v|=G.getUTCSeconds()/2,w=G.getUTCFullYear()-1980,w<<=4,w|=G.getUTCMonth()+1,w<<=5,w|=G.getUTCDate(),B&&(ie=r(1,1)+r(l(T),4)+I,W+="up"+r(ie.length,2)+ie),S&&(Q=r(1,1)+r(l(P),4)+N,W+="uc"+r(Q.length,2)+Q);var ce="";return ce+=`
\0`,ce+=r(V,2),ce+=_.magic,ce+=r(v,2),ce+=r(w,2),ce+=r(H.crc32,4),ce+=r(H.compressedSize,4),ce+=r(H.uncompressedSize,4),ce+=r(T.length,2),ce+=r(W.length,2),{fileRecord:c.LOCAL_FILE_HEADER+ce+T+W,dirRecord:c.CENTRAL_FILE_HEADER+r(pe,2)+ce+r(P.length,2)+"\0\0\0\0"+r(K,4)+r(f,4)+T+W+P}}var i=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),l=t("../crc32"),c=t("../signature");function u(d,p,h,f){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=h,this.encodeFileName=f,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,s),u.prototype.push=function(d){var p=d.meta.percent||0,h=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,s.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:h?(p+100*(h-f-1))/h:100}}))},u.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var h=o(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,h=o(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),p)this.push({data:function(f){return c.DATA_DESCRIPTOR+r(f.crc32,4)+r(f.compressedSize,4)+r(f.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var h=this.bytesWritten-d,f=function(m,g,v,w,y){var _=i.transformTo("string",y(w));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(m,2)+r(m,2)+r(g,4)+r(v,4)+r(_.length,2)+_}(this.dirRecords.length,h,d,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(h){p.processChunk(h)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(h){p.error(h)}),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(d){var p=this._sources;if(!s.prototype.error.call(this,d))return!1;for(var h=0;h<p.length;h++)try{p[h].error(d)}catch{}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},n.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,e){"use strict";var r=t("../compressions"),o=t("./ZipFileWorker");e.generateWorker=function(i,s,a){var l=new o(s.streamFiles,a,s.platform,s.encodeFileName),c=0;try{i.forEach(function(u,d){c++;var p=function(g,v){var w=g||v,y=r[w];if(!y)throw new Error(w+" is not a valid compression method !");return y}(d.options.compression,s.compression),h=d.options.compressionOptions||s.compressionOptions||{},f=d.dir,m=d.date;d._compressWorker(p,h).withStreamInfo("file",{name:u,dir:f,date:m,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=c}catch(u){l.error(u)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,e){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var i in this)typeof this[i]!="function"&&(o[i]=this[i]);return o}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(o,i){return new r().loadAsync(o,i)},r.external=t("./external"),n.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,e){"use strict";var r=t("./utils"),o=t("./external"),i=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function c(u){return new o.Promise(function(d,p){var h=u.decompressed.getContentWorker().pipe(new a);h.on("error",function(f){p(f)}).on("end",function(){h.streamInfo.crc32!==u.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(u,d){var p=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(u)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",u,!0,d.optimizedBinaryString,d.base64).then(function(h){var f=new s(d);return f.load(h),f}).then(function(h){var f=[o.Promise.resolve(h)],m=h.files;if(d.checkCRC32)for(var g=0;g<m.length;g++)f.push(c(m[g]));return o.Promise.all(f)}).then(function(h){for(var f=h.shift(),m=f.files,g=0;g<m.length;g++){var v=m[g],w=v.fileNameStr,y=r.resolve(v.fileNameStr);p.file(y,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:d.createFolders}),v.dir||(p.file(y).unsafeOriginalName=w)}return f.zipComment.length&&(p.comment=f.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,e){"use strict";var r=t("../utils"),o=t("../stream/GenericWorker");function i(s,a){o.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}r.inherits(i,o),i.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,e){"use strict";var r=t("readable-stream").Readable;function o(i,s,a){r.call(this,s),this._helper=i;var l=this;i.on("data",function(c,u){l.push(c)||l._helper.pause(),a&&a(u)}).on("error",function(c){l.emit("error",c)}).on("end",function(){l.push(null)})}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,e){"use strict";n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,n,e){"use strict";function r(y,_,k){var T,I=i.getTypeOf(_),A=i.extend(k||{},l);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(y=m(y)),A.createFolders&&(T=f(y))&&g.call(this,T,!0);var P=I==="string"&&A.binary===!1&&A.base64===!1;k&&k.binary!==void 0||(A.binary=!P),(_ instanceof c&&_.uncompressedSize===0||A.dir||!_||_.length===0)&&(A.base64=!1,A.binary=!0,_="",A.compression="STORE",I="string");var N=null;N=_ instanceof c||_ instanceof s?_:p.isNode&&p.isStream(_)?new h(y,_):i.prepareContent(y,_,A.binary,A.optimizedBinaryString,A.base64);var B=new u(y,N,A);this.files[y]=B}var o=t("./utf8"),i=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),l=t("./defaults"),c=t("./compressedObject"),u=t("./zipObject"),d=t("./generate"),p=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),f=function(y){y.slice(-1)==="/"&&(y=y.substring(0,y.length-1));var _=y.lastIndexOf("/");return 0<_?y.substring(0,_):""},m=function(y){return y.slice(-1)!=="/"&&(y+="/"),y},g=function(y,_){return _=_!==void 0?_:l.createFolders,y=m(y),this.files[y]||r.call(this,y,null,{dir:!0,createFolders:_}),this.files[y]};function v(y){return Object.prototype.toString.call(y)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(y){var _,k,T;for(_ in this.files)T=this.files[_],(k=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&y(k,T)},filter:function(y){var _=[];return this.forEach(function(k,T){y(k,T)&&_.push(T)}),_},file:function(y,_,k){if(arguments.length!==1)return y=this.root+y,r.call(this,y,_,k),this;if(v(y)){var T=y;return this.filter(function(A,P){return!P.dir&&T.test(A)})}var I=this.files[this.root+y];return I&&!I.dir?I:null},folder:function(y){if(!y)return this;if(v(y))return this.filter(function(I,A){return A.dir&&y.test(I)});var _=this.root+y,k=g.call(this,_),T=this.clone();return T.root=k.name,T},remove:function(y){y=this.root+y;var _=this.files[y];if(_||(y.slice(-1)!=="/"&&(y+="/"),_=this.files[y]),_&&!_.dir)delete this.files[y];else for(var k=this.filter(function(I,A){return A.name.slice(0,y.length)===y}),T=0;T<k.length;T++)delete this.files[k[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(y){var _,k={};try{if((k=i.extend(y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");i.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var T=k.comment||this.comment||"";_=d.generateWorker(this,k,T)}catch(I){(_=new s("error")).error(I)}return new a(_,k.type||"string",k.mimeType)},generateAsync:function(y,_){return this.generateInternalStream(y).accumulate(_)},generateNodeStream:function(y,_){return(y=y||{}).type||(y.type="nodebuffer"),this.generateInternalStream(y).toNodejsStream(_)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,e){"use strict";n.exports=t("stream")},{stream:void 0}],17:[function(t,n,e){"use strict";var r=t("./DataReader");function o(i){r.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}t("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data[this.zero+i]},o.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),c=i.charCodeAt(3),u=this.length-4;0<=u;--u)if(this.data[u]===s&&this.data[u+1]===a&&this.data[u+2]===l&&this.data[u+3]===c)return u-this.zero;return-1},o.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),c=i.charCodeAt(3),u=this.readData(4);return s===u[0]&&a===u[1]&&l===u[2]&&c===u[3]},o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,e){"use strict";var r=t("../utils");function o(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,a=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=i,a},readString:function(i){return r.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,e){"use strict";var r=t("./Uint8ArrayReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,e){"use strict";var r=t("./DataReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},o.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},o.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,e){"use strict";var r=t("./ArrayReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,e){"use strict";var r=t("../utils"),o=t("../support"),i=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");n.exports=function(c){var u=r.getTypeOf(c);return r.checkSupport(u),u!=="string"||o.uint8array?u==="nodebuffer"?new a(c):o.uint8array?new l(r.transformTo("uint8array",c)):new i(r.transformTo("array",c)):new s(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,e){"use strict";var r=t("./GenericWorker"),o=t("../utils");function i(s){r.call(this,"ConvertWorker to "+s),this.destType=s}o.inherits(i,r),i.prototype.processChunk=function(s){this.push({data:o.transformTo(this.destType,s.data),meta:s.meta})},n.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,e){"use strict";var r=t("./GenericWorker"),o=t("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,r),i.prototype.processChunk=function(s){this.streamInfo.crc32=o(s.data,this.streamInfo.crc32||0),this.push(s)},n.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./GenericWorker");function i(s){o.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}r.inherits(i,o),i.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}o.prototype.processChunk.call(this,s)},n.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./GenericWorker");function i(s){o.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=r.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,e){"use strict";function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,i){return this._listeners[o].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,i){if(this._listeners[o])for(var s=0;s<this._listeners[o].length;s++)this._listeners[o][s].call(this,i)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var i=this;return o.on("data",function(s){i.processChunk(s)}),o.on("end",function(){i.end()}),o.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,i){return this.extraStreamInfo[o]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=r},{}],29:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./ConvertWorker"),i=t("./GenericWorker"),s=t("../base64"),a=t("../support"),l=t("../external"),c=null;if(a.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function u(p,h){return new l.Promise(function(f,m){var g=[],v=p._internalType,w=p._outputType,y=p._mimeType;p.on("data",function(_,k){g.push(_),h&&h(k)}).on("error",function(_){g=[],m(_)}).on("end",function(){try{var _=function(k,T,I){switch(k){case"blob":return r.newBlob(r.transformTo("arraybuffer",T),I);case"base64":return s.encode(T);default:return r.transformTo(k,T)}}(w,function(k,T){var I,A=0,P=null,N=0;for(I=0;I<T.length;I++)N+=T[I].length;switch(k){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(P=new Uint8Array(N),I=0;I<T.length;I++)P.set(T[I],A),A+=T[I].length;return P;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+k+"'")}}(v,g),y);f(_)}catch(k){m(k)}g=[]}).resume()})}function d(p,h,f){var m=h;switch(h){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=h,this._mimeType=f,r.checkSupport(m),this._worker=p.pipe(new o(m)),p.lock()}catch(g){this._worker=new i("error"),this._worker.error(g)}}d.prototype={accumulate:function(p){return u(this,p)},on:function(p,h){var f=this;return p==="data"?this._worker.on(p,function(m){h.call(f,m.data,m.meta)}):this._worker.on(p,function(){r.delay(h,arguments,f)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{var r=new ArrayBuffer(0);try{e.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),e.blob=o.getBlob("application/zip").size===0}catch{e.blob=!1}}}try{e.nodestream=!!t("readable-stream").Readable}catch{e.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,e){"use strict";for(var r=t("./utils"),o=t("./support"),i=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}e.utf8encode=function(d){return o.nodebuffer?i.newBufferFrom(d,"utf-8"):function(p){var h,f,m,g,v,w=p.length,y=0;for(g=0;g<w;g++)(64512&(f=p.charCodeAt(g)))==55296&&g+1<w&&(64512&(m=p.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),g++),y+=f<128?1:f<2048?2:f<65536?3:4;for(h=o.uint8array?new Uint8Array(y):new Array(y),g=v=0;v<y;g++)(64512&(f=p.charCodeAt(g)))==55296&&g+1<w&&(64512&(m=p.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),g++),f<128?h[v++]=f:(f<2048?h[v++]=192|f>>>6:(f<65536?h[v++]=224|f>>>12:(h[v++]=240|f>>>18,h[v++]=128|f>>>12&63),h[v++]=128|f>>>6&63),h[v++]=128|63&f);return h}(d)},e.utf8decode=function(d){return o.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):function(p){var h,f,m,g,v=p.length,w=new Array(2*v);for(h=f=0;h<v;)if((m=p[h++])<128)w[f++]=m;else if(4<(g=a[m]))w[f++]=65533,h+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&h<v;)m=m<<6|63&p[h++],g--;1<g?w[f++]=65533:m<65536?w[f++]=m:(m-=65536,w[f++]=55296|m>>10&1023,w[f++]=56320|1023&m)}return w.length!==f&&(w.subarray?w=w.subarray(0,f):w.length=f),r.applyFromCharCode(w)}(d=r.transformTo(o.uint8array?"uint8array":"array",d))},r.inherits(c,s),c.prototype.processChunk=function(d){var p=r.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var h=p;(p=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),p.set(h,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var f=function(g,v){var w;for((v=v||g.length)>g.length&&(v=g.length),w=v-1;0<=w&&(192&g[w])==128;)w--;return w<0||w===0?v:w+a[g[w]]>v?w:v}(p),m=p;f!==p.length&&(o.uint8array?(m=p.subarray(0,f),this.leftOver=p.subarray(f,p.length)):(m=p.slice(0,f),this.leftOver=p.slice(f,p.length))),this.push({data:e.utf8decode(m),meta:d.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=c,r.inherits(u,s),u.prototype.processChunk=function(d){this.push({data:e.utf8encode(d.data),meta:d.meta})},e.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,e){"use strict";var r=t("./support"),o=t("./base64"),i=t("./nodejsUtils"),s=t("./external");function a(h){return h}function l(h,f){for(var m=0;m<h.length;++m)f[m]=255&h.charCodeAt(m);return f}t("setimmediate"),e.newBlob=function(h,f){e.checkSupport("blob");try{return new Blob([h],{type:f})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(h),m.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(h,f,m){var g=[],v=0,w=h.length;if(w<=m)return String.fromCharCode.apply(null,h);for(;v<w;)f==="array"||f==="nodebuffer"?g.push(String.fromCharCode.apply(null,h.slice(v,Math.min(v+m,w)))):g.push(String.fromCharCode.apply(null,h.subarray(v,Math.min(v+m,w)))),v+=m;return g.join("")},stringifyByChar:function(h){for(var f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);return f},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function u(h){var f=65536,m=e.getTypeOf(h),g=!0;if(m==="uint8array"?g=c.applyCanBeUsed.uint8array:m==="nodebuffer"&&(g=c.applyCanBeUsed.nodebuffer),g)for(;1<f;)try{return c.stringifyByChunk(h,m,f)}catch{f=Math.floor(f/2)}return c.stringifyByChar(h)}function d(h,f){for(var m=0;m<h.length;m++)f[m]=h[m];return f}e.applyFromCharCode=u;var p={};p.string={string:a,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return p.string.uint8array(h).buffer},uint8array:function(h){return l(h,new Uint8Array(h.length))},nodebuffer:function(h){return l(h,i.allocBuffer(h.length))}},p.array={string:u,array:a,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(h)}},p.arraybuffer={string:function(h){return u(new Uint8Array(h))},array:function(h){return d(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:a,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(new Uint8Array(h))}},p.uint8array={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:a,nodebuffer:function(h){return i.newBufferFrom(h)}},p.nodebuffer={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return p.nodebuffer.uint8array(h).buffer},uint8array:function(h){return d(h,new Uint8Array(h.length))},nodebuffer:a},e.transformTo=function(h,f){if(f=f||"",!h)return f;e.checkSupport(h);var m=e.getTypeOf(f);return p[m][h](f)},e.resolve=function(h){for(var f=h.split("/"),m=[],g=0;g<f.length;g++){var v=f[g];v==="."||v===""&&g!==0&&g!==f.length-1||(v===".."?m.pop():m.push(v))}return m.join("/")},e.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":r.nodebuffer&&i.isBuffer(h)?"nodebuffer":r.uint8array&&h instanceof Uint8Array?"uint8array":r.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(h){if(!r[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(h){var f,m,g="";for(m=0;m<(h||"").length;m++)g+="\\x"+((f=h.charCodeAt(m))<16?"0":"")+f.toString(16).toUpperCase();return g},e.delay=function(h,f,m){setImmediate(function(){h.apply(m||null,f||[])})},e.inherits=function(h,f){function m(){}m.prototype=f.prototype,h.prototype=new m},e.extend=function(){var h,f,m={};for(h=0;h<arguments.length;h++)for(f in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],f)&&m[f]===void 0&&(m[f]=arguments[h][f]);return m},e.prepareContent=function(h,f,m,g,v){return s.Promise.resolve(f).then(function(w){return r.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new s.Promise(function(y,_){var k=new FileReader;k.onload=function(T){y(T.target.result)},k.onerror=function(T){_(T.target.error)},k.readAsArrayBuffer(w)}):w}).then(function(w){var y=e.getTypeOf(w);return y?(y==="arraybuffer"?w=e.transformTo("uint8array",w):y==="string"&&(v?w=o.decode(w):m&&g!==!0&&(w=function(_){return l(_,r.uint8array?new Uint8Array(_.length):new Array(_.length))}(w))),w):s.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,e){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./signature"),s=t("./zipEntry"),a=t("./support");function l(c){this.files=[],this.loadOptions=c}l.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var u=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(u)+", expected "+o.pretty(c)+")")}},isSignature:function(c,u){var d=this.reader.index;this.reader.setIndex(c);var p=this.reader.readString(4)===u;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),u=a.uint8array?"uint8array":"array",d=o.transformTo(u,c);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,u,d,p=this.zip64EndOfCentralSize-44;0<p;)c=this.reader.readInt(2),u=this.reader.readInt(4),d=this.reader.readData(u),this.zip64ExtensibleData[c]={id:c,length:u,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,u;for(c=0;c<this.files.length;c++)u=this.files[c],this.reader.setIndex(u.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),u.readLocalPart(this.reader),u.handleUTF8(),u.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(c=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var u=c;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=u-d;if(0<p)this.isSignature(u,i.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(c){this.reader=r(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,e){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),l=t("./compressions"),c=t("./support");function u(d,p){this.options=d,this.loadOptions=p}u.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,h;if(d.skip(22),this.fileNameLength=d.readInt(2),h=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(f){for(var m in l)if(Object.prototype.hasOwnProperty.call(l,m)&&l[m].magic===f)return l[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,h,f,m=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<m;)p=d.readInt(2),h=d.readInt(2),f=d.readData(h),this.extraFields[p]={id:p,length:h,value:f};d.setIndex(m)},handleUTF8:function(){var d=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var h=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var m=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=r(d.value);return p.readInt(1)!==1||s(this.fileName)!==p.readInt(4)?null:a.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=r(d.value);return p.readInt(1)!==1||s(this.fileComment)!==p.readInt(4)?null:a.utf8decode(p.readData(d.length-5))}return null}},n.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,e){"use strict";function r(p,h,f){this.name=p,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=h,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var o=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),l=t("./stream/GenericWorker");r.prototype={internalStream:function(p){var h=null,f="string";try{if(!p)throw new Error("No output type specified.");var m=(f=p.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),h=this._decompressWorker();var g=!this._dataBinary;g&&!m&&(h=h.pipe(new s.Utf8EncodeWorker)),!g&&m&&(h=h.pipe(new s.Utf8DecodeWorker))}catch(v){(h=new l("error")).error(v)}return new o(h,f,"")},async:function(p,h){return this.internalStream(p).accumulate(h)},nodeStream:function(p,h){return this.internalStream(p||"nodebuffer").toNodejsStream(h)},_compressWorker:function(p,h){if(this._data instanceof a&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(f,p,h)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;n.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,e){(function(r){"use strict";var o,i,s=r.MutationObserver||r.WebKitMutationObserver;if(s){var a=0,l=new s(p),c=r.document.createTextNode("");l.observe(c,{characterData:!0}),o=function(){c.data=a=++a%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var h=r.document.createElement("script");h.onreadystatechange=function(){p(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},r.document.documentElement.appendChild(h)}:function(){setTimeout(p,0)};else{var u=new r.MessageChannel;u.port1.onmessage=p,o=function(){u.port2.postMessage(0)}}var d=[];function p(){var h,f;i=!0;for(var m=d.length;m;){for(f=d,d=[],h=-1;++h<m;)f[h]();m=d.length}i=!1}n.exports=function(h){d.push(h)!==1||i||o()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,e){"use strict";var r=t("immediate");function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,m!==o&&h(this,m)}function u(m,g,v){this.promise=m,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function d(m,g,v){r(function(){var w;try{w=g(v)}catch(y){return i.reject(m,y)}w===m?i.reject(m,new TypeError("Cannot resolve promise with itself")):i.resolve(m,w)})}function p(m){var g=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof g=="function")return function(){g.apply(m,arguments)}}function h(m,g){var v=!1;function w(k){v||(v=!0,i.reject(m,k))}function y(k){v||(v=!0,i.resolve(m,k))}var _=f(function(){g(y,w)});_.status==="error"&&w(_.value)}function f(m,g){var v={};try{v.value=m(g),v.status="success"}catch(w){v.status="error",v.value=w}return v}(n.exports=c).prototype.finally=function(m){if(typeof m!="function")return this;var g=this.constructor;return this.then(function(v){return g.resolve(m()).then(function(){return v})},function(v){return g.resolve(m()).then(function(){throw v})})},c.prototype.catch=function(m){return this.then(null,m)},c.prototype.then=function(m,g){if(typeof m!="function"&&this.state===a||typeof g!="function"&&this.state===s)return this;var v=new this.constructor(o);return this.state!==l?d(v,this.state===a?m:g,this.outcome):this.queue.push(new u(v,m,g)),v},u.prototype.callFulfilled=function(m){i.resolve(this.promise,m)},u.prototype.otherCallFulfilled=function(m){d(this.promise,this.onFulfilled,m)},u.prototype.callRejected=function(m){i.reject(this.promise,m)},u.prototype.otherCallRejected=function(m){d(this.promise,this.onRejected,m)},i.resolve=function(m,g){var v=f(p,g);if(v.status==="error")return i.reject(m,v.value);var w=v.value;if(w)h(m,w);else{m.state=a,m.outcome=g;for(var y=-1,_=m.queue.length;++y<_;)m.queue[y].callFulfilled(g)}return m},i.reject=function(m,g){m.state=s,m.outcome=g;for(var v=-1,w=m.queue.length;++v<w;)m.queue[v].callRejected(g);return m},c.resolve=function(m){return m instanceof this?m:i.resolve(new this(o),m)},c.reject=function(m){var g=new this(o);return i.reject(g,m)},c.all=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,w=!1;if(!v)return this.resolve([]);for(var y=new Array(v),_=0,k=-1,T=new this(o);++k<v;)I(m[k],k);return T;function I(A,P){g.resolve(A).then(function(N){y[P]=N,++_!==v||w||(w=!0,i.resolve(T,y))},function(N){w||(w=!0,i.reject(T,N))})}},c.race=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,w=!1;if(!v)return this.resolve([]);for(var y=-1,_=new this(o);++y<v;)k=m[y],g.resolve(k).then(function(T){w||(w=!0,i.resolve(_,T))},function(T){w||(w=!0,i.reject(_,T))});var k;return _}},{immediate:36}],38:[function(t,n,e){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,e){"use strict";var r=t("./zlib/deflate"),o=t("./utils/common"),i=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,p=8;function h(m){if(!(this instanceof h))return new h(m);this.options=o.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},m||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var v=r.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(v!==c)throw new Error(s[v]);if(g.header&&r.deflateSetHeader(this.strm,g.header),g.dictionary){var w;if(w=typeof g.dictionary=="string"?i.string2buf(g.dictionary):l.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(v=r.deflateSetDictionary(this.strm,w))!==c)throw new Error(s[v]);this._dict_set=!0}}function f(m,g){var v=new h(g);if(v.push(m,!0),v.err)throw v.msg||s[v.err];return v.result}h.prototype.push=function(m,g){var v,w,y=this.strm,_=this.options.chunkSize;if(this.ended)return!1;w=g===~~g?g:g===!0?4:0,typeof m=="string"?y.input=i.string2buf(m):l.call(m)==="[object ArrayBuffer]"?y.input=new Uint8Array(m):y.input=m,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new o.Buf8(_),y.next_out=0,y.avail_out=_),(v=r.deflate(y,w))!==1&&v!==c)return this.onEnd(v),!(this.ended=!0);y.avail_out!==0&&(y.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(o.shrinkBuf(y.output,y.next_out))):this.onData(o.shrinkBuf(y.output,y.next_out)))}while((0<y.avail_in||y.avail_out===0)&&v!==1);return w===4?(v=r.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c):w!==2||(this.onEnd(c),!(y.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},e.Deflate=h,e.deflate=f,e.deflateRaw=function(m,g){return(g=g||{}).raw=!0,f(m,g)},e.gzip=function(m,g){return(g=g||{}).gzip=!0,f(m,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,e){"use strict";var r=t("./zlib/inflate"),o=t("./utils/common"),i=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),l=t("./zlib/zstream"),c=t("./zlib/gzheader"),u=Object.prototype.toString;function d(h){if(!(this instanceof d))return new d(h);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},h||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||h&&h.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var m=r.inflateInit2(this.strm,f.windowBits);if(m!==s.Z_OK)throw new Error(a[m]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(h,f){var m=new d(f);if(m.push(h,!0),m.err)throw m.msg||a[m.err];return m.result}d.prototype.push=function(h,f){var m,g,v,w,y,_,k=this.strm,T=this.options.chunkSize,I=this.options.dictionary,A=!1;if(this.ended)return!1;g=f===~~f?f:f===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof h=="string"?k.input=i.binstring2buf(h):u.call(h)==="[object ArrayBuffer]"?k.input=new Uint8Array(h):k.input=h,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(T),k.next_out=0,k.avail_out=T),(m=r.inflate(k,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&I&&(_=typeof I=="string"?i.string2buf(I):u.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,m=r.inflateSetDictionary(this.strm,_)),m===s.Z_BUF_ERROR&&A===!0&&(m=s.Z_OK,A=!1),m!==s.Z_STREAM_END&&m!==s.Z_OK)return this.onEnd(m),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&m!==s.Z_STREAM_END&&(k.avail_in!==0||g!==s.Z_FINISH&&g!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=i.utf8border(k.output,k.next_out),w=k.next_out-v,y=i.buf2string(k.output,v),k.next_out=w,k.avail_out=T-w,w&&o.arraySet(k.output,k.output,v,w,0),this.onData(y)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(A=!0)}while((0<k.avail_in||k.avail_out===0)&&m!==s.Z_STREAM_END);return m===s.Z_STREAM_END&&(g=s.Z_FINISH),g===s.Z_FINISH?(m=r.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===s.Z_OK):g!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(k.avail_out=0))},d.prototype.onData=function(h){this.chunks.push(h)},d.prototype.onEnd=function(h){h===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},e.Inflate=d,e.inflate=p,e.inflateRaw=function(h,f){return(f=f||{}).raw=!0,p(h,f)},e.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,e){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])}}return s},e.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var o={arraySet:function(s,a,l,c,u){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+c),u);else for(var d=0;d<c;d++)s[u+d]=a[l+d]},flattenChunks:function(s){var a,l,c,u,d,p;for(a=c=0,l=s.length;a<l;a++)c+=s[a].length;for(p=new Uint8Array(c),a=u=0,l=s.length;a<l;a++)d=s[a],p.set(d,u),u+=d.length;return p}},i={arraySet:function(s,a,l,c,u){for(var d=0;d<c;d++)s[u+d]=a[l+d]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)},{}],42:[function(t,n,e){"use strict";var r=t("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(c,u){if(u<65537&&(c.subarray&&i||!c.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(c,u));for(var d="",p=0;p<u;p++)d+=String.fromCharCode(c[p]);return d}s[254]=s[254]=1,e.string2buf=function(c){var u,d,p,h,f,m=c.length,g=0;for(h=0;h<m;h++)(64512&(d=c.charCodeAt(h)))==55296&&h+1<m&&(64512&(p=c.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),h++),g+=d<128?1:d<2048?2:d<65536?3:4;for(u=new r.Buf8(g),h=f=0;f<g;h++)(64512&(d=c.charCodeAt(h)))==55296&&h+1<m&&(64512&(p=c.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),h++),d<128?u[f++]=d:(d<2048?u[f++]=192|d>>>6:(d<65536?u[f++]=224|d>>>12:(u[f++]=240|d>>>18,u[f++]=128|d>>>12&63),u[f++]=128|d>>>6&63),u[f++]=128|63&d);return u},e.buf2binstring=function(c){return l(c,c.length)},e.binstring2buf=function(c){for(var u=new r.Buf8(c.length),d=0,p=u.length;d<p;d++)u[d]=c.charCodeAt(d);return u},e.buf2string=function(c,u){var d,p,h,f,m=u||c.length,g=new Array(2*m);for(d=p=0;d<m;)if((h=c[d++])<128)g[p++]=h;else if(4<(f=s[h]))g[p++]=65533,d+=f-1;else{for(h&=f===2?31:f===3?15:7;1<f&&d<m;)h=h<<6|63&c[d++],f--;1<f?g[p++]=65533:h<65536?g[p++]=h:(h-=65536,g[p++]=55296|h>>10&1023,g[p++]=56320|1023&h)}return l(g,p)},e.utf8border=function(c,u){var d;for((u=u||c.length)>c.length&&(u=c.length),d=u-1;0<=d&&(192&c[d])==128;)d--;return d<0||d===0?u:d+s[c[d]]>u?d:u}},{"./common":41}],43:[function(t,n,e){"use strict";n.exports=function(r,o,i,s){for(var a=65535&r|0,l=r>>>16&65535|0,c=0;i!==0;){for(i-=c=2e3<i?2e3:i;l=l+(a=a+o[s++]|0)|0,--c;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(t,n,e){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,e){"use strict";var r=function(){for(var o,i=[],s=0;s<256;s++){o=s;for(var a=0;a<8;a++)o=1&o?3988292384^o>>>1:o>>>1;i[s]=o}return i}();n.exports=function(o,i,s,a){var l=r,c=a+s;o^=-1;for(var u=a;u<c;u++)o=o>>>8^l[255&(o^i[u])];return-1^o}},{}],46:[function(t,n,e){"use strict";var r,o=t("../utils/common"),i=t("./trees"),s=t("./adler32"),a=t("./crc32"),l=t("./messages"),c=0,u=4,d=0,p=-2,h=-1,f=4,m=2,g=8,v=9,w=286,y=30,_=19,k=2*w+1,T=15,I=3,A=258,P=A+I+1,N=42,B=113,S=1,W=2,ie=3,Q=4;function J(D,we){return D.msg=l[we],we}function G(D){return(D<<1)-(4<D?9:0)}function H(D){for(var we=D.length;0<=--we;)D[we]=0}function V(D){var we=D.state,he=we.pending;he>D.avail_out&&(he=D.avail_out),he!==0&&(o.arraySet(D.output,we.pending_buf,we.pending_out,he,D.next_out),D.next_out+=he,we.pending_out+=he,D.total_out+=he,D.avail_out-=he,we.pending-=he,we.pending===0&&(we.pending_out=0))}function K(D,we){i._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,we),D.block_start=D.strstart,V(D.strm)}function pe(D,we){D.pending_buf[D.pending++]=we}function ce(D,we){D.pending_buf[D.pending++]=we>>>8&255,D.pending_buf[D.pending++]=255&we}function se(D,we){var he,q,j=D.max_chain_length,oe=D.strstart,ke=D.prev_length,Fe=D.nice_match,de=D.strstart>D.w_size-P?D.strstart-(D.w_size-P):0,We=D.window,tt=D.w_mask,Ke=D.prev,mt=D.strstart+A,bn=We[oe+ke-1],cn=We[oe+ke];D.prev_length>=D.good_match&&(j>>=2),Fe>D.lookahead&&(Fe=D.lookahead);do if(We[(he=we)+ke]===cn&&We[he+ke-1]===bn&&We[he]===We[oe]&&We[++he]===We[oe+1]){oe+=2,he++;do;while(We[++oe]===We[++he]&&We[++oe]===We[++he]&&We[++oe]===We[++he]&&We[++oe]===We[++he]&&We[++oe]===We[++he]&&We[++oe]===We[++he]&&We[++oe]===We[++he]&&We[++oe]===We[++he]&&oe<mt);if(q=A-(mt-oe),oe=mt-A,ke<q){if(D.match_start=we,Fe<=(ke=q))break;bn=We[oe+ke-1],cn=We[oe+ke]}}while((we=Ke[we&tt])>de&&--j!=0);return ke<=D.lookahead?ke:D.lookahead}function ye(D){var we,he,q,j,oe,ke,Fe,de,We,tt,Ke=D.w_size;do{if(j=D.window_size-D.lookahead-D.strstart,D.strstart>=Ke+(Ke-P)){for(o.arraySet(D.window,D.window,Ke,Ke,0),D.match_start-=Ke,D.strstart-=Ke,D.block_start-=Ke,we=he=D.hash_size;q=D.head[--we],D.head[we]=Ke<=q?q-Ke:0,--he;);for(we=he=Ke;q=D.prev[--we],D.prev[we]=Ke<=q?q-Ke:0,--he;);j+=Ke}if(D.strm.avail_in===0)break;if(ke=D.strm,Fe=D.window,de=D.strstart+D.lookahead,We=j,tt=void 0,tt=ke.avail_in,We<tt&&(tt=We),he=tt===0?0:(ke.avail_in-=tt,o.arraySet(Fe,ke.input,ke.next_in,tt,de),ke.state.wrap===1?ke.adler=s(ke.adler,Fe,tt,de):ke.state.wrap===2&&(ke.adler=a(ke.adler,Fe,tt,de)),ke.next_in+=tt,ke.total_in+=tt,tt),D.lookahead+=he,D.lookahead+D.insert>=I)for(oe=D.strstart-D.insert,D.ins_h=D.window[oe],D.ins_h=(D.ins_h<<D.hash_shift^D.window[oe+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[oe+I-1])&D.hash_mask,D.prev[oe&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=oe,oe++,D.insert--,!(D.lookahead+D.insert<I)););}while(D.lookahead<P&&D.strm.avail_in!==0)}function Re(D,we){for(var he,q;;){if(D.lookahead<P){if(ye(D),D.lookahead<P&&we===c)return S;if(D.lookahead===0)break}if(he=0,D.lookahead>=I&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+I-1])&D.hash_mask,he=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),he!==0&&D.strstart-he<=D.w_size-P&&(D.match_length=se(D,he)),D.match_length>=I)if(q=i._tr_tally(D,D.strstart-D.match_start,D.match_length-I),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=I){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+I-1])&D.hash_mask,he=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else q=i._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(q&&(K(D,!1),D.strm.avail_out===0))return S}return D.insert=D.strstart<I-1?D.strstart:I-1,we===u?(K(D,!0),D.strm.avail_out===0?ie:Q):D.last_lit&&(K(D,!1),D.strm.avail_out===0)?S:W}function Oe(D,we){for(var he,q,j;;){if(D.lookahead<P){if(ye(D),D.lookahead<P&&we===c)return S;if(D.lookahead===0)break}if(he=0,D.lookahead>=I&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+I-1])&D.hash_mask,he=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=I-1,he!==0&&D.prev_length<D.max_lazy_match&&D.strstart-he<=D.w_size-P&&(D.match_length=se(D,he),D.match_length<=5&&(D.strategy===1||D.match_length===I&&4096<D.strstart-D.match_start)&&(D.match_length=I-1)),D.prev_length>=I&&D.match_length<=D.prev_length){for(j=D.strstart+D.lookahead-I,q=i._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-I),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=j&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+I-1])&D.hash_mask,he=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=I-1,D.strstart++,q&&(K(D,!1),D.strm.avail_out===0))return S}else if(D.match_available){if((q=i._tr_tally(D,0,D.window[D.strstart-1]))&&K(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return S}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(q=i._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<I-1?D.strstart:I-1,we===u?(K(D,!0),D.strm.avail_out===0?ie:Q):D.last_lit&&(K(D,!1),D.strm.avail_out===0)?S:W}function Ce(D,we,he,q,j){this.good_length=D,this.max_lazy=we,this.nice_length=he,this.max_chain=q,this.func=j}function et(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*y+1)),this.bl_tree=new o.Buf16(2*(2*_+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(T+1),this.heap=new o.Buf16(2*w+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qe(D){var we;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=m,(we=D.state).pending=0,we.pending_out=0,we.wrap<0&&(we.wrap=-we.wrap),we.status=we.wrap?N:B,D.adler=we.wrap===2?0:1,we.last_flush=c,i._tr_init(we),d):J(D,p)}function xt(D){var we=qe(D);return we===d&&function(he){he.window_size=2*he.w_size,H(he.head),he.max_lazy_match=r[he.level].max_lazy,he.good_match=r[he.level].good_length,he.nice_match=r[he.level].nice_length,he.max_chain_length=r[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=I-1,he.match_available=0,he.ins_h=0}(D.state),we}function St(D,we,he,q,j,oe){if(!D)return p;var ke=1;if(we===h&&(we=6),q<0?(ke=0,q=-q):15<q&&(ke=2,q-=16),j<1||v<j||he!==g||q<8||15<q||we<0||9<we||oe<0||f<oe)return J(D,p);q===8&&(q=9);var Fe=new et;return(D.state=Fe).strm=D,Fe.wrap=ke,Fe.gzhead=null,Fe.w_bits=q,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=j+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+I-1)/I),Fe.window=new o.Buf8(2*Fe.w_size),Fe.head=new o.Buf16(Fe.hash_size),Fe.prev=new o.Buf16(Fe.w_size),Fe.lit_bufsize=1<<j+6,Fe.pending_buf_size=4*Fe.lit_bufsize,Fe.pending_buf=new o.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=we,Fe.strategy=oe,Fe.method=he,xt(D)}r=[new Ce(0,0,0,0,function(D,we){var he=65535;for(he>D.pending_buf_size-5&&(he=D.pending_buf_size-5);;){if(D.lookahead<=1){if(ye(D),D.lookahead===0&&we===c)return S;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var q=D.block_start+he;if((D.strstart===0||D.strstart>=q)&&(D.lookahead=D.strstart-q,D.strstart=q,K(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-P&&(K(D,!1),D.strm.avail_out===0))return S}return D.insert=0,we===u?(K(D,!0),D.strm.avail_out===0?ie:Q):(D.strstart>D.block_start&&(K(D,!1),D.strm.avail_out),S)}),new Ce(4,4,8,4,Re),new Ce(4,5,16,8,Re),new Ce(4,6,32,32,Re),new Ce(4,4,16,16,Oe),new Ce(8,16,32,32,Oe),new Ce(8,16,128,128,Oe),new Ce(8,32,128,256,Oe),new Ce(32,128,258,1024,Oe),new Ce(32,258,258,4096,Oe)],e.deflateInit=function(D,we){return St(D,we,g,15,8,0)},e.deflateInit2=St,e.deflateReset=xt,e.deflateResetKeep=qe,e.deflateSetHeader=function(D,we){return D&&D.state?D.state.wrap!==2?p:(D.state.gzhead=we,d):p},e.deflate=function(D,we){var he,q,j,oe;if(!D||!D.state||5<we||we<0)return D?J(D,p):p;if(q=D.state,!D.output||!D.input&&D.avail_in!==0||q.status===666&&we!==u)return J(D,D.avail_out===0?-5:p);if(q.strm=D,he=q.last_flush,q.last_flush=we,q.status===N)if(q.wrap===2)D.adler=0,pe(q,31),pe(q,139),pe(q,8),q.gzhead?(pe(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),pe(q,255&q.gzhead.time),pe(q,q.gzhead.time>>8&255),pe(q,q.gzhead.time>>16&255),pe(q,q.gzhead.time>>24&255),pe(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),pe(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(pe(q,255&q.gzhead.extra.length),pe(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(D.adler=a(D.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(pe(q,0),pe(q,0),pe(q,0),pe(q,0),pe(q,0),pe(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),pe(q,3),q.status=B);else{var ke=g+(q.w_bits-8<<4)<<8;ke|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(ke|=32),ke+=31-ke%31,q.status=B,ce(q,ke),q.strstart!==0&&(ce(q,D.adler>>>16),ce(q,65535&D.adler)),D.adler=1}if(q.status===69)if(q.gzhead.extra){for(j=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>j&&(D.adler=a(D.adler,q.pending_buf,q.pending-j,j)),V(D),j=q.pending,q.pending!==q.pending_buf_size));)pe(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>j&&(D.adler=a(D.adler,q.pending_buf,q.pending-j,j)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){j=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>j&&(D.adler=a(D.adler,q.pending_buf,q.pending-j,j)),V(D),j=q.pending,q.pending===q.pending_buf_size)){oe=1;break}oe=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,pe(q,oe)}while(oe!==0);q.gzhead.hcrc&&q.pending>j&&(D.adler=a(D.adler,q.pending_buf,q.pending-j,j)),oe===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){j=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>j&&(D.adler=a(D.adler,q.pending_buf,q.pending-j,j)),V(D),j=q.pending,q.pending===q.pending_buf_size)){oe=1;break}oe=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,pe(q,oe)}while(oe!==0);q.gzhead.hcrc&&q.pending>j&&(D.adler=a(D.adler,q.pending_buf,q.pending-j,j)),oe===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&V(D),q.pending+2<=q.pending_buf_size&&(pe(q,255&D.adler),pe(q,D.adler>>8&255),D.adler=0,q.status=B)):q.status=B),q.pending!==0){if(V(D),D.avail_out===0)return q.last_flush=-1,d}else if(D.avail_in===0&&G(we)<=G(he)&&we!==u)return J(D,-5);if(q.status===666&&D.avail_in!==0)return J(D,-5);if(D.avail_in!==0||q.lookahead!==0||we!==c&&q.status!==666){var Fe=q.strategy===2?function(de,We){for(var tt;;){if(de.lookahead===0&&(ye(de),de.lookahead===0)){if(We===c)return S;break}if(de.match_length=0,tt=i._tr_tally(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++,tt&&(K(de,!1),de.strm.avail_out===0))return S}return de.insert=0,We===u?(K(de,!0),de.strm.avail_out===0?ie:Q):de.last_lit&&(K(de,!1),de.strm.avail_out===0)?S:W}(q,we):q.strategy===3?function(de,We){for(var tt,Ke,mt,bn,cn=de.window;;){if(de.lookahead<=A){if(ye(de),de.lookahead<=A&&We===c)return S;if(de.lookahead===0)break}if(de.match_length=0,de.lookahead>=I&&0<de.strstart&&(Ke=cn[mt=de.strstart-1])===cn[++mt]&&Ke===cn[++mt]&&Ke===cn[++mt]){bn=de.strstart+A;do;while(Ke===cn[++mt]&&Ke===cn[++mt]&&Ke===cn[++mt]&&Ke===cn[++mt]&&Ke===cn[++mt]&&Ke===cn[++mt]&&Ke===cn[++mt]&&Ke===cn[++mt]&&mt<bn);de.match_length=A-(bn-mt),de.match_length>de.lookahead&&(de.match_length=de.lookahead)}if(de.match_length>=I?(tt=i._tr_tally(de,1,de.match_length-I),de.lookahead-=de.match_length,de.strstart+=de.match_length,de.match_length=0):(tt=i._tr_tally(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++),tt&&(K(de,!1),de.strm.avail_out===0))return S}return de.insert=0,We===u?(K(de,!0),de.strm.avail_out===0?ie:Q):de.last_lit&&(K(de,!1),de.strm.avail_out===0)?S:W}(q,we):r[q.level].func(q,we);if(Fe!==ie&&Fe!==Q||(q.status=666),Fe===S||Fe===ie)return D.avail_out===0&&(q.last_flush=-1),d;if(Fe===W&&(we===1?i._tr_align(q):we!==5&&(i._tr_stored_block(q,0,0,!1),we===3&&(H(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),V(D),D.avail_out===0))return q.last_flush=-1,d}return we!==u?d:q.wrap<=0?1:(q.wrap===2?(pe(q,255&D.adler),pe(q,D.adler>>8&255),pe(q,D.adler>>16&255),pe(q,D.adler>>24&255),pe(q,255&D.total_in),pe(q,D.total_in>>8&255),pe(q,D.total_in>>16&255),pe(q,D.total_in>>24&255)):(ce(q,D.adler>>>16),ce(q,65535&D.adler)),V(D),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?d:1)},e.deflateEnd=function(D){var we;return D&&D.state?(we=D.state.status)!==N&&we!==69&&we!==73&&we!==91&&we!==103&&we!==B&&we!==666?J(D,p):(D.state=null,we===B?J(D,-3):d):p},e.deflateSetDictionary=function(D,we){var he,q,j,oe,ke,Fe,de,We,tt=we.length;if(!D||!D.state||(oe=(he=D.state).wrap)===2||oe===1&&he.status!==N||he.lookahead)return p;for(oe===1&&(D.adler=s(D.adler,we,tt,0)),he.wrap=0,tt>=he.w_size&&(oe===0&&(H(he.head),he.strstart=0,he.block_start=0,he.insert=0),We=new o.Buf8(he.w_size),o.arraySet(We,we,tt-he.w_size,he.w_size,0),we=We,tt=he.w_size),ke=D.avail_in,Fe=D.next_in,de=D.input,D.avail_in=tt,D.next_in=0,D.input=we,ye(he);he.lookahead>=I;){for(q=he.strstart,j=he.lookahead-(I-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[q+I-1])&he.hash_mask,he.prev[q&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=q,q++,--j;);he.strstart=q,he.lookahead=I-1,ye(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=I-1,he.match_available=0,D.next_in=Fe,D.input=de,D.avail_in=ke,he.wrap=oe,d},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,e){"use strict";n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,e){"use strict";n.exports=function(r,o){var i,s,a,l,c,u,d,p,h,f,m,g,v,w,y,_,k,T,I,A,P,N,B,S,W;i=r.state,s=r.next_in,S=r.input,a=s+(r.avail_in-5),l=r.next_out,W=r.output,c=l-(o-r.avail_out),u=l+(r.avail_out-257),d=i.dmax,p=i.wsize,h=i.whave,f=i.wnext,m=i.window,g=i.hold,v=i.bits,w=i.lencode,y=i.distcode,_=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{v<15&&(g+=S[s++]<<v,v+=8,g+=S[s++]<<v,v+=8),T=w[g&_];t:for(;;){if(g>>>=I=T>>>24,v-=I,(I=T>>>16&255)===0)W[l++]=65535&T;else{if(!(16&I)){if((64&I)==0){T=w[(65535&T)+(g&(1<<I)-1)];continue t}if(32&I){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}A=65535&T,(I&=15)&&(v<I&&(g+=S[s++]<<v,v+=8),A+=g&(1<<I)-1,g>>>=I,v-=I),v<15&&(g+=S[s++]<<v,v+=8,g+=S[s++]<<v,v+=8),T=y[g&k];n:for(;;){if(g>>>=I=T>>>24,v-=I,!(16&(I=T>>>16&255))){if((64&I)==0){T=y[(65535&T)+(g&(1<<I)-1)];continue n}r.msg="invalid distance code",i.mode=30;break e}if(P=65535&T,v<(I&=15)&&(g+=S[s++]<<v,(v+=8)<I&&(g+=S[s++]<<v,v+=8)),d<(P+=g&(1<<I)-1)){r.msg="invalid distance too far back",i.mode=30;break e}if(g>>>=I,v-=I,(I=l-c)<P){if(h<(I=P-I)&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(B=m,(N=0)===f){if(N+=p-I,I<A){for(A-=I;W[l++]=m[N++],--I;);N=l-P,B=W}}else if(f<I){if(N+=p+f-I,(I-=f)<A){for(A-=I;W[l++]=m[N++],--I;);if(N=0,f<A){for(A-=I=f;W[l++]=m[N++],--I;);N=l-P,B=W}}}else if(N+=f-I,I<A){for(A-=I;W[l++]=m[N++],--I;);N=l-P,B=W}for(;2<A;)W[l++]=B[N++],W[l++]=B[N++],W[l++]=B[N++],A-=3;A&&(W[l++]=B[N++],1<A&&(W[l++]=B[N++]))}else{for(N=l-P;W[l++]=W[N++],W[l++]=W[N++],W[l++]=W[N++],2<(A-=3););A&&(W[l++]=W[N++],1<A&&(W[l++]=W[N++]))}break}}break}}while(s<a&&l<u);s-=A=v>>3,g&=(1<<(v-=A<<3))-1,r.next_in=s,r.next_out=l,r.avail_in=s<a?a-s+5:5-(s-a),r.avail_out=l<u?u-l+257:257-(l-u),i.hold=g,i.bits=v}},{}],49:[function(t,n,e){"use strict";var r=t("../utils/common"),o=t("./adler32"),i=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),l=1,c=2,u=0,d=-2,p=1,h=852,f=592;function m(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(N){var B;return N&&N.state?(B=N.state,N.total_in=N.total_out=B.total=0,N.msg="",B.wrap&&(N.adler=1&B.wrap),B.mode=p,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new r.Buf32(h),B.distcode=B.distdyn=new r.Buf32(f),B.sane=1,B.back=-1,u):d}function w(N){var B;return N&&N.state?((B=N.state).wsize=0,B.whave=0,B.wnext=0,v(N)):d}function y(N,B){var S,W;return N&&N.state?(W=N.state,B<0?(S=0,B=-B):(S=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?d:(W.window!==null&&W.wbits!==B&&(W.window=null),W.wrap=S,W.wbits=B,w(N))):d}function _(N,B){var S,W;return N?(W=new g,(N.state=W).window=null,(S=y(N,B))!==u&&(N.state=null),S):d}var k,T,I=!0;function A(N){if(I){var B;for(k=new r.Buf32(512),T=new r.Buf32(32),B=0;B<144;)N.lens[B++]=8;for(;B<256;)N.lens[B++]=9;for(;B<280;)N.lens[B++]=7;for(;B<288;)N.lens[B++]=8;for(a(l,N.lens,0,288,k,0,N.work,{bits:9}),B=0;B<32;)N.lens[B++]=5;a(c,N.lens,0,32,T,0,N.work,{bits:5}),I=!1}N.lencode=k,N.lenbits=9,N.distcode=T,N.distbits=5}function P(N,B,S,W){var ie,Q=N.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new r.Buf8(Q.wsize)),W>=Q.wsize?(r.arraySet(Q.window,B,S-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(W<(ie=Q.wsize-Q.wnext)&&(ie=W),r.arraySet(Q.window,B,S-W,ie,Q.wnext),(W-=ie)?(r.arraySet(Q.window,B,S-W,W,0),Q.wnext=W,Q.whave=Q.wsize):(Q.wnext+=ie,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=ie))),0}e.inflateReset=w,e.inflateReset2=y,e.inflateResetKeep=v,e.inflateInit=function(N){return _(N,15)},e.inflateInit2=_,e.inflate=function(N,B){var S,W,ie,Q,J,G,H,V,K,pe,ce,se,ye,Re,Oe,Ce,et,qe,xt,St,D,we,he,q,j=0,oe=new r.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return d;(S=N.state).mode===12&&(S.mode=13),J=N.next_out,ie=N.output,H=N.avail_out,Q=N.next_in,W=N.input,G=N.avail_in,V=S.hold,K=S.bits,pe=G,ce=H,we=u;e:for(;;)switch(S.mode){case p:if(S.wrap===0){S.mode=13;break}for(;K<16;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if(2&S.wrap&&V===35615){oe[S.check=0]=255&V,oe[1]=V>>>8&255,S.check=i(S.check,oe,2,0),K=V=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&V)<<8)+(V>>8))%31){N.msg="incorrect header check",S.mode=30;break}if((15&V)!=8){N.msg="unknown compression method",S.mode=30;break}if(K-=4,D=8+(15&(V>>>=4)),S.wbits===0)S.wbits=D;else if(D>S.wbits){N.msg="invalid window size",S.mode=30;break}S.dmax=1<<D,N.adler=S.check=1,S.mode=512&V?10:12,K=V=0;break;case 2:for(;K<16;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if(S.flags=V,(255&S.flags)!=8){N.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){N.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=V>>8&1),512&S.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,S.check=i(S.check,oe,2,0)),K=V=0,S.mode=3;case 3:for(;K<32;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}S.head&&(S.head.time=V),512&S.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,oe[2]=V>>>16&255,oe[3]=V>>>24&255,S.check=i(S.check,oe,4,0)),K=V=0,S.mode=4;case 4:for(;K<16;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}S.head&&(S.head.xflags=255&V,S.head.os=V>>8),512&S.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,S.check=i(S.check,oe,2,0)),K=V=0,S.mode=5;case 5:if(1024&S.flags){for(;K<16;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}S.length=V,S.head&&(S.head.extra_len=V),512&S.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,S.check=i(S.check,oe,2,0)),K=V=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(G<(se=S.length)&&(se=G),se&&(S.head&&(D=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),r.arraySet(S.head.extra,W,Q,se,D)),512&S.flags&&(S.check=i(S.check,W,se,Q)),G-=se,Q+=se,S.length-=se),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(G===0)break e;for(se=0;D=W[Q+se++],S.head&&D&&S.length<65536&&(S.head.name+=String.fromCharCode(D)),D&&se<G;);if(512&S.flags&&(S.check=i(S.check,W,se,Q)),G-=se,Q+=se,D)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(G===0)break e;for(se=0;D=W[Q+se++],S.head&&D&&S.length<65536&&(S.head.comment+=String.fromCharCode(D)),D&&se<G;);if(512&S.flags&&(S.check=i(S.check,W,se,Q)),G-=se,Q+=se,D)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;K<16;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if(V!==(65535&S.check)){N.msg="header crc mismatch",S.mode=30;break}K=V=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),N.adler=S.check=0,S.mode=12;break;case 10:for(;K<32;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}N.adler=S.check=m(V),K=V=0,S.mode=11;case 11:if(S.havedict===0)return N.next_out=J,N.avail_out=H,N.next_in=Q,N.avail_in=G,S.hold=V,S.bits=K,2;N.adler=S.check=1,S.mode=12;case 12:if(B===5||B===6)break e;case 13:if(S.last){V>>>=7&K,K-=7&K,S.mode=27;break}for(;K<3;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}switch(S.last=1&V,K-=1,3&(V>>>=1)){case 0:S.mode=14;break;case 1:if(A(S),S.mode=20,B!==6)break;V>>>=2,K-=2;break e;case 2:S.mode=17;break;case 3:N.msg="invalid block type",S.mode=30}V>>>=2,K-=2;break;case 14:for(V>>>=7&K,K-=7&K;K<32;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if((65535&V)!=(V>>>16^65535)){N.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&V,K=V=0,S.mode=15,B===6)break e;case 15:S.mode=16;case 16:if(se=S.length){if(G<se&&(se=G),H<se&&(se=H),se===0)break e;r.arraySet(ie,W,Q,se,J),G-=se,Q+=se,H-=se,J+=se,S.length-=se;break}S.mode=12;break;case 17:for(;K<14;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if(S.nlen=257+(31&V),V>>>=5,K-=5,S.ndist=1+(31&V),V>>>=5,K-=5,S.ncode=4+(15&V),V>>>=4,K-=4,286<S.nlen||30<S.ndist){N.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;K<3;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}S.lens[ke[S.have++]]=7&V,V>>>=3,K-=3}for(;S.have<19;)S.lens[ke[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,he={bits:S.lenbits},we=a(0,S.lens,0,19,S.lencode,0,S.work,he),S.lenbits=he.bits,we){N.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Ce=(j=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,et=65535&j,!((Oe=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if(et<16)V>>>=Oe,K-=Oe,S.lens[S.have++]=et;else{if(et===16){for(q=Oe+2;K<q;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if(V>>>=Oe,K-=Oe,S.have===0){N.msg="invalid bit length repeat",S.mode=30;break}D=S.lens[S.have-1],se=3+(3&V),V>>>=2,K-=2}else if(et===17){for(q=Oe+3;K<q;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}K-=Oe,D=0,se=3+(7&(V>>>=Oe)),V>>>=3,K-=3}else{for(q=Oe+7;K<q;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}K-=Oe,D=0,se=11+(127&(V>>>=Oe)),V>>>=7,K-=7}if(S.have+se>S.nlen+S.ndist){N.msg="invalid bit length repeat",S.mode=30;break}for(;se--;)S.lens[S.have++]=D}}if(S.mode===30)break;if(S.lens[256]===0){N.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,he={bits:S.lenbits},we=a(l,S.lens,0,S.nlen,S.lencode,0,S.work,he),S.lenbits=he.bits,we){N.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,he={bits:S.distbits},we=a(c,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,he),S.distbits=he.bits,we){N.msg="invalid distances set",S.mode=30;break}if(S.mode=20,B===6)break e;case 20:S.mode=21;case 21:if(6<=G&&258<=H){N.next_out=J,N.avail_out=H,N.next_in=Q,N.avail_in=G,S.hold=V,S.bits=K,s(N,ce),J=N.next_out,ie=N.output,H=N.avail_out,Q=N.next_in,W=N.input,G=N.avail_in,V=S.hold,K=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Ce=(j=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,et=65535&j,!((Oe=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if(Ce&&(240&Ce)==0){for(qe=Oe,xt=Ce,St=et;Ce=(j=S.lencode[St+((V&(1<<qe+xt)-1)>>qe)])>>>16&255,et=65535&j,!(qe+(Oe=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}V>>>=qe,K-=qe,S.back+=qe}if(V>>>=Oe,K-=Oe,S.back+=Oe,S.length=et,Ce===0){S.mode=26;break}if(32&Ce){S.back=-1,S.mode=12;break}if(64&Ce){N.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Ce,S.mode=22;case 22:if(S.extra){for(q=S.extra;K<q;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}S.length+=V&(1<<S.extra)-1,V>>>=S.extra,K-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Ce=(j=S.distcode[V&(1<<S.distbits)-1])>>>16&255,et=65535&j,!((Oe=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if((240&Ce)==0){for(qe=Oe,xt=Ce,St=et;Ce=(j=S.distcode[St+((V&(1<<qe+xt)-1)>>qe)])>>>16&255,et=65535&j,!(qe+(Oe=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}V>>>=qe,K-=qe,S.back+=qe}if(V>>>=Oe,K-=Oe,S.back+=Oe,64&Ce){N.msg="invalid distance code",S.mode=30;break}S.offset=et,S.extra=15&Ce,S.mode=24;case 24:if(S.extra){for(q=S.extra;K<q;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}S.offset+=V&(1<<S.extra)-1,V>>>=S.extra,K-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){N.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(H===0)break e;if(se=ce-H,S.offset>se){if((se=S.offset-se)>S.whave&&S.sane){N.msg="invalid distance too far back",S.mode=30;break}ye=se>S.wnext?(se-=S.wnext,S.wsize-se):S.wnext-se,se>S.length&&(se=S.length),Re=S.window}else Re=ie,ye=J-S.offset,se=S.length;for(H<se&&(se=H),H-=se,S.length-=se;ie[J++]=Re[ye++],--se;);S.length===0&&(S.mode=21);break;case 26:if(H===0)break e;ie[J++]=S.length,H--,S.mode=21;break;case 27:if(S.wrap){for(;K<32;){if(G===0)break e;G--,V|=W[Q++]<<K,K+=8}if(ce-=H,N.total_out+=ce,S.total+=ce,ce&&(N.adler=S.check=S.flags?i(S.check,ie,ce,J-ce):o(S.check,ie,ce,J-ce)),ce=H,(S.flags?V:m(V))!==S.check){N.msg="incorrect data check",S.mode=30;break}K=V=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;K<32;){if(G===0)break e;G--,V+=W[Q++]<<K,K+=8}if(V!==(4294967295&S.total)){N.msg="incorrect length check",S.mode=30;break}K=V=0}S.mode=29;case 29:we=1;break e;case 30:we=-3;break e;case 31:return-4;case 32:default:return d}return N.next_out=J,N.avail_out=H,N.next_in=Q,N.avail_in=G,S.hold=V,S.bits=K,(S.wsize||ce!==N.avail_out&&S.mode<30&&(S.mode<27||B!==4))&&P(N,N.output,N.next_out,ce-N.avail_out)?(S.mode=31,-4):(pe-=N.avail_in,ce-=N.avail_out,N.total_in+=pe,N.total_out+=ce,S.total+=ce,S.wrap&&ce&&(N.adler=S.check=S.flags?i(S.check,ie,ce,N.next_out-ce):o(S.check,ie,ce,N.next_out-ce)),N.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(pe==0&&ce===0||B===4)&&we===u&&(we=-5),we)},e.inflateEnd=function(N){if(!N||!N.state)return d;var B=N.state;return B.window&&(B.window=null),N.state=null,u},e.inflateGetHeader=function(N,B){var S;return N&&N.state?(2&(S=N.state).wrap)==0?d:((S.head=B).done=!1,u):d},e.inflateSetDictionary=function(N,B){var S,W=B.length;return N&&N.state?(S=N.state).wrap!==0&&S.mode!==11?d:S.mode===11&&o(1,B,W,0)!==S.check?-3:P(N,B,W,W)?(S.mode=31,-4):(S.havedict=1,u):d},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,e){"use strict";var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,c,u,d,p,h,f,m){var g,v,w,y,_,k,T,I,A,P=m.bits,N=0,B=0,S=0,W=0,ie=0,Q=0,J=0,G=0,H=0,V=0,K=null,pe=0,ce=new r.Buf16(16),se=new r.Buf16(16),ye=null,Re=0;for(N=0;N<=15;N++)ce[N]=0;for(B=0;B<d;B++)ce[c[u+B]]++;for(ie=P,W=15;1<=W&&ce[W]===0;W--);if(W<ie&&(ie=W),W===0)return p[h++]=20971520,p[h++]=20971520,m.bits=1,0;for(S=1;S<W&&ce[S]===0;S++);for(ie<S&&(ie=S),N=G=1;N<=15;N++)if(G<<=1,(G-=ce[N])<0)return-1;if(0<G&&(l===0||W!==1))return-1;for(se[1]=0,N=1;N<15;N++)se[N+1]=se[N]+ce[N];for(B=0;B<d;B++)c[u+B]!==0&&(f[se[c[u+B]]++]=B);if(k=l===0?(K=ye=f,19):l===1?(K=o,pe-=257,ye=i,Re-=257,256):(K=s,ye=a,-1),N=S,_=h,J=B=V=0,w=-1,y=(H=1<<(Q=ie))-1,l===1&&852<H||l===2&&592<H)return 1;for(;;){for(T=N-J,A=f[B]<k?(I=0,f[B]):f[B]>k?(I=ye[Re+f[B]],K[pe+f[B]]):(I=96,0),g=1<<N-J,S=v=1<<Q;p[_+(V>>J)+(v-=g)]=T<<24|I<<16|A|0,v!==0;);for(g=1<<N-1;V&g;)g>>=1;if(g!==0?(V&=g-1,V+=g):V=0,B++,--ce[N]==0){if(N===W)break;N=c[u+f[B]]}if(ie<N&&(V&y)!==w){for(J===0&&(J=ie),_+=S,G=1<<(Q=N-J);Q+J<W&&!((G-=ce[Q+J])<=0);)Q++,G<<=1;if(H+=1<<Q,l===1&&852<H||l===2&&592<H)return 1;p[w=V&y]=ie<<24|Q<<16|_-h|0}}return V!==0&&(p[_+V]=N-J<<24|64<<16|0),m.bits=ie,0}},{"../utils/common":41}],51:[function(t,n,e){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,e){"use strict";var r=t("../utils/common"),o=0,i=1;function s(j){for(var oe=j.length;0<=--oe;)j[oe]=0}var a=0,l=29,c=256,u=c+1+l,d=30,p=19,h=2*u+1,f=15,m=16,g=7,v=256,w=16,y=17,_=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=new Array(2*(u+2));s(P);var N=new Array(2*d);s(N);var B=new Array(512);s(B);var S=new Array(256);s(S);var W=new Array(l);s(W);var ie,Q,J,G=new Array(d);function H(j,oe,ke,Fe,de){this.static_tree=j,this.extra_bits=oe,this.extra_base=ke,this.elems=Fe,this.max_length=de,this.has_stree=j&&j.length}function V(j,oe){this.dyn_tree=j,this.max_code=0,this.stat_desc=oe}function K(j){return j<256?B[j]:B[256+(j>>>7)]}function pe(j,oe){j.pending_buf[j.pending++]=255&oe,j.pending_buf[j.pending++]=oe>>>8&255}function ce(j,oe,ke){j.bi_valid>m-ke?(j.bi_buf|=oe<<j.bi_valid&65535,pe(j,j.bi_buf),j.bi_buf=oe>>m-j.bi_valid,j.bi_valid+=ke-m):(j.bi_buf|=oe<<j.bi_valid&65535,j.bi_valid+=ke)}function se(j,oe,ke){ce(j,ke[2*oe],ke[2*oe+1])}function ye(j,oe){for(var ke=0;ke|=1&j,j>>>=1,ke<<=1,0<--oe;);return ke>>>1}function Re(j,oe,ke){var Fe,de,We=new Array(f+1),tt=0;for(Fe=1;Fe<=f;Fe++)We[Fe]=tt=tt+ke[Fe-1]<<1;for(de=0;de<=oe;de++){var Ke=j[2*de+1];Ke!==0&&(j[2*de]=ye(We[Ke]++,Ke))}}function Oe(j){var oe;for(oe=0;oe<u;oe++)j.dyn_ltree[2*oe]=0;for(oe=0;oe<d;oe++)j.dyn_dtree[2*oe]=0;for(oe=0;oe<p;oe++)j.bl_tree[2*oe]=0;j.dyn_ltree[2*v]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function Ce(j){8<j.bi_valid?pe(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function et(j,oe,ke,Fe){var de=2*oe,We=2*ke;return j[de]<j[We]||j[de]===j[We]&&Fe[oe]<=Fe[ke]}function qe(j,oe,ke){for(var Fe=j.heap[ke],de=ke<<1;de<=j.heap_len&&(de<j.heap_len&&et(oe,j.heap[de+1],j.heap[de],j.depth)&&de++,!et(oe,Fe,j.heap[de],j.depth));)j.heap[ke]=j.heap[de],ke=de,de<<=1;j.heap[ke]=Fe}function xt(j,oe,ke){var Fe,de,We,tt,Ke=0;if(j.last_lit!==0)for(;Fe=j.pending_buf[j.d_buf+2*Ke]<<8|j.pending_buf[j.d_buf+2*Ke+1],de=j.pending_buf[j.l_buf+Ke],Ke++,Fe===0?se(j,de,oe):(se(j,(We=S[de])+c+1,oe),(tt=k[We])!==0&&ce(j,de-=W[We],tt),se(j,We=K(--Fe),ke),(tt=T[We])!==0&&ce(j,Fe-=G[We],tt)),Ke<j.last_lit;);se(j,v,oe)}function St(j,oe){var ke,Fe,de,We=oe.dyn_tree,tt=oe.stat_desc.static_tree,Ke=oe.stat_desc.has_stree,mt=oe.stat_desc.elems,bn=-1;for(j.heap_len=0,j.heap_max=h,ke=0;ke<mt;ke++)We[2*ke]!==0?(j.heap[++j.heap_len]=bn=ke,j.depth[ke]=0):We[2*ke+1]=0;for(;j.heap_len<2;)We[2*(de=j.heap[++j.heap_len]=bn<2?++bn:0)]=1,j.depth[de]=0,j.opt_len--,Ke&&(j.static_len-=tt[2*de+1]);for(oe.max_code=bn,ke=j.heap_len>>1;1<=ke;ke--)qe(j,We,ke);for(de=mt;ke=j.heap[1],j.heap[1]=j.heap[j.heap_len--],qe(j,We,1),Fe=j.heap[1],j.heap[--j.heap_max]=ke,j.heap[--j.heap_max]=Fe,We[2*de]=We[2*ke]+We[2*Fe],j.depth[de]=(j.depth[ke]>=j.depth[Fe]?j.depth[ke]:j.depth[Fe])+1,We[2*ke+1]=We[2*Fe+1]=de,j.heap[1]=de++,qe(j,We,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],function(cn,ho){var xs,Ei,Ju,Tr,E2,ih,tl=ho.dyn_tree,tC=ho.max_code,rfe=ho.stat_desc.static_tree,ofe=ho.stat_desc.has_stree,ife=ho.stat_desc.extra_bits,l9=ho.stat_desc.extra_base,ly=ho.stat_desc.max_length,nC=0;for(Tr=0;Tr<=f;Tr++)cn.bl_count[Tr]=0;for(tl[2*cn.heap[cn.heap_max]+1]=0,xs=cn.heap_max+1;xs<h;xs++)ly<(Tr=tl[2*tl[2*(Ei=cn.heap[xs])+1]+1]+1)&&(Tr=ly,nC++),tl[2*Ei+1]=Tr,tC<Ei||(cn.bl_count[Tr]++,E2=0,l9<=Ei&&(E2=ife[Ei-l9]),ih=tl[2*Ei],cn.opt_len+=ih*(Tr+E2),ofe&&(cn.static_len+=ih*(rfe[2*Ei+1]+E2)));if(nC!==0){do{for(Tr=ly-1;cn.bl_count[Tr]===0;)Tr--;cn.bl_count[Tr]--,cn.bl_count[Tr+1]+=2,cn.bl_count[ly]--,nC-=2}while(0<nC);for(Tr=ly;Tr!==0;Tr--)for(Ei=cn.bl_count[Tr];Ei!==0;)tC<(Ju=cn.heap[--xs])||(tl[2*Ju+1]!==Tr&&(cn.opt_len+=(Tr-tl[2*Ju+1])*tl[2*Ju],tl[2*Ju+1]=Tr),Ei--)}}(j,oe),Re(We,bn,j.bl_count)}function D(j,oe,ke){var Fe,de,We=-1,tt=oe[1],Ke=0,mt=7,bn=4;for(tt===0&&(mt=138,bn=3),oe[2*(ke+1)+1]=65535,Fe=0;Fe<=ke;Fe++)de=tt,tt=oe[2*(Fe+1)+1],++Ke<mt&&de===tt||(Ke<bn?j.bl_tree[2*de]+=Ke:de!==0?(de!==We&&j.bl_tree[2*de]++,j.bl_tree[2*w]++):Ke<=10?j.bl_tree[2*y]++:j.bl_tree[2*_]++,We=de,bn=(Ke=0)===tt?(mt=138,3):de===tt?(mt=6,3):(mt=7,4))}function we(j,oe,ke){var Fe,de,We=-1,tt=oe[1],Ke=0,mt=7,bn=4;for(tt===0&&(mt=138,bn=3),Fe=0;Fe<=ke;Fe++)if(de=tt,tt=oe[2*(Fe+1)+1],!(++Ke<mt&&de===tt)){if(Ke<bn)for(;se(j,de,j.bl_tree),--Ke!=0;);else de!==0?(de!==We&&(se(j,de,j.bl_tree),Ke--),se(j,w,j.bl_tree),ce(j,Ke-3,2)):Ke<=10?(se(j,y,j.bl_tree),ce(j,Ke-3,3)):(se(j,_,j.bl_tree),ce(j,Ke-11,7));We=de,bn=(Ke=0)===tt?(mt=138,3):de===tt?(mt=6,3):(mt=7,4)}}s(G);var he=!1;function q(j,oe,ke,Fe){ce(j,(a<<1)+(Fe?1:0),3),function(de,We,tt,Ke){Ce(de),Ke&&(pe(de,tt),pe(de,~tt)),r.arraySet(de.pending_buf,de.window,We,tt,de.pending),de.pending+=tt}(j,oe,ke,!0)}e._tr_init=function(j){he||(function(){var oe,ke,Fe,de,We,tt=new Array(f+1);for(de=Fe=0;de<l-1;de++)for(W[de]=Fe,oe=0;oe<1<<k[de];oe++)S[Fe++]=de;for(S[Fe-1]=de,de=We=0;de<16;de++)for(G[de]=We,oe=0;oe<1<<T[de];oe++)B[We++]=de;for(We>>=7;de<d;de++)for(G[de]=We<<7,oe=0;oe<1<<T[de]-7;oe++)B[256+We++]=de;for(ke=0;ke<=f;ke++)tt[ke]=0;for(oe=0;oe<=143;)P[2*oe+1]=8,oe++,tt[8]++;for(;oe<=255;)P[2*oe+1]=9,oe++,tt[9]++;for(;oe<=279;)P[2*oe+1]=7,oe++,tt[7]++;for(;oe<=287;)P[2*oe+1]=8,oe++,tt[8]++;for(Re(P,u+1,tt),oe=0;oe<d;oe++)N[2*oe+1]=5,N[2*oe]=ye(oe,5);ie=new H(P,k,c+1,u,f),Q=new H(N,T,0,d,f),J=new H(new Array(0),I,0,p,g)}(),he=!0),j.l_desc=new V(j.dyn_ltree,ie),j.d_desc=new V(j.dyn_dtree,Q),j.bl_desc=new V(j.bl_tree,J),j.bi_buf=0,j.bi_valid=0,Oe(j)},e._tr_stored_block=q,e._tr_flush_block=function(j,oe,ke,Fe){var de,We,tt=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=function(Ke){var mt,bn=4093624447;for(mt=0;mt<=31;mt++,bn>>>=1)if(1&bn&&Ke.dyn_ltree[2*mt]!==0)return o;if(Ke.dyn_ltree[18]!==0||Ke.dyn_ltree[20]!==0||Ke.dyn_ltree[26]!==0)return i;for(mt=32;mt<c;mt++)if(Ke.dyn_ltree[2*mt]!==0)return i;return o}(j)),St(j,j.l_desc),St(j,j.d_desc),tt=function(Ke){var mt;for(D(Ke,Ke.dyn_ltree,Ke.l_desc.max_code),D(Ke,Ke.dyn_dtree,Ke.d_desc.max_code),St(Ke,Ke.bl_desc),mt=p-1;3<=mt&&Ke.bl_tree[2*A[mt]+1]===0;mt--);return Ke.opt_len+=3*(mt+1)+5+5+4,mt}(j),de=j.opt_len+3+7>>>3,(We=j.static_len+3+7>>>3)<=de&&(de=We)):de=We=ke+5,ke+4<=de&&oe!==-1?q(j,oe,ke,Fe):j.strategy===4||We===de?(ce(j,2+(Fe?1:0),3),xt(j,P,N)):(ce(j,4+(Fe?1:0),3),function(Ke,mt,bn,cn){var ho;for(ce(Ke,mt-257,5),ce(Ke,bn-1,5),ce(Ke,cn-4,4),ho=0;ho<cn;ho++)ce(Ke,Ke.bl_tree[2*A[ho]+1],3);we(Ke,Ke.dyn_ltree,mt-1),we(Ke,Ke.dyn_dtree,bn-1)}(j,j.l_desc.max_code+1,j.d_desc.max_code+1,tt+1),xt(j,j.dyn_ltree,j.dyn_dtree)),Oe(j),Fe&&Ce(j)},e._tr_tally=function(j,oe,ke){return j.pending_buf[j.d_buf+2*j.last_lit]=oe>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&oe,j.pending_buf[j.l_buf+j.last_lit]=255&ke,j.last_lit++,oe===0?j.dyn_ltree[2*ke]++:(j.matches++,oe--,j.dyn_ltree[2*(S[ke]+c+1)]++,j.dyn_dtree[2*K(oe)]++),j.last_lit===j.lit_bufsize-1},e._tr_align=function(j){ce(j,2,3),se(j,v,P),function(oe){oe.bi_valid===16?(pe(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)}(j)}},{"../utils/common":41}],53:[function(t,n,e){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,e){(function(r){(function(o,i){"use strict";if(!o.setImmediate){var s,a,l,c,u=1,d={},p=!1,h=o.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(o);f=f&&f.setTimeout?f:o,s={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){g(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,y=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=y,w}}()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",v,!1):o.attachEvent("onmessage",v),function(w){o.postMessage(c+w,"*")}):o.MessageChannel?((l=new MessageChannel).port1.onmessage=function(w){g(w.data)},function(w){l.port2.postMessage(w)}):h&&"onreadystatechange"in h.createElement("script")?(a=h.documentElement,function(w){var y=h.createElement("script");y.onreadystatechange=function(){g(w),y.onreadystatechange=null,a.removeChild(y),y=null},a.appendChild(y)}):function(w){setTimeout(g,0,w)},f.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var y=new Array(arguments.length-1),_=0;_<y.length;_++)y[_]=arguments[_+1];var k={callback:w,args:y};return d[u]=k,s(u),u++},f.clearImmediate=m}function m(w){delete d[w]}function g(w){if(p)setTimeout(g,0,w);else{var y=d[w];if(y){p=!0;try{(function(_){var k=_.callback,T=_.args;switch(T.length){case 0:k();break;case 1:k(T[0]);break;case 2:k(T[0],T[1]);break;case 3:k(T[0],T[1],T[2]);break;default:k.apply(i,T)}})(y)}finally{m(w),p=!1}}}}function v(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(c)===0&&g(+w.data.slice(c.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});function iC(t,n){return Object.is(t,n)}var $o=null,oC=!1,nA=1,oi=Symbol("SIGNAL");function dn(t){let n=$o;return $o=t,n}function rA(){return $o}var Zf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ah(t){if(oC)throw new Error("");if($o===null)return;$o.consumerOnSignalRead(t);let n=$o.nextProducerIndex++;if(aC($o),n<$o.producerNode.length&&$o.producerNode[n]!==t&&py($o)){let e=$o.producerNode[n];sC(e,$o.producerIndexOfThis[n])}$o.producerNode[n]!==t&&($o.producerNode[n]=t,$o.producerIndexOfThis[n]=py($o)?h9(t,$o,n):0),$o.producerLastReadVersion[n]=t.version}function p9(){nA++}function A2(t){if(!(py(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===nA)){if(!t.producerMustRecompute(t)&&!hy(t)){dy(t);return}t.producerRecomputeValue(t),dy(t)}}function oA(t){if(t.liveConsumerNode===void 0)return;let n=oC;oC=!0;try{for(let e of t.liveConsumerNode)e.dirty||pfe(e)}finally{oC=n}}function iA(){return $o?.consumerAllowSignalWrites!==!1}function pfe(t){t.dirty=!0,oA(t),t.consumerMarkedDirty?.(t)}function dy(t){t.dirty=!1,t.lastCleanEpoch=nA}function Xf(t){return t&&(t.nextProducerIndex=0),dn(t)}function R2(t,n){if(dn(n),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(py(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)sC(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function hy(t){aC(t);for(let n=0;n<t.producerNode.length;n++){let e=t.producerNode[n],r=t.producerLastReadVersion[n];if(r!==e.version||(A2(e),r!==e.version))return!0}return!1}function fy(t){if(aC(t),py(t))for(let n=0;n<t.producerNode.length;n++)sC(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function h9(t,n,e){if(f9(t),t.liveConsumerNode.length===0&&m9(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=h9(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(e),t.liveConsumerNode.push(n)-1}function sC(t,n){if(f9(t),t.liveConsumerNode.length===1&&m9(t))for(let r=0;r<t.producerNode.length;r++)sC(t.producerNode[r],t.producerIndexOfThis[r]);let e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[n],o=t.liveConsumerNode[n];aC(o),o.producerIndexOfThis[r]=n}}function py(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function aC(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function f9(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function m9(t){return t.producerNode!==void 0}function lC(t,n){let e=Object.create(hfe);e.computation=t,n!==void 0&&(e.equal=n);let r=()=>{if(A2(e),ah(e),e.value===sh)throw e.error;return e.value};return r[oi]=e,r}var Kf=Symbol("UNSET"),N2=Symbol("COMPUTING"),sh=Symbol("ERRORED"),hfe=ht(le({},Zf),{value:Kf,dirty:!0,error:null,equal:iC,kind:"computed",producerMustRecompute(t){return t.value===Kf||t.value===N2},producerRecomputeValue(t){if(t.value===N2)throw new Error("Detected cycle in computations.");let n=t.value;t.value=N2;let e=Xf(t),r,o=!1;try{r=t.computation(),dn(null),o=n!==Kf&&n!==sh&&r!==sh&&t.equal(n,r)}catch(i){r=sh,t.error=i}finally{R2(t,e)}if(o){t.value=n;return}t.value=r,t.version++}});function ffe(){throw new Error}var g9=ffe;function v9(t){g9(t)}function sA(t){g9=t}var mfe=null;function aA(t,n){let e=Object.create(my);e.value=t,n!==void 0&&(e.equal=n);let r=()=>(ah(e),e.value);return r[oi]=e,r}function Yf(t,n){iA()||v9(t),t.equal(t.value,n)||(t.value=n,gfe(t))}function cC(t,n){iA()||v9(t),Yf(t,n(t.value))}var my=ht(le({},Zf),{equal:iC,value:void 0,kind:"signal"});function gfe(t){t.version++,p9(),oA(t),mfe?.()}function uC(t,n,e){let r=Object.create(vfe);r.source=t,r.computation=n,e!=null&&(r.equal=e);let i=()=>{if(A2(r),ah(r),r.value===sh)throw r.error;return r.value};return i[oi]=r,i}function lA(t,n){A2(t),Yf(t,n),dy(t)}function cA(t,n){A2(t),cC(t,n),dy(t)}var vfe=ht(le({},Zf),{value:Kf,dirty:!0,error:null,equal:iC,kind:"linkedSignal",producerMustRecompute(t){return t.value===Kf||t.value===N2},producerRecomputeValue(t){if(t.value===N2)throw new Error("Detected cycle in computations.");let n=t.value;t.value=N2;let e=Xf(t),r;try{let o=t.source(),i=n===Kf||n===sh?void 0:{source:t.sourceValue,value:n};r=t.computation(o,i),t.sourceValue=o}catch(o){r=sh,t.error=o}finally{R2(t,e)}if(n!==Kf&&r!==sh&&t.equal(n,r)){t.value=n;return}t.value=r,t.version++}});function uA(t){let n=dn(null);try{return t()}finally{dn(n)}}var dA;function gy(){return dA}function ed(t){let n=dA;return dA=t,n}var dC=Symbol("NotFound");function Ht(t){return typeof t=="function"}function O2(t){let e=t(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var pC=O2(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Qf(t,n){if(t){let e=t.indexOf(n);0<=e&&t.splice(e,1)}}var Fn=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let i of e)i.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(Ht(r))try{r()}catch(i){n=i instanceof pC?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{w9(i)}catch(s){n=n??[],s instanceof pC?n=[...n,...s.errors]:n.push(s)}}if(n)throw new pC(n)}}add(n){var e;if(n&&n!==this)if(this.closed)w9(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Qf(e,n)}remove(n){let{_finalizers:e}=this;e&&Qf(e,n),n instanceof t&&n._removeParent(this)}};Fn.EMPTY=(()=>{let t=new Fn;return t.closed=!0,t})();var pA=Fn.EMPTY;function hC(t){return t instanceof Fn||t&&"closed"in t&&Ht(t.remove)&&Ht(t.add)&&Ht(t.unsubscribe)}function w9(t){Ht(t)?t():t.unsubscribe()}var nl={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var F2={setTimeout(t,n,...e){let{delegate:r}=F2;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){let{delegate:n}=F2;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function fC(t){F2.setTimeout(()=>{let{onUnhandledError:n}=nl;if(n)n(t);else throw t})}function Jf(){}var y9=hA("C",void 0,void 0);function x9(t){return hA("E",void 0,t)}function _9(t){return hA("N",t,void 0)}function hA(t,n,e){return{kind:t,value:n,error:e}}var em=null;function P2(t){if(nl.useDeprecatedSynchronousErrorHandling){let n=!em;if(n&&(em={errorThrown:!1,error:null}),t(),n){let{errorThrown:e,error:r}=em;if(em=null,e)throw r}}else t()}function k9(t){nl.useDeprecatedSynchronousErrorHandling&&em&&(em.errorThrown=!0,em.error=t)}var tm=class extends Fn{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,hC(n)&&n.add(this)):this.destination=xfe}static create(n,e,r){return new td(n,e,r)}next(n){this.isStopped?mA(_9(n),this):this._next(n)}error(n){this.isStopped?mA(x9(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?mA(y9,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},wfe=Function.prototype.bind;function fA(t,n){return wfe.call(t,n)}var gA=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){mC(r)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){mC(r)}else mC(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){mC(e)}}},td=class extends tm{constructor(n,e,r){super();let o;if(Ht(n)||!n)o={next:n??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&nl.useDeprecatedNextContext?(i=Object.create(n),i.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&fA(n.next,i),error:n.error&&fA(n.error,i),complete:n.complete&&fA(n.complete,i)}):o=n}this.destination=new gA(o)}};function mC(t){nl.useDeprecatedSynchronousErrorHandling?k9(t):fC(t)}function yfe(t){throw t}function mA(t,n){let{onStoppedNotification:e}=nl;e&&F2.setTimeout(()=>e(t,n))}var xfe={closed:!0,next:Jf,error:yfe,complete:Jf};var B2=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ji(t){return t}function vA(...t){return wA(t)}function wA(t){return t.length===0?Ji:t.length===1?t[0]:function(e){return t.reduce((r,o)=>o(r),e)}}var en=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,o){let i=kfe(e)?e:new td(e,r,o);return P2(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=b9(r),new r((o,i)=>{let s=new td({next:a=>{try{e(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[B2](){return this}pipe(...e){return wA(e)(this)}toPromise(e){return e=b9(e),new e((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=n=>new t(n),t})();function b9(t){var n;return(n=t??nl.Promise)!==null&&n!==void 0?n:Promise}function _fe(t){return t&&Ht(t.next)&&Ht(t.error)&&Ht(t.complete)}function kfe(t){return t&&t instanceof tm||_fe(t)&&hC(t)}function yA(t){return Ht(t?.lift)}function Yt(t){return n=>{if(yA(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Kt(t,n,e,r,o){return new xA(t,n,e,r,o)}var xA=class extends tm{constructor(n,e,r,o,i,s){super(n),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function L2(){return Yt((t,n)=>{let e=null;t._refCount++;let r=Kt(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){e=null;return}let o=t._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(e=t.connect())})}var lh=class extends en{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,yA(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Fn;let e=this.getSubject();n.add(this.source.subscribe(Kt(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Fn.EMPTY)}return n}refCount(){return L2()(this)}};var C9=O2(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class t extends en{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new gC(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new C9}next(e){P2(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){P2(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){P2(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:o,observers:i}=this;return r||o?pA:(this.currentObservers=null,i.push(e),new Fn(()=>{this.currentObservers=null,Qf(i,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){let e=new en;return e.source=this,e}}return t.create=(n,e)=>new gC(n,e),t})(),gC=class extends ot{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,n)}error(n){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&r!==void 0?r:pA}};var Zn=class extends ot{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var vy={now(){return(vy.delegate||Date).now()},delegate:void 0};var nd=class extends ot{constructor(n=1/0,e=1/0,r=vy){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){let{isStopped:e,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;e||(r.push(n),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!n.closed;s+=r?1:2)n.next(i[s]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){let{_bufferSize:n,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*n;if(n<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=e.now(),a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}};var vC=class extends Fn{constructor(n,e){super()}schedule(n,e=0){return this}};var wy={setInterval(t,n,...e){let{delegate:r}=wy;return r?.setInterval?r.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){let{delegate:n}=wy;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var wC=class extends vC{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var r;if(this.closed)return this;this.state=n;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,e),this}requestAsyncId(n,e,r=0){return wy.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&wy.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(n,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r=!1,o;try{this.work(n)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:n,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Qf(r,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}};var $2=class t{constructor(n,e=t.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,r){return new this.schedulerActionCtor(this,n).schedule(r,e)}};$2.now=vy.now;var yC=class extends $2{constructor(n,e=$2.now){super(n,e),this.actions=[],this._active=!1}flush(n){let{actions:e}=this;if(this._active){e.push(n);return}let r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=e.shift());if(this._active=!1,r){for(;n=e.shift();)n.unsubscribe();throw r}}};var rd=new yC(wC),S9=rd;var ii=new en(t=>t.complete());function xC(t){return t&&Ht(t.schedule)}function _A(t){return t[t.length-1]}function _C(t){return Ht(_A(t))?t.pop():void 0}function nc(t){return xC(_A(t))?t.pop():void 0}function M9(t,n){return typeof _A(t)=="number"?t.pop():n}function D9(t,n,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,n||[])).next())})}function T9(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function nm(t){return this instanceof nm?(this.v=t,this):new nm(t)}function E9(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(t,n||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(f){return Promise.resolve(f).then(h,d)}}function a(h,f){r[h]&&(o[h]=function(m){return new Promise(function(g,v){i.push([h,m,g,v])>1||l(h,m)})},f&&(o[h]=f(o[h])))}function l(h,f){try{c(r[h](f))}catch(m){p(i[0][3],m)}}function c(h){h.value instanceof nm?Promise.resolve(h.value.v).then(u,d):p(i[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function p(h,f){h(f),i.shift(),i.length&&l(i[0][0],i[0][1])}}function I9(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof T9=="function"?T9(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=t[i]&&function(s){return new Promise(function(a,l){s=t[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}var V2=t=>t&&typeof t.length=="number"&&typeof t!="function";function kC(t){return Ht(t?.then)}function bC(t){return Ht(t[B2])}function CC(t){return Symbol.asyncIterator&&Ht(t?.[Symbol.asyncIterator])}function SC(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function bfe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var MC=bfe();function TC(t){return Ht(t?.[MC])}function DC(t){return E9(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:r,done:o}=yield nm(e.read());if(o)return yield nm(void 0);yield yield nm(r)}}finally{e.releaseLock()}})}function EC(t){return Ht(t?.getReader)}function Dn(t){if(t instanceof en)return t;if(t!=null){if(bC(t))return Cfe(t);if(V2(t))return Sfe(t);if(kC(t))return Mfe(t);if(CC(t))return N9(t);if(TC(t))return Tfe(t);if(EC(t))return Dfe(t)}throw SC(t)}function Cfe(t){return new en(n=>{let e=t[B2]();if(Ht(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Sfe(t){return new en(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}function Mfe(t){return new en(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,fC)})}function Tfe(t){return new en(n=>{for(let e of t)if(n.next(e),n.closed)return;n.complete()})}function N9(t){return new en(n=>{Efe(t,n).catch(e=>n.error(e))})}function Dfe(t){return N9(DC(t))}function Efe(t,n){var e,r,o,i;return D9(this,void 0,void 0,function*(){try{for(e=I9(t);r=yield e.next(),!r.done;){let s=r.value;if(n.next(s),n.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}n.complete()})}function ks(t,n,e,r=0,o=!1){let i=n.schedule(function(){e(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function IC(t,n=0){return Yt((e,r)=>{e.subscribe(Kt(r,o=>ks(r,t,()=>r.next(o),n),()=>ks(r,t,()=>r.complete(),n),o=>ks(r,t,()=>r.error(o),n)))})}function NC(t,n=0){return Yt((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function A9(t,n){return Dn(t).pipe(NC(n),IC(n))}function R9(t,n){return Dn(t).pipe(NC(n),IC(n))}function O9(t,n){return new en(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}function F9(t,n){return new en(e=>{let r;return ks(e,n,()=>{r=t[MC](),ks(e,n,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){e.error(s);return}i?e.complete():e.next(o)},0,!0)}),()=>Ht(r?.return)&&r.return()})}function AC(t,n){if(!t)throw new Error("Iterable cannot be null");return new en(e=>{ks(e,n,()=>{let r=t[Symbol.asyncIterator]();ks(e,n,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function P9(t,n){return AC(DC(t),n)}function B9(t,n){if(t!=null){if(bC(t))return A9(t,n);if(V2(t))return O9(t,n);if(kC(t))return R9(t,n);if(CC(t))return AC(t,n);if(TC(t))return F9(t,n);if(EC(t))return P9(t,n)}throw SC(t)}function Xn(t,n){return n?B9(t,n):Dn(t)}function lt(...t){let n=nc(t);return Xn(t,n)}function j2(t,n){let e=Ht(t)?t:()=>t,r=o=>o.error(e());return new en(n?o=>n.schedule(r,0,o):r)}function bs(t){return!!t&&(t instanceof en||Ht(t.lift)&&Ht(t.subscribe))}var od=O2(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function L9(t){return t instanceof Date&&!isNaN(t)}function At(t,n){return Yt((e,r)=>{let o=0;e.subscribe(Kt(r,i=>{r.next(t.call(n,i,o++))}))})}var{isArray:Ife}=Array;function Nfe(t,n){return Ife(n)?t(...n):t(n)}function z2(t){return At(n=>Nfe(t,n))}var{isArray:Afe}=Array,{getPrototypeOf:Rfe,prototype:Ofe,keys:Ffe}=Object;function RC(t){if(t.length===1){let n=t[0];if(Afe(n))return{args:n,keys:null};if(Pfe(n)){let e=Ffe(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}function Pfe(t){return t&&typeof t=="object"&&Rfe(t)===Ofe}function OC(t,n){return t.reduce((e,r,o)=>(e[r]=n[o],e),{})}function yy(...t){let n=nc(t),e=_C(t),{args:r,keys:o}=RC(t);if(r.length===0)return Xn([],n);let i=new en(Bfe(r,n,o?s=>OC(o,s):Ji));return e?i.pipe(z2(e)):i}function Bfe(t,n,e=Ji){return r=>{$9(n,()=>{let{length:o}=t,i=new Array(o),s=o,a=o;for(let l=0;l<o;l++)$9(n,()=>{let c=Xn(t[l],n),u=!1;c.subscribe(Kt(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function $9(t,n,e){t?ks(e,t,n):n()}function V9(t,n,e,r,o,i,s,a){let l=[],c=0,u=0,d=!1,p=()=>{d&&!l.length&&!c&&n.complete()},h=m=>c<r?f(m):l.push(m),f=m=>{i&&n.next(m),c++;let g=!1;Dn(e(m,u++)).subscribe(Kt(n,v=>{o?.(v),i?h(v):n.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){let v=l.shift();s?ks(n,s,()=>f(v)):f(v)}p()}catch(v){n.error(v)}}))};return t.subscribe(Kt(n,h,()=>{d=!0,p()})),()=>{a?.()}}function cr(t,n,e=1/0){return Ht(n)?cr((r,o)=>At((i,s)=>n(r,i,o,s))(Dn(t(r,o))),e):(typeof n=="number"&&(e=n),Yt((r,o)=>V9(r,o,t,e)))}function ha(t=1/0){return cr(Ji,t)}function j9(){return ha(1)}function rl(...t){return j9()(Xn(t,nc(t)))}function id(t){return new en(n=>{Dn(t()).subscribe(n)})}function xy(...t){let n=_C(t),{args:e,keys:r}=RC(t),o=new en(i=>{let{length:s}=e;if(!s){i.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;Dn(e[u]).subscribe(Kt(i,p=>{d||(d=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?OC(r,a):a),i.complete())}))}});return n?o.pipe(z2(n)):o}var Lfe=["addListener","removeListener"],$fe=["addEventListener","removeEventListener"],Vfe=["on","off"];function ol(t,n,e,r){if(Ht(e)&&(r=e,e=void 0),r)return ol(t,n,e).pipe(z2(r));let[o,i]=Hfe(t)?$fe.map(s=>a=>t[s](n,a,e)):jfe(t)?Lfe.map(z9(t,n)):zfe(t)?Vfe.map(z9(t,n)):[];if(!o&&V2(t))return cr(s=>ol(s,n,e))(Dn(t));if(!o)throw new TypeError("Invalid event target");return new en(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return o(a),()=>i(a)})}function z9(t,n){return e=>r=>t[e](n,r)}function jfe(t){return Ht(t.addListener)&&Ht(t.removeListener)}function zfe(t){return Ht(t.on)&&Ht(t.off)}function Hfe(t){return Ht(t.addEventListener)&&Ht(t.removeEventListener)}function sd(t=0,n,e=S9){let r=-1;return n!=null&&(xC(n)?e=n:r=n),new en(o=>{let i=L9(t)?+t-e.now():t;i<0&&(i=0);let s=0;return e.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}function FC(t=0,n=rd){return t<0&&(t=0),sd(t,t,n)}function rc(...t){let n=nc(t),e=M9(t,1/0),r=t;return r.length?r.length===1?Dn(r[0]):ha(e)(Xn(r,n)):ii}function H9(t,n){return(e,r)=>!t.call(n,e,r)}function kn(t,n){return Yt((e,r)=>{let o=0;e.subscribe(Kt(r,i=>t.call(n,i,o++)&&r.next(i)))})}function kA(t,n,e){return[kn(n,e)(Dn(t)),kn(H9(n,e))(Dn(t))]}function U9(t){return Yt((n,e)=>{let r=!1,o=null,i=null,s=!1,a=()=>{if(i?.unsubscribe(),i=null,r){r=!1;let c=o;o=null,e.next(c)}s&&e.complete()},l=()=>{i=null,s&&e.complete()};n.subscribe(Kt(e,c=>{r=!0,o=c,i||Dn(t(c)).subscribe(i=Kt(e,a,l))},()=>{s=!0,(!r||!i||i.closed)&&e.complete()}))})}function PC(t,n=rd){return U9(()=>sd(t,n))}function ad(t){return Yt((n,e)=>{let r=null,o=!1,i;r=n.subscribe(Kt(e,void 0,void 0,s=>{i=Dn(t(s,ad(t)(n))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function G9(t,n,e,r,o){return(i,s)=>{let a=e,l=n,c=0;i.subscribe(Kt(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}function fa(t,n){return Ht(n)?cr(t,n,1):cr(t,1)}function ma(t,n=rd){return Yt((e,r)=>{let o=null,i=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let c=i;i=null,r.next(c)}};function l(){let c=s+t,u=n.now();if(u<c){o=this.schedule(void 0,c-u),r.add(o);return}a()}e.subscribe(Kt(r,c=>{i=c,s=n.now(),o||(o=n.schedule(l,t),r.add(o))},()=>{a(),r.complete()},void 0,()=>{i=o=null}))})}function ch(t){return Yt((n,e)=>{let r=!1;n.subscribe(Kt(e,o=>{r=!0,e.next(o)},()=>{r||e.next(t),e.complete()}))})}function Vr(t){return t<=0?()=>ii:Yt((n,e)=>{let r=0;n.subscribe(Kt(e,o=>{++r<=t&&(e.next(o),t<=r&&e.complete())}))})}function W9(){return Yt((t,n)=>{t.subscribe(Kt(n,Jf))})}function _y(t){return At(()=>t)}function bA(t,n){return n?e=>rl(n.pipe(Vr(1),W9()),e.pipe(bA(t))):cr((e,r)=>Dn(t(e,r)).pipe(Vr(1),_y(e)))}function CA(t,n=rd){let e=sd(t,n);return bA(()=>e)}function H2(t,n=Ji){return t=t??Ufe,Yt((e,r)=>{let o,i=!0;e.subscribe(Kt(r,s=>{let a=n(s);(i||!t(o,a))&&(i=!1,o=a,r.next(s))}))})}function Ufe(t,n){return t===n}function BC(t=Gfe){return Yt((n,e)=>{let r=!1;n.subscribe(Kt(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(t())))})}function Gfe(){return new od}function rm(t){return Yt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function ld(t,n){let e=arguments.length>=2;return r=>r.pipe(t?kn((o,i)=>t(o,i,r)):Ji,Vr(1),e?ch(n):BC(()=>new od))}function U2(t){return t<=0?()=>ii:Yt((n,e)=>{let r=[];n.subscribe(Kt(e,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function SA(t,n){let e=arguments.length>=2;return r=>r.pipe(t?kn((o,i)=>t(o,i,r)):Ji,U2(1),e?ch(n):BC(()=>new od))}function MA(t,n){return Yt(G9(t,n,arguments.length>=2,!0))}function q9(t={}){let{connector:n=()=>new ot,resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,d=!1,p=()=>{a?.unsubscribe(),a=void 0},h=()=>{p(),s=l=void 0,u=d=!1},f=()=>{let m=s;h(),m?.unsubscribe()};return Yt((m,g)=>{c++,!d&&!u&&p();let v=l=l??n();g.add(()=>{c--,c===0&&!d&&!u&&(a=TA(f,o))}),v.subscribe(g),!s&&c>0&&(s=new td({next:w=>v.next(w),error:w=>{d=!0,p(),a=TA(h,e,w),v.error(w)},complete:()=>{u=!0,p(),a=TA(h,r),v.complete()}}),Dn(m).subscribe(s))})(i)}}function TA(t,n,...e){if(n===!0){t();return}if(n===!1)return;let r=new td({next:()=>{r.unsubscribe(),t()}});return Dn(n(...e)).subscribe(r)}function om(t,n,e){let r,o=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:n=1/0,refCount:o=!1,scheduler:e}=t:r=t??1/0,q9({connector:()=>new nd(r,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function im(t){return kn((n,e)=>t<=e)}function DA(t){return Yt((n,e)=>{let r=!1,o=0;n.subscribe(Kt(e,i=>(r||(r=!t(i,o++)))&&e.next(i)))})}function ga(...t){let n=nc(t);return Yt((e,r)=>{(n?rl(t,e,n):rl(t,e)).subscribe(r)})}function jr(t,n){return Yt((e,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();e.subscribe(Kt(r,l=>{o?.unsubscribe();let c=0,u=i++;Dn(t(l,u)).subscribe(o=Kt(r,d=>r.next(n?n(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function It(t){return Yt((n,e)=>{Dn(t).subscribe(Kt(e,()=>e.complete(),Jf)),!e.closed&&n.subscribe(e)})}function EA(t,n=!1){return Yt((e,r)=>{let o=0;e.subscribe(Kt(r,i=>{let s=t(i,o++);(s||n)&&r.next(i),!s&&r.complete()}))})}function Vo(t,n,e){let r=Ht(t)||n||e?{next:t,error:n,complete:e}:t;return r?Yt((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Kt(i,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Ji}var zj="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Ae=class extends Error{code;constructor(n,e){super(KR(n,e)),this.code=n}};function Wfe(t){return`NG0${Math.abs(t)}`}function KR(t,n){return`${Wfe(t)}${n?": "+n:""}`}var C4=Symbol("InputSignalNode#UNSET"),Hj=ht(le({},my),{transformFn:void 0,applyValueToInputSignal(t,n){Yf(t,n)}});function Uj(t,n){let e=Object.create(Hj);e.value=t,e.transformFn=n?.transform;function r(){if(ah(e),e.value===C4){let o=null;throw new Ae(-950,o)}return e.value}return r[oi]=e,r}function Py(t){return{toString:t}.toString()}var LC="__parameters__";function qfe(t){return function(...e){if(t){let r=t(...e);for(let o in r)this[o]=r[o]}}}function ZR(t,n,e){return Py(()=>{let r=qfe(n);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(LC)?l[LC]:Object.defineProperty(l,LC,{value:[]})[LC];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return o.prototype.ngMetadataName=t,o.annotationCls=o,o})}var am=globalThis;function ur(t){for(let n in t)if(t[n]===ur)return n;throw Error("Could not find renamed property on target object.")}function Kfe(t,n){for(let e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Ss(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Ss).join(", ")}]`;if(t==null)return""+t;let n=t.overriddenName||t.name;if(n)return`${n}`;let e=t.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function GA(t,n){return t?n?`${t} ${n}`:t:n||""}var Zfe=ur({__forward_ref__:ur});function wi(t){return t.__forward_ref__=wi,t.toString=function(){return Ss(this())},t}function vi(t){return Gj(t)?t():t}function Gj(t){return typeof t=="function"&&t.hasOwnProperty(Zfe)&&t.__forward_ref__===wi}function _e(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dt(t){return{providers:t.providers||[],imports:t.imports||[]}}function S4(t){return K9(t,qj)||K9(t,Kj)}function Wj(t){return S4(t)!==null}function K9(t,n){return t.hasOwnProperty(n)?t[n]:null}function Xfe(t){let n=t&&(t[qj]||t[Kj]);return n||null}function Z9(t){return t&&(t.hasOwnProperty(X9)||t.hasOwnProperty(Yfe))?t[X9]:null}var qj=ur({\u0275prov:ur}),X9=ur({\u0275inj:ur}),Kj=ur({ngInjectableDef:ur}),Yfe=ur({ngInjectorDef:ur}),Me=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,e){this._desc=n,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=_e({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Zj(t){return t&&!!t.\u0275providers}var Qfe=ur({\u0275cmp:ur}),Jfe=ur({\u0275dir:ur}),eme=ur({\u0275pipe:ur}),tme=ur({\u0275mod:ur}),qC=ur({\u0275fac:ur}),Sy=ur({__NG_ELEMENT_ID__:ur}),Y9=ur({__NG_ENV_ID__:ur});function M4(t){return typeof t=="string"?t:t==null?"":String(t)}function nme(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():M4(t)}function Xj(t,n){throw new Ae(-200,t)}function XR(t,n){throw new Ae(-201,!1)}var mn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(mn||{}),WA;function Yj(){return WA}function Cs(t){let n=WA;return WA=t,n}function Qj(t,n,e){let r=S4(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&mn.Optional)return null;if(n!==void 0)return n;XR(t,"Injector")}var rme={},lm=rme,qA="__NG_DI_FLAG__",KC=class{injector;constructor(n){this.injector=n}retrieve(n,e){let r=e;return this.injector.get(n,r.optional?dC:lm,r)}},ZC="ngTempTokenPath",ome="ngTokenPath",ime=/\n/gm,sme="\u0275",Q9="__source";function ame(t,n=mn.Default){if(gy()===void 0)throw new Ae(-203,!1);if(gy()===null)return Qj(t,void 0,n);{let e=gy(),r;return e instanceof KC?r=e.injector:r=e,r.get(t,n&mn.Optional?null:void 0,n)}}function Qe(t,n=mn.Default){return(Yj()||ame)(vi(t),n)}function M(t,n=mn.Default){return Qe(t,T4(n))}function T4(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function KA(t){let n=[];for(let e=0;e<t.length;e++){let r=vi(t[e]);if(Array.isArray(r)){if(r.length===0)throw new Ae(900,!1);let o,i=mn.Default;for(let s=0;s<r.length;s++){let a=r[s],l=lme(a);typeof l=="number"?l===-1?o=a.token:i|=l:o=a}n.push(Qe(o,i))}else n.push(Qe(r))}return n}function YR(t,n){return t[qA]=n,t.prototype[qA]=n,t}function lme(t){return t[qA]}function cme(t,n,e,r){let o=t[ZC];throw n[Q9]&&o.unshift(n[Q9]),t.message=ume(`
`+t.message,o,e,r),t[ome]=o,t[ZC]=null,t}function ume(t,n,e,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==sme?t.slice(2):t;let o=Ss(n);if(Array.isArray(n))o=n.map(Ss).join(" -> ");else if(typeof n=="object"){let i=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ss(a)))}o=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${t.replace(ime,`
  `)}`}var D4=YR(ZR("Inject",t=>({token:t})),-1),l1=YR(ZR("Optional"),8);var By=YR(ZR("SkipSelf"),4);function um(t,n){let e=t.hasOwnProperty(qC);return e?t[qC]:null}function dme(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=n[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}function pme(t){return t.flat(Number.POSITIVE_INFINITY)}function QR(t,n){t.forEach(e=>Array.isArray(e)?QR(e,n):n(e))}function Jj(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function XC(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function hme(t,n){let e=[];for(let r=0;r<t;r++)e.push(n);return e}function fme(t,n,e,r){let o=t.length;if(o==n)t.push(e,r);else if(o===1)t.push(r,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;){let i=o-2;t[o]=t[i],o--}t[n]=e,t[n+1]=r}}function Ly(t,n,e){let r=$y(t,n);return r>=0?t[r|1]=e:(r=~r,fme(t,r,n,e)),r}function IA(t,n){let e=$y(t,n);if(e>=0)return t[e|1]}function $y(t,n){return mme(t,n,1)}function mme(t,n,e){let r=0,o=t.length>>e;for(;o!==r;){let i=r+(o-r>>1),s=t[i<<e];if(n===s)return i<<e;s>n?o=i:r=i+1}return~(o<<e)}var ic={},es=[],Ty=new Me(""),ez=new Me("",-1),tz=new Me(""),YC=class{get(n,e=lm){if(e===lm){let r=new Error(`NullInjectorError: No provider for ${Ss(n)}!`);throw r.name="NullInjectorError",r}return e}};function nz(t,n){let e=t[tme]||null;if(!e&&n===!0)throw new Error(`Type ${Ss(t)} does not have '\u0275mod' property.`);return e}function ph(t){return t[Qfe]||null}function rz(t){return t[Jfe]||null}function gme(t){return t[eme]||null}function ym(t){return{\u0275providers:t}}function JR(...t){return{\u0275providers:oz(!0,t),\u0275fromNgModule:!0}}function oz(t,...n){let e=[],r=new Set,o,i=s=>{e.push(s)};return QR(n,s=>{let a=s;ZA(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&iz(o,i),e}function iz(t,n){for(let e=0;e<t.length;e++){let{ngModule:r,providers:o}=t[e];e5(o,i=>{n(i,r)})}}function ZA(t,n,e,r){if(t=vi(t),!t)return!1;let o=null,i=Z9(t),s=!i&&ph(t);if(!i&&!s){let l=t.ngModule;if(i=Z9(l),i)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=t}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)ZA(c,n,e,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{QR(i.imports,u=>{ZA(u,n,e,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&iz(c,n)}if(!a){let c=um(o)||(()=>new o);n({provide:o,useFactory:c,deps:es},o),n({provide:tz,useValue:o,multi:!0},o),n({provide:Ty,useValue:()=>Qe(o),multi:!0},o)}let l=i.providers;if(l!=null&&!a){let c=t;e5(l,u=>{n(u,c)})}}else return!1;return o!==t&&t.providers!==void 0}function e5(t,n){for(let e of t)Zj(e)&&(e=e.\u0275providers),Array.isArray(e)?e5(e,n):n(e)}var vme=ur({provide:String,useValue:ur});function sz(t){return t!==null&&typeof t=="object"&&vme in t}function wme(t){return!!(t&&t.useExisting)}function yme(t){return!!(t&&t.useFactory)}function Y2(t){return typeof t=="function"}function xme(t){return!!t.useClass}var E4=new Me(""),jC={},J9={},NA;function I4(){return NA===void 0&&(NA=new YC),NA}var io=class{},Dy=class extends io{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,YA(n,s=>this.processProvider(s)),this.records.set(ez,G2(void 0,this)),o.has("environment")&&this.records.set(io,G2(void 0,this));let i=this.records.get(E4);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(tz,es,mn.Self))}retrieve(n,e){let r=e;return this.get(n,r.optional?dC:lm,r)}destroy(){by(this),this._destroyed=!0;let n=dn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),dn(n)}}onDestroy(n){return by(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){by(this);let e=ed(this),r=Cs(void 0),o;try{return n()}finally{ed(e),Cs(r)}}get(n,e=lm,r=mn.Default){if(by(this),n.hasOwnProperty(Y9))return n[Y9](this);r=T4(r);let o,i=ed(this),s=Cs(void 0);try{if(!(r&mn.SkipSelf)){let l=this.records.get(n);if(l===void 0){let c=Sme(n)&&S4(n);c&&this.injectableDefInScope(c)?l=G2(XA(n),jC):l=null,this.records.set(n,l)}if(l!=null)return this.hydrate(n,l)}let a=r&mn.Self?I4():this.parent;return e=r&mn.Optional&&e===lm?null:e,a.get(n,e)}catch(a){if(a.name==="NullInjectorError"){if((a[ZC]=a[ZC]||[]).unshift(Ss(n)),i)throw a;return cme(a,n,"R3InjectorError",this.source)}else throw a}finally{Cs(s),ed(i)}}resolveInjectorInitializers(){let n=dn(null),e=ed(this),r=Cs(void 0),o;try{let i=this.get(Ty,es,mn.Self);for(let s of i)s()}finally{ed(e),Cs(r),dn(n)}}toString(){let n=[],e=this.records;for(let r of e.keys())n.push(Ss(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=vi(n);let e=Y2(n)?n:vi(n&&n.provide),r=kme(n);if(!Y2(n)&&n.multi===!0){let o=this.records.get(e);o||(o=G2(void 0,jC,!0),o.factory=()=>KA(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,r)}hydrate(n,e){let r=dn(null);try{return e.value===J9?Xj(Ss(n)):e.value===jC&&(e.value=J9,e.value=e.factory()),typeof e.value=="object"&&e.value&&Cme(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{dn(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=vi(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function XA(t){let n=S4(t),e=n!==null?n.factory:um(t);if(e!==null)return e;if(t instanceof Me)throw new Ae(204,!1);if(t instanceof Function)return _me(t);throw new Ae(204,!1)}function _me(t){if(t.length>0)throw new Ae(204,!1);let e=Xfe(t);return e!==null?()=>e.factory(t):()=>new t}function kme(t){if(sz(t))return G2(void 0,t.useValue);{let n=az(t);return G2(n,jC)}}function az(t,n,e){let r;if(Y2(t)){let o=vi(t);return um(o)||XA(o)}else if(sz(t))r=()=>vi(t.useValue);else if(yme(t))r=()=>t.useFactory(...KA(t.deps||[]));else if(wme(t))r=()=>Qe(vi(t.useExisting));else{let o=vi(t&&(t.useClass||t.provide));if(bme(t))r=()=>new o(...KA(t.deps));else return um(o)||XA(o)}return r}function by(t){if(t.destroyed)throw new Ae(205,!1)}function G2(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function bme(t){return!!t.deps}function Cme(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Sme(t){return typeof t=="function"||typeof t=="object"&&t instanceof Me}function YA(t,n){for(let e of t)Array.isArray(e)?YA(e,n):e&&Zj(e)?YA(e.\u0275providers,n):n(e)}function Ho(t,n){let e;t instanceof Dy?(by(t),e=t):e=new KC(t);let r,o=ed(e),i=Cs(void 0);try{return n()}finally{ed(o),Cs(i)}}function lz(){return Yj()!==void 0||gy()!=null}function mh(t){if(!lz())throw new Ae(-203,!1)}function Mme(t){return typeof t=="function"}var dd=0,un=1,nn=2,Ni=3,sl=4,Ts=5,Q2=6,QC=7,zo=8,J2=9,cd=10,Gr=11,Ey=12,ej=13,c1=14,Qs=15,dm=16,W2=17,ud=18,N4=19,cz=20,uh=21,AA=22,pm=23,va=24,Z2=25,fo=26,uz=1;var hm=7,JC=8,e1=9,Ii=10;function dh(t){return Array.isArray(t)&&typeof t[uz]=="object"}function pd(t){return Array.isArray(t)&&t[uz]===!0}function t5(t){return(t.flags&4)!==0}function u1(t){return t.componentOffset>-1}function A4(t){return(t.flags&1)===1}function sc(t){return!!t.template}function e4(t){return(t[nn]&512)!==0}function Vy(t){return(t[nn]&256)===256}var QA=class{previousValue;currentValue;firstChange;constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function dz(t,n,e,r){n!==null?n.applyValueToInputSignal(n,r):t[e]=r}var Dr=(()=>{let t=()=>pz;return t.ngInherit=!0,t})();function pz(t){return t.type.prototype.ngOnChanges&&(t.setInput=Dme),Tme}function Tme(){let t=fz(this),n=t?.current;if(n){let e=t.previous;if(e===ic)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function Dme(t,n,e,r,o){let i=this.declaredInputs[r],s=fz(t)||Eme(t,{previous:ic,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[i];a[i]=new QA(c&&c.currentValue,e,l===ic),dz(t,n,o,e)}var hz="__ngSimpleChanges__";function fz(t){return t[hz]||null}function Eme(t,n){return t[hz]=n}var tj=null;var er=function(t,n=null,e){tj?.(t,n,e)},mz="svg",Ime="math";function ac(t){for(;Array.isArray(t);)t=t[dd];return t}function gz(t,n){return ac(n[t])}function pc(t,n){return ac(n[t.index])}function n5(t,n){return t.data[n]}function jy(t,n){return t[n]}function lc(t,n){let e=n[t];return dh(e)?e:e[dd]}function Nme(t){return(t[nn]&4)===4}function r5(t){return(t[nn]&128)===128}function Ame(t){return pd(t[Ni])}function hh(t,n){return n==null?null:t[n]}function vz(t){t[W2]=0}function wz(t){t[nn]&1024||(t[nn]|=1024,r5(t)&&d1(t))}function Rme(t,n){for(;t>0;)n=n[c1],t--;return n}function R4(t){return!!(t[nn]&9216||t[va]?.dirty)}function JA(t){t[cd].changeDetectionScheduler?.notify(8),t[nn]&64&&(t[nn]|=1024),R4(t)&&d1(t)}function d1(t){t[cd].changeDetectionScheduler?.notify(0);let n=fm(t);for(;n!==null&&!(n[nn]&8192||(n[nn]|=8192,!r5(n)));)n=fm(n)}function yz(t,n){if(Vy(t))throw new Ae(911,!1);t[uh]===null&&(t[uh]=[]),t[uh].push(n)}function Ome(t,n){if(t[uh]===null)return;let e=t[uh].indexOf(n);e!==-1&&t[uh].splice(e,1)}function fm(t){let n=t[Ni];return pd(n)?n[Ni]:n}function o5(t){return t[QC]??=[]}function i5(t){return t.cleanup??=[]}function Fme(t,n,e,r){let o=o5(n);o.push(e),t.firstCreatePass&&i5(t).push(r,o.length-1)}var hn={lFrame:Mz(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var eR=!1;function Pme(){return hn.lFrame.elementDepthCount}function Bme(){hn.lFrame.elementDepthCount++}function Lme(){hn.lFrame.elementDepthCount--}function s5(){return hn.bindingsEnabled}function xz(){return hn.skipHydrationRootTNode!==null}function $me(t){return hn.skipHydrationRootTNode===t}function Vme(){hn.skipHydrationRootTNode=null}function Ut(){return hn.lFrame.lView}function qr(){return hn.lFrame.tView}function ze(t){return hn.lFrame.contextLView=t,t[zo]}function He(t){return hn.lFrame.contextLView=null,t}function Ai(){let t=_z();for(;t!==null&&t.type===64;)t=t.parent;return t}function _z(){return hn.lFrame.currentTNode}function jme(){let t=hn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function xm(t,n){let e=hn.lFrame;e.currentTNode=t,e.isParent=n}function a5(){return hn.lFrame.isParent}function l5(){hn.lFrame.isParent=!1}function zme(){return hn.lFrame.contextLView}function kz(){return eR}function t4(t){let n=eR;return eR=t,n}function hc(){let t=hn.lFrame,n=t.bindingRootIndex;return n===-1&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Hme(t){return hn.lFrame.bindingIndex=t}function _m(){return hn.lFrame.bindingIndex++}function bz(t){let n=hn.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Ume(){return hn.lFrame.inI18n}function Gme(t,n){let e=hn.lFrame;e.bindingIndex=e.bindingRootIndex=t,tR(n)}function Wme(){return hn.lFrame.currentDirectiveIndex}function tR(t){hn.lFrame.currentDirectiveIndex=t}function qme(t){let n=hn.lFrame.currentDirectiveIndex;return n===-1?null:t[n]}function c5(){return hn.lFrame.currentQueryIndex}function O4(t){hn.lFrame.currentQueryIndex=t}function Kme(t){let n=t[un];return n.type===2?n.declTNode:n.type===1?t[Ts]:null}function Cz(t,n,e){if(e&mn.SkipSelf){let o=n,i=t;for(;o=o.parent,o===null&&!(e&mn.Host);)if(o=Kme(i),o===null||(i=i[c1],o.type&10))break;if(o===null)return!1;n=o,t=i}let r=hn.lFrame=Sz();return r.currentTNode=n,r.lView=t,!0}function u5(t){let n=Sz(),e=t[un];hn.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Sz(){let t=hn.lFrame,n=t===null?null:t.child;return n===null?Mz(t):n}function Mz(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function Tz(){let t=hn.lFrame;return hn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Dz=Tz;function d5(){let t=Tz();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Zme(t){return(hn.lFrame.contextLView=Rme(t,hn.lFrame.contextLView))[zo]}function gh(){return hn.lFrame.selectedIndex}function mm(t){hn.lFrame.selectedIndex=t}function F4(){let t=hn.lFrame;return n5(t.tView,t.selectedIndex)}function vh(){hn.lFrame.currentNamespace=mz}function Xme(){return hn.lFrame.currentNamespace}var Ez=!0;function P4(){return Ez}function B4(t){Ez=t}function Yme(t,n,e){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=n.type.prototype;if(r){let s=pz(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}o&&(e.preOrderHooks??=[]).push(0-t,o),i&&((e.preOrderHooks??=[]).push(t,i),(e.preOrderCheckHooks??=[]).push(t,i))}function p5(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){let i=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??=[]).push(-e,s),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),u!=null&&(t.destroyHooks??=[]).push(e,u)}}function zC(t,n,e){Iz(t,n,3,e)}function HC(t,n,e,r){(t[nn]&3)===e&&Iz(t,n,e,r)}function RA(t,n){let e=t[nn];(e&3)===n&&(e&=16383,e+=1,t[nn]=e)}function Iz(t,n,e,r){let o=r!==void 0?t[W2]&65535:0,i=r??-1,s=n.length-1,a=0;for(let l=o;l<s;l++)if(typeof n[l+1]=="number"){if(a=n[l],r!=null&&a>=r)break}else n[l]<0&&(t[W2]+=65536),(a<i||i==-1)&&(Qme(t,e,n,l),t[W2]=(t[W2]&4294901760)+l+2),l++}function nj(t,n){er(4,t,n);let e=dn(null);try{n.call(t)}finally{dn(e),er(5,t,n)}}function Qme(t,n,e,r){let o=e[r]<0,i=e[r+1],s=o?-e[r]:e[r],a=t[s];o?t[nn]>>14<t[W2]>>16&&(t[nn]&3)===n&&(t[nn]+=16384,nj(a,i)):nj(a,i)}var X2=-1,gm=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,e,r){this.factory=n,this.canSeeViewProviders=e,this.injectImpl=r}};function Jme(t){return(t.flags&8)!==0}function ege(t){return(t.flags&16)!==0}function tge(t,n,e){let r=0;for(;r<e.length;){let o=e[r];if(typeof o=="number"){if(o!==0)break;r++;let i=e[r++],s=e[r++],a=e[r++];t.setAttribute(n,s,a,i)}else{let i=o,s=e[++r];nge(i)?t.setProperty(n,i,s):t.setAttribute(n,i,s),r++}}return r}function Nz(t){return t===3||t===4||t===6}function nge(t){return t.charCodeAt(0)===64}function t1(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){let o=n[r];typeof o=="number"?e=o:e===0||(e===-1||e===2?rj(t,e,o,null,n[++r]):rj(t,e,o,null,null))}}return t}function rj(t,n,e,r,o){let i=0,s=t.length;if(n===-1)s=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===n){s=-1;break}else if(a>n){s=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===e){o!==null&&(t[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(t.splice(s,0,n),i=s+1),t.splice(i++,0,e),o!==null&&t.splice(i++,0,o)}function Az(t){return t!==X2}function n4(t){return t&32767}function rge(t){return t>>16}function r4(t,n){let e=rge(t),r=n;for(;e>0;)r=r[c1],e--;return r}var nR=!0;function o4(t){let n=nR;return nR=t,n}var oge=256,Rz=oge-1,Oz=5,ige=0,oc={};function sge(t,n,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Sy)&&(r=e[Sy]),r==null&&(r=e[Sy]=ige++);let o=r&Rz,i=1<<o;n.data[t+(o>>Oz)]|=i}function i4(t,n){let e=Fz(t,n);if(e!==-1)return e;let r=n[un];r.firstCreatePass&&(t.injectorIndex=n.length,OA(r.data,t),OA(n,null),OA(r.blueprint,null));let o=h5(t,n),i=t.injectorIndex;if(Az(o)){let s=n4(o),a=r4(o,n),l=a[un].data;for(let c=0;c<8;c++)n[i+c]=a[s+c]|l[s+c]}return n[i+8]=o,i}function OA(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Fz(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function h5(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let e=0,r=null,o=n;for(;o!==null;){if(r=Vz(o),r===null)return X2;if(e++,o=o[c1],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return X2}function rR(t,n,e){sge(t,n,e)}function age(t,n){if(n==="class")return t.classes;if(n==="style")return t.styles;let e=t.attrs;if(e){let r=e.length,o=0;for(;o<r;){let i=e[o];if(Nz(i))break;if(i===0)o=o+2;else if(typeof i=="number")for(o++;o<r&&typeof e[o]=="string";)o++;else{if(i===n)return e[o+1];o=o+2}}}return null}function Pz(t,n,e){if(e&mn.Optional||t!==void 0)return t;XR(n,"NodeInjector")}function Bz(t,n,e,r){if(e&mn.Optional&&r===void 0&&(r=null),(e&(mn.Self|mn.Host))===0){let o=t[J2],i=Cs(void 0);try{return o?o.get(n,r,e&mn.Optional):Qj(n,r,e&mn.Optional)}finally{Cs(i)}}return Pz(r,n,e)}function Lz(t,n,e,r=mn.Default,o){if(t!==null){if(n[nn]&2048&&!(r&mn.Self)){let s=dge(t,n,e,r,oc);if(s!==oc)return s}let i=$z(t,n,e,r,oc);if(i!==oc)return i}return Bz(n,e,r,o)}function $z(t,n,e,r,o){let i=cge(e);if(typeof i=="function"){if(!Cz(n,t,r))return r&mn.Host?Pz(o,e,r):Bz(n,e,r,o);try{let s;if(s=i(r),s==null&&!(r&mn.Optional))XR(e);else return s}finally{Dz()}}else if(typeof i=="number"){let s=null,a=Fz(t,n),l=X2,c=r&mn.Host?n[Qs][Ts]:null;for((a===-1||r&mn.SkipSelf)&&(l=a===-1?h5(t,n):n[a+8],l===X2||!ij(r,!1)?a=-1:(s=n[un],a=n4(l),n=r4(l,n)));a!==-1;){let u=n[un];if(oj(i,a,u.data)){let d=lge(a,n,e,s,r,c);if(d!==oc)return d}l=n[a+8],l!==X2&&ij(r,n[un].data[a+8]===c)&&oj(i,a,n)?(s=u,a=n4(l),n=r4(l,n)):a=-1}}return o}function lge(t,n,e,r,o,i){let s=n[un],a=s.data[t+8],l=r==null?u1(a)&&nR:r!=s&&(a.type&3)!==0,c=o&mn.Host&&i===a,u=UC(a,s,e,l,c);return u!==null?Iy(n,s,u,a):oc}function UC(t,n,e,r,o){let i=t.providerIndexes,s=n.data,a=i&1048575,l=t.directiveStart,c=t.directiveEnd,u=i>>20,d=r?a:a+u,p=o?a+u:c;for(let h=d;h<p;h++){let f=s[h];if(h<l&&e===f||h>=l&&f.type===e)return h}if(o){let h=s[l];if(h&&sc(h)&&h.type===e)return l}return null}function Iy(t,n,e,r){let o=t[e],i=n.data;if(o instanceof gm){let s=o;s.resolving&&Xj(nme(i[e]));let a=o4(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?Cs(s.injectImpl):null,u=Cz(t,r,mn.Default);try{o=t[e]=s.factory(void 0,i,t,r),n.firstCreatePass&&e>=r.directiveStart&&Yme(e,i[e],n)}finally{c!==null&&Cs(c),o4(a),s.resolving=!1,Dz()}}return o}function cge(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(Sy)?t[Sy]:void 0;return typeof n=="number"?n>=0?n&Rz:uge:n}function oj(t,n,e){let r=1<<t;return!!(e[n+(t>>Oz)]&r)}function ij(t,n){return!(t&mn.Self)&&!(t&mn.Host&&n)}var cm=class{_tNode;_lView;constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return Lz(this._tNode,this._lView,n,T4(r),e)}};function uge(){return new cm(Ai(),Ut())}function Kr(t){return Py(()=>{let n=t.prototype.constructor,e=n[qC]||oR(n),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[qC]||oR(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function oR(t){return Gj(t)?()=>{let n=oR(vi(t));return n&&n()}:um(t)}function dge(t,n,e,r,o){let i=t,s=n;for(;i!==null&&s!==null&&s[nn]&2048&&!e4(s);){let a=$z(i,s,e,r|mn.Self,oc);if(a!==oc)return a;let l=i.parent;if(!l){let c=s[cz];if(c){let u=c.get(e,oc,r);if(u!==oc)return u}l=Vz(s),s=s[c1]}i=l}return o}function Vz(t){let n=t[un],e=n.type;return e===2?n.declTNode:e===1?t[Ts]:null}function L4(t){return age(Ai(),t)}function sj(t,n=null,e=null,r){let o=jz(t,n,e,r);return o.resolveInjectorInitializers(),o}function jz(t,n=null,e=null,r,o=new Set){let i=[e||es,JR(t)];return r=r||(typeof t=="object"?void 0:Ss(t)),new Dy(i,n||I4(),r||null,o)}var Zt=class t{static THROW_IF_NOT_FOUND=lm;static NULL=new YC;static create(n,e){if(Array.isArray(n))return sj({name:""},e,n,"");{let r=n.name??"";return sj({name:r},n.parent,n.providers,r)}}static \u0275prov=_e({token:t,providedIn:"any",factory:()=>Qe(ez)});static __NG_ELEMENT_ID__=-1};var n1=class{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>L4(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},pge=new Me("");pge.__NG_ELEMENT_ID__=t=>{let n=Ai();if(n===null)throw new Ae(204,!1);if(n.type&2)return n.value;if(t&mn.Optional)return null;throw new Ae(204,!1)};var zz=!1,Uo=(()=>{class t{static __NG_ELEMENT_ID__=hge;static __NG_ENV_ID__=e=>e}return t})(),s4=class extends Uo{_lView;constructor(n){super(),this._lView=n}onDestroy(n){return yz(this._lView,n),()=>Ome(this._lView,n)}};function hge(){return new s4(Ut())}var fh=class{},f5=new Me("",{providedIn:"root",factory:()=>!1});var Hz=new Me(""),Uz=new Me(""),wh=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Zn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})();var iR=class extends ot{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,lz()&&(this.destroyRef=M(Uo,{optional:!0})??void 0,this.pendingTasks=M(wh,{optional:!0})??void 0)}emit(n){let e=dn(null);try{super.next(n)}finally{dn(e)}}subscribe(n,e,r){let o=n,i=e||(()=>null),s=r;if(n&&typeof n=="object"){let l=n;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return n instanceof Fn&&n.add(a),a}wrapInTimeout(n){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{n(e),r!==void 0&&this.pendingTasks?.remove(r)})}}},Qt=iR;function Ny(...t){}function Gz(t){let n,e;function r(){t=Ny;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{t(),r()})),()=>r()}function aj(t){return queueMicrotask(()=>t()),()=>{t=Ny}}var m5="isAngularZone",a4=m5+"_ID",fge=0,Rt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Qt(!1);onMicrotaskEmpty=new Qt(!1);onStable=new Qt(!1);onError=new Qt(!1);constructor(n){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=zz}=n;if(typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,vge(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(m5)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Ae(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,n,mge,Ny,Ny);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}},mge={};function g5(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gge(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function n(){Gz(()=>{t.callbackScheduled=!1,sR(t),t.isCheckStableRunning=!0,g5(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{n()}):t._outer.run(()=>{n()}),sR(t)}function vge(t){let n=()=>{gge(t)},e=fge++;t._inner=t._inner.fork({name:"angular",properties:{[m5]:!0,[a4]:e,[a4+e]:!0},onInvokeTask:(r,o,i,s,a,l)=>{if(wge(l))return r.invokeTask(i,s,a,l);try{return lj(t),r.invokeTask(i,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),cj(t)}},onInvoke:(r,o,i,s,a,l,c)=>{try{return lj(t),r.invoke(i,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!yge(l)&&n(),cj(t)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,sR(t),g5(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function sR(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function lj(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function cj(t){t._nesting--,g5(t)}var aR=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Qt;onMicrotaskEmpty=new Qt;onStable=new Qt;onError=new Qt;run(n,e,r){return n.apply(e,r)}runGuarded(n,e,r){return n.apply(e,r)}runOutsideAngular(n){return n()}runTask(n,e,r,o){return n.apply(e,r)}};function wge(t){return Wz(t,"__ignore_ng_zone__")}function yge(t){return Wz(t,"__scheduler_tick__")}function Wz(t,n){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[n]===!0}var al=class{_console=console;handleError(n){this._console.error("ERROR",n)}},xge=new Me("",{providedIn:"root",factory:()=>{let t=M(Rt),n=M(al);return e=>t.runOutsideAngular(()=>n.handleError(e))}}),l4=class{destroyed=!1;listeners=null;errorHandler=M(al,{optional:!0});destroyRef=M(Uo);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(n){if(this.destroyed)throw new Ae(953,!1);return(this.listeners??=[]).push(n),{unsubscribe:()=>{let e=this.listeners?.indexOf(n);e!==void 0&&e!==-1&&this.listeners?.splice(e,1)}}}emit(n){if(this.destroyed){console.warn(KR(953,!1));return}if(this.listeners===null)return;let e=dn(null);try{for(let r of this.listeners)try{r(n)}catch(o){this.errorHandler?.handleError(o)}}finally{dn(e)}}};function Vn(t){return new l4}function uj(t,n){return Uj(t,n)}function _ge(t){return Uj(C4,t)}var Z=(uj.required=_ge,uj);function kge(){return p1(Ai(),Ut())}function p1(t,n){return new _t(pc(t,n))}var _t=(()=>{class t{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=kge}return t})();function qz(t){return t instanceof _t?t.nativeElement:t}function $4(t){return typeof t=="function"&&t[oi]!==void 0}function Ze(t,n){let e=aA(t,n?.equal),r=e[oi];return e.set=o=>Yf(r,o),e.update=o=>cC(r,o),e.asReadonly=v5.bind(e),e}function v5(){let t=this[oi];if(t.readonlyFn===void 0){let n=()=>this();n[oi]=t,t.readonlyFn=n}return t.readonlyFn}function Kz(t){return $4(t)&&typeof t.set=="function"}function bge(){return this._results[Symbol.iterator]()}var r1=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ot}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let r=pme(n);(this._changesDetected=!dme(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=bge};function Zz(t){return(t.flags&128)===128}var Xz=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Xz||{}),Yz=new Map,Cge=0;function Sge(){return Cge++}function Mge(t){Yz.set(t[N4],t)}function lR(t){Yz.delete(t[N4])}var dj="__ngContext__";function h1(t,n){dh(n)?(t[dj]=n[N4],Mge(n)):t[dj]=n}function Qz(t){return eH(t[Ey])}function Jz(t){return eH(t[sl])}function eH(t){for(;t!==null&&!pd(t);)t=t[sl];return t}var cR;function tH(t){cR=t}function Tge(){if(cR!==void 0)return cR;if(typeof document<"u")return document;throw new Ae(210,!1)}var km=new Me("",{providedIn:"root",factory:()=>Dge}),Dge="ng",w5=new Me(""),so=new Me("",{providedIn:"platform",factory:()=>"unknown"});var bm=new Me(""),y5=new Me("",{providedIn:"root",factory:()=>Tge().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ege="h",Ige="b";var nH=!1,Nge=new Me("",{providedIn:"root",factory:()=>nH});var x5=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(x5||{}),Cm=new Me(""),pj=new Set;function cl(t){pj.has(t)||(pj.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var V4=(()=>{class t{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=Age}return t})();function Age(){return new V4(Ut(),Ai())}var q2=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(q2||{}),_5=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})(),rH=[q2.EarlyRead,q2.Write,q2.MixedReadWrite,q2.Read],oH=(()=>{class t{ngZone=M(Rt);scheduler=M(fh);errorHandler=M(al,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(Cm,{optional:!0})}execute(){let e=this.sequences.size>0;e&&er(16),this.executing=!0;for(let r of rH)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=o.hooks[r];return i(o.pipelinedValue)},o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&er(17)}register(e){let{view:r}=e;r!==void 0?((r[Z2]??=[]).push(e),d1(r),r[nn]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(x5.AFTER_NEXT_RENDER,e):e()}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})(),c4=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,e,r,o,i,s=null){this.impl=n,this.hooks=e,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let n=this.view?.[Z2];n&&(this.view[Z2]=n.filter(e=>e!==this))}};function k5(t,n){!n?.injector&&mh(k5);let e=n?.injector??M(Zt);return cl("NgAfterRender"),iH(t,e,n,!1)}function yi(t,n){!n?.injector&&mh(yi);let e=n?.injector??M(Zt);return cl("NgAfterNextRender"),iH(t,e,n,!0)}function Rge(t,n){if(t instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[n]=t,e}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function iH(t,n,e,r){let o=n.get(_5);o.impl??=n.get(oH);let i=n.get(Cm,null,{optional:!0}),s=e?.phase??q2.MixedReadWrite,a=e?.manualCleanup!==!0?n.get(Uo):null,l=n.get(V4,null,{optional:!0}),c=new c4(o.impl,Rge(t,s),l?.view,r,a,i?.snapshot(null));return o.impl.register(c),c}var Oge=()=>null;function sH(t,n,e=!1){return Oge(t,n,e)}function aH(t,n){let e=t.contentQueries;if(e!==null){let r=dn(null);try{for(let o=0;o<e.length;o+=2){let i=e[o],s=e[o+1];if(s!==-1){let a=t.data[s];O4(i),a.contentQueries(2,n[s],s)}}}finally{dn(r)}}}function uR(t,n,e){O4(0);let r=dn(null);try{n(t,e)}finally{dn(r)}}function b5(t,n,e){if(t5(n)){let r=dn(null);try{let o=n.directiveStart,i=n.directiveEnd;for(let s=o;s<i;s++){let a=t.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{dn(r)}}}var cc=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(cc||{});var $C;function Fge(){if($C===void 0&&($C=null,am.trustedTypes))try{$C=am.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return $C}function hj(t){return Fge()?.createScriptURL(t)||t}var u4=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zj})`}};function f1(t){return t instanceof u4?t.changingThisBreaksApplicationSecurity:t}function lH(t,n){let e=Pge(t);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${zj})`)}return e===n}function Pge(t){return t instanceof u4&&t.getTypeName()||null}var Bge=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Lge(t){return t=String(t),t.match(Bge)?t:"unsafe:"+t}var C5=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(C5||{});function $ge(t){let n=uH();return n?n.sanitize(C5.URL,t)||"":lH(t,"URL")?f1(t):Lge(M4(t))}function Vge(t){let n=uH();if(n)return hj(n.sanitize(C5.RESOURCE_URL,t)||"");if(lH(t,"ResourceURL"))return hj(f1(t));throw new Ae(904,!1)}function jge(t,n){return n==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||n==="href"&&(t==="base"||t==="link")?Vge:$ge}function cH(t,n,e){return jge(n,e)(t)}function uH(){let t=Ut();return t&&t[cd].sanitizer}var zge=/^>|^->|<!--|-->|--!>|<!-$/g,Hge=/(<|>)/g,Uge="\u200B$1\u200B";function Gge(t){return t.replace(zge,n=>n.replace(Hge,Uge))}function xi(t){return t.ownerDocument}function dH(t){return t instanceof Function?t():t}function Wge(t,n,e){let r=t.length;for(;;){let o=t.indexOf(n,e);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=n.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}e=o+1}}var pH="ng-template";function qge(t,n,e,r){let o=0;if(r){for(;o<n.length&&typeof n[o]=="string";o+=2)if(n[o]==="class"&&Wge(n[o+1].toLowerCase(),e,0)!==-1)return!0}else if(S5(t))return!1;if(o=n.indexOf(1,o),o>-1){let i;for(;++o<n.length&&typeof(i=n[o])=="string";)if(i.toLowerCase()===e)return!0}return!1}function S5(t){return t.type===4&&t.value!==pH}function Kge(t,n,e){let r=t.type===4&&!e?pH:t.value;return n===r}function Zge(t,n,e){let r=4,o=t.attrs,i=o!==null?Qge(o):0,s=!1;for(let a=0;a<n.length;a++){let l=n[a];if(typeof l=="number"){if(!s&&!il(r)&&!il(l))return!1;if(s&&il(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!Kge(t,l,e)||l===""&&n.length===1){if(il(r))return!1;s=!0}}else if(r&8){if(o===null||!qge(t,o,l,e)){if(il(r))return!1;s=!0}}else{let c=n[++a],u=Xge(l,o,S5(t),e);if(u===-1){if(il(r))return!1;s=!0;continue}if(c!==""){let d;if(u>i?d="":d=o[u+1].toLowerCase(),r&2&&c!==d){if(il(r))return!1;s=!0}}}}return il(r)||s}function il(t){return(t&1)===0}function Xge(t,n,e,r){if(n===null)return-1;let o=0;if(r||!e){let i=!1;for(;o<n.length;){let s=n[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=n[++o];for(;typeof a=="string";)a=n[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return Jge(n,t)}function hH(t,n,e=!1){for(let r=0;r<n.length;r++)if(Zge(t,n[r],e))return!0;return!1}function Yge(t){let n=t.attrs;if(n!=null){let e=n.indexOf(5);if((e&1)===0)return n[e+1]}return null}function Qge(t){for(let n=0;n<t.length;n++){let e=t[n];if(Nz(e))return n}return t.length}function Jge(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){let r=t[e];if(typeof r=="number")return-1;if(r===n)return e;e++}return-1}function e0e(t,n){e:for(let e=0;e<n.length;e++){let r=n[e];if(t.length===r.length){for(let o=0;o<t.length;o++)if(t[o]!==r[o])continue e;return!0}}return!1}function fj(t,n){return t?":not("+n.trim()+")":n}function t0e(t){let n=t[0],e=1,r=2,o="",i=!1;for(;e<t.length;){let s=t[e];if(typeof s=="string")if(r&2){let a=t[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!il(s)&&(n+=fj(i,o),o=""),r=s,i=i||!il(r);e++}return o!==""&&(n+=fj(i,o)),n}function n0e(t){return t.map(t0e).join(",")}function r0e(t){let n=[],e=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&n.push(i,t[++r]):o===8&&e.push(i);else{if(!il(o))break;o=i}r++}return e.length&&n.push(1,...e),n}var ul={};function o0e(t,n){return t.createText(n)}function i0e(t,n,e){t.setValue(n,e)}function s0e(t,n){return t.createComment(Gge(n))}function fH(t,n,e){return t.createElement(n,e)}function d4(t,n,e,r,o){t.insertBefore(n,e,r,o)}function mH(t,n,e){t.appendChild(n,e)}function mj(t,n,e,r,o){r!==null?d4(t,n,e,r,o):mH(t,n,e)}function a0e(t,n,e){t.removeChild(null,n,e)}function l0e(t,n,e){t.setAttribute(n,"style",e)}function c0e(t,n,e){e===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function gH(t,n,e){let{mergedAttrs:r,classes:o,styles:i}=e;r!==null&&tge(t,n,r),o!==null&&c0e(t,n,o),i!==null&&l0e(t,n,i)}function M5(t,n,e,r,o,i,s,a,l,c,u){let d=fo+r,p=d+o,h=u0e(d,p),f=typeof c=="function"?c():c;return h[un]={type:t,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:u}}function u0e(t,n){let e=[];for(let r=0;r<n;r++)e.push(r<t?null:ul);return e}function d0e(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=M5(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function T5(t,n,e,r,o,i,s,a,l,c,u){let d=n.blueprint.slice();return d[dd]=o,d[nn]=r|4|128|8|64|1024,(c!==null||t&&t[nn]&2048)&&(d[nn]|=2048),vz(d),d[Ni]=d[c1]=t,d[zo]=e,d[cd]=s||t&&t[cd],d[Gr]=a||t&&t[Gr],d[J2]=l||t&&t[J2]||null,d[Ts]=i,d[N4]=Sge(),d[Q2]=u,d[cz]=c,d[Qs]=n.type==2?t[Qs]:d,d}function p0e(t,n,e){let r=pc(n,t),o=d0e(e),i=t[cd].rendererFactory,s=D5(t,T5(t,o,null,vH(e),r,n,null,i.createRenderer(r,e),null,null,null));return t[n.index]=s}function vH(t){let n=16;return t.signals?n=4096:t.onPush&&(n=64),n}function wH(t,n,e,r){if(e===0)return-1;let o=n.length;for(let i=0;i<e;i++)n.push(r),t.blueprint.push(r),t.data.push(null);return o}function D5(t,n){return t[Ey]?t[ej][sl]=n:t[Ey]=n,t[ej]=n,n}function Y(t=1){yH(qr(),Ut(),gh()+t,!1)}function yH(t,n,e,r){if(!r)if((n[nn]&3)===3){let i=t.preOrderCheckHooks;i!==null&&zC(n,i,e)}else{let i=t.preOrderHooks;i!==null&&HC(n,i,0,e)}mm(e)}var j4=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(j4||{});function dR(t,n,e,r){let o=dn(null);try{let[i,s,a]=t.inputs[e],l=null;(s&j4.SignalBased)!==0&&(l=n[i][oi]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(n,r)),t.setInput!==null?t.setInput(n,l,r,e,i):dz(n,l,i,r)}finally{dn(o)}}function xH(t,n,e,r,o){let i=gh(),s=r&2;try{mm(-1),s&&n.length>fo&&yH(t,n,fo,!1),er(s?2:0,o),e(r,o)}finally{mm(i),er(s?3:1,o)}}function z4(t,n,e){w0e(t,n,e),(e.flags&64)===64&&y0e(t,n,e)}function E5(t,n,e=pc){let r=n.localNames;if(r!==null){let o=n.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?e(n,t):t[s];t[o++]=a}}}function h0e(t,n,e,r){let i=r.get(Nge,nH)||e===cc.ShadowDom,s=t.selectRootElement(n,i);return f0e(s),s}function f0e(t){m0e(t)}var m0e=()=>null;function g0e(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function I5(t,n,e,r,o,i,s,a){if(!a&&A5(n,t,e,r,o)){u1(n)&&v0e(e,n.index);return}if(n.type&3){let l=pc(n,e);r=g0e(r),o=s!=null?s(o,n.value||"",r):o,i.setProperty(l,r,o)}else n.type&12}function v0e(t,n){let e=lc(n,t);e[nn]&16||(e[nn]|=64)}function w0e(t,n,e){let r=e.directiveStart,o=e.directiveEnd;u1(e)&&p0e(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||i4(e,n);let i=e.initialInputs;for(let s=r;s<o;s++){let a=t.data[s],l=Iy(n,t,s,e);if(h1(l,n),i!==null&&b0e(n,s-r,l,a,e,i),sc(a)){let c=lc(e.index,n);c[zo]=Iy(n,t,s,e)}}}function y0e(t,n,e){let r=e.directiveStart,o=e.directiveEnd,i=e.index,s=Wme();try{mm(i);for(let a=r;a<o;a++){let l=t.data[a],c=n[a];tR(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&x0e(l,c)}}finally{mm(-1),tR(s)}}function x0e(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function N5(t,n){let e=t.directiveRegistry,r=null;if(e)for(let o=0;o<e.length;o++){let i=e[o];hH(n,i.selectors,!1)&&(r??=[],sc(i)?r.unshift(i):r.push(i))}return r}function _0e(t,n,e,r,o,i){let s=pc(t,n);k0e(n[Gr],s,i,t.value,e,r,o)}function k0e(t,n,e,r,o,i,s){if(i==null)t.removeAttribute(n,o,e);else{let a=s==null?M4(i):s(i,r||"",o);t.setAttribute(n,o,a,e)}}function b0e(t,n,e,r,o,i){let s=i[n];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];dR(r,e,l,c)}}function C0e(t,n){let e=t[J2],r=e?e.get(al,null):null;r&&r.handleError(n)}function A5(t,n,e,r,o){let i=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=n.data[c];dR(d,e[c],u,o),a=!0}if(i)for(let l of i){let c=e[l],u=n.data[l];dR(u,c,r,o),a=!0}return a}function S0e(t,n){let e=lc(n,t),r=e[un];M0e(r,e);let o=e[dd];o!==null&&e[Q2]===null&&(e[Q2]=sH(o,e[J2])),er(18),R5(r,e,e[zo]),er(19,e[zo])}function M0e(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}function R5(t,n,e){u5(n);try{let r=t.viewQuery;r!==null&&uR(1,r,e);let o=t.template;o!==null&&xH(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[ud]?.finishViewCreation(t),t.staticContentQueries&&aH(t,n),t.staticViewQueries&&uR(2,t.viewQuery,e);let i=t.components;i!==null&&T0e(n,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[nn]&=-5,d5()}}function T0e(t,n){for(let e=0;e<n.length;e++)S0e(t,n[e])}function zy(t,n,e,r){let o=dn(null);try{let i=n.tView,a=t[nn]&4096?4096:16,l=T5(t,i,e,a,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[n.index];l[dm]=c;let u=t[ud];return u!==null&&(l[ud]=u.createEmbeddedView(i)),R5(i,l,e),l}finally{dn(o)}}function o1(t,n){return!n||n.firstChild===null||Zz(t)}var D0e;function O5(t,n){return D0e(t,n)}var uc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(uc||{});function F5(t){return(t.flags&32)===32}function K2(t,n,e,r,o){if(r!=null){let i,s=!1;pd(r)?i=r:dh(r)&&(s=!0,r=r[dd]);let a=ac(r);t===0&&e!==null?o==null?mH(n,e,a):d4(n,e,a,o||null,!0):t===1&&e!==null?d4(n,e,a,o||null,!0):t===2?a0e(n,a,s):t===3&&n.destroyNode(a),i!=null&&L0e(n,t,i,e,o)}}function E0e(t,n){_H(t,n),n[dd]=null,n[Ts]=null}function I0e(t,n,e,r,o,i){r[dd]=o,r[Ts]=n,G4(t,r,e,1,o,i)}function _H(t,n){n[cd].changeDetectionScheduler?.notify(9),G4(t,n,n[Gr],2,null,null)}function N0e(t){let n=t[Ey];if(!n)return FA(t[un],t);for(;n;){let e=null;if(dh(n))e=n[Ey];else{let r=n[Ii];r&&(e=r)}if(!e){for(;n&&!n[sl]&&n!==t;)dh(n)&&FA(n[un],n),n=n[Ni];n===null&&(n=t),dh(n)&&FA(n[un],n),e=n&&n[sl]}n=e}}function P5(t,n){let e=t[e1],r=e.indexOf(n);e.splice(r,1)}function H4(t,n){if(Vy(n))return;let e=n[Gr];e.destroyNode&&G4(t,n,e,3,null,null),N0e(n)}function FA(t,n){if(Vy(n))return;let e=dn(null);try{n[nn]&=-129,n[nn]|=256,n[va]&&fy(n[va]),R0e(t,n),A0e(t,n),n[un].type===1&&n[Gr].destroy();let r=n[dm];if(r!==null&&pd(n[Ni])){r!==n[Ni]&&P5(r,n);let o=n[ud];o!==null&&o.detachView(t)}lR(n)}finally{dn(e)}}function A0e(t,n){let e=t.cleanup,r=n[QC];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(n[QC]=null);let o=n[uh];if(o!==null){n[uh]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=n[pm];if(i!==null){n[pm]=null;for(let s of i)s.destroy()}}function R0e(t,n){let e;if(t!=null&&(e=t.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let o=n[e[r]];if(!(o instanceof gm)){let i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],l=i[s+1];er(4,a,l);try{l.call(a)}finally{er(5,a,l)}}else{er(4,o,i);try{i.call(o)}finally{er(5,o,i)}}}}}function kH(t,n,e){return O0e(t,n.parent,e)}function O0e(t,n,e){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return e[dd];if(u1(r)){let{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===cc.None||o===cc.Emulated)return null}return pc(r,e)}function bH(t,n,e){return P0e(t,n,e)}function F0e(t,n,e){return t.type&40?pc(t,e):null}var P0e=F0e,gj;function U4(t,n,e,r){let o=kH(t,r,n),i=n[Gr],s=r.parent||n[Ts],a=bH(s,r,n);if(o!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)mj(i,o,e[l],a,!1);else mj(i,o,e,a,!1);gj!==void 0&&gj(i,r,n,e,o)}function Cy(t,n){if(n!==null){let e=n.type;if(e&3)return pc(n,t);if(e&4)return pR(-1,t[n.index]);if(e&8){let r=n.child;if(r!==null)return Cy(t,r);{let o=t[n.index];return pd(o)?pR(-1,o):ac(o)}}else{if(e&128)return Cy(t,n.next);if(e&32)return O5(n,t)()||ac(t[n.index]);{let r=CH(t,n);if(r!==null){if(Array.isArray(r))return r[0];let o=fm(t[Qs]);return Cy(o,r)}else return Cy(t,n.next)}}}return null}function CH(t,n){if(n!==null){let r=t[Qs][Ts],o=n.projection;return r.projection[o]}return null}function pR(t,n){let e=Ii+t+1;if(e<n.length){let r=n[e],o=r[un].firstChild;if(o!==null)return Cy(r,o)}return n[hm]}function B5(t,n,e,r,o,i,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],l=e.type;if(s&&n===0&&(a&&h1(ac(a),r),e.flags|=2),!F5(e))if(l&8)B5(t,n,e.child,r,o,i,!1),K2(n,t,o,a,i);else if(l&32){let c=O5(e,r),u;for(;u=c();)K2(n,t,o,u,i);K2(n,t,o,a,i)}else l&16?SH(t,n,r,e,o,i):K2(n,t,o,a,i);e=s?e.projectionNext:e.next}}function G4(t,n,e,r,o,i){B5(e,r,t.firstChild,n,o,i,!1)}function B0e(t,n,e){let r=n[Gr],o=kH(t,e,n),i=e.parent||n[Ts],s=bH(i,e,n);SH(r,0,n,e,o,s)}function SH(t,n,e,r,o,i){let s=e[Qs],l=s[Ts].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];K2(n,t,o,u,i)}else{let c=l,u=s[Ni];Zz(r)&&(c.flags|=128),B5(t,n,c,u,o,i,!0)}}function L0e(t,n,e,r,o){let i=e[hm],s=ac(e);i!==s&&K2(n,t,r,i,o);for(let a=Ii;a<e.length;a++){let l=e[a];G4(l[un],l,t,n,r,i)}}function $0e(t,n,e,r,o){if(n)o?t.addClass(e,r):t.removeClass(e,r);else{let i=r.indexOf("-")===-1?void 0:uc.DashCase;o==null?t.removeStyle(e,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=uc.Important),t.setStyle(e,r,o,i))}}function p4(t,n,e,r,o=!1){for(;e!==null;){if(e.type===128){e=o?e.projectionNext:e.next;continue}let i=n[e.index];i!==null&&r.push(ac(i)),pd(i)&&V0e(i,r);let s=e.type;if(s&8)p4(t,n,e.child,r);else if(s&32){let a=O5(e,n),l;for(;l=a();)r.push(l)}else if(s&16){let a=CH(n,e);if(Array.isArray(a))r.push(...a);else{let l=fm(n[Qs]);p4(l[un],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}function V0e(t,n){for(let e=Ii;e<t.length;e++){let r=t[e],o=r[un].firstChild;o!==null&&p4(r[un],r,o,n)}t[hm]!==t[dd]&&n.push(t[hm])}function MH(t){if(t[Z2]!==null){for(let n of t[Z2])n.impl.addSequence(n);t[Z2].length=0}}var TH=[];function j0e(t){return t[va]??z0e(t)}function z0e(t){let n=TH.pop()??Object.create(U0e);return n.lView=t,n}function H0e(t){t.lView[va]!==t&&(t.lView=null,TH.push(t))}var U0e=ht(le({},Zf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{d1(t.lView)},consumerOnSignalRead(){this.lView[va]=this}});function G0e(t){let n=t[va]??Object.create(W0e);return n.lView=t,n}var W0e=ht(le({},Zf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let n=fm(t.lView);for(;n&&!DH(n[un]);)n=fm(n);n&&wz(n)},consumerOnSignalRead(){this.lView[va]=this}});function DH(t){return t.type!==2}function EH(t){if(t[pm]===null)return;let n=!0;for(;n;){let e=!1;for(let r of t[pm])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=e&&!!(t[nn]&8192)}}var q0e=100;function IH(t,n=!0,e=0){let o=t[cd].rendererFactory,i=!1;i||o.begin?.();try{K0e(t,e)}catch(s){throw n&&C0e(t,s),s}finally{i||o.end?.()}}function K0e(t,n){let e=kz();try{t4(!0),hR(t,n);let r=0;for(;R4(t);){if(r===q0e)throw new Ae(103,!1);r++,hR(t,1)}}finally{t4(e)}}function Z0e(t,n,e,r){if(Vy(n))return;let o=n[nn],i=!1,s=!1;u5(n);let a=!0,l=null,c=null;i||(DH(t)?(c=j0e(n),l=Xf(c)):rA()===null?(a=!1,c=G0e(n),l=Xf(c)):n[va]&&(fy(n[va]),n[va]=null));try{vz(n),Hme(t.bindingStartIndex),e!==null&&xH(t,n,e,2,r);let u=(o&3)===3;if(!i)if(u){let h=t.preOrderCheckHooks;h!==null&&zC(n,h,null)}else{let h=t.preOrderHooks;h!==null&&HC(n,h,0,null),RA(n,0)}if(s||X0e(n),EH(n),NH(n,0),t.contentQueries!==null&&aH(t,n),!i)if(u){let h=t.contentCheckHooks;h!==null&&zC(n,h)}else{let h=t.contentHooks;h!==null&&HC(n,h,1),RA(n,1)}Q0e(t,n);let d=t.components;d!==null&&RH(n,d,0);let p=t.viewQuery;if(p!==null&&uR(2,p,r),!i)if(u){let h=t.viewCheckHooks;h!==null&&zC(n,h)}else{let h=t.viewHooks;h!==null&&HC(n,h,2),RA(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[AA]){for(let h of n[AA])h();n[AA]=null}i||(MH(n),n[nn]&=-73)}catch(u){throw i||d1(n),u}finally{c!==null&&(R2(c,l),a&&H0e(c)),d5()}}function NH(t,n){for(let e=Qz(t);e!==null;e=Jz(e))for(let r=Ii;r<e.length;r++){let o=e[r];AH(o,n)}}function X0e(t){for(let n=Qz(t);n!==null;n=Jz(n)){if(!(n[nn]&2))continue;let e=n[e1];for(let r=0;r<e.length;r++){let o=e[r];wz(o)}}}function Y0e(t,n,e){er(18);let r=lc(n,t);AH(r,e),er(19,r[zo])}function AH(t,n){r5(t)&&hR(t,n)}function hR(t,n){let r=t[un],o=t[nn],i=t[va],s=!!(n===0&&o&16);if(s||=!!(o&64&&n===0),s||=!!(o&1024),s||=!!(i?.dirty&&hy(i)),s||=!1,i&&(i.dirty=!1),t[nn]&=-9217,s)Z0e(r,t,r.template,t[zo]);else if(o&8192){EH(t),NH(t,1);let a=r.components;a!==null&&RH(t,a,1),MH(t)}}function RH(t,n,e){for(let r=0;r<n.length;r++)Y0e(t,n[r],e)}function Q0e(t,n){let e=t.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let o=e[r];if(o<0)mm(~o);else{let i=o,s=e[++r],a=e[++r];Gme(s,i);let l=n[i];er(24,l),a(2,l),er(25,l)}}}finally{mm(-1)}}function L5(t,n){let e=kz()?64:1088;for(t[cd].changeDetectionScheduler?.notify(n);t;){t[nn]|=e;let r=fm(t);if(e4(t)&&!r)return t;t=r}return null}function OH(t,n,e,r){return[t,!0,0,n,null,r,null,e,null,null]}function FH(t,n){let e=Ii+n;if(e<t.length)return t[e]}function Hy(t,n,e,r=!0){let o=n[un];if(J0e(o,n,t,e),r){let s=pR(e,t),a=n[Gr],l=a.parentNode(t[hm]);l!==null&&I0e(o,t[Ts],a,n,l,s)}let i=n[Q2];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function PH(t,n){let e=Ay(t,n);return e!==void 0&&H4(e[un],e),e}function Ay(t,n){if(t.length<=Ii)return;let e=Ii+n,r=t[e];if(r){let o=r[dm];o!==null&&o!==t&&P5(o,r),n>0&&(t[e-1][sl]=r[sl]);let i=XC(t,Ii+n);E0e(r[un],r);let s=i[ud];s!==null&&s.detachView(i[un]),r[Ni]=null,r[sl]=null,r[nn]&=-129}return r}function J0e(t,n,e,r){let o=Ii+r,i=e.length;r>0&&(e[o-1][sl]=n),r<i-Ii?(n[sl]=e[o],Jj(e,Ii+r,n)):(e.push(n),n[sl]=null),n[Ni]=e;let s=n[dm];s!==null&&e!==s&&BH(s,n);let a=n[ud];a!==null&&a.insertView(t),JA(n),n[nn]|=128}function BH(t,n){let e=t[e1],r=n[Ni];if(dh(r))t[nn]|=2;else{let o=r[Ni][Qs];n[Qs]!==o&&(t[nn]|=2)}e===null?t[e1]=[n]:e.push(n)}var Ry=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let n=this._lView,e=n[un];return p4(e,n,e.firstChild,[])}constructor(n,e,r=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=r}get context(){return this._lView[zo]}set context(n){this._lView[zo]=n}get destroyed(){return Vy(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Ni];if(pd(n)){let e=n[JC],r=e?e.indexOf(this):-1;r>-1&&(Ay(n,r),XC(e,r))}this._attachedToViewContainer=!1}H4(this._lView[un],this._lView)}onDestroy(n){yz(this._lView,n)}markForCheck(){L5(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[nn]&=-129}reattach(){JA(this._lView),this._lView[nn]|=128}detectChanges(){this._lView[nn]|=1024,IH(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=e4(this._lView),e=this._lView[dm];e!==null&&!n&&P5(e,this._lView),_H(this._lView[un],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=n;let e=e4(this._lView),r=this._lView[dm];r!==null&&!e&&BH(r,this._lView),JA(this._lView)}};var Gn=(()=>{class t{static __NG_ELEMENT_ID__=n2e}return t})(),e2e=Gn,t2e=class extends e2e{_declarationLView;_declarationTContainer;elementRef;constructor(n,e,r){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,r){let o=zy(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:r});return new Ry(o)}};function n2e(){return W4(Ai(),Ut())}function W4(t,n){return t.type&4?new t2e(n,t,p1(t,n)):null}function Uy(t,n,e,r,o){let i=t.data[n];if(i===null)i=r2e(t,n,e,r,o),Ume()&&(i.flags|=32);else if(i.type&64){i.type=e,i.value=r,i.attrs=o;let s=jme();i.injectorIndex=s===null?-1:s.injectorIndex}return xm(i,!0),i}function r2e(t,n,e,r,o){let i=_z(),s=a5(),a=s?i:i&&i.parent,l=t.data[n]=i2e(t,a,e,n,r,o);return o2e(t,l,i,s),l}function o2e(t,n,e,r){t.firstChild===null&&(t.firstChild=n),e!==null&&(r?e.child==null&&n.parent!==null&&(e.child=n):e.next===null&&(e.next=n,n.prev=e))}function i2e(t,n,e,r,o,i){let s=n?n.injectorIndex:-1,a=0;return xz()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Ret=new RegExp(`^(\\d+)*(${Ige}|${Ege})*(.*)`);var s2e=()=>null;function i1(t,n){return s2e(t,n)}var a2e=class{},LH=class{},fR=class{resolveComponentFactory(n){throw Error(`No component factory found for ${Ss(n)}.`)}},q4=class{static NULL=new fR},ko=class{},Zr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>l2e()}return t})();function l2e(){let t=Ut(),n=Ai(),e=lc(n.index,t);return(dh(e)?e:t)[Gr]}var c2e=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:()=>null})}return t})();var PA={},mR=class{injector;parentInjector;constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){r=T4(r);let o=this.injector.get(n,PA,r);return o!==PA||e===PA?o:this.parentInjector.get(n,e,r)}};function gR(t,n,e){let r=e?t.styles:null,o=e?t.classes:null,i=0;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];if(typeof a=="number")i=a;else if(i==1)o=GA(o,a);else if(i==2){let l=a,c=n[++s];r=GA(r,l+": "+c+";")}}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=o:t.classesWithoutHost=o}function qt(t,n=mn.Default){let e=Ut();if(e===null)return Qe(t,n);let r=Ai();return Lz(r,e,vi(t),n)}function $H(){let t="invalid";throw new Error(t)}function $5(t,n,e,r,o){let i=r===null?null:{"":-1},s=o(t,e);if(s!==null){let a,l=null,c=null,u=d2e(s);u===null?a=s:[a,l,c]=u,f2e(t,n,e,a,i,l,c)}i!==null&&r!==null&&u2e(e,r,i)}function u2e(t,n,e){let r=t.localNames=[];for(let o=0;o<n.length;o+=2){let i=e[n[o+1]];if(i==null)throw new Ae(-301,!1);r.push(n[o],i)}}function d2e(t){let n=null,e=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&sc(a)&&(n=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let r=null,o=null,i=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],o??=new Map,i??=new Map,p2e(s,r,i,o)),s===n&&(r??=[],r.push(s));return r!==null?(r.push(...n===null?t:t.slice(1)),[r,o,i]):null}function p2e(t,n,e,r){let o=n.length;t.findHostDirectiveDefs(t,n,r),e.set(t,[o,n.length-1])}function h2e(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function f2e(t,n,e,r,o,i,s){let a=r.length,l=!1;for(let p=0;p<a;p++){let h=r[p];!l&&sc(h)&&(l=!0,h2e(t,e,p)),rR(i4(e,n),t,h.type)}x2e(e,t.data.length,a);for(let p=0;p<a;p++){let h=r[p];h.providersResolver&&h.providersResolver(h)}let c=!1,u=!1,d=wH(t,n,a,null);a>0&&(e.directiveToIndex=new Map);for(let p=0;p<a;p++){let h=r[p];if(e.mergedAttrs=t1(e.mergedAttrs,h.hostAttrs),g2e(t,e,n,d,h),y2e(d,h,o),s!==null&&s.has(h)){let[m,g]=s.get(h);e.directiveToIndex.set(h.type,[d,m+e.directiveStart,g+e.directiveStart])}else(i===null||!i.has(h))&&e.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(e.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(e.flags|=64);let f=h.type.prototype;!c&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),c=!0),!u&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}m2e(t,e,i)}function m2e(t,n,e){for(let r=n.directiveStart;r<n.directiveEnd;r++){let o=t.data[r];if(e===null||!e.has(o))vj(0,n,o,r),vj(1,n,o,r),yj(n,r,!1);else{let i=e.get(o);wj(0,n,i,r),wj(1,n,i,r),yj(n,r,!0)}}}function vj(t,n,e,r){let o=t===0?e.inputs:e.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;t===0?s=n.inputs??={}:s=n.outputs??={},s[i]??=[],s[i].push(r),VH(n,i)}}function wj(t,n,e,r){let o=t===0?e.inputs:e.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;t===0?a=n.hostDirectiveInputs??={}:a=n.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),VH(n,s)}}function VH(t,n){n==="class"?t.flags|=8:n==="style"&&(t.flags|=16)}function yj(t,n,e){let{attrs:r,inputs:o,hostDirectiveInputs:i}=t;if(r===null||!e&&o===null||e&&i===null||S5(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&o.hasOwnProperty(l)){let c=o[l];for(let u of c)if(u===n){s??=[],s.push(l,r[a+1]);break}}else if(e&&i.hasOwnProperty(l)){let c=i[l];for(let u=0;u<c.length;u+=2)if(c[u]===n){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function g2e(t,n,e,r,o){t.data[r]=o;let i=o.factory||(o.factory=um(o.type,!0)),s=new gm(i,sc(o),qt);t.blueprint[r]=s,e[r]=s,v2e(t,n,r,wH(t,e,o.hostVars,ul),o)}function v2e(t,n,e,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~n.index;w2e(s)!=a&&s.push(a),s.push(e,r,i)}}function w2e(t){let n=t.length;for(;n>0;){let e=t[--n];if(typeof e=="number"&&e<0)return e}return 0}function y2e(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;sc(n)&&(e[""]=t)}}function x2e(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function jH(t,n,e,r,o,i,s,a){let l=n.consts,c=hh(l,s),u=Uy(n,t,2,r,c);return i&&$5(n,e,u,hh(l,a),o),u.mergedAttrs=t1(u.mergedAttrs,u.attrs),u.attrs!==null&&gR(u,u.attrs,!1),u.mergedAttrs!==null&&gR(u,u.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,u),u}function zH(t,n){p5(t,n),t5(n)&&t.queries.elementEnd(n)}var h4=class extends q4{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=ph(n);return new vm(e,this.ngModule)}};function _2e(t){return Object.keys(t).map(n=>{let[e,r,o]=t[n],i={propName:e,templateName:n,isSignal:(r&j4.SignalBased)!==0};return o&&(i.transform=o),i})}function k2e(t){return Object.keys(t).map(n=>({propName:t[n],templateName:n}))}function b2e(t,n,e){let r=n instanceof io?n:n?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new mR(e,r):e}function C2e(t){let n=t.get(ko,null);if(n===null)throw new Ae(407,!1);let e=t.get(c2e,null),r=t.get(fh,null);return{rendererFactory:n,sanitizer:e,changeDetectionScheduler:r}}function S2e(t,n){let e=(t.selectors[0][0]||"div").toLowerCase();return fH(n,e,e==="svg"?mz:e==="math"?Ime:null)}var vm=class extends LH{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=_2e(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=k2e(this.componentDef.outputs),this.cachedOutputs}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=n0e(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!e}create(n,e,r,o){er(22);let i=dn(null);try{let s=this.componentDef,a=r?["ng-version","19.2.6"]:r0e(this.componentDef.selectors[0]),l=M5(0,null,null,1,0,null,null,null,null,[a],null),c=b2e(s,o||this.ngModule,n),u=C2e(c),d=u.rendererFactory.createRenderer(null,s),p=r?h0e(d,r,s.encapsulation,c):S2e(s,d),h=T5(null,l,null,512|vH(s),null,null,u,d,c,null,sH(p,c,!0));h[fo]=p,u5(h);let f=null;try{let m=jH(fo,l,h,"#host",()=>[this.componentDef],!0,0);p&&(gH(d,p,m),h1(p,h)),z4(l,h,m),b5(l,m,h),zH(l,m),e!==void 0&&M2e(m,this.ngContentSelectors,e),f=lc(m.index,h),h[zo]=f[zo],R5(l,h,null)}catch(m){throw f!==null&&lR(f),lR(h),m}finally{er(23),d5()}return new vR(this.componentType,h)}finally{dn(i)}}},vR=class extends a2e{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,e){super(),this._rootLView=e,this._tNode=n5(e[un],fo),this.location=p1(this._tNode,e),this.instance=lc(this._tNode.index,e)[zo],this.hostView=this.changeDetectorRef=new Ry(e,void 0,!1),this.componentType=n}setInput(n,e){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let o=this._rootLView,i=A5(r,o[un],o,n,e);this.previousInputValues.set(n,e);let s=lc(r.index,o);L5(s,1)}get injector(){return new cm(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function M2e(t,n,e){let r=t.projection=[];for(let o=0;o<n.length;o++){let i=e[o];r.push(i!=null&&i.length?Array.from(i):null)}}var _r=(()=>{class t{static __NG_ELEMENT_ID__=T2e}return t})();function T2e(){let t=Ai();return UH(t,Ut())}var D2e=_r,HH=class extends D2e{_lContainer;_hostTNode;_hostLView;constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return p1(this._hostTNode,this._hostLView)}get injector(){return new cm(this._hostTNode,this._hostLView)}get parentInjector(){let n=h5(this._hostTNode,this._hostLView);if(Az(n)){let e=r4(n,this._hostLView),r=n4(n),o=e[un].data[r+8];return new cm(o,e)}else return new cm(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=xj(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-Ii}createEmbeddedView(n,e,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=i1(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},i,s);return this.insertImpl(a,o,o1(this._hostTNode,s)),a}createComponent(n,e,r,o,i){let s=n&&!Mme(n),a;if(s)a=e;else{let f=e||{};a=f.index,r=f.injector,o=f.projectableNodes,i=f.environmentInjector||f.ngModuleRef}let l=s?n:new vm(ph(n)),c=r||this.parentInjector;if(!i&&l.ngModule==null){let m=(s?c:this.parentInjector).get(io,null);m&&(i=m)}let u=ph(l.componentType??{}),d=i1(this._lContainer,u?.id??null),p=d?.firstChild??null,h=l.create(c,o,p,i);return this.insertImpl(h.hostView,a,o1(this._hostTNode,d)),h}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,r){let o=n._lView;if(Ame(o)){let a=this.indexOf(n);if(a!==-1)this.detach(a);else{let l=o[Ni],c=new HH(l,l[Ts],l[Ni]);c.detach(c.indexOf(n))}}let i=this._adjustIndex(e),s=this._lContainer;return Hy(s,o,i,r),n.attachToViewContainerRef(),Jj(BA(s),i,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=xj(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),r=Ay(this._lContainer,e);r&&(XC(BA(this._lContainer),e),H4(r[un],r))}detach(n){let e=this._adjustIndex(n,-1),r=Ay(this._lContainer,e);return r&&XC(BA(this._lContainer),e)!=null?new Ry(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function xj(t){return t[JC]}function BA(t){return t[JC]||(t[JC]=[])}function UH(t,n){let e,r=n[t.index];return pd(r)?e=r:(e=OH(r,n,null,t),n[t.index]=e,D5(n,e)),I2e(e,n,t,r),new HH(e,t,n)}function E2e(t,n){let e=t[Gr],r=e.createComment(""),o=pc(n,t),i=e.parentNode(o);return d4(e,i,r,e.nextSibling(o),!1),r}var I2e=R2e,N2e=()=>!1;function A2e(t,n,e){return N2e(t,n,e)}function R2e(t,n,e,r){if(t[hm])return;let o;e.type&8?o=ac(r):o=E2e(n,e),t[hm]=o}var wR=class t{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},yR=class t{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let r=n.contentQueries!==null?n.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){let s=e.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)j5(n,e).matches!==null&&this.queries[e].setDirty()}},f4=class{flags;read;predicate;constructor(n,e,r=null){this.flags=e,this.read=r,typeof n=="string"?this.predicate=L2e(n):this.predicate=n}},xR=class t{queries;constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){let o=e!==null?e.length:0,i=this.getByIndex(r).embeddedTView(n,o);i&&(i.indexInDeclarationView=r,e!==null?e.push(i):e=[i])}return e!==null?new t(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},_R=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,e=-1){this.metadata=n,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(n,e,O2e(e,i)),this.matchTNodeWithReadOption(n,e,UC(e,n,i,!1,!1))}else r===Gn?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,UC(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===_t||o===_r||o===Gn&&e.type&4)this.addMatch(e.index,-2);else{let i=UC(e,n,o,!1,!1);i!==null&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function O2e(t,n){let e=t.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1]}return null}function F2e(t,n){return t.type&11?p1(t,n):t.type&4?W4(t,n):null}function P2e(t,n,e,r){return e===-1?F2e(n,t):e===-2?B2e(t,n,r):Iy(t,t[un],e,n)}function B2e(t,n,e){if(e===_t)return p1(n,t);if(e===Gn)return W4(n,t);if(e===_r)return UH(n,t)}function GH(t,n,e,r){let o=n[ud].queries[r];if(o.matches===null){let i=t.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=i[c];a.push(P2e(n,u,s[l+1],e.metadata.read))}}o.matches=a}return o.matches}function kR(t,n,e,r){let o=t.queries.getByIndex(e),i=o.matches;if(i!==null){let s=GH(t,n,o,e);for(let a=0;a<i.length;a+=2){let l=i[a];if(l>0)r.push(s[a/2]);else{let c=i[a+1],u=n[-l];for(let d=Ii;d<u.length;d++){let p=u[d];p[dm]===p[Ni]&&kR(p[un],p,c,r)}if(u[e1]!==null){let d=u[e1];for(let p=0;p<d.length;p++){let h=d[p];kR(h[un],h,c,r)}}}}}return r}function V5(t,n){return t[ud].queries[n].queryList}function WH(t,n,e){let r=new r1((e&4)===4);return Fme(t,n,r,r.destroy),(n[ud]??=new yR).queries.push(new wR(r))-1}function qH(t,n,e){let r=qr();return r.firstCreatePass&&(ZH(r,new f4(t,n,e),-1),(n&2)===2&&(r.staticViewQueries=!0)),WH(r,Ut(),n)}function KH(t,n,e,r){let o=qr();if(o.firstCreatePass){let i=Ai();ZH(o,new f4(n,e,r),i.index),$2e(o,t),(e&2)===2&&(o.staticContentQueries=!0)}return WH(o,Ut(),e)}function L2e(t){return t.split(",").map(n=>n.trim())}function ZH(t,n,e){t.queries===null&&(t.queries=new xR),t.queries.track(new _R(n,e))}function $2e(t,n){let e=t.contentQueries||(t.contentQueries=[]),r=e.length?e[e.length-1]:-1;n!==r&&e.push(t.queries.length-1,n)}function j5(t,n){return t.queries.getByIndex(n)}function XH(t,n){let e=t[un],r=j5(e,n);return r.crossesNgTemplate?kR(e,t,n,[]):GH(e,t,r,n)}function z5(t,n,e){let r,o=lC(()=>{r._dirtyCounter();let i=j2e(r,t);if(n&&i===void 0)throw new Ae(-951,!1);return i});return r=o[oi],r._dirtyCounter=Ze(0),r._flatValue=void 0,o}function YH(t){return z5(!0,!1,t)}function QH(t){return z5(!0,!0,t)}function V2e(t){return z5(!1,!1,t)}function JH(t,n){let e=t[oi];e._lView=Ut(),e._queryIndex=n,e._queryList=V5(e._lView,n),e._queryList.onDirty(()=>e._dirtyCounter.update(r=>r+1))}function j2e(t,n){let e=t._lView,r=t._queryIndex;if(e===void 0||r===void 0||e[nn]&4)return n?void 0:es;let o=V5(e,r),i=XH(e,r);return o.reset(i,qz),n?o.first:o._changesDetected||t._flatValue===void 0?t._flatValue=o.toArray():t._flatValue}function _j(t,n){return YH(n)}function z2e(t,n){return QH(n)}var bo=(_j.required=z2e,_j);function kj(t,n){return YH(n)}function H2e(t,n){return QH(n)}var hd=(kj.required=H2e,kj);function Sm(t,n){return V2e(n)}function eU(t,n){let e=Object.create(Hj),r=new l4;e.value=t;function o(){return ah(e),bj(e.value),e.value}return o[oi]=e,o.asReadonly=v5.bind(o),o.set=i=>{e.equal(e.value,i)||(Yf(e,i),r.emit(i))},o.update=i=>{bj(e.value),o.set(i(e.value))},o.subscribe=r.subscribe.bind(r),o.destroyRef=r.destroyRef,o}function bj(t){if(t===C4)throw new Ae(952,!1)}function Cj(t,n){return eU(t,n)}function U2e(t){return eU(C4,t)}var si=(Cj.required=U2e,Cj);var dc=class{},H5=class{};function tU(t,n){return new m4(t,n??null,[])}var m4=class extends dc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new h4(this);constructor(n,e,r,o=!0){super(),this.ngModuleType=n,this._parent=e;let i=nz(n);this._bootstrapComponents=dH(i.bootstrap),this._r3Injector=jz(n,e,[{provide:dc,useValue:this},{provide:q4,useValue:this.componentFactoryResolver},...r],Ss(n),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},bR=class extends H5{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new m4(this.moduleType,n,[])}};var g4=class extends dc{injector;componentFactoryResolver=new h4(this);instance=null;constructor(n){super();let e=new Dy([...n.providers,{provide:dc,useValue:this},{provide:q4,useValue:this.componentFactoryResolver}],n.parent||I4(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Gy(t,n,e=null){return new g4({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}var G2e=(()=>{class t{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=oz(!1,e.type),o=r.length>0?Gy([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,o)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=_e({token:t,providedIn:"environment",factory:()=>new t(Qe(io))})}return t})();function Ie(t){return Py(()=>{let n=nU(t),e=ht(le({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Xz.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:n.standalone?o=>o.get(G2e).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||cc.Emulated,styles:t.styles||es,_:null,schemas:t.schemas||null,tView:null,id:""});n.standalone&&cl("NgStandalone"),rU(e);let r=t.dependencies;return e.directiveDefs=Sj(r,!1),e.pipeDefs=Sj(r,!0),e.id=X2e(e),e})}function W2e(t){return ph(t)||rz(t)}function q2e(t){return t!==null}function Et(t){return Py(()=>({type:t.type,bootstrap:t.bootstrap||es,declarations:t.declarations||es,imports:t.imports||es,exports:t.exports||es,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function K2e(t,n){if(t==null)return ic;let e={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i,s,a,l;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,l=o[3]||null):(i=o,s=o,a=j4.None,l=null),e[i]=[r,a,l],n[i]=s}return e}function Z2e(t){if(t==null)return ic;let n={};for(let e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function me(t){return Py(()=>{let n=nU(t);return rU(n),n})}function yh(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function nU(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputConfig:t.inputs||ic,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||es,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:K2e(t.inputs,n),outputs:Z2e(t.outputs),debugInfo:null}}function rU(t){t.features?.forEach(n=>n(t))}function Sj(t,n){if(!t)return null;let e=n?gme:W2e;return()=>(typeof t=="function"?t():t).map(r=>e(r)).filter(q2e)}function X2e(t){let n=0,e=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,e,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let i of r.join("|"))n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function Y2e(t){return Object.getPrototypeOf(t.prototype).constructor}function Mn(t){let n=Y2e(t.type),e=!0,r=[t];for(;n;){let o;if(sc(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ae(903,!1);o=n.\u0275dir}if(o){if(e){r.push(o);let s=t;s.inputs=LA(t.inputs),s.declaredInputs=LA(t.declaredInputs),s.outputs=LA(t.outputs);let a=o.hostBindings;a&&n1e(t,a);let l=o.viewQuery,c=o.contentQueries;if(l&&e1e(t,l),c&&t1e(t,c),Q2e(t,o),Kfe(t.outputs,o.outputs),sc(o)&&o.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(t),a===Mn&&(e=!1)}}n=Object.getPrototypeOf(n)}J2e(r)}function Q2e(t,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;let r=n.inputs[e];r!==void 0&&(t.inputs[e]=r,t.declaredInputs[e]=n.declaredInputs[e])}}function J2e(t){let n=0,e=null;for(let r=t.length-1;r>=0;r--){let o=t[r];o.hostVars=n+=o.hostVars,o.hostAttrs=t1(o.hostAttrs,e=t1(e,o.hostAttrs))}}function LA(t){return t===ic?{}:t===es?[]:t}function e1e(t,n){let e=t.viewQuery;e?t.viewQuery=(r,o)=>{n(r,o),e(r,o)}:t.viewQuery=n}function t1e(t,n){let e=t.contentQueries;e?t.contentQueries=(r,o,i)=>{n(r,o,i),e(r,o,i)}:t.contentQueries=n}function n1e(t,n){let e=t.hostBindings;e?t.hostBindings=(r,o)=>{n(r,o),e(r,o)}:t.hostBindings=n}function Pt(t){let n=e=>{let r=Array.isArray(t);e.hostDirectives===null?(e.findHostDirectiveDefs=oU,e.hostDirectives=r?t.map(CR):[t]):r?e.hostDirectives.unshift(...t.map(CR)):e.hostDirectives.unshift(t)};return n.ngInherit=!0,n}function oU(t,n,e){if(t.hostDirectives!==null)for(let r of t.hostDirectives)if(typeof r=="function"){let o=r();for(let i of o)Mj(CR(i),n,e)}else Mj(r,n,e)}function Mj(t,n,e){let r=rz(t.directive);r1e(r.declaredInputs,t.inputs),oU(r,n,e),e.set(r,t),n.push(r)}function CR(t){return typeof t=="function"?{directive:vi(t),inputs:ic,outputs:ic}:{directive:vi(t.directive),inputs:Tj(t.inputs),outputs:Tj(t.outputs)}}function Tj(t){if(t===void 0||t.length===0)return ic;let n={};for(let e=0;e<t.length;e+=2)n[t[e]]=t[e+1];return n}function r1e(t,n){for(let e in n)if(n.hasOwnProperty(e)){let r=n[e],o=t[e];t[r]=o}}function iU(t){return U5(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function o1e(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{let e=t[Symbol.iterator](),r;for(;!(r=e.next()).done;)n(r.value)}}function U5(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function m1(t,n,e){return t[n]=e}function sU(t,n){return t[n]}function Ms(t,n,e){let r=t[n];return Object.is(r,e)?!1:(t[n]=e,!0)}function v4(t,n,e,r){let o=Ms(t,n,e);return Ms(t,n+1,r)||o}function i1e(t,n,e,r,o){let i=v4(t,n,e,r);return Ms(t,n+2,o)||i}function aU(t,n,e,r,o,i){let s=v4(t,n,e,r);return v4(t,n+2,o,i)||s}function s1e(t,n,e,r,o,i,s,a,l){let c=n.consts,u=Uy(n,t,4,s||null,a||null);s5()&&$5(n,e,u,hh(c,l),N5),u.mergedAttrs=t1(u.mergedAttrs,u.attrs),p5(n,u);let d=u.tView=M5(2,u,r,o,i,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return n.queries!==null&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}function w4(t,n,e,r,o,i,s,a,l,c){let u=e+fo,d=n.firstCreatePass?s1e(u,n,t,r,o,i,s,a,l):n.data[u];xm(d,!1);let p=a1e(n,t,d,e);P4()&&U4(n,t,p,d),h1(p,t);let h=OH(p,t,p,d);return t[u]=h,D5(t,h),A2e(h,d,t),A4(d)&&z4(n,t,d),l!=null&&E5(t,d,c),d}function st(t,n,e,r,o,i,s,a){let l=Ut(),c=qr(),u=hh(c.consts,i);return w4(l,c,t,n,e,r,o,u,s,a),st}var a1e=l1e;function l1e(t,n,e,r){return B4(!0),n[Gr].createComment("")}var lU=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var cU=new Me("");var uU=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new SR})}return t})(),SR=class{queuedEffectCount=0;queues=new Map;schedule(n){this.enqueue(n)}remove(n){let e=n.zone,r=this.queues.get(e);r.has(n)&&(r.delete(n),this.queuedEffectCount--)}enqueue(n){let e=n.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(n)||(this.queuedEffectCount++,r.add(n))}flush(){for(;this.queuedEffectCount>0;)for(let[n,e]of this.queues)n===null?this.flushQueue(e):n.run(()=>this.flushQueue(e))}flushQueue(n){for(let e of n)n.delete(e),this.queuedEffectCount--,e.run()}};function Mm(t){return!!t&&typeof t.then=="function"}function dU(t){return!!t&&typeof t.subscribe=="function"}var pU=new Me("");function G5(t){return ym([{provide:pU,multi:!0,useValue:t}])}var hU=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=M(pU,{optional:!0})??[];injector=M(Zt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let o of this.appInits){let i=Ho(this.injector,o);if(Mm(i))e.push(i);else if(dU(i)){let s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),K4=new Me("");function c1e(){sA(()=>{throw new Ae(600,!1)})}function u1e(t){return t.isBoundToModule}var d1e=10;var ll=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(xge);afterRenderManager=M(_5);zonelessEnabled=M(f5);rootEffectScheduler=M(uU);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ot;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=M(wh).hasPendingTasks.pipe(At(e=>!e));constructor(){M(Cm,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=M(io);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,o=Zt.NULL){er(10);let i=e instanceof LH;if(!this._injector.get(hU).done){let h="";throw new Ae(405,h)}let a;i?a=e:a=this._injector.get(q4).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let l=u1e(a)?void 0:this._injector.get(dc),c=r||a.selector,u=a.create(o,[],c,l),d=u.location.nativeElement,p=u.injector.get(cU,null);return p?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),GC(this.components,u),p?.unregisterApplication(d)}),this._loadComponent(u),er(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){er(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(x5.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ae(101,!1);let e=dn(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,dn(e),this.afterTick.next(),er(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ko,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<d1e;)er(14),this.synchronizeOnce(),er(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:o}of this.allViews)p1e(r,o,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>R4(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;GC(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(K4,[]).forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>GC(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ae(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GC(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function p1e(t,n,e,r){if(!e&&!R4(t))return;IH(t,n,e&&!r?0:1)}function Bt(t,n,e,r){let o=Ut(),i=_m();if(Ms(o,i,n)){let s=qr(),a=F4();_0e(a,o,t,n,e,r)}return Bt}function fU(t,n,e,r){return Ms(t,_m(),e)?n+M4(e)+r:ul}function VC(t,n){return t<<17|n<<2}function wm(t){return t>>17&32767}function h1e(t){return(t&2)==2}function f1e(t,n){return t&131071|n<<17}function MR(t){return t|2}function s1(t){return(t&131068)>>2}function $A(t,n){return t&-131069|n<<2}function m1e(t){return(t&1)===1}function TR(t){return t|1}function g1e(t,n,e,r,o,i){let s=i?n.classBindings:n.styleBindings,a=wm(s),l=s1(s);t[r]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||$y(d,u)>0)&&(c=!0)}else u=e;if(o)if(l!==0){let p=wm(t[a+1]);t[r+1]=VC(p,a),p!==0&&(t[p+1]=$A(t[p+1],r)),t[a+1]=f1e(t[a+1],r)}else t[r+1]=VC(a,0),a!==0&&(t[a+1]=$A(t[a+1],r)),a=r;else t[r+1]=VC(l,0),a===0?a=r:t[l+1]=$A(t[l+1],r),l=r;c&&(t[r+1]=MR(t[r+1])),Dj(t,u,r,!0),Dj(t,u,r,!1),v1e(n,u,t,r,i),s=VC(a,l),i?n.classBindings=s:n.styleBindings=s}function v1e(t,n,e,r,o){let i=o?t.residualClasses:t.residualStyles;i!=null&&typeof n=="string"&&$y(i,n)>=0&&(e[r+1]=TR(e[r+1]))}function Dj(t,n,e,r){let o=t[e+1],i=n===null,s=r?wm(o):s1(o),a=!1;for(;s!==0&&(a===!1||i);){let l=t[s],c=t[s+1];w1e(l,n)&&(a=!0,t[s+1]=r?TR(c):MR(c)),s=r?wm(c):s1(c)}a&&(t[e+1]=r?MR(o):TR(o))}function w1e(t,n){return t===null||n==null||(Array.isArray(t)?t[1]:t)===n?!0:Array.isArray(t)&&typeof n=="string"?$y(t,n)>=0:!1}var jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mU(t){return t.substring(jo.key,jo.keyEnd)}function y1e(t){return t.substring(jo.value,jo.valueEnd)}function x1e(t){return wU(t),gU(t,a1(t,0,jo.textEnd))}function gU(t,n){let e=jo.textEnd;return e===n?-1:(n=jo.keyEnd=k1e(t,jo.key=n,e),a1(t,n,e))}function _1e(t){return wU(t),vU(t,a1(t,0,jo.textEnd))}function vU(t,n){let e=jo.textEnd,r=jo.key=a1(t,n,e);return e===r?-1:(r=jo.keyEnd=b1e(t,r,e),r=Ej(t,r,e,58),r=jo.value=a1(t,r,e),r=jo.valueEnd=C1e(t,r,e),Ej(t,r,e,59))}function wU(t){jo.key=0,jo.keyEnd=0,jo.value=0,jo.valueEnd=0,jo.textEnd=t.length}function a1(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function k1e(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}function b1e(t,n,e){let r;for(;n<e&&((r=t.charCodeAt(n))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)n++;return n}function Ej(t,n,e,r){return n=a1(t,n,e),n<e&&n++,n}function C1e(t,n,e){let r=-1,o=-1,i=-1,s=n,a=s;for(;s<e;){let l=t.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=Ij(t,l,s,e):n===s-4&&i===85&&o===82&&r===76&&l===40?a=s=Ij(t,41,s,e):l>32&&(a=s),i=o,o=r,r=l&-33}return a}function Ij(t,n,e,r){let o=-1,i=e;for(;i<r;){let s=t.charCodeAt(i++);if(s==n&&o!==92)return i;s==92&&o===92?o=0:o=s}throw new Error}function Pe(t,n,e){let r=Ut(),o=_m();if(Ms(r,o,n)){let i=qr(),s=F4();I5(i,s,r,t,n,r[Gr],e,!1)}return Pe}function DR(t,n,e,r,o){A5(n,t,e,o?"class":"style",r)}function fc(t,n,e){return xU(t,n,e,!1),fc}function dr(t,n){return xU(t,n,null,!0),dr}function dl(t){W5(bU,S1e,t,!1)}function S1e(t,n){for(let e=_1e(n);e>=0;e=vU(n,e))bU(t,mU(n),y1e(n))}function $e(t){W5(N1e,yU,t,!0)}function yU(t,n){for(let e=x1e(n);e>=0;e=gU(n,e))Ly(t,mU(n),!0)}function xU(t,n,e,r){let o=Ut(),i=qr(),s=bz(2);if(i.firstUpdatePass&&kU(i,t,s,r),n!==ul&&Ms(o,s,n)){let a=i.data[gh()];CU(i,a,o,o[Gr],t,o[s+1]=R1e(n,e),r,s)}}function W5(t,n,e,r){let o=qr(),i=bz(2);o.firstUpdatePass&&kU(o,null,i,r);let s=Ut();if(e!==ul&&Ms(s,i,e)){let a=o.data[gh()];if(SU(a,r)&&!_U(o,i)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=GA(l,e||"")),DR(o,a,s,e,r)}else A1e(o,a,s,s[Gr],s[i+1],s[i+1]=I1e(t,n,e),r,i)}}function _U(t,n){return n>=t.expandoStartIndex}function kU(t,n,e,r){let o=t.data;if(o[e+1]===null){let i=o[gh()],s=_U(t,e);SU(i,r)&&n===null&&!s&&(n=!1),n=M1e(o,i,n,r),g1e(o,i,n,e,s,r)}}function M1e(t,n,e,r){let o=qme(t),i=r?n.residualClasses:n.residualStyles;if(o===null)(r?n.classBindings:n.styleBindings)===0&&(e=VA(null,t,n,e,r),e=Oy(e,n.attrs,r),i=null);else{let s=n.directiveStylingLast;if(s===-1||t[s]!==o)if(e=VA(o,t,n,e,r),i===null){let l=T1e(t,n,r);l!==void 0&&Array.isArray(l)&&(l=VA(null,t,n,l[1],r),l=Oy(l,n.attrs,r),D1e(t,n,r,l))}else i=E1e(t,n,r)}return i!==void 0&&(r?n.residualClasses=i:n.residualStyles=i),e}function T1e(t,n,e){let r=e?n.classBindings:n.styleBindings;if(s1(r)!==0)return t[wm(r)]}function D1e(t,n,e,r){let o=e?n.classBindings:n.styleBindings;t[wm(o)]=r}function E1e(t,n,e){let r,o=n.directiveEnd;for(let i=1+n.directiveStylingLast;i<o;i++){let s=t[i].hostAttrs;r=Oy(r,s,e)}return Oy(r,n.attrs,e)}function VA(t,n,e,r,o){let i=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(i=n[a],r=Oy(r,i.hostAttrs,o),i!==t);)a++;return t!==null&&(e.directiveStylingLast=a),r}function Oy(t,n,e){let r=e?1:2,o=-1;if(n!==null)for(let i=0;i<n.length;i++){let s=n[i];typeof s=="number"?o=s:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Ly(t,s,e?!0:n[++i]))}return t===void 0?null:t}function I1e(t,n,e){if(e==null||e==="")return es;let r=[],o=f1(e);if(Array.isArray(o))for(let i=0;i<o.length;i++)t(r,o[i],!0);else if(typeof o=="object")for(let i in o)o.hasOwnProperty(i)&&t(r,i,o[i]);else typeof o=="string"&&n(r,o);return r}function bU(t,n,e){Ly(t,n,f1(e))}function N1e(t,n,e){let r=String(n);r!==""&&!r.includes(" ")&&Ly(t,r,e)}function A1e(t,n,e,r,o,i,s,a){o===ul&&(o=es);let l=0,c=0,u=0<o.length?o[0]:null,d=0<i.length?i[0]:null;for(;u!==null||d!==null;){let p=l<o.length?o[l+1]:void 0,h=c<i.length?i[c+1]:void 0,f=null,m;u===d?(l+=2,c+=2,p!==h&&(f=d,m=h)):d===null||u!==null&&u<d?(l+=2,f=u):(c+=2,f=d,m=h),f!==null&&CU(t,n,e,r,f,m,s,a),u=l<o.length?o[l]:null,d=c<i.length?i[c]:null}}function CU(t,n,e,r,o,i,s,a){if(!(n.type&3))return;let l=t.data,c=l[a+1],u=m1e(c)?Nj(l,n,e,o,s1(c),s):void 0;if(!y4(u)){y4(i)||h1e(c)&&(i=Nj(l,null,e,o,a,s));let d=gz(gh(),e);$0e(r,s,d,o,i)}}function Nj(t,n,e,r,o,i){let s=n===null,a;for(;o>0;){let l=t[o],c=Array.isArray(l),u=c?l[1]:l,d=u===null,p=e[o+1];p===ul&&(p=d?es:void 0);let h=d?IA(p,r):u===r?p:void 0;if(c&&!y4(h)&&(h=IA(l,r)),y4(h)&&(a=h,s))return a;let f=t[o+1];o=s?wm(f):s1(f)}if(n!==null){let l=i?n.residualClasses:n.residualStyles;l!=null&&(a=IA(l,r))}return a}function y4(t){return t!==void 0}function R1e(t,n){return t==null||t===""||(typeof n=="string"?t=t+n:typeof t=="object"&&(t=Ss(f1(t)))),t}function SU(t,n){return(t.flags&(n?8:16))!==0}function MU(t,n,e){let r=Ut(),o=fU(r,t,n,e);W5(Ly,yU,o,!0)}var ER=class{destroy(n){}updateValue(n,e){}swap(n,e){let r=Math.min(n,e),o=Math.max(n,e),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(n,e){this.attach(e,this.detach(n))}};function jA(t,n,e,r,o){return t===e&&Object.is(n,r)?1:Object.is(o(t,n),o(e,r))?-1:0}function O1e(t,n,e){let r,o,i=0,s=t.length-1,a=void 0;if(Array.isArray(n)){let l=n.length-1;for(;i<=s&&i<=l;){let c=t.at(i),u=n[i],d=jA(i,c,i,u,e);if(d!==0){d<0&&t.updateValue(i,u),i++;continue}let p=t.at(s),h=n[l],f=jA(s,p,l,h,e);if(f!==0){f<0&&t.updateValue(s,h),s--,l--;continue}let m=e(i,c),g=e(s,p),v=e(i,u);if(Object.is(v,g)){let w=e(l,h);Object.is(w,m)?(t.swap(i,s),t.updateValue(s,h),l--,s--):t.move(s,i),t.updateValue(i,u),i++;continue}if(r??=new x4,o??=Rj(t,i,s,e),IR(t,r,i,v))t.updateValue(i,u),i++,s++;else if(o.has(v))r.set(m,t.detach(i)),s--;else{let w=t.create(i,n[i]);t.attach(i,w),i++,s++}}for(;i<=l;)Aj(t,r,e,i,n[i]),i++}else if(n!=null){let l=n[Symbol.iterator](),c=l.next();for(;!c.done&&i<=s;){let u=t.at(i),d=c.value,p=jA(i,u,i,d,e);if(p!==0)p<0&&t.updateValue(i,d),i++,c=l.next();else{r??=new x4,o??=Rj(t,i,s,e);let h=e(i,d);if(IR(t,r,i,h))t.updateValue(i,d),i++,s++,c=l.next();else if(!o.has(h))t.attach(i,t.create(i,d)),i++,s++,c=l.next();else{let f=e(i,u);r.set(f,t.detach(i)),s--}}}for(;!c.done;)Aj(t,r,e,t.length,c.value),c=l.next()}for(;i<=s;)t.destroy(t.detach(s--));r?.forEach(l=>{t.destroy(l)})}function IR(t,n,e,r){return n!==void 0&&n.has(r)?(t.attach(e,n.get(r)),n.delete(r),!0):!1}function Aj(t,n,e,r,o){if(IR(t,n,r,e(r,o)))t.updateValue(r,o);else{let i=t.create(r,o);t.attach(r,i)}}function Rj(t,n,e,r){let o=new Set;for(let i=n;i<=e;i++)o.add(r(i,t.at(i)));return o}var x4=class{kvMap=new Map;_vMap=void 0;has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let e=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(n,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,e){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,e)}else this.kvMap.set(n,e)}forEach(n){for(let[e,r]of this.kvMap)if(n(r,e),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),n(r,e)}}};function kt(t,n){cl("NgControlFlow");let e=Ut(),r=_m(),o=e[r]!==ul?e[r]:-1,i=o!==-1?_4(e,fo+o):void 0,s=0;if(Ms(e,r,t)){let a=dn(null);try{if(i!==void 0&&PH(i,s),t!==-1){let l=fo+t,c=_4(e,l),u=OR(e[un],l),d=i1(c,u.tView.ssrId),p=zy(e,u,n,{dehydratedView:d});Hy(c,p,s,o1(u,d))}}finally{dn(a)}}else if(i!==void 0){let a=FH(i,s);a!==void 0&&(a[zo]=n)}}var NR=class{lContainer;$implicit;$index;constructor(n,e,r){this.lContainer=n,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-Ii}};function Ds(t){return t}function TU(t,n){return n}var AR=class{hasEmptyBlock;trackByFn;liveCollection;constructor(n,e,r){this.hasEmptyBlock=n,this.trackByFn=e,this.liveCollection=r}};function Go(t,n,e,r,o,i,s,a,l,c,u,d,p){cl("NgControlFlow");let h=Ut(),f=qr(),m=l!==void 0,g=Ut(),v=a?s.bind(g[Qs][zo]):s,w=new AR(m,v);g[fo+t]=w,w4(h,f,t+1,n,e,r,o,hh(f.consts,i)),m&&w4(h,f,t+2,l,c,u,d,hh(f.consts,p))}var RR=class extends ER{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(n,e,r){super(),this.lContainer=n,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-Ii}at(n){return this.getLView(n)[zo].$implicit}attach(n,e){let r=e[Q2];this.needsIndexUpdate||=n!==this.length,Hy(this.lContainer,e,n,o1(this.templateTNode,r))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,F1e(this.lContainer,n)}create(n,e){let r=i1(this.lContainer,this.templateTNode.tView.ssrId),o=zy(this.hostLView,this.templateTNode,new NR(this.lContainer,e,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(n){H4(n[un],n),this.operationsCounter?.recordDestroy()}updateValue(n,e){this.getLView(n)[zo].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[zo].$index=n}getLView(n){return P1e(this.lContainer,n)}};function Wo(t){let n=dn(null),e=gh();try{let r=Ut(),o=r[un],i=r[e],s=e+1,a=_4(r,s);if(i.liveCollection===void 0){let c=OR(o,s);i.liveCollection=new RR(a,r,c)}else i.liveCollection.reset();let l=i.liveCollection;if(O1e(l,t,i.trackByFn),l.updateIndexes(),i.hasEmptyBlock){let c=_m(),u=l.length===0;if(Ms(r,c,u)){let d=e+2,p=_4(r,d);if(u){let h=OR(o,d),f=i1(p,h.tView.ssrId),m=zy(r,h,void 0,{dehydratedView:f});Hy(p,m,0,o1(h,f))}else PH(p,0)}}}finally{dn(n)}}function _4(t,n){return t[n]}function F1e(t,n){return Ay(t,n)}function P1e(t,n){return FH(t,n)}function OR(t,n){return n5(t,n)}function X(t,n,e,r){let o=Ut(),i=qr(),s=fo+t,a=o[Gr],l=i.firstCreatePass?jH(s,i,o,n,N5,s5(),e,r):i.data[s],c=B1e(i,o,l,a,n,t);o[s]=c;let u=A4(l);return xm(l,!0),gH(a,c,l),!F5(l)&&P4()&&U4(i,o,c,l),(Pme()===0||u)&&h1(c,o),Bme(),u&&(z4(i,o,l),b5(i,l,o)),r!==null&&E5(o,l),X}function re(){let t=Ai();a5()?l5():(t=t.parent,xm(t,!1));let n=t;$me(n)&&Vme(),Lme();let e=qr();return e.firstCreatePass&&zH(e,n),n.classesWithoutHost!=null&&Jme(n)&&DR(e,n,Ut(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&ege(n)&&DR(e,n,Ut(),n.stylesWithoutHost,!1),re}function Ve(t,n,e,r){return X(t,n,e,r),re(),Ve}var B1e=(t,n,e,r,o,i)=>(B4(!0),fH(r,o,Xme()));function L1e(t,n,e,r,o){let i=n.consts,s=hh(i,r),a=Uy(n,t,8,"ng-container",s);s!==null&&gR(a,s,!0);let l=hh(i,o);return s5()&&$5(n,e,a,l,N5),a.mergedAttrs=t1(a.mergedAttrs,a.attrs),n.queries!==null&&n.queries.elementStart(n,a),a}function Tm(t,n,e){let r=Ut(),o=qr(),i=t+fo,s=o.firstCreatePass?L1e(i,o,r,n,e):o.data[i];xm(s,!0);let a=$1e(o,r,s,t);return r[i]=a,P4()&&U4(o,r,a,s),h1(a,r),A4(s)&&(z4(o,r,s),b5(o,s,r)),e!=null&&E5(r,s),Tm}function Dm(){let t=Ai(),n=qr();return a5()?l5():(t=t.parent,xm(t,!1)),n.firstCreatePass&&(p5(n,t),t5(t)&&n.queries.elementEnd(t)),Dm}function tr(t,n,e){return Tm(t,n,e),Dm(),tr}var $1e=(t,n,e,r)=>(B4(!0),s0e(n[Gr],""));function gn(){return Ut()}function Xr(t,n,e){let r=Ut(),o=_m();if(Ms(r,o,n)){let i=qr(),s=F4();I5(i,s,r,t,n,r[Gr],e,!0)}return Xr}var sm=void 0;function V1e(t){let n=Math.floor(Math.abs(t)),e=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&e===0?1:5}var j1e=["en",[["a","p"],["AM","PM"],sm],[["AM","PM"],sm,sm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sm,"{1} 'at' {0}",sm],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",V1e],My={};function DU(t,n,e){typeof n!="string"&&(e=n,n=t[Wr.LocaleId]),n=n.toLowerCase().replace(/_/g,"-"),My[n]=t,e&&(My[n][Wr.ExtraData]=e)}function wa(t){let n=z1e(t),e=Oj(n);if(e)return e;let r=n.split("-")[0];if(e=Oj(r),e)return e;if(r==="en")return j1e;throw new Ae(701,!1)}function Oj(t){return t in My||(My[t]=am.ng&&am.ng.common&&am.ng.common.locales&&am.ng.common.locales[t]),My[t]}var Wr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Wr||{});function z1e(t){return t.toLowerCase().replace(/_/g,"-")}var k4="en-US";var H1e=k4;function U1e(t){typeof t=="string"&&(H1e=t.toLowerCase().replace(/_/g,"-"))}function Fj(t,n,e){return function r(o){if(o===Function)return e;let i=u1(t)?lc(t.index,n):n;L5(i,5);let s=n[zo],a=Pj(n,s,e,o),l=r.__ngNextListenerFn__;for(;l;)a=Pj(n,s,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function Pj(t,n,e,r){let o=dn(null);try{return er(6,n,e),e(r)!==!1}catch(i){return G1e(t,i),!1}finally{er(7,n,e),dn(o)}}function G1e(t,n){let e=t[J2],r=e?e.get(al,null):null;r&&r.handleError(n)}function Bj(t,n,e,r,o,i){let s=n[e],a=n[un],c=a.data[e].outputs[r],u=s[c],d=a.firstCreatePass?i5(a):null,p=o5(n),h=u.subscribe(i),f=p.length;p.push(i,h),d&&d.push(o,t.index,f,-(f+1))}var W1e=(t,n,e)=>{};function Le(t,n,e,r){let o=Ut(),i=qr(),s=Ai();return EU(i,o,o[Gr],s,t,n,r),Le}function q1e(t,n,e,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===e&&o[i+1]===r){let a=n[QC],l=o[i+2];return a.length>l?a[l]:null}typeof s=="string"&&(i+=2)}return null}function EU(t,n,e,r,o,i,s){let a=A4(r),c=t.firstCreatePass?i5(t):null,u=o5(n),d=!0;if(r.type&3||s){let p=pc(r,n),h=s?s(p):p,f=u.length,m=s?v=>s(ac(v[r.index])):r.index,g=null;if(!s&&a&&(g=q1e(t,n,o,r.index)),g!==null){let v=g.__ngLastListenerFn__||g;v.__ngNextListenerFn__=i,g.__ngLastListenerFn__=i,d=!1}else{i=Fj(r,n,i),W1e(h,o,i);let v=e.listen(h,o,i);u.push(i,v),c&&c.push(o,m,f,f+1)}}else i=Fj(r,n,i);if(d){let p=r.outputs?.[o],h=r.hostDirectiveOutputs?.[o];if(h&&h.length)for(let f=0;f<h.length;f+=2){let m=h[f],g=h[f+1];Bj(r,n,m,g,o,i)}if(p&&p.length)for(let f of p)Bj(r,n,f,o,o,i)}}function xe(t=1){return Zme(t)}function K1e(t,n){let e=null,r=Yge(t);for(let o=0;o<n.length;o++){let i=n[o];if(i==="*"){e=o;continue}if(r===null?hH(t,i,!0):e0e(r,i))return o}return e}function Ot(t){let n=Ut()[Qs][Ts];if(!n.projection){let e=t?t.length:1,r=n.projection=hme(e,null),o=r.slice(),i=n.child;for(;i!==null;){if(i.type!==128){let s=t?K1e(i,t):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function it(t,n=0,e,r,o,i){let s=Ut(),a=qr(),l=r?t+1:null;l!==null&&w4(s,a,l,r,o,i,null,e);let c=Uy(a,fo+t,16,null,e||null);c.projection===null&&(c.projection=n),l5();let d=!s[Q2]||xz();s[Qs][Ts].projection[c.projection]===null&&l!==null?Z1e(s,a,l):d&&!F5(c)&&B0e(a,s,c)}function Z1e(t,n,e){let r=fo+e,o=n.data[r],i=t[r],s=i1(i,o.tView.ssrId),a=zy(t,o,void 0,{dehydratedView:s});Hy(i,a,0,o1(o,s))}function Co(t,n,e,r){KH(t,n,e,r)}function Em(t,n,e){qH(t,n,e)}function Er(t){let n=Ut(),e=qr(),r=c5();O4(r+1);let o=j5(e,r);if(t.dirty&&Nme(n)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let i=XH(n,r);t.reset(i,qz),t.notifyOnChanges()}return!0}return!1}function Ir(){return V5(Ut(),c5())}function ts(t,n,e,r,o){JH(n,KH(t,e,r,o))}function So(t,n,e,r){JH(t,qH(n,e,r))}function zr(t=1){O4(c5()+t)}function X1e(t,n,e,r){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=r}function pr(t){let n=zme();return jy(n,fo+t)}function ue(t,n=""){let e=Ut(),r=qr(),o=t+fo,i=r.firstCreatePass?Uy(r,o,1,n,null):r.data[o],s=Y1e(r,e,i,n,t);e[o]=s,P4()&&U4(r,e,s,i),xm(i,!1)}var Y1e=(t,n,e,r,o)=>(B4(!0),o0e(n[Gr],r));function ct(t){return Ye("",t,""),ct}function Ye(t,n,e){let r=Ut(),o=fU(r,t,n,e);return o!==ul&&Q1e(r,gh(),o),Ye}function Q1e(t,n,e){let r=gz(n,t);i0e(t[Gr],r,e)}function Ri(t,n,e){Kz(n)&&(n=n());let r=Ut(),o=_m();if(Ms(r,o,n)){let i=qr(),s=F4();I5(i,s,r,t,n,r[Gr],e,!1)}return Ri}function ns(t,n){let e=Kz(t);return e&&t.set(n),e}function Oi(t,n){let e=Ut(),r=qr(),o=Ai();return EU(r,e,e[Gr],o,t,n),Oi}function J1e(t,n,e){let r=qr();if(r.firstCreatePass){let o=sc(t);FR(e,r.data,r.blueprint,o,!0),FR(n,r.data,r.blueprint,o,!1)}}function FR(t,n,e,r,o){if(t=vi(t),Array.isArray(t))for(let i=0;i<t.length;i++)FR(t[i],n,e,r,o);else{let i=qr(),s=Ut(),a=Ai(),l=Y2(t)?t:vi(t.provide),c=az(t),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(Y2(t)||!t.multi){let h=new gm(c,o,qt),f=HA(l,n,o?u:u+p,d);f===-1?(rR(i4(a,s),i,l),zA(i,t,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),e.push(h),s.push(h)):(e[f]=h,s[f]=h)}else{let h=HA(l,n,u+p,d),f=HA(l,n,u,u+p),m=h>=0&&e[h],g=f>=0&&e[f];if(o&&!g||!o&&!m){rR(i4(a,s),i,l);let v=nve(o?tve:eve,e.length,o,r,c);!o&&g&&(e[f].providerFactory=v),zA(i,t,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),e.push(v),s.push(v)}else{let v=IU(e[o?f:h],c,!o&&r);zA(i,t,h>-1?h:f,v)}!o&&r&&g&&e[f].componentProviders++}}}function zA(t,n,e,r){let o=Y2(n),i=xme(n);if(o||i){let l=(i?vi(n.useClass):n).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){let u=c.indexOf(e);u===-1?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function IU(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function HA(t,n,e,r){for(let o=e;o<r;o++)if(n[o]===t)return o;return-1}function eve(t,n,e,r){return PR(this.multi,[])}function tve(t,n,e,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Iy(e,e[un],this.providerFactory.index,r);i=a.slice(0,s),PR(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],PR(o,i);return i}function PR(t,n){for(let e=0;e<t.length;e++){let r=t[e];n.push(r())}return n}function nve(t,n,e,r,o){let i=new gm(t,e,qt);return i.multi=[],i.index=n,i.componentProviders=0,IU(i,o,r&&!e),i}function ut(t,n=[]){return e=>{e.providersResolver=(r,o)=>J1e(r,o?o(t):t,n)}}function Z4(t,n,e){let r=hc()+t,o=Ut();return o[r]===ul?m1(o,r,e?n.call(e):n()):sU(o,r)}function ya(t,n,e,r){return OU(Ut(),hc(),t,n,e,r)}function xh(t,n,e,r,o){return FU(Ut(),hc(),t,n,e,r,o)}function NU(t,n,e,r,o,i){return PU(Ut(),hc(),t,n,e,r,o,i)}function AU(t,n,e,r,o,i,s){return BU(Ut(),hc(),t,n,e,r,o,i,s)}function RU(t,n,e,r,o,i,s,a){let l=hc()+t,c=Ut(),u=aU(c,l,e,r,o,i);return Ms(c,l+4,s)||u?m1(c,l+5,a?n.call(a,e,r,o,i,s):n(e,r,o,i,s)):sU(c,l+5)}function X4(t,n){let e=t[n];return e===ul?void 0:e}function OU(t,n,e,r,o,i){let s=n+e;return Ms(t,s,o)?m1(t,s+1,i?r.call(i,o):r(o)):X4(t,s+1)}function FU(t,n,e,r,o,i,s){let a=n+e;return v4(t,a,o,i)?m1(t,a+2,s?r.call(s,o,i):r(o,i)):X4(t,a+2)}function PU(t,n,e,r,o,i,s,a){let l=n+e;return i1e(t,l,o,i,s)?m1(t,l+3,a?r.call(a,o,i,s):r(o,i,s)):X4(t,l+3)}function BU(t,n,e,r,o,i,s,a,l){let c=n+e;return aU(t,c,o,i,s,a)?m1(t,c+4,l?r.call(l,o,i,s,a):r(o,i,s,a)):X4(t,c+4)}function Te(t,n){let e=qr(),r,o=t+fo;e.firstCreatePass?(r=rve(n,e.pipeRegistry),e.data[o]=r,r.onDestroy&&(e.destroyHooks??=[]).push(o,r.onDestroy)):r=e.data[o];let i=r.factory||(r.factory=um(r.type,!0)),s,a=Cs(qt);try{let l=o4(!1),c=i();return o4(l),X1e(e,Ut(),o,c),c}finally{Cs(a)}}function rve(t,n){if(n)for(let e=n.length-1;e>=0;e--){let r=n[e];if(t===r.name)return r}}function De(t,n,e){let r=t+fo,o=Ut(),i=jy(o,r);return Y4(o,r)?OU(o,hc(),n,i.transform,e,i):i.transform(e)}function LU(t,n,e,r){let o=t+fo,i=Ut(),s=jy(i,o);return Y4(i,o)?FU(i,hc(),n,s.transform,e,r,s):s.transform(e,r)}function $U(t,n,e,r,o){let i=t+fo,s=Ut(),a=jy(s,i);return Y4(s,i)?PU(s,hc(),n,a.transform,e,r,o,a):a.transform(e,r,o)}function VU(t,n,e,r,o,i){let s=t+fo,a=Ut(),l=jy(a,s);return Y4(a,s)?BU(a,hc(),n,l.transform,e,r,o,i,l):l.transform(e,r,o,i)}function Y4(t,n){return t[un].data[n].pure}function mo(t,n){return W4(t,n)}var Fy=class{full;major;minor;patch;constructor(n){this.full=n;let e=n.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}},q5=new Fy("19.2.6"),BR=class{ngModuleFactory;componentFactories;constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},Q4=(()=>{class t{compileModuleSync(e){return new bR(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),o=nz(e),i=dH(o.declarations).reduce((s,a)=>{let l=ph(a);return l&&s.push(new vm(l)),s},[]);return new BR(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ove=(()=>{class t{zone=M(Rt);changeDetectionScheduler=M(fh);applicationRef=M(ll);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ive=new Me("",{factory:()=>!1});function jU({ngZoneFactory:t,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return t??=()=>new Rt(ht(le({},HU()),{scheduleInRootZone:e})),[{provide:Rt,useFactory:t},{provide:Ty,multi:!0,useFactory:()=>{let r=M(ove,{optional:!0});return()=>r.initialize()}},{provide:Ty,multi:!0,useFactory:()=>{let r=M(sve);return()=>{r.initialize()}}},n===!0?{provide:Hz,useValue:!0}:[],{provide:Uz,useValue:e??zz}]}function zU(t){let n=t?.ignoreChangesOutsideZone,e=t?.scheduleInRootZone,r=jU({ngZoneFactory:()=>{let o=HU(t);return o.scheduleInRootZone=e,o.shouldCoalesceEventChangeDetection&&cl("NgZone_CoalesceEvent"),new Rt(o)},ignoreChangesOutsideZone:n,scheduleInRootZone:e});return ym([{provide:ive,useValue:!0},{provide:f5,useValue:!1},r])}function HU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sve=(()=>{class t{subscription=new Fn;initialized=!1;zone=M(Rt);pendingTasks=M(wh);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ave=(()=>{class t{appRef=M(ll);taskService=M(wh);ngZone=M(Rt);zonelessEnabled=M(f5);tracing=M(Cm,{optional:!0});disableScheduling=M(Hz,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Fn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(a4):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Uz,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof aR||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?aj:Gz;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(a4+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aj(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lve(){return typeof $localize<"u"&&$localize.locale||k4}var J4=new Me("",{providedIn:"root",factory:()=>M(J4,mn.Optional|mn.SkipSelf)||lve()});var LR=new Me(""),cve=new Me("");function ky(t){return!t.moduleRef}function uve(t){let n=ky(t)?t.r3Injector:t.moduleRef.injector,e=n.get(Rt);return e.run(()=>{ky(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=n.get(al,null),o;if(e.runOutsideAngular(()=>{o=e.onError.subscribe({next:i=>{r.handleError(i)}})}),ky(t)){let i=()=>n.destroy(),s=t.platformInjector.get(LR);s.add(i),n.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(LR);s.add(i),t.moduleRef.onDestroy(()=>{GC(t.allPlatformModules,t.moduleRef),o.unsubscribe(),s.delete(i)})}return pve(r,e,()=>{let i=n.get(hU);return i.runInitializers(),i.donePromise.then(()=>{let s=n.get(J4,k4);if(U1e(s||k4),!n.get(cve,!0))return ky(t)?n.get(ll):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ky(t)){let l=n.get(ll);return t.rootComponent!==void 0&&l.bootstrap(t.rootComponent),l}else return dve(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function dve(t,n){let e=t.injector.get(ll);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>e.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(e);else throw new Ae(-403,!1);n.push(t)}function pve(t,n,e){try{let r=e();return Mm(r)?r.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}var WC=null;function hve(t=[],n){return Zt.create({name:n,providers:[{provide:E4,useValue:"platform"},{provide:LR,useValue:new Set([()=>WC=null])},...t]})}function fve(t=[]){if(WC)return WC;let n=hve(t);return WC=n,c1e(),mve(n),n}function mve(t){let n=t.get(w5,null);Ho(t,()=>{n?.forEach(e=>e())})}function Wy(){return!1}var kr=(()=>{class t{static __NG_ELEMENT_ID__=gve}return t})();function gve(t){return vve(Ai(),Ut(),(t&16)===16)}function vve(t,n,e){if(u1(t)&&!e){let r=lc(t.index,n);return new Ry(r,r)}else if(t.type&175){let r=n[Qs];return new Ry(r,n)}return null}var $R=class{constructor(){}supports(n){return iU(n)}create(n){return new VR(n)}},wve=(t,n)=>n,VR=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||wve}forEachItem(n){let e;for(e=this._itHead;e!==null;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,r=this._removalsHead,o=0,i=null;for(;e||r;){let s=!r||e&&e.currentIndex<Lj(r,o,i)?e:r,a=Lj(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)o++;else{i||(i=[]);let c=a-o,u=l-o;if(c!=u){for(let p=0;p<c;p++){let h=p<i.length?i[p]:i[p]=0,f=h+p;u<=f&&f<c&&(i[p]=h+1)}let d=s.previousIndex;i[d]=u-c}}a!==l&&n(s,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)n(e)}diff(n){if(n==null&&(n=[]),!iU(n))throw new Ae(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._itHead,r=!1,o,i,s;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)i=n[a],s=this._trackByFn(a,i),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,i,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,i,s,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)),e=e._next}else o=0,o1e(n,a=>{s=this._trackByFn(o,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,o),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,r,o){let i;return n===null?i=this._itTail:(i=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,i,o)):(n=this._linkedRecords===null?null:this._linkedRecords.get(r,o),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,i,o)):n=this._addAfter(new jR(e,r),i,o)),n}_verifyReinsertion(n,e,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?n=this._reinsertAfter(i,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;n!==null;){let e=n._next;this._addToRemovals(this._unlink(n)),n=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let o=n._prevRemoved,i=n._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(n,e,r),this._addToMoves(n,r),n}_moveAfter(n,e,r){return this._unlink(n),this._insertAfter(n,e,r),this._addToMoves(n,r),n}_addAfter(n,e,r){return this._insertAfter(n,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,e,r){let o=e===null?this._itHead:e._next;return n._next=o,n._prev=e,o===null?this._itTail=n:o._prev=n,e===null?this._itHead=n:e._next=n,this._linkedRecords===null&&(this._linkedRecords=new b4),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let e=n._prev,r=n._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new b4),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},jR=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,e){this.item=n,this.trackById=e}},zR=class{_head=null;_tail=null;add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){let e=n._prevDup,r=n._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},b4=class{map=new Map;put(n){let e=n.trackById,r=this.map.get(e);r||(r=new zR,this.map.set(e,r)),r.add(n)}get(n,e){let r=n,o=this.map.get(r);return o?o.get(n,e):null}remove(n){let e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Lj(t,n,e){let r=t.previousIndex;if(r===null)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+n+o}var HR=class{constructor(){}supports(n){return n instanceof Map||U5(n)}create(){return new UR}},UR=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let e;for(e=this._mapHead;e!==null;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||U5(n)))throw new Ae(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){let r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){let o=this._records.get(n);this._maybeAddToChanges(o,e);let i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}let r=new GR(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}},GR=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(n){this.key=n}};function $j(){return new fd([new $R])}var fd=(()=>{class t{factories;static \u0275prov=_e({token:t,providedIn:"root",factory:$j});constructor(e){this.factories=e}static create(e,r){if(r!=null){let o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||$j()),deps:[[t,new By,new l1]]}}find(e){let r=this.factories.find(o=>o.supports(e));if(r!=null)return r;throw new Ae(901,!1)}}return t})();function Vj(){return new K5([new HR])}var K5=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:Vj});factories;constructor(e){this.factories=e}static create(e,r){if(r){let o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||Vj()),deps:[[t,new By,new l1]]}}find(e){let r=this.factories.find(o=>o.supports(e));if(r)return r;throw new Ae(901,!1)}}return t})();function UU(t){er(8);try{let{rootComponent:n,appProviders:e,platformProviders:r}=t,o=fve(r),i=[jU({}),{provide:fh,useExisting:ave},...e||[]],s=new g4({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return uve({r3Injector:s.injector,platformInjector:o,rootComponent:n})}catch(n){return Promise.reject(n)}finally{er(9)}}function nt(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function _i(t,n=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):n}function En(t){return uA(t)}function ae(t,n){return lC(t,n?.equal)}var WR=class{[oi];constructor(n){this[oi]=n}destroy(){this[oi].destroy()}};function Tt(t,n){!n?.injector&&mh(Tt);let e=n?.injector??M(Zt),r=n?.manualCleanup!==!0?e.get(Uo):null,o,i=e.get(V4,null,{optional:!0}),s=e.get(fh);return i!==null&&!n?.forceRoot?(o=_ve(i.view,s,t),r instanceof s4&&r._lView===i.view&&(r=null)):o=kve(t,e.get(uU),s),o.injector=e,r!==null&&(o.onDestroyFn=r.onDestroy(()=>o.destroy())),new WR(o)}var GU=ht(le({},Zf),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Ny,run(){if(this.dirty=!1,this.hasRun&&!hy(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),n=Xf(this),e=t4(!1);try{this.maybeCleanup(),this.fn(t)}finally{t4(e),R2(this,n)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),yve=ht(le({},GU),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){fy(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),xve=ht(le({},GU),{consumerMarkedDirty(){this.view[nn]|=8192,d1(this.view),this.notifier.notify(13)},destroy(){fy(this),this.onDestroyFn(),this.maybeCleanup(),this.view[pm]?.delete(this)}});function _ve(t,n,e){let r=Object.create(xve);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=n,r.fn=e,t[pm]??=new Set,t[pm].add(r),r.consumerMarkedDirty(r),r}function kve(t,n,e){let r=Object.create(yve);return r.fn=t,r.scheduler=n,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var bve=t=>t;function eS(t,n){if(typeof t=="function"){let e=uC(t,bve,n?.equal);return jj(e)}else{let e=uC(t.source,t.computation,t.equal);return jj(e)}}function jj(t){let n=t[oi],e=t;return e.set=r=>lA(n,r),e.update=r=>cA(n,r),e.asReadonly=v5.bind(t),e}var UA=Symbol("NOT_SET"),WU=new Set,Cve=ht(le({},my),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:UA,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(t){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==UA&&!hy(this))return this.signal;try{for(let o of this.cleanup??WU)o()}finally{this.cleanup?.clear()}let n=[];t!==void 0&&n.push(t),n.push(this.registerCleanupFn);let e=Xf(this),r;try{r=this.userFn.apply(null,n)}finally{R2(this,e)}return(this.value===UA||!this.equal(this.value,r))&&(this.value=r,this.version++),this.signal}}),qR=class extends c4{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(n,e,r,o,i,s=null){super(n,[void 0,void 0,void 0,void 0],r,!1,i,s),this.scheduler=o;for(let a of rH){let l=e[a];if(l===void 0)continue;let c=Object.create(Cve);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(ah(c),c.value),c.signal[oi]=c,c.registerCleanupFn=u=>(c.cleanup??=new Set).add(u),this.nodes[a]=c,this.hooks[a]=u=>c.phaseFn(u)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let n of this.nodes)for(let e of n?.cleanup??WU)e()}};function Z5(t,n){!n?.injector&&mh(Z5);let e=n?.injector??M(Zt),r=e.get(fh),o=e.get(_5),i=e.get(Cm,null,{optional:!0});o.impl??=e.get(oH);let s=t;typeof s=="function"&&(s={mixedReadWrite:t});let a=e.get(V4,null,{optional:!0}),l=new qR(o.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,r,e.get(Uo),i?.snapshot(null));return o.impl.register(l),l}function tS(t,n){let e=ph(t),r=n.elementInjector||I4();return new vm(e).create(r,n.projectableNodes,n.hostElement,n.environmentInjector)}function qU(t){let n=ph(t);if(!n)return null;let e=new vm(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var tn=new Me("");var XU=null;function xa(){return XU}function X5(t){XU??=t}var qy=class{},Ky=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>M(YU),providedIn:"platform"})}return t})(),Y5=new Me(""),YU=(()=>{class t extends Ky{_location;_history;_doc=M(tn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xa().getBaseHref(this._doc)}onPopState(e){let r=xa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=xa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){this._history.pushState(e,r,o)}replaceState(e,r,o){this._history.replaceState(e,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function nS(t,n){return t?n?t.endsWith("/")?n.startsWith("/")?t+n.slice(1):t+n:n.startsWith("/")?t+n:`${t}/${n}`:t:n}function KU(t){let n=t.search(/#|\?|$/);return t[n-1]==="/"?t.slice(0,n-1)+t.slice(n):t}function pl(t){return t&&t[0]!=="?"?`?${t}`:t}var _a=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>M(oS),providedIn:"root"})}return t})(),rS=new Me(""),oS=(()=>{class t extends _a{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(tn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return nS(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+pl(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+pl(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+pl(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||t)(Qe(Ky),Qe(rS,8))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mc=(()=>{class t{_subject=new ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=Tve(KU(ZU(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+pl(r))}normalize(e){return t.stripTrailingSlash(Mve(this._basePath,ZU(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+pl(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+pl(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=pl;static joinWithSlash=nS;static stripTrailingSlash=KU;static \u0275fac=function(r){return new(r||t)(Qe(_a))};static \u0275prov=_e({token:t,factory:()=>Sve(),providedIn:"root"})}return t})();function Sve(){return new mc(Qe(_a))}function Mve(t,n){if(!t||!n.startsWith(t))return n;let e=n.substring(t.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function ZU(t){return t.replace(/\/index.html$/,"")}function Tve(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}var dS=(()=>{class t extends _a{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=nS(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+pl(i))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+pl(i))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||t)(Qe(Ky),Qe(rS,8))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var Fi=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Fi||{}),nr=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(nr||{}),Es=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Es||{}),gd={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function tG(t){return wa(t)[Wr.LocaleId]}function nG(t,n,e){let r=wa(t),o=[r[Wr.DayPeriodsFormat],r[Wr.DayPeriodsStandalone]],i=ka(o,n);return ka(i,e)}function rG(t,n,e){let r=wa(t),o=[r[Wr.DaysFormat],r[Wr.DaysStandalone]],i=ka(o,n);return ka(i,e)}function oG(t,n,e){let r=wa(t),o=[r[Wr.MonthsFormat],r[Wr.MonthsStandalone]],i=ka(o,n);return ka(i,e)}function iG(t,n){let r=wa(t)[Wr.Eras];return ka(r,n)}function Zy(t,n){let e=wa(t);return ka(e[Wr.DateFormat],n)}function Xy(t,n){let e=wa(t);return ka(e[Wr.TimeFormat],n)}function Yy(t,n){let r=wa(t)[Wr.DateTimeFormat];return ka(r,n)}function Qy(t,n){let e=wa(t),r=e[Wr.NumberSymbols][n];if(typeof r>"u"){if(n===gd.CurrencyDecimal)return e[Wr.NumberSymbols][gd.Decimal];if(n===gd.CurrencyGroup)return e[Wr.NumberSymbols][gd.Group]}return r}function sG(t){if(!t[Wr.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Wr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function aG(t){let n=wa(t);return sG(n),(n[Wr.ExtraData][2]||[]).map(r=>typeof r=="string"?Q5(r):[Q5(r[0]),Q5(r[1])])}function lG(t,n,e){let r=wa(t);sG(r);let o=[r[Wr.ExtraData][0],r[Wr.ExtraData][1]],i=ka(o,n)||[];return ka(i,e)||[]}function ka(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function Q5(t){let[n,e]=t.split(":");return{hours:+n,minutes:+e}}var Dve=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,iS={},Eve=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function cG(t,n,e,r){let o=Lve(t);n=md(e,n)||n;let s=[],a;for(;n;)if(a=Eve.exec(n),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;n=u}else{s.push(n);break}let l=o.getTimezoneOffset();r&&(l=dG(r,l),o=Bve(o,r));let c="";return s.forEach(u=>{let d=Fve(u);c+=d?d(o,e,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function uS(t,n,e){let r=new Date(0);return r.setFullYear(t,n,e),r.setHours(0,0,0),r}function md(t,n){let e=tG(t);if(iS[e]??={},iS[e][n])return iS[e][n];let r="";switch(n){case"shortDate":r=Zy(t,Es.Short);break;case"mediumDate":r=Zy(t,Es.Medium);break;case"longDate":r=Zy(t,Es.Long);break;case"fullDate":r=Zy(t,Es.Full);break;case"shortTime":r=Xy(t,Es.Short);break;case"mediumTime":r=Xy(t,Es.Medium);break;case"longTime":r=Xy(t,Es.Long);break;case"fullTime":r=Xy(t,Es.Full);break;case"short":let o=md(t,"shortTime"),i=md(t,"shortDate");r=sS(Yy(t,Es.Short),[o,i]);break;case"medium":let s=md(t,"mediumTime"),a=md(t,"mediumDate");r=sS(Yy(t,Es.Medium),[s,a]);break;case"long":let l=md(t,"longTime"),c=md(t,"longDate");r=sS(Yy(t,Es.Long),[l,c]);break;case"full":let u=md(t,"fullTime"),d=md(t,"fullDate");r=sS(Yy(t,Es.Full),[u,d]);break}return r&&(iS[e][n]=r),r}function sS(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,r){return n!=null&&r in n?n[r]:e})),t}function hl(t,n,e="-",r,o){let i="";(t<0||o&&t<=0)&&(o?t=-t+1:(t=-t,i=e));let s=String(t);for(;s.length<n;)s="0"+s;return r&&(s=s.slice(s.length-n)),i+s}function Ive(t,n){return hl(t,3).substring(0,n)}function Mo(t,n,e=0,r=!1,o=!1){return function(i,s){let a=Nve(t,i);if((e>0||a>-e)&&(a+=e),t===3)a===0&&e===-12&&(a=12);else if(t===6)return Ive(a,n);let l=Qy(s,gd.MinusSign);return hl(a,n,l,r,o)}}function Nve(t,n){switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate();case 3:return n.getHours();case 4:return n.getMinutes();case 5:return n.getSeconds();case 6:return n.getMilliseconds();case 7:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function br(t,n,e=Fi.Format,r=!1){return function(o,i){return Ave(o,i,t,n,e,r)}}function Ave(t,n,e,r,o,i){switch(e){case 2:return oG(n,o,r)[t.getMonth()];case 1:return rG(n,o,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(i){let c=aG(n),u=lG(n,o,r),d=c.findIndex(p=>{if(Array.isArray(p)){let[h,f]=p,m=s>=h.hours&&a>=h.minutes,g=s<f.hours||s===f.hours&&a<f.minutes;if(h.hours<f.hours){if(m&&g)return!0}else if(m||g)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return nG(n,o,r)[s<12?0:1];case 3:return iG(n,r)[t.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function aS(t){return function(n,e,r){let o=-1*r,i=Qy(e,gd.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(t){case 0:return(o>=0?"+":"")+hl(s,2,i)+hl(Math.abs(o%60),2,i);case 1:return"GMT"+(o>=0?"+":"")+hl(s,1,i);case 2:return"GMT"+(o>=0?"+":"")+hl(s,2,i)+":"+hl(Math.abs(o%60),2,i);case 3:return r===0?"Z":(o>=0?"+":"")+hl(s,2,i)+":"+hl(Math.abs(o%60),2,i);default:throw new Error(`Unknown zone width "${t}"`)}}}var Rve=0,cS=4;function Ove(t){let n=uS(t,Rve,1).getDay();return uS(t,0,1+(n<=cS?cS:cS+7)-n)}function uG(t){let n=t.getDay(),e=n===0?-3:cS-n;return uS(t.getFullYear(),t.getMonth(),t.getDate()+e)}function J5(t,n=!1){return function(e,r){let o;if(n){let i=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();o=1+Math.floor((s+i)/7)}else{let i=uG(e),s=Ove(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return hl(o,t,Qy(r,gd.MinusSign))}}function lS(t,n=!1){return function(e,r){let i=uG(e).getFullYear();return hl(i,t,Qy(r,gd.MinusSign),n)}}var eO={};function Fve(t){if(eO[t])return eO[t];let n;switch(t){case"G":case"GG":case"GGG":n=br(3,nr.Abbreviated);break;case"GGGG":n=br(3,nr.Wide);break;case"GGGGG":n=br(3,nr.Narrow);break;case"y":n=Mo(0,1,0,!1,!0);break;case"yy":n=Mo(0,2,0,!0,!0);break;case"yyy":n=Mo(0,3,0,!1,!0);break;case"yyyy":n=Mo(0,4,0,!1,!0);break;case"Y":n=lS(1);break;case"YY":n=lS(2,!0);break;case"YYY":n=lS(3);break;case"YYYY":n=lS(4);break;case"M":case"L":n=Mo(1,1,1);break;case"MM":case"LL":n=Mo(1,2,1);break;case"MMM":n=br(2,nr.Abbreviated);break;case"MMMM":n=br(2,nr.Wide);break;case"MMMMM":n=br(2,nr.Narrow);break;case"LLL":n=br(2,nr.Abbreviated,Fi.Standalone);break;case"LLLL":n=br(2,nr.Wide,Fi.Standalone);break;case"LLLLL":n=br(2,nr.Narrow,Fi.Standalone);break;case"w":n=J5(1);break;case"ww":n=J5(2);break;case"W":n=J5(1,!0);break;case"d":n=Mo(2,1);break;case"dd":n=Mo(2,2);break;case"c":case"cc":n=Mo(7,1);break;case"ccc":n=br(1,nr.Abbreviated,Fi.Standalone);break;case"cccc":n=br(1,nr.Wide,Fi.Standalone);break;case"ccccc":n=br(1,nr.Narrow,Fi.Standalone);break;case"cccccc":n=br(1,nr.Short,Fi.Standalone);break;case"E":case"EE":case"EEE":n=br(1,nr.Abbreviated);break;case"EEEE":n=br(1,nr.Wide);break;case"EEEEE":n=br(1,nr.Narrow);break;case"EEEEEE":n=br(1,nr.Short);break;case"a":case"aa":case"aaa":n=br(0,nr.Abbreviated);break;case"aaaa":n=br(0,nr.Wide);break;case"aaaaa":n=br(0,nr.Narrow);break;case"b":case"bb":case"bbb":n=br(0,nr.Abbreviated,Fi.Standalone,!0);break;case"bbbb":n=br(0,nr.Wide,Fi.Standalone,!0);break;case"bbbbb":n=br(0,nr.Narrow,Fi.Standalone,!0);break;case"B":case"BB":case"BBB":n=br(0,nr.Abbreviated,Fi.Format,!0);break;case"BBBB":n=br(0,nr.Wide,Fi.Format,!0);break;case"BBBBB":n=br(0,nr.Narrow,Fi.Format,!0);break;case"h":n=Mo(3,1,-12);break;case"hh":n=Mo(3,2,-12);break;case"H":n=Mo(3,1);break;case"HH":n=Mo(3,2);break;case"m":n=Mo(4,1);break;case"mm":n=Mo(4,2);break;case"s":n=Mo(5,1);break;case"ss":n=Mo(5,2);break;case"S":n=Mo(6,1);break;case"SS":n=Mo(6,2);break;case"SSS":n=Mo(6,3);break;case"Z":case"ZZ":case"ZZZ":n=aS(0);break;case"ZZZZZ":n=aS(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=aS(1);break;case"OOOO":case"ZZZZ":case"zzzz":n=aS(2);break;default:return null}return eO[t]=n,n}function dG(t,n){t=t.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function Pve(t,n){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+n),t}function Bve(t,n,e){let o=t.getTimezoneOffset(),i=dG(n,o);return Pve(t,-1*(i-o))}function Lve(t){if(QU(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[o,i=1,s=1]=t.split("-").map(a=>+a);return uS(o,i-1,s)}let e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let r;if(r=t.match(Dve))return $ve(r)}let n=new Date(t);if(!QU(n))throw new Error(`Unable to convert "${t}" into a date`);return n}function $ve(t){let n=new Date(0),e=0,r=0,o=t[8]?n.setUTCFullYear:n.setFullYear,i=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),r=Number(t[9]+t[11])),o.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-e,a=Number(t[5]||0)-r,l=Number(t[6]||0),c=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return i.call(n,s,a,l,c),n}function QU(t){return t instanceof Date&&!isNaN(t.valueOf())}var tO=/\s+/,JU=[],Im=(()=>{class t{_ngEl;_renderer;initialClasses=JU;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(tO):JU}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(tO):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let o=this.stateMap.get(e);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(tO).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(r){return new(r||t)(qt(_t),qt(Zr))};static \u0275dir=me({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})(),Jy=(()=>{class t{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletContent;ngComponentOutletNgModule;ngComponentOutletNgModuleFactory;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(e){this._viewContainerRef=e}_needToReCreateNgModuleInstance(e){return e.ngComponentOutletNgModule!==void 0||e.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(e){return e.ngComponentOutlet!==void 0||e.ngComponentOutletContent!==void 0||e.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let r=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=tU(this.ngComponentOutletNgModule,eG(r)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(eG(r)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:r,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(let[r,o]of this._inputsUsed)o?(e.setInput(r,this.ngComponentOutletInputs[r]),this._inputsUsed.set(r,!1)):(e.setInput(r,void 0),this._inputsUsed.delete(r))}static \u0275fac=function(r){return new(r||t)(qt(_r))};static \u0275dir=me({type:t,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},exportAs:["ngComponentOutlet"],features:[Dr]})}return t})();function eG(t){return t.get(dc).injector}var Nm=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,o){this._ngEl=e,this._differs=r,this._renderer=o}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[o,i]=e.split("."),s=o.indexOf("-")===-1?void 0:uc.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(qt(_t),qt(K5),qt(Zr))};static \u0275dir=me({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})(),gc=(()=>{class t{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,r,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,o):!1,get:(e,r,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,o)}})}static \u0275fac=function(r){return new(r||t)(qt(_r))};static \u0275dir=me({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Dr]})}return t})();function Vve(t,n){return new Ae(2100,!1)}var jve="mediumDate",pG=new Me(""),hG=new Me(""),nO=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(e,r,o){this.locale=e,this.defaultTimezone=r,this.defaultOptions=o}transform(e,r,o,i){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??jve,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return cG(e,s,i||this.locale,a)}catch(s){throw Vve(t,s.message)}}static \u0275fac=function(r){return new(r||t)(qt(J4,16),qt(pG,24),qt(hG,24))};static \u0275pipe=yh({name:"date",type:t,pure:!0})}return t})();var Cr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})}return t})();function ex(t,n){n=encodeURIComponent(n);for(let e of t.split(";")){let r=e.indexOf("="),[o,i]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===n)return decodeURIComponent(i)}return null}var pS="browser",fG="server";function rs(t){return t===pS}function g1(t){return t===fG}var Am=class{};function Rm(t,n,e){return DU(t,n,e)}var mG=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new rO(M(tn),window)})}return t})(),rO=class{document;window;offset=()=>[0,0];constructor(n,e){this.document=n,this.window=e}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){let e=Hve(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){let e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function Hve(t,n){let e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(n)||i.querySelector(`[name="${n}"]`);if(s)return s}o=r.nextNode()}}return null}var w1=class{},nx=class{},_h=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let o=e.slice(0,r),i=e.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let o=(n.op==="a"?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":let i=n.value;if(!i)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(n,e){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var fS=class{encodeKey(n){return gG(n)}encodeValue(n){return gG(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function Uve(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,i)),n.decodeValue(o.slice(i+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var Gve=/%(\d[a-f0-9])/gi,Wve={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function gG(t){return encodeURIComponent(t).replace(Gve,(n,e)=>Wve[e]??n)}function hS(t){return`${t}`}var vd=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new fS,n.fromString){if(n.fromObject)throw new Ae(2805,!1);this.map=Uve(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],o=Array.isArray(r)?r.map(hS):[hS(r)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let o=n[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(hS(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],o=r.indexOf(hS(n.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var mS=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function qve(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function vG(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function wG(t){return typeof Blob<"u"&&t instanceof Blob}function yG(t){return typeof FormData<"u"&&t instanceof FormData}function Kve(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var xG="Content-Type",_G="Accept",kG="X-Request-URL",bG="text/plain",CG="application/json",Zve=`${CG}, ${bG}, */*`,v1=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,r,o){this.url=e,this.method=n.toUpperCase();let i;if(qve(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new _h,this.context??=new mS,!this.params)this.params=new vd,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||vG(this.body)||wG(this.body)||yG(this.body)||Kve(this.body)?this.body:this.body instanceof vd?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||yG(this.body)?null:wG(this.body)?this.body.type||null:vG(this.body)?null:typeof this.body=="string"?bG:this.body instanceof vd?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?CG:null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,i=n.transferCache??this.transferCache,s=n.body!==void 0?n.body:this.body,a=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress,c=n.headers||this.headers,u=n.params||this.params,d=n.context??this.context;return n.setHeaders!==void 0&&(c=Object.keys(n.setHeaders).reduce((p,h)=>p.set(h,n.setHeaders[h]),c)),n.setParams&&(u=Object.keys(n.setParams).reduce((p,h)=>p.set(h,n.setParams[h]),u)),new t(e,r,s,{params:u,headers:c,context:d,reportProgress:l,responseType:o,withCredentials:a,transferCache:i})}},Om=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Om||{}),y1=class{headers;status;statusText;url;ok;type;constructor(n,e=200,r="OK"){this.headers=n.headers||new _h,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},gS=class t extends y1{constructor(n={}){super(n)}type=Om.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},rx=class t extends y1{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=Om.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},ox=class extends y1{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},Xve=200,Yve=204;function oO(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var x1=(()=>{class t{handler;constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof v1)i=e;else{let l;o.headers instanceof _h?l=o.headers:l=new _h(o.headers);let c;o.params&&(o.params instanceof vd?c=o.params:c=new vd({fromObject:o.params})),i=new v1(e,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=lt(i).pipe(fa(l=>this.handler.handle(l)));if(e instanceof v1||o.observe==="events")return s;let a=s.pipe(kn(l=>l instanceof rx));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(At(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Ae(2806,!1);return l.body}));case"blob":return a.pipe(At(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Ae(2807,!1);return l.body}));case"text":return a.pipe(At(l=>{if(l.body!==null&&typeof l.body!="string")throw new Ae(2808,!1);return l.body}));case"json":default:return a.pipe(At(l=>l.body))}case"response":return a;default:throw new Ae(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new vd().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,oO(o,r))}post(e,r,o={}){return this.request("POST",e,oO(o,r))}put(e,r,o={}){return this.request("PUT",e,oO(o,r))}static \u0275fac=function(r){return new(r||t)(Qe(w1))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var Qve=new Me("");function Jve(t,n){return n(t)}function ewe(t,n,e){return(r,o)=>Ho(e,()=>n(r,i=>t(i,o)))}var SG=new Me(""),MG=new Me(""),TG=new Me("",{providedIn:"root",factory:()=>!0});var vS=(()=>{class t extends w1{backend;injector;chain=null;pendingTasks=M(wh);contributeToStability=M(TG);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(SG),...this.injector.get(MG,[])]));this.chain=r.reduceRight((o,i)=>ewe(o,i,this.injector),Jve)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(rm(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(Qe(nx),Qe(io))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var twe=/^\)\]\}',?\n/,nwe=RegExp(`^${kG}:`,"m");function rwe(t){return"responseURL"in t&&t.responseURL?t.responseURL:nwe.test(t.getAllResponseHeaders())?t.getResponseHeader(kG):null}var iO=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Ae(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Xn(r.\u0275loadImpl()):lt(null)).pipe(jr(()=>new en(i=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((m,g)=>s.setRequestHeader(m,g.join(","))),e.headers.has(_G)||s.setRequestHeader(_G,Zve),!e.headers.has(xG)){let m=e.detectContentTypeHeader();m!==null&&s.setRequestHeader(xG,m)}if(e.responseType){let m=e.responseType.toLowerCase();s.responseType=m!=="json"?m:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let m=s.statusText||"OK",g=new _h(s.getAllResponseHeaders()),v=rwe(s)||e.url;return l=new gS({headers:g,status:s.status,statusText:m,url:v}),l},u=()=>{let{headers:m,status:g,statusText:v,url:w}=c(),y=null;g!==Yve&&(y=typeof s.response>"u"?s.responseText:s.response),g===0&&(g=y?Xve:0);let _=g>=200&&g<300;if(e.responseType==="json"&&typeof y=="string"){let k=y;y=y.replace(twe,"");try{y=y!==""?JSON.parse(y):null}catch(T){y=k,_&&(_=!1,y={error:T,text:y})}}_?(i.next(new rx({body:y,headers:m,status:g,statusText:v,url:w||void 0})),i.complete()):i.error(new ox({error:y,headers:m,status:g,statusText:v,url:w||void 0}))},d=m=>{let{url:g}=c(),v=new ox({error:m,status:s.status||0,statusText:s.statusText||"Unknown Error",url:g||void 0});i.error(v)},p=!1,h=m=>{p||(i.next(c()),p=!0);let g={type:Om.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),e.responseType==="text"&&s.responseText&&(g.partialText=s.responseText),i.next(g)},f=m=>{let g={type:Om.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),i.next(g)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),e.reportProgress&&(s.addEventListener("progress",h),a!==null&&s.upload&&s.upload.addEventListener("progress",f)),s.send(a),i.next({type:Om.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),e.reportProgress&&(s.removeEventListener("progress",h),a!==null&&s.upload&&s.upload.removeEventListener("progress",f)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(Qe(Am))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),DG=new Me(""),owe="XSRF-TOKEN",iwe=new Me("",{providedIn:"root",factory:()=>owe}),swe="X-XSRF-TOKEN",awe=new Me("",{providedIn:"root",factory:()=>swe}),ix=class{},lwe=(()=>{class t{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ex(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||t)(Qe(tn),Qe(so),Qe(iwe))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function cwe(t,n){let e=t.url.toLowerCase();if(!M(DG)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=M(ix).getToken(),o=M(awe);return r!=null&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),n(t)}function sO(...t){let n=[x1,iO,vS,{provide:w1,useExisting:vS},{provide:nx,useFactory:()=>M(Qve,{optional:!0})??M(iO)},{provide:SG,useValue:cwe,multi:!0},{provide:DG,useValue:!0},{provide:ix,useClass:lwe}];for(let e of t)n.push(...e.\u0275providers);return ym(n)}function dwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var EG=["de",[["AM","PM"],void 0,void 0],void 0,[["S","M","D","M","D","F","S"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["S","M","D","M","D","F","S"],["So","Mo","Di","Mi","Do","Fr","Sa"],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan.","Feb.","M\xE4rz","Apr.","Mai","Juni","Juli","Aug.","Sept.","Okt.","Nov.","Dez."],["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["v. Chr.","n. Chr."],void 0,void 0],1,[6,0],["dd.MM.yy","dd.MM.y","d. MMMM y","EEEE, d. MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} 'um' {0}",void 0],[",",".",";","%","+","-","E","\xB7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","Euro",{ATS:["\xF6S"],AUD:["AU$","$"],BGM:["BGK"],BGO:["BGJ"],BYN:[void 0,"\u0440."],CUC:[void 0,"Cub$"],DEM:["DM"],FKP:[void 0,"Fl\xA3"],GHS:[void 0,"\u20B5"],GNF:[void 0,"F.G."],KMF:[void 0,"FC"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],RUR:[void 0,"\u0440."],RWF:[void 0,"F.Rw"],SYP:[],THB:["\u0E3F"],TWD:["NT$"],XXX:[],ZMW:[void 0,"K"]},"ltr",dwe];function pwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var IG=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",pwe];function hwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return n===1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var NG=["es",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",hwe];function fwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var AG=["fr",[["AM","PM"],void 0,void 0],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",fwe];function mwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1&&r===0?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var RG=["it",[["m.","p."],["AM","PM"],void 0],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",mwe];function gwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===Math.floor(e)&&e>=0&&e<=1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var OG=["pt",[["AM","PM"],void 0,void 0],void 0,[["D","S","T","Q","Q","S","S"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xE1b."],["domingo","segunda-feira","ter\xE7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xE1bado"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xE1b."]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."],["janeiro","fevereiro","mar\xE7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]],void 0,[["a.C.","d.C."],void 0,["antes de Cristo","depois de Cristo"]],0,[6,0],["dd/MM/y","d 'de' MMM 'de' y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4\xA0#,##0.00","#E0"],"BRL","R$","Real brasileiro",{AUD:["AU$","$"],BYN:[void 0,"\u0440."],JPY:["JP\xA5","\xA5"],PHP:[void 0,"\u20B1"],PTE:["Esc."],RON:[void 0,"L"],SYP:[void 0,"S\xA3"],THB:["\u0E3F"],TWD:["NT$"],USD:["US$","$"]},"ltr",gwe];var xS=new Me(""),uO=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o,i){return this._findPluginFor(r).addEventListener(e,r,o,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new Ae(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||t)(Qe(xS),Qe(Rt))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),sx=class{_doc;constructor(n){this._doc=n}manager},wS="ng-app-id";function FG(t){for(let n of t)n.remove()}function PG(t,n){let e=n.createElement("style");return e.textContent=t,e}function vwe(t,n,e,r){let o=t.head?.querySelectorAll(`style[${wS}="${n}"],link[${wS}="${n}"]`);if(o)for(let i of o)i.removeAttribute(wS),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&e.set(i.textContent,{usage:0,elements:[i]})}function lO(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var dO=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,o,i={}){this.doc=e,this.appId=r,this.nonce=o,this.isServer=g1(i),vwe(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let o of e)this.addUsage(o,this.inline,PG);r?.forEach(o=>this.addUsage(o,this.external,lO))}removeStyles(e,r){for(let o of e)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(e,r,o){let i=r.get(e);i?i.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(e,this.doc)))})}removeUsage(e,r){let o=r.get(e);o&&(o.usage--,o.usage<=0&&(FG(o.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])FG(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(e,PG(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(e,lO(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(wS,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Qe(tn),Qe(km),Qe(y5,8),Qe(so))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),aO={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pO=/%COMP%/g;var LG="%COMP%",wwe=`_nghost-${LG}`,ywe=`_ngcontent-${LG}`,xwe=!0,_we=new Me("",{providedIn:"root",factory:()=>xwe});function kwe(t){return ywe.replace(pO,t)}function bwe(t){return wwe.replace(pO,t)}function $G(t,n){return n.map(e=>e.replace(pO,t))}var cx=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,o,i,s,a,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=g1(a),this.defaultRenderer=new ax(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cc.ShadowDom&&(r=ht(le({},r),{encapsulation:cc.Emulated}));let o=this.getOrCreateRenderer(e,r);return o instanceof yS?o.applyToHost(e):o instanceof lx&&o.applyStyles(),o}getOrCreateRenderer(e,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case cc.Emulated:i=new yS(l,c,r,this.appId,u,s,a,d,p);break;case cc.ShadowDom:return new cO(l,c,e,r,s,a,this.nonce,d,p);default:i=new lx(l,c,r,u,s,a,d,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||t)(Qe(uO),Qe(dO),Qe(km),Qe(_we),Qe(tn),Qe(so),Qe(Rt),Qe(y5),Qe(Cm,8))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),ax=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,r,o,i){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(aO[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(BG(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(BG(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){e.remove()}selectRootElement(n,e){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new Ae(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,o){if(o){e=o+":"+e;let i=aO[o];i?n.setAttributeNS(i,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){let o=aO[r];o?n.removeAttributeNS(o,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,o){o&(uc.DashCase|uc.Important)?n.style.setProperty(e,r,o&uc.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&uc.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n!=null&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r,o){if(typeof n=="string"&&(n=xa().getGlobalEventTarget(this.doc,n),!n))throw new Ae(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(n,e,i)),this.eventManager.addEventListener(n,e,i,o)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function BG(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var cO=class extends ax{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,r,o,i,s,a,l,c){super(n,i,s,l,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=$G(o.id,u);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}let d=o.getExternalStyles?.();if(d)for(let p of d){let h=lO(p,i);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},lx=class extends ax{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,r,o,i,s,a,l,c){super(n,i,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=c?$G(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},yS=class extends lx{contentAttr;hostAttr;constructor(n,e,r,o,i,s,a,l,c){let u=o+"-"+r.id;super(n,e,r,i,s,a,l,c,u),this.contentAttr=kwe(u),this.hostAttr=bwe(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}};var _S=class t extends qy{supportsDOMEvents=!0;static makeCurrent(){X5(new t)}onAndCancel(n,e,r,o){return n.addEventListener(e,r,o),()=>{n.removeEventListener(e,r,o)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=Cwe();return e==null?null:Swe(e)}resetBaseElement(){ux=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ex(document.cookie,n)}},ux=null;function Cwe(){return ux=ux||document.querySelector("base"),ux?ux.getAttribute("href"):null}function Swe(t){return new URL(t,document.baseURI).pathname}var Mwe=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),jG=(()=>{class t extends sx{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o,i){return e.addEventListener(r,o,i),()=>this.removeEventListener(e,r,o,i)}removeEventListener(e,r,o,i){return e.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||t)(Qe(tn))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),VG=["alt","control","meta","shift"],Twe={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dwe={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},zG=(()=>{class t extends sx{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,r,o,i){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xa().onAndCancel(e,s.domEventName,a,i))}static parseEventName(e){let r=e.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),VG.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let o=Twe[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),VG.forEach(s=>{if(s!==o){let a=Dwe[s];a(e)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{t.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||t)(Qe(tn))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function hO(t,n){return UU(le({rootComponent:t},Ewe(n)))}function Ewe(t){return{appProviders:[...Owe,...t?.providers??[]],platformProviders:Rwe}}function Iwe(){_S.makeCurrent()}function Nwe(){return new al}function Awe(){return tH(document),document}var Rwe=[{provide:so,useValue:pS},{provide:w5,useValue:Iwe,multi:!0},{provide:tn,useFactory:Awe}];var Owe=[{provide:E4,useValue:"root"},{provide:al,useFactory:Nwe},{provide:xS,useClass:jG,multi:!0,deps:[tn]},{provide:xS,useClass:zG,multi:!0,deps:[tn]},cx,dO,uO,{provide:ko,useExisting:cx},{provide:Am,useClass:Mwe},[]];var HG=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||t)(Qe(tn))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var sn=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(sn||{}),ba="*";function kS(t,n){return{type:sn.Trigger,name:t,definitions:n,options:{}}}function _1(t,n=null){return{type:sn.Animate,styles:n,timings:t}}function UG(t,n=null){return{type:sn.Sequence,steps:t,options:n}}function Is(t){return{type:sn.Style,styles:t,offset:null}}function k1(t,n,e=null){return{type:sn.Transition,expr:t,animation:n,options:e}}function Pm(t,n,e=null){return{type:sn.Query,selector:t,animation:n,options:e}}var vc=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,e=0){this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Fm=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let e=0,r=0,o=0,i=this.players.length;i==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==i&&this._onFinish()}),s.onDestroy(()=>{++r==i&&this._onDestroy()}),s.onStart(()=>{++o==i&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){let e=n*this.totalTime;this.players.forEach(r=>{let o=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(o)})}getPosition(){let n=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return n!=null?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},b1="!";function GG(t){return new Ae(3e3,!1)}function Pwe(){return new Ae(3100,!1)}function Bwe(){return new Ae(3101,!1)}function Lwe(t){return new Ae(3001,!1)}function $we(t){return new Ae(3003,!1)}function Vwe(t){return new Ae(3004,!1)}function qG(t,n){return new Ae(3005,!1)}function KG(){return new Ae(3006,!1)}function ZG(){return new Ae(3007,!1)}function XG(t,n){return new Ae(3008,!1)}function YG(t){return new Ae(3002,!1)}function QG(t,n,e,r,o){return new Ae(3010,!1)}function JG(){return new Ae(3011,!1)}function eW(){return new Ae(3012,!1)}function tW(){return new Ae(3200,!1)}function nW(){return new Ae(3202,!1)}function rW(){return new Ae(3013,!1)}function oW(t){return new Ae(3014,!1)}function iW(t){return new Ae(3015,!1)}function sW(t){return new Ae(3016,!1)}function aW(t,n){return new Ae(3404,!1)}function jwe(t){return new Ae(3502,!1)}function lW(t){return new Ae(3503,!1)}function cW(){return new Ae(3300,!1)}function uW(t){return new Ae(3504,!1)}function dW(t){return new Ae(3301,!1)}function pW(t,n){return new Ae(3302,!1)}function hW(t){return new Ae(3303,!1)}function fW(t,n){return new Ae(3400,!1)}function mW(t){return new Ae(3401,!1)}function gW(t){return new Ae(3402,!1)}function vW(t,n){return new Ae(3505,!1)}function wd(t){switch(t.length){case 0:return new vc;case 1:return t[0];default:return new Fm(t)}}function vO(t,n,e=new Map,r=new Map){let o=[],i=[],s=-1,a=null;if(n.forEach(l=>{let c=l.get("offset"),u=c==s,d=u&&a||new Map;l.forEach((p,h)=>{let f=h,m=p;if(h!=="offset")switch(f=t.normalizePropertyName(f,o),m){case b1:m=e.get(h);break;case ba:m=r.get(h);break;default:m=t.normalizeStyleValue(h,f,m,o);break}d.set(f,m)}),u||i.push(d),a=d,s=c}),o.length)throw jwe(o);return i}function bS(t,n,e,r){switch(n){case"start":t.onStart(()=>r(e&&fO(e,"start",t)));break;case"done":t.onDone(()=>r(e&&fO(e,"done",t)));break;case"destroy":t.onDestroy(()=>r(e&&fO(e,"destroy",t)));break}}function fO(t,n,e){let r=e.totalTime,o=!!e.disabled,i=CS(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,r??t.totalTime,o),s=t._data;return s!=null&&(i._data=s),i}function CS(t,n,e,r,o="",i=0,s){return{element:t,triggerName:n,fromState:e,toState:r,phaseName:o,totalTime:i,disabled:!!s}}function Ns(t,n,e){let r=t.get(n);return r||t.set(n,r=e),r}function wO(t){let n=t.indexOf(":"),e=t.substring(1,n),r=t.slice(n+1);return[e,r]}var zwe=typeof document>"u"?null:document.documentElement;function SS(t){let n=t.parentNode||t.host||null;return n===zwe?null:n}function Hwe(t){return t.substring(1,6)=="ebkit"}var Bm=null,WG=!1;function wW(t){Bm||(Bm=Uwe()||{},WG=Bm.style?"WebkitAppearance"in Bm.style:!1);let n=!0;return Bm.style&&!Hwe(t)&&(n=t in Bm.style,!n&&WG&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Bm.style)),n}function Uwe(){return typeof document<"u"?document.body:null}function yO(t,n){for(;n;){if(n===t)return!0;n=SS(n)}return!1}function xO(t,n,e){if(e)return Array.from(t.querySelectorAll(n));let r=t.querySelector(n);return r?[r]:[]}var Gwe=1e3,_O="{{",Wwe="}}",kO="ng-enter",MS="ng-leave",dx="ng-trigger",px=".ng-trigger",bO="ng-animating",TS=".ng-animating";function wc(t){if(typeof t=="number")return t;let n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:mO(parseFloat(n[1]),n[2])}function mO(t,n){switch(n){case"s":return t*Gwe;default:return t}}function hx(t,n,e){return t.hasOwnProperty("duration")?t:qwe(t,n,e)}function qwe(t,n,e){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,o,i=0,s="";if(typeof t=="string"){let a=t.match(r);if(a===null)return n.push(GG(t)),{duration:0,delay:0,easing:""};o=mO(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(i=mO(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else o=t;if(!e){let a=!1,l=n.length;o<0&&(n.push(Pwe()),a=!0),i<0&&(n.push(Bwe()),a=!0),a&&n.splice(l,0,GG(t))}return{duration:o,delay:i,easing:s}}function yW(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}function fl(t,n,e){n.forEach((r,o)=>{let i=DS(o);e&&!e.has(o)&&e.set(o,t.style[i]),t.style[i]=r})}function kh(t,n){n.forEach((e,r)=>{let o=DS(r);t.style[o]=""})}function C1(t){return Array.isArray(t)?t.length==1?t[0]:UG(t):t}function xW(t,n,e){let r=n.params||{},o=CO(t);o.length&&o.forEach(i=>{r.hasOwnProperty(i)||e.push(Lwe(i))})}var gO=new RegExp(`${_O}\\s*(.+?)\\s*${Wwe}`,"g");function CO(t){let n=[];if(typeof t=="string"){let e;for(;e=gO.exec(t);)n.push(e[1]);gO.lastIndex=0}return n}function S1(t,n,e){let r=`${t}`,o=r.replace(gO,(i,s)=>{let a=n[s];return a==null&&(e.push($we(s)),a=""),a.toString()});return o==r?t:o}var Kwe=/-+([a-z0-9])/g;function DS(t){return t.replace(Kwe,(...n)=>n[1].toUpperCase())}function _W(t,n){return t===0||n===0}function kW(t,n,e){if(e.size&&n.length){let r=n[0],o=[];if(e.forEach((i,s)=>{r.has(s)||o.push(s),r.set(s,i)}),o.length)for(let i=1;i<n.length;i++){let s=n[i];o.forEach(a=>s.set(a,ES(t,a)))}}return n}function As(t,n,e){switch(n.type){case sn.Trigger:return t.visitTrigger(n,e);case sn.State:return t.visitState(n,e);case sn.Transition:return t.visitTransition(n,e);case sn.Sequence:return t.visitSequence(n,e);case sn.Group:return t.visitGroup(n,e);case sn.Animate:return t.visitAnimate(n,e);case sn.Keyframes:return t.visitKeyframes(n,e);case sn.Style:return t.visitStyle(n,e);case sn.Reference:return t.visitReference(n,e);case sn.AnimateChild:return t.visitAnimateChild(n,e);case sn.AnimateRef:return t.visitAnimateRef(n,e);case sn.Query:return t.visitQuery(n,e);case sn.Stagger:return t.visitStagger(n,e);default:throw Vwe(n.type)}}function ES(t,n){return window.getComputedStyle(t)[n]}var jO=(()=>{class t{validateStyleProperty(e){return wW(e)}containsElement(e,r){return yO(e,r)}getParentElement(e){return SS(e)}query(e,r,o){return xO(e,r,o)}computeStyle(e,r,o){return o||""}animate(e,r,o,i,s,a=[],l){return new vc(o,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),$m=class{static NOOP=new jO},Vm=class{};var Zwe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),OS=class extends Vm{normalizePropertyName(n,e){return DS(n)}normalizeStyleValue(n,e,r,o){let i="",s=r.toString().trim();if(Zwe.has(e)&&r!==0&&r!=="0")if(typeof r=="number")i="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&o.push(qG(n,r))}return s+i}};var FS="*";function Xwe(t,n){let e=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>Ywe(r,e,n)):e.push(t),e}function Ywe(t,n,e){if(t[0]==":"){let l=Qwe(t,e);if(typeof l=="function"){n.push(l);return}t=l}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return e.push(iW(t)),n;let o=r[1],i=r[2],s=r[3];n.push(bW(o,s));let a=o==FS&&s==FS;i[0]=="<"&&!a&&n.push(bW(s,o))}function Qwe(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return n.push(sW(t)),"* => *"}}var IS=new Set(["true","1"]),NS=new Set(["false","0"]);function bW(t,n){let e=IS.has(t)||NS.has(t),r=IS.has(n)||NS.has(n);return(o,i)=>{let s=t==FS||t==o,a=n==FS||n==i;return!s&&e&&typeof o=="boolean"&&(s=o?IS.has(t):NS.has(t)),!a&&r&&typeof i=="boolean"&&(a=i?IS.has(n):NS.has(n)),s&&a}}var RW=":self",Jwe=new RegExp(`s*${RW}s*,?`,"g");function OW(t,n,e,r){return new IO(t).build(n,e,r)}var CW="",IO=class{_driver;constructor(n){this._driver=n}build(n,e,r){let o=new NO(e);return this._resetContextStyleTimingState(o),As(this,C1(n),o)}_resetContextStyleTimingState(n){n.currentQuerySelector=CW,n.collectedStyles=new Map,n.collectedStyles.set(CW,new Map),n.currentTime=0}visitTrigger(n,e){let r=e.queryCount=0,o=e.depCount=0,i=[],s=[];return n.name.charAt(0)=="@"&&e.errors.push(KG()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==sn.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,i.push(this.visitState(l,e))}),l.name=c}else if(a.type==sn.Transition){let l=this.visitTransition(a,e);r+=l.queryCount,o+=l.depCount,s.push(l)}else e.errors.push(ZG())}),{type:sn.Trigger,name:n.name,states:i,transitions:s,queryCount:r,depCount:o,options:null}}visitState(n,e){let r=this.visitStyle(n.styles,e),o=n.options&&n.options.params||null;if(r.containsDynamicStyles){let i=new Set,s=o||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{CO(l).forEach(c=>{s.hasOwnProperty(c)||i.add(c)})})}),i.size&&e.errors.push(XG(n.name,[...i.values()]))}return{type:sn.State,name:n.name,style:r,options:o?{params:o}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;let r=As(this,C1(n.animation),e),o=Xwe(n.expr,e.errors);return{type:sn.Transition,matchers:o,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Lm(n.options)}}visitSequence(n,e){return{type:sn.Sequence,steps:n.steps.map(r=>As(this,r,e)),options:Lm(n.options)}}visitGroup(n,e){let r=e.currentTime,o=0,i=n.steps.map(s=>{e.currentTime=r;let a=As(this,s,e);return o=Math.max(o,e.currentTime),a});return e.currentTime=o,{type:sn.Group,steps:i,options:Lm(n.options)}}visitAnimate(n,e){let r=rye(n.timings,e.errors);e.currentAnimateTimings=r;let o,i=n.styles?n.styles:Is({});if(i.type==sn.Keyframes)o=this.visitKeyframes(i,e);else{let s=n.styles,a=!1;if(!s){a=!0;let c={};r.easing&&(c.easing=r.easing),s=Is(c)}e.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,o=l}return e.currentAnimateTimings=null,{type:sn.Animate,timings:r,style:o,options:null}}visitStyle(n,e){let r=this._makeStyleAst(n,e);return this._validateStyleAst(r,e),r}_makeStyleAst(n,e){let r=[],o=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of o)typeof a=="string"?a===ba?r.push(a):e.errors.push(YG(a)):r.push(new Map(Object.entries(a)));let i=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!i)){for(let l of a.values())if(l.toString().indexOf(_O)>=0){i=!0;break}}}),{type:sn.Style,styles:r,easing:s,offset:n.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(n,e){let r=e.currentAnimateTimings,o=e.currentTime,i=e.currentTime;r&&i>0&&(i-=r.duration+r.delay),n.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l),d=!0;u&&(i!=o&&i>=u.startTime&&o<=u.endTime&&(e.errors.push(QG(l,u.startTime,u.endTime,i,o)),d=!1),i=u.startTime),d&&c.set(l,{startTime:i,endTime:o}),e.options&&xW(a,e.options,e.errors)})})}visitKeyframes(n,e){let r={type:sn.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(JG()),r;let o=1,i=0,s=[],a=!1,l=!1,c=0,u=n.steps.map(v=>{let w=this._makeStyleAst(v,e),y=w.offset!=null?w.offset:nye(w.styles),_=0;return y!=null&&(i++,_=w.offset=y),l=l||_<0||_>1,a=a||_<c,c=_,s.push(_),w});l&&e.errors.push(eW()),a&&e.errors.push(tW());let d=n.steps.length,p=0;i>0&&i<d?e.errors.push(nW()):i==0&&(p=o/(d-1));let h=d-1,f=e.currentTime,m=e.currentAnimateTimings,g=m.duration;return u.forEach((v,w)=>{let y=p>0?w==h?1:p*w:s[w],_=y*g;e.currentTime=f+m.delay+_,m.duration=_,this._validateStyleAst(v,e),v.offset=y,r.styles.push(v)}),r}visitReference(n,e){return{type:sn.Reference,animation:As(this,C1(n.animation),e),options:Lm(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:sn.AnimateChild,options:Lm(n.options)}}visitAnimateRef(n,e){return{type:sn.AnimateRef,animation:this.visitReference(n.animation,e),options:Lm(n.options)}}visitQuery(n,e){let r=e.currentQuerySelector,o=n.options||{};e.queryCount++,e.currentQuery=n;let[i,s]=eye(n.selector);e.currentQuerySelector=r.length?r+" "+i:i,Ns(e.collectedStyles,e.currentQuerySelector,new Map);let a=As(this,C1(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:sn.Query,selector:i,limit:o.limit||0,optional:!!o.optional,includeSelf:s,animation:a,originalSelector:n.selector,options:Lm(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(rW());let r=n.timings==="full"?{duration:0,delay:0,easing:"full"}:hx(n.timings,e.errors,!0);return{type:sn.Stagger,animation:As(this,C1(n.animation),e),timings:r,options:null}}};function eye(t){let n=!!t.split(/\s*,\s*/).find(e=>e==RW);return n&&(t=t.replace(Jwe,"")),t=t.replace(/@\*/g,px).replace(/@\w+/g,e=>px+"-"+e.slice(1)).replace(/:animating/g,TS),[t,n]}function tye(t){return t?le({},t):null}var NO=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}};function nye(t){if(typeof t=="string")return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){let r=e;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}function rye(t,n){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let i=hx(t,n).duration;return SO(i,0,"")}let e=t;if(e.split(/\s+/).some(i=>i.charAt(0)=="{"&&i.charAt(1)=="{")){let i=SO(0,0,"");return i.dynamic=!0,i.strValue=e,i}let o=hx(e,n);return SO(o.duration,o.delay,o.easing)}function Lm(t){return t?(t=le({},t),t.params&&(t.params=tye(t.params))):t={},t}function SO(t,n,e){return{duration:t,delay:n,easing:e}}function zO(t,n,e,r,o,i,s=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:r,duration:o,delay:i,totalTime:o+i,easing:s,subTimeline:a}}var mx=class{_map=new Map;get(n){return this._map.get(n)||[]}append(n,e){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}},oye=1,iye=":enter",sye=new RegExp(iye,"g"),aye=":leave",lye=new RegExp(aye,"g");function FW(t,n,e,r,o,i=new Map,s=new Map,a,l,c=[]){return new AO().buildKeyframes(t,n,e,r,o,i,s,a,l,c)}var AO=class{buildKeyframes(n,e,r,o,i,s,a,l,c,u=[]){c=c||new mx;let d=new RO(n,e,c,o,i,u,[]);d.options=l;let p=l.delay?wc(l.delay):0;d.currentTimeline.delayNextStep(p),d.currentTimeline.setStyles([s],null,d.errors,l),As(this,r,d);let h=d.timelines.filter(f=>f.containsAnimation());if(h.length&&a.size){let f;for(let m=h.length-1;m>=0;m--){let g=h[m];if(g.element===e){f=g;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[zO(e,[],[],[],0,p,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){let r=e.subInstructions.get(e.element);if(r){let o=e.createSubContext(n.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,o,o.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=n}visitAnimateRef(n,e){let r=e.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,r),this.visitReference(n.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,r){for(let o of n){let i=o?.delay;if(i){let s=typeof i=="number"?i:wc(S1(i,o?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(n,e,r){let i=e.currentTimeline.currentTime,s=r.duration!=null?wc(r.duration):null,a=r.delay!=null?wc(r.delay):null;return s!==0&&n.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);i=Math.max(i,c.duration+c.delay)}),i}visitReference(n,e){e.updateOptions(n.options,!0),As(this,n.animation,e),e.previousNode=n}visitSequence(n,e){let r=e.subContextCount,o=e,i=n.options;if(i&&(i.params||i.delay)&&(o=e.createSubContext(i),o.transformIntoNewTimeline(),i.delay!=null)){o.previousNode.type==sn.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=PS);let s=wc(i.delay);o.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>As(this,s,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){let r=[],o=e.currentTimeline.currentTime,i=n.options&&n.options.delay?wc(n.options.delay):0;n.steps.forEach(s=>{let a=e.createSubContext(n.options);i&&a.delayNextStep(i),As(this,s,a),o=Math.max(o,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(o),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){let r=n.strValue,o=e.params?S1(r,e.params,e.errors):r;return hx(o,e.errors)}else return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){let r=e.currentAnimateTimings=this._visitTiming(n.timings,e),o=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),o.snapshotCurrentStyles());let i=n.style;i.type==sn.Keyframes?this.visitKeyframes(i,e):(e.incrementTime(r.duration),this.visitStyle(i,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){let r=e.currentTimeline,o=e.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();let i=o&&o.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(i):r.setStyles(n.styles,i,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){let r=e.currentAnimateTimings,o=e.currentTimeline.duration,i=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,n.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*i),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(o+i),e.previousNode=n}visitQuery(n,e){let r=e.currentTimeline.currentTime,o=n.options||{},i=o.delay?wc(o.delay):0;i&&(e.previousNode.type===sn.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=PS);let s=r,a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;let d=e.createSubContext(n.options,c);i&&d.delayNextStep(i),c===e.element&&(l=d.currentTimeline),As(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe();let p=d.currentTimeline.currentTime;s=Math.max(s,p)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){let r=e.parentContext,o=e.currentTimeline,i=n.timings,s=Math.abs(i.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let u=e.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;As(this,n.animation,e),e.previousNode=n,r.currentStaggerTime=o.currentTime-d+(o.startTime-r.currentTimeline.startTime)}},PS={},RO=class t{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=PS;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,e,r,o,i,s,a,l){this._driver=n,this.element=e,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=i,this.errors=s,this.timelines=a,this.currentTimeline=l||new BS(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;let r=n,o=this.options;r.duration!=null&&(o.duration=wc(r.duration)),r.delay!=null&&(o.delay=wc(r.delay));let i=r.params;if(i){let s=o.params;s||(s=this.options.params={}),Object.keys(i).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=S1(i[a],s,this.errors))})}}_copyOptions(){let n={};if(this.options){let e=this.options.params;if(e){let r=n.params={};Object.keys(e).forEach(o=>{r[o]=e[o]})}}return n}createSubContext(n=null,e,r){let o=e||this.element,i=new t(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(n),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(n){return this.previousNode=PS,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,r){let o={duration:e??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},i=new OO(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(i),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,r,o,i,s){let a=[];if(o&&a.push(this.element),n.length>0){n=n.replace(sye,"."+this._enterClassName),n=n.replace(lye,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,n,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!i&&a.length==0&&s.push(oW(e)),a}},BS=class t{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,e,r,o){this._driver=n,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=o,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new t(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=oye,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||ba),this._currentKeyframe.set(e,ba);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,r,o){e&&this._previousKeyframe.set("easing",e);let i=o&&o.params||{},s=cye(n,this._globalTimelineStyles);for(let[a,l]of s){let c=S1(l,i,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ba),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,r)=>{let o=this._styleSummary.get(r);(!o||e.time>o.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let n=new Set,e=new Set,r=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===b1?n.add(d):u===ba&&e.add(d)}),r||c.set("offset",l/this.duration),o.push(c)});let i=[...n.values()],s=[...e.values()];if(r){let a=o[0],l=new Map(a);a.set("offset",0),l.set("offset",1),o=[a,l]}return zO(this.element,o,i,s,this.duration,this.startTime,this.easing,!1)}},OO=class extends BS{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,e,r,o,i,s,a=!1){super(n,e,s.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=i,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){let i=[],s=r+e,a=e/s,l=new Map(n[0]);l.set("offset",0),i.push(l);let c=new Map(n[0]);c.set("offset",SW(a)),i.push(c);let u=n.length-1;for(let d=1;d<=u;d++){let p=new Map(n[d]),h=p.get("offset"),f=e+h*r;p.set("offset",SW(f/s)),i.push(p)}r=s,e=0,o="",n=i}return zO(this.element,n,this.preStyleProps,this.postStyleProps,r,e,o,!0)}};function SW(t,n=3){let e=Math.pow(10,n-1);return Math.round(t*e)/e}function cye(t,n){let e=new Map,r;return t.forEach(o=>{if(o==="*"){r??=n.keys();for(let i of r)e.set(i,ba)}else for(let[i,s]of o)e.set(i,s)}),e}function MW(t,n,e,r,o,i,s,a,l,c,u,d,p){return{type:0,element:t,triggerName:n,isRemovalTransition:o,fromState:e,fromStyles:i,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:p}}var MO={},LS=class{_triggerName;ast;_stateStyles;constructor(n,e,r){this._triggerName=n,this.ast=e,this._stateStyles=r}match(n,e,r,o){return uye(this.ast.matchers,n,e,r,o)}buildStyles(n,e,r){let o=this._stateStyles.get("*");return n!==void 0&&(o=this._stateStyles.get(n?.toString())||o),o?o.buildStyles(e,r):new Map}build(n,e,r,o,i,s,a,l,c,u){let d=[],p=this.ast.options&&this.ast.options.params||MO,h=a&&a.params||MO,f=this.buildStyles(r,h,d),m=l&&l.params||MO,g=this.buildStyles(o,m,d),v=new Set,w=new Map,y=new Map,_=o==="void",k={params:PW(m,p),delay:this.ast.options?.delay},T=u?[]:FW(n,e,this.ast.animation,i,s,f,g,k,c,d),I=0;return T.forEach(A=>{I=Math.max(A.duration+A.delay,I)}),d.length?MW(e,this._triggerName,r,o,_,f,g,[],[],w,y,I,d):(T.forEach(A=>{let P=A.element,N=Ns(w,P,new Set);A.preStyleProps.forEach(S=>N.add(S));let B=Ns(y,P,new Set);A.postStyleProps.forEach(S=>B.add(S)),P!==e&&v.add(P)}),MW(e,this._triggerName,r,o,_,f,g,T,[...v.values()],w,y,I))}};function uye(t,n,e,r,o){return t.some(i=>i(n,e,r,o))}function PW(t,n){let e=le({},n);return Object.entries(t).forEach(([r,o])=>{o!=null&&(e[r]=o)}),e}var FO=class{styles;defaultParams;normalizer;constructor(n,e,r){this.styles=n,this.defaultParams=e,this.normalizer=r}buildStyles(n,e){let r=new Map,o=PW(n,this.defaultParams);return this.styles.styles.forEach(i=>{typeof i!="string"&&i.forEach((s,a)=>{s&&(s=S1(s,o,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),r.set(a,s)})}),r}};function dye(t,n,e){return new PO(t,n,e)}var PO=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,e,r){this.name=n,this.ast=e,this._normalizer=r,e.states.forEach(o=>{let i=o.options&&o.options.params||{};this.states.set(o.name,new FO(o.style,i,r))}),TW(this.states,"true","1"),TW(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new LS(n,o,this.states))}),this.fallbackTransition=pye(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,r,o){return this.transitionFactories.find(s=>s.match(n,e,r,o))||null}matchStyles(n,e,r){return this.fallbackTransition.buildStyles(n,e,r)}};function pye(t,n,e){let r=[(s,a)=>!0],o={type:sn.Sequence,steps:[],options:null},i={type:sn.Transition,animation:o,matchers:r,options:null,queryCount:0,depCount:0};return new LS(t,i,n)}function TW(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}var hye=new mx,BO=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r}register(n,e){let r=[],o=[],i=OW(this._driver,e,r,o);if(r.length)throw lW(r);this._animations.set(n,i)}_buildPlayer(n,e,r){let o=n.element,i=vO(this._normalizer,n.keyframes,e,r);return this._driver.animate(o,i,n.duration,n.delay,n.easing,[],!0)}create(n,e,r={}){let o=[],i=this._animations.get(n),s,a=new Map;if(i?(s=FW(this._driver,e,i,kO,MS,new Map,new Map,r,hye,o),s.forEach(u=>{let d=Ns(a,u.element,new Map);u.postStyleProps.forEach(p=>d.set(p,null))})):(o.push(cW()),s=[]),o.length)throw uW(o);a.forEach((u,d)=>{u.forEach((p,h)=>{u.set(h,this._driver.computeStyle(d,h,ba))})});let l=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=wd(l);return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){let e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(n){let e=this._playersById.get(n);if(!e)throw dW(n);return e}listen(n,e,r,o){let i=CS(e,"","","");return bS(this._getPlayer(n),r,i,o),()=>{}}command(n,e,r,o){if(r=="register"){this.register(n,o[0]);return}if(r=="create"){let s=o[0]||{};this.create(n,e,s);return}let i=this._getPlayer(n);switch(r){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n);break}}},DW="ng-animate-queued",fye=".ng-animate-queued",TO="ng-animate-disabled",mye=".ng-animate-disabled",gye="ng-star-inserted",vye=".ng-star-inserted",wye=[],BW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yye={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ml="__ng_removed",gx=class{namespaceId;value;options;get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;let r=n&&n.hasOwnProperty("value"),o=r?n.value:n;if(this.value=_ye(o),r){let i=n,{value:s}=i,a=qf(i,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){let e=n.params;if(e){let r=this.options.params;Object.keys(e).forEach(o=>{r[o]==null&&(r[o]=e[o])})}}},fx="void",DO=new gx(fx),LO=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,e,r){this.id=n,this.hostElement=e,this._engine=r,this._hostClassName="ng-tns-"+n,Ca(e,this._hostClassName)}listen(n,e,r,o){if(!this._triggers.has(e))throw pW(r,e);if(r==null||r.length==0)throw hW(e);if(!kye(r))throw fW(r,e);let i=Ns(this._elementListeners,n,[]),s={name:e,phase:r,callback:o};i.push(s);let a=Ns(this._engine.statesByElement,n,new Map);return a.has(e)||(Ca(n,dx),Ca(n,dx+"-"+e),a.set(e,DO)),()=>{this._engine.afterFlush(()=>{let l=i.indexOf(s);l>=0&&i.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return this._triggers.has(n)?!1:(this._triggers.set(n,e),!0)}_getTrigger(n){let e=this._triggers.get(n);if(!e)throw mW(n);return e}trigger(n,e,r,o=!0){let i=this._getTrigger(e),s=new vx(this.id,e,n),a=this._engine.statesByElement.get(n);a||(Ca(n,dx),Ca(n,dx+"-"+e),this._engine.statesByElement.set(n,a=new Map));let l=a.get(e),c=new gx(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=DO),!(c.value===fx)&&l.value===c.value){if(!Sye(l.params,c.params)){let m=[],g=i.matchStyles(l.value,l.params,m),v=i.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{kh(n,g),fl(n,v)})}return}let p=Ns(this._engine.playersByElement,n,[]);p.forEach(m=>{m.namespaceId==this.id&&m.triggerName==e&&m.queued&&m.destroy()});let h=i.matchTransition(l.value,c.value,n,c.params),f=!1;if(!h){if(!o)return;h=i.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:h,fromState:l,toState:c,player:s,isFallbackTransition:f}),f||(Ca(n,DW),s.onStart(()=>{M1(n,DW)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);let g=this._engine.playersByElement.get(n);if(g){let v=g.indexOf(s);v>=0&&g.splice(v,1)}}),this.players.push(s),p.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);let e=this._engine.playersByElement.get(n);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){let r=this._engine.driver.query(n,px,!0);r.forEach(o=>{if(o[ml])return;let i=this._engine.fetchNamespacesByElement(o);i.size?i.forEach(s=>s.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,e,r,o){let i=this._engine.statesByElement.get(n),s=new Map;if(i){let a=[];if(i.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(n,c,fx,o);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,s),r&&wd(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){let e=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(e&&r){let o=new Set;e.forEach(i=>{let s=i.name;if(o.has(s))return;o.add(s);let l=this._triggers.get(s).fallbackTransition,c=r.get(s)||DO,u=new gx(fx),d=new vx(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(n,e){let r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let o=!1;if(r.totalAnimations){let i=r.players.length?r.playersByQueriedElement.get(n):[];if(i&&i.length)o=!0;else{let s=n;for(;s=s.parentNode;)if(r.statesByElement.get(s)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)r.markElementAsRemoved(this.id,n,!1,e);else{let i=n[ml];(!i||i===BW)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,e))}}insertNode(n,e){Ca(n,this._hostClassName)}drainQueuedTransitions(n){let e=[];return this._queue.forEach(r=>{let o=r.player;if(o.destroyed)return;let i=r.element,s=this._elementListeners.get(i);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=CS(i,r.triggerName,r.fromState.value,r.toState.value);l._data=n,bS(r.player,a.phase,l,a.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(r)}),this._queue=[],e.sort((r,o)=>{let i=r.transition.ast.depCount,s=o.transition.ast.depCount;return i==0||s==0?i-s:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}},$O=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,e)=>{};_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,r){this.bodyNode=n,this.driver=e,this._normalizer=r}get queuedPlayers(){let n=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,e){let r=new LO(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,e){let r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=o.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,n),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(n)}else r.push(n);return o.set(e,n),n}register(n,e){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,e)),r}registerTrigger(n,e,r){let o=this._namespaceLookup[n];o&&o.register(e,r)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);let o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1),r.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){let e=new Set,r=this.statesByElement.get(n);if(r){for(let o of r.values())if(o.namespaceId){let i=this._fetchNamespace(o.namespaceId);i&&e.add(i)}}return e}trigger(n,e,r,o){if(AS(e)){let i=this._fetchNamespace(n);if(i)return i.trigger(e,r,o),!0}return!1}insertNode(n,e,r,o){if(!AS(e))return;let i=e[ml];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){let s=this._fetchNamespace(n);s&&s.insertNode(e,r)}o&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Ca(n,TO)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),M1(n,TO))}removeNode(n,e,r){if(AS(e)){let o=n?this._fetchNamespace(n):null;o?o.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r);let i=this.namespacesByHostElement.get(e);i&&i.id!==n&&i.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,r,o,i){this.collectedLeaveElements.push(e),e[ml]={namespaceId:n,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:i}}listen(n,e,r,o,i){return AS(e)?this._fetchNamespace(n).listen(e,r,o,i):()=>{}}_buildInstruction(n,e,r,o,i){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,o,n.fromState.options,n.toState.options,e,i)}destroyInnerAnimations(n){let e=this.driver.query(n,px,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(n,TS,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){let e=this.playersByElement.get(n);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){let e=this.playersByQueriedElement.get(n);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return wd(this.players).onDone(()=>n());n()})}processLeaveNode(n){let e=n[ml];if(e&&e.setForRemoval){if(n[ml]=BW,e.namespaceId){this.destroyInnerAnimations(n);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(TO)&&this.markElementAsDisabled(n,!1),this.driver.query(n,mye,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let o=this.collectedEnterElements[r];Ca(o,gye)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,n)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let o=this.collectedLeaveElements[r];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?wd(e).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(n){throw gW(n)}_flushAnimations(n,e){let r=new mx,o=[],i=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(J=>{u.add(J);let G=this.driver.query(J,fye,!0);for(let H=0;H<G.length;H++)u.add(G[H])});let d=this.bodyNode,p=Array.from(this.statesByElement.keys()),h=NW(p,this.collectedEnterElements),f=new Map,m=0;h.forEach((J,G)=>{let H=kO+m++;f.set(G,H),J.forEach(V=>Ca(V,H))});let g=[],v=new Set,w=new Set;for(let J=0;J<this.collectedLeaveElements.length;J++){let G=this.collectedLeaveElements[J],H=G[ml];H&&H.setForRemoval&&(g.push(G),v.add(G),H.hasAnimation?this.driver.query(G,vye,!0).forEach(V=>v.add(V)):w.add(G))}let y=new Map,_=NW(p,Array.from(v));_.forEach((J,G)=>{let H=MS+m++;y.set(G,H),J.forEach(V=>Ca(V,H))}),n.push(()=>{h.forEach((J,G)=>{let H=f.get(G);J.forEach(V=>M1(V,H))}),_.forEach((J,G)=>{let H=y.get(G);J.forEach(V=>M1(V,H))}),g.forEach(J=>{this.processLeaveNode(J)})});let k=[],T=[];for(let J=this._namespaceList.length-1;J>=0;J--)this._namespaceList[J].drainQueuedTransitions(e).forEach(H=>{let V=H.player,K=H.element;if(k.push(V),this.collectedEnterElements.length){let Ce=K[ml];if(Ce&&Ce.setForMove){if(Ce.previousTriggersValues&&Ce.previousTriggersValues.has(H.triggerName)){let et=Ce.previousTriggersValues.get(H.triggerName),qe=this.statesByElement.get(H.element);if(qe&&qe.has(H.triggerName)){let xt=qe.get(H.triggerName);xt.value=et,qe.set(H.triggerName,xt)}}V.destroy();return}}let pe=!d||!this.driver.containsElement(d,K),ce=y.get(K),se=f.get(K),ye=this._buildInstruction(H,r,se,ce,pe);if(ye.errors&&ye.errors.length){T.push(ye);return}if(pe){V.onStart(()=>kh(K,ye.fromStyles)),V.onDestroy(()=>fl(K,ye.toStyles)),o.push(V);return}if(H.isFallbackTransition){V.onStart(()=>kh(K,ye.fromStyles)),V.onDestroy(()=>fl(K,ye.toStyles)),o.push(V);return}let Re=[];ye.timelines.forEach(Ce=>{Ce.stretchStartingKeyframe=!0,this.disabledNodes.has(Ce.element)||Re.push(Ce)}),ye.timelines=Re,r.append(K,ye.timelines);let Oe={instruction:ye,player:V,element:K};s.push(Oe),ye.queriedElements.forEach(Ce=>Ns(a,Ce,[]).push(V)),ye.preStyleProps.forEach((Ce,et)=>{if(Ce.size){let qe=l.get(et);qe||l.set(et,qe=new Set),Ce.forEach((xt,St)=>qe.add(St))}}),ye.postStyleProps.forEach((Ce,et)=>{let qe=c.get(et);qe||c.set(et,qe=new Set),Ce.forEach((xt,St)=>qe.add(St))})});if(T.length){let J=[];T.forEach(G=>{J.push(vW(G.triggerName,G.errors))}),k.forEach(G=>G.destroy()),this.reportError(J)}let I=new Map,A=new Map;s.forEach(J=>{let G=J.element;r.has(G)&&(A.set(G,G),this._beforeAnimationBuild(J.player.namespaceId,J.instruction,I))}),o.forEach(J=>{let G=J.element;this._getPreviousPlayers(G,!1,J.namespaceId,J.triggerName,null).forEach(V=>{Ns(I,G,[]).push(V),V.destroy()})});let P=g.filter(J=>AW(J,l,c)),N=new Map;IW(N,this.driver,w,c,ba).forEach(J=>{AW(J,l,c)&&P.push(J)});let S=new Map;h.forEach((J,G)=>{IW(S,this.driver,new Set(J),l,b1)}),P.forEach(J=>{let G=N.get(J),H=S.get(J);N.set(J,new Map([...G?.entries()??[],...H?.entries()??[]]))});let W=[],ie=[],Q={};s.forEach(J=>{let{element:G,player:H,instruction:V}=J;if(r.has(G)){if(u.has(G)){H.onDestroy(()=>fl(G,V.toStyles)),H.disabled=!0,H.overrideTotalTime(V.totalTime),o.push(H);return}let K=Q;if(A.size>1){let ce=G,se=[];for(;ce=ce.parentNode;){let ye=A.get(ce);if(ye){K=ye;break}se.push(ce)}se.forEach(ye=>A.set(ye,K))}let pe=this._buildAnimation(H.namespaceId,V,I,i,S,N);if(H.setRealPlayer(pe),K===Q)W.push(H);else{let ce=this.playersByElement.get(K);ce&&ce.length&&(H.parentPlayer=wd(ce)),o.push(H)}}else kh(G,V.fromStyles),H.onDestroy(()=>fl(G,V.toStyles)),ie.push(H),u.has(G)&&o.push(H)}),ie.forEach(J=>{let G=i.get(J.element);if(G&&G.length){let H=wd(G);J.setRealPlayer(H)}}),o.forEach(J=>{J.parentPlayer?J.syncPlayerEvents(J.parentPlayer):J.destroy()});for(let J=0;J<g.length;J++){let G=g[J],H=G[ml];if(M1(G,MS),H&&H.hasAnimation)continue;let V=[];if(a.size){let pe=a.get(G);pe&&pe.length&&V.push(...pe);let ce=this.driver.query(G,TS,!0);for(let se=0;se<ce.length;se++){let ye=a.get(ce[se]);ye&&ye.length&&V.push(...ye)}}let K=V.filter(pe=>!pe.destroyed);K.length?bye(this,G,K):this.processLeaveNode(G)}return g.length=0,W.forEach(J=>{this.players.push(J),J.onDone(()=>{J.destroy();let G=this.players.indexOf(J);this.players.splice(G,1)}),J.play()}),W}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,r,o,i){let s=[];if(e){let a=this.playersByQueriedElement.get(n);a&&(s=a)}else{let a=this.playersByElement.get(n);if(a){let l=!i||i==fx;a.forEach(c=>{c.queued||!l&&c.triggerName!=o||s.push(c)})}}return(r||o)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||o&&o!=a.triggerName))),s}_beforeAnimationBuild(n,e,r){let o=e.triggerName,i=e.element,s=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:o;for(let l of e.timelines){let c=l.element,u=c!==i,d=Ns(r,c,[]);this._getPreviousPlayers(c,u,s,a,e.toState).forEach(h=>{let f=h.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),h.destroy(),d.push(h)})}kh(i,e.fromStyles)}_buildAnimation(n,e,r,o,i,s){let a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,p=e.timelines.map(f=>{let m=f.element;u.add(m);let g=m[ml];if(g&&g.removedBeforeQueried)return new vc(f.duration,f.delay);let v=m!==l,w=Cye((r.get(m)||wye).map(I=>I.getRealPlayer())).filter(I=>{let A=I;return A.element?A.element===m:!1}),y=i.get(m),_=s.get(m),k=vO(this._normalizer,f.keyframes,y,_),T=this._buildPlayer(f,k,w);if(f.subTimeline&&o&&d.add(m),v){let I=new vx(n,a,m);I.setRealPlayer(T),c.push(I)}return T});c.forEach(f=>{Ns(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>xye(this.playersByQueriedElement,f.element,f))}),u.forEach(f=>Ca(f,bO));let h=wd(p);return h.onDestroy(()=>{u.forEach(f=>M1(f,bO)),fl(l,e.toStyles)}),d.forEach(f=>{Ns(o,f,[]).push(h)}),h}_buildPlayer(n,e,r){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,r):new vc(n.duration,n.delay)}},vx=class{namespaceId;triggerName;element;_player=new vc;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,e,r){this.namespaceId=n,this.triggerName=e,this.element=r}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,r)=>{e.forEach(o=>bS(n,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){let e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Ns(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){let e=this._player;e.triggerCallback&&e.triggerCallback(n)}};function xye(t,n,e){let r=t.get(n);if(r){if(r.length){let o=r.indexOf(e);r.splice(o,1)}r.length==0&&t.delete(n)}return r}function _ye(t){return t??null}function AS(t){return t&&t.nodeType===1}function kye(t){return t=="start"||t=="done"}function EW(t,n){let e=t.style.display;return t.style.display=n??"none",e}function IW(t,n,e,r,o){let i=[];e.forEach(l=>i.push(EW(l)));let s=[];r.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let p=n.computeStyle(c,d,o);u.set(d,p),(!p||p.length==0)&&(c[ml]=yye,s.push(c))}),t.set(c,u)});let a=0;return e.forEach(l=>EW(l,i[a++])),s}function NW(t,n){let e=new Map;if(t.forEach(a=>e.set(a,[])),n.length==0)return e;let r=1,o=new Set(n),i=new Map;function s(a){if(!a)return r;let l=i.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:o.has(c)?l=r:l=s(c),i.set(a,l),l}return n.forEach(a=>{let l=s(a);l!==r&&e.get(l).push(a)}),e}function Ca(t,n){t.classList?.add(n)}function M1(t,n){t.classList?.remove(n)}function bye(t,n,e){wd(e).onDone(()=>t.processLeaveNode(n))}function Cye(t){let n=[];return LW(t,n),n}function LW(t,n){for(let e=0;e<t.length;e++){let r=t[e];r instanceof Fm?LW(r.players,n):n.push(r)}}function Sye(t,n){let e=Object.keys(t),r=Object.keys(n);if(e.length!=r.length)return!1;for(let o=0;o<e.length;o++){let i=e[o];if(!n.hasOwnProperty(i)||t[i]!==n[i])return!1}return!0}function AW(t,n,e){let r=e.get(t);if(!r)return!1;let o=n.get(t);return o?r.forEach(i=>o.add(i)):n.set(t,r),e.delete(t),!0}var T1=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,e)=>{};constructor(n,e,r){this._driver=e,this._normalizer=r,this._transitionEngine=new $O(n.body,e,r),this._timelineEngine=new BO(n.body,e,r),this._transitionEngine.onRemovalComplete=(o,i)=>this.onRemovalComplete(o,i)}registerTrigger(n,e,r,o,i){let s=n+"-"+o,a=this._triggerCache[s];if(!a){let l=[],c=[],u=OW(this._driver,i,l,c);if(l.length)throw aW(o,l);a=dye(o,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,o,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,r,o){this._transitionEngine.insertNode(n,e,r,o)}onRemove(n,e,r){this._transitionEngine.removeNode(n,e,r)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,r,o){if(r.charAt(0)=="@"){let[i,s]=wO(r),a=o;this._timelineEngine.command(i,e,s,a)}else this._transitionEngine.trigger(n,e,r,o)}listen(n,e,r,o,i){if(r.charAt(0)=="@"){let[s,a]=wO(r);return this._timelineEngine.listen(s,e,a,i)}return this._transitionEngine.listen(n,e,r,o,i)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}};function Mye(t,n){let e=null,r=null;return Array.isArray(n)&&n.length?(e=EO(n[0]),n.length>1&&(r=EO(n[n.length-1]))):n instanceof Map&&(e=EO(n)),e||r?new Tye(t,e,r):null}var Tye=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,r,o){this._element=e,this._startStyles=r,this._endStyles=o;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&fl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fl(this._element,this._initialStyles),this._endStyles&&(fl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(kh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(kh(this._element,this._endStyles),this._endStyles=null),fl(this._element,this._initialStyles),this._state=3)}}return t})();function EO(t){let n=null;return t.forEach((e,r)=>{Dye(r)&&(n=n||new Map,n.set(r,e))}),n}function Dye(t){return t==="display"||t==="position"}var $S=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,e,r,o){this.element=n,this.keyframes=e,this.options=r,this._specialStyles=o,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){let e=[];return n.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(n,e,r){return n.animate(this._convertKeyframesToObject(e),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{o!=="offset"&&n.set(o,this._finished?r:ES(this.element,o))}),this.currentSnapshot=n}triggerCallback(n){let e=n==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},VS=class{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,e){return yO(n,e)}getParentElement(n){return SS(n)}query(n,e,r){return xO(n,e,r)}computeStyle(n,e,r){return ES(n,e)}animate(n,e,r,o,i,s=[]){let a=o==0?"both":"forwards",l={duration:r,delay:o,fill:a};i&&(l.easing=i);let c=new Map,u=s.filter(h=>h instanceof $S);_W(r,o)&&u.forEach(h=>{h.currentSnapshot.forEach((f,m)=>c.set(m,f))});let d=yW(e).map(h=>new Map(h));d=kW(n,d,c);let p=Mye(n,d);return new $S(n,d,l,p)}};var RS="@",$W="@.disabled",jS=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,e,r,o){this.namespaceId=n,this.delegate=e,this.engine=r,this._onDestroy=o}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,r,o=!0){this.delegate.insertBefore(n,e,r),this.engine.onInsert(this.namespaceId,e,n,o)}removeChild(n,e,r){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,r,o){this.delegate.setAttribute(n,e,r,o)}removeAttribute(n,e,r){this.delegate.removeAttribute(n,e,r)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,r,o){this.delegate.setStyle(n,e,r,o)}removeStyle(n,e,r){this.delegate.removeStyle(n,e,r)}setProperty(n,e,r){e.charAt(0)==RS&&e==$W?this.disableAnimations(n,!!r):this.delegate.setProperty(n,e,r)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,r,o){return this.delegate.listen(n,e,r,o)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}},VO=class extends jS{factory;constructor(n,e,r,o,i){super(e,r,o,i),this.factory=n,this.namespaceId=e}setProperty(n,e,r){e.charAt(0)==RS?e.charAt(1)=="."&&e==$W?(r=r===void 0?!0:!!r,this.disableAnimations(n,r)):this.engine.process(this.namespaceId,n,e.slice(1),r):this.delegate.setProperty(n,e,r)}listen(n,e,r,o){if(e.charAt(0)==RS){let i=Eye(n),s=e.slice(1),a="";return s.charAt(0)!=RS&&([s,a]=Iye(s)),this.engine.listen(this.namespaceId,i,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,r,l)})}return this.delegate.listen(n,e,r,o)}};function Eye(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function Iye(t){let n=t.indexOf("."),e=t.substring(0,n),r=t.slice(n+1);return[e,r]}var zS=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,e,r){this.delegate=n,this.engine=e,this._zone=r,e.onRemovalComplete=(o,i)=>{i?.removeChild(null,o)}}createRenderer(n,e){let r="",o=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){let c=this._rendererCache,u=c.get(o);if(!u){let d=()=>c.delete(o);u=new jS(r,o,this.engine,d),c.set(o,u)}return u}let i=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,n);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(i,s,n,c.name,c)};return e.data.animation.forEach(a),new VO(this,s,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,r){if(n>=0&&n<this._microtaskId){this._zone.run(()=>e(r));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(i=>{let[s,a]=i;s(a)}),this._animationCallbacksBuffer=[]})}),o.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}};var Aye=(()=>{class t extends T1{constructor(e,r,o){super(e,r,o)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||t)(Qe(tn),Qe($m),Qe(Vm))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function Rye(){return new OS}function Oye(t,n,e){return new zS(t,n,e)}var VW=[{provide:Vm,useFactory:Rye},{provide:T1,useClass:Aye},{provide:ko,useFactory:Oye,deps:[cx,T1,Rt]}],Grt=[{provide:$m,useClass:jO},{provide:bm,useValue:"NoopAnimations"},...VW],Fye=[{provide:$m,useFactory:()=>new VS},{provide:bm,useFactory:()=>"BrowserAnimations"},...VW];function jW(){return cl("NgEagerAnimations"),[...Fye]}var pn="primary",Ix=Symbol("RouteTitle"),qO=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Hm(t){return new qO(t)}function ZW(t,n,e){let r=e.path.split("/");if(r.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function Pye(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!yc(t[e],n[e]))return!1;return!0}function yc(t,n){let e=t?KO(t):void 0,r=n?KO(n):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!XW(t[o],n[o]))return!1;return!0}function KO(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function XW(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),r=[...n].sort();return e.every((o,i)=>r[i]===o)}else return t===n}function YW(t){return t.length>0?t[t.length-1]:null}function Dh(t){return bs(t)?t:Mm(t)?Xn(Promise.resolve(t)):lt(t)}var Bye={exact:JW,subset:eq},QW={exact:Lye,subset:$ye,ignored:()=>!0};function zW(t,n,e){return Bye[e.paths](t.root,n.root,e.matrixParams)&&QW[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function Lye(t,n){return yc(t,n)}function JW(t,n,e){if(!jm(t.segments,n.segments)||!GS(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!JW(t.children[r],n.children[r],e))return!1;return!0}function $ye(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>XW(t[e],n[e]))}function eq(t,n,e){return tq(t,n,n.segments,e)}function tq(t,n,e,r){if(t.segments.length>e.length){let o=t.segments.slice(0,e.length);return!(!jm(o,e)||n.hasChildren()||!GS(o,e,r))}else if(t.segments.length===e.length){if(!jm(t.segments,e)||!GS(t.segments,e,r))return!1;for(let o in n.children)if(!t.children[o]||!eq(t.children[o],n.children[o],r))return!1;return!0}else{let o=e.slice(0,t.segments.length),i=e.slice(t.segments.length);return!jm(t.segments,o)||!GS(t.segments,o,r)||!t.children[pn]?!1:tq(t.children[pn],n,i,r)}}function GS(t,n,e){return n.every((r,o)=>QW[e](t[o].parameters,r.parameters))}var _c=class{root;queryParams;fragment;_queryParamMap;constructor(n=new jn([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Hm(this.queryParams),this._queryParamMap}toString(){return zye.serialize(this)}},jn=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return WS(this)}},bh=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Hm(this.parameters),this._parameterMap}toString(){return rq(this)}};function Vye(t,n){return jm(t,n)&&t.every((e,r)=>yc(e.parameters,n[r].parameters))}function jm(t,n){return t.length!==n.length?!1:t.every((e,r)=>e.path===n[r].path)}function jye(t,n){let e=[];return Object.entries(t.children).forEach(([r,o])=>{r===pn&&(e=e.concat(n(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==pn&&(e=e.concat(n(o,r)))}),e}var Um=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>new Ch,providedIn:"root"})}return t})(),Ch=class{parse(n){let e=new XO(n);return new _c(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${wx(n.root,!0)}`,r=Gye(n.queryParams),o=typeof n.fragment=="string"?`#${Hye(n.fragment)}`:"";return`${e}${r}${o}`}},zye=new Ch;function WS(t){return t.segments.map(n=>rq(n)).join("/")}function wx(t,n){if(!t.hasChildren())return WS(t);if(n){let e=t.children[pn]?wx(t.children[pn],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==pn&&r.push(`${o}:${wx(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=jye(t,(r,o)=>o===pn?[wx(t.children[pn],!1)]:[`${o}:${wx(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[pn]!=null?`${WS(t)}/${e[0]}`:`${WS(t)}/(${e.join("//")})`}}function nq(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function HS(t){return nq(t).replace(/%3B/gi,";")}function Hye(t){return encodeURI(t)}function ZO(t){return nq(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qS(t){return decodeURIComponent(t)}function HW(t){return qS(t.replace(/\+/g,"%20"))}function rq(t){return`${ZO(t.path)}${Uye(t.parameters)}`}function Uye(t){return Object.entries(t).map(([n,e])=>`;${ZO(n)}=${ZO(e)}`).join("")}function Gye(t){let n=Object.entries(t).map(([e,r])=>Array.isArray(r)?r.map(o=>`${HS(e)}=${HS(o)}`).join("&"):`${HS(e)}=${HS(r)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var Wye=/^[^\/()?;#]+/;function HO(t){let n=t.match(Wye);return n?n[0]:""}var qye=/^[^\/()?;=#]+/;function Kye(t){let n=t.match(qye);return n?n[0]:""}var Zye=/^[^=?&#]+/;function Xye(t){let n=t.match(Zye);return n?n[0]:""}var Yye=/^[^&#]+/;function Qye(t){let n=t.match(Yye);return n?n[0]:""}var XO=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new jn([],{}):new jn([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[pn]=new jn(n,e)),r}parseSegment(){let n=HO(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new Ae(4009,!1);return this.capture(n),new bh(qS(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=Kye(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=HO(this.remaining);o&&(r=o,this.capture(r))}n[qS(e)]=qS(r)}parseQueryParam(n){let e=Xye(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=Qye(this.remaining);s&&(r=s,this.capture(r))}let o=HW(e),i=HW(r);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(i)}else n[o]=i}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=HO(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new Ae(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):n&&(i=pn);let s=this.parseChildren();e[i]=Object.keys(s).length===1?s[pn]:new jn([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new Ae(4011,!1)}};function oq(t){return t.segments.length>0?new jn([],{[pn]:t}):t}function iq(t){let n={};for(let[r,o]of Object.entries(t.children)){let i=iq(o);if(r===pn&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))n[s]=a;else(i.segments.length>0||i.hasChildren())&&(n[r]=i)}let e=new jn(t.segments,n);return Jye(e)}function Jye(t){if(t.numberOfChildren===1&&t.children[pn]){let n=t.children[pn];return new jn(t.segments.concat(n.segments),n.children)}return t}function Sh(t){return t instanceof _c}function sq(t,n,e=null,r=null){let o=aq(t);return lq(o,n,e,r)}function aq(t){let n;function e(i){let s={};for(let l of i.children){let c=e(l);s[l.outlet]=c}let a=new jn(i.url,s);return i===t&&(n=a),a}let r=e(t.root),o=oq(r);return n??o}function lq(t,n,e,r){let o=t;for(;o.parent;)o=o.parent;if(n.length===0)return UO(o,o,o,e,r);let i=exe(n);if(i.toRoot())return UO(o,o,new jn([],{}),e,r);let s=txe(i,o,t),a=s.processChildren?xx(s.segmentGroup,s.index,i.commands):uq(s.segmentGroup,s.index,i.commands);return UO(o,s.segmentGroup,a,e,r)}function ZS(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function kx(t){return typeof t=="object"&&t!=null&&t.outlets}function UO(t,n,e,r,o){let i={};r&&Object.entries(r).forEach(([l,c])=>{i[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===n?s=e:s=cq(t,n,e);let a=oq(iq(s));return new _c(a,i,o)}function cq(t,n,e){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===n?r[o]=e:r[o]=cq(i,n,e)}),new jn(t.segments,r)}var XS=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&ZS(r[0]))throw new Ae(4003,!1);let o=r.find(kx);if(o&&o!==YW(r))throw new Ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function exe(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new XS(!0,0,t);let n=0,e=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?n++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new XS(e,n,r)}var I1=class{segmentGroup;processChildren;index;constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}};function txe(t,n,e){if(t.isAbsolute)return new I1(n,!0,0);if(!e)return new I1(n,!1,NaN);if(e.parent===null)return new I1(e,!0,0);let r=ZS(t.commands[0])?0:1,o=e.segments.length-1+r;return nxe(e,o,t.numberOfDoubleDots)}function nxe(t,n,e){let r=t,o=n,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new Ae(4005,!1);o=r.segments.length}return new I1(r,!1,o-i)}function rxe(t){return kx(t[0])?t[0].outlets:{[pn]:t}}function uq(t,n,e){if(t??=new jn([],{}),t.segments.length===0&&t.hasChildren())return xx(t,n,e);let r=oxe(t,n,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new jn(t.segments.slice(0,r.pathIndex),{});return i.children[pn]=new jn(t.segments.slice(r.pathIndex),t.children),xx(i,0,o)}else return r.match&&o.length===0?new jn(t.segments,{}):r.match&&!t.hasChildren()?YO(t,n,e):r.match?xx(t,0,o):YO(t,n,e)}function xx(t,n,e){if(e.length===0)return new jn(t.segments,{});{let r=rxe(e),o={};if(Object.keys(r).some(i=>i!==pn)&&t.children[pn]&&t.numberOfChildren===1&&t.children[pn].segments.length===0){let i=xx(t.children[pn],n,e);return new jn(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=uq(t.children[i],n,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new jn(t.segments,o)}}function oxe(t,n,e){let r=0,o=n,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=e.length)return i;let s=t.segments[o],a=e[r];if(kx(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!GW(l,c,s))return i;r+=2}else{if(!GW(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function YO(t,n,e){let r=t.segments.slice(0,n),o=0;for(;o<e.length;){let i=e[o];if(kx(i)){let l=ixe(i.outlets);return new jn(r,l)}if(o===0&&ZS(e[0])){let l=t.segments[n];r.push(new bh(l.path,UW(e[0]))),o++;continue}let s=kx(i)?i.outlets[pn]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&ZS(a)?(r.push(new bh(s,UW(a))),o+=2):(r.push(new bh(s,{})),o++)}return new jn(r,{})}function ixe(t){let n={};return Object.entries(t).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[e]=YO(new jn([],{}),0,r))}),n}function UW(t){let n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function GW(t,n,e){return t==e.path&&yc(n,e.parameters)}var KS="imperative",qo=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qo||{}),ea=class{id;url;constructor(n,e){this.id=n,this.url=e}},Mh=class extends ea{type=qo.NavigationStart;navigationTrigger;restoredState;constructor(n,e,r="imperative",o=null){super(n,e),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},os=class extends ea{urlAfterRedirects;type=qo.NavigationEnd;constructor(n,e,r){super(n,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rs=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Rs||{}),A1=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(A1||{}),xc=class extends ea{reason;code;type=qo.NavigationCancel;constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},kc=class extends ea{reason;code;type=qo.NavigationSkipped;constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o}},R1=class extends ea{error;target;type=qo.NavigationError;constructor(n,e,r,o){super(n,e),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bx=class extends ea{urlAfterRedirects;state;type=qo.RoutesRecognized;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},YS=class extends ea{urlAfterRedirects;state;type=qo.GuardsCheckStart;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},QS=class extends ea{urlAfterRedirects;state;shouldActivate;type=qo.GuardsCheckEnd;constructor(n,e,r,o,i){super(n,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},JS=class extends ea{urlAfterRedirects;state;type=qo.ResolveStart;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eM=class extends ea{urlAfterRedirects;state;type=qo.ResolveEnd;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tM=class{route;type=qo.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},nM=class{route;type=qo.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rM=class{snapshot;type=qo.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oM=class{snapshot;type=qo.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iM=class{snapshot;type=qo.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sM=class{snapshot;type=qo.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},O1=class{routerEvent;position;anchor;type=qo.Scroll;constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Cx=class{},F1=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function sxe(t,n){return t.providers&&!t._injector&&(t._injector=Gy(t.providers,n,`Route: ${t.path}`)),t._injector??n}function gl(t){return t.outlet||pn}function axe(t,n){let e=t.filter(r=>gl(r)===n);return e.push(...t.filter(r=>gl(r)!==n)),e}function Nx(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var aM=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Nx(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Gm(this.rootInjector)}},Gm=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new aM(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||t)(Qe(io))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lM=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=QO(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){let e=QO(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=JO(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return JO(n,this._root).map(e=>e.value)}};function QO(t,n){if(t===n.value)return n;for(let e of n.children){let r=QO(t,e);if(r)return r}return null}function JO(t,n){if(t===n.value)return[n];for(let e of n.children){let r=JO(t,e);if(r.length)return r.unshift(n),r}return[]}var Js=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function E1(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var Sx=class extends lM{snapshot;constructor(n,e){super(n),this.snapshot=e,aF(this,n)}toString(){return this.snapshot.toString()}};function dq(t){let n=lxe(t),e=new Zn([new bh("",{})]),r=new Zn({}),o=new Zn({}),i=new Zn({}),s=new Zn(""),a=new bc(e,r,i,s,o,pn,t,n.root);return a.snapshot=n.root,new Sx(new Js(a,[]),n)}function lxe(t){let n={},e={},r={},o="",i=new zm([],n,r,o,e,pn,t,null,{});return new Mx("",new Js(i,[]))}var bc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,r,o,i,s,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(At(c=>c[Ix]))??lt(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(At(n=>Hm(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(At(n=>Hm(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cM(t,n,e="emptyOnly"){let r,{routeConfig:o}=t;return n!==null&&(e==="always"||o?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:le(le({},n.params),t.params),data:le(le({},n.data),t.data),resolve:le(le(le(le({},t.data),n.data),o?.data),t._resolvedData)}:r={params:le({},t.params),data:le({},t.data),resolve:le(le({},t.data),t._resolvedData??{})},o&&hq(o)&&(r.resolve[Ix]=o.title),r}var zm=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ix]}constructor(n,e,r,o,i,s,a,l,c){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hm(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hm(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},Mx=class extends lM{url;constructor(n,e){super(e),this.url=n,aF(this,e)}toString(){return pq(this._root)}};function aF(t,n){n.value._routerState=t,n.children.forEach(e=>aF(t,e))}function pq(t){let n=t.children.length>0?` { ${t.children.map(pq).join(", ")} } `:"";return`${t.value}${n}`}function GO(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,yc(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),yc(n.params,e.params)||t.paramsSubject.next(e.params),Pye(n.url,e.url)||t.urlSubject.next(e.url),yc(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function eF(t,n){let e=yc(t.params,n.params)&&Vye(t.url,n.url),r=!t.parent!=!n.parent;return e&&!r&&(!t.parent||eF(t.parent,n.parent))}function hq(t){return typeof t.title=="string"||t.title===null}var fq=new Me(""),Wm=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=pn;activateEvents=new Qt;deactivateEvents=new Qt;attachEvents=new Qt;detachEvents=new Qt;routerOutletData=Z(void 0);parentContexts=M(Gm);location=M(_r);changeDetector=M(kr);inputBinder=M(Ax,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ae(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Ae(4013,!1);this._activatedRoute=e;let o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new tF(e,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Dr]})}return t})(),tF=class{route;childContexts;parent;outletData;constructor(n,e,r,o){this.route=n,this.childContexts=e,this.parent=r,this.outletData=o}get(n,e){return n===bc?this.route:n===Gm?this.childContexts:n===fq?this.outletData:this.parent.get(n,e)}},Ax=new Me(""),lF=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,o=yy([r.queryParams,r.params,r.data]).pipe(jr(([i,s,a],l)=>(a=le(le(le({},i),s),a),l===0?lt(a):Promise.resolve(a)))).subscribe(i=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let s=qU(r.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(e,o)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function cxe(t,n,e){let r=Tx(t,n._root,e?e._root:void 0);return new Sx(r,n)}function Tx(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=n.value;let o=uxe(t,n,e);return new Js(r,o)}else{if(t.shouldAttach(n.value)){let i=t.retrieve(n.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>Tx(t,a)),s}}let r=dxe(n.value),o=n.children.map(i=>Tx(t,i));return new Js(r,o)}}function uxe(t,n,e){return n.children.map(r=>{for(let o of e.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return Tx(t,r,o);return Tx(t,r)})}function dxe(t){return new bc(new Zn(t.url),new Zn(t.params),new Zn(t.queryParams),new Zn(t.fragment),new Zn(t.data),t.outlet,t.component,t)}var Th=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},mq="ngNavigationCancelingError";function uM(t,n){let{redirectTo:e,navigationBehaviorOptions:r}=Sh(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=gq(!1,Rs.Redirect);return o.url=e,o.navigationBehaviorOptions=r,o}function gq(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[mq]=!0,e.cancellationCode=n,e}function pxe(t){return vq(t)&&Sh(t.url)}function vq(t){return!!t&&t[mq]}var hxe=(t,n,e,r)=>At(o=>(new nF(n,o.targetRouterState,o.currentRouterState,e,r).activate(t),o)),nF=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,r,o,i){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(n){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),GO(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){let o=E1(e);n.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(n,e,r){let o=n.value,i=e?e.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=E1(n);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){let r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=E1(n);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){let o=E1(e);n.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new sM(i.value.snapshot))}),n.children.length&&this.forwardEvent(new oM(n.value.snapshot))}activateRoutes(n,e,r){let o=n.value,i=e?e.value:null;if(GO(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),GO(a.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,r)}},dM=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},N1=class{component;route;constructor(n,e){this.component=n,this.route=e}};function fxe(t,n,e){let r=t._root,o=n?n._root:null;return yx(r,o,e,[r.value])}function mxe(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function B1(t,n){let e=Symbol(),r=n.get(t,e);return r===e?typeof t=="function"&&!Wj(t)?t:n.get(t):r}function yx(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=E1(n);return t.children.forEach(s=>{gxe(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>_x(a,e.getContext(s),o)),o}function gxe(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let l=vxe(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new dM(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?yx(t,n,a?a.children:null,r,o):yx(t,n,e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new N1(a.outlet.component,s))}else s&&_x(n,a,o),o.canActivateChecks.push(new dM(r)),i.component?yx(t,null,a?a.children:null,r,o):yx(t,null,e,r,o);return o}function vxe(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!jm(t.url,n.url);case"pathParamsOrQueryParamsChange":return!jm(t.url,n.url)||!yc(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eF(t,n)||!yc(t.queryParams,n.queryParams);case"paramsChange":default:return!eF(t,n)}}function _x(t,n,e){let r=E1(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?n?_x(s,n.children.getContext(i),e):_x(s,null,e):_x(s,n,e)}),o.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new N1(n.outlet.component,o)):e.canDeactivateChecks.push(new N1(null,o)):e.canDeactivateChecks.push(new N1(null,o))}function Rx(t){return typeof t=="function"}function wxe(t){return typeof t=="boolean"}function yxe(t){return t&&Rx(t.canLoad)}function xxe(t){return t&&Rx(t.canActivate)}function _xe(t){return t&&Rx(t.canActivateChild)}function kxe(t){return t&&Rx(t.canDeactivate)}function bxe(t){return t&&Rx(t.canMatch)}function wq(t){return t instanceof od||t?.name==="EmptyError"}var US=Symbol("INITIAL_VALUE");function P1(){return jr(t=>yy(t.map(n=>n.pipe(Vr(1),ga(US)))).pipe(At(n=>{for(let e of n)if(e!==!0){if(e===US)return US;if(e===!1||Cxe(e))return e}return!0}),kn(n=>n!==US),Vr(1)))}function Cxe(t){return Sh(t)||t instanceof Th}function Sxe(t,n){return cr(e=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return s.length===0&&i.length===0?lt(ht(le({},e),{guardsResult:!0})):Mxe(s,r,o,t).pipe(cr(a=>a&&wxe(a)?Txe(r,i,t,n):lt(a)),At(a=>ht(le({},e),{guardsResult:a})))})}function Mxe(t,n,e,r){return Xn(t).pipe(cr(o=>Axe(o.component,o.route,e,n,r)),ld(o=>o!==!0,!0))}function Txe(t,n,e,r){return Xn(n).pipe(fa(o=>rl(Exe(o.route.parent,r),Dxe(o.route,r),Nxe(t,o.path,e),Ixe(t,o.route,e))),ld(o=>o!==!0,!0))}function Dxe(t,n){return t!==null&&n&&n(new iM(t)),lt(!0)}function Exe(t,n){return t!==null&&n&&n(new rM(t)),lt(!0)}function Ixe(t,n,e){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return lt(!0);let o=r.map(i=>id(()=>{let s=Nx(n)??e,a=B1(i,s),l=xxe(a)?a.canActivate(n,t):Ho(s,()=>a(n,t));return Dh(l).pipe(ld())}));return lt(o).pipe(P1())}function Nxe(t,n,e){let r=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(s=>mxe(s)).filter(s=>s!==null).map(s=>id(()=>{let a=s.guards.map(l=>{let c=Nx(s.node)??e,u=B1(l,c),d=_xe(u)?u.canActivateChild(r,t):Ho(c,()=>u(r,t));return Dh(d).pipe(ld())});return lt(a).pipe(P1())}));return lt(i).pipe(P1())}function Axe(t,n,e,r,o){let i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!i||i.length===0)return lt(!0);let s=i.map(a=>{let l=Nx(n)??o,c=B1(a,l),u=kxe(c)?c.canDeactivate(t,n,e,r):Ho(l,()=>c(t,n,e,r));return Dh(u).pipe(ld())});return lt(s).pipe(P1())}function Rxe(t,n,e,r){let o=n.canLoad;if(o===void 0||o.length===0)return lt(!0);let i=o.map(s=>{let a=B1(s,t),l=yxe(a)?a.canLoad(n,e):Ho(t,()=>a(n,e));return Dh(l)});return lt(i).pipe(P1(),yq(r))}function yq(t){return vA(Vo(n=>{if(typeof n!="boolean")throw uM(t,n)}),At(n=>n===!0))}function Oxe(t,n,e,r){let o=n.canMatch;if(!o||o.length===0)return lt(!0);let i=o.map(s=>{let a=B1(s,t),l=bxe(a)?a.canMatch(n,e):Ho(t,()=>a(n,e));return Dh(l)});return lt(i).pipe(P1(),yq(r))}var Dx=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Ex=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function D1(t){return j2(new Dx(t))}function Fxe(t){return j2(new Ae(4e3,!1))}function Pxe(t){return j2(gq(!1,Rs.GuardRejected))}var rF=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return lt(r);if(o.numberOfChildren>1||!o.children[pn])return Fxe(`${n.redirectTo}`);o=o.children[pn]}}applyRedirectCommands(n,e,r,o,i){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,params:h,data:f,title:m}=o,g=Ho(i,()=>a({params:h,data:f,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,title:m}));if(g instanceof _c)throw new Ex(g);e=g}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r);if(e[0]==="/")throw new Ex(s);return s}applyRedirectCreateUrlTree(n,e,r,o){let i=this.createSegmentGroup(n,e.root,r,o);return new _c(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let r={};return Object.entries(n).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=e[a]}else r[o]=i}),r}createSegmentGroup(n,e,r,o){let i=this.createSegments(n,e.segments,r,o),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(n,l,r,o)}),new jn(i,s)}createSegments(n,e,r,o){return e.map(i=>i.path[0]===":"?this.findPosParam(n,i,o):this.findOrReturn(i,r))}findPosParam(n,e,r){let o=r[e.path.substring(1)];if(!o)throw new Ae(4001,!1);return o}findOrReturn(n,e){let r=0;for(let o of e){if(o.path===n.path)return e.splice(r),o;r++}return n}},oF={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bxe(t,n,e,r,o){let i=xq(t,n,e);return i.matched?(r=sxe(n,r),Oxe(r,n,e,o).pipe(At(s=>s===!0?i:le({},oF)))):lt(i)}function xq(t,n,e){if(n.path==="**")return Lxe(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?le({},oF):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let o=(n.matcher||ZW)(e,t,n);if(!o)return le({},oF);let i={};Object.entries(o.posParams??{}).forEach(([a,l])=>{i[a]=l.path});let s=o.consumed.length>0?le(le({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Lxe(t){return{matched:!0,parameters:t.length>0?YW(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function WW(t,n,e,r){return e.length>0&&jxe(t,e,r)?{segmentGroup:new jn(n,Vxe(r,new jn(e,t.children))),slicedSegments:[]}:e.length===0&&zxe(t,e,r)?{segmentGroup:new jn(t.segments,$xe(t,e,r,t.children)),slicedSegments:e}:{segmentGroup:new jn(t.segments,t.children),slicedSegments:e}}function $xe(t,n,e,r){let o={};for(let i of e)if(hM(t,n,i)&&!r[gl(i)]){let s=new jn([],{});o[gl(i)]=s}return le(le({},r),o)}function Vxe(t,n){let e={};e[pn]=n;for(let r of t)if(r.path===""&&gl(r)!==pn){let o=new jn([],{});e[gl(r)]=o}return e}function jxe(t,n,e){return e.some(r=>hM(t,n,r)&&gl(r)!==pn)}function zxe(t,n,e){return e.some(r=>hM(t,n,r))}function hM(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Hxe(t,n,e){return n.length===0&&!t.children[e]}var iF=class{};function Uxe(t,n,e,r,o,i,s="emptyOnly"){return new sF(t,n,e,r,o,s,i).recognize()}var Gxe=31,sF=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,r,o,i,s,a){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new rF(this.urlSerializer,this.urlTree)}noMatchError(n){return new Ae(4002,`'${n.segmentGroup}'`)}recognize(){let n=WW(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(At(({children:e,rootSnapshot:r})=>{let o=new Js(r,e),i=new Mx("",o),s=sq(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(n){let e=new zm([],Object.freeze({}),Object.freeze(le({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),pn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,pn,e).pipe(At(r=>({children:r,rootSnapshot:e})),ad(r=>{if(r instanceof Ex)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Dx?this.noMatchError(r):r}))}processSegmentGroup(n,e,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,e,r,i):this.processSegment(n,e,r,r.segments,o,!0,i).pipe(At(s=>s instanceof Js?[s]:[]))}processChildren(n,e,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Xn(i).pipe(fa(s=>{let a=r.children[s],l=axe(e,s);return this.processSegmentGroup(n,l,a,s,o)}),MA((s,a)=>(s.push(...a),s)),ch(null),SA(),cr(s=>{if(s===null)return D1(r);let a=_q(s);return Wxe(a),lt(a)}))}processSegment(n,e,r,o,i,s,a){return Xn(e).pipe(fa(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,r,o,i,s,a).pipe(ad(c=>{if(c instanceof Dx)return lt(null);throw c}))),ld(l=>!!l),ad(l=>{if(wq(l))return Hxe(r,o,i)?lt(new iF):D1(r);throw l}))}processSegmentAgainstRoute(n,e,r,o,i,s,a,l){return gl(r)!==s&&(s===pn||!hM(o,i,r))?D1(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,o,r,i,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,o,e,r,i,s,l):D1(o)}expandSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=xq(e,o,i);if(!l)return D1(e);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Gxe&&(this.allowRedirects=!1));let h=new zm(i,c,Object.freeze(le({},this.urlTree.queryParams)),this.urlTree.fragment,qW(o),gl(o),o.component??o._loadedComponent??null,o,KW(o)),f=cM(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(f.params),h.data=Object.freeze(f.data);let m=this.applyRedirects.applyRedirectCommands(u,o.redirectTo,d,h,n);return this.applyRedirects.lineralizeSegments(o,m).pipe(cr(g=>this.processSegment(n,r,e,g.concat(p),s,!1,a)))}matchSegmentAgainstRoute(n,e,r,o,i,s){let a=Bxe(e,r,o,n,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(jr(l=>l.matched?(n=r._injector??n,this.getChildConfig(n,r,o).pipe(jr(({routes:c})=>{let u=r._loadedInjector??n,{parameters:d,consumedSegments:p,remainingSegments:h}=l,f=new zm(p,d,Object.freeze(le({},this.urlTree.queryParams)),this.urlTree.fragment,qW(r),gl(r),r.component??r._loadedComponent??null,r,KW(r)),m=cM(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:v}=WW(e,p,h,c);if(v.length===0&&g.hasChildren())return this.processChildren(u,c,g,f).pipe(At(y=>new Js(f,y)));if(c.length===0&&v.length===0)return lt(new Js(f,[]));let w=gl(r)===i;return this.processSegment(u,c,g,v,w?pn:i,!0,f).pipe(At(y=>new Js(f,y instanceof Js?[y]:[])))}))):D1(e)))}getChildConfig(n,e,r){return e.children?lt({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?lt({routes:e._loadedRoutes,injector:e._loadedInjector}):Rxe(n,e,r,this.urlSerializer).pipe(cr(o=>o?this.configLoader.loadChildren(n,e).pipe(Vo(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):Pxe(e))):lt({routes:[],injector:n})}};function Wxe(t){t.sort((n,e)=>n.value.outlet===pn?-1:e.value.outlet===pn?1:n.value.outlet.localeCompare(e.value.outlet))}function qxe(t){let n=t.value.routeConfig;return n&&n.path===""}function _q(t){let n=[],e=new Set;for(let r of t){if(!qxe(r)){n.push(r);continue}let o=n.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),e.add(o)):n.push(r)}for(let r of e){let o=_q(r.children);n.push(new Js(r.value,o))}return n.filter(r=>!e.has(r))}function qW(t){return t.data||{}}function KW(t){return t.resolve||{}}function Kxe(t,n,e,r,o,i){return cr(s=>Uxe(t,n,e,r,s.extractedUrl,o,i).pipe(At(({state:a,tree:l})=>ht(le({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Zxe(t,n){return cr(e=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return lt(e);let i=new Set(o.map(l=>l.route)),s=new Set;for(let l of i)if(!s.has(l))for(let c of kq(l))s.add(c);let a=0;return Xn(s).pipe(fa(l=>i.has(l)?Xxe(l,r,t,n):(l.data=cM(l,l.parent,t).resolve,lt(void 0))),Vo(()=>a++),U2(1),cr(l=>a===s.size?lt(e):ii))})}function kq(t){let n=t.children.map(e=>kq(e)).flat();return[t,...n]}function Xxe(t,n,e,r){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!hq(o)&&(i[Ix]=o.title),Yxe(i,t,n,r).pipe(At(s=>(t._resolvedData=s,t.data=cM(t,t.parent,e).resolve,null)))}function Yxe(t,n,e,r){let o=KO(t);if(o.length===0)return lt({});let i={};return Xn(o).pipe(cr(s=>Qxe(t[s],n,e,r).pipe(ld(),Vo(a=>{if(a instanceof Th)throw uM(new Ch,a);i[s]=a}))),U2(1),At(()=>i),ad(s=>wq(s)?ii:j2(s)))}function Qxe(t,n,e,r){let o=Nx(n)??r,i=B1(t,o),s=i.resolve?i.resolve(n,e):Ho(o,()=>i(n,e));return Dh(s)}function WO(t){return jr(n=>{let e=t(n);return e?Xn(e).pipe(At(()=>n)):lt(n)})}var cF=(()=>{class t{buildTitle(e){let r,o=e.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===pn);return r}getResolvedTitleForRoute(e){return e.data[Ix]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>M(bq),providedIn:"root"})}return t})(),bq=(()=>{class t extends cF{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Qe(HG))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qm=new Me("",{providedIn:"root",factory:()=>({})}),uF=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&Ve(0,"router-outlet")},dependencies:[Wm],encapsulation:2})}return t})();function dF(t){let n=t.children&&t.children.map(dF),e=n?ht(le({},t),{children:n}):le({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==pn&&(e.component=uF),e}var Km=new Me(""),fM=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Q4);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return lt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Dh(e.loadComponent()).pipe(At(Sq),Vo(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),rm(()=>{this.componentLoaders.delete(e)})),o=new lh(r,()=>new ot).pipe(L2());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return lt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=Cq(r,this.compiler,e,this.onLoadEndListener).pipe(rm(()=>{this.childrenLoaders.delete(r)})),s=new lh(i,()=>new ot).pipe(L2());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cq(t,n,e,r){return Dh(t.loadChildren()).pipe(At(Sq),cr(o=>o instanceof H5||Array.isArray(o)?lt(o):Xn(n.compileModuleAsync(o))),At(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(e).injector,s=i.get(Km,[],{optional:!0,self:!0}).flat()),{routes:s.map(dF),injector:i}}))}function Jxe(t){return t&&typeof t=="object"&&"default"in t}function Sq(t){return Jxe(t)?t.default:t}var mM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>M(e_e),providedIn:"root"})}return t})(),e_e=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pF=new Me(""),hF=new Me("");function Mq(t,n,e){let r=t.get(hF),o=t.get(tn);return t.get(Rt).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let i,s=new Promise(c=>{i=c}),a=o.startViewTransition(()=>(i(),t_e(t))),{onViewTransitionCreated:l}=r;return l&&Ho(t,()=>l({transition:a,from:n,to:e})),s})}function t_e(t){return new Promise(n=>{yi({read:()=>setTimeout(n)},{injector:t})})}var fF=new Me(""),gM=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ot;transitionAbortSubject=new ot;configLoader=M(fM);environmentInjector=M(io);destroyRef=M(Uo);urlSerializer=M(Um);rootContexts=M(Gm);location=M(mc);inputBindingEnabled=M(Ax,{optional:!0})!==null;titleStrategy=M(cF);options=M(qm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(mM);createViewTransition=M(pF,{optional:!0});navigationErrorHandler=M(fF,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>lt(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=o=>this.events.next(new tM(o)),r=o=>this.events.next(new nM(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(ht(le({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(e){return this.transitions=new Zn(null),this.transitions.pipe(kn(r=>r!==null),jr(r=>{let o=!1,i=!1;return lt(r).pipe(jr(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Rs.SupersededByNewNavigation),ii;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ht(le({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new kc(s.id,this.urlSerializer.serialize(s.rawUrl),c,A1.IgnoredSameUrlNavigation)),s.resolve(!1),ii}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return lt(s).pipe(jr(c=>(this.events.next(new Mh(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ii:Promise.resolve(c))),Kxe(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Vo(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ht(le({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new bx(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:p,extras:h}=s,f=new Mh(c,this.urlSerializer.serialize(u),d,p);this.events.next(f);let m=dq(this.rootComponentType).snapshot;return this.currentTransition=r=ht(le({},s),{targetSnapshot:m,urlAfterRedirects:u,extras:ht(le({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,lt(r)}else{let c="";return this.events.next(new kc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,A1.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ii}}),Vo(s=>{let a=new YS(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),At(s=>(this.currentTransition=r=ht(le({},s),{guards:fxe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),Sxe(this.environmentInjector,s=>this.events.next(s)),Vo(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw uM(this.urlSerializer,s.guardsResult);let a=new QS(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),kn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Rs.GuardRejected),!1)),WO(s=>{if(s.guards.canActivateChecks.length!==0)return lt(s).pipe(Vo(a=>{let l=new JS(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),jr(a=>{let l=!1;return lt(a).pipe(Zxe(this.paramsInheritanceStrategy,this.environmentInjector),Vo({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Rs.NoDataFromResolver)}}))}),Vo(a=>{let l=new eM(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),WO(s=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Vo(u=>{l.component=u}),At(()=>{})));for(let u of l.children)c.push(...a(u));return c};return yy(a(s.targetSnapshot.root)).pipe(ch(null),Vr(1))}),WO(()=>this.afterPreactivation()),jr(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?Xn(l).pipe(At(()=>r)):lt(r)}),At(s=>{let a=cxe(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ht(le({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Vo(()=>{this.events.next(new Cx)}),hxe(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Vr(1),Vo({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new os(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),It(this.transitionAbortSubject.pipe(Vo(s=>{throw s}))),rm(()=>{!o&&!i&&this.cancelNavigationTransition(r,"",Rs.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ad(s=>{if(this.destroyed)return r.resolve(!1),ii;if(i=!0,vq(s))this.events.next(new xc(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),pxe(s)?this.events.next(new F1(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new R1(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let l=Ho(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Th){let{message:c,cancellationCode:u}=uM(this.urlSerializer,l);this.events.next(new xc(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new F1(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return ii}))}))}cancelNavigationTransition(e,r,o){let i=new xc(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function n_e(t){return t!==KS}var Tq=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>M(r_e),providedIn:"root"})}return t})(),pM=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},r_e=(()=>{class t extends pM{static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Dq=(()=>{class t{urlSerializer=M(Um);options=M(qm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(mc);urlHandlingStrategy=M(mM);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new _c;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:o}){let i=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=o??i;return s instanceof _c?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:o}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=e):this.rawUrlTree=o}routerState=dq(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>M(o_e),providedIn:"root"})}return t})(),o_e=(()=>{class t extends Dq{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Mh?this.updateStateMemento():e instanceof kc?this.commitTransition(r):e instanceof bx?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Cx?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof xc&&(e.code===Rs.GuardRejected||e.code===Rs.NoDataFromResolver)?this.restoreHistory(r):e instanceof R1?this.restoreHistory(r,!0):e instanceof os&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||i){let a=this.browserPageId,l=le(le({},s),this.generateNgRouterState(o,a));this.location.replaceState(e,"",l)}else{let a=le(le({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===e.finalUrl&&i===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vM(t,n){t.events.pipe(kn(e=>e instanceof os||e instanceof xc||e instanceof R1||e instanceof kc),At(e=>e instanceof os||e instanceof kc?0:(e instanceof xc?e.code===Rs.Redirect||e.code===Rs.SupersededByNewNavigation:!1)?2:1),kn(e=>e!==2),Vr(1)).subscribe(()=>{n()})}var i_e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},s_e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ko=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(lU);stateManager=M(Dq);options=M(qm,{optional:!0})||{};pendingTasks=M(wh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(gM);urlSerializer=M(Um);location=M(mc);urlHandlingStrategy=M(mM);_events=new ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(Tq);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(Km,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Ax,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Fn;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof xc&&r.code!==Rs.Redirect&&r.code!==Rs.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof os)this.navigated=!0;else if(r instanceof F1){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l=le({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||n_e(o.source)},s);this.scheduleNavigation(a,KS,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}l_e(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),KS,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,o)=>{this.navigateToSyncWithBrowser(e,o,r)})}navigateToSyncWithBrowser(e,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=le({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(i.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(dF),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=le(le({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=aq(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return lq(d,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let o=Sh(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,KS,null,r)}navigate(e,r={skipLocationChange:!1}){return a_e(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let o;if(r===!0?o=le({},i_e):r===!1?o=le({},s_e):o=r,Sh(e))return zW(this.currentUrlTree,e,o);let i=this.parseUrl(e);return zW(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.entries(e).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,p)=>{a=d,l=p});let u=this.pendingTasks.add();return vM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function a_e(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new Ae(4008,!1)}function l_e(t){return!(t instanceof Cx)&&!(t instanceof F1)}var L1=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ot;constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof os&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Sh(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,o,i,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:cH(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let o=this.renderer,i=this.el.nativeElement;r!==null?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return this.routerLinkInput===null?null:Sh(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(qt(Ko),qt(bc),L4("tabindex"),qt(Zr),qt(_t),qt(_a))};static \u0275dir=me({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&Le("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Bt("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",nt],skipLocationChange:[2,"skipLocationChange","skipLocationChange",nt],replaceUrl:[2,"replaceUrl","replaceUrl",nt],routerLink:"routerLink"},features:[Dr]})}return t})(),gF=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Qt;constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof os&&this.update()})}ngAfterContentInit(){lt(this.links.changes,lt(null)).pipe(ha()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Xn(e).pipe(ha()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=c_e(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let i=o.urlTree;return i?e.isActive(i,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||t)(qt(Ko),qt(_t),qt(Zr),qt(kr),qt(L1,8))};static \u0275dir=me({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,i){if(r&1&&Co(i,L1,5),r&2){let s;Er(s=Ir())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Dr]})}return t})();function c_e(t){return!!t.paths}var Ox=class{};var Eq=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,o,i,s){this.router=e,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(kn(e=>e instanceof os),fa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=Gy(i.providers,e,`Route: ${i.path}`));let s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return Xn(o).pipe(ha())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(e,r):o=lt(null);let i=o.pipe(cr(s=>s===null?lt(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Xn([i,s]).pipe(ha())}else return i})}static \u0275fac=function(r){return new(r||t)(Qe(Ko),Qe(Q4),Qe(io),Qe(Ox),Qe(fM))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Iq=new Me(""),u_e=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Mh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof os?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof kc&&e.code===A1.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof O1&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new O1(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){$H()};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function vF(t,...n){return ym([{provide:Km,multi:!0,useValue:t},[],{provide:bc,useFactory:Nq,deps:[Ko]},{provide:K4,multi:!0,useFactory:Aq},n.map(e=>e.\u0275providers)])}function Nq(t){return t.routerState.root}function $1(t,n){return{\u0275kind:t,\u0275providers:n}}function Aq(){let t=M(Zt);return n=>{let e=t.get(ll);if(n!==e.components[0])return;let r=t.get(Ko),o=t.get(Rq);t.get(wF)===1&&r.initialNavigation(),t.get(Pq,null,mn.Optional)?.setUpPreloading(),t.get(Iq,null,mn.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var Rq=new Me("",{factory:()=>new ot}),wF=new Me("",{providedIn:"root",factory:()=>1});function Oq(){let t=[{provide:wF,useValue:0},G5(()=>{let n=M(Zt);return n.get(Y5,Promise.resolve()).then(()=>new Promise(r=>{let o=n.get(Ko),i=n.get(Rq);vM(o,()=>{r(!0)}),n.get(gM).afterPreactivation=()=>(r(!0),i.closed?lt(void 0):i),o.initialNavigation()}))})];return $1(2,t)}function Fq(){let t=[G5(()=>{M(Ko).setUpLocationChangeListener()}),{provide:wF,useValue:2}];return $1(3,t)}var Pq=new Me("");function Bq(t){return $1(0,[{provide:Pq,useExisting:Eq},{provide:Ox,useExisting:t}])}function yF(){return $1(6,[{provide:_a,useClass:dS}])}function wM(){return $1(8,[lF,{provide:Ax,useExisting:lF}])}function Lq(t){cl("NgRouterViewTransitions");let n=[{provide:pF,useValue:Mq},{provide:hF,useValue:le({skipNextTransition:!!t?.skipInitialTransition},t)}];return $1(9,n)}var $q=[mc,{provide:Um,useClass:Ch},Ko,Gm,{provide:bc,useFactory:Nq,deps:[Ko]},fM,[]],Fx=(()=>{class t{constructor(){}static forRoot(e,r){return{ngModule:t,providers:[$q,[],{provide:Km,multi:!0,useValue:e},[],r?.errorHandler?{provide:fF,useValue:r.errorHandler}:[],{provide:qm,useValue:r||{}},r?.useHash?p_e():h_e(),d_e(),r?.preloadingStrategy?Bq(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?f_e(r):[],r?.bindToComponentInputs?wM().\u0275providers:[],r?.enableViewTransitions?Lq().\u0275providers:[],m_e()]}}static forChild(e){return{ngModule:t,providers:[{provide:Km,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})}return t})();function d_e(){return{provide:Iq,useFactory:()=>{let t=M(mG),n=M(Rt),e=M(qm),r=M(gM),o=M(Um);return e.scrollOffset&&t.setOffset(e.scrollOffset),new u_e(o,r,t,n,e)}}}function p_e(){return{provide:_a,useClass:dS}}function h_e(){return{provide:_a,useClass:oS}}function f_e(t){return[t.initialNavigation==="disabled"?Fq().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Oq().\u0275providers:[]]}var mF=new Me("");function m_e(){return[{provide:mF,useFactory:Aq},{provide:K4,multi:!0,useExisting:mF}]}var Ih=class{},jq=(()=>{class t extends Ih{getTranslation(e){return lt({})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),Bx=class{},zq=(()=>{class t{handle(e){return e.key}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function xM(t,n){if(t===n)return!0;if(t===null||n===null)return!1;if(t!==t&&n!==n)return!0;let e=typeof t,r=typeof n,o,i,s;if(e==r&&e=="object")if(Array.isArray(t)){if(!Array.isArray(n))return!1;if((o=t.length)==n.length){for(i=0;i<o;i++)if(!xM(t[i],n[i]))return!1;return!0}}else{if(Array.isArray(n))return!1;s=Object.create(null);for(i in t){if(!xM(t[i],n[i]))return!1;s[i]=!0}for(i in n)if(!(i in s)&&typeof n[i]<"u")return!1;return!0}return!1}function Eh(t){return typeof t<"u"&&t!==null}function Vx(t){return yM(t)&&!MF(t)&&t!==null}function yM(t){return typeof t=="object"}function MF(t){return Array.isArray(t)}function TF(t){return typeof t=="string"}function g_e(t){return typeof t=="function"}function xF(t,n){let e=Object.assign({},t);return yM(t)?(yM(t)&&yM(n)&&Object.keys(n).forEach(r=>{Vx(n[r])?r in t?e[r]=xF(t[r],n[r]):Object.assign(e,{[r]:n[r]}):Object.assign(e,{[r]:n[r]})}),e):xF({},n)}function _F(t,n){let e=n.split(".");n="";do n+=e.shift(),Eh(t)&&Eh(t[n])&&(Vx(t[n])||MF(t[n])||!e.length)?(t=t[n],n=""):e.length?n+=".":t=void 0;while(e.length);return t}function v_e(t,n,e){let r=n.split("."),o=t;for(let i=0;i<r.length;i++){let s=r[i];i===r.length-1?o[s]=e:((!o[s]||!Vx(o[s]))&&(o[s]={}),o=o[s])}}var V1=class{},Hq=(()=>{class t extends V1{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,r){if(TF(e))return this.interpolateString(e,r);if(g_e(e))return this.interpolateFunction(e,r)}interpolateFunction(e,r){return e(r)}interpolateString(e,r){return r?e.replace(this.templateMatcher,(o,i)=>{let s=_F(r,i);return Eh(s)?s:o}):e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),j1=class{},Uq=(()=>{class t extends j1{compile(e,r){return e}compileTranslations(e,r){return e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),Lx=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Qt;onLangChange=new Qt;onDefaultLangChange=new Qt},kF=new Me("ISOLATE_TRANSLATE_SERVICE"),bF=new Me("USE_DEFAULT_LANG"),CF=new Me("DEFAULT_LANGUAGE"),SF=new Me("USE_EXTEND"),Px=t=>bs(t)?t:lt(t),$x=(()=>{class t{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(e){this.store.defaultLang=e}get currentLang(){return this.store.currentLang}set currentLang(e){this.store.currentLang=e}get langs(){return this.store.langs}set langs(e){this.store.langs=e}get translations(){return this.store.translations}set translations(e){this.store.translations=e}constructor(e,r,o,i,s,a=!0,l=!1,c=!1,u){this.store=e,this.currentLoader=r,this.compiler=o,this.parser=i,this.missingTranslationHandler=s,this.useDefaultLang=a,this.extend=c,l&&(this.store=new Lx),u&&this.setDefaultLang(u)}setDefaultLang(e){if(e===this.defaultLang)return;let r=this.retrieveTranslations(e);typeof r<"u"?(this.defaultLang==null&&(this.defaultLang=e),r.pipe(Vr(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return lt(this.translations[e]);this.currentLang||(this.currentLang=e);let r=this.retrieveTranslations(e);return bs(r)?(r.pipe(Vr(1)).subscribe(()=>{this.changeLang(e)}),r):(this.changeLang(e),lt(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;let r=this.currentLoader.getTranslation(e).pipe(om(1),Vr(1));return this.loadingTranslations=r.pipe(At(o=>this.compiler.compileTranslations(o,e)),om(1),Vr(1)),this.loadingTranslations.subscribe({next:o=>{this.translations[e]=this.extend&&this.translations[e]?le(le({},o),this.translations[e]):o,this.updateLangs(),this.pending=!1},error:o=>{this.pending=!1}}),r}setTranslation(e,r,o=!1){let i=this.compiler.compileTranslations(r,e);(o||this.extend)&&this.translations[e]?this.translations[e]=xF(this.translations[e],i):this.translations[e]=i,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){let r=e.filter(o=>!this.langs.includes(o));r.length>0&&(this.langs=[...this.langs,...r])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,r,o){let i;if(e&&(i=this.runInterpolation(_F(e,r),o)),i===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(i=this.runInterpolation(_F(this.translations[this.defaultLang],r),o)),i===void 0){let s={key:r,translateService:this};typeof o<"u"&&(s.interpolateParams=o),i=this.missingTranslationHandler.handle(s)}return i!==void 0?i:r}runInterpolation(e,r){if(MF(e))return e.map(o=>this.runInterpolation(o,r));if(Vx(e)){let o={};for(let i in e){let s=this.runInterpolation(e[i],r);s!==void 0&&(o[i]=s)}return o}else return this.parser.interpolate(e,r)}getParsedResult(e,r,o){if(r instanceof Array){let i={},s=!1;for(let l of r)i[l]=this.getParsedResultForKey(e,l,o),s=s||bs(i[l]);if(!s)return i;let a=r.map(l=>Px(i[l]));return xy(a).pipe(At(l=>{let c={};return l.forEach((u,d)=>{c[r[d]]=u}),c}))}return this.getParsedResultForKey(e,r,o)}get(e,r){if(!Eh(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(fa(o=>Px(this.getParsedResult(o,e,r)))):Px(this.getParsedResult(this.translations[this.currentLang],e,r))}getStreamOnTranslationChange(e,r){if(!Eh(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return rl(id(()=>this.get(e,r)),this.onTranslationChange.pipe(jr(o=>{let i=this.getParsedResult(o.translations,e,r);return Px(i)})))}stream(e,r){if(!Eh(e)||!e.length)throw new Error('Parameter "key" required');return rl(id(()=>this.get(e,r)),this.onLangChange.pipe(jr(o=>{let i=this.getParsedResult(o.translations,e,r);return Px(i)})))}instant(e,r){if(!Eh(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let o=this.getParsedResult(this.translations[this.currentLang],e,r);return bs(o)?Array.isArray(e)?e.reduce((i,s)=>(i[s]=s,i),{}):e:o}set(e,r,o=this.currentLang){v_e(this.translations[o],e,TF(r)?this.compiler.compile(r,o):this.compiler.compileTranslations(r,o)),this.updateLangs(),this.onTranslationChange.emit({lang:o,translations:this.translations[o]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(r){return new(r||t)(Qe(Lx),Qe(Ih),Qe(j1),Qe(V1),Qe(Bx),Qe(bF),Qe(kF),Qe(SF),Qe(CF))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var To=(()=>{class t{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(e,r){this.translate=e,this._ref=r}updateValue(e,r,o){let i=s=>{this.value=s!==void 0?s:e,this.lastKey=e,this._ref.markForCheck()};if(o){let s=this.translate.getParsedResult(o,e,r);bs(s)?s.subscribe(i):i(s)}this.translate.get(e,r).subscribe(i)}transform(e,...r){if(!e||!e.length)return e;if(xM(e,this.lastKey)&&xM(r,this.lastParams))return this.value;let o;if(Eh(r[0])&&r.length)if(TF(r[0])&&r[0].length){let i=r[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{o=JSON.parse(i)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else Vx(r[0])&&(o=r[0]);return this.lastKey=e,this.lastParams=r,this.updateValue(e,o),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(i=>{this.lastKey&&i.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,o,i.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(i=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o,i.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||t)(qt($x,16),qt(kr,16))};static \u0275pipe=yh({name:"translate",type:t,pure:!1});static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var ao=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:Ih,useClass:jq},e.compiler||{provide:j1,useClass:Uq},e.parser||{provide:V1,useClass:Hq},e.missingTranslationHandler||{provide:Bx,useClass:zq},Lx,{provide:kF,useValue:e.isolate},{provide:bF,useValue:e.useDefaultLang},{provide:SF,useValue:e.extend},{provide:CF,useValue:e.defaultLanguage},$x]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:Ih,useClass:jq},e.compiler||{provide:j1,useClass:Uq},e.parser||{provide:V1,useClass:Hq},e.missingTranslationHandler||{provide:Bx,useClass:zq},{provide:kF,useValue:e.isolate},{provide:bF,useValue:e.useDefaultLang},{provide:SF,useValue:e.extend},{provide:CF,useValue:e.defaultLanguage},$x]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})}return t})();var Gq=(()=>{class t{http;prefix;suffix;constructor(e,r="/assets/i18n/",o=".json"){this.http=e,this.prefix=r,this.suffix=o}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}static \u0275fac=function(r){return new(r||t)(Qe(x1),Qe(String),Qe(String))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var Cc=4e3,Wn=class t{constructor(n){this.translate=n;this.translate.addLangs(this.languageList),this.translate.setDefaultLang("en"),this.language=Ze(localStorage.getItem("language")??this.translate.getBrowserLang()??"en"),Tt(()=>{this.translate.use(this.language()),localStorage.setItem("language",this.language())}),this.grid=Ze(localStorage.getItem("grid")!=="false"),Tt(()=>localStorage.setItem("grid",this.grid().toString())),this.highContrast.set(localStorage.getItem("highContrast")==="true"),Tt(()=>localStorage.setItem("highContrast",this.highContrast().toString())),this._zoom.set(parseFloat(localStorage.getItem("zoom")??"1")??1),Tt(()=>localStorage.setItem("zoom",this._zoom().toString()))}language;languageList=["en","es","fr","pt","it","de"];grid;highContrast=Ze(!1);size=ae(()=>Cc);_zoom=Ze(1);zoom=this._zoom.asReadonly();static openFile(n,e){return z(this,null,function*(){let r=document.createElement("input");return r.type="file",r.value="",n&&(r.accept=n),e&&(r.multiple=e),new Promise((o,i)=>{r.onchange=s=>z(this,null,function*(){let a=s.target.files;if(yield new Promise(l=>setTimeout(l,1e3)),a)if(e)o([...a]);else{let l=new FileReader;l.onload=()=>o(l.result),l.readAsText(a[0])}else i();r.remove()}),r.oncancel=()=>i(),r.click()})})}static saveFile(n,e,r){return z(this,null,function*(){let o=new Blob([e],{type:r}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=n,yield new Promise(s=>setTimeout(s,1e3)),i.click(),URL.revokeObjectURL(i.href),i.remove()})}zoomIn(){this._zoom()>=2||this._zoom.set(this._zoom()+.1)}zoomOut(){this._zoom()<=.5||this._zoom.set(this._zoom()-.1)}resetZoom(){this._zoom.set(1)}static \u0275fac=function(e){return new(e||t)(Qe($x))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})};var Wq=/\/\*[\s\S]*?\*\/|\/\/.*/g,w_e=/(?:function|const|let|var)\s+((intcp(_router|_iot|_computer)?|cmd_[A-Za-z0-9$_]+|atk_[A-Za-z0-9$_]+))\s*=?\s*\([A-Za-z0-9$_,.\s]*\)\s*(?:=>)?\s*{/g,y_e=/(?:function|const|let|var)\s+((analyze))\s*=?\s*\([A-Za-z0-9$_,.\s]*\)\s*(?:=>)?\s*{/g,x_e=/\(([^)]*)\)/,qq=t=>{t=t.replace(Wq,"");let n=[...t.matchAll(w_e)].map(e=>e[1]);return t=t.concat(`
`,"return { ",n.join(", "),` };
`),new Function(t)},EF=t=>{if(t=t.replace(Wq,""),[...t.matchAll(y_e)].map(e=>e[1]).length===0)throw new Error("No se encontr\xF3 la funci\xF3n analyze");return t=t.concat(`
`,`return { analyze };
`),new Function("tf","model",t)},_M=t=>{let e=t.toString().match(x_e);if(!e)return 0;let r=e[1].split(",").map(i=>i.trim());return r.find(i=>i.includes("..."))?1/0:r.length};function __e(t,n){t&1&&(vh(),X(0,"svg",0),Ve(1,"path",2),re())}function k_e(t,n){t&1&&(vh(),X(0,"svg",0),Ve(1,"path",3),re())}function b_e(t,n){t&1&&(vh(),X(0,"svg",0),Ve(1,"path",4),re())}function C_e(t,n){t&1&&(vh(),X(0,"svg",1),Ve(1,"path",5)(2,"path",6),re())}function S_e(t,n){t&1&&Ve(0,"div",2)}var M_e=["toastRef"],Xq=[[["","loading-icon",""]],[["","success-icon",""]],[["","error-icon",""]],[["","warning-icon",""]],[["","info-icon",""]]],Yq=["[loading-icon]","[success-icon]","[error-icon]","[warning-icon]","[info-icon]"];function T_e(t,n){if(t&1){let e=gn();X(0,"button",3),Le("click",function(){ze(e);let o=xe();return He(o.onCloseButtonClick())}),vh(),X(1,"svg",4),Ve(2,"line",5)(3,"line",6),re()()}if(t&2){let e,r=xe();$e(r.cn(r.classes().closeButton,(e=r.toast().classes)==null?null:e.closeButton)),Bt("data-disabled",r.disabled())}}function D_e(t,n){t&1&&tr(0)}function E_e(t,n){if(t&1&&(st(0,D_e,1,0,"ng-container",7),Te(1,"asComponent")),t&2){let e=xe();Pe("ngComponentOutlet",De(1,2,e.toast().component))("ngComponentOutletInputs",e.toast().componentProps)}}function I_e(t,n){t&1&&it(0)}function N_e(t,n){t&1&&tr(0)}function A_e(t,n){if(t&1&&(st(0,N_e,1,0,"ng-container",7),Te(1,"asComponent")),t&2){let e=xe(3);Pe("ngComponentOutlet",De(1,2,e.toast().icon))("ngComponentOutletInputs",e.toast().componentProps)}}function R_e(t,n){t&1&&it(0,1)}function O_e(t,n){t&1&&it(0,2)}function F_e(t,n){t&1&&it(0,3)}function P_e(t,n){t&1&&it(0,4)}function B_e(t,n){if(t&1&&st(0,R_e,1,0)(1,O_e,1,0)(2,F_e,1,0)(3,P_e,1,0),t&2){let e,r=xe(3);kt((e=r.toastType())==="success"?0:e==="error"?1:e==="warning"?2:e==="info"?3:-1)}}function L_e(t,n){if(t&1&&(X(0,"div",8),st(1,I_e,1,0)(2,A_e,2,4,"ng-container")(3,B_e,4,1),re()),t&2){let e=xe(2);Y(),kt(e.toastType()==="loading"&&!e.toast().icon?1:-1),Y(),kt(e.toast().icon?2:3)}}function $_e(t,n){if(t&1&&ue(0),t&2){let e=xe(3);Ye(" ",e.toast().title," ")}}function V_e(t,n){t&1&&tr(0)}function j_e(t,n){if(t&1&&(st(0,V_e,1,0,"ng-container",7),Te(1,"asComponent")),t&2){let e=xe(),r=xe(2);Pe("ngComponentOutlet",De(1,2,e))("ngComponentOutletInputs",r.toast().componentProps)}}function z_e(t,n){if(t&1&&(X(0,"div",14),st(1,$_e,1,1),Te(2,"isString"),st(3,j_e,2,4,"ng-container"),re()),t&2){let e,r=xe(2);$e(r.cn(r.classes().title,(e=r.toast().classes)==null?null:e.title)),Y(),kt(De(2,3,n)?1:3)}}function H_e(t,n){if(t&1&&ue(0),t&2){let e=xe(3);Ye(" ",e.toast().description," ")}}function U_e(t,n){t&1&&tr(0)}function G_e(t,n){if(t&1&&(st(0,U_e,1,0,"ng-container",7),Te(1,"asComponent")),t&2){let e=xe(),r=xe(2);Pe("ngComponentOutlet",De(1,2,e))("ngComponentOutletInputs",r.toast().componentProps)}}function W_e(t,n){if(t&1&&(X(0,"div",15),st(1,H_e,1,1),Te(2,"isString"),st(3,G_e,2,4,"ng-container"),re()),t&2){let e,r=xe(2);$e(r.cn(r.descriptionClass(),r.toastDescriptionClass(),r.classes().description,(e=r.toast().classes)==null?null:e.description)),Y(),kt(De(2,3,n)?1:3)}}function q_e(t,n){if(t&1){let e=gn();X(0,"button",16),Le("click",function(){ze(e);let o=xe(2);return He(o.onCancelClick())}),ue(1),re()}if(t&2){let e,r,o=xe(2);dl((e=o.cancelButtonStyle())!==null&&e!==void 0?e:o.toast().cancelButtonStyle),$e(o.cn(o.classes().cancelButton,(r=o.toast().classes)==null?null:r.cancelButton)),Y(),Ye(" ",n.label," ")}}function K_e(t,n){if(t&1){let e=gn();X(0,"button",17),Le("click",function(o){ze(e);let i=xe(2);return He(i.onActionClick(o))}),ue(1),re()}if(t&2){let e,r,o=xe(2);dl((e=o.actionButtonStyle())!==null&&e!==void 0?e:o.toast().actionButtonStyle),$e(o.cn(o.classes().actionButton,(r=o.toast().classes)==null?null:r.actionButton)),Y(),Ye(" ",n.label," ")}}function Z_e(t,n){if(t&1&&(st(0,L_e,4,2,"div",8),X(1,"div",9),st(2,z_e,4,5,"div",10)(3,W_e,4,5,"div",11),re(),st(4,q_e,2,5,"button",12)(5,K_e,2,5,"button",13)),t&2){let e,r,o,i,s=xe();kt(s.toastType()!=="default"||s.toast().icon||s.toast().promise?0:-1),Y(2),kt((e=s.toast().title)?2:-1,e),Y(),kt((r=s.toast().description)?3:-1,r),Y(),kt((o=s.toast().cancel)?4:-1,o),Y(),kt((i=s.toast().action)?5:-1,i)}}var X_e=["listRef"],Y_e=()=>({}),Q_e=(t,n)=>n.id;function J_e(t,n){if(t&1&&Ve(0,"ngx-sonner-loader",6),t&2){let e=xe().$implicit;Pe("isVisible",e.type==="loading")}}function eke(t,n){t&1&&Ve(0,"ngx-sonner-icon",7)}function tke(t,n){t&1&&Ve(0,"ngx-sonner-icon",8)}function nke(t,n){t&1&&Ve(0,"ngx-sonner-icon",9)}function rke(t,n){t&1&&Ve(0,"ngx-sonner-icon",10)}function oke(t,n){if(t&1&&(X(0,"ngx-sonner-toast",5),it(1,0,["loading-icon",""],J_e,1,1),it(3,1,["success-icon",""],eke,1,0),it(5,2,["error-icon",""],tke,1,0),it(7,3,["warning-icon",""],nke,1,0),it(9,4,["info-icon",""],rke,1,0),re()),t&2){let e,r,o,i,s,a=n.$implicit,l=n.$index,c=xe(3);$e((e=c.toastOptions().class)!==null&&e!==void 0?e:""),Pe("index",l)("toast",a)("invert",c.invert())("visibleToasts",c.visibleToasts())("closeButton",c.closeButton())("interacting",c.interacting())("position",c.position())("expandByDefault",c.expand())("expanded",c.expanded())("actionButtonStyle",c.toastOptions().actionButtonStyle)("cancelButtonStyle",c.toastOptions().cancelButtonStyle)("descriptionClass",(r=c.toastOptions().descriptionClass)!==null&&r!==void 0?r:"")("classes",(o=c.toastOptions().classes)!==null&&o!==void 0?o:Z4(17,Y_e))("duration",(i=c.toastOptions().duration)!==null&&i!==void 0?i:c.duration())("unstyled",(s=c.toastOptions().unstyled)!==null&&s!==void 0?s:!1)}}function ike(t,n){if(t&1){let e=gn();X(0,"ol",3,0),Le("blur",function(o){ze(e);let i=xe(2);return He(i.handleBlur(o))})("focus",function(o){ze(e);let i=xe(2);return He(i.handleFocus(o))})("mouseenter",function(){ze(e);let o=xe(2);return He(o.expanded.set(!0))})("mousemove",function(){ze(e);let o=xe(2);return He(o.expanded.set(!0))})("mouseleave",function(){ze(e);let o=xe(2);return He(o.handleMouseLeave())})("pointerdown",function(o){ze(e);let i=xe(2);return He(i.handlePointerDown(o))})("pointerup",function(){ze(e);let o=xe(2);return He(o.interacting.set(!1))}),Go(2,oke,11,18,"ngx-sonner-toast",4,Q_e),Te(4,"toastFilter"),re()}if(t&2){let e=n.$implicit,r=n.$index,o=xe(2);dl(o.toasterStyles()),$e(o._class()),Pe("tabIndex",-1),Bt("data-theme",o.actualTheme())("data-rich-colors",o.richColors())("dir",o.dir()==="auto"?o.getDocumentDirection():o.dir())("data-y-position",e.split("-")[0])("data-x-position",e.split("-")[1]),Y(2),Wo($U(4,10,o.toasts(),r,e))}}function ske(t,n){if(t&1&&(X(0,"section",1),Go(1,ike,5,14,"ol",2,TU),re()),t&2){let e=xe();Pe("tabIndex",-1),Bt("aria-label","Notifications "+e.hotKeyLabel()),Y(),Wo(e.possiblePositions())}}var Kq=0;function ake(){let t=Ze([]),n=Ze([]);function e(v){t.update(w=>[v,...w])}function r(v){let A=v,{message:w}=A,y=qf(A,["message"]),_=typeof v?.id=="number"||v.id&&v.id?.length>0?v.id:Kq++,k=v.dismissible??!0,T=v.type??"default";return t().find(P=>P.id===_)?t.update(P=>P.map(N=>N.id===_?ht(le(le({},N),v),{id:_,title:w,dismissible:k,type:T,updated:!0}):ht(le({},N),{updated:!1}))):e(ht(le({},y),{id:_,title:w,dismissible:k,type:T})),_}function o(v){if(v===void 0){t.set([]);return}return t.update(w=>w.filter(y=>y.id!==v)),v}function i(v,w){return r(ht(le({},w),{type:"default",message:v}))}function s(v,w){return r(ht(le({},w),{type:"error",message:v}))}function a(v,w){return r(ht(le({},w),{type:"success",message:v}))}function l(v,w){return r(ht(le({},w),{type:"info",message:v}))}function c(v,w){return r(ht(le({},w),{type:"warning",message:v}))}function u(v,w){return r(ht(le({},w),{type:"loading",message:v}))}function d(v,w){if(!w)return;let y;w.loading!==void 0&&(y=r(ht(le({},w),{promise:v,type:"loading",message:w.loading})));let _=v instanceof Promise?v:v(),k=y!==void 0;return _.then(T=>{if(T&&typeof T.ok=="boolean"&&!T.ok){k=!1;let I=typeof w.error=="function"?w.error(`HTTP error! status: ${T.status}`):w.error;r({id:y,type:"error",message:I})}else if(w.success!==void 0){k=!1;let I=typeof w.success=="function"?w.success(T):w.success;r({id:y,type:"success",message:I})}}).catch(T=>{if(w.error!==void 0){k=!1;let I=typeof w.error=="function"?w.error(T):w.error;r({id:y,type:"error",message:I})}}).finally(()=>{k&&(o(y),y=void 0),w.finally?.()}),y}function p(v,w){let y=w?.id??Kq++;return r(le({component:v,id:y},w)),y}function h(v){n.update(w=>w.filter(y=>y.toastId!==v))}function f(v){n.update(w=>[v,...w].sort(m))}let m=(v,w)=>t().findIndex(y=>y.id===v.toastId)-t().findIndex(y=>y.id===w.toastId);function g(){t.set([]),n.set([])}return{create:r,addToast:e,dismiss:o,message:i,error:s,success:a,info:l,warning:c,loading:u,promise:d,custom:p,removeHeight:h,addHeight:f,reset:g,toasts:t.asReadonly(),heights:n.asReadonly()}}var ai=ake();function lke(t,n){return ai.create(le({message:t},n))}var cke=lke,Os=Object.assign(cke,{success:ai.success,info:ai.info,warning:ai.warning,error:ai.error,custom:ai.custom,message:ai.message,promise:ai.promise,dismiss:ai.dismiss,loading:ai.loading}),uke=(()=>{class t{constructor(){this.type=Z("default")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ie({type:t,selectors:[["ngx-sonner-icon"]],inputs:{type:[1,"type"]},decls:4,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","height","20","width","20"],["viewBox","0 0 64 64","fill","currentColor","height","20","width","20","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule","evenodd"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z","clip-rule","evenodd"],["d","M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"],["d","M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"]],template:function(r,o){if(r&1&&st(0,__e,2,0,":svg:svg",0)(1,k_e,2,0,":svg:svg",0)(2,b_e,2,0,":svg:svg",0)(3,C_e,3,0,":svg:svg",1),r&2){let i;kt((i=o.type())==="success"?0:i==="error"?1:i==="info"?2:i==="warning"?3:-1)}},encapsulation:2,changeDetection:0})}}return t})(),dke=3,pke="32px",kM=4e3,hke=356,Qq=14,fke=20,mke=200,gke={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""},vke=(()=>{class t{constructor(){this.isVisible=Z.required({transform:nt}),this.bars=Array(12).fill(0)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ie({type:t,selectors:[["ngx-sonner-loader"]],inputs:{isVisible:[1,"isVisible"]},decls:4,vars:1,consts:[[1,"sonner-loading-wrapper"],[1,"sonner-spinner"],[1,"sonner-loading-bar"]],template:function(r,o){r&1&&(X(0,"div",0)(1,"div",1),Go(2,S_e,1,0,"div",2,Ds),re()()),r&2&&(Bt("data-visible",o.isVisible()),Y(2),Wo(o.bars))},encapsulation:2,changeDetection:0})}}return t})(),wke=(()=>{class t{transform(e,r,o){return e.filter(i=>!i.position&&r===0||i.position===o)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=yh({name:"toastFilter",type:t,pure:!0})}}return t})();function Zq(...t){return t.filter(Boolean).join(" ")}var yke=(()=>{class t{transform(e){return e}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=yh({name:"asComponent",type:t,pure:!0})}}return t})(),xke=(()=>{class t{transform(e){return typeof e=="string"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=yh({name:"isString",type:t,pure:!0})}}return t})(),_ke=(()=>{class t{constructor(){this.cn=Zq,this.toasts=ai.toasts,this.heights=ai.heights,this.removeHeight=ai.removeHeight,this.addHeight=ai.addHeight,this.dismiss=ai.dismiss,this.toast=Z.required(),this.index=Z.required(),this.expanded=Z.required(),this._invert=Z.required({alias:"invert"}),this.position=Z.required(),this.visibleToasts=Z.required(),this.expandByDefault=Z.required(),this._closeButton=Z.required({alias:"closeButton"}),this.interacting=Z.required(),this.cancelButtonStyle=Z(),this.actionButtonStyle=Z(),this.duration=Z(kM),this.descriptionClass=Z(""),this._classes=Z({},{alias:"classes"}),this.unstyled=Z(!1),this._class=Z("",{alias:"class"}),this._style=Z({},{alias:"style"}),this.mounted=Ze(!1),this.removed=Ze(!1),this.swiping=Ze(!1),this.swipeOut=Ze(!1),this.offsetBeforeRemove=Ze(0),this.initialHeight=Ze(0),this.toastRef=bo.required("toastRef"),this.classes=ae(()=>le(le({},gke),this._classes())),this.isFront=ae(()=>this.index()===0),this.isVisible=ae(()=>this.index()+1<=this.visibleToasts()),this.toastType=ae(()=>this.toast().type??"default"),this.toastClass=ae(()=>this.toast().class??""),this.toastPosition=ae(()=>this.toast().position??this.position()),this.toastDescriptionClass=ae(()=>this.toast().descriptionClass??""),this.heightIndex=ae(()=>this.heights().findIndex(e=>e.toastId===this.toast().id)),this.offset=eS({source:()=>({heightIndex:this.heightIndex(),toastsHeightBefore:this.toastsHeightBefore()}),computation:({heightIndex:e,toastsHeightBefore:r})=>Math.round(e*Qq+r)}),this.closeTimerStartTimeRef=0,this.lastCloseTimerStartTimeRef=0,this.pointerStartRef=null,this.coords=ae(()=>this.toastPosition().split("-")),this.toastsHeightBefore=ae(()=>this.heights().reduce((e,r,o)=>o>=this.heightIndex()?e:e+r.height,0)),this.invert=ae(()=>this.toast().invert??this._invert()),this.closeButton=ae(()=>this.toast().closeButton??this._closeButton()),this.disabled=ae(()=>this.toastType()==="loading"),this.remainingTime=0,this.isPromiseLoadingOrInfiniteDuration=ae(()=>this.toast().promise&&this.toastType()==="loading"||this.toast().duration===Number.POSITIVE_INFINITY),this.toastClasses=ae(()=>Zq(this._class(),this.toastClass(),this.classes().toast,this.toast().classes?.toast,this.classes()[this.toastType()],this.toast().classes?.[this.toastType()])),this.toastStyle=ae(()=>le({"--index":`${this.index()}`,"--toasts-before":`${this.index()}`,"--z-index":`${this.toasts().length-this.index()}`,"--offset":`${this.removed()?this.offsetBeforeRemove():this.offset()}px`,"--initial-height":this.expandByDefault()?"auto":`${this.initialHeight()}px`},this._style())),Tt(()=>{this.toast().updated&&(clearTimeout(this.timeoutId),this.remainingTime=this.toast().duration??this.duration()??kM,this.startTimer())}),Z5(e=>{this.isPromiseLoadingOrInfiniteDuration()||(this.expanded()||this.interacting()?this.pauseTimer():this.startTimer()),e(()=>clearTimeout(this.timeoutId))}),Tt(()=>{this.toast().delete&&this.deleteToast()})}ngAfterViewInit(){this.remainingTime=this.toast().duration??this.duration()??kM,this.mounted.set(!0);let e=this.toastRef().nativeElement.getBoundingClientRect().height;this.initialHeight.set(e),this.addHeight({toastId:this.toast().id,height:e})}ngOnDestroy(){clearTimeout(this.timeoutId),this.removeHeight(this.toast().id)}deleteToast(){this.removed.set(!0),this.offsetBeforeRemove.set(this.offset()),this.removeHeight(this.toast().id),setTimeout(()=>{this.dismiss(this.toast().id)},mke)}pauseTimer(){if(this.lastCloseTimerStartTimeRef<this.closeTimerStartTimeRef){let e=new Date().getTime()-this.closeTimerStartTimeRef;this.remainingTime=this.remainingTime-e}this.lastCloseTimerStartTimeRef=new Date().getTime()}startTimer(){this.closeTimerStartTimeRef=new Date().getTime(),this.timeoutId=setTimeout(()=>{this.toast().onAutoClose?.(this.toast()),this.deleteToast()},this.remainingTime)}onPointerDown(e){if(this.disabled()||!this.toast().dismissible)return;this.offsetBeforeRemove.set(this.offset());let r=e.target;r.setPointerCapture(e.pointerId),r.tagName!=="BUTTON"&&(this.swiping.set(!0),this.pointerStartRef={x:e.clientX,y:e.clientY})}onPointerUp(){if(this.swipeOut()||!this.toast().dismissible)return;this.pointerStartRef=null;let e=Number(this.toastRef().nativeElement.style.getPropertyValue("--swipe-amount").replace("px","")||0);if(Math.abs(e)>=fke){this.offsetBeforeRemove.set(this.offset()),this.toast().onDismiss?.(this.toast()),this.deleteToast(),this.swipeOut.set(!0);return}this.toastRef().nativeElement.style.setProperty("--swipe-amount","0px"),this.swiping.set(!1)}onPointerMove(e){if(!this.pointerStartRef||!this.toast().dismissible)return;let r=e.clientY-this.pointerStartRef.y,o=e.clientX-this.pointerStartRef.x,s=(this.coords()[0]==="top"?Math.min:Math.max)(0,r),a=e.pointerType==="touch"?10:2;Math.abs(s)>a?this.toastRef().nativeElement.style.setProperty("--swipe-amount",`${r}px`):Math.abs(o)>a&&(this.pointerStartRef=null)}onCloseButtonClick(){this.disabled()||!this.toast().dismissible||(this.deleteToast(),this.toast().onDismiss?.(this.toast()))}onCancelClick(){let e=this.toast();e.dismissible&&(this.deleteToast(),e.cancel?.onClick&&e.cancel.onClick())}onActionClick(e){this.toast().action?.onClick(e),!e.defaultPrevented&&this.deleteToast()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ie({type:t,selectors:[["ngx-sonner-toast"]],viewQuery:function(r,o){r&1&&So(o.toastRef,M_e,5),r&2&&zr()},inputs:{toast:[1,"toast"],index:[1,"index"],expanded:[1,"expanded"],_invert:[1,"invert","_invert"],position:[1,"position"],visibleToasts:[1,"visibleToasts"],expandByDefault:[1,"expandByDefault"],_closeButton:[1,"closeButton","_closeButton"],interacting:[1,"interacting"],cancelButtonStyle:[1,"cancelButtonStyle"],actionButtonStyle:[1,"actionButtonStyle"],duration:[1,"duration"],descriptionClass:[1,"descriptionClass"],_classes:[1,"classes","_classes"],unstyled:[1,"unstyled"],_class:[1,"class","_class"],_style:[1,"style","_style"]},ngContentSelectors:Yq,decls:5,vars:22,consts:[["toastRef",""],["data-sonner-toast","","aria-atomic","true","role","status","tabindex","0",3,"pointerdown","pointerup","pointermove"],["aria-label","Close toast","data-close-button","",3,"class"],["aria-label","Close toast","data-close-button","",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","12","height","12","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[4,"ngComponentOutlet","ngComponentOutletInputs"],["data-icon",""],["data-content",""],["data-title","",3,"class"],["data-description","",3,"class"],["data-button","","data-cancel","",3,"style","class"],["data-button","",3,"style","class"],["data-title",""],["data-description",""],["data-button","","data-cancel","",3,"click"],["data-button","",3,"click"]],template:function(r,o){if(r&1){let i=gn();Ot(Xq),X(0,"li",1,0),Le("pointerdown",function(a){return ze(i),He(o.onPointerDown(a))})("pointerup",function(){return ze(i),He(o.onPointerUp())})("pointermove",function(a){return ze(i),He(o.onPointerMove(a))}),st(2,T_e,4,3,"button",2)(3,E_e,2,4,"ng-container")(4,Z_e,6,5),re()}r&2&&(dl(o.toastStyle()),$e(o.toastClasses()),Bt("aria-live",o.toast().important?"assertive":"polite")("data-styled",!(o.toast().component||o.toast().unstyled||o.unstyled()))("data-mounted",o.mounted())("data-promise",!!o.toast().promise)("data-removed",o.removed())("data-visible",o.isVisible())("data-y-position",o.coords()[0])("data-x-position",o.coords()[1])("data-index",o.index())("data-front",o.isFront())("data-swiping",o.swiping())("data-dismissible",o.toast().dismissible)("data-type",o.toastType())("data-invert",o.invert())("data-swipe-out",o.swipeOut())("data-expanded",o.expanded()||o.expandByDefault()&&o.mounted()),Y(2),kt(o.closeButton()&&!o.toast().component?2:-1),Y(),kt(o.toast().component?3:4))},dependencies:[Jy,xke,yke],encapsulation:2,changeDetection:0})}}return t})(),Jq=(()=>{class t{constructor(){this.platformId=M(so),this.toasts=ai.toasts,this.heights=ai.heights,this.reset=ai.reset,this.invert=Z(!1,{transform:nt}),this.theme=Z("light"),this.position=Z("bottom-right"),this.hotKey=Z(["altKey","KeyT"]),this.richColors=Z(!1,{transform:nt}),this.expand=Z(!1,{transform:nt}),this.duration=Z(kM,{transform:_i}),this.visibleToasts=Z(dke,{transform:_i}),this.closeButton=Z(!1,{transform:nt}),this.toastOptions=Z({}),this.offset=Z(null),this.dir=Z(this.getDocumentDirection()),this._class=Z("",{alias:"class"}),this._style=Z({},{alias:"style"}),this.possiblePositions=ae(()=>Array.from(new Set([this.position(),...this.toasts().filter(e=>e.position).map(e=>e.position)].filter(Boolean)))),this.expanded=eS({source:this.toasts,computation:e=>e.length<1}),this.actualTheme=eS({source:this.theme,computation:e=>this.getActualTheme(e)}),this.interacting=Ze(!1),this.listRef=bo("listRef"),this.lastFocusedElementRef=Ze(null),this.isFocusWithinRef=Ze(!1),this.hotKeyLabel=ae(()=>this.hotKey().join("+").replace(/Key/g,"").replace(/Digit/g,"")),this.toasterStyles=ae(()=>le({"--front-toast-height":`${this.heights()[0]?.height}px`,"--offset":typeof this.offset()=="number"?`${this.offset()}px`:this.offset()??`${pke}`,"--width":`${hke}px`,"--gap":`${Qq}px`},this._style())),this.handleKeydown=e=>{let r=this.listRef()?.nativeElement;if(!r)return;this.hotKey().every(i=>e[i]||e.code===i)&&(this.expanded.set(!0),r.focus()),e.code==="Escape"&&(document.activeElement===r||r.contains(document.activeElement))&&this.expanded.set(!1)},this.handleThemePreferenceChange=({matches:e})=>{this.theme()==="system"&&this.actualTheme.set(e?"dark":"light")},this.reset(),rs(this.platformId)&&(document.addEventListener("keydown",this.handleKeydown),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.handleThemePreferenceChange))}ngOnDestroy(){rs(this.platformId)&&(document.removeEventListener("keydown",this.handleKeydown),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this.handleThemePreferenceChange))}handleBlur(e){this.isFocusWithinRef()&&!e.target.contains(e.relatedTarget)&&(this.isFocusWithinRef.set(!1),this.lastFocusedElementRef()&&(this.lastFocusedElementRef()?.focus({preventScroll:!0}),this.lastFocusedElementRef.set(null)))}handleFocus(e){e.target instanceof HTMLElement&&e.target.dataset.dismissible==="false"||this.isFocusWithinRef()||(this.isFocusWithinRef.set(!0),this.lastFocusedElementRef.set(e.relatedTarget))}handlePointerDown(e){e.target instanceof HTMLElement&&e.target.dataset.dismissible==="false"||this.interacting.set(!0)}handleMouseLeave(){this.interacting()||this.expanded.set(!1)}getActualTheme(e){return e!=="system"?e:rs(this.platformId)&&window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}getDocumentDirection(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return!e||e==="auto"?window.getComputedStyle(document.documentElement).direction:e}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ie({type:t,selectors:[["ngx-sonner-toaster"]],viewQuery:function(r,o){r&1&&So(o.listRef,X_e,5),r&2&&zr()},inputs:{invert:[1,"invert"],theme:[1,"theme"],position:[1,"position"],hotKey:[1,"hotKey"],richColors:[1,"richColors"],expand:[1,"expand"],duration:[1,"duration"],visibleToasts:[1,"visibleToasts"],closeButton:[1,"closeButton"],toastOptions:[1,"toastOptions"],offset:[1,"offset"],dir:[1,"dir"],_class:[1,"class","_class"],_style:[1,"style","_style"]},ngContentSelectors:Yq,decls:1,vars:1,consts:[["listRef",""],[3,"tabIndex"],["data-sonner-toaster","",3,"tabIndex","class","style"],["data-sonner-toaster","",3,"blur","focus","mouseenter","mousemove","mouseleave","pointerdown","pointerup","tabIndex"],[3,"index","toast","invert","visibleToasts","closeButton","interacting","position","expandByDefault","expanded","actionButtonStyle","cancelButtonStyle","class","descriptionClass","classes","duration","unstyled"],[3,"index","toast","invert","visibleToasts","closeButton","interacting","position","expandByDefault","expanded","actionButtonStyle","cancelButtonStyle","descriptionClass","classes","duration","unstyled"],[3,"isVisible"],["type","success"],["type","error"],["type","warning"],["type","info"]],template:function(r,o){r&1&&(Ot(Xq),st(0,ske,3,2,"section",1)),r&2&&kt(o.toasts().length>0?0:-1)},dependencies:[_ke,wke,uke,vke],styles:[`html[dir=ltr],[data-sonner-toaster][dir=ltr]{--toast-icon-margin-start: var(--ngx-sonner-toast-icon-margin-start, -3px);--toast-icon-margin-end: var(--ngx-sonner-toast-icon-margin-end, 4px);--toast-svg-margin-start: var(--ngx-sonner-toast-svg-margin-start,-1px);--toast-svg-margin-end: var(--ngx-sonner-toast-svg-margin-end, 0px);--toast-button-margin-start: var(--ngx-sonner-toast-button-margin-start, auto);--toast-button-margin-end: var(--ngx-sonner-toast-button-margin-end, 0);--toast-close-button-start: var(--ngx-sonner-toast-close-button-start, 0);--toast-close-button-end: var(--ngx-sonner-toast-close-button-end, unset);--toast-close-button-transform: var(--ngx-sonner-toast-close-button-transform, translate(-35%, -35%))}html[dir=rtl],[data-sonner-toaster][dir=rtl]{--toast-icon-margin-start: var(--ngx-sonner-rtl-toast-icon-margin-start, 4px);--toast-icon-margin-end: var(--ngx-sonner-rtl-toast-icon-margin-end, -3px);--toast-svg-margin-start: var(--ngx-sonner-rtl-toast-svg-margin-start, 0px);--toast-svg-margin-end: var(--ngx-sonner-rtl-toast-svg-margin-end, -1px);--toast-button-margin-start: var(--ngx-sonner-rtl-toast-button-margin-start, 0);--toast-button-margin-end: var(--ngx-sonner-rtl-toast-button-margin-end, auto);--toast-close-button-start: var(--ngx-sonner-rtl-toast-close-button-start, unset);--toast-close-button-end: var(--ngx-sonner-rtl-toast-close-button-end, 0);--toast-close-button-transform: var(--ngx-sonner-rtl-toast-close-button-transform, translate(35%, -35%))}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:var(--ngx-sonner-font-family, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji);--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: var(--ngx-sonner-border-radius, 8px);box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:var(--ngx-sonner-toast-focus-box-shadow, 0 0 0 2px rgba(0, 0, 0, .4))}[data-sonner-toast] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast] [data-cancel]{color:var(--normal-text);background:#00000014}[data-sonner-toast][data-theme=dark] [data-cancel]{background:#ffffff4d}[data-sonner-toast] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--ngx-sonner-toast-close-button-background, var(--gray1));color:var(--ngx-sonner-toast-close-button-color, var(--gray12));border:var(--ngx-sonner-toast-close-button-border, 1px solid var(--gray4));transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--ngx-sonner-toast-close-button-hover-background, var(--gray2));color:var(--ngx-sonner-toast-close-button-hover-color, var(--gray12));border-color:var(--ngx-sonner-toast-close-button-hover-border-color, var(--gray5))}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: var(--ngx-sonner-toast-normal-background, #fff);--normal-border: var(--ngx-sonner-toast-normal-border-color, var(--gray4));--normal-text: var(--ngx-sonner-toast-normal-color, var(--gray12));--success-bg: var(--ngx-sonner-toast-success-background, hsl(143, 85%, 96%));--success-border: var(--ngx-sonner-toast-success-border, hsl(145, 92%, 91%));--success-text: var(--ngx-sonner-toast-success-color, hsl(140, 100%, 27%));--info-bg: var(--ngx-sonner-toast-info-background, hsl(208, 100%, 97%));--info-border: var(--ngx-sonner-toast-info-border, hsl(221, 91%, 91%));--info-text: var(--ngx-sonner-toast-info-color, hsl(210, 92%, 45%));--warning-bg: var(--ngx-sonner-toast-warning-background, hsl(49, 100%, 97%));--warning-border: var(--ngx-sonner-toast-warning-border, hsl(49, 91%, 91%));--warning-text: var(--ngx-sonner-toast-warning-color, hsl(31, 92%, 45%));--error-bg: var(--ngx-sonner-toast-error-background, hsl(359, 100%, 97%));--error-border: var(--ngx-sonner-toast-error-border, hsl(359, 100%, 94%));--error-text: var(--ngx-sonner-toast-error-color, hsl(360, 100%, 45%))}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: var(--ngx-sonner-toast-inverse-normal-background, #000);--normal-border: var(--ngx-sonner-toast-inverse-normal-border-color, hsl(0, 0%, 20%));--normal-text: var(--ngx-sonner-toast-inverse-normal-color, var(--gray1))}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: var(--ngx-sonner-toast-inverse-dark-normal-background, #fff);--normal-border: var(--ngx-sonner-toast-inverse-dark-normal-border-color, var(--gray3));--normal-text: var(--ngx-sonner-toast-inverse-dark-normal-color, var(--gray12))}[data-sonner-toaster][data-theme=dark]{--normal-bg: var(--ngx-sonner-toast-dark-normal-background, #000);--normal-border: var(--ngx-sonner-toast-dark-normal-border-color, hsl(0, 0%, 20%));--normal-text: var(--ngx-sonner-toast-dark-normal-color, var(--gray1));--success-bg: var(--ngx-sonner-toast-dark-success-background, hsl(150, 100%, 6%));--success-border: var(--ngx-sonner-toast-dark-success-border, hsl(147, 100%, 12%));--success-text: var(--ngx-sonner-toast-dark-success-color, hsl(150, 86%, 65%));--info-bg: var(--ngx-sonner-toast-dark-info-background, hsl(215, 100%, 6%));--info-border: var(--ngx-sonner-toast-dark-info-border, hsl(223, 100%, 12%));--info-text: var(--ngx-sonner-toast-dark-info-color, hsl(216, 87%, 65%));--warning-bg: var(--ngx-sonner-toast-dark-warning-background, hsl(64, 100%, 6%));--warning-border: var(--ngx-sonner-toast-dark-warning-border, hsl(60, 100%, 12%));--warning-text: var(--ngx-sonner-toast-dark-warning-color, hsl(46, 87%, 65%));--error-bg: var(--ngx-sonner-toast-dark-error-background, hsl(358, 76%, 10%));--error-border: var(--ngx-sonner-toast-dark-error-border, hsl(357, 89%, 16%));--error-text: var(--ngx-sonner-toast-dark-error-color, hsl(358, 100%, 81%))}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=info],[data-rich-colors=true] [data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true] [data-sonner-toast][data-type=warning],[data-rich-colors=true] [data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`],encapsulation:2,changeDetection:0})}}return t})();var wl=class t{constructor(n){this.config=n;let e=localStorage.getItem("library");e&&this._load(e)}static _instance;static get instance(){return t._instance}_library=void 0;get library(){return this._library}_librarySubject=new Zn(void 0);get library$(){return this._librarySubject.asObservable()}static init(n){return t.instance||(t._instance=new t(n)),t.instance}_load(n){this._library=qq(n),this._librarySubject.next(this._library),localStorage.setItem("library",n)}loadFromFile(){Os.promise(Wn.openFile(".js").then(n=>this._load(n)),{loading:this.config.translate.instant("LIBRARY_LOADING"),success:()=>this.config.translate.instant("LIBRARY_LOADED"),error:n=>(console.error(n),this.config.translate.instant("LIBRARY_NOT_LOADED"))})}deleteFile(){localStorage.removeItem("library"),this._library=void 0,this._librarySubject.next(this._library),Os.success(this.config.translate.instant("LIBRARY_DELETED"))}static \u0275fac=function(e){return new(e||t)(Qe(Wn))};static \u0275prov=_e({token:t,factory:t.\u0275fac})};var _$={};Jt(_$,{Abs:()=>xd,Acos:()=>Dc,Acosh:()=>Ec,AdadeltaOptimizer:()=>rf,AdagradOptimizer:()=>of,AdamOptimizer:()=>sf,AdamaxOptimizer:()=>af,Add:()=>Sa,AddN:()=>_d,All:()=>Qm,Any:()=>Jm,ArgMax:()=>kd,ArgMin:()=>bd,Asin:()=>Ic,Asinh:()=>Nc,Atan:()=>Ac,Atan2:()=>Oc,Atanh:()=>Rc,AvgPool:()=>Cd,AvgPool3D:()=>Sd,AvgPool3DGrad:()=>tg,AvgPoolGrad:()=>eg,BatchMatMul:()=>Md,BatchToSpaceND:()=>Td,Bincount:()=>ng,BitwiseAnd:()=>Rh,BroadcastArgs:()=>rg,BroadcastTo:()=>LF,Callback:()=>bk,CallbackList:()=>ak,Cast:()=>xl,Ceil:()=>Fc,ClipByValue:()=>Pc,Complex:()=>og,ComplexAbs:()=>Dd,Concat:()=>Ed,Conv2D:()=>Id,Conv2DBackpropFilter:()=>ig,Conv2DBackpropInput:()=>Nd,Conv3D:()=>Ad,Conv3DBackpropFilterV2:()=>sg,Conv3DBackpropInputV2:()=>ag,Cos:()=>Bc,Cosh:()=>Lc,CropAndResize:()=>cg,Cumprod:()=>lg,Cumsum:()=>Rd,CustomCallback:()=>ck,DataStorage:()=>Nh,DenseBincount:()=>ug,DepthToSpace:()=>dg,DepthwiseConv2dNative:()=>Od,DepthwiseConv2dNativeBackpropFilter:()=>pg,DepthwiseConv2dNativeBackpropInput:()=>hg,Diag:()=>fg,Dilation2D:()=>Fd,Dilation2DBackpropFilter:()=>K1,Dilation2DBackpropInput:()=>q1,Draw:()=>Z1,ENV:()=>SM,EarlyStopping:()=>Ck,Einsum:()=>mg,Elu:()=>Vc,EluGrad:()=>gg,Environment:()=>W1,Equal:()=>Oh,Erf:()=>jc,Exp:()=>zc,ExpandDims:()=>Pd,Expm1:()=>Hc,FFT:()=>vg,Fill:()=>wg,FlipLeftRight:()=>yg,Floor:()=>Uc,FloorDiv:()=>Gc,FromPixels:()=>X1,FusedBatchNorm:()=>Bd,FusedConv2D:()=>Uh,FusedDepthwiseConv2D:()=>Gh,GPGPUContext:()=>bf,GatherNd:()=>xg,GatherV2:()=>Ld,GraphModel:()=>Bv,Greater:()=>Fh,GreaterEqual:()=>Wc,History:()=>lk,IFFT:()=>_g,Identity:()=>_l,Imag:()=>kg,InputSpec:()=>On,IsFinite:()=>qc,IsInf:()=>Kc,IsNan:()=>Zc,KernelBackend:()=>Sc,LRN:()=>Vd,LRNGrad:()=>Cg,LayerVariable:()=>Sv,LayersModel:()=>za,LeakyRelu:()=>$d,Less:()=>Ph,LessEqual:()=>Bh,LinSpace:()=>bg,Log:()=>Xc,Log1p:()=>Yc,LogSoftmax:()=>$F,LogicalAnd:()=>Lh,LogicalNot:()=>$h,LogicalOr:()=>Vh,LogicalXor:()=>Uke,LowerBound:()=>Gke,MathBackendCPU:()=>ZD,MathBackendWebGL:()=>ZE,MatrixBandPart:()=>Wke,Max:()=>jd,MaxPool:()=>zd,MaxPool3D:()=>Hd,MaxPool3DGrad:()=>Mg,MaxPoolGrad:()=>Sg,MaxPoolWithArgmax:()=>Tg,Maximum:()=>Qc,Mean:()=>Ud,Min:()=>Gd,Minimum:()=>Jc,MirrorPad:()=>Wd,Mod:()=>eu,MomentumOptimizer:()=>lf,Multinomial:()=>Dg,Multiply:()=>tu,Neg:()=>qd,NonMaxSuppressionV3:()=>Eg,NonMaxSuppressionV4:()=>Ig,NonMaxSuppressionV5:()=>Ng,NotEqual:()=>jh,OP_SCOPE_SUFFIX:()=>FM,OneHot:()=>Zd,OnesLike:()=>Kd,Optimizer:()=>Qo,OptimizerConstructors:()=>vv,Pack:()=>Xd,PadV2:()=>Yd,Pool:()=>qke,Pow:()=>nu,Prelu:()=>Qd,Prod:()=>Jd,RMSPropOptimizer:()=>cf,RNN:()=>Hl,RaggedGather:()=>Ag,RaggedRange:()=>Rg,RaggedTensorToTensor:()=>Og,Range:()=>Fg,Rank:()=>KF,Real:()=>Pg,RealDiv:()=>$c,Reciprocal:()=>ru,Reduction:()=>Ar,Relu:()=>ou,Relu6:()=>iu,Reshape:()=>ep,ResizeBilinear:()=>np,ResizeBilinearGrad:()=>Lg,ResizeNearestNeighbor:()=>tp,ResizeNearestNeighborGrad:()=>Bg,Reverse:()=>rp,RotateWithOffset:()=>t0,Round:()=>su,Rsqrt:()=>au,SGDOptimizer:()=>Eu,ScatterNd:()=>$g,SearchSorted:()=>jg,Select:()=>op,Selu:()=>lu,Sequential:()=>vk,Sigmoid:()=>pu,Sign:()=>du,Sin:()=>cu,Sinh:()=>uu,Slice:()=>ip,Softmax:()=>cp,Softplus:()=>hu,SpaceToBatchND:()=>ap,SparseFillEmptyRows:()=>zg,SparseReshape:()=>Hg,SparseSegmentMean:()=>Ug,SparseSegmentSum:()=>Gg,SparseToDense:()=>Wg,SplitV:()=>lp,Sqrt:()=>fu,Square:()=>qg,SquaredDifference:()=>mu,StaticRegexReplace:()=>zh,Step:()=>yu,StridedSlice:()=>Kg,StringNGrams:()=>Zg,StringSplit:()=>Xg,StringToHashBucketFast:()=>Yg,Sub:()=>gu,Sum:()=>sp,SymbolicTensor:()=>pi,Tan:()=>vu,Tanh:()=>wu,Tensor:()=>Lt,TensorBuffer:()=>yn,TensorScatterUpdate:()=>Vg,Tile:()=>kl,TopK:()=>Qg,Transform:()=>Jg,Transpose:()=>bl,Unique:()=>e0,Unpack:()=>up,UnsortedSegmentSum:()=>dp,UpperBound:()=>Kke,Variable:()=>_u,ZerosLike:()=>pp,_FusedMatMul:()=>Hh,abs:()=>zn,acos:()=>e_,acosh:()=>t_,add:()=>fe,addN:()=>u6,all:()=>h0,any:()=>Yh,argMax:()=>Dl,argMin:()=>n_,asin:()=>r_,asinh:()=>o_,atan:()=>i_,atan2:()=>s_,atanh:()=>a_,avgPool:()=>vp,avgPool3d:()=>u_,backend:()=>Yx,backend_util:()=>O,basicLSTMCell:()=>f6,batchNorm:()=>El,batchNorm2d:()=>d_,batchNorm3d:()=>p_,batchNorm4d:()=>h_,batchToSpaceND:()=>wp,bincount:()=>f_,bitwiseAnd:()=>m6,booleanMaskAsync:()=>LZ,broadcastArgs:()=>g6,broadcastTo:()=>Il,broadcast_util:()=>ss,browser:()=>ek,buffer:()=>at,callbacks:()=>wee,cast:()=>ge,ceil:()=>m_,clipByValue:()=>go,clone:()=>ki,complex:()=>Li,concat:()=>vn,concat1d:()=>g_,concat2d:()=>v_,concat3d:()=>w_,concat4d:()=>y_,constraints:()=>X8,conv1d:()=>m0,conv2d:()=>Vi,conv2dTranspose:()=>g0,conv3d:()=>x_,conv3dTranspose:()=>__,copyRegisteredKernels:()=>Qke,cos:()=>yp,cosh:()=>v0,cosineWindow:()=>mv,cumprod:()=>Qh,cumsum:()=>w0,customGrad:()=>Ci,data:()=>CL,denseBincount:()=>dv,deprecationWarn:()=>PK,depthToSpace:()=>k_,depthwiseConv2d:()=>Nl,deregisterOp:()=>_ee,device_util:()=>hp,diag:()=>v6,dilation2d:()=>b_,disableDeprecationWarnings:()=>Cbe,dispose:()=>gt,disposeVariables:()=>Sbe,div:()=>je,divNoNan:()=>C_,dot:()=>S_,dropout:()=>XM,einsum:()=>xp,elu:()=>Al,enableDebugMode:()=>bbe,enableProdMode:()=>kbe,enclosingPowerOfTwo:()=>YM,engine:()=>ra,ensureShape:()=>w6,env:()=>ee,equal:()=>Eo,erf:()=>y0,euclideanNorm:()=>T_,exp:()=>mr,expandDims:()=>gr,expm1:()=>D_,eye:()=>Jh,fft:()=>Ip,fill:()=>sa,findBackend:()=>Ibe,findBackendFactory:()=>Nbe,floor:()=>Rl,floorDiv:()=>p0,forceHalfFloat:()=>e$,fused:()=>Ap,gather:()=>Ol,gatherND:()=>HZ,gather_util:()=>y8,getBackend:()=>e6,getGradient:()=>MM,getKernel:()=>n0,getKernelsForBackend:()=>Ux,gpgpu_util:()=>jE,grad:()=>mZ,grads:()=>gZ,greater:()=>Yn,greaterEqual:()=>bi,ifft:()=>Du,imag:()=>_p,image:()=>Mi,inTopKAsync:()=>GZ,initializers:()=>Y8,input:()=>QT,io:()=>to,irfft:()=>R0,isFinite:()=>E_,isInf:()=>I_,isNaN:()=>N_,keep:()=>qn,kernel_impls:()=>Jo,layers:()=>vB,leakyRelu:()=>kp,less:()=>Mu,lessEqual:()=>as,linalg:()=>aT,linspace:()=>b6,loadGraphModel:()=>Jee,loadGraphModelSync:()=>ete,loadLayersModel:()=>Nv,localResponseNormalization:()=>A_,log:()=>wo,log1p:()=>bp,logSigmoid:()=>O_,logSoftmax:()=>x0,logSumExp:()=>Cp,logicalAnd:()=>No,logicalNot:()=>Sp,logicalOr:()=>_0,logicalXor:()=>F_,losses:()=>OX,lowerBound:()=>C6,matMul:()=>Vt,math:()=>w8,max:()=>vo,maxPool:()=>Mp,maxPool3d:()=>P_,maxPoolWithArgmax:()=>S6,maximum:()=>ji,mean:()=>Bn,memory:()=>ov,meshgrid:()=>M6,metrics:()=>wB,min:()=>Cu,minimum:()=>Ls,mirrorPad:()=>B_,mod:()=>L_,model:()=>JJ,models:()=>yB,moments:()=>ef,movingAverage:()=>$Z,mul:()=>L,multiRNNCell:()=>T6,multinomial:()=>D6,neg:()=>Xt,nextFrame:()=>wv,norm:()=>Su,notEqual:()=>Aa,oneHot:()=>Fl,ones:()=>Nr,onesLike:()=>co,op:()=>E,outerProduct:()=>E6,pad:()=>Si,pad1d:()=>I6,pad2d:()=>N6,pad3d:()=>A6,pad4d:()=>R6,pool:()=>$_,pow:()=>Yo,prelu:()=>Dp,print:()=>Jx,prod:()=>V_,profile:()=>Mbe,raggedGather:()=>O6,raggedRange:()=>F6,raggedTensorToTensor:()=>P6,rand:()=>B6,randomGamma:()=>K6,randomNormal:()=>tf,randomStandardNormal:()=>Z6,randomUniform:()=>ls,randomUniformInt:()=>X6,range:()=>Pl,ready:()=>Dbe,real:()=>Tu,reciprocal:()=>z_,registerBackend:()=>Xx,registerCallbackConstructor:()=>tee,registerGradient:()=>VF,registerKernel:()=>Q1,registerOp:()=>xee,regularizers:()=>xB,relu:()=>Ao,relu6:()=>C0,removeBackend:()=>Ebe,reshape:()=>$,reverse:()=>Qr,reverse1d:()=>Y6,reverse2d:()=>Q6,reverse3d:()=>J6,reverse4d:()=>e8,rfft:()=>Np,round:()=>S0,rsqrt:()=>M0,scalar:()=>Ue,scatterND:()=>VZ,scatter_util:()=>q_,searchSorted:()=>pv,selu:()=>T0,separableConv2d:()=>D0,sequential:()=>eee,serialization:()=>ve,setBackend:()=>BK,setPlatform:()=>Abe,setWebGLContext:()=>_E,setdiff1dAsync:()=>t8,shared:()=>Pk,sigmoid:()=>ui,sign:()=>H_,signal:()=>RX,sin:()=>E0,sinh:()=>I0,slice:()=>Ft,slice1d:()=>N0,slice2d:()=>hv,slice3d:()=>A0,slice4d:()=>nf,slice_util:()=>yo,softmax:()=>Ep,softplus:()=>Na,spaceToBatchND:()=>Tp,sparse:()=>FX,sparseToDense:()=>zZ,spectral:()=>AX,split:()=>Jr,sqrt:()=>In,square:()=>Gt,squaredDifference:()=>O0,squeeze:()=>cs,stack:()=>Qn,step:()=>aa,stridedSlice:()=>U_,string:()=>PX,sub:()=>Be,sum:()=>Ge,sumOutType:()=>Kh,tan:()=>G_,tanh:()=>Ea,tensor:()=>Yr,tensor1d:()=>Jn,tensor2d:()=>Ra,tensor3d:()=>W_,tensor4d:()=>n8,tensor5d:()=>r8,tensor6d:()=>o8,tensorScatterUpdate:()=>s8,tensor_util:()=>na,test_util:()=>q6,tidy:()=>ne,tile:()=>Io,time:()=>Tbe,topk:()=>K_,train:()=>uf,transpose:()=>jt,truncatedNormal:()=>F0,unique:()=>Z_,unregisterGradient:()=>Yke,unregisterKernel:()=>Xke,unsortedSegmentSum:()=>P0,unstack:()=>eo,upcastType:()=>Ur,upperBound:()=>a8,util:()=>x,valueAndGrad:()=>vZ,valueAndGrads:()=>wZ,variable:()=>X_,variableGrads:()=>R_,version:()=>G7e,version_converter:()=>AD,version_core:()=>pT,version_cpu:()=>mE,version_layers:()=>mf,version_webgl:()=>XE,webgl:()=>R8e,webgl_util:()=>r2,where:()=>An,whereAsync:()=>Y_,zeros:()=>Ln,zerosLike:()=>pt});var Nh=class{constructor(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)}set(n,e){this.dataIdsCount++,this.data.set(n,e)}has(n){return this.data.has(n)}delete(n){return this.dataIdsCount--,this.data.delete(n)}numDataIds(){return this.dataIdsCount}},Sc=class{refCount(n){return Fs("refCount")}incRef(n){return Fs("incRef")}timerAvailable(){return!0}time(n){return Fs("time")}read(n){return Fs("read")}readSync(n){return Fs("readSync")}readToGPU(n,e){return Fs("readToGPU")}numDataIds(){return Fs("numDataIds")}disposeData(n,e){return Fs("disposeData")}write(n,e,r){return Fs("write")}move(n,e,r,o,i){return Fs("move")}createTensorFromGPUData(n,e,r){return Fs("createTensorFromGPUData")}memory(){return Fs("memory")}floatPrecision(){return Fs("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Fs("dispose")}};function Fs(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function eK(t){let n=t.length,e=0;for(;n>0;)e=Math.random()*n|0,n--,bM(t,n,e)}function bke(t,n){if(t.length!==n.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${n.length}`);let e=t.length,r=0;for(;e>0;)r=Math.random()*e|0,e--,bM(t,e,r),bM(n,e,r)}function z1(t,n,e){return Math.max(t,Math.min(n,e))}function Cke(t){return t%2===0?t:t+1}function bM(t,n,e){let r=t[n];t[n]=t[e],t[e]=r}function Ske(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}function Mke(t,n){let e=Math.random();return n*e+(1-e)*t}function Tke(t,n){let e=0;for(let r=0;r<t.length;r++){let o=Number(t[r])-Number(n[r]);e+=o*o}return e}function F(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function rr(t,n,e=""){F(Pi(t,n),()=>e+` Shapes ${t} and ${n} must match`)}function ta(t){F(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function rn(t){if(t.length===0)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function Dke(t){return t.length===0}function IF(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==null&&n[e]!==null&&t[e]!==n[e])return!1;return!0}function Pi(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function yd(t){return t%1===0}function Eke(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let n=Math.exp(2*t);return(n-1)/(n+1)}}function Ike(t){let n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function Nke(t){let n=new Uint32Array(t);for(let e=0;e<t;++e)n[e]=e;return eK(n),n}function Xm(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function Ake(t,n=o=>0,e,r){return new Promise((o,i)=>{let s=0,a=()=>{if(t()){o();return}s++;let l=n(s);if(e!=null&&s>=e){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function Rke(t,n){let e=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(n>0&&n!==e)throw Error(`Size(${n}) must match the product of shape ${t}`);return t}if(e===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(n%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${n} / ${e}`);let o=t.slice();return o[r]=n/e,o}function lo(t,n){let e=n.length;return t=t==null?n.map((r,o)=>o):[].concat(t),F(t.every(r=>r>=-e&&r<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${t}`),F(t.every(r=>yd(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?e+r:r)}function NF(t,n){let e=[],r=[],o=n!=null&&Array.isArray(n)&&n.length===0,i=n==null||o?null:lo(n,t).sort(),s=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[s]==null||i[s]>a)&&t[a]===1&&(e.push(t[a]),r.push(a)),i[s]<=a&&s++}t[a]!==1&&(e.push(t[a]),r.push(a))}return{newShape:e,keptDims:r}}function AF(t,n){return CM(t,n)}function CM(t,n){let e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else if(t==="string")e=new Array(n);else throw new Error(`Unknown data type ${t}`);return e}function RF(t,n){for(let e=0;e<t.length;e++){let r=t[e];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${n} being uploaded contains ${r}.`)}}function OF(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function Oke(t,n){return!(n==="complex64"||n==="float32"&&t!=="complex64"||n==="int32"&&t!=="float32"&&t!=="complex64"||n==="bool"&&t==="bool")}function H1(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function FF(t){if(t==null)return 0;let n=0;return t.forEach(e=>n+=e.length),n}function yl(t){return typeof t=="string"||t instanceof String}function tK(t){return typeof t=="boolean"}function nK(t){return typeof t=="number"}function Ah(t){return Array.isArray(t)?Ah(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":nK(t)?"float32":yl(t)?"string":tK(t)?"bool":"float32"}function Mc(t){return!!(t&&t.constructor&&t.call&&t.apply)}function U1(t,n){for(let e=n;e<t;++e)if(t%e===0)return e;return t}function Tc(t){let n=t.length;if(n<2)return[];let e=new Array(n-1);e[n-2]=t[n-1];for(let r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function rK(t,n,e,r=!1){let o=new Array;if(n.length===1){let i=n[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=e[t+s]}else{let i=n[0],s=n.slice(1),a=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)o[l]=rK(t+l*a,s,e,r)}return o}function Zm(t,n,e=!1){if(t.length===0)return n[0];let r=t.reduce((o,i)=>o*i)*(e?2:1);if(r===0)return[];if(r!==n.length)throw new Error(`[${t}] does not match the input size ${n.length}${e?" for a complex tensor":""}.`);return rK(0,t,n,e)}function Fke(t,n){if(Array.isArray(t))return t;if(n==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(n==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(n==="bool"||n==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${n}`)}function jx(t,n){let e=G1(t,n);for(let r=0;r<e.length;r++)e[r]=1;return e}function G1(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${n}`)}function Pke(t,n){let e=t.reduce((r,o)=>r*o,1);if(n==null||n==="float32")return Zm(t,new Float32Array(e));if(n==="int32")return Zm(t,new Int32Array(e));if(n==="bool")return Zm(t,new Uint8Array(e));throw new Error(`Unknown data type ${n}`)}function hr(t){t.forEach(n=>{F(Number.isInteger(n)&&n>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Bke(t,n,e){if(n===0)return 0;if(n===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=e[o]*t[o];return r}function Lke(t,n,e){if(n===0)return[];if(n===1)return[t];let r=new Array(n);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/e[o]),t-=r[o]*e[o];return r[r.length-1]=t,r}function Ym(t){return t&&t.then&&typeof t.then=="function"}var oK="tfjsflags",W1=class{constructor(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Vke,this.populateURLFlags()}setPlatform(n,e){this.platform!=null&&(ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=n,this.platform=e}registerFlag(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){let o=this.urlFlags[n];ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(`Setting feature override from URL ${n}: ${o}.`),this.set(n,o)}}getAsync(n){return z(this,null,function*(){return n in this.flags?this.flags[n]:(this.flags[n]=yield this.evaluateFlag(n),this.flags[n])})}get(n){if(n in this.flags)return this.flags[n];let e=this.evaluateFlag(n);if(Ym(e))throw new Error(`Flag ${n} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[n]=e,this.flags[n]}getNumber(n){return this.get(n)}getBool(n){return this.get(n)}getString(n){return this.get(n)}getFlags(){return this.flags}get features(){return this.flags}set(n,e){if(this.flagRegistry[n]==null)throw new Error(`Cannot set flag ${n} as it has not been registered.`);this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)}evaluateFlag(n){if(this.flagRegistry[n]==null)throw new Error(`Cannot evaluate flag '${n}': no evaluation function found.`);return this.flagRegistry[n].evaluationFn()}setFlags(n){this.flags=Object.assign({},n)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let n=this.getQueryParams(this.global.location.search);oK in n&&n[oK].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=zke(o,i)})}};function Vke(t){let n={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...r)=>(jke(n,r[0],r[1]),r.join("="))),n}function jke(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function zke(t,n){let e=n.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:n}function ee(){return SM}var SM=null;function iK(t){SM=t}var PF;function BF(){if(PF==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");PF=t}return PF}function Hke(){let t=BF();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function zx(t,n){let e=Hke();if(e.has(t))return e.get(t);{let r=n();return e.set(t,r),e.get(t)}}var xd="Abs",Dc="Acos",Ec="Acosh",Sa="Add",_d="AddN",Qm="All",Jm="Any",kd="ArgMax",bd="ArgMin",Ic="Asin",Nc="Asinh",Ac="Atan",Rc="Atanh",Oc="Atan2",Cd="AvgPool",eg="AvgPoolGrad",Sd="AvgPool3D",tg="AvgPool3DGrad",Md="BatchMatMul",Td="BatchToSpaceND",ng="Bincount",Rh="BitwiseAnd",LF="BroadcastTo",rg="BroadcastArgs",xl="Cast",Fc="Ceil",Pc="ClipByValue",og="Complex",Dd="ComplexAbs",Ed="Concat",Id="Conv2D",ig="Conv2DBackpropFilter",Nd="Conv2DBackpropInput",Ad="Conv3D",sg="Conv3DBackpropFilterV2",ag="Conv3DBackpropInputV2",Bc="Cos",Lc="Cosh",lg="Cumprod",Rd="Cumsum",cg="CropAndResize",ug="DenseBincount",dg="DepthToSpace",Od="DepthwiseConv2dNative",pg="DepthwiseConv2dNativeBackpropFilter",hg="DepthwiseConv2dNativeBackpropInput",fg="Diag",Fd="Dilation2D",q1="Dilation2DBackpropInput",K1="Dilation2DBackpropFilter",Z1="Draw",$c="RealDiv",mg="Einsum",Vc="Elu",gg="EluGrad",jc="Erf",Oh="Equal",zc="Exp",Pd="ExpandDims",Hc="Expm1",vg="FFT",wg="Fill",yg="FlipLeftRight",Uc="Floor",Gc="FloorDiv",Bd="FusedBatchNorm",Ld="GatherV2",xg="GatherNd",Fh="Greater",Wc="GreaterEqual",_l="Identity",_g="IFFT",kg="Imag",qc="IsFinite",Kc="IsInf",Zc="IsNan",$d="LeakyRelu",Ph="Less",Bh="LessEqual",bg="LinSpace",Xc="Log",Yc="Log1p",Lh="LogicalAnd",$h="LogicalNot",Vh="LogicalOr",Uke="LogicalXor",$F="LogSoftmax",Gke="LowerBound",Vd="LRN",Cg="LRNGrad",Wke="MatrixBandPart",jd="Max",Qc="Maximum",zd="MaxPool",Sg="MaxPoolGrad",Hd="MaxPool3D",Mg="MaxPool3DGrad",Tg="MaxPoolWithArgmax",Ud="Mean",Gd="Min",Jc="Minimum",Wd="MirrorPad",eu="Mod",Dg="Multinomial",tu="Multiply",qd="Neg",jh="NotEqual",Eg="NonMaxSuppressionV3",Ig="NonMaxSuppressionV4",Ng="NonMaxSuppressionV5",Kd="OnesLike",Zd="OneHot",Xd="Pack",Yd="PadV2",qke="Pool",nu="Pow",Qd="Prelu",Jd="Prod",Ag="RaggedGather",Rg="RaggedRange",Og="RaggedTensorToTensor",Fg="Range",Pg="Real",ru="Reciprocal",ou="Relu",ep="Reshape",tp="ResizeNearestNeighbor",Bg="ResizeNearestNeighborGrad",np="ResizeBilinear",Lg="ResizeBilinearGrad",iu="Relu6",rp="Reverse",su="Round",au="Rsqrt",$g="ScatterNd",Vg="TensorScatterUpdate",jg="SearchSorted",op="Select",lu="Selu",ip="Slice",cu="Sin",uu="Sinh",du="Sign",pu="Sigmoid",hu="Softplus",fu="Sqrt",sp="Sum",ap="SpaceToBatchND",lp="SplitV",cp="Softmax",zg="SparseFillEmptyRows",Hg="SparseReshape",Ug="SparseSegmentMean",Gg="SparseSegmentSum",Wg="SparseToDense",mu="SquaredDifference",qg="Square",zh="StaticRegexReplace",Kg="StridedSlice",Zg="StringNGrams",Xg="StringSplit",Yg="StringToHashBucketFast",gu="Sub",vu="Tan",wu="Tanh",kl="Tile",Qg="TopK",Jg="Transform",bl="Transpose",e0="Unique",up="Unpack",dp="UnsortedSegmentSum",Kke="UpperBound",pp="ZerosLike",yu="Step",X1="FromPixels",t0="RotateWithOffset",Hh="_FusedMatMul",Uh="FusedConv2D",Gh="FusedDepthwiseConv2D";function xu(...t){ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(...t)}function Zke(...t){ee().getBool("IS_TEST")||ee().getBool("PROD")||console.log(...t)}var Y1=zx("kernelRegistry",()=>new Map),Hx=zx("gradRegistry",()=>new Map);function n0(t,n){let e=jF(t,n);return Y1.get(e)}function MM(t){return Hx.get(t)}function Ux(t){let n=Y1.entries(),e=[];for(;;){let{done:r,value:o}=n.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===t&&e.push(s)}return e}function Q1(t){let{kernelName:n,backendName:e}=t,r=jF(n,e);Y1.has(r)&&xu(`The kernel '${n}' for backend '${e}' is already registered`),Y1.set(r,t)}function VF(t){let{kernelName:n}=t;Hx.has(n)&&ee().getBool("DEBUG")&&xu(`Overriding the gradient for '${n}'`),Hx.set(n,t)}function Xke(t,n){let e=jF(t,n);if(!Y1.has(e))throw new Error(`The kernel '${t}' for backend '${n}' is not registered`);Y1.delete(e)}function Yke(t){if(!Hx.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Hx.delete(t)}function Qke(t,n){Ux(t).forEach(r=>{let o=Object.assign({},r,{backendName:n});Q1(o)})}function jF(t,n){return`${n}_${t}`}var x={};Jt(x,{arraysEqual:()=>Pi,arraysEqualWithNull:()=>IF,assert:()=>F,assertNonNegativeIntegerDimensions:()=>hr,assertNonNull:()=>ta,assertShapesMatch:()=>rr,bytesFromStringArray:()=>FF,bytesPerElement:()=>H1,checkConversionForErrors:()=>RF,clamp:()=>z1,computeStrides:()=>Tc,convertBackendValuesAndArrayBuffer:()=>Fke,createScalarValue:()=>ibe,createShuffledIndices:()=>Nke,decodeString:()=>nv,distSquared:()=>Tke,encodeString:()=>qh,fetch:()=>abe,fingerPrint64:()=>obe,flatten:()=>Sl,getArrayFromDType:()=>CM,getTypedArrayFromDType:()=>AF,hasEncodingLoss:()=>Oke,hexToLong:()=>Gx,indexToLoc:()=>Lke,inferDtype:()=>Ah,inferFromImplicitShape:()=>Rke,isBoolean:()=>tK,isFunction:()=>Mc,isInt:()=>yd,isNumber:()=>nK,isPromise:()=>Ym,isScalarShape:()=>Dke,isString:()=>yl,isTypedArray:()=>Hr,isValidDtype:()=>OF,locToIndex:()=>Bke,makeOnesTypedArray:()=>jx,makeZerosNestedTypedArray:()=>Pke,makeZerosTypedArray:()=>G1,nearestDivisor:()=>U1,nearestLargerEven:()=>Cke,now:()=>a0,parseAxisParam:()=>lo,randUniform:()=>Mke,repeatedTry:()=>Ake,rightPad:()=>Xm,shuffle:()=>eK,shuffleCombo:()=>bke,sizeFromShape:()=>rn,sizeToSquarishShape:()=>Ike,squeezeShape:()=>NF,sum:()=>Ske,swap:()=>bM,tanh:()=>Eke,toNestedArray:()=>Zm,toTypedArray:()=>tv});function TM(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var GF=I2(vK());var s0=GF.default||GF;function Gx(t){return s0.fromString(t,!0,16)}var yK=Gx("c3a5c85c97cb3127"),i0=Gx("b492b66fbe98f273"),Bi=Gx("9ae16a3b2f90404f");function UF(t){return t.xor(t.shru(47))}function xK(t,n,e){let r=t.slice(n,n+e);return s0.fromBytes(Array.from(r),!0,!0)}function fr(t,n){return xK(t,n,8)}function wK(t,n){return xK(t,n,4)}function Zo(t,n){return n===0?t:t.shru(n).or(t.shl(64-n))}function Wh(t,n,e=Gx("9ddfea08eb382d69")){let r=t.xor(n).mul(e);r=r.xor(r.shru(47));let o=n.xor(r).mul(e);return o=o.xor(o.shru(47)),o=o.mul(e),o}function ebe(t,n,e,r,o,i){o=o.add(t),i=Zo(i.add(o).add(r),21);let s=o;return o=o.add(n),o=o.add(e),i=i.add(Zo(o,44)),[o.add(r),i.add(s)]}function EM(t,n,e,r){return ebe(fr(t,n),fr(t,n+8),fr(t,n+16),fr(t,n+24),e,r)}function tbe(t,n=t.length){if(n>=8){let e=Bi.add(n*2),r=fr(t,0).add(Bi),o=fr(t,n-8),i=Zo(o,37).mul(e).add(r),s=Zo(r,25).add(o).mul(e);return Wh(i,s,e)}if(n>=4){let e=Bi.add(n*2),r=wK(t,0);return Wh(r.shl(3).add(n),wK(t,n-4),e)}if(n>0){let e=t[0],r=t[n>>1],o=t[n-1],i=e+(r<<8),s=n+(o<<2);return UF(Bi.mul(i).xor(yK.mul(s))).mul(Bi)}return Bi}function nbe(t,n=t.length){let e=Bi.add(n*2),r=fr(t,0).mul(i0),o=fr(t,8),i=fr(t,n-8).mul(e),s=fr(t,n-16).mul(Bi);return Wh(Zo(r.add(o),43).add(Zo(i,30)).add(s),r.add(Zo(o.add(Bi),18)).add(i),e)}function rbe(t,n=t.length){let e=Bi.add(n*2),r=fr(t,0).mul(Bi),o=fr(t,8),i=fr(t,n-8).mul(e),s=fr(t,n-16).mul(Bi),a=Zo(r.add(o),43).add(Zo(i,30)).add(s),l=Wh(a,r.add(Zo(o.add(Bi),18)).add(i),e),c=fr(t,16).mul(e),u=fr(t,24),d=a.add(fr(t,n-32)).mul(e),p=l.add(fr(t,n-24)).mul(e);return Wh(Zo(c.add(u),43).add(Zo(d,30)).add(p),c.add(Zo(u.add(r),18)).add(d),e)}function obe(t,n=t.length){let e=s0.fromNumber(81,!0);if(n<=32)return n<=16?tbe(t,n):nbe(t,n);if(n<=64)return rbe(t,n);let r=e,o=e.mul(i0).add(113),i=UF(o.mul(Bi).add(113)).mul(Bi),s=[s0.UZERO,s0.UZERO],a=[s0.UZERO,s0.UZERO];r=r.mul(Bi).add(fr(t,0));let l=0,c=(n-1>>6)*64,u=c+(n-1&63)-63;do r=Zo(r.add(o).add(s[0]).add(fr(t,l+8)),37).mul(i0),o=Zo(o.add(s[1]).add(fr(t,l+48)),42).mul(i0),r=r.xor(a[1]),o=o.add(s[0]).add(fr(t,l+40)),i=Zo(i.add(a[0]),33).mul(i0),s=EM(t,l,s[1].mul(i0),r.add(a[0])),a=EM(t,l+32,i.add(a[1]),o.add(fr(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);let d=i0.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(n-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=Zo(r.add(o).add(s[0]).add(fr(t,l+8)),37).mul(d),o=Zo(o.add(s[1]).add(fr(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(fr(t,l+40))),i=Zo(i.add(a[0]),33).mul(d),s=EM(t,l,s[1].mul(d),r.add(a[0])),a=EM(t,l+32,i.add(a[1]),o.add(fr(t,l+16))),[i,r]=[r,i],Wh(Wh(s[0],a[0],d).add(UF(o).mul(yK)).add(i),Wh(s[1],a[1],d).add(r),d)}function ibe(t,n){return n==="string"?qh(t):tv([t],n)}function sbe(t,n){return t instanceof Float32Array&&n==="float32"||t instanceof Int32Array&&n==="int32"||t instanceof Uint8Array&&n==="bool"}function tv(t,n){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Sl(t)),ee().getBool("DEBUG")&&RF(t,n),sbe(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){let e=new Uint8Array(t.length);for(let r=0;r<e.length;++r)Math.round(t[r])!==0&&(e[r]=1);return e}else throw new Error(`Unknown data type ${n}`)}function a0(){return ee().platform.now()}function abe(t,n){return ee().platform.fetch(t,n)}function qh(t,n="utf-8"){return n=n||"utf-8",ee().platform.encode(t,n)}function nv(t,n="utf-8"){return n=n||"utf-8",ee().platform.decode(t,n)}function Hr(t){return ee().platform.isTypedArray!=null?ee().platform.isTypedArray(t):TM(t)}function Sl(t,n=[],e=!1){if(n==null&&(n=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Ym(t)||t==null||Hr(t)&&e)n.push(t);else if(Array.isArray(t)||Hr(t))for(let r=0;r<t.length;++r)Sl(t[r],n,e);else{let r=-1;for(let o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)Sl(t[o],n,e)}return n}var IM=class{constructor(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new WF)}profileKernel(n,e,r){let o,i=()=>{o=r()},s,a=a0();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:a0()-a})}if(ee().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let u=o[c];u.data().then(d=>{lbe(d,u.dtype,n)})}return{kernelName:n,outputs:o,inputs:e,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(n){let{kernelName:e,outputs:r,timeMs:o,inputs:i,extraInfo:s}=n;r.forEach(a=>{Promise.all([a.data(),o,s]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],i,l[2])})})}};function lbe(t,n,e){if(n!=="float32")return!1;for(let r=0;r<t.length;r++){let o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${e}'`),!0}return!1}var WF=class{logKernelProfile(n,e,r,o,i,s){let a=typeof o=="number"?Xm(`${o}ms`,9):o.error,l=Xm(n,25),c=e.rank,u=e.size,d=Xm(e.shape.toString(),14),p="";for(let h in i){let f=i[h];if(f!=null){let m=f.shape||e.shape,g=m.length;p+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function _K(t,n,e){let r={},o={};for(let l=0;l<n.length;l++)r[n[l].id]=!0;for(let l=0;l<t.length;l++){let c=t[l],u=c.inputs;for(let d in u){let p=u[d],h=!1;for(let f=0;f<n.length;f++)if(r[p.id]){c.outputs.forEach(m=>r[m.id]=!0),h=!0,o[c.id]=!0;break}if(h)break}}let i={};i[e.id]=!0;let s={};for(let l=t.length-1;l>=0;l--){let c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(let p in u)i[u[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let l=0;l<t.length;l++){let c=t[l];if(o[c.id]&&s[c.id]){let u={};for(let p in c.inputs){let h=c.inputs[p];r[h.id]&&(u[p]=h)}let d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function kK(t,n,e,r){for(let o=n.length-1;o>=0;o--){let i=n[o],s=[];if(i.outputs.forEach(l=>{let c=t[l.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=e(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=i.inputs[l];if(!Pi(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{let d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}var bK=20,Wx=3,qF=7;function CK(t,n,e,r){let o=Tc(n),i=cbe(t,n,e,o),s=n.length,a=NM(t,n,e,o,i),l=["Tensor"];return r&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${s}`),l.push(`  shape: [${n}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function cbe(t,n,e,r){let o=rn(n),i=r[r.length-1],s=new Array(i).fill(0),a=n.length,l=e==="complex64"?Kx(t):t;if(a>1)for(let c=0;c<o/i;c++){let u=c*i;for(let d=0;d<i;d++)s[d]=Math.max(s[d],qx(l[u+d],0,e).length)}return s}function qx(t,n,e){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(qF))} + ${parseFloat(t[1].toFixed(qF))}j`:yl(t)?r=`'${t}'`:e==="bool"?r=SK(t):r=parseFloat(t.toFixed(qF)).toString(),Xm(r,n)}function SK(t){return t===0?"false":"true"}function NM(t,n,e,r,o,i=!0){let s=e==="complex64"?2:1,a=n[0],l=n.length;if(l===0){if(e==="complex64"){let m=Kx(t);return[qx(m[0],0,e)]}return e==="bool"?[SK(t[0])]:[t[0].toString()]}if(l===1){if(a>bK){let g=Wx*s,v=Array.from(t.slice(0,g)),w=Array.from(t.slice((a-Wx)*s,a*s));return e==="complex64"&&(v=Kx(v),w=Kx(w)),["["+v.map((y,_)=>qx(y,o[_],e)).join(", ")+", ..., "+w.map((y,_)=>qx(y,o[a-Wx+_],e)).join(", ")+"]"]}return["["+(e==="complex64"?Kx(t):Array.from(t)).map((g,v)=>qx(g,o[v],e)).join(", ")+"]"]}let c=n.slice(1),u=r.slice(1),d=r[0]*s,p=[];if(a>bK){for(let m=0;m<Wx;m++){let g=m*d,v=g+d;p.push(...NM(t.slice(g,v),c,e,u,o,!1))}p.push("...");for(let m=a-Wx;m<a;m++){let g=m*d,v=g+d;p.push(...NM(t.slice(g,v),c,e,u,o,m===a-1))}}else for(let m=0;m<a;m++){let g=m*d,v=g+d;p.push(...NM(t.slice(g,v),c,e,u,o,m===a-1))}let h=l===2?",":"";p[0]="["+(a>0?p[0]+h:"");for(let m=1;m<p.length-1;m++)p[m]=" "+p[m]+h;let f=`,
`;for(let m=2;m<l;m++)f+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":f),p}function Kx(t){let n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var yn=class{constructor(n,e,r){if(this.dtype=e,this.shape=n.slice(),this.size=rn(n),r!=null){let o=r.length;F(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||CM(e,this.size),this.strides=Tc(n)}set(n,...e){e.length===0&&(e=[0]),F(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);let r=this.locToIndex(e);this.values[r]=n}get(...n){n.length===0&&(n=[0]);let e=0;for(let o of n){if(o<0||o>=this.shape[e]){let i=`Requested out of range element at ${n}.   Buffer shape=${this.shape}`;throw new Error(i)}e++}let r=n[n.length-1];for(let o=0;o<n.length-1;++o)r+=this.strides[o]*n[o];return this.values[r]}locToIndex(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];let e=n[n.length-1];for(let r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e}indexToLoc(n){if(this.rank===0)return[];if(this.rank===1)return[n];let e=new Array(this.shape.length);for(let r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e}get rank(){return this.shape.length}toTensor(){return Ml().makeTensor(this.values,this.shape,this.dtype)}},Ml=null,rv=null,ube=null;function MK(t){Ml=t}function TK(t){rv=t}function DK(t){ube=t}var Lt=class{constructor(n,e,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=rn(n),this.strides=Tc(n),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return z(this,null,function*(){let n=yield this.data();return rv.buffer(this.shape,this.dtype,n)})}bufferSync(){return rv.buffer(this.shape,this.dtype,this.dataSync())}array(){return z(this,null,function*(){let n=yield this.data();return Zm(this.shape,n,this.dtype==="complex64")})}arraySync(){return Zm(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return z(this,null,function*(){this.throwIfDisposed();let n=Ml().read(this.dataId);if(this.dtype==="string"){let e=yield n;try{return e.map(r=>nv(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return n})}dataToGPU(n){return this.throwIfDisposed(),Ml().readToGPU(this.dataId,n)}dataSync(){this.throwIfDisposed();let n=Ml().readSync(this.dataId);if(this.dtype==="string")try{return n.map(e=>nv(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n}bytes(){return z(this,null,function*(){this.throwIfDisposed();let n=yield Ml().read(this.dataId);return this.dtype==="string"?n:new Uint8Array(n.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ml().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(n=!1){return rv.print(this,n)}clone(){return this.throwIfDisposed(),rv.clone(this)}toString(n=!1){let e=this.dataSync();return CK(e,this.shape,this.dtype,n)}cast(n){return this.throwIfDisposed(),rv.cast(this,n)}variable(n=!0,e,r){return this.throwIfDisposed(),Ml().makeVariable(this,n,e,r)}};Object.defineProperty(Lt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function U(){return zx("Tensor",()=>Lt)}U();var _u=class extends Lt{constructor(n,e,r,o){super(n.shape,n.dtype,n.dataId,o),this.trainable=e,this.name=r}assign(n){if(n.dtype!==this.dtype)throw new Error(`dtype of the new value (${n.dtype}) and previous value (${this.dtype}) must match`);if(!Pi(n.shape,this.shape))throw new Error(`shape of the new value (${n.shape}) and previous value (${this.shape}) must match`);Ml().disposeTensor(this),this.dataId=n.dataId,Ml().incRef(this,null)}dispose(){Ml().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(_u,Symbol.hasInstance,{value:t=>t instanceof Lt&&t.assign!=null&&t.assign instanceof Function});var na={};Jt(na,{assertTypesMatch:()=>ZF,getTensorsInContainer:()=>Zx,isTensorInList:()=>pbe,makeTypesMatch:()=>on});var KF=function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t}(KF||{}),EK=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(EK||{}),IK=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(IK||{}),NK=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(NK||{}),AK=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(AK||{}),dbe={float32:NK,int32:EK,bool:IK,complex64:AK};function Ur(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error(`Can not upcast ${t} with ${n}`)}return dbe[t][n]}function Kh(t){return Ur(t,"int32")}function AM(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function RM(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function on(t,n){if(t.dtype===n.dtype)return[t,n];let e=Ur(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function ZF(t,n){F(t.dtype===n.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${n.dtype}) input must match`)}function pbe(t,n){return n.some(e=>e.id===t.id)}function Zx(t){let n=[];return RK(t,n,new Set),n}function RK(t,n,e){if(t==null)return;if(t instanceof Lt){n.push(t);return}if(!hbe(t))return;let r=t;for(let o in r){let i=r[o];e.has(i)||(e.add(i),RK(i,n,e))}}function hbe(t){return Array.isArray(t)||typeof t=="object"}function XF(t){return t.kernelName!=null}var OM=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(n=>n.name)))}}}dispose(){for(let n in this.registeredVariables)this.registeredVariables[n].dispose()}},fbe=(()=>{class t{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new OM}ready(){return z(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let o=e[r];if(yield this.initializeBackend(o).success){yield this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:r}=this.initializeBackend(e);if(r)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,r,o=1){return e in this.registryFactory?(xu(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:r,priority:o},!0)}setBackend(e){return z(this,null,function*(){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(e);if(!(o?yield r:r))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new IM(this.backendInstance),!0})}setupRegisteredKernels(){Ux(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Ux(e).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[e])})}initializeBackend(e){let r=this.registryFactory[e];if(r==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof Sc)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,xu(`Initialization of backend ${e} failed`),xu(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(o){return xu(`Initialization of backend ${e} failed`),xu(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,r)=>this.registryFactory[r].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let o=e[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=e,e.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,r){let o=null;if(r==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");r=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,r,o){e();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(e){let r=R.runKernel(_l,{x:e}),o={x:e},i=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return R.runKernel(xl,c,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(e,r,o){if(this.backendName==null&&this.backend,!(n0(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=i-r-s-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=XF(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(XF(e)){let{kernelName:m,inputs:g,attrs:v}=e;this.backendName==null&&this.backend;let w=n0(m,this.backendName);F(w!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),l=()=>{let y=this.backend.numDataIds();c=w.kernelFunc({inputs:g,attrs:v,backend:this.backend});let _=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,y,_);let k=_.map(T=>T.rank!=null?T:this.makeTensorFromTensorInfo(T));if(i){let T=this.getTensorsForGradient(m,g,k);o=this.saveTensorsForBackwardMode(T)}return k}}else{let{forwardFunc:m}=e,g=v=>{i&&(o=v.map(w=>this.keep(this.clone(w))))};l=()=>{let v=this.backend.numDataIds();c=this.tidy(()=>m(this.backend,g));let w=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,w),w}}let{inputs:d,attrs:p}=e,h=XF(e)?null:e.backwardsFunc,f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=l():(f=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),r=f.outputs)}),i&&this.addTapeNode(u,d,r,h,o,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(m=>d[m]!=null?d[m].shape:null),outputShapes:r.map(m=>m.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(e){return e.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(e,r,o){let i=MM(e);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],l;i.saveAllInputs?(F(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(r).map(u=>r[u])):l=s.map(u=>r[u]);let c=o.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,r,o,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=e;o==="string"&&yl(e[0])&&(s=e.map(c=>qh(c)));let a=i.write(s,r,o),l=new Lt(r,o,a,this.nextTensorId());if(this.trackTensor(l,i),o==="string"){let c=this.state.tensorInfo.get(a),u=FF(s);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,r,o,i){o=o||"float32";let s={dataId:e,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,r){let{dataId:o,shape:i,dtype:s}=e,a=new Lt(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));let s=new _u(e,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,r){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*H1(e.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:r||this.backend,dtype:e.dtype,shape:e.shape,bytes:o})),e instanceof _u||this.track(e)}incRef(e,r){this.trackTensor(e,r),this.backend.incRef(e.dataId)}removeDataId(e,r){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===r&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let r=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let o=e.size*H1(e.dtype);this.state.numBytes-=o}r.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,r.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let r=this.state.registeredVariables[e];this.disposeVariable(r)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){return z(this,null,function*(){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=yield i.kernelTimeMs,i.extraInfo=yield i.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,r,o,i,s,a){let l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:r,outputs:o,saved:s},c=MM(e);c!=null&&(i=c.gradFunc),i!=null&&(l.gradient=u=>(u=u.map((d,p)=>{if(d==null){let h=o[p],f=G1(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return d}),i(u.length>1?u:u[0],s,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(r.name=e),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(e){let r=Zx(e),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,r,o,i=!1){if(F(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));F(s instanceof Lt,()=>"The result y returned by f() must be a tensor.");let a=_K(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[s.id]=o??mbe(s.shape),kK(l,a,u=>this.tidy(u),gbe);let c=r.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let d of u.saved)d.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(e){return F(Mc(e),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{F(r.every(l=>l instanceof Lt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((l,c)=>{i[c]=l});let s=(l,c)=>(o=e(...r,c),F(o.value instanceof Lt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),F(Mc(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(l,c)=>{let u=o.gradFunc(l,c),d=Array.isArray(u)?u:[u];F(d.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),F(d.every(h=>h instanceof Lt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((h,f)=>{p[f]=()=>h}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,r){return this.state.tensorInfo.get(e).backend.readToGPU(e,r)}time(e){return z(this,null,function*(){let r=a0(),o=yield this.backend.time(e);return o.wallMs=a0()-r,o})}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new OM;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function mbe(t){let n=jx(rn(t),"float32");return R.makeTensor(n,t,"float32")}function YF(){let t=BF();if(t._tfengine==null){let n=new W1(t);t._tfengine=new fbe(n)}return iK(t._tfengine.ENV),MK(()=>t._tfengine),t._tfengine}var R=YF();function gbe(t,n){let e={a:t,b:n};return R.runKernel(Sa,e)}var hp={};Jt(hp,{isBrowser:()=>JF,isMobile:()=>ybe,mockIsMobile:()=>wbe});function vbe(){return typeof navigator<"u"&&navigator!=null}var QF;function wbe(t){QF=t}function ybe(t){if(QF!==void 0)return QF;if(t||vbe()){if(t||(t=navigator),t.product==="ReactNative")return!0;let n=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!n){let e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))}return!1}function JF(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var is=ee();is.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});is.registerFlag("IS_BROWSER",()=>JF());is.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");is.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));is.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));is.registerFlag("PROD",()=>!1);is.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>is.getBool("DEBUG"));is.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);is.registerFlag("IS_TEST",()=>!1);is.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>is.getBool("DEBUG"));is.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);is.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);is.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function li(t,n){let e=t;if(Hr(t))return n==="string"?[]:[t.length];if(AM(t)){let o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(RM(t))return[t.buffer.size/(n==null?4:H1(n))];if(!Array.isArray(t))return[];let r=[];for(;Array.isArray(e)||Hr(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&ee().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&FK(t,r,[]),r}function FK(t,n,e){if(e=e||[],!Array.isArray(t)&&!Hr(t)){F(n.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);return}F(n.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${t.length} elements`),F(t.length===n[0],()=>`Element arr[${e.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);let r=n.slice(1);for(let o=0;o<t.length;++o)FK(t[o],r,e.concat(o))}function OK(t,n,e,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==n||t==="numeric"&&n==="string")throw new Error(`Argument '${e}' passed to '${r}' must be ${t} tensor, but got ${n} tensor`)}}function b(t,n,e,r="numeric"){if(t instanceof U())return OK(r,t.dtype,n,e),t;let o=Ah(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),OK(r,o,n,e),t==null||!Hr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let l=t==null?"null":t.constructor.name;throw new Error(`Argument '${n}' passed to '${e}' must be a Tensor or TensorLike, but got '${l}'`)}let i=li(t,o);!Hr(t)&&!Array.isArray(t)&&(t=[t]);let a=o!=="string"?tv(t,o):Sl(t,[],!0);return R.makeTensor(a,i,o)}function fp(t,n,e,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${n} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>b(i,`${n}[${s}]`,e,r))}var FM="__op";function E(t){let n=Object.keys(t);if(n.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${n.length} keys.`);let e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+FM;let o=(...i)=>{R.startScope(e);try{let s=r(...i);return Ym(s)&&console.error("Cannot return a Promise inside of tidy."),R.endScope(s),s}catch(s){throw R.endScope(null),s}};return Object.defineProperty(o,"name",{value:e,configurable:!0}),o}function xbe(t,n){let e=b(t,"real","complex"),r=b(n,"imag","complex");rr(e.shape,r.shape,`real and imag shapes, ${e.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:e,imag:r};return R.runKernel(og,o)}var Li=E({complex_:xbe});function $i(t,n,e,r){if(r==null)r=Ah(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(RM(t)||AM(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return R.backend.createTensorFromGPUData(t,n||e,r)}if(!Hr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){hr(n);let o=rn(n),i=rn(e);F(o===i,()=>`Based on the provided shape, [${n}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<e.length;++s){let a=e[s],l=s===e.length-1?a!==rn(n.slice(s)):!0;F(e[s]===n[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${n}). `)}}return!Hr(t)&&!Array.isArray(t)&&(t=[t]),n=n||e,t=r!=="string"?tv(t,r):Sl(t,[],!0),R.makeTensor(t,n,r)}function Yr(t,n,e){let r=li(t,e);return $i(t,n,r,e)}var mp={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var ci=class t{static join(n){return new t(n).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,n==null||(n instanceof Array||(n=[n]),n=n.map(r=>Hr(r)?r.buffer:r),n.length===0))return;this.bufferUniformSize=n[0].byteLength;let e=0;for(let r=0;r<n.length;r++){let o=n[r];r!==n.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=e+o.byteLength;this.shards.push({buffer:o,start:e,end:i}),e=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(n=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(n=isNaN(Number(n))?0:n,e=isNaN(Number(e))?0:e,n=Math.max(0,n),e=Math.min(this.byteLength,e),e<=n)return new ArrayBuffer(0);let r=this.findShardForByte(n);if(r===-1)throw new Error(`Could not find start shard for byte ${n}`);let o=e-n,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let l=r;l<this.shards.length;l++){let c=this.shards[l],d=n+a-c.start,p=a,f=Math.min(e,c.end)-c.start,m=new Uint8Array(c.buffer,d,f-d);if(s.set(m,p),a+=m.length,e<c.end)break}return i}findShardForByte(n){if(this.shards.length===0||n<0||n>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(n/this.bufferUniformSize),this.previousShardIndex;function e(o){return n<o.start?-1:n>=o.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=_be(this.shards,e);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function _be(t,n){let e=0,r=t.length;for(;e<=r;){let o=Math.floor((r-e)/2)+e,i=n(t[o]);if(i===0)return o;i<0?r=o:e=o+1}return-1}function kbe(){ee().set("PROD",!0)}function bbe(){ee().set("DEBUG",!0)}function Cbe(){ee().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function PK(t){ee().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}DK(PK);function Sbe(){R.disposeVariables()}function ra(){return R}function ov(){return R.memory()}function Mbe(t){return R.profile(t)}function ne(t,n){return R.tidy(t,n)}function gt(t){Zx(t).forEach(e=>e.dispose())}function qn(t){return R.keep(t)}function Tbe(t){return R.time(t)}function BK(t){return R.setBackend(t)}function Dbe(){return R.ready()}function e6(){return R.backendName}function Ebe(t){R.removeBackend(t)}function Ibe(t){return R.findBackend(t)}function Nbe(t){return R.findBackendFactory(t)}function Xx(t,n,e=1){return R.registerBackend(t,n,e)}function Yx(){return R.backend}function Abe(t,n){ee().setPlatform(t,n)}var Zh=4;function VK(t,n){return z(this,null,function*(){let e=[],r=[],o=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<o.length;++s){let a=o[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(d=>z(this,null,function*(){let p=yield l.bytes(),h=p.reduce((g,v)=>g+v.length,0)+Zh*p.length,f=new Uint8Array(h),m=0;for(let g=0;g<p.length;g++){let v=p[g],w=new Uint8Array(new Uint32Array([v.length]).buffer);f.set(w,m),m+=Zh,f.set(v,m),m+=v.length}d(f)}));r.push(u)}else r.push(l.data());n!=null&&(c.group=n),e.push(c)}let i=yield Promise.all(r);return{data:Fbe(i),specs:e}})}function PM(t,n){let e=new ci(t),r={},o=0;for(let i of n){let s=Rbe(i,(a,l)=>e.slice(o+a,o+l));r[i.name]=jK(i,e.slice(o,o+s)),o+=s}return r}function Rbe(t,n){let e=rn(t.shape),r;if("quantization"in t){let o=t.quantization;r=mp[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<e;i++)o+=Zh+new Uint32Array(n(o,o+Zh))[0];return o}else r=mp[t.dtype];return e*r}function Obe(t,n){return z(this,null,function*(){let e=rn(t.shape),r;if("quantization"in t){let o=t.quantization;r=mp[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<e;i++)o+=Zh+new Uint32Array(yield n(o,o+Zh))[0];return o}else r=mp[t.dtype];return e*r})}function jK(t,n){let e=t.name,r=t.dtype,o=t.shape,i=rn(o),s,a=0;if("quantization"in t){let l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=mp[l.dtype],u=l.dtype==="uint8"?new Uint8Array(n):new Uint16Array(n);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=p*l.scale+l.min}}else if(l.dtype==="float16")s=$be()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${e}': ${r}`);a+=i*c}else if(r==="string"){let l=rn(t.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(n.slice(a,a+Zh))[0];a+=Zh;let d=new Uint8Array(n.slice(a,a+u));s.push(d),a+=u}}else{let l=mp[r];if(r==="float32")s=new Float32Array(n);else if(r==="int32")s=new Int32Array(n);else if(r==="bool")s=new Uint8Array(n);else if(r==="complex64"){s=new Float32Array(n);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let f=0;f<c.length;f++)c[f]=s[f*2],u[f]=s[f*2+1];let d=Yr(c,o,"float32"),p=Yr(u,o,"float32"),h=Li(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${e}': ${r}`);a+=i*l}return Yr(s,o,r)}function LK(t,n,e){return z(this,null,function*(){let r=new Uint8Array(n);for(;r.byteLength<e;){let{done:o,value:i}=yield t.read();if(o&&i==null){let a=e-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer})}function BM(t,n){return z(this,null,function*(){let e={},r=t.getReader(),o=new ArrayBuffer(0);for(let i of n){let s=yield Obe(i,(c,u)=>z(this,null,function*(){return o=yield LK(r,o,u),o.slice(c,u)}));o=yield LK(r,o,s);let a=o.slice(0,s);o=o.slice(s);let l=jK(i,a);if(e[i.name]=l,e6()==="webgpu"){let c=Yx();"uploadToGPU"in c&&rn(l.shape)>=ee().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return e})}function Fbe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let n=0,e=[];t.forEach(i=>{if(n+=i.byteLength,e.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(n),o=0;return e.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var t6=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function $K(t){return t6?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function zK(t){if(t6)return Buffer.from(t).toString("base64");let n=new Uint8Array(t),e="";for(let r=0,o=n.length;r<o;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function HK(t){if(t6){let r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let n=atob(t),e=new Uint8Array(n.length);for(let r=0;r<n.length;++r)e.set([n.charCodeAt(r)],r);return e.buffer}function UK(t){return ci.join(t)}function n6(t){let n="/";for(t=t.trim();t.endsWith(n);)t=t.slice(0,t.length-1);let e=t.split(n);return e[e.length-1]}function LM(t,n){let e={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};return t.signature!=null&&(e.signature=t.signature),t.userDefinedMetadata!=null&&(e.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(e.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(e.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(e.trainingConfig=t.trainingConfig),e}function r6(t,n,e){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!n)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=n,r.weightData=e}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}function iv(t,n){return z(this,null,function*(){let e,r;return t.weightsManifest!=null&&([e,r]=yield n(t.weightsManifest)),r6(t,e,r)})}function ku(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:$K(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:$K(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new ci(t.weightData).byteLength}}function Qx(t){let n=[];for(let e of t)n.push(...e.weights);return n}function Pbe(){let t=e=>{let r=e<<13,o=0;for(;(r&8388608)===0;)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},n=new Uint32Array(2048);n[0]=0;for(let e=1;e<1024;e++)n[e]=t(e);for(let e=1024;e<2048;e++)n[e]=939524096+(e-1024<<13);return n}function Bbe(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let n=1;n<31;n++)t[n]=n<<23;for(let n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}function Lbe(){let t=new Uint32Array(64);for(let n=0;n<64;n++)t[n]=1024;return t[0]=t[32]=0,t}function $be(){let t=Pbe(),n=Bbe(),e=Lbe();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],l=t[e[a>>10]+(a&1023)]+n[a>>10];i[s]=l}return new Float32Array(o)}}var Do=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(n){t.getInstance().saveRouters.push(n)}static registerLoadRouter(n){t.getInstance().loadRouters.push(n)}static getSaveHandlers(n){return t.getHandlers(n,"save")}static getLoadHandlers(n,e){return t.getHandlers(n,"load",e)}static getHandlers(n,e,r){let o=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(s=>{let a=s(n,r);a!==null&&o.push(a)}),o}},GK=t=>Do.registerSaveRouter(t),WK=t=>Do.registerLoadRouter(t),qK=t=>Do.getSaveHandlers(t),KK=(t,n)=>Do.getLoadHandlers(t,n);var o6="tensorflowjs",i6=1,l0="models_store",Xh="model_info_store";function ZK(){if(!ee().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function s6(t){let n=t.result;n.createObjectStore(l0,{keyPath:"modelPath"}),n.createObjectStore(Xh,{keyPath:"modelPath"})}var c0=(()=>{class t{constructor(e){if(this.indexedDB=ZK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)})}load(){return z(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(e,r){return new Promise((o,i)=>{let s=this.indexedDB.open(o6,i6);s.onupgradeneeded=()=>s6(s),s.onsuccess=()=>{let a=s.result;if(r==null){let l=a.transaction(l0,"readonly"),u=l.objectStore(l0).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(u.result.modelArtifacts)},u.onerror=d=>(a.close(),i(u.error)),l.oncomplete=()=>a.close()}else{r.weightData=ci.join(r.weightData);let l=ku(r),c=a.transaction(Xh,"readwrite"),u=c.objectStore(Xh),d;try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(h){return i(h)}let p;d.onsuccess=()=>{p=a.transaction(l0,"readwrite");let h=p.objectStore(l0),f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:l})}catch(m){return i(m)}f.onsuccess=()=>o({modelArtifactsInfo:l}),f.onerror=m=>{u=c.objectStore(Xh);let g=u.delete(this.modelPath);g.onsuccess=()=>(a.close(),i(f.error)),g.onerror=v=>(a.close(),i(f.error))}},d.onerror=h=>(a.close(),i(d.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return t.URL_SCHEME="indexeddb://",t})();var XK=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(c0.URL_SCHEME)?Vbe(t.slice(c0.URL_SCHEME.length)):null;Do.registerSaveRouter(XK);Do.registerLoadRouter(XK);function Vbe(t){return new c0(t)}function jbe(t){return t.startsWith(c0.URL_SCHEME)?t.slice(c0.URL_SCHEME.length):t}var $M=class{constructor(){this.indexedDB=ZK()}listModels(){return z(this,null,function*(){return new Promise((n,e)=>{let r=this.indexedDB.open(o6,i6);r.onupgradeneeded=()=>s6(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(Xh,"readonly"),a=i.objectStore(Xh).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;n(l)},a.onerror=l=>(o.close(),e(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>e(r.error)})})}removeModel(n){return z(this,null,function*(){return n=jbe(n),new Promise((e,r)=>{let o=this.indexedDB.open(o6,i6);o.onupgradeneeded=()=>s6(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(Xh,"readwrite"),a=s.objectStore(Xh),l=a.get(n),c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${n}' in IndexedDB.`));{let u=a.delete(n),d=()=>{c=i.transaction(l0,"readwrite");let h=c.objectStore(l0).delete(n);h.onsuccess=()=>e(l.result.modelArtifactsInfo),h.onerror=f=>r(l.error)};u.onsuccess=d,u.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})})}};var gp="/",sv="tensorflowjs_models",YK="info",zbe="model_topology",Hbe="weight_specs",Ube="weight_data",Gbe="model_metadata";function QK(t){return{info:[sv,t,YK].join(gp),topology:[sv,t,zbe].join(gp),weightSpecs:[sv,t,Hbe].join(gp),weightData:[sv,t,Ube].join(gp),modelMetadata:[sv,t,Gbe].join(gp)}}function JK(t){for(let n of Object.values(t))window.localStorage.removeItem(n)}function Wbe(t){let n=t.split(gp);if(n.length<3)throw new Error(`Invalid key format: ${t}`);return n.slice(1,n.length-1).join(gp)}function qbe(t){return t.startsWith(u0.URL_SCHEME)?t.slice(u0.URL_SCHEME.length):t}var u0=(()=>{class t{constructor(e){if(!ee().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=QK(this.modelPath)}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(e.modelTopology),o=JSON.stringify(e.weightSpecs),i=ku(e),s=ci.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,zK(s));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw JK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}})}load(){return z(this,null,function*(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let l=JSON.parse(s);r.format=l.format,r.generatedBy=l.generatedBy,r.convertedBy=l.convertedBy,l.signature!=null&&(r.signature=l.signature),l.userDefinedMetadata!=null&&(r.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(r.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(r.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(r.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=HK(a),r})}}return t.URL_SCHEME="localstorage://",t})();var eZ=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(u0.URL_SCHEME)?Kbe(t.slice(u0.URL_SCHEME.length)):null;Do.registerSaveRouter(eZ);Do.registerLoadRouter(eZ);function Kbe(t){return new u0(t)}var VM=class{constructor(){F(ee().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),F(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return z(this,null,function*(){let n={},e=sv+gp,r=gp+YK;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(e)&&i.endsWith(r)){let s=Wbe(i);n[s]=JSON.parse(this.LS.getItem(i))}}return n})}removeModel(n){return z(this,null,function*(){n=qbe(n);let e=QK(n);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${n}'`);let r=JSON.parse(this.LS.getItem(e.info));return JK(e),r})}};var av="://",Tl=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(n,e){F(n!=null,()=>"scheme must not be undefined or null."),n.endsWith(av)&&(n=n.slice(0,n.indexOf(av))),F(n.length>0,()=>"scheme must not be an empty string.");let r=t.getInstance();F(r.managers[n]==null,()=>`A model store manager is already registered for scheme '${n}'.`),r.managers[n]=e}static getManager(n){let e=t.getInstance().managers[n];if(e==null)throw new Error(`Cannot find model manager for scheme '${n}'`);return e}static getSchemes(){return Object.keys(t.getInstance().managers)}};function jM(t){if(t.indexOf(av)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Tl.getSchemes().join(",")}`);return{scheme:t.split(av)[0],path:t.split(av)[1]}}function tZ(t,n,e=!1){return z(this,null,function*(){F(t!==n,()=>`Old path and new path are the same: '${t}'`);let r=Do.getLoadHandlers(t);F(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),F(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);let o=r[0],i=Do.getSaveHandlers(n);F(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${n}.`),F(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${n}.`);let s=i[0],a=jM(t).scheme,l=jM(t).path,c=a===jM(t).scheme,u=yield o.load();e&&c&&(yield Tl.getManager(a).removeModel(l));let d=yield s.save(u);return e&&!c&&(yield Tl.getManager(a).removeModel(l)),d.modelArtifactsInfo})}function nZ(){return z(this,null,function*(){let t=Tl.getSchemes(),n={};for(let e of t){let r=yield Tl.getManager(e).listModels();for(let o in r){let i=e+av+o;n[i]=r[o]}}return n})}function rZ(t){return z(this,null,function*(){let n=jM(t);return Tl.getManager(n.scheme).removeModel(n.path)})}function oZ(t,n){return z(this,null,function*(){return tZ(t,n,!1)})}function iZ(t,n){return z(this,null,function*(){return tZ(t,n,!0)})}var a6=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(n,e){return fetch(n,e)}now(){return performance.now()}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)}decode(n,e){return new TextDecoder(e).decode(n)}setTimeoutCustom(n,e){if(typeof window>"u"||!ee().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(n,e);return}this.functionRefs.push(n),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(n){return TM(n)}};if(ee().get("IS_BROWSER")){ee().setPlatform("browser",new a6);try{Tl.registerManager(u0.URL_SCHEME,new VM)}catch{}try{Tl.registerManager(c0.URL_SCHEME,new $M)}catch{}}var Xbe={importFetch:()=>aZ()},l6;var c6=class{constructor(){this.util=lZ(),this.textEncoder=new this.util.TextEncoder}fetch(n,e){return ee().global.fetch!=null?ee().global.fetch(n,e):(l6==null&&(l6=Xbe.importFetch()),l6(n,e))}now(){let n=process.hrtime();return n[0]*1e3+n[1]/1e6}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(n)}decode(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)}isTypedArray(n){return this.util.types.isFloat32Array(n)||this.util.types.isInt32Array(n)||this.util.types.isUint8Array(n)||this.util.types.isUint8ClampedArray(n)}};ee().get("IS_NODE")&&!ee().get("IS_BROWSER")&&ee().setPlatform("node",new c6);function at(t,n="float32",e){return n=n||"float32",hr(t),new yn(t,n,e)}function Ybe(t,n){let e=b(t,"x","cast");if(!OF(n))throw new Error(`Failed to cast to unknown dtype ${n}`);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:e},o={dtype:n};return R.runKernel(xl,r,o)}var ge=E({cast_:Ybe});function Qbe(t){let e={x:b(t,"x","clone","string_or_numeric")};return R.runKernel(_l,e)}var ki=E({clone_:Qbe});function Jx(t,n=!1){console.log(t.toString(n))}YF();var Jbe={buffer:at,cast:ge,clone:ki,print:Jx};TK(Jbe);function eCe(t,n){let e=b(t,"a","add"),r=b(n,"b","add");[e,r]=on(e,r);let o={a:e,b:r};return R.runKernel(Sa,o)}var fe=E({add_:eCe});function tCe(t,n){let e=b(t,"a","floorDiv"),r=b(n,"b","floorDiv");[e,r]=on(e,r);let o={a:e,b:r};return R.runKernel(Gc,o)}var p0=E({floorDiv_:tCe});function nCe(t,n){let e=b(t,"a","div"),r=b(n,"b","div");if([e,r]=on(e,r),e.dtype==="int32"&&r.dtype==="int32")return p0(e,r);let o={a:e,b:r},i={};return R.runKernel($c,o,i)}var je=E({div_:nCe});function rCe(t,n){let e=b(t,"a","mul"),r=b(n,"b","mul");[e,r]=on(e,r);let o={a:e,b:r};return R.runKernel(tu,o)}var L=E({mul_:rCe});function oCe(t){let n=b(t,"x","abs");if(n.dtype==="complex64"){let e={x:n};return R.runKernel(Dd,e)}else{let e={x:n};return R.runKernel(xd,e)}}var zn=E({abs_:oCe});function iCe(t){let e={x:b(t,"x","acos")};return R.runKernel(Dc,e)}var e_=E({acos_:iCe});function sCe(t){let e={x:b(t,"x","acosh")};return R.runKernel(Ec,e)}var t_=E({acosh_:sCe});function aCe(t){F(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),F(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let n=t.map((o,i)=>b(o,`tensors${i}`,"addN")),e=n[0];n.forEach(o=>{if(o.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(o=>{if(!Pi(o.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=n;return R.runKernel(_d,r)}var u6=E({addN_:aCe});function lCe(t,n=null,e=!1){let o={x:b(t,"x","all","bool")},i={axis:n,keepDims:e};return R.runKernel(Qm,o,i)}var h0=E({all_:lCe});function cCe(t,n=null,e=!1){let o={x:b(t,"x","any","bool")},i={axis:n,keepDims:e};return R.runKernel(Jm,o,i)}var Yh=E({any_:cCe});function uCe(t,n=0){let r={x:b(t,"x","argMax")},o={axis:n};return R.runKernel(kd,r,o)}var Dl=E({argMax_:uCe});function dCe(t,n=0){let r={x:b(t,"x","argMin")},o={axis:n};return R.runKernel(bd,r,o)}var n_=E({argMin_:dCe});function pCe(t){let e={x:b(t,"x","asin")};return R.runKernel(Ic,e)}var r_=E({asin_:pCe});function hCe(t){let e={x:b(t,"x","asinh")};return R.runKernel(Nc,e)}var o_=E({asinh_:hCe});function fCe(t){let e={x:b(t,"x","atan")};return R.runKernel(Ac,e)}var i_=E({atan_:fCe});function mCe(t,n){let e=b(t,"a","atan2"),r=b(n,"b","atan2");[e,r]=on(e,r);let o={a:e,b:r};return R.runKernel(Oc,o)}var s_=E({atan2_:mCe});function gCe(t){let e={x:b(t,"x","atanh")};return R.runKernel(Rc,e)}var a_=E({atanh_:gCe});function vCe(t,n,e,r,o="NHWC",i){let s=t[3],a=[...n,s],l=uZ(o);return f0(t,a,e,i,r,null,null,l)}function p6(t,n,e,r,o,i,s="channelsLast"){let[a,l]=l_(n),c;if(s==="channelsLast")c=[a,l,t[3],t[3]];else if(s==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return f0(t,c,e,r,o,i,!1,s)}function wCe(t,n,e,r,o,i,s="NDHWC"){let[a,l,c]=d6(n),u,d;if(s==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(s==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return cZ(t,u,e,r,o,!1,d,i)}function f0(t,n,e,r,o,i,s=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,h,,f]=n,[m,g]=l_(e),[v,w]=l_(r),y=cv(p,v),_=cv(h,w),{padInfo:k,outHeight:T,outWidth:I}=_Ce(o,c,u,m,g,y,_,i,a),A=s?f*d:f,P;return a==="channelsFirst"?P=[l,A,T,I]:a==="channelsLast"&&(P=[l,T,I,A]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:T,outWidth:I,outChannels:A,padInfo:k,strideHeight:m,strideWidth:g,filterHeight:p,filterWidth:h,effectiveFilterHeight:y,effectiveFilterWidth:_,dilationHeight:v,dilationWidth:w,inShape:t,outShape:P,filterShape:n}}function cZ(t,n,e,r,o,i=!1,s="channelsLast",a){let[l,c,u,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,d,p]=t;else if(s==="channelsFirst")[l,p,c,u,d]=t;else throw new Error(`Unknown dataFormat ${s}`);let[h,f,m,,g]=n,[v,w,y]=d6(e),[_,k,T]=d6(r),I=cv(h,_),A=cv(f,k),P=cv(m,T),{padInfo:N,outDepth:B,outHeight:S,outWidth:W}=kCe(o,c,u,d,v,w,y,I,A,P,a),ie=i?g*p:g,Q;return s==="channelsFirst"?Q=[l,ie,B,S,W]:s==="channelsLast"&&(Q=[l,B,S,W,ie]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:d,inChannels:p,outDepth:B,outHeight:S,outWidth:W,outChannels:ie,padInfo:N,strideDepth:v,strideHeight:w,strideWidth:y,filterDepth:h,filterHeight:f,filterWidth:m,effectiveFilterDepth:I,effectiveFilterHeight:A,effectiveFilterWidth:P,dilationDepth:_,dilationHeight:k,dilationWidth:T,inShape:t,outShape:Q,filterShape:n}}function yCe(t,n,e,r,o){r==null&&(r=h6(t,n,e));let i=t[0],s=t[1],a=c_((i-n+2*r)/e+1,o),l=c_((s-n+2*r)/e+1,o);return[a,l]}function xCe(t,n,e,r,o,i){o==null&&(o=h6(t,n[0],r[0]));let s=[0,0,0,e];for(let a=0;a<3;a++)t[a]+2*o>=n[a]&&(s[a]=c_((t[a]-n[a]+2*o)/r[a]+1,i));return s}function h6(t,n,e,r=1){let o=cv(n,r);return Math.floor((t[0]*(e-1)-e+o)/2)}function l_(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function d6(t){return typeof t=="number"?[t,t,t]:t}function cv(t,n){return n<=1?t:t+(t-1)*(n-1)}function _Ce(t,n,e,r,o,i,s,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let h=yCe([n,e],i,r,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(n/r),d=Math.ceil(e/o);let p=Math.max(0,(u-1)*r+i-n),h=Math.max(0,(d-1)*o+s-e),f=Math.floor(p/2),m=p-f,g=Math.floor(h/2),v=h-g;c={top:f,bottom:m,left:g,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-i+1)/r),d=Math.ceil((e-s+1)/o);else if(typeof t=="object"){let p=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],f=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:h,left:f,right:m,type:p===0&&h===0&&f===0&&m===0?"VALID":"EXPLICIT"},u=c_((n-i+p+h)/r+1,a),d=c_((e-s+f+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function kCe(t,n,e,r,o,i,s,a,l,c,u){let d,p,h,f;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let g=xCe([n,e,r,1],[a,l,c],1,[o,i,s],t,u);p=g[0],h=g[1],f=g[2]}else if(t==="same"){p=Math.ceil(n/o),h=Math.ceil(e/i),f=Math.ceil(r/s);let m=(p-1)*o+a-n,g=(h-1)*i+l-e,v=(f-1)*s+c-r,w=Math.floor(m/2),y=m-w,_=Math.floor(g/2),k=g-_,T=Math.floor(v/2),I=v-T;d={top:_,bottom:k,left:T,right:I,front:w,back:y,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:f}}function c_(t,n){if(!n)return Math.trunc(t);switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${n}`)}}function oa(t){let[n,e,r]=l_(t);return n===1&&e===1&&r===1}function Xo(t,n){return oa(t)||oa(n)}function bu(t){return l_(t).every(n=>n>0)}function uZ(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Hn(t,n,e){if(e!=null){if(typeof n=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);if(typeof n=="number")F(yd(n),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);else if(typeof n=="object")n.forEach(r=>{r.forEach(o=>{F(yd(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${n}`)}}function bCe(t,n){let r={x:b(t,"x","reshape","string_or_numeric")},o={shape:n};return R.runKernel(ep,r,o)}var $=E({reshape_:bCe});function CCe(t,n,e,r,o){let i=b(t,"x","avgPool","float32"),s=1;F(Xo(e,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Hn("avgPool",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o},d=R.runKernel(Cd,c,u);return d=ge(d,i.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var vp=E({avgPool_:CCe});function SCe(t,n,e,r,o,i="NDHWC"){let s=b(t,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),F(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),F(typeof e=="number"&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),Hn("avgPool3d",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o,dataFormat:i},d=R.runKernel(Sd,c,u);return d=ge(d,a.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var u_=E({avgPool3d_:SCe});function MCe(t,n=0){F(t.length>=1,()=>"Pass at least one tensor to concat");let e=fp(t,"tensors","concat","string_or_numeric");if(e[0].dtype==="complex64"&&e.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),e.length===1)return ki(e[0]);let r=e,o={axis:n};return R.runKernel(Ed,r,o)}var vn=E({concat_:MCe});function TCe(t,n,e=!1,r=!1){let o=b(t,"a","matMul"),i=b(n,"b","matMul");[o,i]=on(o,i);let s={a:o,b:i},a={transposeA:e,transposeB:r};return R.runKernel(Md,s,a)}var Vt=E({matMul_:TCe});function DCe(t){let e={x:b(t,"x","sigmoid","float32")};return R.runKernel(pu,e)}var ui=E({sigmoid_:DCe});function ECe(t,n,e){let r=b(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:n,size:e};return R.runKernel(ip,o,i)}var Ft=E({slice_:ECe});function ICe(t){let e={x:b(t,"x","tanh","float32")};return R.runKernel(wu,e)}var Ea=E({tanh_:ICe});function NCe(t,n,e,r,o,i){let s=b(t,"forgetBias","basicLSTMCell"),a=b(n,"lstmKernel","basicLSTMCell"),l=b(e,"lstmBias","basicLSTMCell"),c=b(r,"data","basicLSTMCell"),u=b(o,"c","basicLSTMCell"),d=b(i,"h","basicLSTMCell"),p=vn([c,d],1),h=Vt(p,a),f=fe(h,l),m=f.shape[0],g=f.shape[1]/4,v=[m,g],w=Ft(f,[0,0],v),y=Ft(f,[0,g],v),_=Ft(f,[0,g*2],v),k=Ft(f,[0,g*3],v),T=fe(L(ui(w),Ea(y)),L(u,ui(fe(s,_)))),I=L(Ea(T),ui(k));return[T,I]}var f6=E({basicLSTMCell_:NCe});function ACe(t,n,e){let r=b(t,"x","batchToSpaceND"),o=n.reduce((a,l)=>a*l);F(r.rank>=1+n.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${n.length}`),F(e.length===n.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${n.length}`),F(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${n.join(" * ")} === ${o}`);let i={x:r},s={blockShape:n,crops:e};return R.runKernel(Td,i,s)}var wp=E({batchToSpaceND_:ACe});function dZ(t){let n;return t.rank===0||t.rank===1?n=$(t,[1,1,1,t.size]):t.rank===2?n=$(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?n=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]):n=t,n}function RCe(t,n,e,r,o,i){i==null&&(i=.001);let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;r!=null&&(u=b(r,"offset","batchNorm")),F(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:dZ(s),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:i},f=R.runKernel(Bd,p,h);return $(f,s.shape)}var El=E({batchNorm_:RCe});function OCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),F(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),F(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),El(s,a,l,u,c,i)}var d_=E({batchNorm2d_:OCe});function FCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),F(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),F(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),El(s,a,l,u,c,i)}var p_=E({batchNorm3d_:FCe});function PCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),F(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),F(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),El(s,a,l,u,c,i)}var h_=E({batchNorm4d_:PCe});function BCe(t,n,e){let r=b(t,"x","bincount"),o=b(n,"weights","bincount");F(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),F(e>=0,()=>`size must be non-negative, but got ${e}.`),F(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:e};return R.runKernel(ng,i,s)}var f_=E({bincount_:BCe});function LCe(t,n){let e=b(t,"x","bitwiseAnd"),r=b(n,"y","bitwiseAnd");if(!Pi(e.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${e.shape}, y: ${r.shape}`);if(e.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${e.dtype} and type of y: ${r.dtype}`);let o={a:e,b:r};return R.runKernel(Rh,o)}var m6=E({bitwiseAnd_:LCe});function $Ce(t,n){let e=b(t,"s0","broadcastArgs","int32"),r=b(n,"s1","broadcastArgs","int32");if(e.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${e.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:e,s1:r};return R.runKernel(rg,o)}var g6=E({broadcastArgs_:$Ce});function VCe(t,n){let e=b(t,"broadcastTo","x"),r=e.shape;if(hr(n),n.length<e.rank)throw new Error(`broadcastTo(): shape.length=${n.length} < input.rank=${e.rank}.`);if(n.length>e.rank){let c=e.shape.slice();for(;c.length<n.length;)c.unshift(1);e=$(e,c)}let o=e.shape,i=Array.from(n);for(let c=n.length-1;c>=0;c--)if(o[c]===n[c])i[c]=1;else if(e.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${n}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return ki(e);let a={x:e},l={reps:i};return R.runKernel(kl,a,l)}var Il=E({broadcastTo_:VCe});function jCe(t){let e={x:b(t,"x","ceil","float32")};return R.runKernel(Fc,e)}var m_=E({ceil_:jCe});function sa(t,n,e){hr(t),e=e||Ah(n);let r={shape:t,value:n,dtype:e};return R.runKernel(wg,{},r)}function zCe(t,n,e){let r=b(t,"x","clipByValue");if(F(n<=e,()=>`Error in clip: min (${n}) must be less than or equal to max (${e}).`),n===e)return sa(r.shape,n,r.dtype);let o={x:r},i={clipValueMin:n,clipValueMax:e};return R.runKernel(Pc,o,i)}var go=E({clipByValue_:zCe});function HCe(t){return vn(t,0)}var g_=E({concat1d_:HCe});function UCe(t,n){return vn(t,n)}var v_=E({concat2d_:UCe});function GCe(t,n){return vn(t,n)}var w_=E({concat3d_:GCe});function WCe(t,n){return vn(t,n)}var y_=E({concat4d_:WCe});function qCe(t,n,e,r,o="NHWC",i=[1,1],s){let a=b(t,"x","conv2d","float32"),l=b(n,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Hn("conv2d",r,s);let d=o==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),F(Xo(e,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),F(bu(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),F(bu(e),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:l},h={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},f=R.runKernel(Id,p,h);return u?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Vi=E({conv2d_:qCe});function KCe(t,n,e,r,o="NWC",i=1,s){let a=b(t,"x","conv1d"),l=b(n,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1]])),F(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),F(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Hn("conv1d",r,s),F(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),F(Xo(e,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${i}'`),F(bu(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),F(bu(e),()=>"Error in conv1D: Stride should be larger than 0."),F(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let d=$(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=$(c,[c.shape[0],1,c.shape[1],c.shape[2]]),g=Vi(p,d,[1,e],r,"NHWC",[1,i],s);return u?$(g,[g.shape[2],g.shape[3]]):$(g,[g.shape[0],g.shape[2],g.shape[3]])}var m0=E({conv1d_:KCe});function ZCe(t,n,e,r,o,i="NHWC",s){F(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let a=t,l=n,c=!1;n.rank===3&&(c=!0,l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]),a=[1,t[0],t[1],t[2]]),F(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),F(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),F(e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);let u=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?l.shape[3]:l.shape[1];F(u===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),F(d===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${e.shape[3]}.`),Hn("conv2dDerInput",o,s);let p={dy:l,filter:e},h={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},f=R.runKernel(Nd,p,h);return c?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var uv=E({conv2DBackpropInput_:ZCe});function XCe(t,n,e,r,o,i){let s=b(t,"x","conv2dTranspose"),a=b(n,"filter","conv2dTranspose");return uv(e,s,a,r,o,"NHWC",i)}var g0=E({conv2dTranspose_:XCe});function YCe(t,n,e,r,o="NDHWC",i=[1,1,1]){let s=b(t,"x","conv3d"),a=b(n,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),F(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),F(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),F(Xo(e,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),F(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),F(bu(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),F(bu(e),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},d={strides:e,pad:r,dataFormat:o,dilations:i},p=R.runKernel(Ad,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var x_=E({conv3d_:YCe});function QCe(t,n,e,r,o){F(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let i=t,s=n,a=!1;n.rank===4&&(a=!0,s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);let l=i[4],c=s.shape[4];F(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),F(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),F(e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),F(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),F(c===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${e.shape[4]}.`);let u={dy:s,filter:e},d={pad:o,strides:r,inputShape:i},p=R.runKernel(ag,u,d);return a?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var zM=E({conv3DBackpropInput_:QCe});function JCe(t,n,e,r,o){let i=b(t,"x","conv3dTranspose"),s=b(n,"filter","conv3dTranspose");return zM(e,i,s,r,o)}var __=E({conv3dTranspose_:JCe});function e4e(t){let e={x:b(t,"x","cos","float32")};return R.runKernel(Bc,e)}var yp=E({cos_:e4e});function t4e(t){let e={x:b(t,"x","cosh","float32")};return R.runKernel(Lc,e)}var v0=E({cosh_:t4e});function n4e(t,n=0,e=!1,r=!1){let i={x:b(t,"x","cumprod")},s={axis:n,exclusive:e,reverse:r};return R.runKernel(lg,i,s)}var Qh=E({cumprod_:n4e});function r4e(t,n=0,e=!1,r=!1){let i={x:b(t,"x","cumsum")},s={axis:n,exclusive:e,reverse:r};return R.runKernel(Rd,i,s)}var w0=E({cumsum_:r4e});function o4e(t,n,e,r=!1){let o=b(t,"x","denseBincount"),i=b(n,"weights","denseBincount");F(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),F(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),F(e>=0,()=>`size must be non-negative, but got ${e}.`),F(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:e,binaryOutput:r};return R.runKernel(ug,s,a)}var dv=E({denseBincount_:o4e});function i4e(t,n,e="NHWC"){let r=b(t,"x","depthToSpace","float32"),o=e==="NHWC"?r.shape[1]:r.shape[2],i=e==="NHWC"?r.shape[2]:r.shape[3],s=e==="NHWC"?r.shape[3]:r.shape[1];F(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`),F(o*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${n}  for depthToSpace with input shape
    ${r.shape}`),F(i*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${n} for depthToSpace with input shape
        ${r.shape}`),F(s%(n*n)===0,()=>`Dimension size must be evenly divisible by ${n*n} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},l={blockSize:n,dataFormat:e};return R.runKernel(dg,a,l)}var k_=E({depthToSpace_:i4e});function s4e(t,n,e,r,o="NHWC",i=[1,1],s){let a=b(t,"x","depthwiseConv2d","float32"),l=b(n,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let d=o==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Hn("depthwiseConv2d",r,s);let p={x:c,filter:l},h={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},f=R.runKernel(Od,p,h);return u?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Nl=E({depthwiseConv2d_:s4e});function a4e(t){let e={x:b(t,"x","diag")};return R.runKernel(fg,e)}var v6=E({diag_:a4e});function l4e(t,n,e,r,o=[1,1],i="NHWC"){let s=b(t,"x","dilation2d"),a=b(n,"filter","dilation2d");F(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),F(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),F(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,c=!1;s.rank===3&&(l=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),F(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},d={strides:e,pad:r,dilations:o},p=R.runKernel(Fd,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var b_=E({dilation2d_:l4e});var ss={};Jt(ss,{assertAndGetBroadcastShape:()=>$t,getBroadcastDims:()=>pZ,getReductionAxes:()=>Pn});function pZ(t,n){let e=t.length,r=[];for(let o=0;o<e;o++){let i=e-1-o,s=t[i]||1;(n[n.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function Pn(t,n){let e=[];for(let r=0;r<n.length;r++){let o=t[t.length-r-1],i=n.length-r-1,s=n[i];(o==null||o===1&&s>1)&&e.unshift(i)}return e}function $t(t,n){let e=Math.max(t.length,n.length),r=new Array(e);for(let o=0;o<e;o++){let i=t[t.length-o-1];i==null&&(i=1);let s=n[n.length-o-1];if(s==null&&(s=1),i===1)r[e-o-1]=s;else if(s===1)r[e-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${t} and ${n}.`;throw Error(a)}else r[e-o-1]=i}return r}function c4e(t,n){let e=b(t,"a","equal","string_or_numeric"),r=b(n,"b","equal","string_or_numeric");[e,r]=on(e,r),$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Oh,o)}var Eo=E({equal_:c4e});function u4e(t,n,e){let r=b(n,"a","where"),o=b(e,"b","where"),i=b(t,"condition","where","bool"),s=$t($t(i.shape,r.shape),o.shape),a=Il(i,s),l=Il(r,s),c=Il(o,s),u={condition:a,t:l,e:c};return R.runKernel(op,u)}var An=E({where_:u4e});function d4e(t){let e={x:b(t,"x","zerosLike")};return R.runKernel(pp,e)}var pt=E({zerosLike_:d4e});function p4e(t,n){let e=b(t,"a","div"),r=b(n,"b","div");[e,r]=on(e,r);let o=je(e,r),i=pt(o),s=Eo(r,i);return An(s,i,o)}var C_=E({divNoNan_:p4e});function h4e(t,n){let e=b(t,"t1","dot"),r=b(n,"t2","dot");F((e.rank===1||e.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${r.rank}.`);let o=e.rank===1?e.size:e.shape[1],i=r.rank===1?r.size:r.shape[0];if(F(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),e.rank===1&&r.rank===1){let s=$(e,[1,-1]),a=$(r,[-1,1]),l=Vt(s,a);return $(l,[])}else if(e.rank===1&&r.rank===2){let s=$(e,[1,-1]),a=$(r,[r.shape[0],r.shape[1]]),l=Vt(s,a);return $(l,[l.size])}else if(e.rank===2&&r.rank===1){let s=$(r,[-1,1]),a=Vt(e,s);return $(a,[a.size])}else{let s=$(r,[r.shape[0],r.shape[1]]);return Vt(e,s)}}var S_=E({dot_:h4e});function f4e(t,...n){let e=n.map((o,i)=>b(o,`tensors${i}`,"einsum")),r={equation:t};return R.runKernel(mg,e,r)}var xp=E({einsum_:f4e});function m4e(t){let e={x:b(t,"x","elu","float32")};return R.runKernel(Vc,e)}var Al=E({elu_:m4e});function g4e(t,n){let e=b(t,"x","ensureShape","string_or_numeric");if(!IF(e.shape,n))throw new Error(`EnsureShape: Shape of tensor ${e.shape} is not compatible with expected shape ${n}`);return t}var w6=E({ensureShape_:g4e});function v4e(t){let n=b(t,"x","erf");F(n.dtype==="int32"||n.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),n.dtype==="int32"&&(n=ge(n,"float32"));let e={x:n};return R.runKernel(jc,e)}var y0=E({erf_:v4e});function y6(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function hZ(t,n,e){let r=t.length+n.length,o=[],i=0,s=0;for(let a=0;a<r;a++)e.indexOf(a)===-1?o.push(t[i++]):o.push(n[s++]);return o}function x6(t,n){let e=[],r=t.length;for(let i=0;i<r;i++)n.indexOf(i)===-1&&e.push(t[i]);let o=n.map(i=>t[i]);return[e,o]}function Ia(t,n){let e=n.map(r=>1);return hZ(t,e,n)}function w4e(t,n,e){F(y6(n,e),()=>`${t} supports only inner-most axes for now. Got axes ${n} and rank-${e} input.`)}function _6(t,n){if(y6(t,n))return null;let e=[];for(let r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(r=>e.push(r)),e}function M_(t){return t.map((n,e)=>[e,n]).sort((n,e)=>n[1]-e[1]).map(n=>n[0])}function y4e(t,n){let e=[];for(let r=n-t;r<n;++r)e.push(r);return e}function x4e(t,n=null,e=!1){let o={x:b(t,"x","max")},i={reductionIndices:n,keepDims:e};return R.runKernel(jd,o,i)}var vo=E({max_:x4e});function _4e(t,n=null,e=!1){let o={x:b(t,"x","min")},i={axis:n,keepDims:e};return R.runKernel(Gd,o,i)}var Cu=E({min_:_4e});function k4e(t,n){let e=b(t,"base","pow"),r=b(n,"exp","pow");[e,r]=on(e,r);let o={a:e,b:r};return R.runKernel(nu,o)}var Yo=E({pow_:k4e});function Ue(t,n){if((Hr(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&Hr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return $i(t,[],[],n)}function b4e(t){let e={x:b(t,"x","sqrt","float32")};return R.runKernel(fu,e)}var In=E({sqrt_:b4e});function C4e(t){let n=b(t,"x","square"),e={};return R.runKernel("Square",{x:n},e)}var Gt=E({square_:C4e});function S4e(t,n=null,e=!1){let r=b(t,"x","sum");r.dtype==="bool"&&(r=ge(r,"int32"));let o={x:r},i={axis:n,keepDims:e};return R.runKernel(sp,o,i)}var Ge=E({sum_:S4e});function M4e(t,n="euclidean",e=null,r=!1){t=b(t,"x","norm");let o=fZ(t,n,e),i=o.shape;if(r){let s=lo(e,t.shape);i=Ia(o.shape,s)}return $(o,i)}function fZ(t,n,e=null){if(t.rank===0)return zn(t);if(t.rank!==1&&e===null)return fZ($(t,[-1]),n,e);if(t.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(n===1)return Ge(zn(t),e);if(n===1/0)return vo(zn(t),e);if(n===-1/0)return Cu(zn(t),e);if(n==="euclidean"||n===2)return In(Ge(Yo(zn(t),Ue(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(e)&&e.length===2){if(n===1)return vo(Ge(zn(t),e[0]),e[1]-1);if(n===1/0)return vo(Ge(zn(t),e[1]),e[0]);if(n===-1/0)return Cu(Ge(zn(t),e[1]),e[0]);if(n==="fro"||n==="euclidean")return In(Ge(Gt(t),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}var Su=E({norm_:M4e});function T4e(t,n=null,e=!1){return Su(t,"euclidean",n,e)}var T_=E({euclideanNorm_:T4e});function D4e(t){let e={x:b(t,"x","exp")};return R.runKernel(zc,e)}var mr=E({exp_:D4e});function E4e(t,n=0){let e=b(t,"x","expandDims","string_or_numeric");F(n<=e.rank,()=>"Axis must be <= rank of the tensor");let r={input:e},o={dim:n};return R.runKernel(Pd,r,o)}var gr=E({expandDims_:E4e});function I4e(t){let e={x:b(t,"x","expm1")};return R.runKernel(Hc,e)}var D_=E({expm1_:I4e});function N4e(t,n){let e=b(t,"x","tile","string_or_numeric");F(e.rank===n.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${n}.`);let r={x:e},o={reps:n};return R.runKernel(kl,r,o)}var Io=E({tile_:N4e});function A4e(t,n,e,r="float32"){n==null&&(n=t);let o=at([t,n],r),i=t<=n?t:n;for(let a=0;a<i;++a)o.set(1,a,a);let s=$(o.toTensor(),[t,n]);if(e==null)return s;if(e.length===1)return Io(gr(s,0),[e[0],1,1]);if(e.length===2)return Io(gr(gr(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return Io(gr(gr(gr(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}var Jh=E({eye_:A4e});function R4e(t){let e={x:b(t,"x","floor","float32")};return R.runKernel(Uc,e)}var Rl=E({floor_:R4e});function O4e(t,n,e=0,r=0){let o=b(t,"x","gather"),i=b(n,"indices","gather","int32"),s={x:o,indices:i},a={axis:e,batchDims:r};return R.runKernel(Ld,s,a)}var Ol=E({gather_:O4e});function F4e(t,n){let e=b(t,"a","greater","string_or_numeric"),r=b(n,"b","greater","string_or_numeric");[e,r]=on(e,r),$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Fh,o)}var Yn=E({greater_:F4e});function P4e(t,n){let e=b(t,"a","greaterEqual","string_or_numeric"),r=b(n,"b","greaterEqual","string_or_numeric");[e,r]=on(e,r),$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Wc,o)}var bi=E({greaterEqual_:P4e});function B4e(t){let e={input:b(t,"input","imag")};return R.runKernel(kg,e)}var _p=E({imag_:B4e});function L4e(t){let e={x:b(t,"x","isFinite")};return R.runKernel(qc,e)}var E_=E({isFinite_:L4e});function $4e(t){let e={x:b(t,"x","isInf")};return R.runKernel(Kc,e)}var I_=E({isInf_:$4e});function V4e(t){let e={x:b(t,"x","isNaN")};return R.runKernel(Zc,e)}var N_=E({isNaN_:V4e});function j4e(t,n=.2){let r={x:b(t,"x","leakyRelu")},o={alpha:n};return R.runKernel($d,r,o)}var kp=E({leakyRelu_:j4e});function z4e(t,n){let e=b(t,"a","less","string_or_numeric"),r=b(n,"b","less","string_or_numeric");[e,r]=on(e,r),$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Ph,o)}var Mu=E({less_:z4e});function H4e(t,n){let e=b(t,"a","lessEqual","string_or_numeric"),r=b(n,"b","lessEqual","string_or_numeric");[e,r]=on(e,r),$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Bh,o)}var as=E({lessEqual_:H4e});function b6(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");let r={start:t,stop:n,num:e};return R.runKernel(bg,{},r)}function U4e(t,n=5,e=1,r=1,o=.5){let i=b(t,"x","localResponseNormalization");F(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),F(yd(n),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${n}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=$(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},c={depthRadius:n,bias:e,alpha:r,beta:o},u=R.runKernel(Vd,l,c);return a?$(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var A_=E({localResponseNormalization_:U4e});function G4e(t){let e={x:b(t,"x","log","float32")};return R.runKernel(Xc,e)}var wo=E({log_:G4e});function W4e(t){let e={x:b(t,"x","log1p")};return R.runKernel(Yc,e)}var bp=E({log1p_:W4e});function mZ(t){return F(Mc(t),()=>"The f passed in grad(f) must be a function"),(n,e)=>{let r=b(n,"x","tf.grad","string_or_numeric"),o=e!=null?b(e,"dy","tf.grad"):null;return R.tidy(()=>{let{value:i,grads:s}=R.gradients(()=>t(r),[r],o);return o!=null&&rr(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),HM(s),s[0]})}}function gZ(t){return F(Mc(t),()=>"The f passed in grads(f) must be a function"),(n,e)=>{F(Array.isArray(n),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=fp(n,"args","tf.grads","string_or_numeric"),o=e!=null?b(e,"dy","tf.grads"):null;return R.tidy(()=>{let{value:i,grads:s}=R.gradients(()=>t(...r),r,o);return o!=null&&rr(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),HM(s),s})}}function vZ(t){return F(Mc(t),()=>"The f passed in valueAndGrad(f) must be a function"),(n,e)=>{F(n instanceof Lt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),F(e==null||e instanceof Lt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=R.gradients(()=>t(n),[n],e);return HM(r),{grad:r[0],value:o}}}function wZ(t){return F(Mc(t),()=>"The f passed in valueAndGrads(f) must be a function"),(n,e)=>{F(Array.isArray(n)&&n.every(o=>o instanceof Lt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),F(e==null||e instanceof Lt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=R.gradients(()=>t(...n),n,e);return e!=null&&rr(r.value.shape,e.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),HM(r.grads),r}}function R_(t,n){F(Mc(t),()=>"The f passed in variableGrads(f) must be a function"),F(n==null||Array.isArray(n)&&n.every(c=>c instanceof _u),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let e=n!=null;if(!e){n=[];for(let c in R.registeredVariables)n.push(R.registeredVariables[c])}let r=e?n.filter(c=>!c.trainable):null,o=n.length;n=n.filter(c=>c.trainable),F(n.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=R.gradients(t,n,null,i);F(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),F(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return n.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function Ci(t){return R.customGrad(t)}function HM(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function q4e(t){let e={x:b(t,"x","neg")};return R.runKernel(qd,e)}var Xt=E({neg_:q4e});function K4e(t){let e={x:b(t,"x","softplus")};return R.runKernel(hu,e)}var Na=E({softplus_:K4e});function Z4e(t){let n=b(t,"x","logSigmoid");return Ci(r=>({value:Xt(Na(Xt(r))),gradFunc:s=>L(s,ui(Xt(r)))}))(n)}var O_=E({logSigmoid_:Z4e});function X4e(t,n){let e=b(t,"a","sub"),r=b(n,"b","sub");[e,r]=on(e,r);let o={a:e,b:r};return R.runKernel(gu,o)}var Be=E({sub_:X4e});function Y4e(t,n=-1){let e=b(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${n}`);return Ci((o,i)=>{let a=vo(o,n,!0),l=Be(o,a),c=Be(ge(l,"float32"),wo(Ge(mr(l),n,!0)));return i([c]),{value:c,gradFunc:(d,p)=>{let[h]=p,f=!0,m=mr(h);return Be(d,L(Ge(d,n,f),m))}}})(e)}var x0=E({logSoftmax_:Y4e});function Q4e(t,n=null,e=!1){let r=b(t,"x","logSumExp"),o=lo(n,r.shape),i=vo(r,o,!0),s=Be(r,i),a=mr(s),l=Ge(a,o),c=wo(l),u=fe($(i,c.shape),c);if(e){let d=Ia(u.shape,o);return $(u,d)}return u}var Cp=E({logSumExp_:Q4e});function J4e(t,n){let e=b(t,"a","logicalAnd","bool"),r=b(n,"b","logicalAnd","bool");$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Lh,o)}var No=E({logicalAnd_:J4e});function eSe(t){let e={x:b(t,"x","logicalNot","bool")};return R.runKernel($h,e)}var Sp=E({logicalNot_:eSe});function tSe(t,n){let e=b(t,"a","logicalOr","bool"),r=b(n,"b","logicalOr","bool");$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Vh,o)}var _0=E({logicalOr_:tSe});function nSe(t,n){let e=b(t,"a","logicalXor","bool"),r=b(n,"b","logicalXor","bool");return $t(e.shape,r.shape),No(_0(t,n),Sp(No(t,n)))}var F_=E({logicalXor_:nSe});var UM=2147483648;function rSe(t,n,e="left"){let r=b(t,"sortedSequence","searchSorted"),o=b(n,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=$(r,[-1,i]),l=$(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(rn(l.shape)>=UM)throw new Error(`values tensor size must less than ${UM}`);if(a.shape[1]>=UM)throw new Error(`trailing dim_size must less than ${UM} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:l},u={side:e};return R.runKernel(jg,c,u)}var pv=E({searchSorted_:rSe});function C6(t,n){return pv(t,n,"left")}function oSe(t,n,e,r,o){let i=b(t,"x","maxPool"),s=1,a=i,l=!1;i.rank===3&&(l=!0,a=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),F(Xo(e,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),Hn("maxPool",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o},d=R.runKernel(zd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Mp=E({maxPool_:oSe});function iSe(t,n=[1,1,1],e,r,o,i="NDHWC"){let s=b(t,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),F(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Hn("maxPool3d",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o,dataFormat:i},d=R.runKernel(Hd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var P_=E({maxPool3d_:iSe});function sSe(t,n,e,r,o=!1){let s={x:b(t,"x","maxPoolWithArgmax")},a={filterSize:n,strides:e,pad:r,includeBatchInIndex:o},l=R.runKernel(Tg,s,a);return{result:l[0],indexes:l[1]}}var S6=E({maxPoolWithArgmax_:sSe});function aSe(t,n){let e=b(t,"a","maximum"),r=b(n,"b","maximum");[e,r]=on(e,r),e.dtype==="bool"&&(e=ge(e,"int32"),r=ge(r,"int32")),$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Qc,o)}var ji=E({maximum_:aSe});function lSe(t,n=null,e=!1){let o={x:b(t,"x","mean")},i={axis:n,keepDims:e};return R.runKernel(Ud,o,i)}var Bn=E({mean_:lSe});function Ln(t,n="float32"){if(hr(t),n==="complex64"){let r=Ln(t,"float32"),o=Ln(t,"float32");return Li(r,o)}let e=G1(rn(t),n);return R.makeTensor(e,t,n)}function Nr(t,n="float32"){if(hr(t),n==="complex64"){let r=Nr(t,"float32"),o=Ln(t,"float32");return Li(r,o)}let e=jx(rn(t),n);return R.makeTensor(e,t,n)}function M6(t,n,{indexing:e="xy"}={}){if(e!=="xy"&&e!=="ij")throw new TypeError(`${e} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=b(t,"x","meshgrid",t instanceof Lt?t.dtype:"float32");if(n===void 0)return[r];let o=b(n,"y","meshgrid",n instanceof Lt?n.dtype:"float32"),i=rn(r.shape),s=rn(o.shape);return e==="xy"?(r=$(r,[1,-1]),o=$(o,[-1,1]),[Vt(Nr([s,1],r.dtype),r),Vt(o,Nr([1,i],o.dtype))]):(r=$(r,[-1,1]),o=$(o,[1,-1]),[Vt(r,Nr([1,s],r.dtype)),Vt(Nr([i,1],o.dtype),o)])}function cSe(t,n){let e=b(t,"a","minimum"),r=b(n,"b","minimum");[e,r]=on(e,r),e.dtype==="bool"&&(e=ge(e,"int32"),r=ge(r,"int32")),$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(Jc,o)}var Ls=E({minimum_:cSe});function uSe(t,n,e){F(e==="reflect"||e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);let r=b(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");F(n.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${n.length}.`);let o=e==="reflect"?1:0;for(let a=0;a<r.rank;a++)F(n[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),F(n[a][0]>=0&&n[a][0]<=r.shape[a]-o&&n[a][1]>=0&&n[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:n,mode:e},s={x:r};return R.runKernel(Wd,s,i)}var B_=E({mirrorPad_:uSe});function dSe(t,n){let e=b(t,"a","mod"),r=b(n,"b","mod");[e,r]=on(e,r);let o={a:e,b:r};return R.runKernel(eu,o)}var L_=E({mod_:dSe});function pSe(t,n=null,e=!1){t=b(t,"x","moments");let r=lo(n,t.shape),o=Bn(t,r,e),i=o.shape;e||(i=Ia(o.shape,r));let s=Gt(Be(ge(t,"float32"),$(o,i))),a=Bn(s,r,e);return{mean:o,variance:a}}var ef=E({moments_:pSe});function hSe(t,n,e,r){let o=b(n,"data","multiRNNCell"),i=fp(e,"c","multiRNNCell"),s=fp(r,"h","multiRNNCell"),a=o,l=[];for(let d=0;d<t.length;d++){let p=t[d](a,i[d],s[d]);l.push(p[0]),l.push(p[1]),a=p[1]}let c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}var T6=E({multiRNNCell_:hSe});function fSe(t,n,e,r=!1){let o=b(t,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);e=e||Math.random();let l={logits:s===1?$(o,[1,-1]):o},c={numSamples:n,seed:e,normalized:r},u=R.runKernel(Dg,l,c);return s===1?$(u,[u.size]):u}var D6=E({multinomial_:fSe});function mSe(t,n){let e=b(t,"a","notEqual","string_or_numeric"),r=b(n,"b","notEqual","string_or_numeric");[e,r]=on(e,r),$t(e.shape,r.shape);let o={a:e,b:r};return R.runKernel(jh,o)}var Aa=E({notEqual_:mSe});function gSe(t,n,e=1,r=0,o="int32"){if(n<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${n}`);let s={indices:b(t,"indices","oneHot","int32")},a={dtype:o,depth:n,onValue:e,offValue:r};return R.runKernel(Zd,s,a)}var Fl=E({oneHot_:gSe});function vSe(t){let e={x:b(t,"x","onesLike")};return R.runKernel(Kd,e)}var co=E({onesLike_:vSe});function wSe(t,n){let e=b(t,"v1","outerProduct"),r=b(n,"v2","outerProduct");F(e.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${e.rank} and ${r.rank}.`);let o=$(e,[-1,1]),i=$(r,[1,-1]);return Vt(o,i)}var E6=E({outerProduct_:wSe});function ySe(t,n,e=0){let r=b(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:n,constantValue:e},i={x:r};return R.runKernel(Yd,i,o)}var Si=E({pad_:ySe});function xSe(t,n,e=0){return F(n.length===2,()=>"Invalid number of paddings. Must be length of 2."),Si(t,[n],e)}var I6=E({pad1d_:xSe});function _Se(t,n,e=0){return F(n.length===2&&n[0].length===2&&n[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Si(t,n,e)}var N6=E({pad2d_:_Se});function kSe(t,n,e=0){return F(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Si(t,n,e)}var A6=E({pad3d_:kSe});function bSe(t,n,e=0){return F(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Si(t,n,e)}var R6=E({pad4d_:bSe});function CSe(t,n,e){let r=b(t,"x","spaceToBatchND");F(r.rank>=1+n.length,()=>`input rank ${r.rank} should be > than [blockShape] ${n.length}`),F(e.length===n.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${n.length}`),F(r.shape.reduce((s,a,l)=>l>0&&l<=n.length?s&&(a+e[l-1][0]+e[l-1][1])%n[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${n.toString()}`);let o={x:r},i={blockShape:n,paddings:e};return R.runKernel(ap,o,i)}var Tp=E({spaceToBatchND_:CSe});function SSe(t,n,e,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=b(t,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(Xo(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let u=p6(l.shape,n,i,o,r),d=[u.dilationHeight,u.dilationWidth],p;r==="same"?p=TSe([u.filterHeight,u.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[f,m]=MSe([u.inHeight,u.inWidth],d,p),g=h?r:"valid",v=h?l:Tp(l,d,f),y=(e==="avg"?()=>vp(v,n,i,g,s):()=>Mp(v,n,i,g,s))(),_=h?y:wp(y,d,m);return c?$(_,[_.shape[1],_.shape[2],_.shape[3]]):_}function MSe(t,n,e){let r=e.map(u=>u[0]),o=e.map(u=>u[1]),i=t.concat(r,o),s=n.map((u,d)=>(u-i[d]%u)%u),a=o.map((u,d)=>u+s[d]),l=n.map((u,d)=>[r[d],a[d]]),c=n.map((u,d)=>[0,s[d]]);return[l,c]}function TSe(t,n){let r=t.map((s,a)=>s+(s-1)*(n[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var $_=E({pool_:SSe});function DSe(t,n){let e=b(t,"x","prelu"),r=b(n,"alpha","prelu"),o={x:e,alpha:r};return R.runKernel(Qd,o)}var Dp=E({prelu_:DSe});function ESe(t,n=null,e=!1){let r=b(t,"x","prod");r.dtype==="bool"&&(r=ge(r,"int32"));let o={x:r},i={axis:n,keepDims:e};return R.runKernel(Jd,o,i)}var V_=E({prod_:ESe});function ISe(t,n,e,r){let o=t.map((u,d)=>b(u,`tensors${d}`,"raggedGather","int32")),i=b(n,"paramsDenseValues","raggedGather"),s=b(e,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},l={outputRaggedRank:r},c=R.runKernel(Ag,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var O6=E({raggedGather_:ISe});function NSe(t,n,e){let r=b(t,"starts","raggedRange"),o=b(n,"limits","raggedRange",r.dtype),i=b(e,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=R.runKernel(Rg,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var F6=E({raggedRange_:NSe});function ASe(t,n,e,r,o){let i=b(t,"shape","raggedTensorToTensor","int32"),s=b(n,"values","raggedTensorToTensor"),a=b(e,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((d,p)=>b(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:o};return R.runKernel(Og,c,u)}var P6=E({raggedTensorToTensor_:ASe});function RSe(t,n,e){hr(t);let r=rn(t),o=null;if(e==null||e==="float32")o=new Float32Array(r);else if(e==="int32")o=new Int32Array(r);else if(e==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${e}`);for(let i=0;i<r;i++)o[i]=n();return R.makeTensor(o,t,e)}var B6=E({rand_:RSe});var KM=I2(j_());var q6={};Jt(q6,{TEST_EPSILON_FLOAT16:()=>FZ,createVideoElement:()=>qSe,encodeStrings:()=>PZ,expectArrayBuffersEqual:()=>WSe,expectArraysClose:()=>jSe,expectArraysEqual:()=>HSe,expectNumbersClose:()=>USe,expectPromiseToFail:()=>zSe,expectValuesInRange:()=>GSe,play:()=>KSe,testEpsilon:()=>G6});var VSe=.001,FZ=.1;function jSe(t,n,e){return e==null&&(e=G6()),U6(t,n,(r,o)=>W6(r,o,e))}function G6(){return R.backend.floatPrecision()===32?VSe:FZ}function U6(t,n,e){let r=!0;if((Hr(t)||Hr(n))&&(r=!1),Hr(t)&&Hr(n)&&(r=!0),r){let s=t.constructor.name,a=n.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(n)){let s=li(t),a=li(n);if(!Pi(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let o=Hr(t)?t:Sl(t),i=Hr(n)?n:Sl(n);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.
Actual:   ${o}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let a=o[s],l=i[s];if(!e(a,l))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${l}.
Actual:   ${o}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function zSe(t,n){t().then(()=>n.fail(),()=>n()),typeof expect<"u"&&expect().nothing()}function HSe(t,n){let e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return yl(t)||yl(t[0])||yl(n)||yl(n[0])?U6(t,e,(r,o)=>r==o):U6(t,n,(r,o)=>W6(r,o,0))}function USe(t,n,e){if(e==null&&(e=G6()),!W6(t,n,e))throw new Error(`Numbers differ: actual === ${t}, expected === ${n}`);typeof expect<"u"&&expect().nothing()}function W6(t,n,e){return!isFinite(t)&&!isFinite(n)?!0:!(isNaN(t)||isNaN(n)||Math.abs(t-n)>e)}function GSe(t,n,e){for(let r=0;r<t.length;r++)if(t[r]<n||t[r]>e)throw new Error(`Value out of range:${t[r]} low: ${n}, high: ${e}`)}function WSe(t,n){let e=new Float32Array(t),r=new Float32Array(n);if(e.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${e.length}`);for(let o=0;o<r.length;o++)if(e[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${e[o]} instead`)}function PZ(t){for(let n=0;n<t.length;n++){let e=t[n];Array.isArray(e)?PZ(e):t[n]=qh(e)}return t}function qSe(t){let n=document.createElement("video");return"playsInline"in n&&(n.playsInline=!0),n.muted=!0,n.loop=!0,n.style.position="fixed",n.style.left="0px",n.style.top="0px",n.preload="auto",n.appendChild(t),new Promise(e=>{n.addEventListener("loadeddata",r=>e(n)),n.load()})}function KSe(t){return z(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(n=>{t.requestVideoFrameCallback(n)}))})}var b0=class{constructor(n,e,r,o,i){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=KM.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let n,e,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*o*a,e=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(n))&&(r=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(n)}convertValue(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)}isValidTruncated(n){return n<=this.upper&&n>=this.lower}},WM=class{constructor(n,e,r,o){this.alpha=n,this.beta=1/e,this.dtype=r;let i=o||Math.random();this.randu=KM.alea(i.toString()),this.randn=new b0(0,1,r,!1,this.randu()),n<1?this.d=n+2/3:this.d=n-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let n,e,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,n=o*o,e=1-.331*n*n,r=.5*n+this.d*(1-s+Math.log(s)),i=this.randu(),i<e||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(n){return this.dtype==="float32"?n:Math.round(n)}},qM=class{constructor(n=0,e=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=n,this.range=e-n,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${n} - ${e} <= 1 and dtype is not float`);this.random=KM.alea(o)}convertValue(n){return this.canReturnFloat()?n:Math.round(n)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function ZSe(t,n,e=1,r="float32",o){if(hr(t),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new WM(n,e,r,o),s=at(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var K6=E({randomGamma_:ZSe});function XSe(t,n=0,e=1,r,o){if(hr(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new b0(n,e,r,!1,o),s=at(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var tf=E({randomNormal_:XSe});function YSe(t,n,e){if(n!=null&&n==="bool")throw new Error(`Unsupported data type ${n}`);return tf(t,0,1,n,e)}var Z6=E({randomStandardNormal_:YSe});function QSe(t,n=0,e=1,r="float32",o){hr(t);let i=at(t,r),s=new qM(n,e,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var ls=E({randomUniform_:QSe});function JSe(t,n,e,r){return ls(t,n,e,"int32",r)}var X6=E({randomUniformInt_:JSe});function Pl(t,n,e=1,r="float32"){if(e===0)throw new Error("Cannot have a step of zero");let o={start:t,stop:n,step:e,dtype:r};return R.runKernel(Fg,{},o)}function eMe(t){let e={input:b(t,"input","real")};return R.runKernel(Pg,e)}var Tu=E({real_:eMe});function tMe(t){let e={x:b(t,"x","reciprocal")};return R.runKernel(ru,e)}var z_=E({reciprocal_:tMe});function nMe(t){let e={x:b(t,"x","relu")};return R.runKernel(ou,e)}var Ao=E({relu_:nMe});function rMe(t){let e={x:b(t,"x","relu6")};return R.runKernel(iu,e)}var C0=E({relu6_:rMe});function oMe(t,n){let r={x:b(t,"x","reverse")},o={dims:n};return R.runKernel(rp,r,o)}var Qr=E({reverse_:oMe});function iMe(t){let n=b(t,"x","reverse");return F(n.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${n.rank}.`),Qr(n,0)}var Y6=E({reverse1d_:iMe});function sMe(t,n){let e=b(t,"x","reverse");return F(e.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${e.rank}.`),Qr(e,n)}var Q6=E({reverse2d_:sMe});function aMe(t,n){let e=b(t,"x","reverse");return F(e.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${e.rank}.`),Qr(e,n)}var J6=E({reverse3d_:aMe});function lMe(t,n){let e=b(t,"x","reverse");return F(e.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${e.rank}.`),Qr(e,n)}var e8=E({reverse4d_:lMe});function cMe(t){let e={x:b(t,"x","round")};return R.runKernel(su,e)}var S0=E({round_:cMe});function uMe(t){let e={x:b(t,"x","rsqrt","float32")};return R.runKernel(au,e)}var M0=E({rsqrt_:uMe});function dMe(t){let e={x:b(t,"x","selu")};return R.runKernel(lu,e)}var T0=E({selu_:dMe});function pMe(t,n,e,r,o,i=[1,1],s="NHWC"){let a=b(t,"x","separableConv2d"),l=b(n,"depthwiseFilter","separableConv2d"),c=b(e,"pointwiseFilter","separableConv2d"),u=a,d=!1;if(a.rank===3&&(d=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),F(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),F(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),F(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],h=l.shape[3];F(c.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`);let f=Nl(u,l,r,o,s,i),g=Vi(f,c,1,"valid",s);return d?$(g,[g.shape[1],g.shape[2],g.shape[3]]):g}var D0=E({separableConv2d_:pMe});function hMe(t,n){return z(this,null,function*(){let e=b(t,"x","setdiff1d"),r=b(n,"y","setdiff1d");F(e.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${e.dtype}) and y (${r.dtype}).`),F(e.rank===1,()=>`x should be 1D tensor, but got x (${e.shape}).`),F(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=yield e.data(),i=yield r.data(),s=new Set(i),a=0;for(let u=0;u<o.length;u++)s.has(o[u])||a++;let l=new yn([a],e.dtype),c=new yn([a],"int32");for(let u=0,d=0;u<o.length;u++)s.has(o[u])||(l.values[d]=o[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]})}var t8=hMe;function fMe(t){let e={x:b(t,"x","sign")};return R.runKernel(du,e)}var H_=E({sign_:fMe});function mMe(t){let e={x:b(t,"x","sin","float32")};return R.runKernel(cu,e)}var E0=E({sin_:mMe});function gMe(t){let e={x:b(t,"x","sinh")};return R.runKernel(uu,e)}var I0=E({sinh_:gMe});function vMe(t,n,e){let r=b(t,"x","slice1d");return F(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Ft(r,[n],[e])}var N0=E({slice1d_:vMe});function wMe(t,n,e){let r=b(t,"x","slice2d");return F(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Ft(r,n,e)}var hv=E({slice2d_:wMe});function yMe(t,n,e){let r=b(t,"x","slice3d");return F(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Ft(r,n,e)}var A0=E({slice3d_:yMe});function xMe(t,n,e){let r=b(t,"x","slice4d");return F(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Ft(r,n,e)}var nf=E({slice4d_:xMe});function _Me(t,n=-1){let e=b(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${n}`);let r={logits:e},o={dim:n};return R.runKernel(cp,r,o)}var Ep=E({softmax_:_Me});function kMe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let n={input:t};return R.runKernel(vg,n)}var Ip=E({fft_:kMe});function bMe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let n={input:t};return R.runKernel(_g,n)}var Du=E({ifft_:bMe});function CMe(t){let n=t.shape[t.shape.length-1],e=t.size/n,r;if(n<=2){let o=$(t,[e,n]);r=Du(o)}else{let o=[e,2*(n-1)],i=$(Tu(t),[e,n]),s=$(_p(t),[e,n]),a=Qr(Ft(i,[0,1],[e,n-2]),1),l=L(Qr(Ft(s,[0,1],[e,n-2]),1),Ue(-1)),c=vn([i,a],1),u=vn([s,l],1),d=$(Li(c,u),[o[0],o[1]]);r=Du(d)}if(r=Tu(r),t.rank===3&&t.shape[0]!==0){let o=r,i=t.shape[0];r=$(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var R0=E({irfft_:CMe});function SMe(t,n,e=0){let o={x:b(t,"x","split")},i={numOrSizeSplits:n,axis:e};return R.runKernel(lp,o,i)}var Jr=E({split_:SMe});function MMe(t,n){F(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let e=t.shape[t.shape.length-1],r=t.size/e,o;if(n!=null&&n<e){let f=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=n,o=Ft(t,f,m),e=n}else if(n!=null&&n>e){let f=t.shape.map(m=>m);f[t.shape.length-1]=n-e,o=vn([t,Ln(f)],t.shape.length-1),e=n}else o=t;let i=pt(o),s=$(Li(o,i),[r,e]),a=Ip(s),l=Math.floor(e/2)+1,c=Tu(a),u=_p(a),d=Jr(c,[l,e-l],c.shape.length-1),p=Jr(u,[l,e-l],u.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,$(Li(d[0],p[0]),h)}var Np=E({rfft_:MMe});function TMe(t,n){let e=b(t,"a","squaredDifference"),r=b(n,"b","squaredDifference");[e,r]=on(e,r),$t(e.shape,r.shape);let o={a:e,b:r},i={};return R.runKernel(mu,o,i)}var O0=E({squaredDifference_:TMe});function DMe(t,n){let e=b(t,"x","squeeze","string_or_numeric");return $(e,NF(e.shape,n).newShape)}var cs=E({squeeze_:DMe});function EMe(t,n=0){let e=fp(t,"tensors","stack","string_or_numeric");F(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&F(n<=e[0].rank,()=>"Axis must be <= rank of the tensor");let r=e,o={axis:n};return R.runKernel(Xd,r,o)}var Qn=E({stack_:EMe});function IMe(t,n=0){let r={x:b(t,"x","step")},o={alpha:n};return R.runKernel(yu,r,o)}var aa=E({step_:IMe});function NMe(t,n,e,r,o=0,i=0,s=0,a=0,l=0){let u={x:b(t,"x","stridedSlice","string_or_numeric")},d={begin:n,end:e,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return R.runKernel(Kg,u,d)}var U_=E({stridedSlice_:NMe});function AMe(t){let e={x:b(t,"x","tan","float32")};return R.runKernel(vu,e)}var G_=E({tan_:AMe});function Jn(t,n){ta(t);let e=li(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return $i(t,null,e,n)}function Ra(t,n,e){if(ta(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=li(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return $i(t,n,r,e)}function W_(t,n,e){if(ta(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=li(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return $i(t,n,r,e)}function n8(t,n,e){if(ta(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=li(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return $i(t,n,r,e)}function r8(t,n,e){if(ta(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=li(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return $i(t,n,r,e)}function o8(t,n,e){if(ta(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=li(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return n=n||r,$i(t,n,r,e)}var q_={};Jt(q_,{calculateShapes:()=>BZ,validateInput:()=>fv,validateUpdateShape:()=>i8});function i8(t,n,e){let r=n.rank>1?n.shape[n.rank-1]:1,o=n.rank>1?n.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${n.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(e.rank<o)throw new Error(i+` update.rank < ${o}. `);if(t.length<r+(e.rank-o))throw new Error(i+` Output shape length < ${r+(e.rank-o)}`);if(e.rank!==o+t.length-r)throw new Error(i+` update.rank != ${o+t.length-r}`);for(let s=0;s<o;++s)if(e.shape[s]!==n.shape[s])throw new Error(i+` updates.shape[${s}] (${e.shape[s]}) != indices.shape[${s}] (${n.shape[s]}).`);for(let s=0;s<e.rank-o;++s)if(e.shape[s+o]!==t[s+r])throw new Error(i+` updates.shape[${s+o}] (${e.shape[s+o]}) != shape[${s+o}] (${t[s+o]})`)}function fv(t,n,e){if(n.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(n.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${n.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(e.length===0){if(n.size===0)throw new Error(`Indices specified for empty output. indices shape: ${n.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}i8(e,n,t)}function BZ(t,n,e){let r=n.shape.length,o=r>1?n.shape[r-1]:1,i=e.length,s=1;for(let d=o;d<i;++d)s*=e[d];let a=o<1?1:o,l=rn(n.shape)/a,c=[...Tc(e.slice(0,o)),1],u=rn(e);return{sliceRank:o,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function RMe(t,n,e){let r=b(t,"tensor","tensorScatterupdate"),o=b(n,"indices","tensorScatterupdate","int32"),i=b(e,"updates","tensorScatterupdate");if(fv(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return R.runKernel(Vg,s,a)}var s8=E({tensorScatterUpdate_:RMe});function OMe(t,n=1,e=!0){let r=b(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${n}`);let i={x:r},s={k:n,sorted:e},[a,l]=R.runKernel(Qg,i,s);return{values:a,indices:l}}var K_=E({topk_:OMe});function FMe(t,n=0,e=1,r,o){if(hr(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new b0(n,e,r,!0,o),s=at(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var F0=E({truncatedNormal_:FMe});function PMe(t,n=0){let e=b(t,"x","unique","string_or_numeric");F(e.rank>0,()=>"The input tensor must be at least 1D");let r={x:e},o={axis:n},[i,s]=R.runKernel(e0,r,o);return{values:i,indices:s}}var Z_=E({unique_:PMe});function BMe(t,n,e){let r=b(t,"x","unsortedSegmentSum"),o=b(n,"segmentIds","unsortedSegmentSum","int32");F(yd(e),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:e};return R.runKernel(dp,i,s)}var P0=E({unsortedSegmentSum_:BMe});function LMe(t,n=0){let e=b(t,"x","unstack","string_or_numeric");F(n>=-e.shape.length&&n<e.shape.length,()=>`Axis = ${n} is not in [-${e.shape.length}, ${e.shape.length})`);let r={value:e},o={axis:n};return R.runKernel(up,r,o)}var eo=E({unstack_:LMe});function a8(t,n){return pv(t,n,"right")}function X_(t,n=!0,e,r){return R.makeVariable(t,n,e,r)}function ZM(t,n){let e=[];for(let i=0;i<n.length;i++)n[i]&&e.push(i);let r=at(t,"int32"),o=at([e.length,t.length],"int32");for(let i=0;i<e.length;i++){let s=r.indexToLoc(e[i]),a=i*t.length;o.values.set(s,a)}return o.toTensor()}function $Me(t){return z(this,null,function*(){let n=b(t,"condition","whereAsync","bool"),e=yield n.data(),r=ZM(n.shape,e);return t!==n&&n.dispose(),r})}var Y_=$Me;function VMe(t,n,e){return z(this,null,function*(){let r=b(t,"tensor","boolMask"),o=b(n,"mask","boolMask","bool"),i=e??0,s=o.rank,a=r.shape;F(s>0,()=>"mask cannot be scalar"),rr(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+s;m++)l*=a[m];let c=a.slice(0,i).concat([l],a.slice(i+s)),u=$(r,c),d=$(o,[-1]),p=yield Y_(d),h=cs(p,[1]),f=Ol(u,h,i);return t!==r&&r.dispose(),n!==o&&o.dispose(),h.dispose(),u.dispose(),d.dispose(),p.dispose(),f})}var LZ=VMe;function jMe(t,n,e){let r=b(t,"x","transpose");if(n==null&&(n=r.shape.map((s,a)=>a).reverse()),F(r.rank===n.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${n}.`),n.forEach(s=>{F(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${n}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:n};return r.dtype==="complex64"?ne(()=>{let s=Tu(r),a=_p(r);return s=R.runKernel(bl,{x:s},i),a=R.runKernel(bl,{x:a},i),e&&(a=Xt(a)),Li(s,a)}):R.runKernel(bl,o,i)}var jt=E({transpose_:jMe});function zMe(t,n,e,r,o=!0){let i=b(t,"v","movingAverage"),s=b(n,"x","movingAverage"),a=b(e,"decay","movingAverage");ZF(i,s),F(Pi(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=Ue(1),c=Be(l,a),u=L(Be(s,i),c);if(o){F(r!=null,()=>"When using zeroDebias: true, step is required.");let d=b(r,"step","movingAverage");u=je(u,Be(l,Yo(a,d)))}return fe(i,u)}var $Z=E({movingAverage_:zMe});function HMe(t,n,e){hr(e);let r=b(t,"indices","scatterND","int32"),o=b(n,"updates","scatterND");fv(o,r,e);let i={indices:r,updates:o},s={shape:e};return R.runKernel($g,i,s)}var VZ=E({scatterND_:HMe});function jZ(t,n,e,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let o=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(e.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${e.length}, should be: ${i}.`);let s=n.size;if(!(n.rank===0||n.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${n.shape}, should be [] or [${o}]`);if(n.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function GMe(t,n,e,r=0){hr(e);let o=b(t,"sparseIndices","sparseToDense","int32"),i=b(n,"sparseValues","sparseToDense","string_or_numeric"),s=b(r,"defaultValue","sparseToDense",i.dtype);jZ(o,i,e,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},l={outputShape:e};return R.runKernel(Wg,a,l)}var zZ=E({sparseToDense_:GMe});function WMe(t,n){let e=b(n,"indices","gatherND","int32"),o={params:b(t,"x","gatherND","string_or_numeric"),indices:e};return R.runKernel(xg,o)}var HZ=E({gatherND_:WMe});function UZ(t,n){if(n==null)return t.shape.slice();if(Pi(t.shape,n))return n;if(t.shape.length===n.length){let e=[];for(let r=0;r<t.shape.length;r++)n[r]==null&&t.shape[r]!=null?e.push(t.shape[r]):e.push(n[r]);return e}return n}function qMe(t,n,e,r){let o=b(t,"x","dropout");if(F(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),F(n>=0&&n<1,()=>`rate must be a float in the range [0, 1), but got ${n}.`),n===0)return t instanceof Lt?o.clone():o;let i=UZ(o,e),s=1-n,a=je(Rl(fe(ls(i,0,1,"float32",r),s)),s);return L(o,a)}var XM=E({dropout_:qMe});function YM(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function mv(t,n,e){let r=1-t%2,o=new Float32Array(t);for(let i=0;i<t;++i){let s=2*Math.PI*i/(t+r-1);o[i]=n-e*Math.cos(s)}return Jn(o,"float32")}function KMe(t,n,e=1){return z(this,null,function*(){let r=b(t,"predictions","inTopK"),o=b(n,"targets","inTopK");F(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),F(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),rr(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];F(e>0&&e<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${e}`);let s=yield r.data(),a=yield o.data(),[l,c]=[s.length/i,i],u=AF("bool",l);for(let d=0;d<l;d++){let p=d*c,h=s.subarray(p,p+c),f=[];for(let m=0;m<h.length;m++)f.push({value:h[m],index:m});f.sort((m,g)=>g.value-m.value),u[d]=0;for(let m=0;m<e;m++)if(f[m].index===a[d]){u[d]=1;break}}return t!==r&&r.dispose(),n!==o&&o.dispose(),Yr(u,o.shape,"bool")})}var GZ=KMe;var Ap={};Jt(Ap,{conv2d:()=>WZ,depthwiseConv2d:()=>qZ,matMul:()=>KZ});function ZMe(t,n,e,r,o,i="NHWC",s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]])),F(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),F(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),F(e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];F(c===e[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${e[2]}.`),F(u===e[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${e[3]}).`),Hn("conv2dDerFilter",o,s);let d={x:a,dy:l},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:e};return R.runKernel(ig,d,p)}var gv=E({conv2DBackpropFilter_:ZMe});function B0(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return L(t,aa(n));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function L0(t,n){let e=n,r=Pn(t.shape,n.shape);return r.length>0&&(e=Ge(e,r)),$(e,t.shape)}function $0(t,n,e,r){if(n==="linear")return t;if(n==="relu")return Ao(t);if(n==="elu")return Al(t);if(n==="relu6")return C0(t);if(n==="prelu")return Dp(t,e);if(n==="leakyrelu")return kp(t,r);if(n==="sigmoid")return ui(t);throw new Error(`Unknown fused activation ${n}.`)}var V0=(t,n)=>!(t>0)||n==="linear";function XMe({x:t,filter:n,strides:e,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",V0(R.state.gradientDepth,l)===!1){F(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let T=Vi(t,n,e,r,o,i,s);return a!=null&&(T=fe(T,a)),$0(T,l,c,u)}let d=b(t,"x","conv2d","float32"),p=b(n,"filter","conv2d","float32"),h=d,f=!1;d.rank===3&&(f=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),F(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Hn("fused conv2d",r,s);let m=o==="NHWC"?h.shape[3]:h.shape[1];F(p.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${p.shape[2]}.`),F(Xo(e,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`);let g=f0(h.shape,p.shape,e,i,r,s),v;a!=null&&(v=b(a,"bias","fused conv2d"),[v]=on(v,d),o==="NHWC"?$t(g.outShape,v.shape):(F(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),F(v.shape.length===0||v.shape[0]===g.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let w;if(c!=null){let T=c.shape;if(F(T.length<=1||T.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${T.length}.`),T.length===1)F(T[0]===1||T[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the number of output channels (${g.outChannels}).`);else if(T.length===3)try{$t(T,g.outShape)}catch{let A=`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(A)}w=b(c,"prelu weights","fused conv2d")}let y=(T,I)=>{F(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[A,P,N,B]=I,S=B0(T,N,l);F(oa(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let W=uv(P.shape,S,A,e,r),ie=gv(P,S,A.shape,e,r),Q=[W,ie];if(B!=null){let J=L0(B,S);Q.push(J)}return Q},_={x:h,filter:p,bias:v,preluActivationWeights:w},k={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?Ci((I,A,P)=>{let N=R.runKernel(Uh,_,k);return P([A,I,N]),f&&(N=$(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:y}})(h,p):Ci((I,A,P,N)=>{let B=R.runKernel(Uh,_,k);return N([A,I,B,P]),f&&(B=$(B,[B.shape[1],B.shape[2],B.shape[3]])),{value:B,gradFunc:y}})(h,p,v)}var WZ=E({fusedConv2d_:XMe});function YMe(t,n,e,r,o,i=[1,1],s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={x:a,dy:l},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:e};return R.runKernel(pg,c,u)}var QM=E({depthwiseConv2dNativeBackpropFilter_:YMe});function QMe(t,n,e,r,o,i=[1,1],s){let a=n,l=!1;n.rank===3&&(l=!0,a=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={dy:a,filter:e},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:t},d=R.runKernel(hg,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var JM=E({depthwiseConv2dNativeBackpropInput_:QMe});function JMe({x:t,filter:n,strides:e,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(V0(R.state.gradientDepth,l)===!1){let k=Nl(t,n,e,r,o,i,s);return a!=null&&(k=fe(k,a)),$0(k,l,c,u)}let d=b(t,"x","depthwiseConv2d","float32"),p=b(n,"filter","depthwiseConv2d","float32"),h=d,f=!1;d.rank===3&&(f=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),F(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),F(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),F(Xo(e,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),Hn("fused depthwiseConv2d",r,s);let m=f0(h.shape,p.shape,e,i,r,s,!0),g;a!=null&&(g=b(a,"bias","fused conv2d"),[g]=on(g,d),$t(m.outShape,g.shape));let v;c!=null&&(v=b(c,"prelu weights","fused depthwiseConv2d"));let w=(k,T)=>{F(oa(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[I,A,P,N]=T,B=B0(k,P,l),S=JM(A.shape,B,I,e,r,i,s),W=QM(A,B,I.shape,e,r,i,s);if(N!=null){let ie=L0(g,B);return[S,W,ie]}return[S,W]},y={x:h,filter:p,bias:g,preluActivationWeights:v},_={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?Ci((T,I,A)=>{let P=R.runKernel(Gh,y,_);return A([I,T,P]),f&&(P=$(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:w}})(h,p):Ci((T,I,A,P)=>{let N=R.runKernel(Gh,y,_);return P([I,T,N,A]),f&&(N=$(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:w}})(h,p,g)}var qZ=E({fusedDepthwiseConv2d_:JMe});function eTe({a:t,b:n,transposeA:e=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(V0(R.state.gradientDepth,i)===!1){let B=Vt(t,n,e,r);return o!=null&&(B=fe(B,o)),$0(B,i,s,a)}let l=b(t,"a","fused matMul"),c=b(n,"b","fused matMul");[l,c]=on(l,c);let u=e?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=e?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],f=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=rn(f),v=rn(m);F(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${e} and transposeB=${r} must match.`);let y=$t(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,h]),_=e?$(l,[g,u,p]):$(l,[g,p,u]),k=r?$(c,[v,h,d]):$(c,[v,d,h]),T;o!=null&&(T=b(o,"bias","fused matMul"),[T]=on(T,l),$t(y,T.shape));let I;s!=null&&(I=b(s,"prelu weights","fused matMul"));let A=(B,S)=>{let[W,ie,Q,J]=S,G=B0($(B,Q.shape),Q,i),H,V;if(!e&&!r?(H=Vt(G,ie,!1,!0),V=Vt(W,G,!0,!1)):!e&&r?(H=Vt(G,ie,!1,!1),V=Vt(G,W,!0,!1)):e&&!r?(H=Vt(ie,G,!1,!0),V=Vt(W,G,!1,!1)):(H=Vt(ie,G,!0,!0),V=Vt(G,W,!0,!0)),o!=null){let K=L0(J,G);return[H,V,K]}else return[H,V]},P={a:_,b:k,bias:T,preluActivationWeights:I},N={transposeA:e,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?Ci((S,W,ie)=>{let Q=R.runKernel(Hh,P,N);return ie([S,W,Q]),{value:$(Q,y),gradFunc:A}})(_,k):Ci((S,W,ie,Q)=>{let J=R.runKernel(Hh,P,N);return Q([S,W,J,ie]),{value:$(J,y),gradFunc:A}})(_,k,T)}var KZ=E({fusedMatMul_:eTe});function tTe(t){return mv(t,.54,.46)}var ZZ=E({hammingWindow_:tTe});function nTe(t){return mv(t,.5,.5)}var eT=E({hannWindow_:nTe});function rTe(t,n,e,r=!1,o=0){let i=0,s=[];for(;i+n<=t.size;)s.push(Ft(t,i,n)),i+=e;if(r)for(;i<t.size;){let a=i+n-t.size,l=vn([Ft(t,i,n-a),sa([a],o)]);s.push(l),i+=e}return s.length===0?Ra([],[0,n]):$(vn(s),[s.length,n])}var tT=E({frame_:rTe});function oTe(t,n,e,r,o=eT){r==null&&(r=YM(n));let i=tT(t,n,e),s=L(i,o(n));return Np(s,r)}var XZ=E({stft_:oTe});function iTe(t,n,e,r,o="bilinear",i=0){let s=b(t,"image","cropAndResize"),a=b(n,"boxes","cropAndResize","float32"),l=b(e,"boxInd","cropAndResize","int32"),c=a.shape[0];F(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),F(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),F(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),F(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),F(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),F(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let u={image:s,boxes:a,boxInd:l},d={method:o,extrapolationValue:i,cropSize:r};return R.runKernel(cg,u,d)}var YZ=E({cropAndResize_:iTe});function sTe(t){let n=b(t,"image","flipLeftRight","float32");F(n.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`);let e={image:n};return R.runKernel(yg,e,{})}var QZ=E({flipLeftRight_:sTe});function aTe(t){let n=b(t,"image","grayscaleToRGB"),e=n.rank-1,r=n.shape[e];F(n.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`),F(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(n.rank);return o.fill(1,0,e),o[e]=3,Io(n,o)}var JZ=E({grayscaleToRGB_:aTe});function lTe(t){let n=b(t,"image","RGBToGrayscale"),e=n.rank-1,r=n.shape[e];F(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),F(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=n.dtype,i=ge(n,"float32"),s=Jn([.2989,.587,.114]),a;switch(n.rank){case 2:a=xp("ij,j->i",i,s);break;case 3:a=xp("ijk,k->ij",i,s);break;case 4:a=xp("ijkl,l->ijk",i,s);break;case 5:a=xp("ijklm,m->ijkl",i,s);break;case 6:a=xp("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=gr(a,-1),ge(a,o)}var eX=E({rgbToGrayscale_:lTe});function cTe(t,n,e=0,r=.5){let o=b(t,"image","rotateWithOffset","float32");F(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:n,fillValue:e,center:r};return R.runKernel(t0,i,s)}var tX=E({rotateWithOffset_:cTe});function Oa(t,n,e,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=t.shape[0];return e=Math.min(e,s),F(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),F(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),F(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),F(n.rank===1,()=>"scores must be a 1D tensor"),F(n.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${n.shape[0]}`),F(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:e,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function uTe(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY){let i=b(t,"boxes","nonMaxSuppression","float32"),s=b(n,"scores","nonMaxSuppression","float32"),a=Oa(i,s,e,r,o);e=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l={maxOutputSize:e,iouThreshold:r,scoreThreshold:o};return R.runKernel(Eg,{boxes:i,scores:s},l)}var nX=E({nonMaxSuppression_:uTe});function rX(t,n,e){let r=dTe(t,n,e),o=r<0?-(r+1):r;t.splice(o,0,n)}function dTe(t,n,e){return hTe(t,n,e||pTe)}function pTe(t,n){return t>n?1:t<n?-1:0}function hTe(t,n,e){let r=0,o=t.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=e(n,t[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}function nT(t,n,e,r,o){return l8(t,n,e,r,o,0)}function rT(t,n,e,r,o,i){return l8(t,n,e,r,o,0,!1,i,!0)}function oT(t,n,e,r,o,i){return l8(t,n,e,r,o,i,!0)}function l8(t,n,e,r,o,i,s=!1,a=!1,l=!1){let c=[];for(let g=0;g<n.length;g++)n[g]>o&&c.push({score:n[g],boxIndex:g,suppressBeginIndex:0});c.sort(oX);let u=i>0?-.5/i:0,d=[],p=[];for(;d.length<e&&c.length>0;){let g=c.pop(),{score:v,boxIndex:w,suppressBeginIndex:y}=g;if(v<o)break;let _=!1;for(let k=d.length-1;k>=y;--k){let T=fTe(t,w,d[k]);if(T>=r){_=!0;break}if(g.score=g.score*mTe(r,u,T),g.score<=o)break}g.suppressBeginIndex=d.length,_||(g.score===v?(d.push(w),p.push(g.score)):g.score>o&&rX(c,g,oX))}let h=d.length,f=e-h;a&&f>0&&(d.push(...new Array(f).fill(0)),p.push(...new Array(f).fill(0)));let m={selectedIndices:d};return s&&(m.selectedScores=p),l&&(m.validOutputs=h),m}function fTe(t,n,e){let r=t.subarray(n*4,n*4+4),o=t.subarray(e*4,e*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),h=(a-i)*(l-s),f=(d-c)*(p-u);if(h<=0||f<=0)return 0;let m=Math.max(i,c),g=Math.max(s,u),v=Math.min(a,d),w=Math.min(l,p),y=Math.max(v-m,0)*Math.max(w-g,0);return y/(h+f-y)}function mTe(t,n,e){let r=Math.exp(n*e*e);return e<=t?r:0}function oX(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function gTe(i,s,a){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY){let l=b(t,"boxes","nonMaxSuppressionAsync"),c=b(n,"scores","nonMaxSuppressionAsync"),u=Oa(l,c,e,r,o);e=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold;let d=yield Promise.all([l.data(),c.data()]),p=d[0],h=d[1],{selectedIndices:f}=nT(p,h,e,r,o);return l!==t&&l.dispose(),c!==n&&c.dispose(),Jn(f,"int32")})}var iX=gTe;function vTe(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=b(t,"boxes","nonMaxSuppression"),a=b(n,"scores","nonMaxSuppression"),l=Oa(s,a,e,r,o,i);e=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c={boxes:s,scores:a},u={maxOutputSize:e,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},d=R.runKernel(Ng,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}var sX=E({nonMaxSuppressionWithScore_:vTe});function wTe(s,a,l){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let c=b(t,"boxes","nonMaxSuppressionAsync"),u=b(n,"scores","nonMaxSuppressionAsync"),d=Oa(c,u,e,r,o,i);e=d.maxOutputSize,r=d.iouThreshold,o=d.scoreThreshold,i=d.softNmsSigma;let p=yield Promise.all([c.data(),u.data()]),h=p[0],f=p[1],{selectedIndices:m,selectedScores:g}=oT(h,f,e,r,o,i);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:Jn(m,"int32"),selectedScores:Jn(g)}})}var aX=wTe;function yTe(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=b(t,"boxes","nonMaxSuppression"),a=b(n,"scores","nonMaxSuppression"),l=Oa(s,a,e,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,p={boxes:s,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},f=R.runKernel(Ig,p,h);return{selectedIndices:f[0],validOutputs:f[1]}}var lX=E({nonMaxSuppressionPadded_:yTe});function xTe(s,a,l){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let c=b(t,"boxes","nonMaxSuppressionAsync"),u=b(n,"scores","nonMaxSuppressionAsync"),d=Oa(c,u,e,r,o,null),p=d.maxOutputSize,h=d.iouThreshold,f=d.scoreThreshold,[m,g]=yield Promise.all([c.data(),u.data()]),{selectedIndices:v,validOutputs:w}=rT(m,g,p,h,f,i);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:Jn(v,"int32"),validOutputs:Ue(w,"int32")}})}var cX=xTe;function _Te(t,n,e=!1,r=!1){let o=b(t,"images","resizeBilinear");F(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),F(n.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`),F(r===!1||e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=$(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=n,a={images:i},l={alignCorners:e,halfPixelCenters:r,size:n},c=R.runKernel(np,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var iT=E({resizeBilinear_:_Te});function kTe(t,n,e=!1,r=!1){let o=b(t,"images","resizeNearestNeighbor");F(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),F(n.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`),F(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),F(r===!1||e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=$(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=n,a={images:i},l={alignCorners:e,halfPixelCenters:r,size:n},c=R.runKernel(tp,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var sT=E({resizeNearestNeighbor_:kTe});function bTe(t,n="binary",e=!1,r=.5){let o=b(t,"image","threshold"),i=.2989,s=.587,a=.114,l=o.shape[0]*o.shape[1],c=L(Jn([r]),255),u,d,p,h;if(F(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),F(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),F(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),F(n==="otsu"||n==="binary",()=>`Method must be binary or otsu, but was ${n}`),o.shape[2]===3){[u,d,p]=Jr(o,[1,1,1],-1);let g=L(u,i),v=L(d,s),w=L(p,a);h=fe(fe(g,v),w)}else h=t;if(n==="otsu"){let g=f_(ge(S0(h),"int32"),Yr([]),256);c=CTe(g,l)}let f=e?as(h,c):Yn(h,c);return ge(L(f,255),"int32")}function CTe(t,n){let e=Jn([-1]),r=Jn([0]),o=Jn([0]),i,s,a,l,c,u;for(let d=0;d<t.size-1;d++){i=Ft(t,0,d+1),s=Ft(t,d+1),c=je(Ge(i),n),u=je(Ge(s),n);let p=Ge(L(i,Pl(0,i.size)));a=je(p,Ge(i));let h=sa(s.shape,i.size),f=fe(Pl(0,s.size),h),m=L(s,f);l=je(Ge(m),Ge(s));let g=Be(a,l),v=Be(a,l),w=L(c,u);o=L(L(w,g),v);let y=Yn(o,r);r=An(y,o,r),e=An(y,Jn([d]),e)}return e}var uX=E({threshold_:bTe});function STe(t,n,e="nearest",r="constant",o=0,i){let s=b(t,"image","transform","float32"),a=b(n,"transforms","transform","float32");F(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),F(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),F(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let l={image:s,transforms:a},c={interpolation:e,fillMode:r,fillValue:o,outputShape:i};return R.runKernel(Jg,l,c)}var dX=E({transform_:STe});function MTe(t,n,e){let r=b(t,"a","bandPart");F(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,l;typeof n=="number"?(F(n%1===0,()=>`bandPart(): numLower must be an integer, got ${n}.`),F(n<=i,()=>`bandPart(): numLower (${n}) must not be greater than the number of rows (${i}).`),a=b(n<0?i:n,"numLower","bandPart")):(F(n.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=An(Mu(n,0),i,Ls(n,i))),typeof e=="number"?(F(e%1===0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),F(e<=s,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${s}).`),l=b(e<0?s:e,"numUpper","bandPart")):(F(e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=An(Mu(e,0),s,Ls(e,s)));let c=$(Pl(0,i,1,"int32"),[-1,1]),u=Pl(0,s,1,"int32"),d=Be(c,u),p=No(as(d,a),bi(d,Xt(l))),h=Ln([i,s],r.dtype);return $(Qn(eo($(r,[-1,i,s])).map(f=>An(p,f,h))),o)}var pX=E({bandPart_:MTe});function TTe(t){let n;if(Array.isArray(t)){n=!1,F(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=t[0].shape[0];for(let i=1;i<t.length;++i)F(t[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${o})`)}else n=!0,t=Jr(t,t.shape[0],0).map(o=>cs(o,[0]));F(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let e=[],r=t;for(let o=0;o<t.length;++o)e.push(R.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=L(Ge(L(e[s],i)),e[s]);i=Be(i,a)}return je(i,Su(i,"euclidean"))}));return n?Qn(e,0):e}var hX=E({gramSchmidt_:TTe});function DTe(t,n=!1){if(F(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return fX(t,n);{let e=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=eo($(t,[e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];r.forEach(l=>{let[c,u]=fX(l,n);o.push(c),i.push(u)});let s=$(Qn(o,0),t.shape),a=$(Qn(i,0),t.shape);return[s,a]}}function fX(t,n=!1){return R.tidy(()=>{F(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let e=t.shape[0],r=t.shape[1],o=Jh(e),i=ki(t),s=Ra([[1]],[1,1]),a=ki(s),l=e>=r?r:e;for(let c=0;c<l;++c){let u=i,d=a,p=o;[a,i,o]=R.tidy(()=>{let h=Ft(i,[c,c],[e-c,1]),f=Su(h),m=Ft(i,[c,c],[1,1]),g=An(Yn(m,0),Ra([[-1]]),Ra([[1]])),v=Be(m,L(g,f)),w=je(h,v);w.shape[0]===1?a=ki(s):a=vn([s,Ft(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);let y=Xt(je(Vt(g,v),f)),_=Ft(i,[c,0],[e-c,r]),k=L(y,a),T=jt(a);if(c===0)i=Be(_,Vt(k,Vt(T,_)));else{let P=Be(_,Vt(k,Vt(T,_)));i=vn([Ft(i,[0,0],[c,r]),P],0)}let I=jt(k),A=Ft(o,[0,c],[e,o.shape[1]-c]);if(c===0)o=Be(A,Vt(Vt(A,a),I));else{let P=Be(A,Vt(Vt(A,a),I));o=vn([Ft(o,[0,0],[e,c]),P],1)}return[a,i,o]}),gt([u,d,p])}return!n&&e>r&&(o=Ft(o,[0,0],[e,r]),i=Ft(i,[0,0],[r,r])),[o,i]})}var mX=E({qr_:DTe});var Ar=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(Ar||{});function ETe(t,n,e=Ar.SUM_BY_NONZERO_WEIGHTS){let r=b(t,"losses","computeWeightedLoss"),o=null;n!=null&&(o=b(n,"weights","computeWeightedLoss"));let i=o==null?r:L(r,o);if(e===Ar.NONE)return i;if(e===Ar.SUM)return Ge(i);if(e===Ar.MEAN){if(o==null)return Bn(i);{let s=r.size/o.size,a=je(Ge(i),Ge(o));return s>1?je(a,Ue(s)):a}}if(e===Ar.SUM_BY_NONZERO_WEIGHTS){if(o==null)return je(Ge(i),Ue(r.size));{let s=L(o,Nr(r.shape)),a=ge(Ge(Aa(s,Ue(0))),"float32");return je(Ge(i),a)}}throw Error(`Unknown reduction: ${e}`)}var di=E({computeWeightedLoss_:ETe});function ITe(t,n,e,r=Ar.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","absoluteDifference"),i=b(n,"predictions","absoluteDifference"),s=null;e!=null&&(s=b(e,"weights","absoluteDifference")),rr(o.shape,i.shape,"Error in absoluteDifference: ");let a=zn(Be(o,i));return di(a,s,r)}var gX=E({absoluteDifference_:ITe});function NTe(t,n,e,r,o=Ar.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","cosineDistance"),s=b(n,"predictions","cosineDistance"),a=null;r!=null&&(a=b(r,"weights","cosineDistance")),rr(i.shape,s.shape,"Error in cosineDistance: ");let l=Ue(1),c=Be(l,Ge(L(i,s),e,!0));return di(c,a,o)}var vX=E({cosineDistance_:NTe});function ATe(t,n,e,r=Ar.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","hingeLoss"),i=b(n,"predictions","hingeLoss"),s=null;e!=null&&(s=b(e,"weights","hingeLoss")),rr(o.shape,i.shape,"Error in hingeLoss: ");let a=Ue(1);o=Be(L(Ue(2),o),a);let l=Ao(Be(a,L(o,i)));return di(l,s,r)}var wX=E({hingeLoss_:ATe});function RTe(t,n,e,r=1,o=Ar.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","huberLoss"),s=b(n,"predictions","huberLoss"),a=null;e!=null&&(a=b(e,"weights","huberLoss")),rr(i.shape,s.shape,"Error in huberLoss: ");let l=Ue(r),c=zn(Be(s,i)),u=Ls(c,l),d=Be(c,u),p=fe(L(Ue(.5),Gt(u)),L(l,d));return di(p,a,o)}var yX=E({huberLoss_:RTe});function OTe(t,n,e,r=1e-7,o=Ar.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","logLoss"),s=b(n,"predictions","logLoss"),a=null;e!=null&&(a=b(e,"weights","logLoss")),rr(i.shape,s.shape,"Error in logLoss: ");let l=Ue(1),c=Ue(r),u=Xt(L(i,wo(fe(s,c)))),d=L(Be(l,i),wo(fe(Be(l,s),c))),p=Be(u,d);return di(p,a,o)}var xX=E({logLoss_:OTe});function FTe(t,n,e,r=Ar.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","meanSquaredError"),i=b(n,"predictions","meanSquaredError"),s=null;e!=null&&(s=b(e,"weights","meanSquaredError")),rr(o.shape,i.shape,"Error in meanSquaredError: ");let a=O0(o,i);return di(a,s,r)}var _X=E({meanSquaredError_:FTe});function PTe(t,n){let e=b(t,"labels","sigmoidCrossEntropyWithLogits"),r=b(n,"logits","sigmoidCrossEntropyWithLogits");rr(e.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=Ao(r),i=L(r,e),s=bp(mr(Xt(zn(r))));return fe(Be(o,i),s)}function BTe(t,n,e,r=0,o=Ar.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"multiClassLabels","sigmoidCrossEntropy"),s=b(n,"logits","sigmoidCrossEntropy"),a=null;if(e!=null&&(a=b(e,"weights","sigmoidCrossEntropy")),rr(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=Ue(r),u=Ue(1),d=Ue(.5);i=fe(L(i,Be(u,c)),L(d,c))}let l=PTe(i,s);return di(l,a,o)}var kX=E({sigmoidCrossEntropy_:BTe});function LTe(t,n,e=-1){if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${n.rank} and dim was ${e}`);return Ci((o,i,s)=>{let l=Cp(i,[e],!0),c=Be(ge(i,"float32"),l);s([o,c]);let u=Xt(L(c,o));return{value:Ge(u,[e]),gradFunc:(h,f)=>{let[m,g]=f,v=Ia(h.shape,[e]);return[L($(h,v),Be(ge(m,"float32"),mr(g))),L($(h,v),Be(mr(g),ge(m,"float32")))]}}})(t,n)}function $Te(t,n,e,r=0,o=Ar.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"onehotLabels","softmaxCrossEntropy"),s=b(n,"logits","softmaxCrossEntropy"),a=null;if(e!=null&&(a=b(e,"weights","softmaxCrossEntropy")),rr(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=Ue(r),u=Ue(1),d=Ue(i.shape[1]);i=fe(L(i,Be(u,c)),je(c,d))}let l=LTe(i,s);return di(l,a,o)}var bX=E({softmaxCrossEntropy_:$Te});function VTe(t,n,e,r){let o=b(t,"indices","sparseFillEmptyRows","int32"),i=b(n,"values","sparseFillEmptyRows"),s=b(e,"denseShape","sparseFillEmptyRows","int32"),a=b(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let l={indices:o,values:i,denseShape:s,defaultValue:a},c=R.runKernel(zg,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var CX=E({sparseFillEmptyRows_:VTe});function jTe(t,n,e){let r=b(t,"inputIndices","sparseReshape","int32"),o=b(n,"inputShape","sparseReshape","int32"),i=b(e,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=R.runKernel(Hg,s);return{outputIndices:a[0],outputShape:a[1]}}var SX=E({sparseReshape_:jTe});function zTe(t,n,e){let r=b(t,"data","sparseSegmentMean"),o=b(n,"indices","sparseSegmentMean","int32"),i=b(e,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return R.runKernel(Ug,s)}var MX=E({sparseSegmentMean_:zTe});function HTe(t,n,e){let r=b(t,"data","sparseSegmentSum"),o=b(n,"indices","sparseSegmentSum","int32"),i=b(e,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return R.runKernel(Gg,s)}var TX=E({sparseSegmentSum_:HTe});function UTe(t,n,e,r,o,i,s,a){let l=b(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let c=b(n,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:e,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},d={data:l,dataSplits:c},p=R.runKernel(Zg,d,u);return{nGrams:p[0],nGramsSplits:p[1]}}var DX=E({stringNGrams_:UTe});function GTe(t,n,e=!0){let r=b(t,"input","stringSplit","string"),o=b(n,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:e},s={input:r,delimiter:o},a=R.runKernel(Xg,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var EX=E({stringSplit_:GTe});function WTe(t,n){let e=b(t,"input","stringToHashBucketFast","string"),r={numBuckets:n};if(n<=0)throw new Error("Number of buckets must be at least 1");let o={input:e};return R.runKernel(Yg,o,r)}var IX=E({stringToHashBucketFast_:WTe});function qTe(t,n,e,r=!0){let o=b(t,"input","staticRegexReplace","string"),i={pattern:n,rewrite:e,replaceGlobal:r};return R.runKernel(zh,{x:o},i)}var NX=E({staticRegexReplace_:qTe});var AX={fft:Ip,ifft:Du,rfft:Np,irfft:R0},RX={hammingWindow:ZZ,hannWindow:eT,frame:tT,stft:XZ},Mi={flipLeftRight:QZ,grayscaleToRGB:JZ,resizeNearestNeighbor:sT,resizeBilinear:iT,rgbToGrayscale:eX,rotateWithOffset:tX,cropAndResize:YZ,nonMaxSuppression:nX,nonMaxSuppressionAsync:iX,nonMaxSuppressionWithScore:sX,nonMaxSuppressionWithScoreAsync:aX,nonMaxSuppressionPadded:lX,nonMaxSuppressionPaddedAsync:cX,threshold:uX,transform:dX},aT={bandPart:pX,gramSchmidt:hX,qr:mX},OX={absoluteDifference:gX,computeWeightedLoss:di,cosineDistance:vX,hingeLoss:wX,huberLoss:yX,logLoss:xX,meanSquaredError:_X,sigmoidCrossEntropy:kX,softmaxCrossEntropy:bX},FX={sparseFillEmptyRows:CX,sparseReshape:SX,sparseSegmentMean:MX,sparseSegmentSum:TX},PX={stringNGrams:DX,stringSplit:EX,stringToHashBucketFast:IX,staticRegexReplace:NX};var ve={};Jt(ve,{Serializable:()=>Q_,SerializationMap:()=>lT,getRegisteredName:()=>ZTe,registerClass:()=>u8});var KTe=new Map,c8=new Map,Q_=class{getClassName(){return this.constructor.className}static fromConfig(n,e){return new n(e)}},lT=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]}};function u8(t,n,e){F(t.className!=null,()=>"Class being registered does not have the static className property defined."),F(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),F(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof n>"u"&&(n="Custom"),typeof e>"u"&&(e=t.className);let r=e,o=n+">"+r;return lT.register(t),KTe.set(o,t),c8.set(t,o),t}function ZTe(t){return c8.has(t)?c8.get(t):t.className}var Qo=class extends Q_{minimize(n,e=!1,r){let{value:o,grads:i}=this.computeGradients(n,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return gt(i),e?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(n,e){return R_(n,e)}dispose(){this.iterations_!=null&&gt(this.iterations_)}saveIterations(){return z(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ue(this.iterations_,"int32")}})}getWeights(){return z(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(n){return z(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(n){return z(this,null,function*(){return this.iterations_=(yield n[0].tensor.data())[0],n.slice(1)})}};Object.defineProperty(Qo,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});var rf=class extends Qo{static get className(){return"Adadelta"}constructor(n,e,r=null){super(),this.learningRate=n,this.rho=e,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=R.backend.epsilon())}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=R.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:ne(()=>pt(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:ne(()=>pt(i).variable(s))});let a=Array.isArray(n)?n[o].tensor:n[r];if(a==null)return;let l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;ne(()=>{let u=fe(L(l,this.rho),L(Gt(a),1-this.rho)),d=L(je(In(fe(c,this.epsilon)),In(fe(l,this.epsilon))),a),p=fe(L(c,this.rho),L(Gt(d),1-this.rho));l.assign(u),c.assign(p);let h=fe(L(d,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(gt(this.accumulatedGrads.map(n=>n.variable)),gt(this.accumulatedUpdates.map(n=>n.variable)))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=n.length/2,r=!1;this.accumulatedGrads=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.rho,e.epsilon)}};var of=class extends Qo{static get className(){return"Adagrad"}constructor(n,e=.1){super(),this.learningRate=n,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=R.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:ne(()=>sa(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(n)?n[o].tensor:n[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;ne(()=>{let l=fe(a,Gt(s));a.assign(l);let c=fe(L(je(s,In(fe(l,R.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&gt(this.accumulatedGrads.map(n=>n.variable))}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulatedGrads=n.map(r=>({originalName:r.name,variable:r.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(n,e){return new n(e.learningRate,e.initialAccumulatorValue)}};var sf=class extends Qo{static get className(){return"Adam"}constructor(n,e,r,o=null){super(),this.learningRate=n,this.beta1=e,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ne(()=>{this.accBeta1=Ue(e).variable(),this.accBeta2=Ue(r).variable()}),o==null&&(this.epsilon=R.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(r=>r.name):Object.keys(n);ne(()=>{let r=Be(1,this.accBeta1),o=Be(1,this.accBeta2);e.forEach((i,s)=>{let a=R.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:ne(()=>pt(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:ne(()=>pt(a).variable(l))});let c=Array.isArray(n)?n[s].tensor:n[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,p=fe(L(u,this.beta1),L(c,1-this.beta1)),h=fe(L(d,this.beta2),L(Gt(c),1-this.beta2)),f=je(p,r),m=je(h,o);u.assign(p),d.assign(h);let g=fe(L(je(f,fe(In(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(L(this.accBeta1,this.beta1)),this.accBeta2.assign(L(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&gt(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedSecondMoment!=null&&gt(this.accumulatedSecondMoment.map(n=>n.variable))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n),ne(()=>{this.accBeta1.assign(Yo(this.beta1,this.iterations_+1)),this.accBeta2.assign(Yo(this.beta2,this.iterations_+1))});let e=n.length/2,r=!1;this.accumulatedFirstMoment=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon)}};var af=class extends Qo{static get className(){return"Adamax"}constructor(n,e,r,o=null,i=0){super(),this.learningRate=n,this.beta1=e,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ne(()=>{this.iteration=Ue(0).variable(),this.accBeta1=Ue(e).variable()}),o==null&&(this.epsilon=R.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(r=>r.name):Object.keys(n);ne(()=>{let r=Be(1,this.accBeta1),o=je(-this.learningRate,fe(L(this.iteration,this.decay),1));e.forEach((i,s)=>{let a=R.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:pt(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:pt(a).variable(l)});let c=Array.isArray(n)?n[s].tensor:n[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,p=fe(L(u,this.beta1),L(c,1-this.beta1)),h=L(d,this.beta2),f=zn(c),m=ji(h,f);u.assign(p),d.assign(m);let g=fe(L(je(o,r),je(p,fe(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(fe(this.iteration,1)),this.accBeta1.assign(L(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&gt(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedWeightedInfNorm!=null&&gt(this.accumulatedWeightedInfNorm.map(n=>n.variable))}getWeights(){return z(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(n){return z(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}};var Eu=class extends Qo{static get className(){return"SGD"}constructor(n){super(),this.learningRate=n,this.setLearningRate(n)}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=Array.isArray(n)?n[o].tensor:n[r];if(i==null)return;let s=R.registeredVariables[r];ne(()=>{let a=fe(L(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=qn(Ue(-n))}dispose(){this.c.dispose()}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()]})}setWeights(n){return z(this,null,function*(){if(n=yield this.extractIterations(n),n.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(n,e){return new n(e.learningRate)}};var lf=class extends Eu{static get className(){return"Momentum"}constructor(n,e,r=!1){super(n),this.learningRate=n,this.momentum=e,this.useNesterov=r,this.accumulations=[],this.m=Ue(this.momentum)}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=R.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:ne(()=>pt(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(n)?n[o].tensor:n[r];a!=null&&ne(()=>{let l,c=fe(L(this.m,s),a);this.useNesterov?l=fe(L(this.c,fe(a,L(c,this.m))),i):l=fe(L(this.c,c),i),s.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&gt(this.accumulations.map(n=>n.variable))}setMomentum(n){this.momentum=n}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulations=n.map(r=>({originalName:r.name,variable:r.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(n,e){return new n(e.learningRate,e.momentum,e.useNesterov)}};var cf=class extends Qo{static get className(){return"RMSProp"}constructor(n,e=.9,r=0,o=null,i=!1){if(super(),this.learningRate=n,this.decay=e,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=R.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=R.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:ne(()=>pt(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:ne(()=>pt(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:ne(()=>pt(i).variable(s))});let a=Array.isArray(n)?n[o].tensor:n[r];if(a==null)return;let l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;ne(()=>{let u=fe(L(l,this.decay),L(Gt(a),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[o].variable,p=fe(L(d,this.decay),L(a,1-this.decay)),h=je(L(a,this.learningRate),In(Be(u,fe(Gt(p),this.epsilon)))),f=fe(L(c,this.momentum),h);l.assign(u),d.assign(p),c.assign(f);let m=Be(i,f);i.assign(m)}else{let d=fe(L(l,this.decay),L(Gt(a),1-this.decay)),p=fe(L(c,this.momentum),je(L(a,this.learningRate),In(fe(d,this.epsilon))));l.assign(d),c.assign(p);let h=Be(i,p);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&gt(this.accumulatedMeanSquares.map(n=>n.variable)),this.accumulatedMeanGrads!=null&&this.centered&&gt(this.accumulatedMeanGrads.map(n=>n.variable)),this.accumulatedMoments!=null&&gt(this.accumulatedMoments.map(n=>n.variable))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&n.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=this.centered?n.length/3:n.length/2,r=!1;this.accumulatedMeanSquares=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=n.slice(e*2,e*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(n,e){return new n(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}};var XTe=[rf,of,sf,af,lf,cf,Eu];function BX(){for(let t of XTe)u8(t)}var to={};Jt(to,{CompositeArrayBuffer:()=>ci,browserFiles:()=>$X,browserHTTPRequest:()=>UX,concatenateArrayBuffers:()=>UK,copyModel:()=>oZ,decodeWeights:()=>PM,decodeWeightsStream:()=>BM,encodeWeights:()=>VK,fromMemory:()=>GX,fromMemorySync:()=>v8,getLoadHandlers:()=>KK,getModelArtifactsForJSON:()=>iv,getModelArtifactsForJSONSync:()=>r6,getModelArtifactsInfoForJSON:()=>ku,getSaveHandlers:()=>qK,getWeightSpecs:()=>Qx,http:()=>uT,isHTTPScheme:()=>cT,listModels:()=>nZ,loadWeights:()=>jX,moveModel:()=>iZ,registerLoadRouter:()=>WK,registerSaveRouter:()=>GK,removeModel:()=>rZ,weightsLoaderFactory:()=>m8,withSaveHandler:()=>WX,withSaveHandlerSync:()=>qX});var YTe="model",QTe=".json",JTe=".weights.bin";function LX(t){return new Promise(n=>setTimeout(n)).then(t)}var d8=(()=>{class t{constructor(e){if(!ee().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),(e==null||e.length===0)&&(e=YTe),this.modelJsonFileName=e+QTe,this.weightDataFileName=e+JTe}save(e){return z(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=ci.join(e.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=LM(e,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,yield LX(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,yield LX(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:ku(e)}}})}}return t.URL_SCHEME="downloads://",t})();var p8=class{constructor(n){if(n==null||n.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${n}`);this.jsonFile=n[0],this.weightsFiles=n.slice(1)}load(){return z(this,null,function*(){return new Promise((n,e)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){n({modelTopology:s});return}let l=iv(i,c=>this.loadWeights(c));n(l)},r.onerror=o=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})})}loadWeights(n){let e=[],r=[];for(let s of n)e.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(n),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[e,s])}loadWeightsFile(n,e){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${n}'.`),i.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(n){let e=[],r=this.weightsFiles.map(i=>n6(i.name)),o={};for(let i of n)i.paths.forEach(s=>{let a=n6(s);if(e.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},eDe=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(d8.URL_SCHEME)?tDe(t.slice(d8.URL_SCHEME.length)):null;Do.registerSaveRouter(eDe);function tDe(t="model"){return new d8(t)}function $X(t){return new p8(t)}function h8(t,n,e,r){s(t),e=e??0,r=r??1,a(e,r);let o=0,i=l=>(l.then(c=>{let u=e+ ++o/t.length*(r-e);return n(u),c}),l);function s(l){F(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){F(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),F(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),F(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}function f8(t,n){return z(this,null,function*(){n==null&&(n={});let e=n.fetchFunc==null?ee().platform.fetch:n.fetchFunc,r=t.map(d=>e(d,n.requestInit,{isBinary:!0})),a=(n.onProgress==null?yield Promise.all(r):yield h8(r,n.onProgress,0,.5)).map(d=>d.arrayBuffer());return n.onProgress==null?yield Promise.all(a):yield h8(a,n.onProgress,.5,1)})}function VX(t,n){var e;let r=n.fetchFunc==null?ee().platform.fetch:n.fetchFunc,o=0,i;return(e=n.onProgress)===null||e===void 0||e.call(n,0),new ReadableStream({pull:s=>z(this,null,function*(){for(var a;o<t.length;){i||(i=(yield r(t[o],n.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=yield i.read();if(l){o++,i=void 0,(a=n.onProgress)===null||a===void 0||a.call(n,o/t.length);continue}s.enqueue(c);return}s.close()})})}function jX(t,n="",e,r){return z(this,null,function*(){return m8(s=>f8(s,{requestInit:r}))(t,n,e)})}function m8(t){return(n,e="",r)=>z(this,null,function*(){let o=n.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(n.forEach((h,f)=>{let m=0;h.weights.forEach(g=>{let v="quantization"in g?g.quantization.dtype:g.dtype,w=mp[v]*rn(g.shape),y=()=>{o[f]=!0,i[f]==null&&(i[f]=[]),i[f].push({manifestEntry:g,groupOffset:m,sizeBytes:w})};r!=null?r.forEach((_,k)=>{_===g.name&&(y(),s[k]=!0)}):y(),a.push(g.name),m+=w})}),!s.every(h=>h)){let h=r.filter((f,m)=>!s[m]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=o.reduce((h,f,m)=>(f&&h.push(m),h),[]),c=[];l.forEach(h=>{n[h].paths.forEach(f=>{let m=e+(e.endsWith("/")?"":"/")+f;c.push(m)})});let u=yield t(c),d={},p=0;return l.forEach(h=>{let f=n[h].paths.length,m=new ci(u.slice(p,p+f));i[h].forEach(v=>{let w=m.slice(v.groupOffset,v.groupOffset+v.sizeBytes),y=PM(w,[v.manifestEntry]);for(let _ in y)d[_]=y[_]}),p+=f}),d})}var nDe="application/octet-stream",rDe="application/json",zX=(()=>{class t{constructor(e,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(F(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=ee().platform.fetch,F(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&F(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=LM(e,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:rDe}),"model.json"),e.weightData!=null){let a=ci.join(e.weightData);r.body.append("model.weights.bin",new Blob([a],{type:nDe}),"model.weights.bin")}let s=yield this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:ku(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return z(this,null,function*(){let e=yield this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=yield e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r})}load(){return z(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let e=yield this.loadModelJSON();return iv(e,r=>this.loadWeights(r))})}loadStream(){return z(this,null,function*(){let e=yield this.loadModelJSON(),r=yield this.getWeightUrls(e.weightsManifest),o=Qx(e.weightsManifest),i=()=>VX(r,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:o,getWeightStream:i})})}getWeightUrls(e){return z(this,null,function*(){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=oDe(r),s=this.weightPathPrefix||o,a=[],l=[];for(let c of e)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(s+u+i);return this.weightUrlConverter&&a.push(...yield Promise.all(l)),a})}loadWeights(e){return z(this,null,function*(){let r=yield this.getWeightUrls(e),o=Qx(e),i=yield f8(r,this.loadOptions);return[o,i]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function oDe(t){let n=t.lastIndexOf("/"),e=t.lastIndexOf("?"),r=t.substring(0,n),o=e>n?t.substring(e):"";return[r+"/",o]}function cT(t){return t.match(zX.URL_SCHEME_REGEX)!=null}var HX=(t,n)=>{if(typeof fetch>"u"&&(n==null||n.fetchFunc==null))return null;{let e=!0;if(Array.isArray(t)?e=t.every(r=>cT(r)):e=cT(t),e)return uT(t,n)}return null};Do.registerSaveRouter(HX);Do.registerLoadRouter(HX);function uT(t,n){return new zX(t,n)}function UX(t,n){return uT(t,n)}var J_=class{constructor(n){this.modelArtifacts=n}load(){return this.modelArtifacts}},dT=class{constructor(n){this.saveHandler=n}save(n){return this.saveHandler(n)}},g8=class{constructor(n){n.load&&(this.load=()=>Promise.resolve(n.load())),n.save&&(this.save=e=>Promise.resolve(n.save(e)))}};function GX(t,n,e,r){let o=arguments;return new g8(v8(...o))}function v8(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new J_(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new J_({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new J_({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))}function WX(t){return new dT(t)}function qX(t){return new dT(t)}var w8={};Jt(w8,{confusionMatrix:()=>KX});function iDe(t,n,e){let r=b(t,"labels","confusionMatrix"),o=b(n,"predictions","confusionMatrix");F(e==null||e>0&&Number.isInteger(e),()=>`If provided, numClasses must be a positive integer, but got ${e}`),F(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),F(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),F(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),F(e>0&&Number.isInteger(e),()=>`numClasses is required to be a positive integer, but got ${e}`);let i=Fl(ge(r,"int32"),e),s=Fl(ge(o,"int32"),e),a=jt(i),l=Vt(a,s);return ge(l,"int32")}var KX=E({confusionMatrix_:iDe});var ek={};Jt(ek,{draw:()=>hDe,fromPixels:()=>fDe,fromPixelsAsync:()=>uDe,toPixels:()=>pDe});var j0,ZX=!1;function XX(t,n=3){if(n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let e=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(n0(X1,R.backendName)!=null){let f={pixels:t},m={numChannels:n};return R.runKernel(X1,f,m)}let[c,u]=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(s)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||e)d=t.data;else if(i||o||a){if(j0==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")j0=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else j0=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});j0.canvas.width=c,j0.canvas.height=u,j0.drawImage(t,0,0,c,u),d=j0.getImageData(0,0,c,u).data}let p;if(n===4)p=new Int32Array(d);else{let f=c*u;p=new Int32Array(f*n);for(let m=0;m<f;m++)for(let g=0;g<n;++g)p[m*n+g]=d[m*4+g]}return W_(p,[u,c,n],"int32")}function sDe(t){return t!=null&&t.data instanceof Uint8Array}function aDe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function lDe(t){return t!=null&&t.width!==0&&t.height!==0}function cDe(t){return aDe()&&!(t instanceof ImageBitmap)&&lDe(t)&&!sDe(t)}function uDe(t,n=3){return z(this,null,function*(){let e=null;if(ee().getBool("WRAP_TO_IMAGEBITMAP")&&cDe(t)){let r;try{r=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?e=r:e=t}else e=t;return XX(e,n)})}function YX(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let n=t.rank===2?1:t.shape[2];if(n>4||n===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${n}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function dDe(t){let n=t?.alpha||1;if(n>1||n<0)throw new Error(`Alpha value ${n} is suppoed to be in range [0 - 1].`)}function pDe(t,n){return z(this,null,function*(){let e=b(t,"img","toPixels");if(!(t instanceof Lt)){let c=e;e=ge(c,"int32"),c.dispose()}YX(e);let[r,o]=e.shape.slice(0,2),i=e.rank===2?1:e.shape[2],s=yield e.data(),a=e.dtype==="float32"?255:1,l=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let u=[0,0,0,255];for(let p=0;p<i;p++){let h=s[c*i+p];if(e.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(e.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);i===1?(u[0]=h*a,u[1]=h*a,u[2]=h*a):u[p]=h*a}let d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}if(n!=null){ZX||n0(Z1,R.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),ZX=!0),n.width=o,n.height=r;let c=n.getContext("2d"),u=new ImageData(l,o,r);c.putImageData(u,0,0)}return e!==t&&e.dispose(),l})}function hDe(t,n,e){let r=b(t,"img","draw");if(!(t instanceof Lt)){let s=r;r=ge(s,"int32"),s.dispose()}YX(r),dDe(e?.imageOptions);let o={image:r},i={canvas:n,options:e};R.runKernel(Z1,o,i)}var fDe=E({fromPixels_:XX});var y8={};Jt(y8,{prepareAndValidate:()=>QX});function QX(t,n){let e=t.shape.length,r=n.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(n.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.shape[r-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${n.shape[r-1]} vs. ${e}`);if(rn(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let o=n.shape,i=o[o.length-1],s=1;for(let d=0;d<o.length-1;++d)s*=o[d];let a=t.shape,l=o.slice();l.pop();let c=1;for(let d=i;d<e;++d)c*=a[d],l.push(a[d]);let u=[...Tc(t.shape).map(d=>d/c),1].slice(0,i);return[l,s,c,u]}var yo={};Jt(yo,{assertParamsValid:()=>gDe,computeFlatOffset:()=>_De,computeOutShape:()=>wDe,getNormalizedAxes:()=>yDe,isSliceContinous:()=>xDe,maskToAxes:()=>vDe,parseSliceParams:()=>_8,sliceInfo:()=>kDe,startForAxis:()=>sY,startIndicesWithElidedDims:()=>rY,stopForAxis:()=>aY,stopIndicesWithElidedDims:()=>oY,stridesForAxis:()=>iY,stridesWithElidedDims:()=>eY});var x8=-2,mDe=-1;function gDe(t,n,e){let r=t.shape.length;F(r===n.length,()=>`Error in slice${r}D: Length of begin ${n} must match the rank of the array (${r}).`),F(r===e.length,()=>`Error in slice${r}D: Length of size ${e} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)F(n[o]+e[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${n[o]+e[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function vDe(t){let n=[],e=0;for(;t>0;)t&1&&n.push(e),t/=2,e++;return n}function wDe(t,n,e){let r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((n[o]-t[o])/e[o]);return r}function eY(t,n,e,r){let o=[...t];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<e;i++)i===0?o[n]=1:(o.splice(n,0,1),o.pop());return o}function tY(t,n,e){return e<=t?e:e-(n-1)}function nY(t,n){let e=[];for(let r=0;r<t;r++)e.push(n+r);return e}function yDe(t,n,e,r,o,i,s,a,l){let c=t.length,u=new Array(c),d=new Array(c),p=new Array(c);if(n.length&&e>0){let h=n[0],f=e+1;u=rY(s,h,f,r,t),d=oY(a,h,f,o,t),p=eY(i,h,f,t)}else for(let h=0;h<c;h++)u[h]=sY(s,r,i,t,h,l),d[h]=aY(a,o,i,t,h,l),p[h]=iY(i,h,l);return{begin:u,end:d,strides:p}}function rY(t,n,e,r,o){let i=[...o],s=nY(e,n);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let l=tY(n,e,a),c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function oY(t,n,e,r,o){let i=[...o],s=nY(e,n);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let l=tY(n,e,a),c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let l=o[a];i[a]<0&&(i[a]+=l),i[a]=z1(0,i[a],o[a])}return i}function iY(t,n,e){let r=t[n];return(e&1<<n||r==null)&&(r=1),r}function sY(t,n,e,r,o,i){let s=n[o],a=e[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),s=z1(0,s,l-1),s}function aY(t,n,e,r,o,i){let s=n[o],a=e[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),a>0?s=z1(0,s,l):s=z1(-1,s,l-1),s}function xDe(t,n,e){let r=e.length;for(let o=0;o<e.length;o++)if(e[o]>1){r=o;break}for(let o=r+1;o<e.length;o++)if(n[o]>0||e[o]!==t[o])return!1;return!0}function _De(t,n){let e=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}function _8(t,n,e){let r,o=t.shape.length;typeof n=="number"?r=[n,...new Array(o-1).fill(0)]:n.length<o?r=n.concat(new Array(o-n.length).fill(0)):r=n.slice(),r.forEach(s=>{F(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return e==null?i=new Array(o).fill(-1):typeof e=="number"?i=[e,...new Array(o-1).fill(-1)]:e.length<o?i=e.concat(new Array(o-e.length).fill(-1)):i=e,i=i.map((s,a)=>s>=0?s:(F(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function kDe(t,n,e,r,o,i,s,a,l){let c;if(r==null?(c=new Array(n.length),c.fill(1)):c=r,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:e.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let y=0;y<d.dims;y++)u&&(1<<y&a)!==0&&d.numAddAxisAfterEllipsis++,1<<y&s&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};bDe(d,p);let h=!0,f=!0,m=!0,g=[],v=[];for(let y=0;y<t.length;++y){if(p.strides[y]===0)throw Error(`strides[${y}] must be non-zero`);let _=!!(p.shrinkAxisMask&1<<y),k=t[y];if(k===-1){g.push(_?1:-1);continue}let T=[p.beginMask&1<<y,p.endMask&1<<y],I=[p.strides[y]>0?0:-1,p.strides[y]>0?k:k-1];if(_&&p.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&p.strides[y]===1;let A=!!(p.beginMask&1<<y&&p.endMask&1<<y);if(p.beginValid&&p.endValid){if(_){let S=p.begin[y]<0?k+p.begin[y]:p.begin[y];if(p.begin[y]=S,p.end[y]=p.begin[y]+1,S<0||S>=k)throw Error(`slice index ${p.begin[y]} of dimension ${y} out of bounds.`)}else p.begin[y]=JX(p.begin[y],0,p.strides[y],k,T,I),p.end[y]=JX(p.end[y],1,p.strides[y],k,T,I);let B=p.strides[y]===1&&p.begin[y]===0&&p.end[y]===k;h=h&&B,f=f&&(y===0&&p.strides[y]===1||B)}else h=h&&p.strides[y]===1&&A,f=f&&(y===0&&p.strides[y]===1||A);let P,N=!1;if(p.beginValid&&p.endValid?(P=p.end[y]-p.begin[y],N=!0):_?(P=1,N=!0):A&&k>=0&&(p.strides[y]<0?P=-k:P=k,N=!0),N){let B;P===0||P<0!=p.strides[y]<0?B=0:B=Math.trunc(P/p.strides[y])+(P%p.strides[y]!==0?1:0),g.push(B)}else g.push(-1)}for(let y=0;y<p.finalShapeGatherIndices.length;++y){let _=p.finalShapeGatherIndices[y];_>=0?v.push(g[_]):_===x8&&v.push(1)}return{finalShapeSparse:v.filter((y,_)=>p.finalShapeGatherIndices[_]!==x8),finalShape:v,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function bDe(t,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let e=0;n.beginValid=t.begin!=null,n.endValid=t.end!=null,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){let o=Math.min(n.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,n.dims);for(;e<o;e++)n.begin[e]=0,n.end[e]=0,n.strides[e]=1,n.beginMask|=1<<e,n.endMask|=1<<e,n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[e]=r}else if(1<<r&t.newAxisMask)n.finalShapeGatherIndices.push(x8),n.finalShapeGatherIndicesSparse.push(-1);else{if(e===n.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${n.dims} dims, ${n.begin.length}.`);t.begin!=null&&(n.begin[e]=t.begin[r]),t.end!=null&&(n.end[e]=t.end[r]),n.strides[e]=t.strides[r],t.beginMask&1<<r&&(n.beginMask|=1<<e),t.endMask&1<<r&&(n.endMask|=1<<e),t.shrinkAxisMask&1<<r?(n.finalShapeGatherIndices.push(mDe),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<e):(n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(r)),n.inputShapeGatherIndicesSparse[e]=r,e++}}function JX(t,n,e,r,o,i){if(o[n])return e>0?i[n]:i[n+1&1];{let s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var pT="4.22.0";var vv=class{static sgd(n){return new Eu(n)}static momentum(n,e,r=!1){return new lf(n,e,r)}static rmsprop(n,e=.9,r=0,o=null,i=!1){return new cf(n,e,r,o,i)}static adam(n=.001,e=.9,r=.999,o=null){return new sf(n,e,r,o)}static adadelta(n=.001,e=.95,r=null){return new rf(n,e,r)}static adamax(n=.002,e=.9,r=.999,o=null,i=0){return new af(n,e,r,o,i)}static adagrad(n,e=.1){return new of(n,e)}};var uf=vv;var CDe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function wv(){return new Promise(t=>CDe(()=>t()))}var O={};Jt(O,{ERF_A1:()=>$De,ERF_A2:()=>VDe,ERF_A3:()=>jDe,ERF_A4:()=>zDe,ERF_A5:()=>HDe,ERF_P:()=>LDe,PARALLELIZE_THRESHOLD:()=>hT,RowPartitionType:()=>Rp,SELU_SCALE:()=>b8,SELU_SCALEALPHA:()=>k8,applyActivation:()=>$0,assertAndGetBroadcastShape:()=>$t,assertAxesAreInnerMostDims:()=>w4e,assertParamsConsistent:()=>SDe,assignToTypedArray:()=>ZDe,axesAreInnerMostDims:()=>y6,calculateShapes:()=>BZ,checkEinsumDimSizes:()=>tEe,checkPadOnDimRoundingMode:()=>Hn,combineLocations:()=>hZ,combineRaggedTensorToTensorShapes:()=>TDe,complexWithEvenIndex:()=>WDe,complexWithOddIndex:()=>qDe,computeConv2DInfo:()=>f0,computeConv3DInfo:()=>cZ,computeDefaultPad:()=>h6,computeDilation2DInfo:()=>vCe,computeOptimalWindowSize:()=>NDe,computeOutAndReduceShapes:()=>x6,computeOutShape:()=>MDe,computePool2DInfo:()=>p6,computePool3DInfo:()=>wCe,convertConv2DDataFormat:()=>uZ,decodeEinsumEquation:()=>JDe,eitherStridesOrDilationsAreOne:()=>Xo,expandShapeToKeepDim:()=>Ia,exponent:()=>YDe,exponents:()=>XDe,fromStringArrayToUint8:()=>kEe,fromUint8ToStringArray:()=>_Ee,getAxesPermutation:()=>_6,getBroadcastDims:()=>pZ,getComplexWithIndex:()=>KDe,getEinsumComputePath:()=>nEe,getEinsumPermutation:()=>eEe,getFusedBiasGradient:()=>L0,getFusedDyActivation:()=>B0,getImageCenter:()=>ADe,getInnerMostAxes:()=>y4e,getPermuted:()=>ODe,getRaggedRank:()=>EDe,getReductionAxes:()=>Pn,getReshaped:()=>RDe,getReshapedPermuted:()=>FDe,getRowPartitionTypesHelper:()=>DDe,getSliceBeginCoords:()=>PDe,getSliceSize:()=>BDe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>sEe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>aEe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>lEe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>dEe,getSparseReshapeInputOutputMismatchErrorMessage:()=>hEe,getSparseReshapeInputOutputMultipleErrorMessage:()=>pEe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>cEe,getSparseReshapeNegativeOutputDimErrorMessage:()=>uEe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>vEe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>fEe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>mEe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>gEe,getUndoAxesPermutation:()=>M_,isIdentityPermutation:()=>rEe,log:()=>Zke,mergeRealAndImagArrays:()=>UDe,prepareAndValidate:()=>QX,prepareSplitSize:()=>iEe,segment_util:()=>S8,shouldFuse:()=>V0,slice_util:()=>yo,splitRealAndImagArrays:()=>GDe,stridesOrDilationsArePositive:()=>bu,tupleValuesAreOne:()=>oa,upcastType:()=>Ur,validateDefaultValueShape:()=>IDe,validateInput:()=>fv,validateUpdateShape:()=>i8,warn:()=>xu});function SDe(t,n){let e=t[0].length;t.forEach((o,i)=>{F(o.length===e,()=>`Error in concat${e}D: rank of tensors[${i}] must be the same as the rank of the rest (${e})`)}),F(n>=0&&n<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);let r=t[0];t.forEach((o,i)=>{for(let s=0;s<e;s++)F(s===n||o[s]===r[s],()=>`Error in concat${e}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function MDe(t,n){let e=t[0].slice();for(let r=1;r<t.length;r++)e[n]+=t[r][n];return e}var Rp=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(Rp||{});function TDe(t,n,e){let r=new Array;if(e==null&&n==null)return r;if(n==null)for(;r.length<t+e.length;)r.push(-1);else r=n.slice();if(e==null)return r;if(t+e.length!==r.length)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.rank = ${t+e.length}, but shape.rank = ${r.length}`);for(let o=1;o<e.length;++o){let i=e[o],s=r[r.length-e.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.shape[${o+t}] = ${i} but shape[${o+t}] = ${a}`)}else r[s]=i}return r}function DDe(t){let n={FIRST_DIM_SIZE:Rp.FIRST_DIM_SIZE,VALUE_ROWIDS:Rp.VALUE_ROWIDS,ROW_LENGTHS:Rp.ROW_LENGTHS,ROW_SPLITS:Rp.ROW_SPLITS,ROW_LIMITS:Rp.ROW_LIMITS,ROW_STARTS:Rp.ROW_STARTS},e=[];for(let r of t)if(r in n)e.push(n[r]);else break;return e}function EDe(t){return t.length===0?0:t[0]===Rp.FIRST_DIM_SIZE?t.length-1:t.length}function IDe(t,n){if(t==null||n==null)return;let e=t.length,r=n.length;if(e>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${n}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(e,r-1);++o){let i=t[o],s=n[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${n} are incompatible: defaultValue.shape[${o-t.length}] = ${i} but ragged tensor input.flatValues.shape[${o-t.length}] = ${s}`)}}var hT=30;function NDe(t){return t<=hT?t:U1(t,Math.floor(Math.sqrt(t)))}function ADe(t,n,e){let r=e*(typeof t=="number"?t:t[0]),o=n*(typeof t=="number"?t:t[1]);return[r,o]}function RDe(t,n,e,r=!0){let o=[];if(r)o=o.concat(n.slice(0)),o.push(t[0]/e),o=o.concat(t.slice(1));else{o=o.concat(t[0]);let i=n.length;for(let s=0;s<i;++s)o=o.concat([t[s+1]/n[s],n[s]]);o=o.concat(t.slice(i+1))}return o}function ODe(t,n,e=!0){let r=[];if(e){r.push(n);for(let o=n+1;o<t;++o)o<=2*n?(r.push(o),r.push(o-(n+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<t;++s)s>=n*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function FDe(t,n,e,r=!0){let o=[];r?o.push(t[0]/e):o.push(t[0]*e);for(let i=1;i<t.length;++i)i<=n.length?r?o.push(n[i-1]*t[i]):o.push(t[i]/n[i-1]):o.push(t[i]);return o}function PDe(t,n){let e=[0];for(let r=0;r<n;++r)e.push(t[r][0]);return e}function BDe(t,n,e){let r=t.slice(0,1);for(let o=0;o<e;++o)r.push(t[o+1]-n[o][0]-n[o][1]);return r}var k8=1.7580993408473768,b8=1.0507009873554805;var LDe=.3275911,$De=.254829592,VDe=-.284496736,jDe=1.421413741,zDe=-1.453152027,HDe=1.061405429;function UDe(t,n){if(t.length!==n.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${n.length}.`);let e=new Float32Array(t.length*2);for(let r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function GDe(t){let n=new Float32Array(t.length/2),e=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=t[r],e[r/2]=t[r+1];return{real:n,imag:e}}function WDe(t){let n=Math.ceil(t.length/4),e=new Float32Array(n),r=new Float32Array(n);for(let o=0;o<t.length;o+=4)e[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:e,imag:r}}function qDe(t){let n=Math.floor(t.length/4),e=new Float32Array(n),r=new Float32Array(n);for(let o=2;o<t.length;o+=4)e[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:e,imag:r}}function KDe(t,n){let e=t[n*2],r=t[n*2+1];return{real:e,imag:r}}function ZDe(t,n,e,r){t[r*2]=n,t[r*2+1]=e}function XDe(t,n){let e=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){let i=(n?2:-2)*Math.PI*(o/t);e[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:e,imag:r}}function YDe(t,n,e){let r=(e?2:-2)*Math.PI*(t/n),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var C8="->",QDe=/->/g,lY=",",cY="...";function JDe(t,n){t=t.replace(/\s/g,"");let e=(t.length-t.replace(QDe,"").length)/C8.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${C8}").`);let[r,o]=t.split(C8);F(r.indexOf(cY)===-1,()=>`The ellipsis notation ("${cY}") is not supported yet.`);let i=r.split(lY),s=i.length;if(n!==s)throw new Error(`Expected ${s} input tensors, received ${n}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<o.length;++p){let h=o[p];if(!i.some(f=>f.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let p=0;p<r.length;++p){let h=r[p];a.indexOf(h)===-1&&h!==lY&&a.push(h)}let l=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let h=0;h<i[p].length;++h)l[p].push(a.indexOf(i[p][h]))}let c=a.length,u=o.length,d=[];for(let p=u;p<c;++p)d.push(p);return{allDims:a,summedDims:d,idDims:l}}function eEe(t,n){let e=new Array(t);e.fill(-1);for(let o=0;o<n.length;++o)e[n[o]]=o;let r=[];for(let o=0;o<t;++o)e[o]===-1&&r.push(o);return e=e.filter(o=>o!==-1),{permutationIndices:e,expandDims:r}}function tEe(t,n,e){let r=new Array(t);for(let o=0;o<e.length;++o){let i=e[o].shape;for(let s=0;s<n[o].length;++s)r[n[o][s]]===void 0?r[n[o][s]]=i[s]:F(r[n[o][s]]===i[s],()=>`Expected dimension ${r[n[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function nEe(t,n){let e=t,r=[],o=0;t.length===0&&e.push(-1),o=t.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<e.length;++s){let a=e[s],l=oEe(n,a);for(let c of l)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:e,steps:r}}function rEe(t){return t.every((n,e)=>n===e)}function oEe(t,n){let e=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(n)!==-1||n===-1)&&e.push(r);return e}function iEe(t,n,e=0){let r=[];if(typeof n=="number")F(t.shape[e]%n===0,()=>"Number of splits must evenly divide the axis."),r=new Array(n).fill(t.shape[e]/n);else{let o=n.reduce((s,a)=>(a===-1&&(s+=1),s),0);F(o<=1,()=>"There should be only one negative value in split array.");let i=n.indexOf(-1);if(i!==-1){let s=n.reduce((a,l)=>l>0?a+l:a);n[i]=t.shape[e]-s}F(t.shape[e]===n.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=n}return r}function sEe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function aEe(t,n){return`indices(${t}, 0) is invalid: ${n} < 0`}function lEe(t,n,e){return`indices(${t}, 0) is invalid: ${n} >= ${e}`}function cEe(t,n){return`only one output dimension may be -1, not both ${t} and ${n}`}function uEe(t,n){return`size ${t} must be non-negative, not ${n}`}function dEe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function pEe(t,n){let e=rn(t),r=rn(n);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${n}`}function hEe(t,n){let e=rn(t),r=rn(n);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${n}`}function fEe(){return"segment ids must be >= 0"}function mEe(){return"segment ids are not increasing"}function gEe(t,n){return`Segment id ${t} out of range [0, ${n}), possibly because segmentIds input is not sorted.`}function vEe(t,n,e){return`Bad: indices[${t}] == ${n} out of range [0, ${e})`}var S8={};Jt(S8,{collectGatherOpShapeInfo:()=>xEe,computeOutShape:()=>yEe,segOpComputeOptimalWindowSize:()=>wEe});function wEe(t,n){let e=!1,r;for(t<=hT?(r=t,e=!0):r=U1(t,Math.floor(Math.sqrt(t)));!e;)r>n||r===t?e=!0:r=U1(t,r+1);return r}function yEe(t,n,e){let r=[],o=t.length;for(let i=0;i<o;i++)i!==n?r.push(t[i]):r.push(e);return r}function xEe(t,n,e,r){let o=n.shape.length,i=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(e<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${e}).`);for(let d=0;d<r;++d)if(t.shape[d]!==n.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${n.shape[d]}.`);let s=t.shape[e],a=[],l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<e;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<o;d++)a.push(n.shape[d]);for(let d=e+1;d<i;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function _Ee(t){try{return t.map(n=>nv(n))}catch(n){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${n}`)}}function kEe(t){return t.map(n=>qh(n))}var Jo={};Jt(Jo,{nonMaxSuppressionV3Impl:()=>nT,nonMaxSuppressionV4Impl:()=>rT,nonMaxSuppressionV5Impl:()=>oT,whereImpl:()=>ZM});BX();var fT={kernelName:xd,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,aa(ge(e,"float32"),-1))}}};var uY={kernelName:Dc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=Gt(ge(e,"float32")),o=In(Be(Ue(1),r));return Xt(je(t,o))}}}};var dY={kernelName:Ec,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=In(Be(Gt(ge(e,"float32")),1));return je(t,r)}}}};var pY={kernelName:Sa,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=$t(e.shape,r.shape);return{a:()=>{let a=t,l=Pn(e.shape,o);return l.length>0&&(a=Ge(a,l)),$(a,e.shape)},b:()=>{let a=t,l=Pn(r.shape,o);return l.length>0&&(a=Ge(a,l)),$(a,r.shape)}}}};var hY={kernelName:_d,saveAllInputs:!0,gradFunc:(t,n)=>{let e={};return n.forEach((r,o)=>{e[o]=()=>t.clone()}),e}};var fY={kernelName:kd,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>pt(e)}}};var mY={kernelName:bd,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>pt(e)}}};var gY={kernelName:Ic,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>je(t,In(Be(Ue(1),Gt(ge(e,"float32")))))}}};var vY={kernelName:Nc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=In(fe(Ue(1),Gt(ge(e,"float32"))));return je(t,r)}}}};var wY={kernelName:Oc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=$t(e.shape,r.shape);return{a:()=>{let a=fe(Gt(e),Gt(r)),l=L(t,je(r,a)),c=Pn(e.shape,o);return c.length>0&&(l=Ge(l,c)),$(l,e.shape)},b:()=>{let a=fe(Gt(e),Gt(r)),l=Xt(L(t,je(e,a))),c=Pn(r.shape,o);return c.length>0&&(l=Ge(l,c)),$(l,r.shape)}}}};var yY={kernelName:Ac,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>je(t,fe(Gt(ge(e,"float32")),1))}}};var xY={kernelName:Rc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>je(t,Be(Ue(1),Gt(ge(e,"float32"))))}}};function bEe(t,n,e,r,o,i){let s=b(t,"dy","avgPool3dGrad"),a=b(n,"input","avgPool3dGrad"),l=s,c=a,u=!1;a.rank===4&&(u=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),F(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),F(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Hn("avgPool3dGrad",o,i);let d={dy:l,input:c},p={filterSize:e,strides:r,pad:o,dimRoundingMode:i},h=R.runKernel(tg,d,p);return u?$(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var _Y=E({avgPool3dGrad_:bEe});var kY={kernelName:Sd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{filterSize:o,strides:i,pad:s,dimRoundingMode:a}=e;return{x:()=>_Y(t,r,o,i,s,a)}}};function CEe(t,n,e,r,o){let i=b(t,"dy","avgPoolGrad"),s=b(n,"input","avgPoolGrad");F(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let a=s,l=i,c=!1;s.rank===3&&(c=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),F(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);let u={dy:l,input:a},d={filterSize:e,strides:r,pad:o},p=R.runKernel(eg,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var bY=E({avgPoolGrad_:CEe});var CY={kernelName:Cd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{filterSize:o,strides:i,pad:s}=e;return{x:()=>bY(t,r,o,i,s)}}};var SY={kernelName:Md,inputsToSave:["a","b"],gradFunc:(t,n,e)=>{let[r,o]=n,{transposeA:i,transposeB:s}=e;return!i&&!s?{a:()=>Vt(t,o,!1,!0),b:()=>Vt(r,t,!0,!1)}:!i&&s?{a:()=>Vt(t,o,!1,!1),b:()=>Vt(t,r,!0,!1)}:i&&!s?{a:()=>Vt(o,t,!1,!0),b:()=>Vt(r,t,!1,!1)}:{a:()=>Vt(o,t,!0,!0),b:()=>Vt(t,r,!0,!0)}}};var MY={kernelName:Td,gradFunc:(t,n,e)=>{let{blockShape:r,crops:o}=e;return{x:()=>Tp(t,r,o)}}};var TY={kernelName:LF,gradFunc:(t,n,e)=>{let r=e,o=r.inputShape,i=r.shape,s=Array.from(i);for(let l=o.length-1;l>=0;l--)if(o[l]===i[l])s[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${i}].`);let a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>Ge(t,a,!0)}}};var DY={kernelName:xl,gradFunc:t=>({x:()=>t.clone()})};var EY={kernelName:Fc,gradFunc:t=>({x:()=>pt(t)})};var IY={kernelName:Pc,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{clipValueMin:o,clipValueMax:i}=e;return{x:()=>An(No(bi(r,o),as(r,i)),t,pt(t))}}};var NY={kernelName:Dd,inputsToSave:["x"],gradFunc:fT.gradFunc};var AY={kernelName:Ed,saveAllInputs:!0,gradFunc:(t,n,e)=>{let r=n.map(l=>l.shape),{axis:o}=e,i=lo(o,n[0].shape)[0],s=r.map(l=>l[i]);return Jr(t,s,i).map(l=>()=>l)}};var RY={kernelName:Id,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,{dilations:i,strides:s,pad:a,dataFormat:l}=e;return F(oa(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>uv(r.shape,t,o,s,a,l),filter:()=>gv(r,t,o.shape,s,a,l)}}};var OY={kernelName:Nd,inputsToSave:["dy","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,{strides:i,pad:s,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>Vi(t,o,i,s,a,1,l),filter:()=>gv(t,r,o.shape,i,s,a,l)}}};function SEe(t,n,e,r,o){let i=t;t.rank===4&&(i=$(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=n;s.rank===4&&(s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),F(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),F(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),F(e.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),F(i.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${e[3]}.`),F(s.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${e[4]}).`);let a={x:i,dy:s},l={strides:r,pad:o,filterShape:e};return R.runKernel(sg,a,l)}var FY=E({conv3DBackpropFilter_:SEe});var PY={kernelName:Ad,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:r,strides:o,pad:i}=e;F(oa(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[s,a]=n;return{x:()=>zM(s.shape,t,a,o,i),filter:()=>FY(s,t,a.shape,o,i)}}};var BY={kernelName:Bc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(Xt(E0(ge(e,"float32"))),t)}}};var LY={kernelName:Lc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(I0(ge(e,"float32")),t)}}};var $Y={kernelName:Rd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o,exclusive:i,reverse:s}=e;return{x:()=>{let a=_6([o],r.rank),l=w0(t,o,i,!s);return a!=null&&(l=jt(l,a)),l}}}};var VY={kernelName:Od,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:r,strides:o,pad:i,dimRoundingMode:s}=e,a=r??[1,1];F(oa(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[l,c]=n;return F(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),F(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),F(Xo(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Hn("depthwiseConv2d",i,s),{x:()=>JM(l.shape,t,c,o,i,a,s),filter:()=>QM(l,t,c.shape,o,i,a,s)}}};var jY={kernelName:Fd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,i={x:r,filter:o,dy:t},s={x:r,filter:o,dy:t};return{x:()=>R.runKernel(q1,i,e),filter:()=>R.runKernel(K1,s,e)}}};var zY={kernelName:Vc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n,r={dy:t,y:e};return{x:()=>R.runKernel(gg,r)}}};var HY={kernelName:jc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,r=L(mr(Xt(Gt(e))),2/Math.sqrt(Math.PI));return{x:()=>L(t,r)}}};var UY={kernelName:zc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,e)}}};var GY={kernelName:Pd,inputsToSave:["input"],gradFunc:(t,n)=>{let[e]=n;return{input:()=>$(t,e.shape)}}};var WY={kernelName:Hc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,mr(e))}}};var qY={kernelName:Uc,gradFunc:t=>({x:()=>pt(t)})};var KY={kernelName:Gc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=$t(e.shape,r.shape);return{a:()=>{let a=je(t,ge(r,"float32")),l=Pn(e.shape,o);return l.length>0?$(Ge(a,l),e.shape):a},b:()=>{let a=L(t,ge(e,"float32")),l=Pn(r.shape,o);l.length>0&&(a=$(Ge(a,l),r.shape));let c=Gt(r);return Xt(je(a,ge(c,"float32")))}}}};var ZY={kernelName:Bd,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,n,e)=>{let{varianceEpsilon:r}=e,[o,i,s,a]=n,l=a??Ue(1),c=Pn(i.shape,o.shape),u=[];if(i.rank===1){for(let _=0;_<o.shape.length-1;++_)u.push(o.shape[_]);u.push(1)}let d=Be(o,i),p=L(t,l),h=M0(fe(s,Ue(r))),f=L(L(L(h,h),h),Ue(-.5));return{x:()=>i.rank===1?$(L(L(t,Io($(h,[1,1,1,i.shape[0]]),u)),l),o.shape):$(L(L(t,h),l),o.shape),mean:()=>{let _=L(L(h,Ue(-1)),p);return i.rank===1&&(_=Ge(_,c)),$(_,i.shape)},variance:()=>{let _=L(L(f,d),p);return i.rank===1&&(_=Ge(_,c)),$(_,i.shape)},scale:()=>{let _=L(d,h),k=L(t,_);return i.rank===1&&(k=Ge(k,c)),$(k,i.shape)},offset:()=>{let _=t;return i.rank===1&&(_=Ge(_,c)),$(_,i.shape)}}}};var QY={kernelName:Ld,inputsToSave:["x","indices"],gradFunc:(t,n,e)=>{let[r,o]=n,{axis:i,batchDims:s}=e,a=lo(i,r.shape)[0],l=(c,u,d)=>()=>{let p=c.shape,h=u.size,f=p.slice(0,a),m=f.length,g=p.slice(i,p.length).slice(1),v=g.length,w=XY(0,m),y=XY(m+1,m+1+v),_=YY([f,[h],g]),k=$(d,_),T=$(u,[h]),I=YY([[m],w,y]),A=jt(k,I),P=P0(A,T,c.shape[a]),N=M_(I);return P=jt(P,N),P};if(s===1){let c=r.shape[0],u=r.split(c,0);return{x:()=>Qn(u.map((h,f)=>l(h,o.slice(f,1),t.slice(f,1))())).reshape(r.shape),indices:()=>o}}else return{x:l(r,o,t),indices:()=>o}}};function XY(t,n){let e=[];for(let r=t;r<n;++r)e.push(r);return e}function YY(t){let n=[];for(let e=0;e<t.length;++e)for(let r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var JY={kernelName:Wc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>pt(e),b:()=>pt(r)}}};var eQ={kernelName:_l,gradFunc:t=>({x:()=>ge(t,"float32")})};var tQ={kernelName:qc,gradFunc:t=>({x:()=>pt(t)})};var nQ={kernelName:Kc,gradFunc:t=>({x:()=>pt(t)})};var rQ={kernelName:Zc,gradFunc:t=>({x:()=>pt(t)})};var oQ={kernelName:$d,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{alpha:o}=e,i=Yn(r,0);return{x:()=>An(i,t,L(t,o))}}};var iQ={kernelName:Yc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>je(t,fe(e,1))}}};var sQ={kernelName:Xc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>je(t,ge(e,"float32"))}}};var aQ={kernelName:$F,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e;return{logits:()=>{let s=mr(r);return Be(t,L(Ge(t,o,!0),s))}}}};function MEe(t,n,e,r=5,o=1,i=1,s=.5){let a={x:t,y:n,dy:e},l={depthRadius:r,bias:o,alpha:i,beta:s};return R.runKernel(Cg,a,l)}var lQ=E({localResponseNormalizationBackprop_:MEe});var cQ={kernelName:Vd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{depthRadius:i,bias:s,alpha:a,beta:l}=e;return{x:()=>lQ(r,o,t,i,s,a,l)}}};function mT(t,n,e,r){return n.rank<e.rank&&(n=$(n,Ia(n.shape,r))),t.rank<e.rank&&(t=$(t,Ia(t.shape,r))),{x:()=>L(t,ge(Eo(e,n),t.dtype))}}var M8={kernelName:jd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let r=e,{reductionIndices:o}=r,i=n[0],s=n[1],a=lo(o,i.shape),l=mT(t,s,i,a);return{x:()=>l.x()}}};var uQ={kernelName:Qc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>L(t,ge(bi(e,r),"float32")),b:()=>L(t,ge(Mu(e,r),"float32"))}}};function TEe(t,n,e,r,o,i,s){let a=b(t,"dy","maxPool3dGrad"),l=b(n,"input","maxPool3dGrad"),c=b(e,"output","maxPool3dGrad"),u=a,d=l,p=c,h=!1;l.rank===4&&(h=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=$(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=$(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),F(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),F(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),F(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Hn("maxPool3dGrad",i,s);let f={dy:u,input:d,output:p},m={filterSize:r,strides:o,pad:i,dimRoundingMode:s},g=R.runKernel(Mg,f,m);return h?$(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}var dQ=E({maxPool3dGrad_:TEe});var pQ={kernelName:Hd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=e;return{x:()=>dQ(t,r,o,i,s,a,l)}}};function DEe(t,n,e,r,o,i,s){let a=b(t,"dy","maxPoolGrad"),l=b(n,"input","maxPoolGrad"),c=b(e,"output","maxPoolGrad");F(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),F(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),F(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Hn("maxPoolGrad",i,s);let u={dy:a,input:l,output:c},d={filterSize:r,strides:o,pad:i,dimRoundingMode:s};return R.runKernel(Sg,u,d)}var hQ=E({maxPoolGrad_:DEe});var fQ={kernelName:zd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{filterSize:i,strides:s,pad:a}=e;return{x:()=>hQ(t,r,o,i,s,a)}}};var mQ={kernelName:Ud,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e,i=lo(o,r.shape),a=x6(r.shape,i)[1],l=rn(a);return{x:()=>{let u=r.shape.slice();i.forEach(h=>{u[h]=1});let d=$(t,u);return je(L(d,Nr(r.shape,"float32")),l)}}}};var gQ={kernelName:Gd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let r=e,{axis:o}=r,[i,s]=n,a=lo(o,i.shape),l=mT(t,s,i,a);return{x:()=>l.x()}}};var vQ={kernelName:Jc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>L(t,ge(as(e,r),"float32")),b:()=>L(t,ge(Yn(e,r),"float32"))}}};var wQ={kernelName:Wd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let r=n[0],{paddings:o}=e,i=o.map(s=>s[0]);return{x:()=>Ft(t,i,r.shape)}}};var yQ={kernelName:eu,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=$t(e.shape,r.shape);return{a:()=>{let a=Pn(e.shape,o);return a.length>0?$(Ge(t,a),e.shape):t},b:()=>{let a=L(t,Xt(Rl(je(e,r)))),l=Pn(r.shape,o);return l.length>0?$(Ge(a,l),r.shape):a}}}};var xQ={kernelName:tu,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=$t(e.shape,r.shape);return{a:()=>{let a=L(t,ge(r,"float32")),l=Pn(e.shape,o);return l.length>0?$(Ge(a,l),e.shape):a},b:()=>{let a=L(t,ge(e,"float32")),l=Pn(r.shape,o);return l.length>0?$(Ge(a,l),r.shape):a}}}};var _Q={kernelName:qd,gradFunc:t=>({x:()=>Xt(t)})};var kQ={kernelName:Zd,inputsToSave:["indices"],gradFunc:(t,n)=>{let e=n[0];return{indices:()=>Ln(e.shape,"float32")}}};var bQ={kernelName:Kd,gradFunc:t=>({x:()=>pt(t)})};var CQ={kernelName:Xd,saveAllInputs:!0,gradFunc:(t,n,e)=>{let{axis:r}=e;return eo(t,r).map(i=>()=>i)}};var T8={kernelName:Yd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let r=n[0],{paddings:o}=e,i=o.map(s=>s[0]);return{x:()=>Ft(t,i,r.shape)}}};var SQ={kernelName:nu,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,n)=>{let[e,r,o]=n,i=e,s=r,a=$t(i.shape,s.shape);return{a:()=>{let u=ge(s,"float32"),d=L(t,L(u,Yo(i,Be(u,Ue(1))))),p=Pn(i.shape,a);return p.length>0&&(d=Ge(d,p)),$(d,i.shape)},b:()=>{let u=Yn(i,0),d=An(u,wo(i),pt(i)),p=L(t,L(o,d)),h=Pn(s.shape,a);return h.length>0&&(p=Ge(p,h)),$(p,s.shape)}}}};var MQ={kernelName:Qd,inputsToSave:["x","alpha"],gradFunc:(t,n)=>{let[e,r]=n,o=Yn(e,0);return{x:()=>An(o,t,L(t,r)),alpha:()=>{let i=An(o,pt(t),L(t,e)),s=Pn(r.shape,t.shape);return s.length>0&&(i=Ge(i,s)),$(i,r.shape)}}}};function EEe(t,n,e){let r=t.shape.slice();r[e]=1;let o=$(n,r),i=Qh(t,e,!0,!1),s=Qh(t,e,!0,!0),a=L(i,s);return L(o,a)}function IEe(t,n,e){let r=t.shape.length,o=r-e.length,i=O.getAxesPermutation(e,r),s=t;i!=null&&(s=jt(t,i));let a=s.shape.slice(),c=a.splice(r-e.length,e.length).reduce((p,h)=>p*h,1);a.push(c);let u=s.reshape(a),d=EEe(u,n,o);if(d=d.reshape(s.shape),i!=null){let p=O.getUndoAxesPermutation(i);d=jt(d,p)}return d}var TQ={kernelName:Jd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e,i=[];return o==null?i=r.shape.map((s,a)=>a):typeof o=="number"?i=[o]:i=o,{x:()=>IEe(r,t,i)}}};var DQ={kernelName:$c,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=$t(e.shape,r.shape);return{a:()=>{let a=je(t,ge(r,"float32")),l=Pn(e.shape,o);return l.length>0?$(Ge(a,l),e.shape):a},b:()=>{let a=L(t,ge(e,"float32")),l=Pn(r.shape,o);l.length>0&&(a=$(Ge(a,l),r.shape));let c=Gt(r);return Xt(je(a,ge(c,"float32")))}}}};var EQ={kernelName:ru,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>je(t,Xt(Gt(e)))}}};var IQ={kernelName:iu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,r=L(as(e,6),aa(e));return{x:()=>L(t,ge(r,"float32"))}}};var NQ={kernelName:ou,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,ge(aa(e),"float32"))}}};var AQ={kernelName:ep,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$(t,e.shape)}}};var RQ={kernelName:np,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[r]=n,o={dy:t,images:r};return{images:()=>R.runKernel(Lg,o,e)}}};var OQ={kernelName:tp,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[r]=n,o={dy:t,images:r};return{images:()=>R.runKernel(Bg,o,e)}}};var FQ={kernelName:rp,gradFunc:(t,n,e)=>{let{dims:r}=e,o=lo(r,t.shape);return{x:()=>Qr(t,o)}}};var PQ={kernelName:su,gradFunc:t=>({x:()=>pt(t)})};var BQ={kernelName:au,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Xt(je(t,L(Yo(e,1.5),2)))}}};var LQ={kernelName:op,inputsToSave:["condition"],gradFunc:(t,n)=>{let[e]=n;return{condition:()=>ge(pt(e),"float32"),t:()=>L(t,ge(e,t.dtype)),e:()=>L(t,ge(Sp(e),t.dtype))}}};var $Q={kernelName:lu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=Yn(e,Ue(0)),o=Ue(k8),i=Ue(b8),s=L(t,i),a=L(L(t,o),mr(ge(e,"float32")));return An(r,s,a)}}}};var VQ={kernelName:pu,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,L(e,Be(Ue(1),e)))}}};var jQ={kernelName:du,gradFunc:t=>({x:()=>pt(t)})};var zQ={kernelName:cu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(yp(ge(e,"float32")),t)}}};var HQ={kernelName:uu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(v0(ge(e,"float32")),t)}}};var UQ={kernelName:ip,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{begin:o,size:i}=e,s=r.shape,[a,l]=_8(r,o,i),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],s[u]-a[u]-l[u]]);return{x:()=>Si(t,c)}}};var GQ={kernelName:cp,outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r]=n,{dim:o}=e,i=!0,s=L(t,r);return{logits:()=>Be(s,L(Ge(s,[o],i),r))}}};var WQ={kernelName:hu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,ui(e))}}};var D8={kernelName:ap,gradFunc:(t,n,e)=>{let{blockShape:r,paddings:o}=e;return{x:()=>wp(t,r,o)}}};var E8={kernelName:lp,gradFunc:(t,n,e)=>{let{axis:r}=e;return{x:()=>vn(t,r)}}};var qQ={kernelName:fu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>je(t,L(In(ge(e,"float32")),2))}}};var KQ={kernelName:qg,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,L(ge(e,"float32"),2))}}};var ZQ={kernelName:mu,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ue(2);return{a:()=>L(t,L(o,Be(e,r))),b:()=>L(t,L(o,Be(r,e)))}}};var XQ={kernelName:yu,gradFunc:t=>({x:()=>pt(t)})};var YQ={kernelName:gu,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=$t(e.shape,r.shape);return{a:()=>{let a=t,l=Pn(e.shape,o);return l.length>0&&(a=Ge(a,l)),$(a,e.shape)},b:()=>{let a=t,l=Pn(r.shape,o);return l.length>0&&(a=Ge(a,l)),$(Xt(a),r.shape)}}}};var QQ={kernelName:sp,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,o=r.shape.slice(),{axis:i}=e;lo(i,r.shape).forEach(c=>{o[c]=1});let a=$(t,o),l=L(a,Nr(r.shape,"float32"));return{x:()=>l}}};var JQ={kernelName:vu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>je(t,Gt(yp(e)))}}};var eJ={kernelName:wu,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(Be(Ue(1),Gt(e)),t)}}};var tJ={kernelName:kl,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{reps:o}=e;return{x:()=>{let s=pt(r);if(r.rank===1)for(let a=0;a<o[0];++a)s=fe(s,Ft(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)s=fe(s,Ft(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)s=fe(s,Ft(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)for(let u=0;u<o[3];++u)s=fe(s,Ft(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};var nJ={kernelName:bl,gradFunc:(t,n,e)=>{let r=e,{perm:o}=r,i=M_(o);return{x:()=>jt(t,i)}}};var rJ={kernelName:up,gradFunc:(t,n,e)=>{let r=e,{axis:o}=r;return{value:()=>Qn(t,o)}}};var oJ={kernelName:dp,inputsToSave:["segmentIds"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>NEe(t,e)}}};function NEe(t,n){let e=ji(n,pt(n)),r=Ol(t,e),o=bi(n,Ue(0,"int32")),i=r.rank-o.rank;for(let a=0;a<i;++a)o=gr(o,a+1);o=No(o,Nr(r.shape,"bool"));let s=pt(r);return An(o,r,s)}var iJ={kernelName:pp,gradFunc:t=>({x:()=>pt(t)})};var AEe=[fT,uY,dY,pY,hY,fY,mY,gY,vY,wY,yY,xY,kY,CY,SY,MY,TY,DY,EY,IY,NY,AY,OY,RY,PY,BY,LY,$Y,VY,jY,DQ,zY,HY,UY,GY,WY,KY,qY,ZY,QY,JY,eQ,tQ,nQ,rQ,oQ,iQ,sQ,aQ,cQ,M8,M8,uQ,pQ,fQ,mQ,gQ,vQ,wQ,yQ,xQ,_Q,kQ,bQ,CQ,T8,T8,SQ,MQ,TQ,EQ,IQ,NQ,AQ,RQ,OQ,FQ,PQ,BQ,LQ,$Q,VQ,jQ,zQ,HQ,UQ,GQ,WQ,D8,D8,E8,E8,qQ,ZQ,KQ,XQ,YQ,QQ,JQ,eJ,tJ,nJ,rJ,oJ,iJ];for(let t of AEe)VF(t);U().prototype.abs=function(){return this.throwIfDisposed(),zn(this)};U().prototype.acos=function(){return this.throwIfDisposed(),e_(this)};U().prototype.acosh=function(){return this.throwIfDisposed(),t_(this)};U().prototype.add=function(t){return this.throwIfDisposed(),fe(this,t)};U().prototype.all=function(t,n){return this.throwIfDisposed(),h0(this,t,n)};U().prototype.any=function(t,n){return this.throwIfDisposed(),Yh(this,t,n)};U().prototype.argMax=function(t){return this.throwIfDisposed(),Dl(this,t)};U().prototype.argMin=function(t){return this.throwIfDisposed(),n_(this,t)};U().prototype.asScalar=function(){return this.throwIfDisposed(),F(this.size===1,()=>"The array must have only 1 element."),$(this,[])};U().prototype.asType=function(t){return this.throwIfDisposed(),ge(this,t)};U().prototype.as1D=function(){return this.throwIfDisposed(),$(this,[this.size])};U().prototype.as2D=function(t,n){return this.throwIfDisposed(),$(this,[t,n])};U().prototype.as3D=function(t,n,e){return this.throwIfDisposed(),$(this,[t,n,e])};U().prototype.as4D=function(t,n,e,r){return this.throwIfDisposed(),$(this,[t,n,e,r])};U().prototype.as5D=function(t,n,e,r,o){return this.throwIfDisposed(),$(this,[t,n,e,r,o])};U().prototype.asin=function(){return this.throwIfDisposed(),r_(this)};U().prototype.asinh=function(){return this.throwIfDisposed(),o_(this)};U().prototype.atan=function(){return this.throwIfDisposed(),i_(this)};U().prototype.atan2=function(t){return this.throwIfDisposed(),s_(this,t)};U().prototype.atanh=function(){return this.throwIfDisposed(),a_(this)};U().prototype.avgPool=function(t,n,e,r){return this.throwIfDisposed(),vp(this,t,n,e,r)};U().prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),wp(this,t,n)};U().prototype.batchNorm=function(t,n,e,r,o){return this.throwIfDisposed(),El(this,t,n,e,r,o)};U().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Il(this,t)};U().prototype.cast=function(t){return this.throwIfDisposed(),ge(this,t)};U().prototype.ceil=function(){return this.throwIfDisposed(),m_(this)};U().prototype.clipByValue=function(t,n){return this.throwIfDisposed(),go(this,t,n)};U().prototype.concat=function(t,n){return this.throwIfDisposed(),t instanceof Lt&&(t=[t]),vn([this,...t],n)};U().prototype.conv1d=function(t,n,e,r,o,i){return this.throwIfDisposed(),m0(this,t,n,e,r,o,i)};U().prototype.conv2dTranspose=function(t,n,e,r,o){return this.throwIfDisposed(),g0(this,t,n,e,r,o)};U().prototype.conv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),Vi(this,t,n,e,r,o,i)};U().prototype.cos=function(){return this.throwIfDisposed(),yp(this)};U().prototype.cosh=function(){return this.throwIfDisposed(),v0(this)};U().prototype.cumprod=function(t,n,e){return this.throwIfDisposed(),Qh(this,t,n,e)};U().prototype.cumsum=function(t,n,e){return this.throwIfDisposed(),w0(this,t,n,e)};U().prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),k_(this,t,n)};U().prototype.depthwiseConv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),Nl(this,t,n,e,r,o,i)};U().prototype.dilation2d=function(t,n,e,r,o){return this.throwIfDisposed(),b_(this,t,n,e,r,o)};U().prototype.divNoNan=function(t){return this.throwIfDisposed(),C_(this,t)};U().prototype.div=function(t){return this.throwIfDisposed(),je(this,t)};U().prototype.dot=function(t){return this.throwIfDisposed(),S_(this,t)};U().prototype.elu=function(){return this.throwIfDisposed(),Al(this)};U().prototype.equal=function(t){return this.throwIfDisposed(),Eo(this,t)};U().prototype.erf=function(){return this.throwIfDisposed(),y0(this)};U().prototype.euclideanNorm=function(t,n){return this.throwIfDisposed(),T_(this,t,n)};U().prototype.exp=function(){return this.throwIfDisposed(),mr(this)};U().prototype.expandDims=function(t){return this.throwIfDisposed(),gr(this,t)};U().prototype.expm1=function(){return this.throwIfDisposed(),D_(this)};U().prototype.fft=function(){return this.throwIfDisposed(),Ip(this)};U().prototype.flatten=function(){return this.throwIfDisposed(),$(this,[this.size])};U().prototype.floor=function(){return this.throwIfDisposed(),Rl(this)};U().prototype.floorDiv=function(t){return this.throwIfDisposed(),p0(this,t)};U().prototype.gather=function(t,n,e){return this.throwIfDisposed(),Ol(this,t,n,e)};U().prototype.greaterEqual=function(t){return this.throwIfDisposed(),bi(this,t)};U().prototype.greater=function(t){return this.throwIfDisposed(),Yn(this,t)};U().prototype.ifft=function(){return this.throwIfDisposed(),Du(this)};U().prototype.irfft=function(){return this.throwIfDisposed(),R0(this)};U().prototype.isFinite=function(){return this.throwIfDisposed(),E_(this)};U().prototype.isInf=function(){return this.throwIfDisposed(),I_(this)};U().prototype.isNaN=function(){return this.throwIfDisposed(),N_(this)};U().prototype.leakyRelu=function(t){return this.throwIfDisposed(),kp(this,t)};U().prototype.lessEqual=function(t){return this.throwIfDisposed(),as(this,t)};U().prototype.less=function(t){return this.throwIfDisposed(),Mu(this,t)};U().prototype.localResponseNormalization=function(t,n,e,r){return this.throwIfDisposed(),A_(this,t,n,e,r)};U().prototype.logSigmoid=function(){return this.throwIfDisposed(),O_(this)};U().prototype.logSoftmax=function(t){return this.throwIfDisposed(),x0(this,t)};U().prototype.logSumExp=function(t,n){return this.throwIfDisposed(),Cp(this,t,n)};U().prototype.log=function(){return this.throwIfDisposed(),wo(this)};U().prototype.log1p=function(){return this.throwIfDisposed(),bp(this)};U().prototype.logicalAnd=function(t){return this.throwIfDisposed(),No(this,t)};U().prototype.logicalNot=function(){return this.throwIfDisposed(),Sp(this)};U().prototype.logicalOr=function(t){return this.throwIfDisposed(),_0(this,t)};U().prototype.logicalXor=function(t){return this.throwIfDisposed(),F_(this,t)};U().prototype.matMul=function(t,n,e){return this.throwIfDisposed(),Vt(this,t,n,e)};U().prototype.maxPool=function(t,n,e,r){return this.throwIfDisposed(),Mp(this,t,n,e,r)};U().prototype.max=function(t,n){return this.throwIfDisposed(),vo(this,t,n)};U().prototype.maximum=function(t){return this.throwIfDisposed(),ji(this,t)};U().prototype.mean=function(t,n){return this.throwIfDisposed(),Bn(this,t,n)};U().prototype.min=function(t,n){return this.throwIfDisposed(),Cu(this,t,n)};U().prototype.minimum=function(t){return this.throwIfDisposed(),Ls(this,t)};U().prototype.mirrorPad=function(t,n){return this.throwIfDisposed(),B_(this,t,n)};U().prototype.mod=function(t){return this.throwIfDisposed(),L_(this,t)};U().prototype.mul=function(t){return this.throwIfDisposed(),L(this,t)};U().prototype.neg=function(){return this.throwIfDisposed(),Xt(this)};U().prototype.norm=function(t,n,e){return this.throwIfDisposed(),Su(this,t,n,e)};U().prototype.notEqual=function(t){return this.throwIfDisposed(),Aa(this,t)};U().prototype.oneHot=function(t,n=1,e=0){return this.throwIfDisposed(),Fl(this,t,n,e)};U().prototype.onesLike=function(){return this.throwIfDisposed(),co(this)};U().prototype.pad=function(t,n){return this.throwIfDisposed(),Si(this,t,n)};U().prototype.pool=function(t,n,e,r,o,i){return this.throwIfDisposed(),$_(this,t,n,e,r,o,i)};U().prototype.pow=function(t){return this.throwIfDisposed(),Yo(this,t)};U().prototype.prelu=function(t){return this.throwIfDisposed(),Dp(this,t)};U().prototype.prod=function(t,n){return this.throwIfDisposed(),V_(this,t,n)};U().prototype.reciprocal=function(){return this.throwIfDisposed(),z_(this)};U().prototype.relu=function(){return this.throwIfDisposed(),Ao(this)};U().prototype.relu6=function(){return this.throwIfDisposed(),C0(this)};U().prototype.reshapeAs=function(t){return this.throwIfDisposed(),$(this,t.shape)};U().prototype.reshape=function(t){return this.throwIfDisposed(),$(this,t)};U().prototype.resizeBilinear=function(t,n,e){return this.throwIfDisposed(),iT(this,t,n,e)};U().prototype.resizeNearestNeighbor=function(t,n,e){return this.throwIfDisposed(),sT(this,t,n,e)};U().prototype.reverse=function(t){return this.throwIfDisposed(),Qr(this,t)};U().prototype.rfft=function(){return this.throwIfDisposed(),Np(this)};U().prototype.round=function(){return this.throwIfDisposed(),S0(this)};U().prototype.rsqrt=function(){return this.throwIfDisposed(),M0(this)};U().prototype.selu=function(){return this.throwIfDisposed(),T0(this)};U().prototype.separableConv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),D0(this,t,n,e,r,o,i)};U().prototype.sigmoid=function(){return this.throwIfDisposed(),ui(this)};U().prototype.sign=function(){return this.throwIfDisposed(),H_(this)};U().prototype.sin=function(){return this.throwIfDisposed(),E0(this)};U().prototype.sinh=function(){return this.throwIfDisposed(),I0(this)};U().prototype.slice=function(t,n){return this.throwIfDisposed(),Ft(this,t,n)};U().prototype.softmax=function(t){return this.throwIfDisposed(),Ep(this,t)};U().prototype.softplus=function(){return this.throwIfDisposed(),Na(this)};U().prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),Tp(this,t,n)};U().prototype.split=function(t,n){return this.throwIfDisposed(),Jr(this,t,n)};U().prototype.sqrt=function(){return this.throwIfDisposed(),In(this)};U().prototype.square=function(){return this.throwIfDisposed(),Gt(this)};U().prototype.squaredDifference=function(t){return this.throwIfDisposed(),O0(this,t)};U().prototype.squeeze=function(t){return this.throwIfDisposed(),cs(this,t)};U().prototype.stack=function(t,n){this.throwIfDisposed();let e=t instanceof Lt?[this,t]:[this,...t];return Qn(e,n)};U().prototype.step=function(t){return this.throwIfDisposed(),aa(this,t)};U().prototype.stridedSlice=function(t,n,e,r,o,i,s,a){return this.throwIfDisposed(),U_(this,t,n,e,r,o,i,s,a)};U().prototype.sub=function(t){return this.throwIfDisposed(),Be(this,t)};U().prototype.sum=function(t,n){return this.throwIfDisposed(),Ge(this,t,n)};U().prototype.tan=function(){return this.throwIfDisposed(),G_(this)};U().prototype.tanh=function(){return this.throwIfDisposed(),Ea(this)};U().prototype.tile=function(t){return this.throwIfDisposed(),Io(this,t)};U().prototype.toBool=function(){return this.throwIfDisposed(),ge(this,"bool")};U().prototype.toFloat=function(){return this.throwIfDisposed(),ge(this,"float32")};U().prototype.toInt=function(){return this.throwIfDisposed(),ge(this,"int32")};U().prototype.topk=function(t,n){return this.throwIfDisposed(),K_(this,t,n)};U().prototype.transpose=function(t){return this.throwIfDisposed(),jt(this,t)};U().prototype.unique=function(t){return this.throwIfDisposed(),Z_(this,t)};U().prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),P0(this,t,n)};U().prototype.unstack=function(t){return this.throwIfDisposed(),eo(this,t)};U().prototype.where=function(t,n){return this.throwIfDisposed(),An(t,this,n)};U().prototype.zerosLike=function(){return this.throwIfDisposed(),pt(this)};var la=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},zi=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},te=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},bt=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},gT=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}};var tk=class{constructor(n){this.maxEntries=n||100,this.cache=new Map}get(n){let e;return this.cache.has(n)&&(e=this.cache.get(n),this.cache.delete(n),this.cache.set(n,e)),e}put(n,e){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxEntries){let r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(n,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(n){if(n<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${n}.`);if(this.maxEntries>n)for(let e=0;e<this.maxEntries-n;e++){let r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=n}};function Pa(t,n){if(Array.isArray(t)){let e=[];for(let r=0;r<n;r++)e=e.concat(t);return e}else{let e=new Array(n);return e.fill(t),e}}function ca(t,n){if(!t)throw new gT(n)}function N8(t,n){let e=0;for(let r of t)r===n&&e++;return e}function Ro(t){return t.length===1?t[0]:t}function Cn(t){return Array.isArray(t)?t:[t]}function Ba(t){let e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return e[0]!=="_"?e:"private"+e}function Op(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(n,e)=>e.toUpperCase())}var Fa={};function yv(t){if(t==null)return null;let n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function I8(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(n=>I8(n));else{let n=Object.keys(t);for(let e of n){let r=t[e];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[e]=r.value:I8(r))}}}function Iu(t,n={},e={},r="object",o=!1){if(typeof t=="string"){let i=t,s;if(i in e)s=e[i];else if(i in Fa)s=Fa[i];else if(s=n[i],s==null)throw new te(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{let i=t;if(i.className==null||i.config==null)throw new te(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);let s=i.className,a,l;if(s in e?[a,l]=e[s]:s in Fa?[a,l]=Fa.className:s in n&&([a,l]=n[s]),a==null)throw new te(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let c={};for(let h of Object.keys(Fa))c[h]=Fa[h];for(let h of Object.keys(e))c[h]=e[h];let u=i.config;u.customObjects=c;let d=Object.assign({},Fa);for(let h of Object.keys(e))Fa[h]=e[h];I8(i.config);let p=l(a,i.config,e,o);return Fa=Object.assign({},d),p}else{let c=Object.assign({},Fa);for(let d of Object.keys(e))Fa[d]=e[d];let u=new a(i.config);return Fa=Object.assign({},c),u}}}function REe(t,n){return t<n?-1:t>n?1:0}function nk(t,n){return-1*REe(t,n)}function La(t){if(t==null)return t;let n=[];for(let e of t)n.indexOf(e)===-1&&n.push(e);return n}function sJ(t){if(t==null)throw new te(`Invalid value in obj: ${JSON.stringify(t)}`);for(let n in t)if(t.hasOwnProperty(n))return!1;return!0}function Nu(t,n,e){if(e!=null&&t.indexOf(e)<0)throw new te(`${e} is not a valid ${n}.  Valid values are ${t} or null/undefined.`)}function vT(t,n,e=0,r=1/0){return ca(e>=0),ca(r>=e),Array.isArray(t)&&t.length>=e&&t.length<=r&&t.every(o=>typeof o===n)}function Or(t,n){Array.isArray(t)?(x.assert(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((e,r)=>Or(e,`element ${r+1} of ${n}`))):x.assert(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${aJ(t)}.`)}function aJ(t){return t===null?"null":Array.isArray(t)?"["+t.map(n=>aJ(n)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function lJ(t,n,e){let r=e!=null?e():x.now(),o;return(...s)=>{let a=e!=null?e():x.now();return a-r<n||(r=a,o=t(...s)),o}}function wT(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}var OEe=0;function xT(){return OEe++}var yT={};function df(t=""){return t in yT||(yT[t]=0),yT[t]+=1,t+yT[t].toString()}var cJ=["channelsFirst","channelsLast"],uJ=["nearest","bilinear"],dJ=["valid","same","causal"],pJ=["max","avg"],hJ=["sum","mul","concat","ave"];var xv=new Map;function or(t){Nu(cJ,"DataFormat",t)}function mJ(t){Nu(uJ,"InterpolationFormat",t)}function Hi(t){Nu(dJ,"PaddingMode",t)}function A8(t){Nu(pJ,"PoolMode",t)}var rk=[],fJ="/";function Ll(t,n){rk.push(t);try{let e=n();return rk.pop(),e}catch(e){throw rk.pop(),e}}function FEe(){return rk.length===0?"":rk.join(fJ)+fJ}function _T(t){if(!gJ(t))throw new Error("Not a valid tensor name: '"+t+"'");return FEe()+t}function kT(t){if(!gJ(t))throw new Error("Not a valid tensor name: '"+t+"'");xv.has(t)||xv.set(t,0);let n=xv.get(t);if(xv.set(t,xv.get(t)+1),n>0){let e=`${t}_${n}`;return xv.set(e,1),e}else return t}var PEe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function gJ(t){return!!t.match(PEe)}function vJ(t){return t===parseInt(t.toString(),10)}function $a(t,n,e){n==null&&(n=0),e==null&&(e=t.length);let r=1;for(let o=n;o<e;++o)r*=t[o];return r}function z0(t){if(t.length===0)return Number.NaN;let n=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++){let r=t[e];r<n&&(n=r)}return n}function $l(t){if(t.length===0)return Number.NaN;let n=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){let r=t[e];r>n&&(n=r)}return n}function Ui(t,n){if(n<t)throw new te(`end (${n}) < begin (${t}) is forbidden.`);let e=[];for(let r=t;r<n;++r)e.push(r);return e}var R8;function no(){return R8==null&&(R8=Yx().epsilon()),R8}function Gi(){return"channelsLast"}function Ti(t,n){return ge(t,n)}function Pp(t,n=-1){let e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),$(t,e)}function wJ(t,n){return ne(()=>{if(t.shape.length!==2)throw new te(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let e=Pp(t,1);return CT(e,[1,n,1])})}function yJ(t){let n=[$a(t.shape)];return $(t,n)}function xJ(t){if(t.rank<=1)throw new te(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let n=[t.shape[0],$a(t.shape,1)];return $(t,n)}function Fp(t,n,e){return ne(()=>{switch(t.rank){case 1:return N0(t,n,e);case 2:return hv(t,[n,0],[e,t.shape[1]]);case 3:return A0(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return nf(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Ft(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Ft(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new te(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function O8(t,n,e){return ne(()=>{switch(t.rank){case 1:return N0(t,n,e);case 2:return hv(t,[0,n],[t.shape[0],e]);case 3:return A0(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return nf(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new te(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ok(t,n,e,r){return ne(()=>{switch(t.rank){case 1:return N0(t,n,e);case 2:switch(r){case 1:return Fp(t,n,e);case 2:return O8(t,n,e);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Fp(t,n,e);case 2:return A0(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return O8(t,n,e);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Fp(t,n,e);case 2:return nf(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return nf(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return O8(t,n,e);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}default:throw new te(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function _v(t,n=-1){let e;return n<0&&(e=t[0].rank,e!==0?n=e:n=0),n===t[0].rank&&(n=-1),vn(t,n)}function P8(t,n){switch(t.rank){case 1:return g_([t,n]);case 2:return v_([t,n],0);case 3:return w_([t,n],0);case 4:return y_([t,n],0);default:throw new te(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function CT(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new te(`The length of input n (${n.length}) does not match the number of dimensions in input x (${t.rank})`);return Io(t,n)}function kv(t,n=0,e=1,r,o){return tf(t,n,e,r,o)}function Va(t,n,e,r){if(t.rank<2||n.rank<2)throw new bt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${n.shape}`);if(n.rank>=3){let o=t.shape.slice(-1)[0],i=n.shape.slice(-2)[0];if(o!==i)throw new bt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${n.shape}`)}if(t.rank===2&&n.rank===2)return Ap.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:r?F8(t.rank,r,Gi()):null,activation:e});{let o=t.shape.slice(),i=o.pop();t=$(t,[-1,i]);let s=n.shape.slice(),a=s.pop(),l=s.pop(),c=[...s,a],u=Array.from({length:n.rank},(f,m)=>m===0?n.rank-2:m<=n.rank-2?m-1:m);n=$(jt(n,u),[l,-1]);let d=[...o,...c];return $(Ap.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:r?F8(t.rank,r,Gi()):null,activation:e}),d)}}function ST(t,n,e){return ne(()=>(Array.isArray(n)?n=Jn(n,"int32"):n=ge(n,"int32"),Ol(t,n,e)))}function H0(t){return L(t,t)}function F8(t,n,e){let r=n.shape;if(n.rank!==1&&n.rank!==t)throw new te(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${t}`);if(t===5){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1,1,1]):$(n,[1,r[3],r[0],r[1],r[2]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,1,1,r[0]]):$(n,[1].concat(r))}else if(t===4){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1,1]):$(n,[1,r[2],r[0],r[1]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,1,r[0]]):$(n,[1].concat(r))}else if(t===3){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1]):$(n,[1,r[1],r[0]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,r[0]]):$(n,[1].concat(r))}else if(t<3)return n;throw new te(`Unsupported input rank by biasAdd: ${n.rank}`)}function Wi(t,n,e){return ne(()=>(e==null&&(e=Gi()),or(e),fe(t,F8(t.rank,n,e))))}function _J(t,n=1){if(n!==1)throw new bt(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return Al(t)}function kJ(t){return ne(()=>je(t,fe(zn(t),1)))}function MT(t,n,e,r){return ne(()=>XM(t,n,e,r))}function bJ(t){return ne(()=>{let n=fe(.5,L(.2,t));return go(n,0,1)})}function pf(t,n,e=!1){return e?t():n()}var CJ=["fanIn","fanOut","fanAvg"],SJ=["normal","uniform","truncatedNormal"];function BEe(t){Nu(CJ,"FanMode",t)}function LEe(t){Nu(SJ,"Distribution",t)}var qi=class extends ve.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},B8=(()=>{class t extends qi{apply(e,r){return Ln(e,r)}}return t.className="Zeros",t})();ve.registerClass(B8);var ik=(()=>{class t extends qi{apply(e,r){return Nr(e,r)}}return t.className="Ones",t})();ve.registerClass(ik);var L8=(()=>{class t extends qi{constructor(e){if(super(),typeof e!="object")throw new te(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new te(`config must have value set but got ${e}`);this.value=e.value}apply(e,r){return ne(()=>L(Ue(this.value),Nr(e,r)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();ve.registerClass(L8);var $8=(()=>{class t extends qi{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,r){return ls(e,this.minval,this.maxval,r,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();ve.registerClass($8);var V8=(()=>{class t extends qi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new bt(`randomNormal does not support dType ${r}.`);return kv(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();ve.registerClass(V8);var j8=(()=>{class t extends qi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new bt(`truncatedNormal does not support dType ${r}.`);return F0(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();ve.registerClass(j8);var z8=(()=>{class t extends qi{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,r){return ne(()=>{if(e.length!==2||e[0]!==e[1])throw new te("Identity matrix initializer can only be used for 2D square matrices.");return L(this.gain,Jh(e[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();ve.registerClass(z8);function $Ee(t,n="channelsLast"){let e,r;if(or(n),t.length===2)e=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(n==="channelsFirst"){let o=$a(t,2);e=t[1]*o,r=t[0]*o}else if(n==="channelsLast"){let o=$a(t,0,t.length-2);e=t[t.length-2]*o,r=t[t.length-1]*o}}else{let o=$a(t);e=Math.sqrt(o),r=Math.sqrt(o)}return[e,r]}var us=(()=>{class t extends qi{constructor(e){if(super(),e.scale<0)throw new te(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,BEe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,LEe(this.distribution),this.seed=e.seed}apply(e,r){let o=$Ee(e),i=o[0],s=o[1],a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(i+s)/2),this.distribution==="normal"){let l=Math.sqrt(a);if(r=r||"float32",r!=="float32"&&r!=="int32")throw new bt(`${this.getClassName()} does not support dType ${r}.`);return F0(e,0,l,r,this.seed)}else{let l=Math.sqrt(3*a);return ls(e,-l,l,r,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();ve.registerClass(us);var TT=(()=>{class t extends us{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return us.className}}return t.className="GlorotUniform",t})();ve.registerClass(TT);var DT=(()=>{class t extends us{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return us.className}}return t.className="GlorotNormal",t})();ve.registerClass(DT);var ET=(()=>{class t extends us{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return us.className}}return t.className="HeNormal",t})();ve.registerClass(ET);var IT=(()=>{class t extends us{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return us.className}}return t.className="HeUniform",t})();ve.registerClass(IT);var NT=(()=>{class t extends us{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return us.className}}return t.className="LeCunNormal",t})();ve.registerClass(NT);var AT=(()=>{class t extends us{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return us.className}}return t.className="LeCunUniform",t})();ve.registerClass(AT);var H8=(()=>{class t extends qi{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,r){return ne(()=>{if(e.length<2)throw new bt("Shape must be at least 2D.");if(r!=="int32"&&r!=="float32"&&r!==void 0)throw new TypeError(`Unsupported data type ${r}.`);r=r;let o=x.sizeFromShape(e.slice(0,-1)),i=e[e.length-1],s=o*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);let a=[Math.max(i,o),Math.min(i,o)],l=kv(a,0,1,r,this.seed),c=aT.qr(l,!1),u=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(i,o)*Math.min(i,o)],[Math.min(i,o)+1]);return u=L(u,p.sign()),o<i&&(u=u.transpose()),L(Ue(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();ve.registerClass(H8);var MJ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function TJ(t,n={}){return Iu(t,ve.SerializationMap.getMap().classNameMap,n,"initializer")}function Un(t){return yv(t)}function Rn(t){if(typeof t=="string"){let n=t in MJ?MJ[t]:t;if(n==="GlorotNormal")return new DT;if(n==="GlorotUniform")return new TT;if(n==="HeNormal")return new ET;if(n==="HeUniform")return new IT;if(n==="LeCunNormal")return new NT;if(n==="LeCunUniform")return new AT;{let e={};return e.className=n,e.config={},TJ(e)}}else return t instanceof qi?t:TJ(t)}function RT(t){return Array.isArray(t)&&Array.isArray(t[0])}function bv(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function ft(t){let n;if(Array.isArray(t)){if(t.length!==1)throw new te(`Expected Tensor length to be 1; got ${t.length}`);n=t[0]}else n=t;return n}function Wt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new te(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function Cv(t){let n=0;for(let e of t)e.shape.length===0?n+=1:n+=e.shape.reduce((r,o)=>r*o);return n}var EJ="Variable",Sv=class{constructor(n,e="float32",r=EJ,o=!0,i=null){this.dtype=e??"float32",this.shape=n.shape,this.id=xT(),r=r??EJ,this.originalName=_T(r),this.name=kT(this.originalName),this.trainable_=o,this.constraint=i,this.val=X_(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(n){return this.assertNotDisposed(),jEe(this.val,n),this.val.id!==n.id&&(this.val.assign(n),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(n){this.trainable_=n,this.val.trainable=n}};function jEe(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}function sk(t){return t.map(n=>n.read())}function Mv(t){t.forEach(n=>{n[0].write(n[1])})}var On=class{constructor(n){this.dtype=n.dtype,this.shape=n.shape,n.shape!=null?this.ndim=n.shape.length:this.ndim=n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}}},pi=class{constructor(n,e,r,o,i,s,a){this.dtype=n,this.shape=e,this.sourceLayer=r,this.inputs=o,this.callArgs=i,this.outputTensorIndex=a,this.id=xT(),s!=null&&(this.originalName=_T(s),this.name=kT(this.originalName)),this.rank=e.length}},zEe=0,Bp=class{constructor(n,e){this.callArgs=e,this.id=zEe++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(let r of n.inboundLayers)r?.outboundNodes.push(this);n.outboundLayer.inboundNodes.push(this)}getConfig(){let n=[];for(let e of this.inboundLayers)e!=null?n.push(e.name):n.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},HEe=0,Ct=class extends ve.Serializable{constructor(n={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=HEe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=n.name;if(!e){let r=this.getClassName();e=Ba(r)+"_"+df(r)}if(this.name=e,this.trainable_=n.trainable==null?!0:n.trainable,n.inputShape!=null||n.batchInputShape!=null){let r;if(n.batchInputShape!=null)r=n.batchInputShape;else if(n.inputShape!=null){let i=null;n.batchSize!=null&&(i=n.batchSize),r=[i].concat(n.inputShape)}this.batchInputShape=r;let o=n.dtype;o==null&&(o=n.inputDType),o==null&&(o="float32"),this.dtype=o}n.weights!=null?this.initialWeights=n.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(n,e){return n.name+"_ib-"+e.toString()}getNodeAtIndex(n,e){if(this.inboundNodes.length===0)throw new zi(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=n)throw new te(`Asked to get ${e} at node ${n}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[n]}getInputAt(n){return Ro(this.getNodeAtIndex(n,"input").inputTensors)}getOutputAt(n){return Ro(this.getNodeAtIndex(n,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new la(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new la(`Layer ${this.name} is not connected, no input to return.`);return Ro(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new la(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new la(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ro(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(n=>n())}get updates(){return this._updates}get built(){return this._built}set built(n){this._built=n}get trainable(){return this.trainable_}set trainable(n){this._trainableWeights.forEach(e=>e.trainable=n),this.trainable_=n}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(n=>n.trainable):[]}set trainableWeights(n){this._trainableWeights=n}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(n=>!n.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(n){this._nonTrainableWeights=n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(n){let e=Cn(n);if(this.inputSpec==null||this.inputSpec.length===0)return;let r=Cn(this.inputSpec);if(e.length!==r.length)throw new te(`Layer ${this.name} expects ${r.length} inputs, but it received ${e.length} input tensors. Input received: ${n}`);for(let o=0;o<e.length;o++){let i=e[o],s=r[o];if(s==null)continue;let a=i.rank;if(s.ndim!=null&&a!==s.ndim)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(s.maxNDim!=null&&a>s.maxNDim)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(s.minNDim!=null&&a<s.minNDim)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(s.dtype!=null&&i.dtype!==s.dtype)throw new te(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${i.dtype}.`);if(s.axes){let l=i.shape;for(let c in s.axes){let u=Number(c),d=s.axes[c],p=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(p)===-1)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){let c=s.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new te(`Input ${o} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${i.shape}.`)}}}call(n,e){return n}invokeCallHook(n,e){this._callHook!=null&&this._callHook(n,e)}setCallHook(n){this._callHook=n}clearCallHook(){this._callHook=null}apply(n,e){e=e||{},this.assertNotDisposed();let r=Cn(n),o=WEe(n),i=qEe(n);if(o===i)throw new te("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ll(this.name,()=>{if(!this.built){this.assertInputCompatibility(n);let s=[];for(let a of Cn(n))s.push(a.shape);this.build(Ro(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(n),i){let s=this.call(n,e);this.supportsMasking&&this.setMaskMetadata(n,s);let a=Cn(s),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(s=Ro(l),this.activityRegularizer!=null)throw new bt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{let s=UEe(n),a=this.computeOutputShape(s),l,c=GEe(n);if(this.warnOnIncompatibleInputShape(Array.isArray(n)?s[0]:s),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new pi(c,u,this,Cn(n),e,this.name,d)):l=new pi(c,a,this,Cn(n),e,this.name),this.addInboundNode(n,l,null,null,s,a,e),this._refCount++,this.activityRegularizer!=null)throw new bt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(n){if(this.batchInputShape!=null)if(n.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(n)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&n[o]!=null&&n[o]!==r&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(n)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new la(`The layer ${this.name} has never been called and thus has no defined output shape.`);let n=[];for(let e of this.inboundNodes){let r=JSON.stringify(e.outputShapes);n.indexOf(r)===-1&&n.push(r)}if(n.length===1){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&e.length===1?e[0]:e}else throw new la(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new zi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Cv(this.weights)}build(n){this.built=!0}getWeights(n=!1){return sk(n?this.trainableWeights:this.weights)}setWeights(n){ne(()=>{let e=this.weights;if(e.length!==n.length)throw new te(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${n.length}, but the layer was expecting ${e.length} weights. Provided weights: ${n}...`);if(e.length===0)return;let r=[],o=sk(e);for(let i=0;i<o.length;++i){let s=o[i],a=e[i],l=n[i];if(!x.arraysEqual(s.shape,l.shape))throw new te(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}Mv(r)})}addWeight(n,e,r,o,i,s,a,l){if(this._addedWeightNames.indexOf(n)!==-1)throw new te(`Duplicate weight name ${n} for layer ${this.name}`);this._addedWeightNames.push(n),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():Rn("zeros"));let c=o.apply(e,r),u=new Sv(c,r,n,s,a);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),s==null&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(n){this.fastWeightInitDuringBuild=n}addLoss(n){n==null||Array.isArray(n)&&n.length===0||(n=Cn(n),this._losses!==void 0&&this._losses!==null&&this.losses.push(...n))}computeOutputShape(n){return n}computeMask(n,e){if(!this.supportsMasking){if(e!=null)if(Array.isArray(e))e.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return e}setMaskMetadata(n,e,r){if(!this.supportsMasking)return;let o=this.computeMask(n,r),i=Cn(e),s=Cn(o);if(i.length!==s.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=s[a]}addInboundNode(n,e,r,o,i,s,a=null){let l=Cn(n);e=Cn(e),r=Cn(r),o=Cn(o),i=bv(i),s=bv(s);let c=[],u=[],d=[];for(let p of l)c.push(p.sourceLayer),u.push(p.nodeIndex),d.push(p.tensorIndex);new Bp({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:e,inputMasks:r,outputMasks:o,inputShapes:i,outputShapes:s},a);for(let p=0;p<e.length;p++)e[p].sourceLayer=this,e[p].nodeIndex=this.inboundNodes.length-1,e[p].tensorIndex=p}getConfig(){let n={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(n.batchInputShape=this.batchInputShape),this.dtype!=null&&(n.dtype=this.dtype),n}disposeWeights(){return this.weights.forEach(n=>n.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let n=0;return--this._refCount===0&&(n=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:n}}};function UEe(t){t=Cn(t);let n=[];for(let e of t)n.push(e.shape);return Ro(n)}function GEe(t){return"float32"}function U8(t,n,e){if((n==null||e!=null&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),n.inboundNodes.length===0)return[t];{let r=n.inboundNodes[e];if(r.inboundLayers.length===0)return r.inputTensors;{let o=[];for(let i=0;i<r.inboundLayers.length;i++){let s=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],c=U8(s,a,l);for(let u of c)o.indexOf(u)===-1&&o.push(u)}return o}}}function WEe(t){let n=!0;for(let e of Cn(t))if(!(e instanceof pi)){n=!1;break}return n}function qEe(t){let n=!0;for(let e of Cn(t))if(e instanceof pi){n=!1;break}return n}var hf=(()=>{class t extends Ct{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:df("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new te("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let r=e.batchInputShape;if(r==null){if(e.inputShape==null)throw new te("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new te("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let o=e.dtype||"float32";this.batchInputShape=r,this.dtype=o,this.inputSpec=[{shape:r}];let i=new pi(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new Bp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]})}apply(e,r){throw new te(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();ve.registerClass(hf);function OT(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new te("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let n=t.batchShape;t.shape!=null&&n==null&&(n=[null].concat(t.shape));let e=t.dtype;return e==null&&(e="float32"),new hf({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function KEe(t,n){if(t.dtype==null||t.dtype===n.dtype)return n;try{return ge(n,t.dtype)}catch{throw new te(`The dtype of the feed (${n.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var Au=class t{constructor(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof t)for(let e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(n==null)return;for(let e of n)this.add(e.key,e.value)}}add(n,e,r){if(this.id2Value[n.id]==null)this.id2Value[n.id]=KEe(n,e),this.name2Id[n.name]=n.id,r!=null&&(this.id2Mask[n.id]=r);else throw new te(`Duplicate key: name=${n.name}, id=${n.id}`);return this}addFeed(n){this.add(n.key,n.value)}hasKey(n){return this.id2Value[n.id]!=null}names(){return Object.keys(this.name2Id)}getValue(n){if(n instanceof pi){if(this.id2Value[n.id]==null)throw new te(`Nonexistent key: ${n.name}`);return this.id2Value[n.id]}else{let e=this.name2Id[n];if(e==null)throw new te(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Value[e]}}getMask(n){if(n instanceof pi){if(this.id2Value[n.id]==null)throw new te(`Nonexistent key: ${n.name}`);return this.id2Mask[n.id]}else{let e=this.name2Id[n];if(e==null)throw new te(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Mask[e]}}disposeMasks(){this.id2Mask!=null&&gt(this.id2Mask)}},FT=new tk,PT=new tk;function NJ(t){FT?.setMaxEntries(t),PT?.setMaxEntries(t)}function U0(t,n,e,r){let o=e==null?!1:e.training,i=Array.isArray(t),s=i?t:[t],a=s.map(f=>f.name),l=[],c=n.names();for(let f of a)c.indexOf(f)!==-1?l.push(n.getValue(f)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let u=a.join(",")+"|"+n.names().sort().join(","),d=FT.get(u),p;if(d==null){let f=ZEe(s,n);d=f.sorted,p=f.recipientCounts,FT.put(u,d),PT.put(u,p)}p={},o||Object.assign(p,PT.get(u));let h=new Au(n);for(let f=0;f<d.length;++f){if(r!=null){let P=ov().numTensors;P>r.maxNumTensors&&(r.maxNumTensors=P),P<r.minNumTensors&&(r.minNumTensors=P)}let m=d[f],g=m.sourceLayer;if(g instanceof hf)continue;let v=[],w=[],y=[],_=!1;for(let P of m.inputs){let N=h.getValue(P),B=h.getMask(P);v.push(N),w.push(B),B!=null&&(_=!0),o||(p[P.name]--,p[P.name]===0&&!n.hasKey(P)&&a.indexOf(P.name)===-1&&!N.isDisposed&&P.sourceLayer.stateful!==!0&&y.push(N))}_&&(e=e||{},e.mask=w[0]);let k=Cn(g.apply(v,e)),T=null;g.supportsMasking&&(T=g.computeMask(v,w));let I=YEe(m),A=Array.isArray(I)?I:[I];for(let P=0;P<A.length;++P){h.hasKey(A[P])||h.add(A[P],k[P],Array.isArray(T)?T[0]:T);let N=a.indexOf(A[P].name);N!==-1&&(l[N]=k[P])}o||gt(y)}return h.disposeMasks(),i?l:l[0]}function ZEe(t,n){x.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let e=[],r={};if(t.length===1){let o=IJ(t[0],n);e=o.sorted,r=o.recipientMap}else{let o=new Set;for(let i of t){let{sorted:s,recipientMap:a}=IJ(i,n);for(let l of s)o.has(l.name)||(e.push(l),o.add(l.name));for(let l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:e,recipientCounts:XEe(r)}}function XEe(t){let n={};for(let e in t)n[e]=t[e].size;return n}function IJ(t,n){let e=new Set,r=[],o={};for(let a of n.names())e.add(a);let i=[],s=[];for(i.push(t);i.length>0;){let a=i[i.length-1];if(e.has(a.name)){i.pop();continue}let l=s[s.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),e.add(a.name),l&&s.pop();else{s.push(i.length-1);for(let c of a.inputs)o[c.name]==null&&(o[c.name]=new Set),o[c.name].add(a.name),!e.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:o}}function YEe(t){let n;if(t.sourceLayer.inboundNodes.length===1)n=t.sourceLayer.output;else{let e=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(let o of t.sourceLayer.inboundNodes[r].outputTensors)if(o.id===t.id){e=r;break}n=t.sourceLayer.getOutputAt(e)}return n}var QEe=ee();QEe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,NJ);var X8={};Jt(X8,{maxNorm:()=>JEe,minMaxNorm:()=>nIe,nonNeg:()=>tIe,unitNorm:()=>eIe});function G8(t,n){return ne(()=>In(Ge(L(t,t),n,!0)))}var G0=class extends ve.Serializable{getConfig(){return{}}},W8=(()=>{class t extends G0{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ne(()=>{let r=G8(e,this.axis),o=go(r,0,this.maxValue);return L(e,je(o,fe(no(),r)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();ve.registerClass(W8);var q8=(()=>{class t extends G0{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ne(()=>je(e,fe(no(),G8(e,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();ve.registerClass(q8);var K8=(()=>{class t extends G0{apply(e){return Ao(e)}}return t.className="NonNeg",t})();ve.registerClass(K8);var Z8=(()=>{class t extends G0{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ne(()=>{let r=G8(e,this.axis),o=fe(L(this.rate,go(r,this.minValue,this.maxValue)),L(1-this.rate,r));return L(e,je(o,fe(no(),r)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();ve.registerClass(Z8);var AJ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function vr(t){return yv(t)}function RJ(t,n={}){return Iu(t,ve.SerializationMap.getMap().classNameMap,n,"constraint")}function wr(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in AJ?AJ[t]:t,config:{}};return RJ(e)}else return t instanceof G0?t:RJ(t)}function JEe(t){return new W8(t)}function eIe(t){return new q8(t)}function tIe(){return new K8}function nIe(t){return new Z8(t)}var Y8={};Jt(Y8,{constant:()=>iIe,glorotNormal:()=>pIe,glorotUniform:()=>dIe,heNormal:()=>hIe,heUniform:()=>fIe,identity:()=>cIe,leCunNormal:()=>mIe,leCunUniform:()=>gIe,ones:()=>oIe,orthogonal:()=>vIe,randomNormal:()=>aIe,randomUniform:()=>sIe,truncatedNormal:()=>lIe,varianceScaling:()=>uIe,zeros:()=>rIe});function rIe(){return new B8}function oIe(){return new ik}function iIe(t){return new L8(t)}function sIe(t){return new $8(t)}function aIe(t){return new V8(t)}function lIe(t){return new j8(t)}function cIe(t){return new z8(t)}function uIe(t){return new us(t)}function dIe(t){return new TT(t)}function pIe(t){return new DT(t)}function hIe(t){return new ET(t)}function fIe(t){return new IT(t)}function mIe(t){return new NT(t)}function gIe(t){return new AT(t)}function vIe(t){return new H8(t)}var vB={};Jt(vB,{Layer:()=>Ct,RNN:()=>Hl,RNNCell:()=>$p,activation:()=>Y3e,add:()=>sNe,alphaDropout:()=>HNe,average:()=>aNe,averagePooling1d:()=>fB,averagePooling2d:()=>mB,averagePooling3d:()=>gB,avgPool1d:()=>gNe,avgPool2d:()=>wNe,avgPool3d:()=>xNe,avgPooling1d:()=>vNe,avgPooling2d:()=>yNe,avgPooling3d:()=>_Ne,batchNormalization:()=>hNe,bidirectional:()=>FNe,categoryEncoding:()=>KNe,centerCrop:()=>WNe,concatenate:()=>lNe,conv1d:()=>z3e,conv2d:()=>H3e,conv2dTranspose:()=>U3e,conv3d:()=>G3e,conv3dTranspose:()=>W3e,convLstm2d:()=>NNe,convLstm2dCell:()=>ANe,cropping2D:()=>K3e,dense:()=>Q3e,depthwiseConv2d:()=>X3e,dot:()=>pNe,dropout:()=>J3e,elu:()=>P3e,embedding:()=>iNe,flatten:()=>tNe,gaussianDropout:()=>zNe,gaussianNoise:()=>jNe,globalAveragePooling1d:()=>kNe,globalAveragePooling2d:()=>bNe,globalMaxPool1d:()=>BNe,globalMaxPool2d:()=>LNe,globalMaxPooling1d:()=>hee,globalMaxPooling2d:()=>fee,gru:()=>SNe,gruCell:()=>MNe,input:()=>QT,inputLayer:()=>F3e,layerNormalization:()=>fNe,leakyReLU:()=>L3e,lstm:()=>TNe,lstmCell:()=>DNe,masking:()=>UNe,maxPool1d:()=>$Ne,maxPool2d:()=>VNe,maxPooling1d:()=>mee,maxPooling2d:()=>gee,maxPooling3d:()=>CNe,maximum:()=>cNe,minimum:()=>uNe,multiply:()=>dNe,permute:()=>oNe,prelu:()=>$3e,randomWidth:()=>ZNe,reLU:()=>B3e,repeatVector:()=>nNe,rescaling:()=>GNe,reshape:()=>rNe,resizing:()=>qNe,rnn:()=>RNe,separableConv2d:()=>q3e,simpleRNN:()=>ENe,simpleRNNCell:()=>INe,softmax:()=>V3e,spatialDropout1d:()=>eNe,stackedRNNCells:()=>ONe,thresholdedReLU:()=>j3e,timeDistributed:()=>PNe,upSampling2d:()=>Z3e,zeroPadding2d:()=>mNe});function Ru(t){return z(this,null,function*(){if(t==null)return;let n=[],e=[],r=[];for(let o in t){let i=t[o];if(typeof i!="number"){let s=i;n.push(s.data()),e.push(o),r.push(s)}}if(n.length>0){let o=yield Promise.all(n);for(let i=0;i<o.length;++i)t[e[i]]=o[i][0];gt(r)}})}function BT(t){if(t!=null)for(let n in t){let e=t[n];typeof e!="number"&&e.dispose()}}var wIe=125,Lp=class{constructor(){this.validationData=null}setParams(n){this.params=n}onEpochBegin(n,e){return z(this,null,function*(){})}onEpochEnd(n,e){return z(this,null,function*(){})}onBatchBegin(n,e){return z(this,null,function*(){})}onBatchEnd(n,e){return z(this,null,function*(){})}onTrainBegin(n){return z(this,null,function*(){})}onTrainEnd(n){return z(this,null,function*(){})}setModel(n){}},ak=class{constructor(n,e=10){n==null&&(n=[]),this.callbacks=n,this.queueLength=e}append(n){this.callbacks.push(n)}setParams(n){for(let e of this.callbacks)e.setParams(n)}setModel(n){for(let e of this.callbacks)e.setModel(n)}onEpochBegin(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onEpochBegin(n,e)})}onEpochEnd(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onEpochEnd(n,e)})}onBatchBegin(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onBatchBegin(n,e)})}onBatchEnd(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onBatchEnd(n,e)})}onTrainBegin(n){return z(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainBegin(n)})}onTrainEnd(n){return z(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainEnd(n)})}},Q8=class extends Lp{constructor(){super()}onEpochBegin(n){return z(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(n,e){return z(this,null,function*(){e==null&&(e={});let r=e.size==null?0:e.size;this.seen+=r;for(let o in e){let i=e[o];if(typeof i=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+i*r;else{let s;o in this.totals?s=this.totals[o]:this.totals[o]=0;let a=ne(()=>fe(this.totals[o],L(i,r)));this.totals[o]=a,s?.dispose()}}})}onEpochEnd(n,e){return z(this,null,function*(){if(e!=null)for(let r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?e[r]=this.totals[r]/this.seen:ne(()=>{let o=L(je(1,this.seen),this.totals[r]);e[r]=o,this.totals[r].dispose(),qn(e[r])}))})}},lk=class extends Lp{onTrainBegin(n){return z(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(n,e){return z(this,null,function*(){e==null&&(e={}),this.epoch.push(n);for(let r in e)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(e[r])})}syncData(){return z(this,null,function*(){let n=[],e=[],r=[];for(let i in this.history){let s=this.history[i];for(let a=0;a<s.length;++a)if(typeof s[a]!="number"){let l=s[a];n.push(l.data()),e.push(i),r.push(a)}}let o=yield Promise.all(n);for(let i=0;i<o.length;++i)this.history[e[i]][r[i]].dispose(),this.history[e[i]][r[i]]=o[i][0]})}},ck=class extends Lp{constructor(n,e){if(super(),this.currentEpoch=0,this.nowFunc=n.nowFunc,this.nextFrameFunc=n.nextFrameFunc||wv,this.yieldEvery=e||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=wIe),this.yieldEvery==="never"&&n.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");x.isNumber(this.yieldEvery)&&(this.maybeWait=lJ(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=n.onTrainBegin,this.trainEnd=n.onTrainEnd,this.epochBegin=n.onEpochBegin,this.epochEnd=n.onEpochEnd,this.batchBegin=n.onBatchBegin,this.batchEnd=n.onBatchEnd,this.yield=n.onYield}maybeWait(n,e,r){return z(this,null,function*(){let o=[];this.yield!=null&&(yield Ru(r),o.push(this.yield(n,e,r))),o.push(this.nextFrameFunc()),yield Promise.all(o)})}onEpochBegin(n,e){return z(this,null,function*(){this.currentEpoch=n,this.epochBegin!=null&&(yield Ru(e),yield this.epochBegin(n,e))})}onEpochEnd(n,e){return z(this,null,function*(){let r=[];this.epochEnd!=null&&(yield Ru(e),r.push(this.epochEnd(n,e))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),yield Promise.all(r)})}onBatchBegin(n,e){return z(this,null,function*(){this.batchBegin!=null&&(yield Ru(e),yield this.batchBegin(n,e))})}onBatchEnd(n,e){return z(this,null,function*(){let r=[];this.batchEnd!=null&&(yield Ru(e),r.push(this.batchEnd(n,e))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):x.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,n,e)),yield Promise.all(r)})}onTrainBegin(n){return z(this,null,function*(){this.trainBegin!=null&&(yield Ru(n),yield this.trainBegin(n))})}onTrainEnd(n){return z(this,null,function*(){this.trainEnd!=null&&(yield Ru(n),yield this.trainEnd(n))})}};function LT(t,n){return t==null&&(t={}),t instanceof Lp?[t]:Array.isArray(t)&&t[0]instanceof Lp?t:Cn(t).map(r=>new ck(r,n))}var J8=(()=>{class t{constructor(){}static registerCallbackConstructor(e,r){x.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),t.checkForDuplicate(r),t.constructors[e]==null&&(t.constructors[e]=[]),t.constructors[e].push(r)}static checkForDuplicate(e){for(let r in t.constructors)t.constructors[+r].forEach(i=>{if(i===e)throw new te("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(e){let r=[];for(let o in t.constructors){let i=+o;e>=i&&r.push(...t.constructors[i])}return r.map(o=>new o)}}return t.constructors={},t})();function $T(t,n,e,r,o,i,s,a,l){let c=new lk,u=[new Q8,...J8.createCallbacks(n)];t!=null&&u.push(...t),u.push(c);let d=new ak(u);return d.setParams({epochs:e,initialEpoch:r,samples:o,steps:i,batchSize:s,verbose:n,doValidation:a,metrics:l}),{callbackList:d,history:c}}function Ki(t,n={},e=!1){return Iu(t,ve.SerializationMap.getMap().classNameMap,n,"layer",e)}function uk(t,n){return ne(()=>{t.dtype!=="float32"&&(t=ge(t,"float32"));let e=Ge(H0(t),n,!0),r=sa(e.shape,no()),o=In(ji(e,r));return je(t,o)})}function Ou(t,n){return ne(()=>Bn(H0(Be(n,t)),-1))}function Tv(t,n){return ne(()=>Bn(zn(Be(n,t)),-1))}function ff(t,n){return ne(()=>{let e=Be(t,n),r=go(zn(t),no(),Number.MAX_VALUE),o=zn(je(e,r));return L(100,Bn(o,-1))})}function yIe(t,n){return ne(()=>{let e=go(n,no(),Number.MAX_VALUE),r=wo(fe(1,e)),o=go(t,no(),Number.MAX_VALUE),i=wo(fe(1,o));return Bn(H0(Be(r,i)),-1)})}function xIe(t,n){return ne(()=>{let e=ji(0,Be(1,L(t,n)));return Bn(H0(e),-1)})}function _Ie(t,n){return ne(()=>{let e=ji(0,Be(1,L(t,n)));return Bn(e,-1)})}function kIe(t,n){return ne(()=>{let e=Ge(L(t,n),-1),r=vo(L(Be(1,t),n),-1);return ji(0,fe(1,Be(r,e)))})}function bIe(t,n){return ne(()=>{let e=Math.log(2),r=Be(n,t),o=Be(fe(r,Na(L(-2,r))),e);return Bn(o,-1)})}function W0(t,n,e=!1){return ne(()=>{if(e)n=Ep(n);else{let r=Ge(n,n.shape.length-1,!0);n=je(n,r)}return n=go(n,no(),1-no()),Xt(Ge(L(ge(t,"float32"),wo(n)),n.shape.length-1))})}function Dv(t,n,e=!1){return ne(()=>{let r=ge(Rl(yJ(t)),"int32");n=go(n,no(),1-no());let o=n.shape,i=$(Fl(r,o[o.length-1]),o);return W0(i,n,e)})}function CIe(t,n){if(!x.arraysEqual(t.shape,n.shape))throw new te(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(n.shape)}`);return ne(()=>{let e=Ao(n),r=Xt(zn(n));return fe(Be(e,L(n,t)),bp(mr(r)))})}function Ev(t,n){return ne(()=>{let e;return e=go(n,no(),1-no()),e=wo(je(e,Be(1,e))),Bn(CIe(t,e),-1)})}function SIe(t,n){return ne(()=>{let e=go(t,no(),1),r=go(n,no(),1);return Ge(L(t,wo(je(e,r))),-1)})}function MIe(t,n){return ne(()=>{let e=wo(fe(no(),n));return Bn(Be(n,L(t,e)),-1)})}function pk(t,n){return ne(()=>{let e=uk(t,-1),r=uk(n,-1),o=L(e,r);return Xt(Ge(o,-1))})}var dk={meanSquaredError:Ou,meanAbsoluteError:Tv,meanAbsolutePercentageError:ff,meanSquaredLogarithmicError:yIe,squaredHinge:xIe,hinge:_Ie,categoricalHinge:kIe,logcosh:bIe,categoricalCrossentropy:W0,sparseCategoricalCrossentropy:Dv,binaryCrossentropy:Ev,kullbackLeiblerDivergence:SIe,poisson:MIe,cosineProximity:pk};function VT(t){if(typeof t=="string"){if(t in dk)return dk[t];let n=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new te(n)}else return t}function hk(t,n){return ne(()=>{let e=L(.5,co(n)),r=Ti(Yn(n,e),t.dtype);return Bn(Eo(t,r),-1)})}function fk(t,n){return ne(()=>Ti(Eo(Dl(t,-1),Dl(n,-1)),"float32"))}function FJ(t,n){return ne(()=>ge(Ge(No(Eo(t,1),Eo(n,1))),"float32"))}function TIe(t,n){return ne(()=>ge(Ge(No(Eo(t,1),Eo(n,0))),"float32"))}function DIe(t,n){return ne(()=>ge(Ge(No(Eo(t,0),Eo(n,1))),"float32"))}function eP(t,n){return ne(()=>{let e=FJ(t,n),r=DIe(t,n),o=fe(e,r);return ge(An(Yn(o,0),je(e,o),0),"float32")})}function PJ(t,n){return ne(()=>{let e=FJ(t,n),r=TIe(t,n),o=fe(e,r);return ge(An(Yn(o,0),je(e,o),0),"float32")})}function zT(t,n){return Ev(t,n)}function HT(t,n){return t.rank===n.rank&&(t=cs(t,[t.rank-1])),n=Dl(n,-1),n.dtype!==t.dtype&&(n=ge(n,t.dtype)),ge(Eo(t,n),"float32")}function BJ(t,n){return ne(()=>{let e=t.sub(n).square().sum(),r=t.sub(t.mean()).square().sum();return Ue(1).sub(e.div(r))})}var EIe=Ou,IIe=Ou,NIe=Tv,AIe=Tv,RIe=ff,OIe=ff,mk=W0,FIe=pk,tP=Dv,jT={binaryAccuracy:hk,categoricalAccuracy:fk,precision:eP,categoricalCrossentropy:mk,sparseCategoricalCrossentropy:tP,mse:EIe,MSE:IIe,mae:NIe,MAE:AIe,mape:RIe,MAPE:OIe,cosine:FIe};function LJ(t){if(typeof t=="string"&&t in jT)return jT[t];if(typeof t!="string"&&t!=null)return t;throw new te(`Unknown metric ${t}`)}function gk(t){if(ca(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let n;for(let e of Object.keys(dk))if(dk[e]===t){n=e;break}if(n!==void 0)return n;for(let e of Object.keys(jT))if(jT[e]===t){n=e;break}return n!==void 0?n:t.name}}function VJ(t){let n={Adagrad:()=>uf.adagrad(.01),Adadelta:()=>uf.adadelta(1,.95,no()),Adam:()=>uf.adam(.001,.9,.999,no()),Adamax:()=>uf.adamax(.002,.9,.999,no(),0),RMSProp:()=>uf.rmsprop(.001,.9,0,no()),SGD:()=>uf.sgd(.01)};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new te(`Unknown Optimizer ${t}`)}function rP(t,n,e=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!nP(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){let r=JSON.stringify(t);r.length>1048576&&console.warn(`User-defined metadata of model "${n}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function nP(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let n=Object.keys(t);for(let e of n)if(typeof e!="string"||!nP(t[e]))return!1;return!0}else if(Array.isArray(t)){for(let n of t)if(!nP(n))return!1;return!0}else return!1;else{let n=typeof t;return n==="string"||n==="number"||n==="boolean"}}function jJ(t,n,e,r=console.log){let o=LIe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];o?(n=n||90,e=e||[.32,.61,.89,1]):(n=n||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(u=>Math.floor(n*u)));let s;if(!o){i.push("Receives inputs"),s=[];for(let u in t.nodesByDepth)s.push(...t.nodesByDepth[u])}r("_".repeat(n)),UT(i,e,r),r("=".repeat(n));let a=t.layers;for(let u=0;u<a.length;++u)o?$Ie(a[u],e,r):VIe(a[u],e,s,r),r((u===a.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();let l=BIe(t),c=Cv(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(n))}function BIe(t){let n;return t.collectedTrainableWeights!=null?n=Cv(t.collectedTrainableWeights):n=Cv(t.trainableWeights),n}function LIe(t){let n=!0,e=[],r=[];for(let o in t.nodesByDepth)e.push(t.nodesByDepth[o]);for(let o of e){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){n=!1;break}r.push(...o)}if(n)for(let o of t.layers){let i=!1;for(let s of o.inboundNodes)if(r.indexOf(s)!==-1)if(i){n=!1;break}else i=!0;if(!n)break}return n}function UT(t,n,e=console.log){let r="";for(let o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=t[o],r=r.slice(0,n[o]),r+=" ".repeat(n[o]-r.length);e(r)}function $Ie(t,n,e){let r,o;try{o=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}let i=t.name,s=t.getClassName(),a=[`${i} (${s})`,o,r,t.countParams().toString()];UT(a,n,e)}function VIe(t,n,e,r){let o,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}let s=[];for(let d of t.inboundNodes)if(!(e!=null&&e.length>0&&e.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,f=d.nodeIndices[p],m=d.tensorIndices[p];s.push(`${h}[${f}][${m}]`)}let a=t.name,l=t.getClassName(),c=s.length===0?"":s[0],u=[`${a} (${l})`,i,o,t.countParams().toString(),c];UT(u,n,r);for(let d=1;d<s.length;++d)UT(["","","","",s[d]],n,r)}function zJ(t,n,e){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&n===0&&typeof e=="string"}function q0(t,n){if(t===null)return null;if(typeof t=="string")return Op(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],r=t.length;for(let o=0;o<r;++o){let i=t[o];zJ(n,o,i)?e.push(i):e.push(q0(i,n))}return e}else{let e={};for(let r of Object.keys(t)){let o=t[r];if(r==="name"&&typeof o=="string")e[r]=o;else{let i=Op(r);e[i]=q0(o,i)}}return e}}function GT(t,n){if(t==null)return null;if(typeof t=="string")return Ba(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],r=t.length;for(let o=0;o<r;++o){let i=t[o];zJ(n,o,i)?e.push(i):e.push(GT(i,n))}return e}else{let e={};for(let r of Object.keys(t)){let o=t[r],i=Ba(r);(r==="name"||r==="className")&&typeof o=="string"?e[i]=o:e[i]=GT(o,r)}return e}}var mf="4.22.0";var jIe=t=>{let n=Object.keys(t);if(n.length===0)return!1;let e=n[0].split("/");return!isNaN(parseInt(e[e.length-1],10))},WT=class t extends Ct{constructor(n){if(super({}),this.containerNodes=new Set,this.name=n.name,this.name==null){let w=this.getClassName().toLowerCase();this.name=df(w)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(n.inputs)?this.inputs=n.inputs.slice():this.inputs=[n.inputs],Array.isArray(n.outputs)?this.outputs=n.outputs.slice():this.outputs=[n.outputs],La(this.inputs).length!==this.inputs.length)throw new te(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);La(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let w of this.outputs){let y=w.sourceLayer,_=w.nodeIndex,k=w.tensorIndex;this.outputLayers.push(y),this.outputLayersNodeIndices.push(_),this.outputLayersTensorIndices.push(k)}for(let w of this.inputs){let y=w.sourceLayer,_=w.nodeIndex,k=w.tensorIndex;ca(_===0,"input layer has >1 nodes"),ca(k===0,"input layer has >1 tensors"),this.inputLayers.push(y),this.inputLayersNodeIndices.push(_),this.inputLayersTensorIndices.push(k)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){let y=this.inputLayers[w];if(!(y instanceof hf))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${n.inputs}. Input ${w} (0-based) originates from layer type ${y.getClassName()}.`);this.inputNames.push(y.name),this.feedInputShapes.push(y.batchInputShape),this.feedInputNames.push(y.name)}for(let w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);let e={},r={},o={},i={},s={},a=[],l=(w,y,_,k,T,I)=>{(k==null||T==null||I==null)&&(k=w.sourceLayer,T=w.nodeIndex,I=w.tensorIndex);let A=k.inboundNodes[T];if(_.indexOf(A)!==-1)throw new zi(`The tensor ${w.name} at layer "${k.name}" is part of a cycle.`);if(y.indexOf(A)!==-1)return;this.containerNodes.add(t.nodeKey(k,T)),k.id in s||(s[k.id]=Object.keys(s).length),_.indexOf(A)===-1&&_.push(A);let P=A.inboundLayers.length;for(let N=0;N<P;N++){let B=A.inputTensors[N],S=A.inboundLayers[N],W=A.nodeIndices[N],ie=A.tensorIndices[N];l(B,y,_,S,W,ie)}for(y.push(A);_.indexOf(A)>=0;)_.splice(_.indexOf(A),1);a.push(A)},c=[],u=[];for(let w of this.outputs)l(w,c,u);let d=a.slice().reverse();for(let w of d){r[w.id]=w,w.id in e||(e[w.id]=0);let y=e[w.id],_=o[w.outboundLayer.id]==null?0:o[w.outboundLayer.id];y=Math.max(y,_),o[w.outboundLayer.id]=y,i[w.outboundLayer.id]=w.outboundLayer,e[w.id]=y;for(let k=0;k<w.inboundLayers.length;k++){let T=w.inboundLayers[k],I=w.nodeIndices[k],A=T.inboundNodes[I],P=e[A.id]==null?0:e[A.id];e[A.id]=Math.max(y+1,P),r[A.id]=A}}let p={};for(let w in e){let y=e[w];y in p||(p[y]=[]),p[y].push(r[w])}let h={};for(let w in o){let y=o[w];y in h||(h[y]=[]),h[y].push(i[w])}let f=Object.keys(h).map(w=>parseInt(w,10)).sort(nk);this.layers=[];for(let w of f){let y=h[w];y.sort((_,k)=>{let T=s[_.id],I=s[k.id];return T<I?-1:T>I?1:0});for(let _ of y)_ instanceof t&&this.internalContainerRefs.push(_),this.layers.push(_)}this.layersByDepth=h,f=Object.keys(p).map(w=>parseInt(w,10)).sort(nk);let m=this.inputs.slice(),g=[];for(let w of f)for(let y of p[w]){let _=y.outboundLayer;if(_!=null){for(let k of y.inputTensors)if(m.indexOf(k)===-1)throw new zi(`Graph disconnected: cannot obtain value for tensor ${k} at layer "${_.name}". The following previous layers were accessed without issue: ${g}`);for(let k of y.outputTensors)m.push(k);g.push(_.name)}}this.nodesByDepth=p;let v=this.layers.map(w=>w.name);for(let w of v){let y=v.filter(_=>_===w).length;if(y!==1)throw new zi(`The name "${w}" is used ${y} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new Bp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let n={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let e of this.layers)n.numDisposedVariables+=e.dispose().numDisposedVariables;for(let e of this.internalContainerRefs)n.numDisposedVariables+=e.dispose().numDisposedVariables}return n.refCountAfterDispose=this._refCount,n}get trainable(){return this.trainable_}set trainable(n){this.layers.forEach(e=>{e._trainableWeights.forEach(r=>r.trainable=n)}),this.trainable_=n}get trainableWeights(){if(this._trainableWeights.length>0)throw new te("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let n=[];for(let e of this.layers)n=n.concat(e.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let e of this.layers)n.push(...e.nonTrainableWeights);if(!this.trainable){let e=[];for(let r of this.layers)e.push(...r.trainableWeights);return e.concat(n)}return n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(n,e=!0){let r={},o=0,i=jIe(n);i&&this.parseWeights(n);for(let a of this.layers)for(let[l,c]of a.weights.entries()){let u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new te(`Duplicate weight name: ${u}`);r[u]=c,o++}let s=[];for(let a in n){let l=a;if(r[a]==null){let c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],n[a]]);else if(e)throw new te(`Provided weight data has no target variable: ${a}`);delete r[l]}if(e){let a=[];for(let l in r)a.push(l);if(a.length>0)throw new te(`${a.length} of ${o} weights are not set: ${a}`)}Mv(s)}parseWeights(n){for(let e in Object.keys(n)){let r=e.split("/"),o=["vars","layer_checkpoint_dependencies"],i=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!o.includes(s)).join("/");i!==e&&(n[i]=n[e],delete n[e])}}updatedConfig(){let n=this.getConfig(),e={};return e.className=this.getClassName(),e.config=n,e.kerasVersion=`tfjs-layers ${mf}`,e.backend="TensorFlow.js",e}toJSON(n,e=!0){let r=GT(this.updatedConfig());return e?JSON.stringify(r):r}call(n,e){return ne(()=>{n=Cn(n);let r=new Au;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],n[o]);return U0(this.outputs,r,e)})}computeMask(n,e){return ne(()=>{n=Cn(n);let r;return e==null?r=Pa(null,n.length):r=Cn(e),this.runInternalGraph(n,r)[1]})}computeOutputShape(n){let e=bv(n);if(e.length!==this.inputLayers.length)throw new te(`Invalid inputShape argument ${n}: model has ${this.inputLayers.length} tensor inputs.`);let r={};for(let a=0;a<e.length;a++){let l=this.inputLayers[a],c=e[a],u=l.name+"_0_0";r[u]=c}let o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(nk);if(o.length>1)for(let a of o){let l=this.nodesByDepth[a];for(let c of l){let u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;let d=[];for(let m=0;m<c.inboundLayers.length;m++){let g=c.inboundLayers[m],v=c.nodeIndices[m],w=c.tensorIndices[m],y=`${g.name}_${v}_${w}`,_=r[y];d.push(_)}let p=u.computeOutputShape(Ro(d)),h=bv(p),f=u.inboundNodes.indexOf(c);for(let m=0;m<h.length;m++){let g=`${u.name}_${f}_${m}`;r[g]=h[m]}}}let i=[],s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;s.push(d)}for(let a=0;a<s.length;a++){let l=s[a];ca(l in r),i.push(r[l])}return Ro(i)}runInternalGraph(n,e){e==null&&(e=Pa(null,n.length));let r={};for(let l=0;l<this.inputs.length;++l){let c=this.inputs[l],u=n[l],d=e[l];r[c.id]=[u,d]}let o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(nk);for(let l of o){let c=this.nodesByDepth[l];for(let u of c){let d=u.outboundLayer,p=u.inputTensors,h=u.outputTensors,f=new Array;for(let m of p)m.id in r&&f.push(r[m.id]);if(f.length===p.length){let m={},g,v,w,y;if(u.callArgs!=null&&(m=u.callArgs),f.length===1){let[_,k]=f[0];m.mask==null&&(m.mask=k),w=Cn(d.call(_,m)),y=Cn(d.computeMask(_,k)),g=[_],v=[k]}else g=f.map(_=>_[0]),v=f.map(_=>_[1]),m.mask==null&&(m.mask=v),w=Cn(d.call(g,m)),y=Cn(d.computeMask(g,v));if(d.activityRegularizer)throw new bt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let _=0;_<h.length;++_){let k=h[_],T=w[_],I=y[_];r[k.id]=[T,I]}}}}let i=[],s=[],a=[];for(let l of this.outputs){ca(l.id in r,`Could not compute output ${l.name} : ${l.id}`);let[c,u]=r[l.id];a.push(c.shape),i.push(c),s.push(u)}return[i,s,a]}buildNodeConversionMap(n){let e={},r;for(let o of this.layers){r=o instanceof t?1:0;for(let i=0;i<o.inboundNodes.length;i++){let s=t.nodeKey(o,i);this.containerNodes.has(s)&&(e[s]=r,r+=1)}}return e}getLayer(n,e){if(e!=null)return this.findLayer(e);if(n==null)throw new te("Provide either a layer name or layer index");if(typeof n=="number")return this.findLayer(n);for(let r of this.layers)if(r.name===n)return r;throw new te(`No such layer: ${n}`)}findLayer(n){if(this.layers.length<=n)throw new te(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}calculateLosses(){return ne(()=>{let n=[];for(let e of this.layers)for(let r=0;r<e.inboundNodes.length;++r){let o=t.nodeKey(e,r);this.containerNodes.has(o)&&n.push(...e.calculateLosses())}return n})}getConfig(){let n={name:this.name},e=this.buildNodeConversionMap(this.layers),r=[];for(let s of this.layers){let a=s.getClassName(),l=s.getConfig(),c=[];for(let d=0;d<s.inboundNodes.length;d++){let p=s.inboundNodes[d],h=t.nodeKey(s,d),f={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),f=p.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),f={}}if(p.inboundLayers.length>0){let m=[];for(let g=0;g<p.inboundLayers.length;g++){let v=p.inboundLayers[g],w=p.nodeIndices[g],y=p.tensorIndices[g],_=t.nodeKey(v,w),k=e[_];k==null&&(k=0),m.push([v.name,k,y,f])}c.push(m)}}}let u={};u.name=s.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}n.layers=r;let o=[];for(let s=0;s<this.inputLayers.length;s++){let a=this.inputLayers[s],l=this.inputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.inputLayersTensorIndices[s];o.push([a.name,u,d])}n.inputLayers=o;let i=[];for(let s=0;s<this.outputLayers.length;s++){let a=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.outputLayersTensorIndices[s];i.push([a.name,u,d])}return n.outputLayers=i,n}static fromConfig(n,e,r={},o=!1){let i={},s={};function a(g,v){g.name in s?s[g.name].push(v):s[g.name]=[v]}function l(g,v){let w=[],y;for(let _ of v){let k=_[0],T=_[1],I=_[2];if(y=_[3]==null?{}:_[3],!(k in i)){a(g,v);return}let A=i[k];if(A.inboundNodes.length<=T){a(g,v);return}let P=A.inboundNodes[T];w.push(P.outputTensors[I])}w.length>0&&g.apply(Ro(w),y)}function c(g){let v=g.name,w=Ki(g,e.customObjects!=null?e.customObjects:{});w.setFastWeightInitDuringBuild(o),i[v]=w,g.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new te(`Corrupted configuration, expected array for nodeData: ${_}`);a(w,_)})}let u=e.name,d=e.layers;for(let g of d)c(g);for(;!sJ(s);)for(let g of d){let v=i[g.name];if(v.name in s){let w=s[v.name];delete s[v.name];for(let y of w)l(v,y)}}let p=[],h=[],f=e.inputLayers;for(let g of f){let v=g[0],w=g[1],y=g[2];ca(v in i);let k=i[v].inboundNodes[w].outputTensors;p.push(k[y])}let m=e.outputLayers;for(let g of m){let v=g[0],w=g[1],y=g[2];ca(v in i);let k=i[v].inboundNodes[w].outputTensors;h.push(k[y])}return new n({inputs:p,outputs:h,name:u})}get stateful(){if(this._stateful)throw new te("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let n of this.layers)if(n.stateful)return!0;return!1}resetStates(){ne(()=>{this.layers.forEach(n=>{n.stateful&&n.resetStates()})})}};function zIe(t,n,e){let r=n.length;if(t==null||Array.isArray(t)&&t.length===0)return n.map(o=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${e} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let o=[];return n.forEach(i=>{i in t?o.push(t[i]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${e} must be either an array with ${r} elements or an object with ${n} keys. Provided ${e} not understood: ${JSON.stringify(t)}`)}function qT(t,n){return zIe(t,n,"classWeight")}function KT(t,n,e,r){return z(this,null,function*(){if(n!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(e!=null){let o=ne(()=>{if(t.shape.length===1)return ki(t);if(t.shape.length===2){if(t.shape[1]>1)return Dl(t,1);if(t.shape[1]===1)return $(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(yield o.data());gt(o);let s=[];return i.forEach(a=>{if(e[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);s.push(e[a])}),Jn(s,"float32")}else return null})}function HJ(t,n){return L(t,n)}var HIe=32;function WJ(t,n){let e,r,o=n;e=o.xs,r=o.ys,x.assert(e!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${n}`);let i=UJ("input",t.inputNames,e),s=UJ("output",t.outputNames,r),a=i[0].shape[0];x.assert(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),x.assert(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)x.assert(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<s.length;l++)x.assert(s[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:s}}function UJ(t,n,e){if(e instanceof Lt)return[e];if(Array.isArray(e))return x.assert(e.length===n.length,()=>`Received an array of ${e.length} Tensors, but expected ${n.length} to match the ${t} keys ${n}.`),e;{let r=[];for(let o of n){if(e[o]==null)throw new te(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);r.push(e[o])}return r}}function UIe(t){if(t.length===3)throw new bt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function qJ(t,n,e){return z(this,null,function*(){let r=e.batchesPerEpoch!=null;if(x.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),x.assert(e!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),x.assert(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),x.assert(!r||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),x.assert(e.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let o=e.validationData!=null,i,s;if(o)if(GJ(e.validationData))x.assert(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{let g=UIe(e.validationData);i=g.xs,s=g.ys}let a=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),c;o?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();let u=LT(e.callbacks,e.yieldEvery),d=e.verbose==null?1:e.verbose,{callbackList:p,history:h}=$T(u,d,e.epochs,null,null,GIe(n,e),null,o,c);p.setModel(t),t.history=h,yield p.onTrainBegin(),t.stopTraining_=!1;let f=e.initialEpoch==null?0:e.initialEpoch,m=yield n.iterator();for(;f<e.epochs;){let g={};yield p.onEpochBegin(f);let v=0,w=0;for(r||(m=yield n.iterator());!r||v<e.batchesPerEpoch;){let y=yield m.next();if(r&&y.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(y.value!=null){let{xs:_,ys:k}=WJ(t,y.value),T={};T.batch=w,T.size=_[0].shape[0],yield p.onBatchBegin(w,T);let I=[];if(e.classWeight!=null){let N=qT(e.classWeight,t.outputNames);for(let B=0;B<N.length;++B)I.push(yield KT(k[B],null,N[B]))}let A=_.concat(k).concat(I),P=a(A);gt(A);for(let N=0;N<l.length;++N){let B=l[N],S=P[N];T[B]=S,qn(S)}yield p.onBatchEnd(w,T),BT(T),w++,v++}if(r?v>=e.batchesPerEpoch:y.done){if(o){let _;GJ(e.validationData)?_=Cn(yield t.evaluateDataset(e.validationData,{batches:e.validationBatches})):_=Cn(t.evaluate(i,s,{batchSize:e.validationBatchSize==null?HIe:e.validationBatchSize,verbose:0}));for(let k=0;k<t.metricsNames.length;++k)g[`val_${t.metricsNames[k]}`]=_[k]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(f,g),f++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function GIe(t,n){let e=null;return n.batchesPerEpoch!=null?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}function GJ(t){return typeof t.iterator=="function"}function WIe(t){return typeof t.next=="function"}function KJ(t,n,e){return z(this,null,function*(){e=e||{};let r=e.batches!=null,o=t.testFunction,i=[];if(e.verbose>0)throw new bt("Verbose mode is not implemented yet.");x.assert(!r||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);let s=WIe(n)?n:yield n.iterator(),a=0,l=0;for(;!r||l<e.batches;){let c=yield s.next();if(i=ne(()=>{if(c.value){let{xs:u,ys:d}=WJ(t,c.value),p=u.concat(d),h=ne(()=>o(p));if(gt(p),l===0)for(let m=0;m<h.length;++m)i.push(Ue(0));let f=p[0].shape[0];for(let m=0;m<h.length;++m){let g=h[m],v=i[m];i[m]=ne(()=>fe(i[m],L(f,g))),l>0&&gt(v)}gt(h),a+=f,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){let u=i[c];i[c]=je(i[c],a),gt(u)}return Ro(i)})}function ZT(t){x.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Iv(t,n,e){return t==null?[null]:Array.isArray(t)?t.map(r=>Fp(r,n,e-n)):Fp(t,n,e-n)}function XT(t,n){return ne(()=>t==null?null:Array.isArray(t)?t.map(e=>XT(e,n)):ST(t,n.dtype==="int32"?n:ge(n,"int32")))}function YT(t,n){let e=[],r=0,o=null;for(;r<t;)o=r+n,o>=t&&(o=t),e.push([r,o]),r=o;return e}function oP(t){let n=[];t instanceof Lt&&(t=[t]);for(let e=0;e<t.length;++e){let r=t[e];if(r.rank===1)n.push(Pp(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(r)}}return n}function ja(t,n){if(t==null)return;let e=[];if(n instanceof Lt)e.push(n.id);else if(Array.isArray(n))n.forEach(o=>e.push(o.id));else if(n!=null)for(let o in n){let i=n[o];e.push(i.id)}let r=[];if(t instanceof Lt)e.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(o=>{e.indexOf(o.id)===-1&&r.push(o)});else if(t!=null)for(let o in t){let i=t[o];e.indexOf(i.id)===-1&&r.push(i)}r.forEach(o=>{o.isDisposed||o.dispose()})}function qIe(t){return t instanceof Lt}function iP(t){return Array.isArray(t)}function ZJ(t){return!qIe(t)&&!iP(t)}function XJ(t,n,e,r=!0,o=""){if(n==null||n.length===0){if(t!=null){let s=!1;if(iP(t)&&t.length>0)s=!0;else if(ZJ(t)){for(let a in t)if(t.hasOwnProperty(a)){s=!0;break}}else s=!0;if(s)throw new te(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return n.map(s=>null);let i;if(ZJ(t)){t=t,i=[];for(let s of n){if(t[s]==null)throw new te(`No data provided for "${s}". Need data for each key in: ${n}`);i.push(t[s])}}else if(iP(t)){if(t=t,t.length!==n.length)throw new te(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${n.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,n.length>1)throw new te(`The model ${o} expects ${n.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=oP(i),e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=i[s];if(a.shape.length!==e[s].length)throw new te(`Error when checking ${o}: expected ${n[s]} to have ${e[s].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[s].length;++l){if(l===0&&!r)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u>=0&&c!==u)throw new te(`${o} expected a batch of elements where each example has shape [${e[s].slice(1,e[s].length)}] (i.e.,tensor shape [*,${e[s].slice(1,e[s].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function KIe(t,n,e){let r=La(t.map(i=>i.shape[0]));r.sort();let o=La(n.map(i=>i.shape[0]));if(o.sort(),r.length>1)throw new te(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(o.length>1)throw new te(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(i=>i.shape))}`);if(r.length>0&&o.length>0&&!x.arraysEqual(r,o))throw new te(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function ZIe(t,n,e){let r=[Ou,Ev,W0];for(let o=0;o<t.length;++o){let i=t[o],s=n[o],a=e[o];if(s!=null){if(s===W0&&i.shape[i.shape.length-1]===1)throw new te(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){let l=i.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){let d=l[u],p=c[u];if(p!=null&&d!==p)throw new te(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function YJ(t,n,e,r=!0,o=""){let i;if(Array.isArray(t)){if(t.length!==n.length)throw new te(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${n.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(n.length>1)throw new te(`The model expects ${n.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=i[s];if(a.shape.length!==e[s].length)throw new te(`Error when checking ${o}: expected ${n[s]} to have ${e[s].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[s].length;++l){if(l===0&&!r)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u!==c)throw new te(`Error when checking ${o}: expected ${n[s]} to have shape ${JSON.stringify(e[s])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function XIe(t,n){if(t==null||Array.isArray(t)&&t.length===0)return n.map(r=>[]);let e;if(typeof t=="string"||typeof t=="function")e=[t];else if(Array.isArray(t)||typeof t=="object")e=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(e))return n.map(r=>e);{let r=[];for(let o of n){let i=e.hasOwnProperty(o)?e[o]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}var YIe="layers-model",za=(()=>{class t extends WT{constructor(e){super(e),this.isTraining=!1}summary(e,r,o=console.log){if(!this.built)throw new te("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");jJ(this,e,r,o)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=VJ(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Qo))throw new te("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let r=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new te(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),r.push(VT(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new te(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);r=e.loss.map(l=>VT(l))}else{let a=VT(e.loss);this.outputs.forEach(l=>{r.push(a)})}this.lossFunctions=r,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let l=this.internalOutputShapes[a],c=this.outputNames[a];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}let o=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ll("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(o.indexOf(a)!==-1)continue;let l=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([l,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});let i=XIe(e.metrics,this.outputNames),s=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};Ll("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(o.indexOf(a)!==-1)continue;let l=i[a];(u=>{let d="",p,h,f;for(let m of u){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){let v=this.internalOutputShapes[a];v[v.length-1]===1||this.lossFunctions[a]===Ev?["accuracy","acc"].indexOf(m)!==-1?h=hk:["crossentropy","ce"].indexOf(m)!==-1&&(h=zT):this.lossFunctions[a]===Dv?["accuracy","acc"].indexOf(m)!==-1?h=HT:["crossentropy","ce"].indexOf(m)!==-1&&(h=tP):["accuracy","acc"].indexOf(m)!==-1?h=fk:["crossentropy","ce"].indexOf(m)!==-1&&(h=mk);let w;["accuracy","acc"].indexOf(m)!==-1?w="acc":["crossentropy","ce"].indexOf(m)!==-1&&(w="ce"),f=h,p=d+w}else f=LJ(m),p=d+gk(m);let g;Ll(p,()=>{g=f}),s(a,p,g)}})(l)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,r,o={}){let i=o.batchSize==null?32:o.batchSize;ZT(i);let a=this.standardizeUserDataXY(e,r,!0,i);try{let l=a[0].concat(a[1]);this.makeTestFunction();let c=this.testFunction,u=this.testLoop(c,l,i,o.verbose,o.steps);return Ro(u)}finally{ja(a[0],e),ja(a[1],r)}}evaluateDataset(e,r){return z(this,null,function*(){return this.makeTestFunction(),KJ(this,e,r)})}checkNumSamples(e,r,o,i="steps"){let s;if(o!=null){if(s=null,r!=null)throw new te(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${r}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new te(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,r){if(Array.isArray(r)&&r.length===0)throw new te("`outputs` is an empty Array, which is not allowed.");let o=Array.isArray(r),i=o?r:[r],s=this.retrieveSymbolicTensors(i),a=new Au;if(e instanceof Lt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new te(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(let c of this.inputs){let u=e[c.name];if(u==null)throw new te(`No value is provided for the model's input ${c.name}`);a.add(c,u)}let l=U0(s,a);return o?l:l[0]}retrieveSymbolicTensors(e){let r=Pa(null,e.length),o=e.length;for(let i of this.layers){let s=Array.isArray(i.output)?i.output:[i.output],a=s.map(l=>l.name);for(let l=0;l<e.length;++l){let c=a.indexOf(e[l]);if(c!==-1&&(r[l]=s[c],o--),o===0)break}if(o===0)break}if(o>0){let i=[];throw r.forEach((s,a)=>{s==null&&i.push(e[a])}),new te(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return r}predictLoop(e,r=32,o=!1){return ne(()=>{let i=this.checkNumSamples(e);if(o)throw new bt("Verbose predictLoop() is not implemented yet.");let s=YT(i,r),a=this.outputs.map(l=>[]);for(let l=0;l<s.length;++l)ne(()=>{let u=s[l][0],d=s[l][1],p=Iv(e,u,d),h=[];if(Array.isArray(p))for(let m=0;m<p.length;++m)h.push({key:this.inputs[m],value:p[m]});else h.push({key:this.inputs[0],value:p});let f=new Au(h);return U0(this.outputs,f)}).forEach((u,d)=>a[d].push(u));return Ro(a.map(l=>vn(l,0)))})}predict(e,r={}){let o=oP(e);YJ(o,this.inputNames,this.feedInputShapes,!1);try{let i=r.batchSize==null?32:r.batchSize;return ZT(i),this.predictLoop(o,i)}finally{ja(o,e)}}predictOnBatch(e){YJ(e,this.inputNames,this.feedInputShapes,!0);let r=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,r)}standardizeUserDataXY(e,r,o=!0,i){if(this.optimizer_==null)throw new zi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let s=[];for(let a=0;a<this.feedOutputShapes.length;++a){let l=this.feedOutputShapes[a];this.feedLossFns[a]===Dv?s.push(l.slice(0,l.length-1).concat([1])):s.push(l)}if(e=XJ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),r=XJ(r,this.feedOutputNames,s,!1,"target"),KIe(e,r,null),ZIe(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new te(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,r]}standardizeUserData(e,r,o,i,s=!0,a){return z(this,null,function*(){let[l,c]=this.standardizeUserDataXY(e,r,s,a);if(o!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){let d=qT(i,this.outputNames);u=[];for(let p=0;p<d.length;++p)u.push(yield KT(c[p],null,d[p]))}return[l,c,u]})}testLoop(e,r,o,i=0,s){return ne(()=>{let a=this.checkNumSamples(r,o,s,"steps"),l=[];if(i>0)throw new bt("Verbose mode is not implemented yet.");if(s!=null)throw new bt("steps mode in testLoop() is not implemented yet");{let c=YT(a,o),u=Jn(Ui(0,a));for(let d=0;d<c.length;++d){let p=c[d][0],h=c[d][1],f=Fp(u,p,h-p),m=XT(r,f),g=e(m);if(d===0)for(let v=0;v<g.length;++v)l.push(Ue(0));for(let v=0;v<g.length;++v){let w=g[v];l[v]=fe(l[v],L(h-p,w))}}for(let d=0;d<l.length;++d)l[d]=je(l[d],a)}return l})}getDedupedMetricsNames(){let e=this.metricsNames,r=[];for(let o=0;o<e.length;++o){let i=e[o],s=i;if(N8(e,i)>1){let a=N8(e.slice(0,o),i);s+=`_${a}`}r.push(s)}return r}makeTrainFunction(){return e=>{let r=[],o=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],l=()=>{let p=[];for(let g=0;g<this.inputs.length;++g)p.push({key:this.inputs[g],value:o[g]});let h=new Au(p),f=U0(this.outputs,h,{training:!0}),m;for(let g=0;g<this.lossFunctions.length;++g){let v=this.lossFunctions[g],w=v(i[g],f[g]);s[g]!=null&&(w=HJ(w,s[g]));let y=Bn(w);r.push(y),g===0?m=w:m=fe(m,w)}for(let g=0;g<this.metricsTensors.length;++g){let v;if(this.outputs.length>1&&g<this.outputs.length)v=r[g];else{let w=this.metricsTensors[g][0],y=this.metricsTensors[g][1];v=Bn(w(i[y],f[y]))}qn(v),a.push(v)}return m=Bn(m),this.calculateLosses().forEach(g=>{m=fe(m,g)}),m},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(l,!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>ne(()=>{let r=[],o,i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:i[u]});let l=new Au(a),c=U0(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){let d=this.lossFunctions[u],p=Bn(d(s[u],c[u]));u===0?o=p:o=fe(o,p),r.push(o)}for(let u=0;u<this.metricsTensors.length;++u){let d=this.metricsTensors[u][0],p=this.metricsTensors[u][1],h=Bn(d(s[p],c[p]));r.push(h)}return r})}fit(i,s){return z(this,arguments,function*(e,r,o={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,l,c,u,d,p,h,f,m;try{let g=o.batchSize==null?32:o.batchSize;ZT(g);let w=yield this.standardizeUserData(e,r,o.sampleWeight,o.classWeight,!1,g);a=w[0],l=w[1],m=w[2];let y=!1,_;if(o.validationData!=null&&o.validationData.length>0){if(y=!0,o.validationData.length===2)d=o.validationData[0],p=o.validationData[1];else throw o.validationData.length===3?new bt("validationData including sample weights is not supported yet."):new te(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${o.validationData} is invalid.`);let W=yield this.standardizeUserData(d,p,null,null,!0,g);h=W[0],f=W[1],_=h.concat(f)}else if(o.validationSplit!=null&&o.validationSplit>0&&o.validationSplit<1){y=!0;let S=Math.floor(a[0].shape[0]*(1-o.validationSplit)),W=a[0].shape[0];h=Iv(a,S,W),c=a,a=Iv(a,0,S),f=Iv(l,S,W),u=l,l=Iv(l,0,S),_=h.concat(f)}else o.validationSteps!=null&&(y=!0);let k=a.concat(l).concat(m);this.checkTrainableWeightsConsistency();let T=this.makeTrainFunction(),I=this.getDedupedMetricsNames(),A,P;y?(this.makeTestFunction(),A=this.testFunction,P=I.slice().concat(I.map(S=>"val_"+S))):(A=null,_=[],P=I.slice());let N=LT(o.callbacks,o.yieldEvery);return yield this.fitLoop(T,k,I,g,o.epochs,o.verbose,N,A,_,o.shuffle,P,o.initialEpoch,null,null)}finally{this.isTraining=!1,ja(a,e),ja(l,r),ja(c,e),ja(u,r),ja(h,d),ja(f,p),m!=null&&gt(m)}})}fitLoop(e,r,o,i,s,a,l,c,u,d,p,h,f,m){return z(this,null,function*(){i==null&&(i=32),s==null&&(s=1),d==null&&(d=!0),h==null&&(h=0);let g=!1;if(c!=null&&u!=null&&(g=!0),m!=null&&(g=!0,f==null))throw new te("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let v=this.checkNumSamples(r,i,f,"steps_per_epoch"),w;v!=null&&(w=Ui(0,v)),a==null&&(a=1);let{callbackList:y,history:_}=$T(l,a,s,h,v,f,i,g,p);y.setModel(this),this.history=_,yield y.onTrainBegin(),this.stopTraining_=!1;for(let k=h;k<s;++k){yield y.onEpochBegin(k);let T={};if(f!=null)throw new bt("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new bt("batch shuffling is not implemneted yet");d&&x.shuffle(w);let I=Jn(w),A=YT(v,i);for(let P=0;P<A.length;++P){let N={};if(yield y.onBatchBegin(P,N),ne(()=>{let B=A[P][0],S=A[P][1],W=Fp(I,B,S-B);N.batch=P,N.size=S-B;let ie=XT(r,W),Q=e(ie);for(let J=0;J<o.length;++J){let G=o[J],H=Q[J];N[G]=H,qn(H)}if(P===A.length-1&&g){let J=this.testLoop(c,u,i);for(let G=0;G<o.length;++G){let H=o[G],V=J[G];qn(V),T["val_"+H]=V}}}),yield y.onBatchEnd(P,N),BT(N),this.stopTraining_)break}I.dispose()}if(yield y.onEpochEnd(k,T),this.stopTraining_)break}return yield y.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(e,r){return z(this,null,function*(){return qJ(this,e,r)})}trainOnBatch(e,r){return z(this,null,function*(){let o=yield this.standardizeUserData(e,r),i=o[0],s=o[1],l=this.makeTrainFunction()(i.concat(s)),c=[];for(let u of l){let d=yield u.data();c.push(d[0])}return gt(l),ja(o[0],e),ja(o[1],r),Ro(c)})}getNamedWeights(e){let r=[],o=e!=null&&e.trainableOnly,i=o?this.trainableWeights:this.weights,s=this.getWeights(o);for(let a=0;a<i.length;++a)o&&!i[a].trainable||r.push({name:i[a].originalName,tensor:s[a]});return r}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let r=ov().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=r-ov().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ba(this.loss);else if(Array.isArray(this.loss)){for(let r of this.loss)if(typeof r!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(r=>Ba(r))}else{let r=Object.keys(this.loss);e={};let o=this.loss;for(let i of r)if(typeof o[i]=="string")e[i]=Ba(o[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ba(gk(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ba(gk(e)));{let e={};for(let r in this.metrics)e[r]=Ba(gk(this.metrics[r]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let r=q0(e.optimizer_config),o=Ki(r),i;if(typeof e.loss=="string")i=Op(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(a=>Op(a));else if(e.loss!=null){i={};for(let a in e.loss)i[a]=Op(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>Op(a));else if(e.metrics!=null){s={};for(let a in e.metrics)s[a]=Op(e.metrics[a])}this.compile({loss:i,metrics:s,optimizer:o})}save(e,r){return z(this,null,function*(){if(typeof e=="string"){let u=to.getSaveHandlers(e);if(u.length===0)throw new te(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new te(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new te("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let o=yield to.encodeWeights(this.getNamedWeights(r)),l={modelTopology:this.toJSON(null,!1),format:YIe,generatedBy:`TensorFlow.js tfjs-layers v${mf}`,convertedBy:null};if((r==null?!1:r.includeOptimizer)&&this.optimizer!=null){l.trainingConfig=this.getTrainingConfig();let u="optimizer",{data:d,specs:p}=yield to.encodeWeights(yield this.optimizer.getWeights(),u);o.specs.push(...p),o.data=to.concatenateArrayBuffers([o.data,d])}return this.userDefinedMetadata!=null&&(rP(this.userDefinedMetadata,this.name,!0),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=o.data,l.weightSpecs=o.specs,e.save(l)})}setUserDefinedMetadata(e){rP(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();ve.registerClass(za);var QIe=(()=>{class t extends za{}return t.className="Functional",t})();ve.registerClass(QIe);function QJ(t,n){return z(this,null,function*(){"modelTopology"in t||(t={modelTopology:t}),t=t;let e=t.modelTopology;e.model_config!=null&&(e=e.model_config);let r=q0(e),o=Ki(r,n);if(t.weightsManifest!=null){let i=yield to.loadWeights(t.weightsManifest,t.pathPrefix,o.weights.map(a=>a.originalName)),s={};for(let a of o.weights)s[a.originalName]=i[a.originalName];o.loadWeights(s),gt(i)}return o})}function Nv(t,n){return z(this,null,function*(){if(n==null&&(n={}),typeof t=="string"){let e=to.getLoadHandlers(t,n);if(e.length===0)e.push(to.browserHTTPRequest(t,n));else if(e.length>1)throw new te(`Found more than one (${e.length}) load handlers for URL '${t}'`);t=e[0]}return JIe(t,void 0,n)})}function JIe(t,n,e){return z(this,null,function*(){if(e==null&&(e={}),t.load==null)throw new te("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=yield t.load(),o=r.modelTopology;o.model_config!=null&&(o=o.model_config);let i=e.strict==null?!0:e.strict,s=r.weightData!=null&&r.weightSpecs!=null&&i,a=Ki(q0(o),n,s),l=r.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new te("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:u}=e3e(r.weightData,r.weightSpecs);a.loadWeights(c,i),a.optimizer!=null&&u.length>0&&(yield a.optimizer.setWeights(u)),gt(c),gt(u.map(d=>d.tensor))}return a})}function e3e(t,n){let e=to.decodeWeights(t,n),r={},o=[];return n.forEach(i=>{i.group==="optimizer"?o.push({name:i.name,tensor:e[i.name]}):r[i.name]=e[i.name]}),{modelWeights:r,optimizerWeights:o}}var vk=(()=>{class t extends za{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:df("sequential_"),e.layers!=null)for(let r of e.layers)this.add(r)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(o=>o<0))throw new te(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let r=e instanceof t||e instanceof za,o;if(r){if(o=e,o.outputs.length!==1)throw new te("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(o.inputs.length!==1)throw new te("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new te("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let i=OT({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(r)this.outputs=o.outputs,this.inputs=o.inputs;else{if(e.inboundNodes.length!==1)throw new te(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new te("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=U8(this.outputs[0])}this.inboundNodes=[],new Bp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Pa(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{let i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,r){return this.model==null&&this.build(),this.model.call(e,r)}build(e){if(Wt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new za({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,r,o=console.log){this.built||this.build(),super.summary(e,r,o)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,r,o={}){if(!this.built)throw new zi("The model needs to be compiled before being used.");return this.model.evaluate(e,r,o)}evaluateDataset(e,r){return z(this,null,function*(){if(!this.built)throw new zi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,r)})}predict(e,r={}){return this.model==null&&this.build(),this.model.predict(e,r)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}fit(i,s){return z(this,arguments,function*(e,r,o={}){if(!this.built)throw new zi("The model needs to be compiled before being used.");return this.model.fit(e,r,o)})}fitDataset(e,r){return z(this,null,function*(){if(!this.built)throw new zi("The model needs to be compiled before being used.");return this.model.fitDataset(e,r)})}trainOnBatch(e,r){return z(this,null,function*(){return this.model.trainOnBatch(e,r)})}static fromConfig(e,r,o={},i=!1){let s,a={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new te("Legacy serialization format not supported yet.");s=r}else x.assert(r.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=r.layers,delete r.layers,a=r;let l=new e(a);if(!(l instanceof t))throw new bt(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(let c of s){let d=Ki(c,void 0,i);i&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(this.model==null)throw new te("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new te("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let r of this.layers){let o={};o.className=r.getClassName(),o.config=r.getConfig(),e.push(o)}return{name:this.name,layers:e}}}return t.className="Sequential",t})();ve.registerClass(vk);function JJ(t){return new za(t)}function eee(t){return new vk(t)}function QT(t){return OT(t)}function tee(t,n){J8.registerCallbackConstructor(t,n)}var ei=class extends ve.Serializable{getConfig(){return{}}},t3e=(()=>{class t extends ei{apply(e,r=1){return _J(e,r)}}return t.className="elu",t})();ve.registerClass(t3e);var n3e=(()=>{class t extends ei{apply(e){return T0(e)}}return t.className="selu",t})();ve.registerClass(n3e);var r3e=(()=>{class t extends ei{apply(e){return Ao(e)}}return t.className="relu",t})();ve.registerClass(r3e);var o3e=(()=>{class t extends ei{apply(e){return ne(()=>Ls(6,Ao(e)))}}return t.className="relu6",t})();ve.registerClass(o3e);var i3e=(()=>{class t extends ei{apply(e){return e}}return t.className="linear",t})();ve.registerClass(i3e);var s3e=(()=>{class t extends ei{apply(e){return ui(e)}}return t.className="sigmoid",t})();ve.registerClass(s3e);var a3e=(()=>{class t extends ei{apply(e){return bJ(e)}}return t.className="hardSigmoid",t})();ve.registerClass(a3e);var l3e=(()=>{class t extends ei{apply(e){return Na(e)}}return t.className="softplus",t})();ve.registerClass(l3e);var c3e=(()=>{class t extends ei{apply(e){return kJ(e)}}return t.className="softsign",t})();ve.registerClass(c3e);var u3e=(()=>{class t extends ei{apply(e){return Ea(e)}}return t.className="tanh",t})();ve.registerClass(u3e);var aP=(()=>{class t extends ei{apply(e,r=-1){return Ep(e,r)}}return t.className="softmax",t})();ve.registerClass(aP);var d3e=(()=>{class t extends ei{apply(e,r=-1){return x0(e,r)}}return t.className="logSoftmax",t})();ve.registerClass(d3e);var p3e=(()=>{class t extends ei{apply(e){return ne(()=>ne(()=>{let r=Math.sqrt(2),o=L(.5,fe(1,y0(je(e,r))));return L(e,o)}))}}return t.className="gelu",t})();ve.registerClass(p3e);var h3e=(()=>{class t extends ei{apply(e){return ne(()=>L(.5,L(e,fe(1,Ea(L(In(je(2,Math.PI)),fe(e,L(.044715,Yo(e,3)))))))))}}return t.className="gelu_new",t})();ve.registerClass(h3e);var f3e=(()=>{class t extends ei{apply(e){return ne(()=>L(e,Ea(Na(e))))}}return t.className="mish",t})();ve.registerClass(f3e);var m3e=(()=>{class t extends ei{apply(e,r=1){return ne(()=>L(ui(L(e,r)),e))}}return t.className="swish",t})();ve.registerClass(m3e);function Vl(t){return t.getClassName()}function sP(t,n={}){return Iu(t,ve.SerializationMap.getMap().classNameMap,n,"activation")}function jl(t){if(t==null){let n={};return n.className="linear",n.config={},sP(n)}if(typeof t=="string"){let n={};return n.className=t,n.config={},sP(n)}else return t instanceof ei?t:sP(t)}function lP(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var JT=class extends ve.Serializable{},wk=(()=>{class t extends JT{constructor(e){super(),lP(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ne(()=>{let r=Ln([1]);return this.hasL1&&(r=fe(r,Ge(L(this.l1,zn(e))))),this.hasL2&&(r=fe(r,Ge(L(this.l2,H0(e))))),$(r,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,r){return new e({l1:r.l1,l2:r.l2})}}return t.className="L1L2",t})();ve.registerClass(wk);function oee(t){return lP(t),new wk({l1:t!=null?t.l1:null,l2:0})}function iee(t){return lP(t),new wk({l2:t!=null?t.l2:null,l1:0})}var nee={l1l2:"L1L2"};function Tn(t){return yv(t)}function ree(t,n={}){return Iu(t,ve.SerializationMap.getMap().classNameMap,n,"regularizer")}function $n(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in nee?nee[t]:t,config:{}};return ree(e)}else return t instanceof JT?t:ree(t)}var cP=(()=>{class t extends Ct{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,r){e=ft(e);let o=Ao(e);return this.maxValue!=null&&(o=go(o,0,this.maxValue)),o}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ReLU",t})();ve.registerClass(cP);var uP=(()=>{class t extends Ct{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let o=ft(e);return kp(o,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}}return t.className="LeakyReLU",t})();ve.registerClass(uP);var dP=(()=>{class t extends Ct{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Rn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=$n(e.alphaRegularizer),this.alphaConstraint=wr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new te(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Wt(e);let r=e.slice(1);if(this.sharedAxes!=null)for(let i of this.sharedAxes)r[i-1]=1;this.alpha=this.addWeight("alpha",r,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let o={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)o[i]=e[i];this.inputSpec=[new On({ndim:e.length,axes:o})],this.built=!0}call(e,r){return e=ft(e),Dp(e,this.alpha.read())}getConfig(){let e={alphaInitializer:Un(this.alphaInitializer),alphaRegularizer:Tn(this.alphaRegularizer),alphaConstraint:vr(this.alphaConstraint),sharedAxes:this.sharedAxes},r=super.getConfig();return Object.assign(e,r),e}}return t.className="PReLU",t})();ve.registerClass(dP);var pP=(()=>{class t extends Ct{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new bt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let o=ft(e);return Al(o)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ELU",t})();ve.registerClass(pP);var hP=(()=>{class t extends Ct{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,r){let o=ft(e);return L(o,ge(Yn(o,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ThresholdedReLU",t})();ve.registerClass(hP);var fP=(()=>{class t extends Ct{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new aP().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,r){return ne(()=>{let o=ft(e),i=r.mask;if(i!=null){let s=L(Be(Nr(o.shape),ge(i,o.dtype)),Ue(-1e9));o=fe(o,s)}return this.axis instanceof Array?this.axis.length>1?mr(Be(o,Cp(o,this.axis,!0))):this.softmax(o,this.axis[0]):this.softmax(o,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Softmax",t})();ve.registerClass(fP);function gf(t,n,e){if(typeof t=="number")return Pa(t,n);if(t.length!==n)throw new te(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${t.length} elements.`);for(let r=0;r<n;++r){let o=t[r];if(!vJ(o))throw new te(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function ds(t,n,e,r,o=1){if(t==null)return t;let i=n+(n-1)*(o-1),s;return e==="same"?s=t:s=t-i+1,Math.floor((s+r-1)/r)}function zl(t,n,e,r){if(t==null)return null;if(r==="valid")t=t*n+$l([e-n,0]);else if(r==="same")t=t*n;else throw new te(`Unsupport padding mode: ${r}.`);return t}function xk(t,n){return ne(()=>(or(n),n==="channelsFirst"?jt(t,[0,2,3,1]):t))}function mP(t,n){return ne(()=>(or(n),n==="channelsFirst"?jt(t,[0,2,3,4,1]):t))}function v3e(t,n,e,r=1,o="valid",i,s=1){return ne(()=>{if(i==null&&(i=Gi()),or(i),t.shape.length!==3)throw new te(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(n.shape.length!==3)throw new te(`The kernel for a conv1dWithBias operation should be 3, but is ${n.shape.length} instead`);if(e!=null&&e.shape.length!==1)throw new te(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(i==="channelsFirst"&&(t=jt(t,[0,2,1])),o==="causal")throw new bt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=m0(t,n,r,o==="same"?"same":"valid","NWC",s);return e!=null&&(a=Wi(a,e)),a})}function see(t,n,e,r=[1,1],o="valid",i,s,a=null){return ne(()=>{if(i==null&&(i=Gi()),or(i),t.rank!==3&&t.rank!==4)throw new te(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(n.rank!==3&&n.rank!==4)throw new te(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=xk(t,i);if(o==="causal")throw new bt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Ap.conv2d({x:l,filter:n,strides:r,pad:o==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:e,activation:a}),i==="channelsFirst"&&(l=jt(l,[0,3,1,2])),l})}function w3e(t,n,e,r=[1,1,1],o="valid",i,s){return ne(()=>{if(i==null&&(i=Gi()),or(i),t.rank!==4&&t.rank!==5)throw new te(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(n.rank!==4&&n.rank!==5)throw new te(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=mP(t,i);if(o==="causal")throw new bt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=x_(a,n,r,o==="same"?"same":"valid","NDHWC",s),e!=null&&(a=Wi(a,e)),i==="channelsFirst"&&(a=jt(a,[0,4,1,2,3])),a})}var yk=class t extends Ct{constructor(n,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(e),this.rank=n,Or(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new bt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=gf(e.kernelSize,n,"kernelSize"),this.strides=gf(e.strides==null?1:e.strides,n,"strides"),this.padding=e.padding==null?"valid":e.padding,Hi(this.padding),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),this.activation=jl(e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.biasInitializer=Rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=wr(e.biasConstraint),this.biasRegularizer=$n(e.biasRegularizer),this.activityRegularizer=$n(e.activityRegularizer),this.dilationRate=gf(e.dilationRate==null?1:e.dilationRate,n,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new te(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new te(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new te(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(n){if(ca("kernelSize"in n,"required key 'kernelSize' not in config"),typeof n.kernelSize!="number"&&!vT(n.kernelSize,"number",1,3))throw new te(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(n.kernelSize)}.`)}getConfig(){let n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Vl(this.activation),useBias:this.useBias,biasInitializer:Un(this.biasInitializer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),biasConstraint:vr(this.biasConstraint)},e=super.getConfig();return Object.assign(n,e),n}},Av=class t extends yk{constructor(n,e){super(n,e),this.kernel=null,t.verifyArgs(e),this.filters=e.filters,Or(this.filters,"filters"),this.kernelInitializer=Rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=wr(e.kernelConstraint),this.kernelRegularizer=$n(e.kernelRegularizer)}build(n){n=Wt(n);let e=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[e]==null)throw new te(`The channel dimension of the input should be defined. Found ${n[e]}`);let r=n[e],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:r}}],this.built=!0}call(n,e){return ne(()=>{n=ft(n);let r,o=this.bias==null?null:this.bias.read(),i=wT(this.activation.getClassName());if(i!=null&&this.rank===2)r=see(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=v3e(n,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=see(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=w3e(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new bt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(n){n=Wt(n);let e=[],r=this.dataFormat==="channelsLast"?n.slice(1,n.length-1):n.slice(2);for(let i=0;i<r.length;++i){let s=ds(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);e.push(s)}let o=[n[0]];return this.dataFormat==="channelsLast"?(o=o.concat(e),o.push(this.filters)):(o.push(this.filters),o=o.concat(e)),o}getConfig(){let n={filters:this.filters,kernelInitializer:Un(this.kernelInitializer),kernelRegularizer:Tn(this.kernelRegularizer),kernelConstraint:vr(this.kernelConstraint)},e=super.getConfig();return Object.assign(n,e),n}static verifyArgs(n){if(!("filters"in n)||typeof n.filters!="number"||n.filters<1)throw new te(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(n.filters)}`)}},eD=(()=>{class t extends Av{constructor(e){super(2,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!vT(e.kernelSize,"number",1,2))throw new te(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv2D",t})();ve.registerClass(eD);var tD=(()=>{class t extends Av{constructor(e){super(3,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new te(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv3D",t})();ve.registerClass(tD);var gP=(()=>{class t extends eD{constructor(e){if(super(e),this.inputSpec=[new On({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new te(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Wt(e),e.length!==4)throw new te("Input should have rank 4; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new te("The channel dimension of the inputs should be defined. Found `None`.");let o=e[r],i=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new On({ndim:4,axes:{[r]:o}})],this.built=!0}call(e,r){return ne(()=>{let o=ft(e);if(o.shape.length!==4)throw new te(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);let i=o.shape,s=i[0],a,l;this.dataFormat==="channelsFirst"?(a=2,l=3):(a=1,l=2);let c=i[a],u=i[l],d=this.kernelSize[0],p=this.kernelSize[1],h=this.strides[0],f=this.strides[1],m=zl(c,h,d,this.padding),g=zl(u,f,p,this.padding),v=[s,m,g,this.filters];this.dataFormat!=="channelsLast"&&(o=jt(o,[0,2,3,1]));let w=g0(o,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=jt(w,[0,3,1,2])),this.bias!=null&&(w=Wi(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=Wt(e);let r=e.slice(),o,i,s;this.dataFormat==="channelsFirst"?(o=1,i=2,s=3):(o=3,i=1,s=2);let a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return r[o]=this.filters,r[i]=zl(r[i],c,a,this.padding),r[s]=zl(r[s],u,l,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv2DTranspose",t})();ve.registerClass(gP);var vP=(()=>{class t extends tD{constructor(e){if(super(e),this.inputSpec=[new On({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new te(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Wt(e),e.length!==5)throw new te("Input should have rank 5; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new te("The channel dimension of the inputs should be defined. Found `None`.");let o=e[r],i=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new On({ndim:5,axes:{[r]:o}})],this.built=!0}call(e,r){return ne(()=>{let o=ft(e);if(o.shape.length!==5)throw new te(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);let i=o.shape,s=i[0],a,l,c;this.dataFormat==="channelsFirst"?(c=2,a=3,l=4):(c=1,a=2,l=3);let u=i[c],d=i[a],p=i[l],h=this.kernelSize[0],f=this.kernelSize[1],m=this.kernelSize[2],g=this.strides[0],v=this.strides[1],w=this.strides[2],y=zl(u,g,h,this.padding),_=zl(d,v,f,this.padding),k=zl(p,w,m,this.padding),T=[s,y,_,k,this.filters];this.dataFormat!=="channelsLast"&&(o=jt(o,[0,2,3,4,1]));let I=__(o,this.kernel.read(),T,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(I=jt(I,[0,4,1,2,3])),this.bias!==null&&(I=Wi(I,this.bias.read(),this.dataFormat)),this.activation!==null&&(I=this.activation.apply(I)),I})}computeOutputShape(e){e=Wt(e);let r=e.slice(),o,i,s,a;this.dataFormat==="channelsFirst"?(o=1,i=2,s=3,a=4):(o=4,i=1,s=2,a=3);let l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],p=this.strides[1],h=this.strides[2];return r[o]=this.filters,r[i]=zl(r[i],d,l,this.padding),r[s]=zl(r[s],p,c,this.padding),r[a]=zl(r[a],h,u,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv3DTranspose",t})();ve.registerClass(vP);var y3e=(()=>{class t extends Av{constructor(e,r){if(super(e,r),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,r.filters==null)throw new te("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new te("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new te(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(r.padding)}`);this.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,this.depthwiseInitializer=Rn(r.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=$n(r.depthwiseRegularizer),this.depthwiseConstraint=wr(r.depthwiseConstraint),this.pointwiseInitializer=Rn(r.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=$n(r.pointwiseRegularizer),this.pointwiseConstraint=wr(r.pointwiseConstraint)}build(e){if(e=Wt(e),e.length<this.rank+2)throw new te(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null||e[r]<0)throw new te(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[r])}`);let o=e[r],i=this.kernelSize.concat([o,this.depthMultiplier]),s=[];for(let l=0;l<this.rank;++l)s.push(1);s.push(o*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new On({ndim:this.rank+2,axes:{[r]:o}})],this.built=!0}call(e,r){return ne(()=>{e=ft(e);let o;if(this.rank===1)throw new bt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=jt(e,[0,2,3,1])),o=D0(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(o=Wi(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),this.dataFormat==="channelsFirst"&&(o=jt(o,[0,3,1,2])),o})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Un(this.depthwiseInitializer),e.pointwiseInitializer=Un(this.pointwiseInitializer),e.depthwiseRegularizer=Tn(this.depthwiseRegularizer),e.pointwiseRegularizer=Tn(this.pointwiseRegularizer),e.depthwiseConstraint=vr(this.depthwiseConstraint),e.pointwiseConstraint=vr(this.pointwiseConstraint),e}}return t.className="SeparableConv",t})();var wP=(()=>{class t extends y3e{constructor(e){super(2,e)}}return t.className="SeparableConv2D",t})();ve.registerClass(wP);var yP=(()=>{class t extends Av{constructor(e){super(1,e),t.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!vT(e.kernelSize,"number",1,1))throw new te(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv1D",t})();ve.registerClass(yP);var xP=(()=>{class t extends Ct{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,r){return ne(()=>{if(e=ft(e),this.dataFormat==="channelsLast"){let o=ok(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return ok(o,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let o=ok(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return ok(o,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Cropping2D",t})();ve.registerClass(xP);var _P=(()=>{class t extends Ct{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,mJ(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let r=e[2]==null?null:this.size[0]*e[2],o=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],r,o]}else{let r=e[1]==null?null:this.size[0]*e[1],o=e[2]==null?null:this.size[1]*e[2];return[e[0],r,o,e[3]]}}call(e,r){return ne(()=>{let o=ft(e),i=o.shape;if(this.dataFormat==="channelsFirst"){o=jt(o,[0,2,3,1]);let s=this.size[0]*i[2],a=this.size[1]*i[3],l=this.interpolation==="nearest"?Mi.resizeNearestNeighbor(o,[s,a]):Mi.resizeBilinear(o,[s,a]);return jt(l,[0,3,1,2])}else{let s=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?Mi.resizeNearestNeighbor(o,[s,a]):Mi.resizeBilinear(o,[s,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}}return t.className="UpSampling2D",t})();ve.registerClass(_P);function x3e(t,n,e=[1,1],r="valid",o,i){return ne(()=>{o==null&&(o=Gi()),or(o);let s=xk(t,o);if(t.rank!==4)throw new te(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(n.rank!==4)throw new te(`depthwiseKernel is required to be 4-D, but is instead ${n.rank}-D`);return s=Nl(s,n,e,r==="same"?"same":"valid","NHWC",i),o==="channelsFirst"&&(s=jt(s,[0,3,1,2])),s})}var kP=(()=>{class t extends yk{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Rn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=wr(e.depthwiseConstraint),this.depthwiseRegularizer=$n(e.depthwiseRegularizer)}build(e){if(e=Wt(e),e.length<4)throw new te(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let r=this.dataFormat==="channelsFirst"?1:3;if(e[r]==null||e[r]<0)throw new te(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[r]}).`);let o=e[r],i=[this.kernelSize[0],this.kernelSize[1],o,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[o*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return ne(()=>{e=ft(e);let o=x3e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(o=Wi(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),o})}computeOutputShape(e){e=Wt(e);let r=this.dataFormat==="channelsFirst"?e[2]:e[1],o=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=ds(r,this.kernelSize[0],this.padding,this.strides[0]),a=ds(o,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,a]:[e[0],s,a,i]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Un(this.depthwiseInitializer),e.depthwiseRegularizer=Tn(this.depthwiseRegularizer),e.depthwiseConstraint=vr(this.depthwiseRegularizer),e}}return t.className="DepthwiseConv2D",t})();ve.registerClass(kP);function bP(t,n,e,r){if(Array.isArray(t)){if(n!=null||e!=null)throw new te("When inputs is an array, neither initialState or constants should be provided");r!=null&&(e=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function o(i){return i==null||Array.isArray(i)?i:[i]}return n=o(n),e=o(e),{inputs:t,initialState:n,constants:e}}function CP(t,n,e,r=!1,o,i,s=!1,a=!1){return ne(()=>{let l=n.shape.length;if(l<3)throw new te(`Input should be at least 3D, but is ${l}D.`);let c=[1,0].concat(Ui(2,l));if(n=jt(n,c),i!=null)throw new bt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=ge(ge(o,"bool"),"float32"),o.rank===l-1&&(o=gr(o,-1)),o=jt(o,c)),r&&(n=Qr(n,0),o!=null&&(o=Qr(o,0)));let u=[],d,p=e,h=n.shape[0],f=eo(n),m;o!=null&&(m=eo(o));for(let v=0;v<h;++v){let w=f[v],y=ne(()=>t(w,p));if(o==null)d=y[0],p=y[1];else{let _=ne(()=>{let k=m[v],T=Be(co(k),k),I=fe(L(y[0],k),L(p[0],T)),A=p.map((P,N)=>fe(L(y[1][N],k),L(P,T)));return{output:I,newStates:A}});d=_.output,p=_.newStates}a&&u.push(d)}let g;return a&&(g=Qn(u,1)),[d,g,p]})}var Hl=(()=>{class t extends Ct{constructor(e){super(e);let r;if(e.cell==null)throw new te("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?r=new oD({cells:e.cell}):r=e.cell,r.stateSize==null)throw new te("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=r,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new On({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ui(0,e).map(r=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){RT(e)&&(e=e[0]),e=e;let r=this.cell.stateSize;Array.isArray(r)||(r=[r]);let o=r[0],i;if(this.returnSequences?i=[e[0],e[1],o]:i=[e[0],o],this.returnState){let s=[];for(let a of r)s.push([e[0],a]);return[i].concat(s)}else return i}computeMask(e,r){return ne(()=>{Array.isArray(r)&&(r=r[0]);let o=this.returnSequences?r:null;if(this.returnState){let i=this.states.map(s=>null);return[o].concat(i)}else return o})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[];for(let o=0;o<e;++o)r.push(null);return r}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new bt("Constants support is not implemented in RNN yet.");RT(e)&&(e=e[0]),e=e;let o=this.stateful?e[0]:null,i=e.slice(2);this.inputSpec[0]=new On({shape:[o,null,...i]});let s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!x.arraysEqual(this.stateSpec.map(l=>l.shape[l.shape.length-1]),a))throw new te(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(l=>new On({shape:[null,l]}));this.stateful&&this.resetStates()}resetStates(e,r=!1){ne(()=>{if(!this.stateful)throw new la("Cannot call resetStates() on an RNN Layer that is not stateful.");let o=this.inputSpec[0].shape[0];if(o==null)throw new te("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Ln([o,i])):this.states_=[Ln([o,this.cell.stateSize])];else if(e==null)gt(this.states_),this.keptStates!=null&&(gt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Ln([o,i])):this.states_[0]=Ln([o,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new te(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r===!0?this.keptStates.push(this.states_.slice()):gt(this.states_);for(let i=0;i<this.states_.length;++i){let s=e[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,l=[o,a];if(!x.arraysEqual(s.shape,l))throw new te(`State ${i} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>qn(i.clone()))})}apply(e,r){let o=r==null?null:r.initialState,i=r==null?null:r.constants;r==null&&(r={});let s=bP(e,o,i,this.numConstants);e=s.inputs,o=s.initialState,i=s.constants;let a=[],l=[];if(o!=null){r.initialState=o,a=a.concat(o),this.stateSpec=[];for(let u of o)this.stateSpec.push(new On({shape:u.shape}));l=l.concat(this.stateSpec)}if(i!=null&&(r.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof pi){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,r);return this.inputSpec=p,h}else return super.apply(e,r)}call(e,r){return ne(()=>{let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;e=ft(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));let a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new te(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let l={training:i},u=CP((m,g)=>{let v=this.cell.call([m].concat(g),l);return[v[0],v.slice(1)]},e,s,this.goBackwards,o,null,this.unroll,this.returnSequences),d=u[0],p=u[1],h=u[2];this.stateful&&this.resetStates(h,i);let f=this.returnSequences?p:d;return this.returnState?[f].concat(h):f})}getInitialState(e){return ne(()=>{let r=Ln(e.shape);return r=Ge(r,[1,2]),r=Pp(r),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(o=>o>1?CT(r,[1,o]):r):this.cell.stateSize>1?[CT(r,[1,this.cell.stateSize])]:[r]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),r={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(r.numConstants=this.numConstants);let o=this.cell.getConfig();return this.getClassName()===t.className&&(r.cell={className:this.cell.getClassName(),config:o}),Object.assign(Object.assign(Object.assign({},o),e),r)}static fromConfig(e,r,o={}){let i=r.cell,s=Ki(i,o);return new e(Object.assign(r,{cell:s}))}}return t.className="RNN",t})();ve.registerClass(Hl);var $p=class extends Ct{},nD=(()=>{class t extends $p{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Or(this.units,"units"),this.activation=jl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Rn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=$n(e.kernelRegularizer),this.recurrentRegularizer=$n(e.recurrentRegularizer),this.biasRegularizer=$n(e.biasRegularizer),this.kernelConstraint=wr(e.kernelConstraint),this.recurrentConstraint=wr(e.recurrentConstraint),this.biasConstraint=wr(e.biasConstraint),this.dropout=z0([1,$l([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=z0([1,$l([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Wt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return ne(()=>{if(e=e,e.length!==2)throw new te(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let o=e[1];e=e[0];let i=r.training==null?!1:r.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Vp({ones:()=>co(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Vp({ones:()=>co(o),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s,a=this.dropoutMask,l=this.recurrentDropoutMask;a!=null?s=Va(L(e,a),this.kernel.read()):s=Va(e,this.kernel.read()),this.bias!=null&&(s=Wi(s,this.bias.read())),l!=null&&(o=L(o,l));let c=fe(s,Va(o,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Vl(this.activation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:Tn(this.kernelRegularizer),recurrentRegularizer:Tn(this.recurrentRegularizer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),kernelConstraint:vr(this.kernelConstraint),recurrentConstraint:vr(this.recurrentConstraint),biasConstraint:vr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),r)}}return t.className="SimpleRNNCell",t})();ve.registerClass(nD);var SP=(()=>{class t extends Hl{constructor(e){e.cell=new nD(e),super(e)}call(e,r){return ne(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return new e(r)}}return t.className="SimpleRNN",t})();ve.registerClass(SP);var rD=(()=>{class t extends $p{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new te("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Or(this.units,"units"),this.activation=jl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=jl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Rn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=$n(e.kernelRegularizer),this.recurrentRegularizer=$n(e.recurrentRegularizer),this.biasRegularizer=$n(e.biasRegularizer),this.kernelConstraint=wr(e.kernelConstraint),this.recurrentConstraint=wr(e.recurrentConstraint),this.biasConstraint=wr(e.biasConstraint),this.dropout=z0([1,$l([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=z0([1,$l([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Wt(e);let r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return ne(()=>{if(e=e,e.length!==2)throw new te(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let o=r.training==null?!1:r.training,i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Vp({ones:()=>co(e),rate:this.dropout,training:o,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Vp({ones:()=>co(i),rate:this.recurrentDropout,training:o,count:3,dropoutFunc:this.dropoutFunc}));let s=this.dropoutMask,a=this.recurrentDropoutMask,l,c,u;0<this.dropout&&this.dropout<1&&(e=L(e,s[0]));let d=Va(e,this.kernel.read());this.useBias&&(d=Wi(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=L(i,a[0]));let p=this.recurrentKernel.read(),[h,f]=Jr(p,[2*this.units,this.units],p.rank-1),m=Va(i,h),[g,v,w]=Jr(d,3,d.rank-1),[y,_]=Jr(m,2,m.rank-1);l=this.recurrentActivation.apply(fe(g,y)),c=this.recurrentActivation.apply(fe(v,_));let k=Va(L(c,i),f);u=this.activation.apply(fe(w,k));let T=fe(L(l,i),L(fe(1,Xt(l)),u));return[T,T]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Vl(this.activation),recurrentActivation:Vl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:Tn(this.kernelRegularizer),recurrentRegularizer:Tn(this.recurrentRegularizer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),kernelConstraint:vr(this.kernelConstraint),recurrentConstraint:vr(this.recurrentConstraint),biasConstraint:vr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),r)}}return t.className="GRUCell",t})();ve.registerClass(rD);var MP=(()=>{class t extends Hl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new rD(e),super(e)}call(e,r){return ne(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}}return t.className="GRU",t})();ve.registerClass(MP);var Rv=(()=>{class t extends $p{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Or(this.units,"units"),this.activation=jl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=jl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Rn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=$n(e.kernelRegularizer),this.recurrentRegularizer=$n(e.recurrentRegularizer),this.biasRegularizer=$n(e.biasRegularizer),this.kernelConstraint=wr(e.kernelConstraint),this.recurrentConstraint=wr(e.recurrentConstraint),this.biasConstraint=wr(e.biasConstraint),this.dropout=z0([1,$l([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=z0([1,$l([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var r;e=Wt(e);let o=e[e.length-1];this.kernel=this.addWeight("kernel",[o,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){let s=this.biasInitializer,a=this.units;i=new(r=class extends qi{apply(c,u){let d=s.apply([a]),p=new ik().apply([a]),h=s.apply([a*2]);return P8(P8(d,p),h)}},r.className="CustomInit",r)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,r){return ne(()=>{let o=r.training==null?!1:r.training;if(e=e,e.length!==3)throw new te(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1],s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Vp({ones:()=>co(e),rate:this.dropout,training:o,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Vp({ones:()=>co(i),rate:this.recurrentDropout,training:o,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,c,u,d,p;0<this.dropout&&this.dropout<1&&(e=L(e,a[0]));let h=Va(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=L(i,l[0])),h=fe(h,Va(i,this.recurrentKernel.read())),this.useBias&&(h=Wi(h,this.bias.read()));let[f,m,g,v]=Jr(h,4,h.rank-1);c=this.recurrentActivation.apply(f),u=this.recurrentActivation.apply(m),d=fe(L(u,s),L(c,this.activation.apply(g))),p=this.recurrentActivation.apply(v);let w=L(p,this.activation.apply(d));return[w,w,d]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Vl(this.activation),recurrentActivation:Vl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Tn(this.kernelRegularizer),recurrentRegularizer:Tn(this.recurrentRegularizer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),kernelConstraint:vr(this.kernelConstraint),recurrentConstraint:vr(this.recurrentConstraint),biasConstraint:vr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),r)}}return t.className="LSTMCell",t})();ve.registerClass(Rv);var TP=(()=>{class t extends Hl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Rv(e),super(e)}call(e,r){return ne(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}}return t.className="LSTM",t})();ve.registerClass(TP);var oD=(()=>{class t extends $p{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let r of this.cells.slice().reverse())Array.isArray(r.stateSize)?e.push(...r.stateSize):e.push(r.stateSize);return e}call(e,r){return ne(()=>{e=e;let o=e.slice(1),i=[];for(let l of this.cells.slice().reverse())Array.isArray(l.stateSize)?i.push(o.splice(0,l.stateSize.length)):i.push(o.splice(0,1));i.reverse();let s=[],a;for(let l=0;l<this.cells.length;++l){let c=this.cells[l];o=i[l],l===0?a=[e[0]].concat(o):a=[a[0]].concat(o),a=c.call(a,r),s.push(a.slice(1))}o=[];for(let l of s.slice().reverse())o.push(...l);return[a[0]].concat(o)})}build(e){RT(e)&&(e=e[0]),e=e;let r;this.cells.forEach((o,i)=>{Ll(`RNNCell_${i}`,()=>{o.build(e),Array.isArray(o.stateSize)?r=o.stateSize[0]:r=o.stateSize,e=[e[0],r]})}),this.built=!0}getConfig(){let e=super.getConfig(),r=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(r)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,r,o={}){let i=[];for(let s of r.cells)i.push(Ki(s,o));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let r of this.cells)e.push(...r.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let r of this.cells)e.push(...r.nonTrainableWeights);if(!this.trainable){let r=[];for(let o of this.cells)r.push(...o.trainableWeights);return r.concat(e)}return e}getWeights(){let e=[];for(let r of this.cells)e.push(...r.weights);return sk(e)}setWeights(e){let r=[];for(let o of this.cells){let i=o.weights.length,s=e.splice(i);for(let a=0;a<o.weights.length;++a)r.push([o.weights[a],s[a]])}Mv(r)}}return t.className="StackedRNNCells",t})();ve.registerClass(oD);function Vp(t){let{ones:n,rate:e,training:r=!1,count:o=1,dropoutFunc:i}=t,s=()=>i!=null?i(n(),e):MT(n(),e),a=()=>pf(s,n,r);return!o||o<=1?qn(a().clone()):Array(o).fill(void 0).map(a).map(c=>qn(c.clone()))}var _3e=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(e[r[o]]=t[r[o]]);return e};var k3e=(()=>{class t extends Hl{constructor(e){if(e.unroll)throw new bt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new bt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new On({ndim:5})]}call(e,r){return ne(()=>{if(this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),r&&r.constants)throw new te("ConvRNN2D cell does not support constants");let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}computeOutputShape(e){let r=this.computeSingleOutputShape(e);return this.returnSequences||(r=[r[0],...r.slice(2)]),this.returnState&&(r=[r,...Array(2).fill([e[0],...r.slice(-3)])]),r}getInitialState(e){return ne(()=>{let{stateSize:r}=this.cell,o=e.shape,i=this.computeSingleOutputShape(o),s=[i[0],...i.slice(2)],a=Ln(s);return Array.isArray(r)?Array(r.length).fill(a):[a]})}resetStates(e,r=!1){ne(()=>{if(!this.stateful)throw new la("Cannot call resetStates() on an RNN Layer that is not stateful.");let o=this.inputSpec[0].shape,i=this.computeSingleOutputShape(o),s=[i[0],...i.slice(2)];if(o[0]==null)throw new te("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ln(s)):this.states_=[Ln(s)];else if(e==null)gt(this.states_),this.keptStates!=null&&(gt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ln(s)):this.states_[0]=Ln(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new te(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r?this.keptStates.push(this.states_.slice()):gt(this.states_);for(let l=0;l<this.states_.length;++l){let c=e[l],u=s;if(!x.arraysEqual(c.shape,u))throw new te(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>qn(l.clone()))})}computeSingleOutputShape(e){let{dataFormat:r,filters:o,kernelSize:i,padding:s,strides:a,dilationRate:l}=this.cell,c=r==="channelsFirst",u=e[c?3:2],d=e[c?4:3],p=ds(u,i[0],s,a[0],l[0]),h=ds(d,i[1],s,a[1],l[1]);return[...e.slice(0,2),...c?[o,p,h]:[p,h,o]]}}return t.className="ConvRNN2D",t})(),iD=(()=>{class t extends Rv{constructor(e){let{filters:r,kernelSize:o,strides:i,padding:s,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:r})),this.filters=r,Or(this.filters,"filters"),this.kernelSize=gf(o,2,"kernelSize"),this.kernelSize.forEach(c=>Or(c,"kernelSize")),this.strides=gf(i||1,2,"strides"),this.strides.forEach(c=>Or(c,"strides")),this.padding=s||"valid",Hi(this.padding),this.dataFormat=a||"channelsLast",or(this.dataFormat),this.dilationRate=gf(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>Or(c,"dilationRate"))}build(e){var r;e=Wt(e);let o=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[o]==null)throw new te(`The channel dimension of the input should be defined. Found ${e[o]}`);let i=e[o],s=4,a=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let l=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let u=this.biasInitializer,d=this.filters;c=new(r=class extends qi{apply(h,f){let m=u.apply([d]),g=Nr([d]),v=u.apply([d*2]);return _v([m,g,v])}},r.className="CustomInit",r)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,r){return ne(()=>{if(e.length!==3)throw new te(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=r.training||!1,i=e[0],s=e[1],a=e[2],l=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Vp({ones:()=>co(i),rate:this.dropout,training:o,count:l,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,u=(pe,ce,se)=>!ce||!ce[se]?pe:L(ce[se],pe),d=u(i,c,0),p=u(i,c,1),h=u(i,c,2),f=u(i,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Vp({ones:()=>co(s),rate:this.recurrentDropout,training:o,count:l,dropoutFunc:this.dropoutFunc}));let m=this.recurrentDropoutMask,g=u(s,m,0),v=u(s,m,1),w=u(s,m,2),y=u(s,m,3),_=3,[k,T,I,A]=Jr(this.kernel.read(),l,_),[P,N,B,S]=this.useBias?Jr(this.bias.read(),l):[null,null,null,null];d=this.inputConv(d,k,P,this.padding),p=this.inputConv(p,T,N,this.padding),h=this.inputConv(h,I,B,this.padding),f=this.inputConv(f,A,S,this.padding);let[W,ie,Q,J]=Jr(this.recurrentKernel.read(),l,_);g=this.recurrentConv(g,W),v=this.recurrentConv(v,ie),w=this.recurrentConv(w,Q),y=this.recurrentConv(y,J);let G=this.recurrentActivation.apply(fe(d,g)),H=this.recurrentActivation.apply(fe(p,v)),V=fe(L(H,a),L(G,this.activation.apply(fe(h,w)))),K=L(this.recurrentActivation.apply(fe(f,y)),this.activation.apply(V));return[K,K,V]})}getConfig(){let e=super.getConfig(),{units:r}=e,o=_3e(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},o),i)}inputConv(e,r,o,i){let s=Vi(e,r,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return o?Wi(s,o,this.dataFormat):s}recurrentConv(e,r){return Vi(e,r,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();ve.registerClass(iD);var DP=(()=>{class t extends k3e{constructor(e){let r=new iD(e);super(Object.assign(Object.assign({},e),{cell:r}))}static fromConfig(e,r){return new e(r)}}return t.className="ConvLSTM2D",t})();ve.registerClass(DP);var sD=(()=>{class t extends Ct{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let r=e.shape,o=[];for(let i=0;i<this.noiseShape.length;++i)o.push(this.noiseShape[i]==null?r[i]:this.noiseShape[i]);return o}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);if(0<this.rate&&this.rate<1){let i=r.training==null?!1:r.training,s=this.getNoiseShape(o);return pf(()=>MT(o,this.rate,s,this.seed),()=>o,i)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=super.getConfig();return Object.assign(e,r),e}dispose(){return super.dispose()}}return t.className="Dropout",t})();ve.registerClass(sD);var EP=(()=>{class t extends sD{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let r=e.shape;return[r[0],1,r[2]]}}return t.className="SpatialDropout1D",t})();ve.registerClass(EP);var IP=(()=>{class t extends Ct{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),this.batchInputShape=[r,e.inputDim]}this.units=e.units,Or(this.units,"units"),this.activation=jl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=wr(e.kernelConstraint),this.biasConstraint=wr(e.biasConstraint),this.kernelRegularizer=$n(e.kernelRegularizer),this.biasRegularizer=$n(e.biasRegularizer),this.activityRegularizer=$n(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Wt(e);let r=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[r,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:r}}],this.built=!0}computeOutputShape(e){e=Wt(e);let r=e.slice();return r[r.length-1]=this.units,r}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e),i=wT(this.activation.getClassName()),s;return i!=null?s=Va(o,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Va(o,this.kernel.read()),this.bias!=null&&(s=Wi(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){let e={units:this.units,activation:Vl(this.activation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:Tn(this.kernelRegularizer),biasRegularizer:Tn(this.biasRegularizer),activityRegularizer:Tn(this.activityRegularizer),kernelConstraint:vr(this.kernelConstraint),biasConstraint:vr(this.biasConstraint)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Dense",t})();ve.registerClass(IP);var NP=(()=>{class t extends Ct{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Wt(e);for(let r of e.slice(1))if(r==null)throw new te(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],$a(e,1)]}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);if(this.dataFormat==="channelsFirst"&&o.rank>1){let i=[0];for(let s=2;s<o.rank;++s)i.push(s);i.push(1),o=jt(o,i)}return xJ(o)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let r=super.getConfig();return Object.assign(e,r),e}}return t.className="Flatten",t})();ve.registerClass(NP);var AP=(()=>{class t extends Ct{constructor(e){super(e),this.supportsMasking=!0,this.activation=jl(e.activation)}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);return this.activation.apply(o)})}getConfig(){let e={activation:Vl(this.activation)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Activation",t})();ve.registerClass(AP);var RP=(()=>{class t extends Ct{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,r){return ne(()=>(e=ft(e),wJ(e,this.n)))}getConfig(){let e={n:this.n},r=super.getConfig();return Object.assign(e,r),e}}return t.className="RepeatVector",t})();ve.registerClass(RP);var OP=(()=>{class t extends Ct{constructor(e){super(e),this.targetShape=e.targetShape;for(let r=0;r<this.targetShape.length;++r)this.isUnknown(this.targetShape[r])&&(this.targetShape[r]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,r){let o="Total size of new array must be unchanged.",i=r.slice(),s=1,a=null;for(let c=0;c<i.length;++c){let u=i[c];if(this.isUnknown(u))if(a===null)a=c;else throw new te("Can only specifiy one unknown dimension.");else s*=u}let l=$a(e);if(a!==null){if(s===0||l%s!==0)throw new te(o);i[a]=l/s}else if(l!==s)throw new te(o);return i}computeOutputShape(e){let r=!1;for(let o=0;o<e.length;++o)if(this.isUnknown(e[o])){r=!0;break}return r?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e),i=o.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return $(o,s)})}getConfig(){let e={targetShape:this.targetShape},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Reshape",t})();ve.registerClass(OP);var FP=(()=>{class t extends Ct{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let r=Ui(1,e.dims.length+1);if(!x.arraysEqual(e.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new On({ndim:this.dims.length+1})]}computeOutputShape(e){e=Wt(e);let r=e.slice();return this.dims.forEach((o,i)=>{r[i+1]=e[o]}),r}call(e,r){return jt(ft(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Permute",t})();ve.registerClass(FP);var PP=(()=>{class t extends Ct{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={maskValue:this.maskValue};return Object.assign(r,e),r}computeMask(e,r){let o=ft(e);return Yh(Aa(o,this.maskValue),-1)}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e),a=Yh(Aa(o,this.maskValue),-1,!0);return L(o,ge(a,o.dtype))})}}return t.className="Masking",t})();ve.registerClass(PP);var BP=(()=>{class t extends Ct{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let r=null;e.batchSize!=null&&(r=e.batchSize),e.inputLength==null?this.batchInputShape=[r,null]:this.batchInputShape=[r].concat(Cn(e.inputLength))}this.inputDim=e.inputDim,Or(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Or(this.outputDim,"outputDim"),this.embeddingsInitializer=Rn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=$n(e.embeddingsRegularizer),this.activityRegularizer=$n(e.activityRegularizer),this.embeddingsConstraint=wr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,r){return ne(()=>this.maskZero?(e=ft(e),Aa(e,pt(e))):null)}computeOutputShape(e){if(e=Wt(e),this.inputLength==null)return[...e,this.outputDim];let r=Cn(this.inputLength);if(r.length!==e.length-1)throw new te(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let o=0;for(let i=0;i<r.length;++i){let s=r[i],a=e[i+1];if(s!=null&&a!=null&&s!==a)throw new te(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(r[o]=a),o++}}return[e[0],...r,this.outputDim]}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);o.dtype!=="int32"&&(o=Ti(o,"int32"));let i=ST(this.embeddings.read(),$(o,[o.size]));return $(i,Wt(this.computeOutputShape(o.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Un(this.embeddingsInitializer),embeddingsRegularizer:Tn(this.embeddingsRegularizer),activityRegularizer:Tn(this.activityRegularizer),embeddingsConstraint:vr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Embedding",t})();ve.registerClass(BP);var jp=class extends Ct{constructor(n){super(n||{}),this.supportsMasking=!0}mergeFunction(n){throw new bt}computeElementwiseOpOutputShape(n,e){if(n==null||e==null)return null;if(n.length<e.length)return this.computeElementwiseOpOutputShape(e,n);if(e.length===0)return n;let r=n.slice(0,n.length-e.length);for(let o=0;o<e.length;++o){let i=n[n.length-e.length+o],s=e[o];if(i==null||s==null||i<0||s<0)r.push(null);else if(i===1)r.push(s);else if(s===1)r.push(i);else{if(i!==s)throw new te("Operands could not be broadcast together with shapes "+JSON.stringify(n)+" "+JSON.stringify(e));r.push(i)}}return r}build(n){if(Array.isArray(n)&&!Array.isArray(n[0])&&(n=[Wt(n)]),n=n,n.length<2)throw new te(`A merge layer should be called on an Array of at least 2 inputs. Got ${n.length} input(s).`);let e=[];for(let i of n)i!=null&&i[0]!==null&&e.push(i[0]);if(e=La(e),e.length>1)throw new te(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(n)}.`);let r=n[0]==null?null:n[0].slice(1);for(let i=1;i<n.length;++i){let s=n[i]==null?null:n[i].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}let o=n.map(i=>i.length);n.indexOf(null)===-1&&La(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(n,e){return ne(()=>{if(n=n,this.reshapeRequired){let r=[],o=n.map(i=>i.rank);if(o.indexOf(null)===-1){let i=$l(o);for(let s of n){let a=s.rank;for(let l=0;l<i-a;++l)s=Pp(s,1);r.push(s)}return this.mergeFunction(r)}else{let i=!1;for(let l of n){let c=l.rank;if(c==null){let u=l.shape,d=u[0],p=u.slice(1).concat([d]),h=$(l,[d].concat($a(u.slice(1))));h=jt(h,[1,0]),h=$(h,p),r.push(h),i=!0}else if(c>1){let u=Ui(1,c).concat([0]);r.push(jt(l,u)),i=!0}else r.push(l)}let s=this.mergeFunction(r),a=s.rank;if(i){if(a==null){let l=s.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));s=$(jt($(s,[-1,u]),[1,0]),d)}else if(a>1){let l=[a-1].concat(Ui(0,a-1));s=jt(s,l)}}return s}}else return this.mergeFunction(n)})}computeOutputShape(n){n=n;let e;n[0]==null?e=null:e=n[0].slice(1);for(let o=1;o<n.length;++o){let i=n[o]==null?null:n[o].slice(1);e=this.computeElementwiseOpOutputShape(e,i)}let r=[];for(let o of n)o!=null&&o[0]!==null&&r.push(o[0]);return r=La(r),r.length===1?e=r.concat(e):e=[null].concat(e),e}computeMask(n,e){return ne(()=>{if(e==null)return null;if(!Array.isArray(e))throw new te("`mask` should be an Array");if(!Array.isArray(n))throw new te("`inputs` should be an Array");if(e.length!==n.length)throw new te(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${n.length} vs ${e.length})`);if(e.every(o=>o==null))return null;e=e.map(o=>o==null?o:gr(o,0));let r=e[0];for(let o=1;o<e.length-1;++o)r=No(r,e[o]);return r})}},LP=(()=>{class t extends jp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=fe(r,e[o]);return r})}}return t.className="Add",t})();ve.registerClass(LP);var $P=(()=>{class t extends jp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=L(r,e[o]);return r})}}return t.className="Multiply",t})();ve.registerClass($P);var VP=(()=>{class t extends jp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=fe(r,e[o]);return L(1/e.length,r)})}}return t.className="Average",t})();ve.registerClass(VP);var jP=(()=>{class t extends jp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0];for(let o=1;o<e.length;++o)r=ji(r,e[o]);return r})}}return t.className="Maximum",t})();ve.registerClass(jP);var zP=(()=>{class t extends jp{constructor(e){super(e)}mergeFunction(e){return ne(()=>{let r=e[0];for(let o=1;o<e.length;++o)r=Ls(r,e[o]);return r})}}return t.className="Minimum",t})();ve.registerClass(zP);var HP=(()=>{class t extends jp{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new te("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let r=!0;for(let i of e)if(i!=null){r=!1;break}if(r)return;let o=[];for(let i=0;i<e.length;++i){let s=e[i].slice();s.splice(this.axis,1);let a=!1;for(let l of o)if(x.arraysEqual(l,s)){a=!0;break}a||o.push(s)}if(o.length>1)throw new te("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ne(()=>_v(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new te("A `Concatenate` layer should be called on a list of inputs.");let r=e,o=r[0].slice(),i=this.axis<0?o.length+this.axis:this.axis;for(let s of r.slice(1)){if(o[i]==null||s[i]==null){o[i]=null;break}o[i]+=s[i]}return o}computeMask(e,r){if(r==null)return null;if(!Array.isArray(r))throw new te("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new te("`inputs` should be an array for Concatenate");if(r.length!==e.length)throw new te(`Mismatch in the length of mask (${r.length}) and the legnth of inputs (${e.length})`);return ne(()=>{let o=!0;if(r.forEach(a=>{if(a!=null){o=!1;return}}),o)return null;let i=[];for(let a=0;a<e.length;++a)r[a]==null?i.push(ge(co(e[a]),"bool")):r[a].rank<e[a].rank?i.push(gr(r[a],-1)):i.push(r[a]);let s=vn(i,this.axis);return h0(s,-1,!1)})}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Concatenate",t})();ve.registerClass(HP);function _k(t,n){for(;t<0;)t+=n;return t}function b3e(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new bt("batchDot is not implemented for tensors of 4D or higher rank yet");if(x.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),x.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${n.shape.length}`),typeof e=="number"&&(e=[e,e]),t.dtype==="complex64"||n.dtype==="complex64")throw new bt("batchDot is not implemented for complex64-type Tensors yet.");let r=t.shape.length,o=n.shape.length;e==null&&(e=[r-1,o-2]);let i=e;return ne(()=>{let s;if(r>o){s=r-o;let l=[];for(let c=0;c<s;++c)l.push(1);n=$(n,n.shape.concat(l))}else if(o>r){s=o-r;let l=[];for(let c=0;c<s;++c)l.push(1);t=$(t,t.shape.concat(l))}else s=0;let a;if(t.shape.length===2&&n.shape.length===2)i[0]===i[1]?a=Ge(L(t,n),i[0]):a=Ge(L(jt(t,[1,0]),n),i[1]);else{let l=i[0]!==t.shape.length-1,c=i[1]===n.shape.length-1;a=Vt(t,n,l,c)}if(s>0){let l;r>o?l=r+o-3:l=r-1;let c=[];for(let u=l;u<l+s;++u)c.push(u);a=cs(a,c)}return a.shape.length===1&&(a=gr(a,1)),a})}var UP=(()=>{class t extends jp{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){x.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0],o=e[1];if(r.length>3||o.length>3)throw new bt("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(r,o);if(r[i[0]]!==o[i[1]])throw new te(`Dimension incompatibility: ${r[i[0]]} !== ${o[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new te(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let r=e[0],o=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,a)=>_k(s,e[a].shape.length)):i=[_k(this.axes,r.shape.length),_k(this.axes,o.shape.length)],this.normalize&&(r=uk(r,i[0]),o=uk(o,i[1])),b3e(r,o,i)}interpretAxes(e,r){let o;return Array.isArray(this.axes)?o=this.axes:o=[_k(this.axes,e.length),_k(this.axes,r.length)],o}computeOutputShape(e){x.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0].slice(),o=e[1].slice();if(r.length>3||o.length>3)throw new bt("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(r,o);r.splice(i[0],1),o.splice(i[1],1),o.splice(0,1);let s=r.concat(o);return s.length===1&&s.push(1),s}computeMask(e,r){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Dot",t})();ve.registerClass(UP);var GP=(()=>{class t extends Ct{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={stddev:this.stddev};return Object.assign(r,e),r}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);return pf(()=>fe(kv(o.shape,0,this.stddev),o),()=>o,r.training||!1)})}}return t.className="GaussianNoise",t})();ve.registerClass(GP);var WP=(()=>{class t extends Ct{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return ne(()=>{this.invokeCallHook(e,r);let o=ft(e);return this.rate>0&&this.rate<1?pf(()=>{let s=Math.sqrt(this.rate/(1-this.rate));return L(o,kv(o.shape,1,s))},()=>o,r.training||!1):o})}}return t.className="GaussianDropout",t})();ve.registerClass(WP);var qP=(()=>{class t extends Ct{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||ft(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return ne(()=>{if(this.rate<1&&this.rate>0){let o=this._getNoiseShape(e);return pf(()=>{let s=ft(e),c=-1.6732632423543772*1.0507009873554805,u=bi(ls(o),this.rate);u=Ti(u,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,h=fe(L(s,u),L(fe(u,-1),c));return fe(L(h,d),p)},()=>ft(e),r.training||!1)}return e})}}return t.className="AlphaDropout",t})();ve.registerClass(qP);function kk(t,n,e,r,o,i=.001){let s;if(t.rank===2)s=d_(t,n,e,r,o,i);else if(t.rank===3)s=p_(t,n,e,r,o,i);else if(t.rank===4)s=h_(t,n,e,r,o,i);else throw new bt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function C3e(t,n,e,r,o=.001){return ne(()=>{let i=ef(t,r),s=i.mean,a=i.variance;return[kk(t,s,a,e,n,o),s,a]})}function S3e(t,n,e,r,o=.001){return ne(()=>{let i=ef(t,r),s=i.mean,a=i.variance,l=[];for(let f of Ui(0,t.rank))r.indexOf(f)!==-1?l.push(1):l.push(t.shape[f]);let c=$(s,l),u=$(a,l),d=n==null?null:$(n,l),p=e==null?null:$(e,l);return[kk(t,c,u,p,d,o),s,a]})}function M3e(t,n,e,r,o=.001){return x.arraysEqual(r.slice().sort(),Ui(0,t.rank-1))?C3e(t,n,e,r,o):S3e(t,n,e,r,o)}var KP=(()=>{class t extends Ct{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Rn(e.betaInitializer||"zeros"),this.gammaInitializer=Rn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Rn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Rn(e.movingVarianceInitializer||"ones"),this.betaConstraint=wr(e.betaConstraint),this.gammaConstraint=wr(e.gammaConstraint),this.betaRegularizer=$n(e.betaRegularizer),this.gammaRegularizer=$n(e.gammaRegularizer)}build(e){e=Wt(e);let r=this.axis>=0?this.axis:this.axis+e.length,o=e[r];if(o==null)throw new te(`Axis ${r} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new On({ndim:e.length,axes:{[r]:o}})];let i=[o];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,r){return ne(()=>{let o=r.training==null?!1:r.training,i=ft(e),s=i.shape,a=s.length,l=Ui(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);let u=Pa(1,a);u[c]=s[c];let d=l.slice();d.sort();let p=!x.arraysEqual(d,Ui(0,a).slice(0,a-1)),h=()=>{if(p){let y=$(this.movingMean.read(),u),_=$(this.movingVariance.read(),u),k=this.center?$(this.beta.read(),u):null,T=this.scale?$(this.gamma.read(),u):null;return kk(i,y,_,k,T,this.epsilon)}else return kk(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!o)return h();let[f,m,g]=M3e(i,this.gamma.read(),this.beta.read(),l,this.epsilon),v=(y,_,k)=>{ne(()=>{let T=1-k,I=y.read(),A=L(Be(I,_),T);y.write(Be(I,A))})};return(()=>{v(this.movingMean,m,this.momentum),v(this.movingVariance,g,this.momentum)})(),f})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Un(this.betaInitializer),gammaInitializer:Un(this.gammaInitializer),movingMeanInitializer:Un(this.movingMeanInitializer),movingVarianceInitializer:Un(this.movingVarianceInitializer),betaRegularizer:Tn(this.betaRegularizer),gammaRegularizer:Tn(this.gammaRegularizer),betaConstraint:vr(this.betaConstraint),gammaConstraint:vr(this.gammaConstraint)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="BatchNormalization",t})();ve.registerClass(KP);var ZP=(()=>{class t extends Ct{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let r of this.axis)if(!Number.isInteger(r))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Rn(e.betaInitializer||"zeros"),this.gammaInitializer=Rn(e.gammaInitializer||"ones"),this.betaRegularizer=$n(e.betaRegularizer),this.gammaRegularizer=$n(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Wt(e);let r=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=r);for(let s of this.axis)if(s<0||s>=r)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==La(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let o=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,r){let o=ft(e),i=o.shape,s=i.length;return ne(()=>{let{mean:l,variance:c}=ef(o,this.axis,!0),u=Pa(1,s);for(let g of this.axis)u[g]=i[g];let d=g=>g!=null&&g.shape.length!==s?$(g,u):g,p=this.scale?d(this.gamma.read()):null,h=this.center?d(this.beta.read()):null,f=[],m=[];for(let g=0;g<s;++g)this.axis.indexOf(g)!==-1?(f.push(i[g]),m.push(1)):(f.push(1),m.push(i[g]));return l=Io(l,f),c=Io(c,f),p!=null&&(p=Io(p,m)),h!=null&&(h=Io(h,m)),kk(o,l,c,h,p,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Un(this.betaInitializer),gammaInitializer:Un(this.gammaInitializer),betaRegularizer:Tn(this.betaRegularizer),gammaRegularizer:Tn(this.gammaRegularizer)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="LayerNormalization",t})();ve.registerClass(ZP);function T3e(t,n,e){return ne(()=>{if(t.rank!==4)throw new te(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(n==null&&(n=[[1,1],[1,1]]),n.length!==2||n[0].length!==2||n[1].length!==2)throw new te("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=Gi()),e!=="channelsLast"&&e!=="channelsFirst")throw new te(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return e==="channelsFirst"?r=[[0,0],[0,0],n[0],n[1]]:r=[[0,0],n[0],n[1],[0,0]],Si(t,r)})}var XP=(()=>{class t extends Ct{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Gi():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new te(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let r,o;if(typeof e.padding[0]=="number")r=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new te(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(r=e.padding[0],e.padding[1].length!==2)throw new te(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);o=e.padding[1]}this.padding=[r,o]}this.inputSpec=[new On({ndim:4})]}computeOutputShape(e){e=Wt(e);let r,o;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?r=e[2]+this.padding[0][0]+this.padding[0][1]:r=null,e[3]!=null&&e[3]>=0?o=e[3]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],e[1],r,o]):(e[1]!=null&&e[1]>=0?r=e[1]+this.padding[0][0]+this.padding[0][1]:r=null,e[2]!=null&&e[2]>=0?o=e[2]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],r,o,e[3]])}call(e,r){return ne(()=>T3e(ft(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ZeroPadding2D",t})();ve.registerClass(XP);function pD(t,n,e,r,o,i){return ne(()=>{or(o),A8(i),Hi(r),e==null&&(e=[1,1]),r==null&&(r="valid"),o==null&&(o=Gi()),i==null&&(i="max"),t=xk(t,o);let s,a=r==="same"?"same":"valid";return i==="max"?s=Mp(t,n,e,a):s=vp(t,n,e,a),o==="channelsFirst"&&(s=jt(s,[0,3,1,2])),s})}function aee(t,n,e,r,o,i){return ne(()=>{or(o),A8(i),Hi(r),e==null&&(e=[1,1,1]),r==null&&(r="valid"),o==null&&(o=Gi()),i==null&&(i="max"),t=mP(t,o);let s,a=r==="same"?"same":"valid";return i==="max"?s=P_(t,n,e,a):s=u_(t,n,e,a),o==="channelsFirst"&&(s=jt(s,[0,4,1,2,3])),s})}var aD=class extends Ct{constructor(n){if(n.poolSize==null&&(n.poolSize=2),super(n),typeof n.poolSize=="number")this.poolSize=[n.poolSize];else if(Array.isArray(n.poolSize)&&n.poolSize.length===1&&typeof n.poolSize[0]=="number")this.poolSize=n.poolSize;else throw new te(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.poolSize)}`);if(Or(this.poolSize,"poolSize"),n.strides==null)this.strides=this.poolSize;else if(typeof n.strides=="number")this.strides=[n.strides];else if(Array.isArray(n.strides)&&n.strides.length===1&&typeof n.strides[0]=="number")this.strides=n.strides;else throw new te(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.strides)}`);Or(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,Hi(this.padding),this.inputSpec=[new On({ndim:3})]}computeOutputShape(n){n=Wt(n);let e=ds(n[1],this.poolSize[0],this.padding,this.strides[0]);return[n[0],e,n[2]]}call(n,e){return ne(()=>{this.invokeCallHook(n,e),n=Pp(ft(n),2);let r=this.poolingFunction(ft(n),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return cs(r,[2])})}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(n,e),n}},YP=(()=>{class t extends aD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return or(s),Hi(i),pD(e,r,o,i,s,"max")}}return t.className="MaxPooling1D",t})();ve.registerClass(YP);var QP=(()=>{class t extends aD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return or(s),Hi(i),pD(e,r,o,i,s,"avg")}}return t.className="AveragePooling1D",t})();ve.registerClass(QP);var lD=class extends Ct{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==2)throw new te(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides];Or(this.poolSize,"poolSize"),Or(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,or(this.dataFormat),Hi(this.padding),this.inputSpec=[new On({ndim:4})]}computeOutputShape(n){n=Wt(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],r=this.dataFormat==="channelsFirst"?n[3]:n[2];return e=ds(e,this.poolSize[0],this.padding,this.strides[0]),r=ds(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,r]:[n[0],e,r,n[3]]}call(n,e){return ne(()=>(this.invokeCallHook(n,e),this.poolingFunction(ft(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},JP=(()=>{class t extends lD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return or(s),Hi(i),pD(e,r,o,i,s,"max")}}return t.className="MaxPooling2D",t})();ve.registerClass(JP);var eB=(()=>{class t extends lD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return or(s),Hi(i),pD(e,r,o,i,s,"avg")}}return t.className="AveragePooling2D",t})();ve.registerClass(eB);var cD=class extends Ct{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==3)throw new te(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides,n.strides];Or(this.poolSize,"poolSize"),Or(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,or(this.dataFormat),Hi(this.padding),this.inputSpec=[new On({ndim:5})]}computeOutputShape(n){n=Wt(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],r=this.dataFormat==="channelsFirst"?n[3]:n[2],o=this.dataFormat==="channelsFirst"?n[4]:n[3];return e=ds(e,this.poolSize[0],this.padding,this.strides[0]),r=ds(r,this.poolSize[1],this.padding,this.strides[1]),o=ds(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,r,o]:[n[0],e,r,o,n[4]]}call(n,e){return ne(()=>(this.invokeCallHook(n,e),this.poolingFunction(ft(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},tB=(()=>{class t extends cD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return or(s),Hi(i),aee(e,r,o,i,s,"max")}}return t.className="MaxPooling3D",t})();ve.registerClass(tB);var nB=(()=>{class t extends cD{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return or(s),Hi(i),aee(e,r,o,i,s,"avg")}}return t.className="AveragePooling3D",t})();ve.registerClass(nB);var uD=class extends Ct{constructor(n){super(n),this.inputSpec=[new On({ndim:3})]}computeOutputShape(n){return[n[0],n[2]]}call(n,e){throw new bt}},rB=(()=>{class t extends uD{constructor(e){super(e||{})}call(e,r){return ne(()=>{let o=ft(e);return Bn(o,1)})}}return t.className="GlobalAveragePooling1D",t})();ve.registerClass(rB);var oB=(()=>{class t extends uD{constructor(e){super(e||{})}call(e,r){return ne(()=>{let o=ft(e);return vo(o,1)})}}return t.className="GlobalMaxPooling1D",t})();ve.registerClass(oB);var dD=class extends Ct{constructor(n){super(n),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,or(this.dataFormat),this.inputSpec=[new On({ndim:4})]}computeOutputShape(n){return n=n,this.dataFormat==="channelsLast"?[n[0],n[3]]:[n[0],n[1]]}call(n,e){throw new bt}getConfig(){let n={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},iB=(()=>{class t extends dD{call(e,r){return ne(()=>{let o=ft(e);return this.dataFormat==="channelsLast"?Bn(o,[1,2]):Bn(o,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();ve.registerClass(iB);var sB=(()=>{class t extends dD{call(e,r){return ne(()=>{let o=ft(e);return this.dataFormat==="channelsLast"?vo(o,[1,2]):vo(o,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();ve.registerClass(sB);var hD=class extends Ct{constructor(n){super(n),this.layer=n.layer}build(n){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(n){this.layer!=null&&(this.layer.trainable=n)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(n){this.layer.setWeights(n)}getConfig(){let n={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(n,e),n}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(n)}static fromConfig(n,e,r={}){let o=e.layer,i=Ki(o,r);delete e.layer;let s={layer:i};return Object.assign(s,e),new n(s)}},aB=(()=>{class t extends hD{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Wt(e),e.length<3)throw new te(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let r=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Wt(e);let r=[e[0]].concat(e.slice(2)),o=this.layer.computeOutputShape(r),i=e[1];return[o[0],i].concat(o.slice(1))}call(e,r){return ne(()=>(e=ft(e),CP((a,l)=>[ft(this.layer.call(a,r)),[]],e,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();ve.registerClass(aB);function D3e(t){Nu(hJ,"BidirectionalMergeMode",t)}var E3e="concat",lB=(()=>{class t extends hD{constructor(e){super(e);let r=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=r,this.forwardLayer=Ki(o),r.goBackwards=r.goBackwards!==!0;let i={};if(i.className=e.layer.getClassName(),i.config=r,this.backwardLayer=Ki(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?E3e:e.mergeMode,D3e(this.mergeMode),e.weights)throw new bt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let r=e.length,o=Math.floor(r/2);this.forwardLayer.setWeights(e.slice(0,o)),this.backwardLayer.setWeights(e.slice(o))}computeOutputShape(e){let r=this.forwardLayer.computeOutputShape(e);Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),r=r;let o,i,s;return this.returnState&&(s=r.slice(1)),o=r[0],o=o,this.mergeMode==="concat"?(o[o.length-1]*=2,i=[o]):this.mergeMode==null?i=[o,o.slice()]:i=[o],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[o].concat(s).concat(s.slice()):Ro(i)}apply(e,r){let o=r==null?null:r.initialState,i=r==null?null:r.constants;r==null&&(r={});let s=bP(e,o,i,this.numConstants);if(e=s.inputs,o=s.initialState,i=s.constants,Array.isArray(e)&&(o=e.slice(1),e=e[0]),(o==null||o.length===0)&&i==null)return super.apply(e,r);let a=[],l=[];if(o!=null){let u=o.length;if(u%2>0)throw new te("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=o,a.push(...o);let d=o.map(p=>new On({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(i!=null)throw new bt("Support for constants in Bidirectional layers is not implemented yet.");let c=a[0]instanceof pi;for(let u of a)if(u instanceof pi!==c)throw new te("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,r);return this.inputSpec=p,h}else return super.apply(e,r)}call(e,r){return ne(()=>{let o=r.initialState,i,s;if(o==null)i=this.forwardLayer.call(e,r),s=this.backwardLayer.call(e,r);else{let c=o.slice(0,o.length/2),u=o.slice(o.length/2);i=this.forwardLayer.call(e,Object.assign(r,{initialState:c})),s=this.backwardLayer.call(e,Object.assign(r,{initialState:u}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Qr(s,1));let l;return this.mergeMode==="concat"?l=_v([i,s]):this.mergeMode==="sum"?l=fe(i,s):this.mergeMode==="ave"?l=L(.5,fe(i,s)):this.mergeMode==="mul"?l=L(i,s):this.mergeMode==null&&(l=[i,s]),this.returnState?this.mergeMode==null?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ll(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ll(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,r){Array.isArray(r)&&(r=r[0]);let o;if(this.returnSequences?this.mergeMode==null?o=[r,r]:o=r:this.mergeMode==null?o=[null,null]:o=null,this.returnState){let s=this.forwardLayer.states.map(a=>null);return Array.isArray(o)?o.concat(s).concat(s):[o].concat(s).concat(s)}else return o}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},r=super.getConfig();return Object.assign(e,r),e}static fromConfig(e,r){let o=Ki(r.layer);if(delete r.layer,r.numConstants!=null)throw new bt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let i=r;return i.layer=o,new e(i)}}return t.className="Bidirectional",t})();ve.registerClass(lB);var cB=(()=>{class t extends Ct{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},r=super.getConfig();return Object.assign(e,r),e}call(e,r){return ne(()=>(e=ft(e),e.dtype!=="float32"&&(e=Ti(e,"float32")),fe(L(e,this.scale),this.offset)))}}return t.className="Rescaling",t})();ve.registerClass(cB);var{resizeBilinear:I3e,cropAndResize:N3e}=Mi,uB=(()=>{class t extends Ct{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,r,o,i,s,a,l,c){return ne(()=>{let u,d=!1,p=r/a,h=o/l,f=(i+r)/a,m=(s+o)/l,g=[p,h,f,m],v=[];e.rank===3?(d=!0,u=Qn([e])):u=e;for(let T=0;T<u.shape[0];T++)v.push(g);let w=Yr(v,[v.length,4]),y=Pl(0,v.length,1,"int32"),k=N3e(u,w,y,[i,s],"nearest");return d?Ti(ft(eo(k)),c):Ti(k,c)})}upsize(e,r,o,i){return ne(()=>{let s=I3e(e,[r,o]);return Ti(s,i)})}call(e,r){return ne(()=>{let o=ft(e),i=o.dtype,s=o.shape,a=s[s.length-3],l=s[s.length-2],c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),u===0&&(u=1)),c>=0&&u>=0?this.centerCrop(o,c,u,this.height,this.width,a,l,i):this.upsize(e,this.height,this.width,i)})}getConfig(){let e={height:this.height,width:this.width},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){e=Wt(e);let r=e.length-3,o=e.length-2;return e[r]=this.height,e[o]=this.width,e}}return t.className="CenterCrop",t})();ve.registerClass(uB);function lee(t,n,e,r){let o=ft(t);if(o.dtype!=="int32"&&(o=Ti(o,"int32")),n==="int")return o;let i=o.shape;if(o.rank===0&&(o=gr(o,-1)),n==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=gr(o,-1)),o.rank>2)throw new te(`When outputMode is not int, maximum output rank is 2 Received outputMode ${n} and input shape ${i} which would result in output rank ${o.rank}.`);let s=["multiHot","oneHot"].includes(n),a=o,l;if(typeof r<"u"&&n==="count"?l=dv(a,r,e,s):l=dv(a,[],e,s),n!=="tfIdf")return l;if(r)return L(l,r);throw new te("When outputMode is 'tfIdf', weights must be provided.")}var dB=(()=>{class t extends Ct{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){return e=Wt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,r){return ne(()=>{e=ft(e),e.dtype!=="int32"&&(e=Ti(e,"int32"));let o;if(typeof r.countWeights<"u"){if(this.outputMode!=="count")throw new te(`countWeights is not used when outputMode !== count.
              Received countWeights=${r.countWeights}`);o=ft(r.countWeights)}let i=vo(e),s=Cu(e),a=Yn(this.numTokens,i).bufferSync().get(0),l=bi(s,0).bufferSync().get(0);if(!(a&&l))throw new te(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return lee(e,this.outputMode,this.numTokens,o)})}}return t.className="CategoryEncoding",t})();ve.registerClass(dB);var R3e=["bilinear","nearest"],cee=new Set(R3e),pB=(()=>{class t extends Ct{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(cee.has(e.interpolation))this.interpolation=e.interpolation;else throw new te(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Wt(e);let r=e[2];return[this.height,this.width,r]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},r=super.getConfig();return Object.assign(e,r),e}call(e,r){return ne(()=>{let o=[this.height,this.width];if(this.interpolation==="bilinear")return Mi.resizeBilinear(e,o,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Mi.resizeNearestNeighbor(e,o,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...cee]} are supported`)})}}return t.className="Resizing",t})();ve.registerClass(pB);var uee=(()=>{class t{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var dee=(()=>{class t extends Ct{constructor(e){super(e),this.randomGenerator=new uee(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},r=super.getConfig();return Object.assign(e,r),e}}return t.className="BaseRandomLayer",t})();var O3e=["bilinear","nearest"],pee=new Set(O3e),hB=(()=>{class t extends dee{constructor(e){super(e);let{factor:r,interpolation:o="bilinear"}=e;if(this.factor=r,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new te(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new te(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new te(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(o)if(pee.has(o))this.interpolation=o;else throw new te(`Invalid interpolation parameter: ${o} is not implemented`)}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){e=Wt(e);let r=e[2];return[this.imgHeight,-1,r]}call(e,r){return ne(()=>{let o=ft(e);this.imgHeight=o.shape[o.shape.length-3];let i=o.shape[o.shape.length-2];this.widthFactor=ls([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);let a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Mi.resizeBilinear(e,a);case"nearest":return Mi.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...pee]} are supported`)}})}}return t.className="RandomWidth",t})();ve.registerClass(hB);function F3e(t){return new hf(t)}function P3e(t){return new pP(t)}function B3e(t){return new cP(t)}function L3e(t){return new uP(t)}function $3e(t){return new dP(t)}function V3e(t){return new fP(t)}function j3e(t){return new hP(t)}function z3e(t){return new yP(t)}function H3e(t){return new eD(t)}function U3e(t){return new gP(t)}function G3e(t){return new tD(t)}function W3e(t){return new vP(t)}function q3e(t){return new wP(t)}function K3e(t){return new xP(t)}function Z3e(t){return new _P(t)}function X3e(t){return new kP(t)}function Y3e(t){return new AP(t)}function Q3e(t){return new IP(t)}function J3e(t){return new sD(t)}function eNe(t){return new EP(t)}function tNe(t){return new NP(t)}function nNe(t){return new RP(t)}function rNe(t){return new OP(t)}function oNe(t){return new FP(t)}function iNe(t){return new BP(t)}function sNe(t){return new LP(t)}function aNe(t){return new VP(t)}function lNe(t){return new HP(t)}function cNe(t){return new jP(t)}function uNe(t){return new zP(t)}function dNe(t){return new $P(t)}function pNe(t){return new UP(t)}function hNe(t){return new KP(t)}function fNe(t){return new ZP(t)}function mNe(t){return new XP(t)}function fB(t){return new QP(t)}function gNe(t){return fB(t)}function vNe(t){return fB(t)}function mB(t){return new eB(t)}function wNe(t){return mB(t)}function yNe(t){return mB(t)}function gB(t){return new nB(t)}function xNe(t){return gB(t)}function _Ne(t){return gB(t)}function kNe(t){return new rB(t)}function bNe(t){return new iB(t)}function hee(t){return new oB(t)}function fee(t){return new sB(t)}function mee(t){return new YP(t)}function gee(t){return new JP(t)}function CNe(t){return new tB(t)}function SNe(t){return new MP(t)}function MNe(t){return new rD(t)}function TNe(t){return new TP(t)}function DNe(t){return new Rv(t)}function ENe(t){return new SP(t)}function INe(t){return new nD(t)}function NNe(t){return new DP(t)}function ANe(t){return new iD(t)}function RNe(t){return new Hl(t)}function ONe(t){return new oD(t)}function FNe(t){return new lB(t)}function PNe(t){return new aB(t)}var BNe=hee,LNe=fee,$Ne=mee,VNe=gee;function jNe(t){return new GP(t)}function zNe(t){return new WP(t)}function HNe(t){return new qP(t)}function UNe(t){return new PP(t)}function GNe(t){return new cB(t)}function WNe(t){return new uB(t)}function qNe(t){return new pB(t)}function KNe(t){return new dB(t)}function ZNe(t){return new hB(t)}var wB={};Jt(wB,{MAPE:()=>sAe,MSE:()=>cAe,binaryAccuracy:()=>XNe,binaryCrossentropy:()=>YNe,categoricalAccuracy:()=>JNe,categoricalCrossentropy:()=>eAe,cosineProximity:()=>rAe,mape:()=>aAe,meanAbsoluteError:()=>oAe,meanAbsolutePercentageError:()=>iAe,meanSquaredError:()=>lAe,mse:()=>uAe,precision:()=>tAe,r2Score:()=>dAe,recall:()=>nAe,sparseCategoricalAccuracy:()=>QNe});function XNe(t,n){return hk(t,n)}function YNe(t,n){return zT(t,n)}function QNe(t,n){return HT(t,n)}function JNe(t,n){return fk(t,n)}function eAe(t,n){return mk(t,n)}function tAe(t,n){return eP(t,n)}function nAe(t,n){return PJ(t,n)}function rAe(t,n){return pk(t,n)}function oAe(t,n){return Tv(t,n)}function iAe(t,n){return ff(t,n)}function sAe(t,n){return ff(t,n)}function aAe(t,n){return ff(t,n)}function lAe(t,n){return Ou(t,n)}function cAe(t,n){return Ou(t,n)}function uAe(t,n){return Ou(t,n)}function dAe(t,n){return BJ(t,n)}var yB={};Jt(yB,{modelFromJSON:()=>QJ});var xB={};Jt(xB,{l1:()=>hAe,l1l2:()=>pAe,l2:()=>fAe});function pAe(t){return new wk(t)}function hAe(t){return oee(t)}function fAe(t){return iee(t)}var bk=class extends Lp{constructor(){super(...arguments),this.model=null}setModel(n){if(!(n instanceof za))throw new Error("model must be a LayersModel, not some other Container");this.model=n}};function fD(t,n){return t<n}function vee(t,n){return t>n}var Ck=class extends bk{constructor(n){if(super(),n==null&&(n={}),n.restoreBestWeights)throw new bt("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=n.monitor||"val_loss",this.minDelta=Math.abs(n.minDelta||0),this.patience=n.patience||0,this.verbose=n.verbose||0,this.mode=n.mode||"auto",this.baseline=n.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=fD:this.mode==="max"?this.monitorFunc=vee:this.monitor.indexOf("acc")!==-1?this.monitorFunc=vee:this.monitorFunc=fD,this.monitorFunc===fD&&(this.minDelta*=-1)}onTrainBegin(n){return z(this,null,function*(){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===fD?1/0:-1/0})}onEpochEnd(n,e){return z(this,null,function*(){yield Ru(e);let r=this.getMonitorValue(e);r!=null&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=n,this.model.stopTraining=!0)))})}onTrainEnd(n){return z(this,null,function*(){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)})}getMonitorValue(n){n==null&&(n={});let e=n[this.monitor];return e==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(n)}`),e}};function mAe(t){return new Ck(t)}var wee={earlyStopping:mAe};var gAe=ee();gAe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var $s=function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t}($s||{}),yee;(function(t){let n;(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(yee||(yee={}));var _B={};function xee(t,n){let e={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:n};_B[t]=e}function mD(t){return _B[t]}function _ee(t){delete _B[t]}function C(t,n,e,r,o){let i=n.inputParams[t];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?n.inputNames.length+a:a;if(i.type==="tensor")return ro(n.inputNames[c],e,r,o);if(i.type==="tensors"){let p=n.inputs.slice(a,l);return n.inputNames.slice(a,l).filter((f,m)=>{var g;return((g=p[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(f=>ro(f,e,r,o))}let u=ro(n.inputNames[c],e,r,o),d=u.dataSync();return i.type==="number"?d[0]:x.toNestedArray(u.shape,d)}let s=n.attrParams[t];return s&&s.value}function ro(t,n,e,r){let[o,i]=Zi(t,e);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=e.currentContextIds.find(a=>!!n[gD(o,a)]);return s!==void 0?n[gD(o,s)][i]:void 0}function kB(t,n,e){return n[gD(t,e.currentContextId)]}function Ul(t,n){let[e,r,o]=Zi(t,n);return[gD(e,n&&n.currentContextId),r,o]}function gD(t,n){return n?`${t}-${n}`:t}function Zi(t,n){if(t==="")return["",0,void 0];let e=n!=null&&n.parseNodeNameCache!=null;if(e){let i=n.parseNodeNameCache.get(t);if(i!=null)return i}let r=t.split(":"),o;if(r.length===1)o=[t,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return e&&n.parseNodeNameCache.set(t,o),o}function Sk(t,n,e){let r=C("pad",t,n,e);if(r==="explicit"){r=C("explicitPaddings",t,n,e);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Gl(t){return t.kept?t:ki(t)}var bB={};Jt(bB,{json:()=>wAe});var wAe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var CB={};Jt(CB,{json:()=>yAe});var yAe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var SB={};Jt(SB,{json:()=>xAe});var xAe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var MB={};Jt(MB,{json:()=>_Ae});var _Ae=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var TB={};Jt(TB,{json:()=>kAe});var kAe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var DB={};Jt(DB,{json:()=>bAe});var bAe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var EB={};Jt(EB,{json:()=>CAe});var CAe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var IB={};Jt(IB,{json:()=>SAe});var SAe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var NB={};Jt(NB,{json:()=>MAe});var MAe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var AB={};Jt(AB,{json:()=>TAe});var TAe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var RB={};Jt(RB,{json:()=>DAe});var DAe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var OB={};Jt(OB,{json:()=>EAe});var EAe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var FB={};Jt(FB,{json:()=>IAe});var IAe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var PB={};Jt(PB,{json:()=>NAe});var NAe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var BB={};Jt(BB,{json:()=>AAe});var AAe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var LB={};Jt(LB,{json:()=>RAe});var RAe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var $B={};Jt($B,{json:()=>OAe});var OAe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var VB={};Jt(VB,{json:()=>FAe});var FAe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var jB={};Jt(jB,{json:()=>PAe});var PAe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var Mk=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let n=[bB,CB,SB,MB,TB,DB,EB,IB,NB,AB,RB,OB,FB,PB,BB,LB,$B,VB,jB],e=[].concat(...n.map(r=>r.json));this.opMappers=e.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(n,e={}){let r=n.node,o=[],i=[],s=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?o.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&s.push(m[g.name]),m),{}),l=[],c=[],u={},d={};e!=null&&(u=this.mapSignatureEntries(e.inputs),d=this.mapSignatureEntries(e.outputs));let p=Object.keys(a);p.forEach(m=>{let g=a[m];g.inputNames.forEach((v,w)=>{let[y,,_]=Ul(v),k=a[y];if(k.outputs!=null){let T=k.outputs.indexOf(_);if(T!==-1){let I=`${y}:${T}`;g.inputNames[w]=I}}g.inputs.push(k),k.children.push(g)})}),Object.keys(d).length===0?p.forEach(m=>{let g=a[m];g.children.length===0&&c.push(g)}):Object.keys(d).forEach(m=>{let[g]=Ul(m),v=a[g];v!=null&&(v.signatureKey=d[m],c.push(v))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{let[g]=Ul(m),v=a[g];v&&(v.signatureKey=u[m],l.push(v))}):l=o;let h={};n.library!=null&&n.library.function!=null&&(h=n.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));let f={nodes:a,inputs:l,outputs:c,weights:i,placeholders:o,signature:e,functions:h};return s.length>0&&(f.initNodes=s),f}mapSignatureEntries(n){return Object.keys(n||{}).reduce((e,r)=>(e[n[r].name]=r,e),{})}mapNode(n){let e=mD(n.op)||this.opMappers[n.op]||{};n.attr==null&&(n.attr={});let r={name:n.name,op:n.op,category:e.category,inputNames:(n.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:n.attr,outputs:e.outputs};return e.inputs!=null&&(r.inputParams=e.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),e.attrs!=null&&(r.attrParams=e.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=vD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=vD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=CD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=CD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=yD(n.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=yD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=bD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=bD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=wD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=wD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=MD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=MD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=kD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=kD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=SD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=SD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=xD(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=xD(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=_D(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=_D(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=kee(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=kee(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${n.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(n){let e=n.nodeDef,r=[],o=[],i={};e!=null&&(i=e.reduce((d,p)=>(d[p.name]=this.mapNode(p),p.op==="Const"&&o.push(d[p.name]),d),{}));let s=[],a=[];n.signature.inputArg.forEach(d=>{let[p]=Ul(d.name),h={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:zB(d.type),type:"dtype"}},children:[]};h.signatureKey=d.name,s.push(h),i[p]=h}),Object.keys(i).forEach(d=>{let p=i[d];p.inputNames.forEach((h,f)=>{let[m,,g]=Ul(h),v=i[m];if(v.outputs!=null){let w=v.outputs.indexOf(g);if(w!==-1){let y=`${m}:${w}`;p.inputNames[f]=y}}p.inputs.push(v),v.children.push(p)})});let c=n.ret;n.signature.outputArg.forEach(d=>{let[p,h]=Ul(c[d.name]),f=i[p];f!=null&&(f.defaultOutput=h,a.push(f))});let u=this.mapArgsToSignature(n);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:u}}mapArgsToSignature(n){return{methodName:n.signature.name,inputs:n.signature.inputArg.reduce((e,r)=>(e[r.name]=this.mapArgToTensorInfo(r),e),{}),outputs:n.signature.outputArg.reduce((e,r)=>(e[r.name]=this.mapArgToTensorInfo(r,n.ret),e),{})}}mapArgToTensorInfo(n,e){let r=n.name;return e!=null&&(r=e[r]),{name:r,dtype:n.type}}};function BAe(t){let n=ee().global;if(typeof n.atob<"u")return n.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function bee(t,n){let e=Array.isArray(t)?String.fromCharCode.apply(null,t):BAe(t);return n?e:e.toLowerCase()}function vD(t,n,e,r=!1){let o=t[n];return o!=null?bee(o.s,r):e}function wD(t,n,e){let r=t[n];return r?r.b:e}function yD(t,n,e){let r=t[n]||{},o=r.i!=null?r.i:r.f!=null?r.f:e;return typeof o=="number"?o:parseInt(o,10)}function zB(t){switch(typeof t=="string"&&(t=$s[t]),t){case $s.DT_FLOAT:case $s.DT_HALF:return"float32";case $s.DT_INT32:case $s.DT_INT64:case $s.DT_INT8:case $s.DT_UINT8:return"int32";case $s.DT_BOOL:return"bool";case $s.DT_DOUBLE:return"float32";case $s.DT_STRING:return"string";case $s.DT_COMPLEX64:case $s.DT_COMPLEX128:return"complex64";default:return null}}function kee(t,n,e){let r=t[n];return r&&r.func?r.func.name:e}function xD(t,n,e){let r=t[n];return r&&r.type?zB(r.type):e}function _D(t,n,e){let r=t[n];return r&&r.list&&r.list.type?r.list.type.map(o=>zB(o)):e}function Cee(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(n=>typeof n.size=="number"?n.size:parseInt(n.size,10)):[]}function kD(t,n,e){let r=t[n];return r&&r.shape?Cee(r.shape):e}function bD(t,n,e){let r=t[n];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):e}function CD(t,n,e,r=!1){let o=t[n];return o&&o.list&&o.list.s?o.list.s.map(i=>bee(i,r)):e}function SD(t,n,e){let r=t[n];return r&&r.list&&r.list.shape?r.list.shape.map(o=>Cee(o)):e}function MD(t,n,e){let r=t[n];return r&&r.list&&r.list.b?r.list.b:e}var TD=class{constructor(n,e,r){this.node=n,this.tensorMap=e,this.context=r,this.inputs=[],this.attrs={},this.inputs=n.inputNames.map(o=>this.getInput(o)),n.rawAttrs!=null&&(this.attrs=Object.keys(n.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(n){return ro(n,this.tensorMap,this.context)}getAttr(n,e){let r=this.node.rawAttrs[n];if(r.tensor!=null)return ro(n,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return yD(this.node.rawAttrs,n,e);if(r.s!=null)return vD(this.node.rawAttrs,n,e);if(r.b!=null)return wD(this.node.rawAttrs,n,e);if(r.shape!=null)return kD(this.node.rawAttrs,n,e);if(r.type!=null)return xD(this.node.rawAttrs,n,e);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return bD(this.node.rawAttrs,n,e);if(r.list.s!=null)return CD(this.node.rawAttrs,n,e);if(r.list.shape!=null)return SD(this.node.rawAttrs,n,e);if(r.list.b!=null)return MD(this.node.rawAttrs,n,e);if(r.list.type!=null)return _D(this.node.rawAttrs,n,e)}return e}};var xn={};Jt(xn,{OP_SCOPE_SUFFIX:()=>FM,abs:()=>zn,acos:()=>e_,acosh:()=>t_,add:()=>fe,addN:()=>u6,all:()=>h0,any:()=>Yh,argMax:()=>Dl,argMin:()=>n_,asin:()=>r_,asinh:()=>o_,atan:()=>i_,atan2:()=>s_,atanh:()=>a_,avgPool:()=>vp,avgPool3d:()=>u_,basicLSTMCell:()=>f6,batchNorm:()=>El,batchNorm2d:()=>d_,batchNorm3d:()=>p_,batchNorm4d:()=>h_,batchToSpaceND:()=>wp,bincount:()=>f_,bitwiseAnd:()=>m6,booleanMaskAsync:()=>LZ,broadcastArgs:()=>g6,broadcastTo:()=>Il,buffer:()=>at,cast:()=>ge,ceil:()=>m_,clipByValue:()=>go,clone:()=>ki,complex:()=>Li,concat:()=>vn,concat1d:()=>g_,concat2d:()=>v_,concat3d:()=>w_,concat4d:()=>y_,conv1d:()=>m0,conv2d:()=>Vi,conv2dTranspose:()=>g0,conv3d:()=>x_,conv3dTranspose:()=>__,cos:()=>yp,cosh:()=>v0,cosineWindow:()=>mv,cumprod:()=>Qh,cumsum:()=>w0,denseBincount:()=>dv,depthToSpace:()=>k_,depthwiseConv2d:()=>Nl,diag:()=>v6,dilation2d:()=>b_,div:()=>je,divNoNan:()=>C_,dot:()=>S_,dropout:()=>XM,einsum:()=>xp,elu:()=>Al,enclosingPowerOfTwo:()=>YM,ensureShape:()=>w6,equal:()=>Eo,erf:()=>y0,euclideanNorm:()=>T_,exp:()=>mr,expandDims:()=>gr,expm1:()=>D_,eye:()=>Jh,fft:()=>Ip,fill:()=>sa,floor:()=>Rl,floorDiv:()=>p0,fused:()=>Ap,gather:()=>Ol,gatherND:()=>HZ,greater:()=>Yn,greaterEqual:()=>bi,ifft:()=>Du,imag:()=>_p,image:()=>Mi,inTopKAsync:()=>GZ,irfft:()=>R0,isFinite:()=>E_,isInf:()=>I_,isNaN:()=>N_,leakyRelu:()=>kp,less:()=>Mu,lessEqual:()=>as,linalg:()=>aT,linspace:()=>b6,localResponseNormalization:()=>A_,log:()=>wo,log1p:()=>bp,logSigmoid:()=>O_,logSoftmax:()=>x0,logSumExp:()=>Cp,logicalAnd:()=>No,logicalNot:()=>Sp,logicalOr:()=>_0,logicalXor:()=>F_,losses:()=>OX,lowerBound:()=>C6,matMul:()=>Vt,max:()=>vo,maxPool:()=>Mp,maxPool3d:()=>P_,maxPoolWithArgmax:()=>S6,maximum:()=>ji,mean:()=>Bn,meshgrid:()=>M6,min:()=>Cu,minimum:()=>Ls,mirrorPad:()=>B_,mod:()=>L_,moments:()=>ef,movingAverage:()=>$Z,mul:()=>L,multiRNNCell:()=>T6,multinomial:()=>D6,neg:()=>Xt,norm:()=>Su,notEqual:()=>Aa,oneHot:()=>Fl,ones:()=>Nr,onesLike:()=>co,op:()=>E,outerProduct:()=>E6,pad:()=>Si,pad1d:()=>I6,pad2d:()=>N6,pad3d:()=>A6,pad4d:()=>R6,pool:()=>$_,pow:()=>Yo,prelu:()=>Dp,print:()=>Jx,prod:()=>V_,raggedGather:()=>O6,raggedRange:()=>F6,raggedTensorToTensor:()=>P6,rand:()=>B6,randomGamma:()=>K6,randomNormal:()=>tf,randomStandardNormal:()=>Z6,randomUniform:()=>ls,randomUniformInt:()=>X6,range:()=>Pl,real:()=>Tu,reciprocal:()=>z_,relu:()=>Ao,relu6:()=>C0,reshape:()=>$,reverse:()=>Qr,reverse1d:()=>Y6,reverse2d:()=>Q6,reverse3d:()=>J6,reverse4d:()=>e8,rfft:()=>Np,round:()=>S0,rsqrt:()=>M0,scalar:()=>Ue,scatterND:()=>VZ,searchSorted:()=>pv,selu:()=>T0,separableConv2d:()=>D0,setdiff1dAsync:()=>t8,sigmoid:()=>ui,sign:()=>H_,signal:()=>RX,sin:()=>E0,sinh:()=>I0,slice:()=>Ft,slice1d:()=>N0,slice2d:()=>hv,slice3d:()=>A0,slice4d:()=>nf,softmax:()=>Ep,softplus:()=>Na,spaceToBatchND:()=>Tp,sparse:()=>FX,sparseToDense:()=>zZ,spectral:()=>AX,split:()=>Jr,sqrt:()=>In,square:()=>Gt,squaredDifference:()=>O0,squeeze:()=>cs,stack:()=>Qn,step:()=>aa,stridedSlice:()=>U_,string:()=>PX,sub:()=>Be,sum:()=>Ge,tan:()=>G_,tanh:()=>Ea,tensor:()=>Yr,tensor1d:()=>Jn,tensor2d:()=>Ra,tensor3d:()=>W_,tensor4d:()=>n8,tensor5d:()=>r8,tensor6d:()=>o8,tensorScatterUpdate:()=>s8,tile:()=>Io,topk:()=>K_,transpose:()=>jt,truncatedNormal:()=>F0,unique:()=>Z_,unsortedSegmentSum:()=>P0,unstack:()=>eo,upperBound:()=>a8,variable:()=>X_,where:()=>An,whereAsync:()=>Y_,zeros:()=>Ln,zerosLike:()=>pt});var See=(t,n,e,r=xn)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(C("a",t,n,e),C("b",t,n,e))];case"AddN":return[r.addN(C("tensors",t,n,e))];case"FloorMod":case"Mod":return[r.mod(C("a",t,n,e),C("b",t,n,e))];case"Mul":return[r.mul(C("a",t,n,e),C("b",t,n,e))];case"RealDiv":case"Div":return[r.div(C("a",t,n,e),C("b",t,n,e))];case"DivNoNan":return[r.divNoNan(C("a",t,n,e),C("b",t,n,e))];case"FloorDiv":return[r.floorDiv(C("a",t,n,e),C("b",t,n,e))];case"Sub":return[r.sub(C("a",t,n,e),C("b",t,n,e))];case"Minimum":return[r.minimum(C("a",t,n,e),C("b",t,n,e))];case"Maximum":return[r.maximum(C("a",t,n,e),C("b",t,n,e))];case"Pow":return[r.pow(C("a",t,n,e),C("b",t,n,e))];case"SquaredDifference":return[r.squaredDifference(C("a",t,n,e),C("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Mee=(t,n,e,r=xn)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(C("x",t,n,e))];case"Acos":return[r.acos(C("x",t,n,e))];case"Acosh":return[r.acosh(C("x",t,n,e))];case"Asin":return[r.asin(C("x",t,n,e))];case"Asinh":return[r.asinh(C("x",t,n,e))];case"Atan":return[r.atan(C("x",t,n,e))];case"Atan2":return[r.atan2(C("x",t,n,e),C("y",t,n,e))];case"Atanh":return[r.atanh(C("x",t,n,e))];case"Ceil":return[r.ceil(C("x",t,n,e))];case"Complex":return[r.complex(C("real",t,n,e),C("imag",t,n,e))];case"Cos":return[r.cos(C("x",t,n,e))];case"Cosh":return[r.cosh(C("x",t,n,e))];case"Elu":return[r.elu(C("x",t,n,e))];case"Erf":return[r.erf(C("x",t,n,e))];case"Exp":return[r.exp(C("x",t,n,e))];case"Expm1":return[r.expm1(C("x",t,n,e))];case"Floor":return[r.floor(C("x",t,n,e))];case"Log":return[r.log(C("x",t,n,e))];case"Log1p":return[r.log1p(C("x",t,n,e))];case"Imag":return[r.imag(C("x",t,n,e))];case"Neg":return[r.neg(C("x",t,n,e))];case"Reciprocal":return[r.reciprocal(C("x",t,n,e))];case"Real":return[r.real(C("x",t,n,e))];case"Relu":return[r.relu(C("x",t,n,e))];case"Round":return[r.round(C("x",t,n,e))];case"Selu":return[r.selu(C("x",t,n,e))];case"Sigmoid":return[r.sigmoid(C("x",t,n,e))];case"Sin":return[r.sin(C("x",t,n,e))];case"Sign":return[r.sign(C("x",t,n,e))];case"Sinh":return[r.sinh(C("x",t,n,e))];case"Softplus":return[r.softplus(C("x",t,n,e))];case"Sqrt":return[r.sqrt(C("x",t,n,e))];case"Square":return[r.square(C("x",t,n,e))];case"Tanh":return[r.tanh(C("x",t,n,e))];case"Tan":return[r.tan(C("x",t,n,e))];case"ClipByValue":return[r.clipByValue(C("x",t,n,e),C("clipValueMin",t,n,e),C("clipValueMax",t,n,e))];case"Relu6":return[r.relu6(C("x",t,n,e))];case"Rsqrt":return[r.rsqrt(ro(t.inputNames[0],n,e))];case"LeakyRelu":return[r.leakyRelu(C("x",t,n,e),C("alpha",t,n,e))];case"Prelu":return[r.prelu(C("x",t,n,e),C("alpha",t,n,e))];case"IsNan":return[r.isNaN(ro(t.inputNames[0],n,e))];case"IsInf":return[r.isInf(ro(t.inputNames[0],n,e))];case"IsFinite":return[r.isFinite(ro(t.inputNames[0],n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function Vs(t,n,e=""){if(!(typeof t=="number"||typeof n=="number")){x.assert(t.length===n.length,()=>e+` Shapes ${t} and ${n} must match`);for(let r=0;r<t.length;r++){let o=t[r],i=n[r];x.assert(o<0||i<0||o===i,()=>e+` Shapes ${t} and ${n} must match`)}}}function Tee(t){return!(typeof t=="number"||t.some(n=>n<0))}function Ov(t,n,e){let r=DD(t,e),o=!Tee(r);if(o&&n.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&n.forEach(i=>{r=DD(i.shape,r)}),!Tee(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function DD(t,n){if(typeof t=="number")return n;if(typeof n=="number")return t;if(t.length!==n.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${n}`);let e=[];for(let r=0;r<t.length;++r){let o=t[r],i=n[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${n}`);e[r]=o>=0?o:i}return e}var ED=class{constructor(n,e,r,o,i,s,a){this.name=n,this.dtype=e,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Ue(0),qn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(n){this.tensors.forEach(e=>{(n==null||!n.has(e.tensor.id))&&e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||n>=this.size())throw new Error(`Tried to read from index ${n}, but array size is: ${this.size()}`);let e=this.tensors[n];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${n} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(n){return n.map(e=>this.read(e))}write(n,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||!this.dynamicSize&&n>=this.maxSize)throw new Error(`Tried to write to index ${n}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[n]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n},
          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=e.shape),Vs(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${n}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been written.`);r.tensor=e,qn(e),r.written=!0,this.tensors[n]=r}writeMany(n,e){if(n.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${n.length} is not the same as tensors size: ${e.length}.`);n.forEach((r,o)=>this.write(r,e[o]))}gather(n,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(n)n=n.slice(0,this.size());else{n=[];for(let o=0;o<this.size();o++)n.push(o)}if(n.length===0)return Yr([],[0].concat(this.elementShape));let r=this.readMany(n);return Vs(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Qn(r,0)}concat(n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${n}`);if(this.size()===0)return Yr([],[0].concat(this.elementShape));let e=[];for(let o=0;o<this.size();o++)e.push(o);let r=this.readMany(e);return Vs(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),vn(r,0)}scatter(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(n.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${e.shape[0]}`);let r=Math.max(...n);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(n,eo(e,0))}split(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let r=0,o=n.map(l=>(r+=l,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&n.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${n.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:e.size/r,s=[];ne(()=>{e=$(e,[1,r,i]);for(let l=0;l<n.length;++l){let u=[0,l===0?0:o[l-1],0],d=[1,n[l],i];s[l]=$(Ft(e,u,d),this.elementShape)}return s});let a=[];for(let l=0;l<n.length;l++)a[l]=l;this.writeMany(a,s)}};var Fv=class t{get id(){return this.idTensor.id}constructor(n,e,r,o=-1){this.tensors=n,this.elementShape=e,this.elementDtype=r,n?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Vs(e,i.shape,"TensorList shape mismatch: "),qn(i)}),this.idTensor=Ue(0),this.maxNumElements=o,qn(this.idTensor)}copy(){return new t([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(n){this.tensors.forEach(e=>{(n==null||!n.has(e.id))&&e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(n,e,r=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Vs(n,this.elementShape,"TensorList shape mismatch: ");let o=Ov(this.elementShape,this.tensors,n);return ne(()=>{let i=this.tensors.map(s=>$(s,o));return Qn(i,0)})}popBack(n,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Ov(this.elementShape,this.tensors,n),o=this.tensors.pop();return o.kept=!1,Vs(o.shape,n,"TensorList shape mismatch: "),$(o,r)}pushBack(n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(Vs(n.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");qn(n),this.tensors.push(n)}resize(n){if(n<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${n}`);if(this.maxNumElements!==-1&&n>this.maxNumElements)throw new Error(`TensorListResize input size ${n} is greater maxNumElement ${this.maxNumElements}.`);let e=new t([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=n;for(let r=0;r<Math.min(this.tensors.length,n);++r)e.tensors[r]=this.tensors[r];return e}getItem(n,e,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(n<0||n>this.tensors.length)throw new Error(`Trying to access element ${n} in a list with ${this.tensors.length} elements.`);if(this.tensors[n]==null)throw new Error(`element at index ${n} is null.`);Vs(this.tensors[n].shape,e,"TensorList shape mismatch: ");let o=Ov(this.elementShape,this.tensors,e);return $(this.tensors[n],o)}setItem(n,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(n<0||this.maxNumElements!==-1&&n>=this.maxNumElements)throw new Error(`Trying to set element ${n} in a list with max ${this.maxNumElements} elements.`);Vs(this.elementShape,e.shape,"TensorList shape mismatch: "),qn(e),this.tensors[n]!=null&&(this.tensors[n].kept=!1),this.tensors[n]=e}gather(n,e,r){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);Vs(this.elementShape,r,"TensorList shape mismatch: "),n=n.slice(0,this.size());let o=Ov(this.elementShape,this.tensors,r);return n.length===0?Yr([],[0].concat(o)):ne(()=>{let i=n.map(s=>$(this.tensors[s],o));return Qn(i,0)})}concat(n,e){if(n&&n!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${n}`);Vs(this.elementShape,e,"TensorList shape mismatch: ");let r=Ov(this.elementShape,this.tensors,e);return this.size()===0?Yr([],[0].concat(r)):ne(()=>{let o=this.tensors.map(i=>$(i,r));return vn(o,0)})}};function Dee(t,n,e){let r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==e)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${e}`);let o=t.shape.slice(1);Vs(o,n,"TensorList shape mismatch: ");let i=eo(t);return new Fv(i,n,r)}function Eee(t,n,e,r){return new Fv([],t,n,r)}function Iee(t,n,e,r){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);let o=Math.max(...n);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new Fv([],e,t.dtype,r),s=eo(t,0);return n.forEach((a,l)=>{i.setItem(a,s[l])}),i}function Nee(t,n,e){let r=0,o=n.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);let i=t.shape.slice(1),s=DD(i,e),a=r===0?0:t.size/r,l=ne(()=>{let u=[];t=$(t,[1,r,a]);for(let d=0;d<n.length;++d){let h=[0,d===0?0:o[d-1],0],f=[1,n[d],a];u[d]=$(Ft(t,h,f),s)}return t.dispose(),u}),c=new Fv([],e,t.dtype,n.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}var Aee=(t,n,e)=>z(void 0,null,function*(){switch(t.op){case"If":case"StatelessIf":{let r=C("thenBranch",t,n,e),o=C("elseBranch",t,n,e),i=C("cond",t,n,e),s=C("args",t,n,e);return(yield i.data())[0]?e.functionMap[r].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap):e.functionMap[o].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap)}case"While":case"StatelessWhile":{let r=C("body",t,n,e),o=C("cond",t,n,e),i=C("args",t,n,e),s=yield e.functionMap[o].executeFunctionAsync(i,e.tensorArrayMap,e.tensorListMap),a=i.map(u=>u.id),l=yield s[0].data();s.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){let u=c;c=yield e.functionMap[r].executeFunctionAsync(c,e.tensorArrayMap,e.tensorListMap);let d=c.map(h=>h.id);u.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()});let p=yield e.functionMap[o].executeFunctionAsync(c,e.tensorArrayMap,e.tensorListMap);l=yield p[0].data(),p.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()})}return c}case"LoopCond":{let r=C("pred",t,n,e);return[Gl(r)]}case"Switch":{let r=C("pred",t,n,e),o=C("data",t,n,e);return o.kept||(o=Gl(o)),(yield r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=t.inputNames.find(o=>ro(o,n,e)!==void 0);if(r){let o=ro(r,n,e);return[Gl(o)]}return}case"Enter":{let r=C("frameName",t,n,e),o=C("tensor",t,n,e);return e.enterFrame(r),[Gl(o)]}case"Exit":{let r=C("tensor",t,n,e);return e.exitFrame(),[Gl(r)]}case"NextIteration":{let r=C("tensor",t,n,e);return e.nextIteration(),[Gl(r)]}case"TensorArrayV3":{let r=C("size",t,n,e),o=C("dtype",t,n,e),i=C("elementShape",t,n,e),s=C("dynamicSize",t,n,e),a=C("clearAfterRead",t,n,e),l=C("identicalElementShapes",t,n,e),c=C("name",t,n,e),u=new ED(c,o,r,i,l,s,a);return e.addTensorArray(u),[u.idTensor,Ue(1)]}case"TensorArrayWriteV3":{let r=C("tensorArrayId",t,n,e),o=C("index",t,n,e),i=C("tensor",t,n,e),s=e.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=C("tensorArrayId",t,n,e),o=C("index",t,n,e);return[e.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=C("tensorArrayId",t,n,e),o=C("indices",t,n,e),i=C("dtype",t,n,e);return[e.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=C("tensorArrayId",t,n,e),o=C("indices",t,n,e),i=C("tensor",t,n,e),s=e.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id),i=C("dtype",t,n,e);return[o.concat(i)]}case"TensorArraySplitV3":{let r=C("tensorArrayId",t,n,e),o=C("tensor",t,n,e),i=C("lengths",t,n,e),s=e.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id);return[Ue(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=C("tensorListId",t,n,e),o=C("index",t,n,e),i=C("tensor",t,n,e),s=e.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=C("tensorListId",t,n,e),o=C("index",t,n,e),i=C("elementShape",t,n,e),s=C("elementDType",t,n,e);return[e.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=C("indices",t,n,e),o=C("tensor",t,n,e),i=C("elementShape",t,n,e),s=C("numElements",t,n,e),a=Iee(o,r,i,s);return e.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=C("elementShape",t,n,e),o=C("elementDType",t,n,e),i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=C(i,t,n,e),a=t.op==="TensorListReserve"?-1:s,l=Eee(r,o,s,a);return e.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=C("tensorListId",t,n,e),o=C("indices",t,n,e),i=C("elementShape",t,n,e),s=C("elementDType",t,n,e);return[e.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=C("tensorListId",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e),s=C("numElements",t,n,e);return[e.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=C("tensor",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e),s=Dee(r,o,i);return e.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=C("tensorListId",t,n,e),o=e.getTensorList(r.id),i=C("dtype",t,n,e),s=C("elementShape",t,n,e);return[o.concat(i,s)]}case"TensorListPushBack":{let r=C("tensorListId",t,n,e),o=C("tensor",t,n,e),i=e.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=C("tensorListId",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e);return[e.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=C("tensor",t,n,e),o=C("elementShape",t,n,e),i=C("lengths",t,n,e),s=Nee(r,i,o);return e.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=C("tensorListId",t,n,e),o=e.getTensorList(r.id);return[Ue(o.size(),"int32")]}case"TensorListResize":{let r=C("tensorListId",t,n,e),o=C("size",t,n,e),s=e.getTensorList(r.id).resize(o);return e.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}});function Ree(t,n,e){let[r,o]=C("fusedOps",t,n,e),i=r==="biasadd",s=!i,a=o==="prelu",l=r==="fusedbatchnorm",c=C("numArgs",t,n,e);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=C("strides",t,n,e),d=Sk(t,n,e),p=C("dataFormat",t,n,e).toUpperCase(),h=C("dilations",t,n,e),[f,m]=C("args",t,n,e);s&&(m=f,f=void 0);let g=C("leakyreluAlpha",t,n,e);return{stride:u,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:m,activationFunc:o,leakyreluAlpha:g}}var Oee=(t,n,e,r=xn)=>{switch(t.op){case"Conv1D":{let o=C("stride",t,n,e),i=C("pad",t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilation",t,n,e);return[r.conv1d(C("x",t,n,e),C("filter",t,n,e),o,i,s,a)]}case"Conv2D":{let o=C("strides",t,n,e),i=Sk(t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilations",t,n,e);return[r.conv2d(C("x",t,n,e),C("filter",t,n,e),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=Ree(t,n,e);return[r.fused.conv2d({x:C("x",t,n,e),filter:C("filter",t,n,e),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=Ree(t,n,e);return[r.fused.depthwiseConv2d({x:C("x",t,n,e),filter:C("filter",t,n,e),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=C("outputShape",t,n,e),i=C("strides",t,n,e),s=Sk(t,n,e);return[r.conv2dTranspose(C("x",t,n,e),C("filter",t,n,e),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=C("strides",t,n,e),i=Sk(t,n,e),s=C("dilations",t,n,e),a=C("dataFormat",t,n,e).toUpperCase();return[r.depthwiseConv2d(C("input",t,n,e),C("filter",t,n,e),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilations",t,n,e);return[r.conv3d(C("x",t,n,e),C("filter",t,n,e),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.avgPool(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.maxPool(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e),a=C("includeBatchInIndex",t,n,e),{result:l,indexes:c}=r.maxPoolWithArgmax(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i,a);return[l,c]}case"AvgPool3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.avgPool3d(C("x",t,n,e),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.maxPool3d(C("x",t,n,e),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("dilations",t,n,e),a=o[1],l=o[2],c=s[1],u=s[2];return[r.dilation2d(C("x",t,n,e),C("filter",t,n,e),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Fee=(t,n,e,r=xn)=>{switch(t.op){case"Fill":{let o=C("shape",t,n,e),i=C("dtype",t,n,e),s=C("value",t,n,e);return[r.fill(o,s,i)]}case"LinSpace":{let o=C("start",t,n,e),i=C("stop",t,n,e),s=C("num",t,n,e);return[r.linspace(o,i,s)]}case"Multinomial":{let o=C("logits",t,n,e),i=C("numSamples",t,n,e),s=C("seed",t,n,e);return[r.multinomial(o,i,s)]}case"OneHot":{let o=C("indices",t,n,e),i=C("depth",t,n,e),s=C("onValue",t,n,e),a=C("offValue",t,n,e),l=C("dtype",t,n,e);return[r.oneHot(o,i,s,a,l)]}case"Ones":return[r.ones(C("shape",t,n,e),C("dtype",t,n,e))];case"OnesLike":return[r.onesLike(C("x",t,n,e))];case"RandomStandardNormal":return[r.randomStandardNormal(C("shape",t,n,e),C("dtype",t,n,e),C("seed",t,n,e))];case"RandomUniform":return[r.randomUniform(C("shape",t,n,e),C("minval",t,n,e),C("maxval",t,n,e),C("dtype",t,n,e))];case"RandomUniformInt":return[r.randomUniformInt(C("shape",t,n,e),C("minval",t,n,e),C("maxval",t,n,e),C("seed",t,n,e))];case"Range":{let o=C("start",t,n,e),i=C("stop",t,n,e),s=C("step",t,n,e);return[r.range(o,i,s,C("dtype",t,n,e))]}case"TruncatedNormal":{let o=C("shape",t,n,e),i=C("mean",t,n,e),s=C("stdDev",t,n,e),a=C("seed",t,n,e);return[r.truncatedNormal(o,i,s,C("dtype",t,n,e),a)]}case"Zeros":return[r.zeros(C("shape",t,n,e),C("dtype",t,n,e))];case"ZerosLike":return[r.zerosLike(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function HB(t,n,e){let r=C("boxes",t,n,e),o=C("scores",t,n,e),i=C("maxOutputSize",t,n,e),s=C("iouThreshold",t,n,e),a=C("scoreThreshold",t,n,e),l=C("softNmsSigma",t,n,e);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:l}}var Pee=(i,s,a,l,...c)=>z(void 0,[i,s,a,l,...c],function*(t,n,e,r,o=xn){switch(t.op){case"NonMaxSuppressionV5":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f,softNmsSigma:m}=HB(t,n,e),g=yield o.image.nonMaxSuppressionWithScoreAsync(u,d,p,h,f,m);return[g.selectedIndices,g.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f}=HB(t,n,e),m=C("padToMaxOutputSize",t,n,e),g=yield o.image.nonMaxSuppressionPaddedAsync(u,d,p,h,f,m);return[g.selectedIndices,g.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f}=HB(t,n,e);return[yield o.image.nonMaxSuppressionAsync(u,d,p,h,f)]}case"Where":{let u=o.cast(C("condition",t,n,e),"bool"),d=[yield o.whereAsync(u)];return u.dispose(),d}case"ListDiff":return o.setdiff1dAsync(C("x",t,n,e),C("y",t,n,e));default:throw TypeError(`Node type ${t.op} is not implemented`)}});var Bee=(t,n,e,r=xn)=>{switch(t.op){case"LowerBound":{let o=C("sortedSequence",t,n,e),i=C("values",t,n,e);return[r.lowerBound(o,i)]}case"TopKV2":{let o=C("x",t,n,e),i=C("k",t,n,e),s=C("sorted",t,n,e),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=C("sortedSequence",t,n,e),i=C("values",t,n,e);return[r.upperBound(o,i)]}case"Unique":{let o=C("x",t,n,e),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=C("x",t,n,e),i=C("axis",t,n,e),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Lee=(t,n,e,r=xn)=>{switch(t.op){case"Const":return n[t.name];case"PlaceholderWithDefault":let o=C("default",t,n,e);return[ro(t.name,n,e)||o];case"Placeholder":return[ro(t.name,n,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=C("x",t,n,e);return[Gl(u)]}case"IdentityN":return C("x",t,n,e).map(u=>Gl(u));case"Snapshot":let i=C("x",t,n,e);return[Gl(i)];case"Shape":return[r.tensor1d(C("x",t,n,e).shape,"int32")];case"ShapeN":return C("x",t,n,e).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(C("x",t,n,e).size,"int32")];case"Rank":return[r.scalar(C("x",t,n,e).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=C("x",t,n,e),a=C("data",t,n,e),l=C("message",t,n,e),c=C("summarize",t,n,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var ID=class{get id(){return this.handle.id}constructor(n,e){this.keyDType=n,this.valueDType=e,this.handle=Ue(0),this.tensorMap=new Map,qn(this.handle)}clearAndClose(){this.tensorMap.forEach(n=>n.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ue(this.size(),"int32")}import(n,e){return z(this,null,function*(){this.checkKeyAndValueTensor(n,e);let r=yield n.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),ne(()=>{let o=eo(e),i=r.length,s=o.length;x.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let l=r[a],c=o[a];qn(c),this.tensorMap.set(l,c)}return this.handle})})}find(n,e){return z(this,null,function*(){this.checkKeyAndValueTensor(n,e);let r=yield n.data();return ne(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,e);o.push(a)}return Qn(o)})})}findWithDefault(n,e){let r=this.tensorMap.get(n);return r??e}checkKeyAndValueTensor(n,e){if(n.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${n.dtype}`);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${e.dtype}`)}};var $ee=(t,n,e,r)=>z(void 0,null,function*(){switch(t.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(t.name);if(o!=null)return[o];{let i=C("keyDType",t,n,e),s=C("valueDType",t,n,e),a=new ID(i,s);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=C("tableHandle",t,n,e,r),i=C("keys",t,n,e),s=C("values",t,n,e);return[yield r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=C("tableHandle",t,n,e,r),i=C("keys",t,n,e),s=C("defaultValue",t,n,e);return[yield r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=C("tableHandle",t,n,e,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}});var Vee=(t,n,e,r=xn)=>{switch(t.op){case"ResizeBilinear":{let o=C("images",t,n,e),i=C("size",t,n,e),s=C("alignCorners",t,n,e),a=C("halfPixelCenters",t,n,e);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=C("images",t,n,e),i=C("size",t,n,e),s=C("alignCorners",t,n,e),a=C("halfPixelCenters",t,n,e);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=C("image",t,n,e),i=C("boxes",t,n,e),s=C("boxInd",t,n,e),a=C("cropSize",t,n,e),l=C("method",t,n,e),c=C("extrapolationValue",t,n,e);return[r.image.cropAndResize(o,i,s,a,l,c)]}case"ImageProjectiveTransformV3":{let o=C("images",t,n,e),i=C("transforms",t,n,e),s=C("outputShape",t,n,e),a=C("fillValue",t,n,e),l=C("interpolation",t,n,e),c=C("fillMode",t,n,e);return[r.image.transform(o,i,l.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var jee=(t,n,e,r=xn)=>{switch(t.op){case"Equal":return[r.equal(C("a",t,n,e),C("b",t,n,e))];case"NotEqual":return[r.notEqual(C("a",t,n,e),C("b",t,n,e))];case"Greater":return[r.greater(C("a",t,n,e),C("b",t,n,e))];case"GreaterEqual":return[r.greaterEqual(C("a",t,n,e),C("b",t,n,e))];case"Less":return[r.less(C("a",t,n,e),C("b",t,n,e))];case"LessEqual":return[r.lessEqual(C("a",t,n,e),C("b",t,n,e))];case"LogicalAnd":return[r.logicalAnd(C("a",t,n,e),C("b",t,n,e))];case"LogicalNot":return[r.logicalNot(C("a",t,n,e))];case"LogicalOr":return[r.logicalOr(C("a",t,n,e),C("b",t,n,e))];case"Select":case"SelectV2":return[r.where(C("condition",t,n,e),C("a",t,n,e),C("b",t,n,e))];case"BitwiseAnd":return[r.bitwiseAnd(C("a",t,n,e),C("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var zee=(t,n,e,r=xn)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(C("a",t,n,e),C("b",t,n,e),C("transposeA",t,n,e),C("transposeB",t,n,e))];case"Einsum":return[r.einsum(C("equation",t,n,e),...C("tensors",t,n,e))];case"Transpose":return[r.transpose(C("x",t,n,e),C("perm",t,n,e))];case"_FusedMatMul":let[o,i]=C("fusedOps",t,n,e),s=o==="biasadd",a=i==="prelu",l=C("numArgs",t,n,e),c=C("leakyreluAlpha",t,n,e);if(s){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,d]=C("args",t,n,e);return[r.fused.matMul({a:C("a",t,n,e),b:C("b",t,n,e),transposeA:C("transposeA",t,n,e),transposeB:C("transposeB",t,n,e),bias:u,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(C("a",t,n,e),C("numLower",t,n,e),C("numUpper",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Hee=(t,n,e,r=xn)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(C("x",t,n,e),C("axis",t,n,e),C("keepDims",t,n,e))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(C("x",t,n,e),C("mean",t,n,e),C("variance",t,n,e),C("offset",t,n,e),C("scale",t,n,e),C("epsilon",t,n,e))];case"FusedBatchNormV3":return[r.batchNorm(C("x",t,n,e),C("mean",t,n,e),C("variance",t,n,e),C("offset",t,n,e),C("scale",t,n,e),C("epsilon",t,n,e))];case"LRN":return[r.localResponseNormalization(C("x",t,n,e),C("radius",t,n,e),C("bias",t,n,e),C("alpha",t,n,e),C("beta",t,n,e))];case"Softmax":return[r.softmax(C("x",t,n,e))];case"LogSoftmax":return[r.logSoftmax(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Uee=(t,n,e,r=xn)=>{switch(t.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(C("paramsNestedSplits",t,n,e),C("paramsDenseValues",t,n,e),C("indices",t,n,e),C("outputRaggedRank",t,n,e));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(C("starts",t,n,e),C("limits",t,n,e),C("splits",t,n,e));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(C("shape",t,n,e),C("values",t,n,e),C("defaultValue",t,n,e),C("rowPartitionTensors",t,n,e),C("rowPartitionTypes",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Gee=(t,n,e,r=xn)=>{switch(t.op){case"Max":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.max(C("x",t,n,e),a,l)]}case"Mean":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.mean(C("x",t,n,e),a,l)]}case"Min":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.min(C("x",t,n,e),a,l)]}case"Sum":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.sum(C("x",t,n,e),a,l)]}case"All":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.all(C("x",t,n,e),a,l)]}case"Any":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.any(C("x",t,n,e),a,l)]}case"ArgMax":{let a=C("axis",t,n,e);return[r.argMax(C("x",t,n,e),a)]}case"ArgMin":{let a=C("axis",t,n,e);return[r.argMin(C("x",t,n,e),a)]}case"Prod":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.prod(C("x",t,n,e),a,l)]}case"Cumprod":{let a=C("axis",t,n,e),l=C("exclusive",t,n,e),c=C("reverse",t,n,e);return[r.cumprod(C("x",t,n,e),a,l,c)]}case"Cumsum":{let a=C("axis",t,n,e),l=C("exclusive",t,n,e),c=C("reverse",t,n,e);return[r.cumsum(C("x",t,n,e),a,l,c)]}case"Bincount":let o=C("x",t,n,e),i=C("weights",t,n,e),s=C("size",t,n,e);return[r.bincount(o,i,s)];case"DenseBincount":{let a=C("x",t,n,e),l=C("weights",t,n,e),c=C("size",t,n,e),u=C("binaryOutput",t,n,e);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Wee=(t,n,e,r=xn)=>{switch(t.op){case"ConcatV2":case"Concat":{let o=C("n",t,n,e),i=C("axis",t,n,e),s=C("tensors",t,n,e);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=C("x",t,n,e),i=C("indices",t,n,e);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=C("axis",t,n,e),i=C("batchDims",t,n,e),s=C("x",t,n,e),a=C("indices",t,n,e);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=C("dims",t,n,e),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=C("x",t,n,e);return[r.reverse(s,i)]}case"ReverseV2":{let o=C("axis",t,n,e),i=C("x",t,n,e);return[r.reverse(i,o)]}case"Slice":{let o=C("begin",t,n,e),i=C("size",t,n,e);return[r.slice(C("x",t,n,e),o,i)]}case"StridedSlice":{let o=C("begin",t,n,e),i=C("end",t,n,e),s=C("strides",t,n,e),a=C("beginMask",t,n,e),l=C("endMask",t,n,e),c=C("ellipsisMask",t,n,e),u=C("newAxisMask",t,n,e),d=C("shrinkAxisMask",t,n,e),p=C("x",t,n,e);return[r.stridedSlice(p,o,i,s,a,l,c,u,d)]}case"Pack":return ne(()=>{let o=C("axis",t,n,e),i=C("tensors",t,n,e),s=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{let u=x.arraysEqual(c.shape,s);if(!u&&!x.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,s)});return[r.stack(l,o)]});case"Unpack":{let o=C("axis",t,n,e),i=C("tensor",t,n,e);return r.unstack(i,o)}case"Tile":{let o=C("reps",t,n,e);return[r.tile(C("x",t,n,e),o)]}case"Split":case"SplitV":{let o=C("axis",t,n,e),i=C("numOrSizeSplits",t,n,e),s=C("x",t,n,e);return r.split(s,i,o)}case"ScatterNd":{let o=C("indices",t,n,e),i=C("values",t,n,e),s=C("shape",t,n,e);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=C("x",t,n,e),i=C("indices",t,n,e);return[r.gatherND(o,i)]}case"SparseToDense":{let o=C("sparseIndices",t,n,e),i=C("outputShape",t,n,e),s=C("sparseValues",t,n,e),a=C("defaultValue",t,n,e);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=C("indices",t,n,e),i=C("values",t,n,e),s=C("tensor",t,n,e);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var qee=(t,n,e,r=xn)=>{switch(t.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(C("indices",t,n,e),C("values",t,n,e),C("denseShape",t,n,e),C("defaultValue",t,n,e));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(C("inputIndices",t,n,e),C("inputShape",t,n,e),C("newShape",t,n,e));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(C("data",t,n,e),C("indices",t,n,e),C("segmentIds",t,n,e))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(C("data",t,n,e),C("indices",t,n,e),C("segmentIds",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Kee=(t,n,e,r=xn)=>{switch(t.op){case"FFT":return[r.fft(C("x",t,n,e))];case"IFFT":return[r.ifft(C("x",t,n,e))];case"RFFT":return[r.rfft(C("x",t,n,e))];case"IRFFT":return[r.irfft(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Zee=(t,n,e,r=xn)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(C("input",t,n,e),C("pattern",t,n,e),C("rewrite",t,n,e),C("replaceGlobal",t,n,e))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(C("data",t,n,e),C("dataSplits",t,n,e),C("separator",t,n,e),C("nGramWidths",t,n,e),C("leftPad",t,n,e),C("rightPad",t,n,e),C("padWidth",t,n,e),C("preserveShortSequences",t,n,e));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(C("input",t,n,e),C("delimiter",t,n,e),C("skipEmpty",t,n,e));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(C("input",t,n,e),C("numBuckets",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Xee=(t,n,e,r=xn)=>{switch(t.op){case"Cast":return[r.cast(C("x",t,n,e),C("dtype",t,n,e))];case"ExpandDims":{let o=C("axis",t,n,e);return[r.expandDims(C("x",t,n,e),o)]}case"Squeeze":{let o=C("axis",t,n,e);return[r.squeeze(C("x",t,n,e),o)]}case"Reshape":return[r.reshape(C("x",t,n,e),C("shape",t,n,e))];case"EnsureShape":return[r.ensureShape(C("x",t,n,e),C("shape",t,n,e))];case"MirrorPad":return[r.mirrorPad(C("x",t,n,e),C("padding",t,n,e),C("mode",t,n,e))];case"PadV2":case"Pad":return[r.pad(C("x",t,n,e),C("padding",t,n,e),C("constantValue",t,n,e))];case"SpaceToBatchND":{let o=C("blockShape",t,n,e),i=C("paddings",t,n,e);return[r.spaceToBatchND(C("x",t,n,e),o,i)]}case"BatchToSpaceND":{let o=C("blockShape",t,n,e),i=C("crops",t,n,e);return[r.batchToSpaceND(C("x",t,n,e),o,i)]}case"DepthToSpace":{let o=C("blockSize",t,n,e),i=C("dataFormat",t,n,e).toUpperCase();return[r.depthToSpace(C("x",t,n,e),o,i)]}case"BroadcastTo":return[r.broadcastTo(C("x",t,n,e),C("shape",t,n,e))];case"BroadcastArgs":return[r.broadcastArgs(C("s0",t,n,e),C("s1",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function UB(t,n,e,r,o=ne){let i=((s,a,l)=>{switch(s.category){case"arithmetic":return o(()=>See(s,a,l));case"basic_math":return o(()=>Mee(s,a,l));case"control":return Aee(s,a,l);case"convolution":return o(()=>Oee(s,a,l));case"creation":return o(()=>Fee(s,a,l));case"dynamic":return Pee(s,a,l);case"evaluation":return o(()=>Bee(s,a,l));case"image":return o(()=>Vee(s,a,l));case"graph":return o(()=>Lee(s,a,l));case"logical":return o(()=>jee(s,a,l));case"matrices":return o(()=>zee(s,a,l));case"normalization":return o(()=>Hee(s,a,l));case"ragged":return o(()=>Uee(s,a,l));case"reduction":return o(()=>Gee(s,a,l));case"slice_join":return o(()=>Wee(s,a,l));case"sparse":return o(()=>qee(s,a,l));case"spectral":return o(()=>Kee(s,a,l));case"string":return o(()=>Zee(s,a,l));case"transformation":return o(()=>Xee(s,a,l));case"hash_table":return $ee(s,a,l,r);case"custom":let c=mD(s.op);if(c&&c.customExecutor)return c.customExecutor(new TD(s,a,l));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,n,e);return x.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var Tk=class{constructor(n={},e={},r={},o={},i){this.weightMap=n,this.tensorArrayMap=e,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(n,e){return{id:n,frameName:e,iterationId:0}}set currentContext(n){this.contexts!==n&&(this.contexts=n,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let n=[];for(let e=0;e<this.contexts.length-1;e++){let r=this.contexts.slice(0,this.contexts.length-e);n.push(this.contextIdforContexts(r))}n.push(""),this._currentContextIds=n}contextIdforContexts(n){return n?n.map(e=>e.id===0&&e.iterationId===0?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(n){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,n)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let n=Object.assign({},this.contexts[this.contexts.length-1]);n.iterationId+=1,n.id=this.lastId,this.contexts.splice(-1,1,n),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(n){return this.weightMap[n]}addTensorArray(n){this.tensorArrayMap[n.id]=n}getTensorArray(n){return this.tensorArrayMap[n]}addTensorList(n){this.tensorListMap[n.id]=n}getTensorList(n){return this.tensorListMap[n]}dispose(n){for(let e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(n);for(let e in this.tensorListMap)this.tensorListMap[e].clearAndClose(n)}};function GB(t,n,e,r){let o=new Set,i=[],s=null,a=null,l=new Set,c=new Set(Object.keys(t).map(p=>Zi(p)[0]));r=r||[];let u=new Set(r.map(p=>Zi(p.name)[0])),d=[...n];for(;d.length>0;){let p=d.pop();if((vf(p)||cRe(p)||uRe(p))&&s==null&&(s=p,a=s.children.map(h=>h.name).filter(h=>o.has(h))),o.add(p.name),e[p.name]==null&&!c.has(p.name)&&!u.has(p.name)){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),d.push(h))})}}return{inputs:t,outputs:n,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function Yee(t,n){let{usedNodes:e,inputs:r}=n,o=Object.keys(r).map(g=>Zi(g)[0]).map(g=>t.nodes[g]),i=t.initNodes||[],s=g=>e.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(v=>[v.name,v])).values()]}let l=a([...o,...t.weights,...i]).filter(s),c=a([...l,...Object.values(t.nodes)]).filter(s),u=new Map(c.map(g=>[g.name,g])),d={};for(let g of c){d[g.name]=d[g.name]||0;for(let v of g.children)s(v)||(d[v.name]=Number.POSITIVE_INFINITY),d[v.name]=(d[v.name]||0)+1}let p=Object.entries(d).filter(([,g])=>g===0).map(([g])=>g),h=[...p];for(;p.length>0;){let g=p.pop(),v=u.get(g);for(let w of v.children.filter(s))--d[w.name]===0&&(h.push(w.name),p.push(w.name))}let f=h.map(g=>u.get(g)),m=oRe(f,l);return iRe(m,l),m}function oRe(t,n){let e=new Map(t.map(s=>[s.name,s])),r=n.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=e.get(s);for(let l of a.children)!e.has(l.name)||o.has(l.name)||(o.add(l.name),r.push(l.name))}return t.filter(s=>o.has(s.name))}var Pv=class extends Error{constructor(n){super(`NodesExecutionOrderError: ${n}`)}};function iRe(t,n){let e=new Map(t.map((a,l)=>[a.name,l])),r=new Set(n.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of t){for(let l of a.children.filter(s)){if(!e.has(l.name))throw new Pv(`Child ${l.name} of node ${a.name} is unreachable.`);if(e.get(a.name)>e.get(l.name))throw new Pv(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!o(a))for(let l of a.inputs){if(!e.has(l.name))throw new Pv(`Input ${l.name} of node ${a.name} is unreachable.`);if(e.get(l.name)>e.get(a.name))throw new Pv(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function Qee(t){let n=new Map(t.map((a,l)=>[a.name,l])),e=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>vf(a)?e:l),o=a=>{let l=r[n.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(o).reduce((c,u)=>Math.max(c,u),r[l])),s=new Map;for(let a=0;a<t.length;++a){let l=i[a];if(l===e)continue;let c=t[a],u=t[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(c)}return s}var sRe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),aRe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),lRe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function vf(t){return sRe.has(t.op)}function cRe(t){return aRe.has(t.op)}function uRe(t){return lRe.has(t.op)}var Dk=class t{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(n){let e=Object.keys(n).map(r=>n[r].map(o=>o.id));this._weightIds=[].concat(...e),this._weightMap=n}set resourceManager(n){this._resourceManager=n}get inputs(){return this._inputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(n=>n.signatureKey||n.name)}get outputNodes(){return this._outputs.map(n=>{let e=n.signatureKey||n.name;return n.defaultOutput?`${e}:${n.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((n,e)=>(n[e]=this._functions[e].signature,n),{})}constructor(n,e){this.graph=n,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=n.outputs,this._inputs=n.inputs,this._initNodes=n.initNodes,this._signature=n.signature,this._functions=n.functions,n.functions!=null&&Object.keys(n.functions).forEach(r=>{this._functionExecutorMap[r]=new t(n.functions[r],this)})}getCompilationKey(n,e){let r=n.map(i=>i.name).sort(),o=e.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(n,e){let r=GB(n,e,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=e.map(d=>d.name),u=Object.keys(n);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${o}]`)}let a=Yee(this.graph,r),l=Qee(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(n){if(n==null)return null;let e=n.clone();return qn(e),e}cloneTensorList(n){return n?n.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(n){return Object.fromEntries(Object.entries(n).map(([e,r])=>[e,this.cloneTensorList(r)]))}execute(n,e){this.disposeIntermediateTensors(),n=this.mapInputs(n);let r=Object.keys(n).sort();this.checkInputs(n),this.checkInputShapeAndType(n),e=this.mapOutputs(e),this.checkOutputs(e);let o=r.map(p=>this.graph.nodes[Zi(p)[0]]),i=e.map(p=>Zi(p)[0]),s=new Set(i),a=i.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);let l=this.getCompilationKey(o,a),c=this.compiledMap.get(l);c==null&&(c=this.compile(n,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=ee().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let u={},d={};return ne(()=>{let p=new Tk(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(n).forEach(v=>{let[w,y]=Zi(v,p),_=[];_[y]=n[v],h[w]=_,this.keepIntermediateTensors&&(this.clonedTensorsMap[w]=this.cloneTensorList(_))});let f=this.getFrozenTensorIds(h),{orderedNodes:m,nodeLiveUntilMap:g}=c;for(let v of m){if(h[v.name])continue;let w=UB(v,h,p,this._resourceManager);if(x.isPromise(w))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);h[v.name]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[v.name]=this.cloneTensorList(w)),this.checkTensorForDisposalWithNodeLiveUntilInfo(v,h,p,f,s,g.get(v.name))}return this.parent==null&&p.dispose(f),e.map(v=>ro(v,h,p))})}getFrozenTensorIds(n){let e=[].concat.apply([],Object.keys(n).map(r=>n[r]).map(r=>r.map(o=>o.id)));return new Set(e)}checkTensorForDisposal(n,e,r,o,i,s,a){if(!(vf(e)||s.has(n))){for(let l of r[n])l!=null&&(a[l.id]=(a[l.id]||0)+e.children.length);for(let l of e.inputs){if(vf(l))continue;let c=kB(l.name,r,o);if(c!=null)for(let u of c){if(!u||u.kept||i.has(u.id))continue;let d=a[u.id];d===1?(u.dispose(),delete a[u.id]):d!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(n,e,r,o,i,s){function a(l){return vf(l)||i.has(l.name)}if(!(vf(n)||s==null))for(let l of s){if(a(l))continue;let c=kB(l.name,e,r);for(let u of c)!u||u.kept||o.has(u.id)||u.dispose()}}executeAsync(n,e){return z(this,null,function*(){return this._executeAsync(n,e)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(n=>{for(let e of n)e&&!e.isDisposed&&e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(s,a){return z(this,arguments,function*(n,e,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(n=this.mapInputs(n),this.checkInputs(n),this.checkInputShapeAndType(n),e=this.mapOutputs(e),this.checkOutputs(e));try{this.keepIntermediateTensors=ee().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}let l=new Tk(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let c=yield this.executeWithControlFlow(n,l,e,r),u=e.map(f=>ro(f,c,l)),d=u.map(f=>f.id),p=Object.keys(n).map(f=>n[f].id),h=new Set([...d,...p,...this.weightIds]);return Object.values(c).forEach(f=>{f.forEach(m=>{m&&!m.isDisposed&&!h.has(m.id)&&m.dispose()})}),this.parent==null&&l.dispose(h),u})}executeFunctionAsync(n,e,r){return z(this,null,function*(){let o=n.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,e,r)})}executeWithControlFlow(n,e,r,o){return z(this,null,function*(){let i=Object.keys(n),s=i.map(_=>this.graph.nodes[Zi(_)[0]]),a=r.map(_=>Zi(_)[0]),l=new Set(a),c=a.map(_=>this.graph.nodes[_]);c.length===0&&(c=this._outputs);let{usedNodes:u,missingInputs:d,dynamicNode:p,syncInputs:h}=GB(n,c,this.weightMap,this._initNodes),f=[...s,...this.graph.weights,...this._initNodes||[]].map(_=>({node:_,contexts:e.currentContext})),m=Object.assign({},this.weightMap);Object.keys(n).forEach(_=>{let[k,T]=Zi(_),I=[];I[T]=n[_],m[k]=I});let g={},v=this.getFrozenTensorIds(m),w={};for(;f.length>0;){let _=this.processStack(s,f,e,m,w,v,l,g,u);yield Promise.all(_)}p==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let y=c.filter(_=>!vf(_)&&!ro(_.name,m,e)).map(_=>_.name);if(y.length>0){let _="";throw p!=null&&(_=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${_}`)}return m})}processStack(n,e,r,o,i,s,a,l,c){let u=[];for(;e.length>0;){let d=e.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&C("isConstant",d.node,o,r)&&([p]=Ul(d.node.name,r)),o[d.node.name]==null){let h=UB(d.node,o,r,this._resourceManager);p||([p]=Ul(d.node.name,r));let f=r.currentContext;x.isPromise(h)?u.push(h.then(m=>(o[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m)),r.currentContext=f,this.checkTensorForDisposal(p,d.node,o,r,s,a,l),this.processChildNodes(d.node,e,r,o,i,c),m))):(o[p]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(h)),this.checkTensorForDisposal(p,d.node,o,r,s,a,l),this.processChildNodes(d.node,e,r,o,i,c))}else this.processChildNodes(d.node,e,r,o,i,c)}return u}processChildNodes(n,e,r,o,i,s){n.children.forEach(a=>{let[l]=Ul(a.name,r);i[l]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!ro(c,o,r))&&(i[l]=!0,e.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!ro(c,o,r))&&(i[l]=!0,e.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(n=>this.weightMap[n].forEach(e=>e.dispose()))}checkInputShapeAndType(n){Object.keys(n).forEach(e=>{let r=n[e],[o]=Zi(e),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((l,c)=>s[c]===-1||s[c]===l);x.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&x.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(n){var e,r;let o={};for(let i in n){let s=(r=(e=this._signature)===null||e===void 0?void 0:e.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=n[i]:o[i]=n[i]}return o}checkInputs(n){let e=Object.keys(n).filter(r=>{let[o]=Zi(r);return this.graph.nodes[o]==null});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(n){return n.map(e=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[e];return i!=null?i.name:e},{})}checkOutputs(n){n.forEach(e=>{let[r]=Zi(e);if(!this.graph.nodes[r])throw new Error(`The output '${e}' is not found in the graph`)})}};var ND=class{constructor(n={},e={}){this.hashTableNameToHandle=n,this.hashTableMap=e}addHashTable(n,e){this.hashTableNameToHandle[n]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(n){return this.hashTableNameToHandle[n]}getHashTableById(n){return this.hashTableMap[n]}dispose(){for(let n in this.hashTableMap)this.hashTableMap[n].clearAndClose(),delete this.hashTableMap[n];for(let n in this.hashTableNameToHandle)this.hashTableNameToHandle[n].dispose(),delete this.hashTableNameToHandle[n]}};var dRe="?tfjs-format=file",pRe="model.json",Bv=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(n,e={},r=to){this.modelUrl=n,this.loadOptions=e,this.version="n/a",this.io=r,e==null&&(this.loadOptions={}),this.resourceManager=new ND}findIOHandler(){let n=this.modelUrl;if(n.load!=null)this.handler=n;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(n,this.loadOptions);else{let e=this.io.getLoadHandlers(n,this.loadOptions);if(e.length===0)e.push(this.io.browserHTTPRequest(n,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[n]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let n=this.handler.load();return x.isPromise(n)?n.then(e=>e.getWeightStream==null?this.loadSync(e):this.loadStreaming(e)):this.loadSync(n)}loadSync(n){let e=this.io.decodeWeights(n.weightData,n.weightSpecs);return this.loadWithWeightMap(n,e)}loadStreaming(n){return z(this,null,function*(){if(n.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let e=yield BM(n.getWeightStream(),n.weightSpecs);return this.loadWithWeightMap(n,e)})}loadWithWeightMap(n,e){this.artifacts=n;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Dk(Mk.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,n.modelInitializer!=null&&n.modelInitializer.node!=null){let i=Mk.Instance.transformGraph(n.modelInitializer);this.initializer=new Dk(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=n.initializerSignature}return!0}save(n,e){return z(this,null,function*(){if(typeof n=="string"){let r=this.io.getSaveHandlers(n);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${n}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${n}'`);n=r[0]}if(n.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return n.save(this.artifacts)})}addStructuredOutputNames(n){if(this.structuredOutputKeys){let e=n instanceof Lt?[n]:n,r={};return e.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return n}predict(n,e){let r=this.execute(n,this.outputNodes);return this.addStructuredOutputNames(r)}predictAsync(n,e){return z(this,null,function*(){let r=yield this.executeAsync(n,this.outputNodes);return this.addStructuredOutputNames(r)})}normalizeInputs(n){var e;if(!(n instanceof Lt)&&!Array.isArray(n)){let i=(e=this.signature)===null||e===void 0?void 0:e.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(n[s]=this.resourceIdToCapturedInput[a.resourceId])}return n}n=Array.isArray(n)?n:[n];let r=Object.keys(this.resourceIdToCapturedInput).length;if(n.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${n.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,l,c;let u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[s])===null||c===void 0?void 0:c.resourceId;return u!=null?i[s]=this.resourceIdToCapturedInput[u]:i[s]=n[o++],i},{})}normalizeOutputs(n){return n=n||this.outputNodes,Array.isArray(n)?n:[n]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return z(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(n){if(this.resourceIdToCapturedInput={},this.initializerSignature){let e=this.initializerSignature.outputs,r=Object.keys(e);for(let o=0;o<r.length;o++){let i=r[o],s=e[i];this.resourceIdToCapturedInput[s.resourceId]=n[o]}}}execute(n,e){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),n=this.normalizeInputs(n),e=this.normalizeOutputs(e);let r=this.executor.execute(n,e);return r.length>1?r:r[0]}executeAsync(n,e){return z(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),n=this.normalizeInputs(n),e=this.normalizeOutputs(e);let r=yield this.executor.executeAsync(n,e);return r.length>1?r:r[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(n){return Object.keys(n).reduce((e,r)=>(e[r]=[n[r]],e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&gt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};function Jee(r){return z(this,arguments,function*(t,n={},e=to){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");n==null&&(n={}),n.fromTFHub&&typeof t=="string"&&(t=hRe(t));let o=new Bv(t,n,e);return yield o.load(),o})}function ete(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let n;if(t instanceof Array){let[r,o]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!o||!(o instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let i=to.getWeightSpecs(r.weightsManifest),s=to.getModelArtifactsForJSONSync(r,i,o);n=to.fromMemorySync(s)}else if("load"in t)n=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)n=to.fromMemorySync(t);else throw new Error("Unknown model format");let e=new Bv(n);return e.load(),e}function hRe(t){return t.endsWith("/")||(t=t+"/"),`${t}${pRe}${dRe}`}var AD="4.22.0";var CL={};Jt(CL,{CSVDataset:()=>zv,Dataset:()=>xf,FileDataSource:()=>Gv,TextLineDataset:()=>jv,URLDataSource:()=>Wv,array:()=>Rte,csv:()=>$te,func:()=>Vte,generator:()=>jte,microphone:()=>Hte,version_data:()=>KD,webcam:()=>zte,zip:()=>Ote});var Ate=I2(j_());var Ete=I2(j_());function bte(t,n){return BD(t,n)}function BD(t,n,e=new Map,r=new Set){if(t==null)return null;if(typeof Blob=="function"&&t instanceof Blob)return t.slice();if(r.has(t))throw new Error("Circular references are not supported.");if(e.has(t))return e.get(t);let o=n(t);if(o.recurse&&o.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(o.recurse)if(wf(t)){let i=Array.isArray(t)?[]:{};r.add(t);for(let s in t){let a=t[s],l=BD(a,n,e,r);i[s]=l}return r.delete(t),t.__proto__&&(i.__proto__=t.__proto__),i}else throw new Error(`Can't recurse into non-iterable type: ${t}`);else return e.set(t,o.value),o.value}function Cte(t,n=iL){return Ste(t,n)}function Ste(t,n,e=new Set){let r=t[0];if(e.has(r))throw new Error("Circular references are not supported.");let o=n(t);if(o.recurse&&o.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse)if(wf(r)){let i=Array.isArray(r)?[]:{};e.add(r);for(let s in r){let a=t.map(c=>c[s]),l=Ste(a,n,e);i[s]=l}return e.delete(r),i}else throw new Error(`Can't recurse into non-iterable type: ${r}`);else return o.value}function iL(t){return t===null?null:wf(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function LD(t,n){return z(this,null,function*(){let e=new Map;BD(t,n,e);for(let o of Array.from(e.keys())){let i=e.get(o);if(x.isPromise(i)){let s=yield i;e.set(o,s)}}return BD(t,n,e)})}function wf(t){let n=!1;if(ee().get("IS_BROWSER"))n=t instanceof TextDecoder;else{let{StringDecoder:e}=oL();n=t instanceof e}return t!=null&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||typeof t=="object"&&!(t instanceof Lt)&&!(t instanceof Promise)&&!n)}function Mte(t){return t==null||r5e(t)||Array.isArray(t)||typeof t=="object"&&t instanceof Lt||x.isTypedArray(t)}function r5e(t){return t===null||typeof t!="object"&&typeof t!="function"}function Tte(t){return bte(t,o5e)}function o5e(t){return t instanceof Lt?{value:t.clone(),recurse:!1}:wf(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}var Vv=class{constructor(n){if(this.capacity=n,this.begin=0,this.end=0,n==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(n<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(n),this.doubledCapacity=2*n}wrap(n){for(;n<0;)n+=this.doubledCapacity;return n%this.doubledCapacity}get(n){if(n<0)throw new RangeError("Can't get item at a negative index.");return this.data[n%this.capacity]}set(n,e){if(n<0)throw new RangeError("Can't set item at a negative index.");this.data[n%this.capacity]=e}length(){let n=this.end-this.begin;return n<0&&(n=this.doubledCapacity+n),n}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,n),this.end=this.wrap(this.end+1)}pushAll(n){for(let e of n)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let n=this.get(this.end);return this.set(this.end,void 0),n}unshift(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,n)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let n=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),n}shuffleExcise(n){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.wrap(this.begin+n),r=this.get(e);return this.set(e,this.pop()),r}};var Dte=(()=>{class t extends Vv{constructor(){super(t.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=this.capacity*2,r=new Array(e),o=this.length();for(let i=0;i<o;i++)r[i]=this.get(this.wrap(this.begin+i));this.data=r,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=o}}return t.INITIAL_CAPACITY=32,t})();function wL(t){return new sL(t)}function Ik(t){return new aL(t)}function Ite(t,n){return new VD(t,n)}function Nte(t,n=yf.FAIL){return new gL(t,n)}var Fr=class{toArray(){return z(this,null,function*(){let n=[],e=yield this.next();for(;!e.done;)n.push(e.value),e=yield this.next();return n})}toArrayForTest(){return z(this,null,function*(){let n=this.prefetch(100),e=[],r=yield n.next();for(;!r.done;)e.push(r.value),r=yield n.next();return e})}resolveFully(){return z(this,null,function*(){let n=yield this.next();for(;!n.done;)n=yield this.next()})}resolveWhile(n){return z(this,null,function*(){let e=yield this.next(),r=n(e.value);for(;!e.done&&r;)e=yield this.next(),r=n(e.value)})}handleErrors(n){return new fL(this,n)}filter(n){return new pL(this,n)}map(n){return new hL(this,n)}mapAsync(n){return new $D(this,n)}serialMapAsync(n){return new $D(this,n).serial()}flatmap(n){return new mL(this,n)}forEachAsync(n){return z(this,null,function*(){return this.map(n).resolveFully()})}serialForEach(n){return z(this,null,function*(){return this.serialMapAsync(n).resolveWhile(e=>e===!0)})}rowMajorBatch(n,e=!0){return new dL(this,n,e)}columnMajorBatch(n,e=!0,r=iL){return this.rowMajorBatch(n,e).map(i=>Cte(i,r))}concatenate(n,e){return new VD(wL([this,n]),e)}take(n){return n<0||n==null?this:new uL(this,n)}skip(n){return n<0||n==null?this:new cL(this,n)}prefetch(n){return new jD(this,n)}shuffle(n,e){return new vL(this,n,e)}serial(){return new lL(this)}},sL=class extends Fr{constructor(n){super(),this.items=n,this.trav=0}summary(){return`Array of ${this.items.length} items`}next(){return z(this,null,function*(){if(this.trav>=this.items.length)return{value:null,done:!0};let n=this.items[this.trav];return this.trav++,{value:Tte(n),done:!1}})}},aL=class extends Fr{constructor(n){super(),this.nextFn=n}summary(){return"Function call"}next(){return z(this,null,function*(){try{return this.nextFn()}catch(n){throw n.message=`Error thrown while iterating through a dataset: ${n.message}`,n}})}},lL=class extends Fr{constructor(n){super(),this.upstream=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){return this.upstream.next()})}},cL=class extends Fr{constructor(n,e){super(),this.upstream=n,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;this.count++<this.maxCount;){let n=yield this.upstream.next();if(n.done)return n;gt(n.value)}return this.upstream.next()})}},uL=class extends Fr{constructor(n,e){super(),this.upstream=n,this.maxCount=e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}next(){return z(this,null,function*(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()})}},dL=class extends Fr{constructor(n,e,r=!0){super(),this.upstream=n,this.batchSize=e,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){let n=[];for(;n.length<this.batchSize;){let e=yield this.upstream.next();if(e.done)return this.enableSmallLastBatch&&n.length>0?{value:n,done:!1}:{value:null,done:!0};n.push(e.value)}return{value:n,done:!1}})}},pL=class extends Fr{constructor(n,e){super(),this.upstream=n,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;;){let n=yield this.upstream.next();if(n.done||this.predicate(n.value))return n;gt(n.value)}})}},hL=class extends Fr{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> Map`}next(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return{value:null,done:!0};let e=na.getTensorsInContainer(n.value),r=this.transform(n.value),o=na.getTensorsInContainer(r);for(let i of e)na.isTensorInList(i,o)||i.dispose();return{value:r,done:!1}})}},fL=class extends Fr{constructor(n,e){super(),this.upstream=n,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;;)try{return yield this.upstream.next()}catch(n){if(!this.handler(n))return{value:null,done:!0}}})}},$D=class extends Fr{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> AsyncMap`}next(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return{value:null,done:!0};let e=na.getTensorsInContainer(n.value),r=yield this.transform(n.value),o=na.getTensorsInContainer(r);for(let i of e)na.isTensorInList(i,o)||i.dispose();return{value:r,done:!1}})}},Y0=class extends Fr{constructor(){super(),this.outputQueue=new Dte,this.lastRead=Promise.resolve({value:null,done:!1})}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;this.outputQueue.length()===0;)if(!(yield this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}})}},mL=class extends Y0{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> Flatmap`}pump(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return!1;let e=na.getTensorsInContainer(n.value),r=this.transform(n.value),o=na.getTensorsInContainer(r);this.outputQueue.pushAll(r);for(let i of e)na.isTensorInList(i,o)||i.dispose();return!0})}},VD=class extends Fr{constructor(n,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=n}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}next(){return z(this,null,function*(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead})}readFromChain(n){return z(this,null,function*(){if(yield n,this.iterator==null){let r=yield this.moreIterators.next();if(r.done)return{value:null,done:!0};this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let e=yield this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(n)):e})}},yf=function(t){return t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST",t}(yf||{}),gL=class extends Fr{constructor(n,e=yf.FAIL){super(),this.iterators=n,this.mismatchMode=e,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}nextState(n){return z(this,null,function*(){yield n;let e=0,r=0;function o(s){return s instanceof Fr?{value:s.next().then(l=>(e++,l.done&&r++,l.value)),recurse:!1}:{value:null,recurse:!0}}let i=yield LD(this.iterators,o);if(e===r)return{value:null,done:!0};if(r>0)switch(this.mismatchMode){case yf.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case yf.SHORTEST:return{value:null,done:!0};case yf.LONGEST:default:}return this.count++,{value:i,done:!1}})}next(){return z(this,null,function*(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise})}},jD=class extends Fr{constructor(n,e){super(),this.upstream=n,this.bufferSize=e,this.buffer=new Vv(e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let n=this.upstream.next();this.buffer.push(n)}}next(){return this.refill(),this.buffer.shift()}},vL=class extends jD{constructor(n,e,r){super(n,e),this.upstream=n,this.windowSize=e,this.upstreamExhausted=!1,this.random=Ete.alea(r||x.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}randomInt(n){return Math.floor(this.random()*n)}chooseIndex(){return this.randomInt(this.buffer.length())}serialNext(){return z(this,null,function*(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let n=this.chooseIndex(),e=yield this.buffer.shuffleExcise(n);if(e.done)this.upstreamExhausted=!0;else return this.refill(),e}return{value:null,done:!0}})}};var xf=(()=>{class t{constructor(){this.size=null}batch(e,r=!0){let o=this;x.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`);let i;return this.size===1/0||this.size==null?i=this.size:r?i=Math.ceil(this.size/e):i=Math.floor(this.size/e),ps(()=>z(this,null,function*(){return(yield o.iterator()).columnMajorBatch(e,r,i5e)}),i)}concatenate(e){let r=this,o;return this.size===1/0||e.size===1/0?o=1/0:this.size!=null&&e.size!=null?o=this.size+e.size:o=null,ps(()=>z(this,null,function*(){return(yield r.iterator()).concatenate(yield e.iterator())}),o)}filter(e){let r=this,o;return this.size===1/0?o=1/0:o=null,ps(()=>z(this,null,function*(){return(yield r.iterator()).filter(i=>ne(()=>e(i)))}),o)}forEachAsync(e){return z(this,null,function*(){return(yield this.iterator()).forEachAsync(e)})}map(e){let r=this;return ps(()=>z(this,null,function*(){return(yield r.iterator()).map(o=>ne(()=>e(o)))}),this.size)}mapAsync(e){let r=this;return ps(()=>z(this,null,function*(){return(yield r.iterator()).mapAsync(e)}),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let r=this;return ps(()=>z(this,null,function*(){return(yield r.iterator()).prefetch(e)}),this.size)}repeat(e){let r=this,o;return this.size!=null&&e>0?o=this.size*e:e===0?o=0:this.size!=null&&(e===void 0||e<0)?o=1/0:o=null,ps(()=>z(this,null,function*(){let i=Ik(()=>z(this,null,function*(){return{value:yield r.iterator(),done:!1}}));return Ite(i.take(e))}),o)}skip(e){let r=this,o;return this.size!=null&&e>=0&&this.size>=e?o=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?o=0:o=null,ps(()=>z(this,null,function*(){return(yield r.iterator()).skip(e)}),o)}shuffle(e,r,o=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let i=this,s=Ate.alea(r||x.now().toString());return ps(()=>z(this,null,function*(){let a=s.int32();return o&&(a+=s.int32()),(yield i.iterator()).shuffle(e,a.toString())}),this.size)}take(e){let r=this,o;return this.size!=null&&this.size>e?o=e:this.size!=null&&this.size<=e?o=this.size:o=null,ps(()=>z(this,null,function*(){return(yield r.iterator()).take(e)}),o)}toArray(){return z(this,null,function*(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(yield this.iterator()).toArray()})}toArrayForTest(){return z(this,null,function*(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(yield this.iterator()).toArrayForTest()})}}return t.MAX_BUFFER_SIZE=1e4,t})();function ps(t,n=null){return new class extends xf{constructor(){super(...arguments),this.size=n}iterator(){return z(this,null,function*(){return t()})}}}function Rte(t){return ps(()=>z(this,null,function*(){return wL(t)}),t.length)}function Ote(t){if(!wf(t))throw new Error("The argument to zip() must be an object or array.");let n;if(Array.isArray(t))for(let e=0;e<t.length;e++)n=n==null?t[e].size:Math.min(n,t[e].size);else if(t instanceof Object)for(let e in t)n=n==null?t[e].size:Math.min(n,t[e].size);return ps(()=>z(this,null,function*(){let e=yield LD(t,r=>{if(r instanceof xf)return{value:r.iterator(),recurse:!1};if(wf(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return Nte(e,yf.SHORTEST)}),n)}function i5e(t){if(t===null)return null;let n=t[0];return Mte(n)?{value:s5e(t),recurse:!1}:{value:null,recurse:!0}}function s5e(t){if(t.length===0)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof Lt?Qn(t):Yr(t)}var jv=class extends xf{constructor(n){super(),this.input=n}iterator(){return z(this,null,function*(){return(yield this.input.iterator()).decodeUTF8().split(`
`).map(o=>(o.endsWith("\r")&&(o=o.slice(0,-1)),o))})}};var zD='"',Nk=Symbol("out"),Fte=Symbol("field"),HD=Symbol("quote"),yL=Symbol("quoteafterquote"),Pte=Symbol("quoteinquote"),zv=class extends xf{columnNames(){return z(this,null,function*(){return this.columnNamesValidated||(yield this.setColumnNames()),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames})}setColumnNames(){return z(this,null,function*(){let n=yield this.maybeReadHeaderLine();if(!this.fullColumnNames&&!n)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&n&&x.assert(n.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+n.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=n);let e=this.fullColumnNames.reduce((o,i)=>(o[i]=o[i]+1||1,o),{}),r=Object.keys(e).filter(o=>e[o]>1);if(x.assert(r.length===0,()=>"Duplicate column names found: "+r.toString()),this.columnConfigs){for(let o of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(o)===-1)throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0})}maybeReadHeaderLine(){return z(this,null,function*(){if(this.hasHeader){let e=yield(yield this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let r=e.value;return this.parseRow(r,!1)}else return null})}constructor(n,e){super(),this.input=n,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new jv(n),e||(e={}),this.hasHeader=e.hasHeader!==!1,this.fullColumnNames=e.columnNames,this.columnConfigs=e.columnConfigs,this.configuredColumnsOnly=e.configuredColumnsOnly,e.delimWhitespace?(x.assert(e.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=e.delimiter?e.delimiter:","}iterator(){return z(this,null,function*(){this.columnNamesValidated||(yield this.setColumnNames());let n=yield this.base.iterator();return this.hasHeader&&(n=n.skip(1)),n.map(e=>this.makeDataElement(e))})}makeDataElement(n){let e=this.parseRow(n),r={},o={};for(let i=0;i<this.fullColumnNames.length;i++){let s=this.fullColumnNames[i],a=this.columnConfigs?this.columnConfigs[s]:null;if(!(this.configuredColumnsOnly&&!a)){let l=e[i],c=null;if(l==="")if(a&&a.default!==void 0)c=a.default;else{if(a&&(a.required||a.isLabel))throw new Error(`Required column ${s} is empty in this line: ${n}`);c=void 0}else{let u=Number(l);if(isNaN(u))a&&a.dtype==="bool"?c=this.getBoolean(l):c=l;else if(!a||!a.dtype)c=u;else switch(a.dtype){case"float32":c=u;break;case"int32":c=Math.floor(u);break;case"bool":c=this.getBoolean(l);break;default:c=u}}a&&a.isLabel?o[s]=c:r[s]=c}}return Object.keys(o).length===0?r:{xs:r,ys:o}}getBoolean(n){return n==="1"||n.toLowerCase()==="true"?1:0}parseRow(n,e=!0){let r=[],o=0,i=n.length,s=Nk;for(let a=0;a<i;a++)switch(s){case Nk:switch(n.charAt(a)){case zD:o=a+1,s=HD;break;case this.delimiter:if(o=a+1,this.delimiter===" "&&this.delimWhitespace)break;r.push(""),s=Nk;break;default:s=Fte,o=a;break}break;case Fte:switch(n.charAt(a)){case this.delimiter:r.push(n.substring(o,a)),s=Nk,o=a+1;break;default:}break;case HD:switch(n.charAt(a)){case zD:s=yL;break;default:}break;case yL:switch(n.charAt(a)){case this.delimiter:r.push(n.substring(o,a-1)),s=Nk,o=a+1;break;case zD:s=HD;break;default:s=Pte;break}break;case Pte:switch(n.charAt(a)){case zD:s=HD;break;default:}break;default:}if(s===yL?r.push(n.substring(o,i-1)):r.push(n.substring(o)),e&&r.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${r}`);return r}};var UD=class t extends Fr{constructor(n){super(),this.microphoneConfig=n,this.isClosed=!1,this.fftSize=n.fftSize||1024;let e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=n.numFramesPerSpectrogram||43,this.sampleRateHz=n.sampleRateHz,this.columnTruncateLength=n.columnTruncateLength||this.fftSize,this.audioTrackConstraints=n.audioTrackConstraints,this.smoothingTimeConstant=n.smoothingTimeConstant||0,this.includeSpectrogram=n.includeSpectrogram!==!1,this.includeWaveform=n.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static create(){return z(this,arguments,function*(n={}){if(!ee().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let e=new t(n);return yield e.start(),e})}start(){return z(this,null,function*(){try{this.stream=yield navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(r){throw new Error(`Error thrown while initializing video stream: ${r.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let n=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new n,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);let e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)})}next(){return z(this,null,function*(){if(this.isClosed)return{value:null,done:!0};let n,e,r=yield this.getAudioData();if(this.includeSpectrogram){let o=this.flattenQueue(r.freqDataQueue);n=this.getTensorFromAudioDataArray(o,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let o=this.flattenQueue(r.timeDataQueue);e=this.getTensorFromAudioDataArray(o,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:n,waveform:e},done:!1}})}capture(){return z(this,null,function*(){return(yield this.next()).value})}getAudioData(){return z(this,null,function*(){let n=[],e=[],r=0;return new Promise(o=>{let i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&o({freqDataQueue:n,timeDataQueue:e}),n.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++r===this.numFrames&&(clearInterval(i),o({freqDataQueue:n,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(n){let e=n[0].length,r=new Float32Array(n.length*e);return n.forEach((o,i)=>r.set(o,i*e)),r}getTensorFromAudioDataArray(n,e){let r=new Float32Array(x.sizeFromShape(e));return r.set(n,r.length-n.length),Yr(r,e)}};var GD=class t extends Fr{constructor(n,e){if(super(),this.webcamVideoElement=n,this.webcamConfig=e,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Jn([0],"int32"),this.webcamConfig.centerCrop){let r=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,o=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,i=(1-r)/2,s=(1-o)/2,a=i+r,l=o+s;this.cropBox=Ra([s,i,l,a],[1,4])}else this.cropBox=Ra([0,0,1,1],[1,4])}summary(){return"webcam"}static create(r){return z(this,arguments,function*(n,e={}){if(!ee().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!n){if(n=document.createElement("video"),!e.resizeWidth||!e.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");n.width=e.resizeWidth,n.height=e.resizeHeight}let o=new t(n,e);return yield o.start(),o})}start(){return z(this,null,function*(){this.webcamConfig.facingMode&&x.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=yield navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(n){throw n.message=`Error thrown while initializing video stream: ${n.message}`,n}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(n){console.log(n),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(n=>{this.webcamVideoElement.onloadedmetadata=()=>{n()}})})}next(){return z(this,null,function*(){if(this.isClosed)return{value:null,done:!0};let n;try{n=ek.fromPixels(this.webcamVideoElement)}catch(e){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(e)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(n),done:!1}}catch(e){throw new Error(`Error thrown cropping the video: ${e.message}`)}finally{n.dispose()}else return{value:n,done:!1}})}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(n){return ne(()=>{let e=gr(ge(n,"float32"),0),r;r=Mi.cropAndResize(e,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let o=r.shape;return $(r,o.slice(1))})}capture(){return z(this,null,function*(){return(yield this.next()).value})}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}};var Hv=class{};var Ak=class extends Fr{split(n){return new xL(this,n)}},xL=class extends Ak{constructor(n,e){super(),this.upstream=n,this.impl=new _L(n,e)}summary(){return this.impl.summary()}next(){return z(this,null,function*(){return this.impl.next()})}},_L=class extends Y0{constructor(n,e){super(),this.upstream=n,this.separator=e,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}pump(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);let e=n.value.split(this.separator);e[0]=this.carryover+e[0];for(let r of e.slice(0,-1))this.outputQueue.push(r);return this.carryover=e[e.length-1],!0})}};var WD=class extends Fr{decodeUTF8(){return new kL(this)}},kL=class extends Ak{constructor(n){super(),this.upstream=n,this.impl=new bL(n)}summary(){return this.impl.summary()}next(){return z(this,null,function*(){return this.impl.next()})}},bL=class extends Y0{constructor(n){if(super(),this.upstream=n,ee().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:e}=oL();this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}pump(){return z(this,null,function*(){let n=yield this.upstream.next(),e;if(n.done)return!1;e=n.value;let r;return ee().get("IS_BROWSER")?r=this.decoder.decode(e,{stream:!0}):r=this.decoder.write(Buffer.from(e.buffer)),this.outputQueue.push(r),!0})}};var Uv=class extends WD{constructor(n,e={}){super(),this.file=n,this.options=e,x.assert(n instanceof Uint8Array||(ee().get("IS_BROWSER")?n instanceof File||n instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=e.offset||0,this.chunkSize=e.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}next(){return z(this,null,function*(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:yield new Promise((e,r)=>{let o=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,o)));else{let i=new FileReader;i.onload=a=>{let l=i.result;if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),!(l instanceof Uint8Array))return r(new TypeError("FileReader returned unknown type."));e(l)},i.onabort=a=>r(new Error("Aborted")),i.onerror=a=>r(new Error(a.type));let s=this.file.slice(this.offset,o);i.readAsArrayBuffer(s)}this.offset=o}),done:!1}})}};function Bte(r){return z(this,arguments,function*(t,n={},e){let o,i;typeof t=="string"?o=t:(o=t.url,i=a5e(t));let s=yield(e||x.fetch)(o,i);if(s.ok){let a=new Uint8Array(yield s.arrayBuffer());return new Uv(a,n)}else throw new Error(s.statusText)})}var a5e=t=>({method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity});function qD(t){return typeof t=="string"&&t.slice(0,7)==="file://"}var Gv=class extends Hv{constructor(n,e={}){super(),this.input=n,this.options=e}iterator(){return z(this,null,function*(){if(qD(this.input)&&ee().get("IS_NODE")){let n=Lte();this.input=n.readFileSync(this.input.slice(7))}return new Uv(this.input,this.options)})}};var Wv=class extends Hv{constructor(n,e={}){super(),this.url=n,this.fileOptions=e}iterator(){return z(this,null,function*(){return qD(this.url)?new Gv(this.url,this.fileOptions).iterator():Bte(this.url,this.fileOptions)})}};function $te(t,n={}){return new zv(new Wv(t),n)}function Vte(t){let n=Ik(t);return ps(()=>z(this,null,function*(){return n}))}function jte(t){return ps(()=>z(this,null,function*(){let n=yield t();return Ik(()=>n.next())}))}function zte(t,n){return z(this,null,function*(){return GD.create(t,n)})}function Hte(t){return z(this,null,function*(){return UD.create(t)})}var KD="4.22.0";function be(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&x.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the CPU backend.`)})}var l5e=Jo.whereImpl,ZD=(()=>{class t extends Sc{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Nh(this,ra())}write(e,r,o){this.firstUse&&(this.firstUse=!1,ee().get("IS_NODE")&&O.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:o,refCount:1}),i}makeTensorInfo(e,r,o){let i;if(r==="string"&&o!=null&&o.length>0&&x.isString(o[0])){let s=o.map(a=>x.encodeString(a));i=this.write(s,e,r)}else i=this.write(o,e,r);return{dataId:i,shape:e,dtype:r}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let r=this.data.get(e);r.refCount++}decRef(e){if(this.data.has(e)){let r=this.data.get(e);r.refCount--}}move(e,r,o,i,s){this.data.set(e,{values:r,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}read(e){return z(this,null,function*(){return this.readSync(e)})}readSync(e){let{dtype:r,complexTensorInfos:o}=this.data.get(e);if(r==="complex64"){let i=this.readSync(o.real.dataId),s=this.readSync(o.imag.dataId);return O.mergeRealAndImagArrays(i,s)}return x.convertBackendValuesAndArrayBuffer(this.data.get(e).values,r)}bufferSync(e){let r=this.readSync(e.dataId);if(e.dtype==="string")try{let o=r.map(i=>x.decodeString(i));return at(e.shape,e.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return at(e.shape,e.dtype,r)}makeOutput(e,r,o){return ra().makeTensorFromTensorInfo(this.makeTensorInfo(r,o,e),this)}disposeData(e,r=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!r&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:o}=this.data.get(e);o!=null&&(this.disposeData(o.real.dataId,!0),this.disposeData(o.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}time(e){return z(this,null,function*(){let r=x.now();return e(),{kernelMs:x.now()-r}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){be([e],"where");let r=this.readSync(e.dataId);return l5e(e.shape,r)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var Pk={};Jt(Pk,{addImpl:()=>TL,bincountImpl:()=>Zv,bincountReduceImpl:()=>XD,bitwiseAndImpl:()=>DL,castImpl:()=>ML,ceilImpl:()=>EL,concatImpl:()=>YD,equalImpl:()=>IL,expImpl:()=>AL,expm1Impl:()=>OL,floorDivImpl:()=>PL,floorImpl:()=>FL,gatherNdImpl:()=>QD,gatherV2Impl:()=>JD,greaterEqualImpl:()=>LL,greaterImpl:()=>BL,lessEqualImpl:()=>VL,lessImpl:()=>$L,linSpaceImpl:()=>eE,logImpl:()=>jL,maxImpl:()=>tE,maximumImpl:()=>zL,minimumImpl:()=>HL,multiplyImpl:()=>Rk,negImpl:()=>UL,notEqualImpl:()=>GL,prodImpl:()=>WL,raggedGatherImpl:()=>nE,raggedRangeImpl:()=>rE,raggedTensorToTensorImpl:()=>oE,rangeImpl:()=>iE,rsqrtImpl:()=>KL,scatterImpl:()=>Wl,sigmoidImpl:()=>xne,simpleAbsImpl:()=>SL,sliceImpl:()=>XL,sparseFillEmptyRowsImpl:()=>sE,sparseReshapeImpl:()=>aE,sparseSegmentReductionImpl:()=>Yv,sqrtImpl:()=>bne,squaredDifferenceImpl:()=>YL,staticRegexReplaceImpl:()=>QL,stridedSliceImpl:()=>lE,stringNGramsImpl:()=>cE,stringSplitImpl:()=>uE,stringToHashBucketFastImpl:()=>dE,subImpl:()=>e7,tileImpl:()=>pE,topKImpl:()=>hE,transposeImpl:()=>Xv,uniqueImpl:()=>fE});function SL(t){let n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}var c5e=t=>{let{x:n}=t.inputs,e=t.backend;be(n,"abs");let r=new Float32Array(x.sizeFromShape(n.shape)),o=e.data.get(n.dataId).values;return r=SL(o),e.makeOutput(r,n.shape,n.dtype)},Ute={kernelName:xd,backendName:"cpu",kernelFunc:c5e};function an(t){return(n,e,r,o,i)=>{let s=O.assertAndGetBroadcastShape(n,e),a=s.length,l=x.computeStrides(s),c=x.sizeFromShape(s),u=x.getTypedArrayFromDType(i,c),d=n.length,p=e.length,h=x.computeStrides(n),f=x.computeStrides(e),m=O.getBroadcastDims(n,s),g=O.getBroadcastDims(e,s);if(m.length+g.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],o[v%o.length]);else for(let v=0;v<u.length;++v){let w=x.indexToLoc(v,a,l),y=w.slice(-d);m.forEach(I=>y[I]=0);let _=x.locToIndex(y,d,h),k=w.slice(-p);g.forEach(I=>k[I]=0);let T=x.locToIndex(k,p,f);u[v]=t(r[_],o[T])}return[u,s]}}function xo(t){let{inputs:n,backend:e}=t,{real:r,imag:o}=n,i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,a=e.makeTensorInfo(r.shape,"complex64"),l=e.data.get(a.dataId);return l.complexTensorInfos={real:e.makeTensorInfo(r.shape,"float32",i),imag:e.makeTensorInfo(o.shape,"float32",s)},a}var Gte={kernelName:og,backendName:"cpu",kernelFunc:xo};function qv(t,n,e="float32"){if(e==="complex64"){let o=qv(t,n,"float32"),i=qv(t,n,"float32");return xo({inputs:{real:o,imag:i},backend:t})}let r=x.makeZerosTypedArray(x.sizeFromShape(n),e);return t.makeTensorInfo(n,e,r)}function fi(t){let{inputs:n,backend:e}=t,{x:r}=n;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var Wte={kernelName:_l,backendName:"cpu",kernelFunc:fi};function Ua(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.data.get(r.dataId).complexTensorInfos.real,i=e.data.get(o.dataId).values;return e.makeTensorInfo(o.shape,o.dtype,i)}var qte={kernelName:Pg,backendName:"cpu",kernelFunc:Ua};function ML(t,n,e,r){if(r==="int32"){let o=Int32Array.from(t);return[n,"int32",o]}if(r==="bool"){let o=x.toTypedArray([0],e),[i,s]=an((a,l)=>a!==l?1:0)(n,[],t,o,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${e} to ${r}`)}function Ga(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return fi({inputs:{x:o},backend:e});let u=qv(e,o.shape,o.dtype),d=Ga({inputs:{x:o},backend:e,attrs:{dtype:"float32"}}),p=xo({inputs:{real:d,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),p}if(o.dtype==="complex64"){let u=Ua({inputs:{input:o},backend:e}),d=Ga({inputs:{x:u},backend:e,attrs:{dtype:i}});return e.disposeIntermediateTensorInfo(u),d}if(!x.hasEncodingLoss(o.dtype,i)){let u=fi({inputs:{x:o},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:i}}let s=e.data.get(o.dataId).values,[a,l,c]=ML(s,o.shape,o.dtype,i);return e.makeTensorInfo(a,l,c)}var Kte={kernelName:xl,backendName:"cpu",kernelFunc:Ga};function fn(t,n,e,r){return e==null?({inputs:o,backend:i})=>{let{a:s,b:a}=o,l=i;be([s,a],t);let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=s.dtype==="string"?O.fromUint8ToStringArray(c):c,p=s.dtype==="string"?O.fromUint8ToStringArray(u):u,h=r||s.dtype,[f,m]=n(s.shape,a.shape,d,p,h);return l.makeTensorInfo(m,h,f)}:({inputs:o,backend:i})=>{let{a:s,b:a}=o,l=i;if(s.dtype==="complex64"||a.dtype==="complex64"){let c=Ga({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,p=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,f=l.data.get(p.dataId).values,m=Ga({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),v=g.complexTensorInfos.real,w=g.complexTensorInfos.imag,y=l.data.get(v.dataId).values,_=l.data.get(w.dataId).values,[k,T,I]=e(s.shape,a.shape,h,f,y,_),A=l.makeTensorInfo(I,"float32",k),P=l.makeTensorInfo(I,"float32",T),N=xo({inputs:{real:A,imag:P},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(A),l.disposeIntermediateTensorInfo(P),N}else{let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=r||s.dtype,[p,h]=n(s.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,p)}}}function Kv(t){return(n,e,r,o,i,s)=>{let a=O.assertAndGetBroadcastShape(n,e),l=x.sizeFromShape(a),c=a.length,u=x.computeStrides(a),d=x.getTypedArrayFromDType("float32",l),p=x.getTypedArrayFromDType("float32",l),h=O.getBroadcastDims(n,a),f=O.getBroadcastDims(e,a),m=O.mergeRealAndImagArrays(r,o),g=O.mergeRealAndImagArrays(i,s),v=n.length,w=x.computeStrides(n),y=e.length,_=x.computeStrides(e);if(h.length+f.length===0)for(let k=0;k<d.length;k++){let T=k%m.length,I=k%g.length,A=t(m[T*2],m[T*2+1],g[I*2],g[I*2+1]);d[k]=A.real,p[k]=A.imag}else for(let k=0;k<d.length;k++){let T=x.indexToLoc(k,c,u),I=T.slice(-v);h.forEach(S=>I[S]=0);let A=x.locToIndex(I,v,w),P=T.slice(-y);f.forEach(S=>P[S]=0);let N=x.locToIndex(P,y,_),B=t(m[A*2],m[A*2+1],g[N*2],g[N*2+1]);d[k]=B.real,p[k]=B.imag}return[d,p,a]}}var TL=an((t,n)=>t+n),u5e=Kv((t,n,e,r)=>({real:t+e,imag:n+r})),Lu=fn(Sa,TL,u5e),Zte={kernelName:Sa,backendName:"cpu",kernelFunc:Lu};function Zv(t,n,e,r,o){let i=x.sizeFromShape(r),s=x.makeZerosTypedArray(o,e);for(let a=0;a<t.length;a++){let l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(i>0?s[l]+=n[a]:s[l]+=1)}return s}function XD(t,n,e,r=!1){let o=t.shape[0],i=t.shape[1],s=at([o,e],n.dtype);for(let a=0;a<o;a++)for(let l=0;l<i;l++){let c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||(r?s.set(1,a,c):n.size>0?s.set(s.get(a,c)+n.get(a,l),a,c):s.set(s.get(a,c)+1,a,c))}return s}var DL=an((t,n)=>t&n),d5e=fn(Rh,DL),Xte={kernelName:Rh,backendName:"cpu",kernelFunc:d5e};function Fo(t){return(n,e,r)=>{let o=x.getArrayFromDType(e,n.length);for(let i=0;i<n.length;++i)o[i]=t(n[i],r);return o}}function Mt(t,n,e){let r=Fo(n);return hs(t,r,e)}function hs(t,n,e){return({inputs:r,attrs:o,backend:i})=>{let{x:s}=r;be(s,t);let a=i,l=a.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=O.fromUint8ToStringArray(l)}else c=l;let u=e||s.dtype,d=n(c,u,o);return a.makeTensorInfo(s.shape,u,d)}}var EL=Fo(t=>Math.ceil(t)),p5e=hs(Fc,EL),Yte={kernelName:Fc,backendName:"cpu",kernelFunc:p5e};function YD(t,n,e,r){let o=x.getArrayFromDType(e,x.sizeFromShape(n));if(r&&e!=="string"){let i=0;t.forEach(s=>{let a=x.sizeFromShape(s.shape);o.set(s.vals,i),i+=a})}else{let i=0;t.forEach(s=>{let a=e==="string"?O.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let c=0;c<s.shape[0];++c){let u=c*n[1]+i;for(let d=0;d<s.shape[1];++d)o[u+d]=a[l++]}i+=s.shape[1]})}return o}var IL=an((t,n)=>t===n?1:0),NL=fn(Oh,IL,null,"bool"),Qte={kernelName:Oh,backendName:"cpu",kernelFunc:NL};var AL=Fo(t=>Math.exp(t)),RL=hs(zc,AL,"float32"),Jte={kernelName:zc,backendName:"cpu",kernelFunc:RL};var OL=Fo(t=>Math.expm1(t)),h5e=hs(Hc,OL),ene={kernelName:Hc,backendName:"cpu",kernelFunc:h5e};var FL=Fo(t=>Math.floor(t)),f5e=hs(Uc,FL),tne={kernelName:Uc,backendName:"cpu",kernelFunc:f5e};var PL=an((t,n)=>Math.floor(t/n)),m5e=fn(Gc,PL,null,"int32"),nne={kernelName:Gc,backendName:"cpu",kernelFunc:m5e};function QD(t,n,e,r,o,i,s,a,l){let c=at([r,i],e);for(let u=0;u<r;u++){let d=[],p=0;for(let h=0;h<o;h++){let f=t[u*o+h];p+=f*s[h],d.push(f)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<i;h++)c.values[u*i+h]=n.get(...n.indexToLoc(p*i+h))}return c}function JD(t,n,e){let r=at(e,t.dtype);for(let o=0;o<r.size;++o){let s=r.indexToLoc(o).slice(),a=s[0],l=s[2],c=n.locToIndex([a,l]);s[2]=n.values[c];let u=t.locToIndex(s);0<=u&&u<t.values.length&&(r.values[o]=t.values[u])}return r}var BL=an((t,n)=>t>n?1:0),g5e=fn(Fh,BL,null,"bool"),rne={kernelName:Fh,backendName:"cpu",kernelFunc:g5e};var LL=an((t,n)=>t>=n?1:0),v5e=fn(Wc,LL,null,"bool"),one={kernelName:Wc,backendName:"cpu",kernelFunc:v5e};var $L=an((t,n)=>t<n?1:0),w5e=fn(Ph,$L,null,"bool"),ine={kernelName:Ph,backendName:"cpu",kernelFunc:w5e};var VL=an((t,n)=>t<=n?1:0),y5e=fn(Bh,VL,null,"bool"),sne={kernelName:Bh,backendName:"cpu",kernelFunc:y5e};function eE(t,n,e){let r=(n-t)/(e-1),o=x.makeZerosTypedArray(e,"float32");o[0]=t;for(let i=1;i<o.length;i++)o[i]=o[i-1]+r;return o}var jL=Fo(t=>Math.log(t)),x5e=hs(Xc,jL),ane={kernelName:Xc,backendName:"cpu",kernelFunc:x5e};function tE(t,n,e,r){let o=x.getTypedArrayFromDType(r,x.sizeFromShape(e));for(let i=0;i<o.length;++i){let s=i*n,a=t[s];for(let l=0;l<n;++l){let c=t[s+l];(Number.isNaN(c)||c>a)&&(a=c)}o[i]=a}return o}var zL=an((t,n)=>Math.max(t,n)),_5e=fn(Qc,zL),lne={kernelName:Qc,backendName:"cpu",kernelFunc:_5e};var HL=an((t,n)=>Math.min(t,n)),k5e=fn(Jc,HL),cne={kernelName:Jc,backendName:"cpu",kernelFunc:k5e};var Rk=an((t,n)=>t*n),b5e=Kv((t,n,e,r)=>({real:t*e-n*r,imag:t*r+n*e})),Q0=fn(tu,Rk,b5e),une={kernelName:tu,backendName:"cpu",kernelFunc:Q0};function UL(t,n,e){let r=x.createScalarValue(-1,e);return Rk([],n,r,t,e)}function C5e(t){let{inputs:n,backend:e}=t,{x:r}=n;be(r,"neg");let o=e.data.get(r.dataId).values,[i,s]=UL(o,r.shape,r.dtype);return e.makeTensorInfo(s,r.dtype,i)}var dne={kernelName:qd,backendName:"cpu",kernelFunc:C5e};var GL=an((t,n)=>t!==n?1:0),S5e=fn(jh,GL,null,"bool"),pne={kernelName:jh,backendName:"cpu",kernelFunc:S5e};function Xv(t,n,e,r,o){let i=n.length,s=x.sizeFromShape(n),a=x.computeStrides(n),l=x.computeStrides(o),c=x.getTypedArrayFromDType(e,x.sizeFromShape(o));for(let u=0;u<s;++u){let d=x.indexToLoc(u,i,a),p=new Array(d.length);for(let f=0;f<p.length;f++)p[f]=d[r[f]];let h=x.locToIndex(p,i,l);c[h]=t[u]}return c}function yr(t){let{inputs:n,attrs:e,backend:r}=t,{x:o}=n,{perm:i}=e;be(o,"transpose");let s=o.shape.length,a=new Array(s);for(let d=0;d<a.length;d++)a[d]=o.shape[i[d]];let l=r.data.get(o.dataId).values,c=Xv(l,o.shape,o.dtype,i,a);return{dataId:r.write(c,a,o.dtype),shape:a,dtype:o.dtype}}var hne={kernelName:bl,backendName:"cpu",kernelFunc:yr};function WL(t,n,e,r){let[o,i]=O.computeOutAndReduceShapes(t,r),s=Ur(n,"int32"),a=x.makeZerosTypedArray(x.sizeFromShape(o),s),l=x.sizeFromShape(i);for(let c=0;c<a.length;++c){let u=c*l,d=1;for(let p=0;p<l;++p)d*=e[u+p];a[c]=d}return{outVals:a,outShape:o,outDtype:s}}function M5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;be(o,"prod");let a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=O.getAxesPermutation(l,a),u=l,d=o,p=[];c!=null&&(d=yr({inputs:{x:o},backend:e,attrs:{perm:c}}),p.push(d),u=O.getInnerMostAxes(u.length,a));let h=e.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=WL(d.shape,d.dtype,h,u),v=m;return s&&(v=O.expandShapeToKeepDim(m,l)),p.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.makeTensorInfo(v,g,f)}var fne={kernelName:Jd,backendName:"cpu",kernelFunc:M5e};function T5e(t,n,e){t.forEach((r,o)=>{if(r<0||r>=e){let i=x.indexToLoc(o,n.length,x.computeStrides(n)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${e})`)}})}function D5e(t,n){for(let e=0;e<t.length;++e){let r=t[e],o=e===t.length-1?n:t[e+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function E5e(t,n,e,r){let o=[],i=0,s=n.length-1+e.length,a=new Array(s).fill(null).map(()=>[0]);D5e(e,r);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];let u=n[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let p=0;p<e.length;++p){let h=e[p],f=p+n.length-1;if(f>=0){let m=a[f],g=m[m.length-1]-h[u];for(let v=u;v<d;++v)a[f].push(h[v+1]+g)}u=h[u],d=h[d]}d!==u&&(o.push([u,d]),i+=d-u)}return{outSplits:a,valueSlices:o,numValues:i}}function I5e(t){let n=[];for(let e=0;e<t.length;++e){let r=t[e].length,o=x.getArrayFromDType("int32",r);n.push(o),t[e].forEach((i,s)=>o[s]=i)}return n}function mne(t,n){let e=t.slice(0,n);for(;e.length<n;)e.push(1);for(let r=n;r<t.length;r++)e[n-1]*=t[r];return e}function N5e(t,n,e,r,o,i){let s=mne(n,2)[1],a=mne(i,2)[1],l=0;for(let c of e)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)o[l*a+d]=t[u*s+d];++l}}function A5e(t,n,e,r,o){let i=n.slice();i[0]=o;let s=x.getArrayFromDType(e,x.sizeFromShape(i)),a=t.length,l=a===0?0:a/n[0];return N5e(t,n,r,l,s,i),[s,i]}function nE(t,n,e,r,o,i,s,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(n[0].length===0)throw new Error("Split tensors must not be scalars");let l=n[0][0]-1;if(T5e(i,s,l),r.length===0)throw new Error("params.rank must be nonzero");let c=r[0],{outSplits:u,valueSlices:d,numValues:p}=E5e(i,s,t,c),h=I5e(u),f=A5e(e,r,o,d,p);return[h,f[0],f[1]]}var gne=2147483647;function rE(t,n,e,r,o,i,s){if(n.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let a=n.length===0,l=o.length===0,c=s.length===0,u=[];a||u.push(n[0]),l||u.push(o[0]),c||u.push(s[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");let d=u.length===0?1:u[0],p=x.getArrayFromDType("int32",d+1);p[0]=0;for(let g=0;g<d;++g){let v=a?t[0]:t[g],w=l?r[0]:r[g],y=c?i[0]:i[g];if(y===0)throw new Error("Requires delta != 0");let _;if(y>0&&w<v||y<0&&w>v)_=0;else if(_=Math.ceil(Math.abs((w-v)/y)),_>gne)throw new Error(`Requires ((limit - start) / delta) <= ${gne}`);p[g+1]=p[g]+_}let h=p[d],f=x.getArrayFromDType(e,h),m=0;for(let g=0;g<d;++g){let v=p[g+1]-p[g],w=a?t[0]:t[g],y=c?i[0]:i[g];for(let _=0;_<v;++_)f[m++]=w,w+=y}return[p,f]}var Wa=O.RowPartitionType,qL=class t{constructor(n,e,r,o,i,s,a,l,c,u){this.shape=n,this.shapeShape=e,this.values=r,this.valuesShape=o,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=O.getRowPartitionTypesHelper(u),this.raggedRank=O.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===Wa.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===Wa.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){let e=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case Wa.VALUE_ROWIDS:return t.getMaxWidthValueRowID(e);case Wa.ROW_SPLITS:return t.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${Wa[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){let e=n.length;if(e===0||e===1)return 0;let r=0;for(let o=0;o<e-1;++o){let i=n[o+1]-n[o];i>r&&(r=i)}return r}static getMaxWidthValueRowID(n){let e=n.length;if(e===0)return 0;let r=0,o=n[0],i=0;for(let s=1;s<e;++s){let a=n[s];a!==o&&(o=a,i=Math.max(s-r,i),r=s)}return Math.max(e-r,i)}tensorShapeFromTensor(n,e,r=!0){if(e.length===0){if(n[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return wne(n,r)}calculateOutputSize(n){let e=this.valuesShape,r=this.defaultValueShape;O.validateDefaultValueShape(r,e);let o=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=O.combineRaggedTensorToTensorShapes(this.raggedRank,o,e);s[0]<0&&(s[0]=n);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(n,e,r){let o=Math.min(n,r),i=[],s=0;for(let a=0;a<o;++a,s+=e)i.push(s);for(let a=o;a<n;++a)i.push(-1);return x.assert(i.length===n,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(n,e,r,o){let i=n.length,s=[];for(let a=0;a<i-1;++a){let l=n[a+1]-n[a],c=Math.min(o,l),u=e[a];u===-1&&(c=0);for(let d=0;d<c;++d)s.push(u),u+=r;for(let d=0;d<l-c;++d)s.push(-1)}if(i>0&&s.length!==n[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(n,e,r,o){let i=n.length,s=[];if(i===0)return[];let a=0,l=n[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];s.push(c);for(let u=1;u<i;++u){let d=n[u];if(d===l)c>=0&&(++a,a<o?c+=r:c=-1);else{if(a=0,l=d,d>=e.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${e.length}`);c=e[d]}s.push(c)}if(s.length!==n.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(n,e,r,o){let i=this.getRowPartitionTensor(n),s=this.getRowPartitionTypeByDimension(n);switch(s){case Wa.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,e,r,o);case Wa.ROW_SPLITS:if(i.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(i,e,r,o);default:throw new Error(`Unsupported partition type: ${Wa[s]}`)}}getFirstDimensionSize(){let n=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let e=this.rowPartitionTypes[0];switch(e){case Wa.FIRST_DIM_SIZE:return n[0];case Wa.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Wa.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Wa[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),r=this.calculateOutputSize(e),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*r[l+1];let i=wne(r,!1),s=x.getArrayFromDType(this.valuesDType,x.sizeFromShape(i));if(o[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(e,o[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,o[c],r[c]);this.setOutput(this.raggedRank,l,s,i)}return[i,s]}setOutput(n,e,r,o){if(r.length===0)return;let i=this.values,s=r,a=o.slice();a=a.slice(n+1);let l=x.sizeFromShape(a),c=e.length,u=this.defaultValue;if(u.length!==l&&u.length!==1){let f=this.defaultValueShape;ne(()=>{let m=$(u,f);u=Il(m,a).dataSync()})}let d=0,p=0,h=0;for(let f=0;f<=c;++f){let m=f<c?e[f]:-1;if(m===h){++h;continue}if(p<h){let g=i.subarray(d*l),v=s.subarray(p*l),w=(h-p)*l;vne(v,g,w)}if(f>=c){let g=r.length;m=Math.floor(g/l)}if(m>h)if(this.defaultValue.length===1)s.subarray(h*l,m*l).fill(this.defaultValue[0]),h=m;else for(;m>h;){let g=s.slice(h*l);vne(g,u,l),++h}m<0?(d=f+1,p=h):(d=f,p=h,h=p+1)}}};function vne(t,n,e){for(let r=0;r<e;r++)t[r]=n[r]}function wne(t,n){let e=[];for(let r of t){if(r<0){if(!n)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}e.push(r)}return e}function oE(t,n,e,r,o,i,s,a,l,c){return new qL(t,n,e,r,o,i,s,a,l,c).compute()}function iE(t,n,e,r){let o=t===n,i=t<n&&e<0,s=n<t&&e>1;if(o||i||s)return x.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((n-t)/e)),l=x.makeZerosTypedArray(a,r);n<t&&e===1&&(e=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}var KL=Fo(t=>1/Math.sqrt(t)),R5e=hs(au,KL),yne={kernelName:au,backendName:"cpu",kernelFunc:R5e};function Wl(t,n,e,r,o,i,s,a,l,c){let u=[r/o,o],d=t.values,p=n.values;if(r===0)return at(e,n.dtype);let h=l instanceof yn?l:at(u,n.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let f=0;f<i;f++){let m=[],g=0;for(let v=0;v<s;v++){let w=d[f*s+v];m.push(w),g+=w*a[v]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${e}`);for(let v=0;v<o;v++)c?h.values[g*o+v]+=p[f*o+v]:h.values[g*o+v]=n.rank===0?p[0]:p[f*o+v]}return h}var xne=Fo(t=>1/(1+Math.exp(-t))),ZL=Mt(pu,t=>1/(1+Math.exp(-t))),_ne={kernelName:pu,backendName:"cpu",kernelFunc:ZL};function XL(t,n,e,r,o){let i=yo.isSliceContinous(r,n,e),s=x.sizeFromShape(e),a=x.computeStrides(r);if(i){let d=yo.computeFlatOffset(n,a);return o==="string"?t.slice(d,d+s):t.subarray(d,d+s)}let l=o==="string"?O.fromUint8ToStringArray(t):t,c=at(r,o,l),u=at(e,o);for(let d=0;d<u.size;++d){let p=u.indexToLoc(d),h=p.map((f,m)=>f+n[m]);u.set(c.get(...h),...p)}return o==="string"?O.fromStringArrayToUint8(u.values):u.values}function qa(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,size:s}=r;be(o,"slice");let[a,l]=yo.parseSliceParams(o,i,s);yo.assertParamsValid(o,a,l);let c=e.data.get(o.dataId).values,u=XL(c,a,l,o.shape,o.dtype);return e.makeTensorInfo(l,o.dtype,u)}var kne={kernelName:ip,backendName:"cpu",kernelFunc:qa};function sE(t,n,e,r,o,i,s){let a=n[0],l=i[0],c=new Array(l),u=new Array(a),d=n[1];if(l===0){if(a!==0)throw new Error(O.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));let g=x.getArrayFromDType(e,0),v=x.getArrayFromDType(o,0);return[g,[0,d],v,c,u]}let p=!0,h=0,f=new Array(l).fill(0);for(let g=0;g<a;++g){let v=t[g*d];if(v<0)throw new Error(O.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,v));if(v>=l)throw new Error(O.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,v,l));++f[v],p=p&&v>=h,h=v}let m=!0;for(let g=0;g<l;++g){let v=f[g]===0;c[g]=v,m=m&&!v,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&p){let g=t,v=r;for(let w=0;w<a;++w)u[w]=w;return[g,[a,d],v,c,u]}else{let g=f[l-1],v=x.getArrayFromDType(e,g*d),w=x.getArrayFromDType(o,g),y=new Array(l).fill(0);for(let _=0;_<a;++_){let k=t[_*d],T=y[k],I=(k===0?0:f[k-1])+T;y[k]++;for(let A=0;A<d;++A)v[I*d+A]=t[_*d+A];w[I]=r[_],u[_]=I}for(let _=0;_<l;++_)if(y[_]===0){let T=_===0?0:f[_-1];v[T*d+0]=_;for(let I=1;I<d;++I)v[T*d+I]=0;w[T]=s}return[v,[g,d],w,c,u]}}function aE(t,n,e,r,o){let i=x.sizeFromShape(r),s=n[0],a=o.length,l=[],c=1,u=-1;for(let g=0;g<a;++g){let v=o[g];if(v===-1){if(u!==-1)throw new Error(O.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,g));u=g,l.push(1)}else{if(v<0)throw new Error(O.getSparseReshapeNegativeOutputDimErrorMessage(g,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(O.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let g=Math.trunc(i/c);if(c*g!==i)throw new Error(O.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=g}if(x.sizeFromShape(l)!==i)throw new Error(O.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let p=r.length,h=[];if(p>0){h[p-1]=1;for(let g=p-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}let f=[];if(a>0){f[a-1]=1;for(let g=a-2;g>=0;--g)f[g]=f[g+1]*l[g+1]}let m=x.getArrayFromDType(e,s*a);for(let g=0;g<s;++g){let v=0;for(let w=0;w<p;++w)v+=t[g*p+w]*h[w];for(let w=0;w<a;++w)m[g*a+w]=Math.trunc(v/f[w]),v%=f[w]}return[m,[s,a],l]}function Yv(t,n,e,r,o,i=!1,s=0){let a=r.length,l=[n[0],t.length/n[0]],c=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(O.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=n.slice();p[0]=d;let h=p.reduce((y,_)=>y*_,1),f=x.getArrayFromDType(e,h);if(a===0)return d>0&&f.fill(s),[f,p];if(d<=0)throw new Error(O.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,g=1,v=0,w=o[m];for(;;){let y=0;if(g<a){if(y=o[g],w===y){++g;continue}if(w>=y)throw new Error(O.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(w<0||w>=d)throw new Error(O.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(w,d));w>v&&f.fill(s,v*c,w*c);for(let _=m;_<g;++_){let k=r[_];if(k<0||k>=l[0])throw new Error(O.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_,r[_],l[0]));for(let T=0;T<c;T++)f[w*c+T]+=t[k*c+T]}if(i)for(let _=0;_<c;_++)f[w*c+_]/=g-m;if(m=g,++g,v=w+1,w=y,g>a)break}return v<d&&f.fill(s,v*c,d*c),[f,p]}var bne=Fo(t=>Math.sqrt(t)),O5e=Mt(fu,t=>Math.sqrt(t)),Cne={kernelName:fu,backendName:"cpu",kernelFunc:O5e};var YL=an((t,n)=>{let e=t-n;return e*e}),F5e=fn(mu,YL),Sne={kernelName:mu,backendName:"cpu",kernelFunc:F5e};var QL=Fo((t,n)=>{let{pattern:e,replaceGlobal:r,rewrite:o}=n;return t.replace(new RegExp(e,r?"g":""),o)}),P5e=hs(zh,QL),Mne={kernelName:zh,backendName:"cpu",kernelFunc:P5e};function lE(t,n,e,r){let o=at(t,n.dtype);for(let i=0;i<o.size;i++){let s=o.indexToLoc(i),a=new Array(s.length);for(let l=0;l<a.length;l++)a[l]=s[l]*e[l]+r[l];o.set(n.get(...a),...s)}return o}var JL=class{constructor(n,e,r,o,i,s){this.separator=x.encodeString(n),this.nGramWidths=e,this.leftPad=x.encodeString(r),this.rightPad=x.encodeString(o),this.padWidth=i,this.preserveShort=s}getPadWidth(n){return Math.min(this.padWidth<0?n-1:this.padWidth,n-1)}getNumNGrams(n,e){let r=this.getPadWidth(e);return Math.max(0,n+2*r-e+1)}createNGrams(n,e,r,o,i,s){for(let a=0;a<i;++a){let l=this.getPadWidth(s),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),d=s-(c+u),p=e+(c>0?0:a-l),h=0;h+=c*this.leftPad.length;for(let w=0;w<d;++w)h+=n[p+w].length;h+=u*this.rightPad.length;let f=c+u+d-1;h+=f*this.separator.length,r[o+a]=new Uint8Array(h);let m=r[o+a],g=0,v=w=>w.forEach(y=>m[g++]=y);for(let w=0;w<c;++w)v(this.leftPad),v(this.separator);for(let w=0;w<d-1;++w)v(n[p+w]),v(this.separator);if(d>0){v(n[p+d-1]);for(let w=0;w<u;++w)v(this.separator),v(this.rightPad)}else{for(let w=0;w<u-1;++w)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(n,e){let r=n.length,o=e.length;if(o>0){let l=e[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<o;++c){let u=e[c]>=l;if(u=u&&e[c]<=r,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${r}]`);l=e[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}let i=o-1,s=x.getArrayFromDType("int32",o);if(r===0||o===0){let l=new Array(r);for(let c=0;c<=i;++c)s[c]=0;return[l,s]}s[0]=0;for(let l=1;l<=i;++l){let c=e[l]-e[l-1],u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),s[l]=s[l-1]+u}let a=new Array(s[i]);for(let l=0;l<i;++l){let c=e[l],u=s[l];if(this.nGramWidths.forEach(d=>{let p=e[l+1]-e[l],h=this.getNumNGrams(p,d);this.createNGrams(n,c,a,u,h,d),u+=h}),this.preserveShort&&u===s[l]){let d=e[l+1]-e[l];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(n,c,a,u,1,p)}}return[a,s]}};function cE(t,n,e,r,o,i,s,a){return new JL(e,r,o,i,s,a).compute(t,n)}function B5e(t,n,e,r){if(!t.length)return;if(n.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(n.length===1){let i=n[0],s=t.indexOf(i);for(;s!==-1;){let a=t.subarray(0,s);(!e||a.length!==0)&&r.push(a),t=t.subarray(s+1),s=t.indexOf(i)}(!e||t.length!==0)&&r.push(t);return}let o=0;for(let i=0;i<t.length+1;i++)if(i===t.length||n.indexOf(t[i])!==-1){let s=t.subarray(o,i);(!e||s.length!==0)&&r.push(s),o=i+1}}function uE(t,n,e){let r=t.length,o=[],i=0,s=0,a=new Array(r);for(let p=0;p<r;++p){let h=o.length;B5e(t[p],n,e,o);let f=o.length-h;a[p]=f,i+=f,s=Math.max(s,f)}let l=x.getArrayFromDType("int32",i*2),c=new Array(i),u=[r,s],d=0;for(let p=0;p<r;++p)for(let h=0;h<a[p];++h)l[d*2]=p,l[d*2+1]=h,c[d]=o[d],++d;return[l,c,u]}function dE(t,n){let e=x.getArrayFromDType("int32",t.length);for(let r=0;r<t.length;++r)e[r]=x.fingerPrint64(t[r]).modulo(n).getLowBitsUnsigned();return e}var e7=an((t,n)=>t-n),L5e=Kv((t,n,e,r)=>({real:t-e,imag:n-r})),Ok=fn(gu,e7,L5e),Tne={kernelName:gu,backendName:"cpu",kernelFunc:Ok};function pE(t,n){let e=new Array(t.rank);for(let o=0;o<e.length;o++)e[o]=t.shape[o]*n[o];let r=at(e,t.dtype);for(let o=0;o<r.values.length;++o){let i=r.indexToLoc(o),s=new Array(t.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%t.shape[l];let a=t.locToIndex(s);r.values[o]=t.values[a]}return r}var Fk=(t,n)=>{let e=n.value-t.value;return e===0?t.index-n.index:e};function Dne(t,n,e=0,r=t.length-1){for(;r>e;){if(r-e>600){let a=r-e+1,l=n-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),p=Math.max(e,Math.floor(n-l*u/a+d)),h=Math.min(r,Math.floor(n+(a-l)*u/a+d));Dne(t,n,p,h)}let o=t[n],i=e,s=r;for(x.swap(t,e,n),Fk(t[r],o)>0&&x.swap(t,e,r);i<s;){for(x.swap(t,i,s),i++,s--;Fk(t[i],o)<0;)i=i+1;for(;Fk(t[s],o)>0;)s=s-1}Fk(t[e],o)===0?x.swap(t,e,s):(s=s+1,x.swap(t,s,r)),s<=n&&(e=s+1),n<=s&&(r=s-1)}}function hE(t,n,e,r,o){let i=n[n.length-1],[s,a]=[t.length/i,i],l=x.getTypedArrayFromDType(e,s*r),c=x.getTypedArrayFromDType("int32",s*r);for(let d=0;d<s;d++){let p=d*a,h=t.subarray(p,p+a),f=new Array(h.length);h.forEach((w,y)=>f[y]={value:w,index:y}),r<f.length&&(Dne(f,r),f=f.slice(0,r)),o&&f.sort(Fk);let m=d*r,g=l.subarray(m,m+r),v=c.subarray(m,m+r);for(let w=0;w<r;w++)g[w]=f[w].value,v[w]=f[w].index}let u=n.slice();return u[u.length-1]=r,[at(u,e,l),at(u,"int32",c)]}function fE(t,n,e,r){let o=x.parseAxisParam(n,e)[0],i=[1,e[0],1];for(let f=0;f<o;f++)i[0]*=e[f];i[1]=e[o];for(let f=o+1;f<e.length;f++)i[2]*=e[f];let s=new Map,a=new Int32Array(e[o]),l=new yn(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let f=0;f<e[o];f++){let m;if(u)m=t[f].toString();else{let v=[];for(let w=0;w<i[0];w++)for(let y=0;y<i[2];y++)v.push(l.get(w,f,y));m=v.join(",")}let g=s.get(m);if(g!=null)a[f]=g;else{let v=s.size;s.set(m,v),a[f]=v,c.push(f)}}let d=i.slice();d[1]=s.size;let p=new yn(d,r);c.forEach((f,m)=>{for(let g=0;g<i[0];g++)for(let v=0;v<i[2];v++)p.set(l.get(g,f,v),g,m,v)});let h=e.slice();return h[o]=d[1],{outputValues:p.values,outputShape:h,indices:a}}var mE="4.22.0";Xx("cpu",()=>new ZD,1);var t7=Mt(Vc,t=>t>=0?t:Math.exp(t)-1),Ene={kernelName:Vc,backendName:"cpu",kernelFunc:t7};function n7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{alpha:i}=r;be([o],"leakyRelu");let s=x.sizeFromShape(o.shape),a=e.data.get(o.dataId).values,l=x.getTypedArrayFromDType("float32",s);for(let c=0;c<a.length;c++)l[c]=a[c]<0?i*a[c]:a[c];return e.makeTensorInfo(o.shape,"float32",l)}var Ine={kernelName:$d,backendName:"cpu",kernelFunc:n7};var $5e=an((t,n)=>t<0?n*t:t);function r7(t){let{inputs:n,backend:e}=t,{x:r,alpha:o}=n;be([r,o],"prelu");let i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,[a,l]=$5e(r.shape,o.shape,i,s,"float32");return e.makeTensorInfo(l,"float32",a)}var Nne={kernelName:Qd,backendName:"cpu",kernelFunc:r7};var o7=Mt(ou,t=>Math.max(0,t)),Ane={kernelName:ou,backendName:"cpu",kernelFunc:o7};var i7=Mt(iu,t=>Math.min(Math.max(0,t),6)),Rne={kernelName:iu,backendName:"cpu",kernelFunc:i7};function J0(t,n,e,r,o){if(e==="linear")return fi({inputs:{x:n},backend:t});if(e==="relu")return o7({inputs:{x:n},backend:t});if(e==="elu")return t7({inputs:{x:n},backend:t});if(e==="relu6")return i7({inputs:{x:n},backend:t});if(e==="prelu")return r7({inputs:{x:n,alpha:r},backend:t});if(e==="leakyrelu")return n7({inputs:{x:n},backend:t,attrs:{alpha:o}});if(e==="sigmoid")return ZL({inputs:{x:n},backend:t});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}function ln(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{shape:i}=r,s=x.sizeFromShape(o.shape),a=x.inferFromImplicitShape(i,s),l=x.sizeFromShape(a);x.assert(s===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),e.incRef(o.dataId);let c=e.data.get(o.dataId);if(c.complexTensorInfos!=null){let u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}var One={kernelName:ep,backendName:"cpu",kernelFunc:ln};function s7(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i}=n,{transposeA:s,transposeB:a}=r;be([o,i],"matMul");let l=o.shape.length,c=i.shape.length,u=s?o.shape[l-2]:o.shape[l-1],d=a?i.shape[c-1]:i.shape[c-2],p=s?o.shape[l-1]:o.shape[l-2],h=a?i.shape[c-2]:i.shape[c-1],f=o.shape.slice(0,-2),m=i.shape.slice(0,-2),g=x.sizeFromShape(f),v=x.sizeFromShape(m),y=ss.assertAndGetBroadcastShape(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,h]);x.assert(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${o.shape} and ${i.shape} and transposeA=${s} and transposeB=${a} must match.`);let _=s?[g,u,p]:[g,p,u],k=a?[v,h,d]:[v,d,h],T=ln({inputs:{x:o},backend:e,attrs:{shape:_}}),I=ln({inputs:{x:i},backend:e,attrs:{shape:k}}),A=s?T.shape[1]:T.shape[2],P=s?T.shape[2]:T.shape[1],N=a?I.shape[1]:I.shape[2],B=Math.max(g,v),S=e.data.get(T.dataId).values,W=e.data.get(I.dataId).values,ie=x.computeStrides(T.shape),Q=x.computeStrides(I.shape),[J,G,H]=s?[ie[0],1,ie[1]]:[ie[0],ie[1],1],[V,K,pe]=a?[1,Q[1],Q[0]]:[Q[1],1,Q[0]],ce=P*N,se=at([B,P,N],T.dtype),ye=se.values,Re=e.blockSize;for(let Oe=0;Oe<B;Oe++){let Ce=Oe%g,et=Oe%v;for(let qe=0;qe<P;qe+=Re){let xt=Math.min(qe+Re,P);for(let St=0;St<N;St+=Re){let D=Math.min(St+Re,N);for(let we=0;we<A;we+=Re){let he=Math.min(we+Re,A);for(let q=qe;q<xt;q++)for(let j=St;j<D;j++){let oe=0;for(let ke=we;ke<he;ke++){let Fe=S[Ce*J+q*G+ke*H],de=W[ke*V+j*K+et*pe];oe+=Fe*de}ye[Oe*ce+(q*N+j)]+=oe}}}}}return e.disposeIntermediateTensorInfo(T),e.disposeIntermediateTensorInfo(I),e.makeTensorInfo(y,se.dtype,se.values)}var Fne={kernelName:Md,backendName:"cpu",kernelFunc:s7};function V5e(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r,p,h,f,m=[];p=s7({inputs:{a:o,b:i},attrs:{transposeA:l,transposeB:c},backend:e}),s&&(h=Lu({inputs:{a:p,b:s},backend:e}),m.push(p),p=h),u&&(f=J0(e,p,u,a,d),m.push(p),p=f);for(let v of m)e.disposeIntermediateTensorInfo(v);return p}var Pne={kernelName:Hh,backendName:"cpu",kernelFunc:V5e};var j5e=Mt(Dc,t=>Math.acos(t)),Bne={kernelName:Dc,backendName:"cpu",kernelFunc:j5e};var z5e=Mt(Ec,t=>Math.acosh(t)),Lne={kernelName:Ec,backendName:"cpu",kernelFunc:z5e};function H5e(t){let{inputs:n,backend:e}=t,r=n;be(n,"addN");let o=r.map(a=>e.data.get(a.dataId).values),i=at(r[0].shape,r[0].dtype),s=i.values;for(let a=0;a<r.length;a++){let l=o[a];for(let c=0;c<s.length;c++)s[c]+=l[c]}return e.makeTensorInfo(i.shape,i.dtype,i.values)}var $ne={kernelName:_d,backendName:"cpu",kernelFunc:H5e};function U5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;be(o,"all");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=yr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("all",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let _=0;_<h;++_){let k=m[w+_];y=y&&k}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=ln({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var Vne={kernelName:Qm,backendName:"cpu",kernelFunc:U5e};function G5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;be(o,"any");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=yr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("any",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let _=0;_<h;++_){let k=m[w+_];y=y||k}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=ln({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var jne={kernelName:Jm,backendName:"cpu",kernelFunc:G5e};function W5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r;be(o,"argMax");let s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=yr({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],O.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,d]=O.computeOutAndReduceShapes(l.shape,s),p=x.sizeFromShape(u),h=x.makeZerosTypedArray(p,"int32"),f=x.sizeFromShape(d),m=e.data.get(l.dataId).values;for(let g=0;g<h.length;++g){let v=g*f,w=m[v],y=0;for(let _=0;_<f;++_){let k=m[v+_];k>w&&(w=k,y=_)}h[g]=y}return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),e.makeTensorInfo(u,"int32",h)}var zne={kernelName:kd,backendName:"cpu",kernelFunc:W5e};function q5e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r;be(o,"argMin");let s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=yr({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],O.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,d]=O.computeOutAndReduceShapes(l.shape,s),p=x.sizeFromShape(u),h=x.makeZerosTypedArray(p,"int32"),f=x.sizeFromShape(d),m=e.data.get(l.dataId).values;for(let g=0;g<h.length;++g){let v=g*f,w=m[v],y=0;for(let _=0;_<f;++_){let k=m[v+_];k<w&&(w=k,y=_)}h[g]=y}return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),e.makeTensorInfo(u,"int32",h)}var Hne={kernelName:bd,backendName:"cpu",kernelFunc:q5e};var K5e=Mt(Ic,t=>Math.asin(t)),Une={kernelName:Ic,backendName:"cpu",kernelFunc:K5e};var Z5e=Mt(Nc,t=>Math.asinh(t)),Gne={kernelName:Nc,backendName:"cpu",kernelFunc:Z5e};var X5e=Mt(Ac,t=>Math.atan(t)),Wne={kernelName:Ac,backendName:"cpu",kernelFunc:X5e};var Y5e=an((t,n)=>Math.atan2(t,n)),Q5e=fn(Oc,Y5e),qne={kernelName:Oc,backendName:"cpu",kernelFunc:Q5e};var J5e=Mt(Rc,t=>Math.atanh(t)),Kne={kernelName:Rc,backendName:"cpu",kernelFunc:J5e};function Qv(t,n,e,r,o,i){let s=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,p=o.padInfo.top,h=o.padInfo.left,f=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=at(o.outShape,e),g=m.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],w=o.outShape[2]*o.outShape[3],y=o.outShape[3];for(let _=0;_<o.batchSize;++_){let k=_*v,T=_*r[0];for(let I=0;I<o.inChannels;++I)for(let A=0;A<o.outHeight;++A){let P=A*s-p,N=Math.max(0,P),B=Math.min(o.inHeight,u+P),S=k+A*w;for(let W=0;W<o.outWidth;++W){let ie=W*a-h,Q=Math.max(0,ie),J=Math.min(o.inWidth,d+ie),G=f,H=0,V=0;for(let pe=N;pe<B;pe+=l){let ce=T+pe*r[1];for(let se=Q;se<J;se+=c){let ye=ce+se*r[2],Re=t[ye+I];i==="max"&&Re>G?G=Re:i==="avg"&&(H+=Re,V++)}if(isNaN(G))break}let K=S+W*y+I;g[K]=i==="avg"?H/V:G}}}return m}function gE(t,n,e,r,o=!1,i=!1){let s=at(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,m=at(n,e,t);for(let g=0;g<r.batchSize;++g)for(let v=0;v<r.inChannels;++v)for(let w=0;w<r.outHeight;++w){let y=w*a-h,_=y;for(;_<0;)_+=c;let k=Math.min(r.inHeight,d+y);for(let T=0;T<r.outWidth;++T){let I=T*l-f,A=I;for(;A<0;)A+=u;let P=Math.min(r.inWidth,p+I),N=Number.NEGATIVE_INFINITY,B=-1;for(let S=_;S<k;S+=c){let W=S-y;for(let ie=A;ie<P;ie+=u){let Q=ie-I,J=m.get(g,S,ie,v);J>N&&(N=J,o?B=i?((g*r.inHeight+S)*r.inWidth+ie)*r.inChannels+v:(S*r.inWidth+ie)*r.inChannels+v:B=W*p+Q)}}s.set(B,g,w,T,v)}}return s}function vE(t,n,e,r,o,i){let s=o.strideDepth,a=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,u=o.dilationHeight,d=o.dilationWidth,p=o.effectiveFilterDepth,h=o.effectiveFilterHeight,f=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,v=o.padInfo.left,w=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=at(o.outShape,e),_=y.values,k=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],T=o.outShape[2]*o.outShape[3]*o.outShape[4],I=o.outShape[3]*o.outShape[4],A=o.outShape[4];for(let P=0;P<o.batchSize;++P){let N=P*k,B=P*r[0];for(let S=0;S<o.inChannels;++S)for(let W=0;W<o.outDepth;++W){let ie=W*s-m,Q=ie;for(;Q<0;)Q+=c;let J=Math.min(o.inDepth,p+ie),G=N+W*T;for(let H=0;H<o.outHeight;++H){let V=H*a-g,K=V;for(;K<0;)K+=u;let pe=Math.min(o.inHeight,h+V),ce=G+H*I;for(let se=0;se<o.outWidth;++se){let ye=se*l-v,Re=ye;for(;Re<0;)Re+=d;let Oe=Math.min(o.inWidth,f+ye),Ce=ce+se*A,et=w,qe=0,xt=0;for(let D=Q;D<J;D+=c){let we=B+D*r[1];for(let he=K;he<pe;he+=u){let q=we+he*r[2];for(let j=Re;j<Oe;j+=d){let oe=q+j*r[3],ke=t[oe+S];if(i==="max"&&ke>et?et=ke:i==="avg"&&(qe+=ke,xt++),isNaN(et))break}if(isNaN(et))break}if(isNaN(et))break}let St=Ce+S;_[St]=i==="avg"?qe/Math.max(xt,1):et}}}}return y}function Zne(t,n){let e=at(n.outShape,"int32"),r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,s=n.dilationDepth,a=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,u=n.effectiveFilterHeight,d=n.effectiveFilterWidth,p=n.padInfo.front,h=n.padInfo.top,f=n.padInfo.left;for(let m=0;m<n.batchSize;++m)for(let g=0;g<n.inChannels;++g)for(let v=0;v<n.outDepth;++v){let w=v*r-p,y=w;for(;y<0;)y+=s;let _=Math.min(n.inDepth,c+w);for(let k=0;k<n.outHeight;++k){let T=k*o-h,I=T;for(;I<0;)I+=a;let A=Math.min(n.inHeight,u+T);for(let P=0;P<n.outWidth;++P){let N=P*i-f,B=N;for(;B<0;)B+=l;let S=Math.min(n.inWidth,d+N),W=Number.NEGATIVE_INFINITY,ie=-1;for(let Q=y;Q<_;Q+=s){let J=Q-w;for(let G=I;G<A;G+=a){let H=G-T;for(let V=B;V<S;V+=l){let K=V-N,pe=t.get(m,Q,G,V,g);pe>=W&&(W=pe,ie=J*u*d+H*u+K)}}}e.set(ie,m,v,k,P,g)}}}return e}function eOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;be(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))d=fi({inputs:{x:o},backend:e});else{let p=e.data.get(o.dataId).values,h=x.computeStrides(o.shape),f=Qv(p,o.shape,o.dtype,h,u,"avg");d=e.makeTensorInfo(u.outShape,o.dtype,f.values)}return d}var Xne={kernelName:Cd,backendName:"cpu",kernelFunc:eOe};function tOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;be(o,"avgPool3d");let u=O.computePool3DInfo(o.shape,i,s,1,a,l,c),d=e.data.get(o.dataId).values,p=vE(d,o.shape,o.dtype,x.computeStrides(o.shape),u,"avg");return e.makeTensorInfo(p.shape,"float32",p.values)}var Yne={kernelName:Sd,backendName:"cpu",kernelFunc:tOe};function nOe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;be([o,i],"avgPool3DGrad");let u=O.computePool3DInfo(i.shape,s,a,1,l,c),d=u.strideDepth,p=u.strideHeight,h=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,v=u.dilationDepth,w=u.dilationHeight,y=u.dilationWidth,_=u.effectiveFilterDepth,k=u.effectiveFilterHeight,T=u.effectiveFilterWidth,I=_-1-u.padInfo.front,A=T-1-u.padInfo.left,P=k-1-u.padInfo.top,N=at(i.shape,"float32"),B=1/(f*m*g),S=e.bufferSync(o);for(let W=0;W<u.batchSize;++W)for(let ie=0;ie<u.inChannels;++ie)for(let Q=0;Q<u.inDepth;++Q)for(let J=0;J<u.inHeight;++J)for(let G=0;G<u.inWidth;++G){let H=Q-I,V=J-P,K=G-A,pe=0;for(let ce=0;ce<_;ce+=v){let se=(H+ce)/d;if(!(se<0||se>=u.outDepth||Math.floor(se)!==se))for(let ye=0;ye<k;ye+=w){let Re=(V+ye)/p;if(!(Re<0||Re>=u.outHeight||Math.floor(Re)!==Re))for(let Oe=0;Oe<T;Oe+=y){let Ce=(K+Oe)/h;if(Ce<0||Ce>=u.outWidth||Math.floor(Ce)!==Ce)continue;let et=S.get(W,se,Re,Ce,ie);pe+=et}}}N.set(pe*B,W,Q,J,G,ie)}return e.makeTensorInfo(N.shape,N.dtype,N.values)}var Qne={kernelName:tg,backendName:"cpu",kernelFunc:nOe};function rOe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i;be([o,i],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=r,u=O.computePool2DInfo(s.shape,a,l,1,c),d=u.strideHeight,p=u.strideWidth,h=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,v=u.effectiveFilterHeight,w=u.effectiveFilterWidth,y=w-1-u.padInfo.left,_=v-1-u.padInfo.top,k=at(s.shape,"float32"),T=1/(h*f),I=e.data.get(o.dataId).values,A=at(o.shape,"float32",I);for(let P=0;P<u.batchSize;++P)for(let N=0;N<u.inChannels;++N)for(let B=0;B<u.inHeight;++B)for(let S=0;S<u.inWidth;++S){let W=B-_,ie=S-y,Q=0;for(let J=0;J<v;J+=m){let G=(W+J)/d;if(!(G<0||G>=u.outHeight||Math.floor(G)!==G))for(let H=0;H<w;H+=g){let V=(ie+H)/p;if(V<0||V>=u.outWidth||Math.floor(V)!==V)continue;let K=A.get(P,G,V,N);Q+=K}}k.set(Q*T,P,B,S,N)}return e.makeTensorInfo(k.shape,k.dtype,k.values)}var Jne={kernelName:eg,backendName:"cpu",kernelFunc:rOe};function oOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,scale:i,offset:s,mean:a,variance:l}=n;x.assert(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),x.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),x.assert(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),be([o,a,l,i,s],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);let u=e.data.get(o.dataId).values,d=e.data.get(a.dataId).values,p=e.data.get(l.dataId).values,h=i?e.data.get(i.dataId).values:new Float32Array([1]),f=s?e.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,v=h.length,w=p.length,y=d.length,_=0,k=0,T=0,I=0;for(let A=0;A<u.length;++A)m[A]=f[_++]+(u[A]-d[k++])*h[T++]/Math.sqrt(p[I++]+c),_>=g&&(_=0),k>=y&&(k=0),T>=v&&(T=0),I>=w&&(I=0);return e.makeTensorInfo(o.shape,o.dtype,m)}var ere={kernelName:Bd,backendName:"cpu",kernelFunc:oOe};function iOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,crops:s}=r;be([o],"batchToSpaceND");let a=i.reduce((v,w)=>v*w),l=O.getReshaped(o.shape,i,a),c=O.getPermuted(l.length,i.length),u=O.getReshapedPermuted(o.shape,i,a),d=O.getSliceBeginCoords(s,i.length),p=O.getSliceSize(u,s,i.length),h=ln({inputs:{x:o},backend:e,attrs:{shape:l}}),f=yr({inputs:{x:h},backend:e,attrs:{perm:c}}),m=ln({inputs:{x:f},backend:e,attrs:{shape:u}}),g=qa({inputs:{x:m},backend:e,attrs:{begin:d,size:p}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),g}var tre={kernelName:Td,backendName:"cpu",kernelFunc:iOe};function sOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s}=r,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,c=Zv(a,l,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,c)}var nre={kernelName:ng,backendName:"cpu",kernelFunc:sOe};function aOe(t){let{inputs:n,backend:e}=t,{s0:r,s1:o}=n,i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,a=O.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var rre={kernelName:rg,backendName:"cpu",kernelFunc:aOe};var lOe=Mt(Pc,(t,n)=>{let e=n;return t>e.clipValueMax?e.clipValueMax:t<e.clipValueMin?e.clipValueMin:t}),ore={kernelName:Pc,backendName:"cpu",kernelFunc:lOe};var cOe=t=>{let{x:n}=t.inputs,e=t.backend,r=new Float32Array(x.sizeFromShape(n.shape)),o=e.data.get(n.dataId),i=o.complexTensorInfos.real,s=o.complexTensorInfos.imag,a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values;for(let c=0;c<a.length;c++){let u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return e.makeOutput(r,n.shape,"float32")},ire={kernelName:Dd,backendName:"cpu",kernelFunc:cOe};function $u(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.data.get(r.dataId).complexTensorInfos.imag,i=e.data.get(o.dataId).values;return e.makeTensorInfo(o.shape,o.dtype,i)}var sre={kernelName:kg,backendName:"cpu",kernelFunc:$u};function _f(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r,i=x.parseAxisParam(o,n[0].shape)[0],s=n.map(m=>m.shape);O.assertParamsConsistent(s,i);let a=O.computeOutShape(n.map(m=>m.shape),i);if(x.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(m=>x.sizeFromShape(m.shape)>0);if(l.length===1)return fi({inputs:{x:l[0]},backend:e});if(l[0].dtype==="complex64"){let m=l.map(_=>Ua({inputs:{input:_},backend:e})),g=l.map(_=>$u({inputs:{input:_},backend:e})),v=_f({inputs:m,backend:e,attrs:{axis:i}}),w=_f({inputs:g,backend:e,attrs:{axis:i}}),y=xo({inputs:{real:v,imag:w},backend:e});return m.forEach(_=>e.disposeIntermediateTensorInfo(_)),g.forEach(_=>e.disposeIntermediateTensorInfo(_)),e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(w),y}let c=l.map(m=>{let v=[-1,x.sizeFromShape(m.shape.slice(i))];return ln({inputs:{x:m},backend:e,attrs:{shape:v}})}),u=c.map(m=>({vals:e.data.get(m.dataId).values,shape:m.shape}));a=O.computeOutShape(c.map(m=>m.shape),1);let d=c[0].shape[0]===1,p=YD(u,a,n[0].dtype,d),h=O.computeOutShape(l.map(m=>m.shape),i),f=e.makeTensorInfo(h,n[0].dtype,p);return c.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}var are={kernelName:Ed,backendName:"cpu",kernelFunc:_f};function a7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;be([o,i],"conv2d");let d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,i.shape,s,c,a,u,!1,d),h=p.filterHeight,f=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,v=p.padInfo.left,w=p.padInfo.top,y=p.dataFormat==="channelsLast",_=new yn(p.outShape,o.dtype),k=x.computeStrides(o.shape),T=x.computeStrides(i.shape),I=k[0],A=y?k[1]:k[2],P=y?k[2]:1,N=y?1:k[1],B=_.strides[0],S=y?_.strides[1]:_.strides[2],W=y?_.strides[2]:1,ie=y?1:_.strides[1],Q=e.data.get(o.dataId).values,J=e.data.get(i.dataId).values,G=_.values;for(let H=0;H<p.batchSize;++H){let V=H*I,K=H*B;for(let pe=0;pe<p.outHeight;++pe){let ce=K+pe*S,se=pe*p.strideHeight-w;for(let ye=0;ye<h;++ye){let Re=se+ye*m;if(Re<0||Re>=p.inHeight)continue;let Oe=ye*T[0],Ce=V+Re*A;for(let et=0;et<p.outWidth;++et){let qe=ce+et*W,xt=et*p.strideWidth-v;for(let St=0;St<f;++St){let D=xt+St*g;if(D<0||D>=p.inWidth)continue;let we=Oe+St*T[1],he=Ce+D*P,q=we;for(let j=0;j<p.inChannels;++j){let oe=Q[he+j*N];for(let ke=0;ke<p.outChannels;++ke)G[qe+ke*ie]+=oe*J[q+ke];q+=p.outChannels}}}}}}return e.makeTensorInfo(_.shape,_.dtype,G)}var lre={kernelName:Id,backendName:"cpu",kernelFunc:a7};function uOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;be([o,i],"conv2dBackpropFilter");let d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,u,s,1,a,c,!1,d),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=p,v=p.dataFormat==="channelsLast",w=new yn(p.filterShape,"float32"),y=p.padInfo.left,_=p.padInfo.top,k=e.data.get(o.dataId).values,T=e.data.get(i.dataId).values,I=new yn(o.shape,o.dtype,k),A=new yn(i.shape,i.dtype,T);for(let P=0;P<m;++P){let N=Math.max(0,Math.ceil((_-P)/h)),B=Math.min(p.outHeight,(p.inHeight+_-P)/h);for(let S=0;S<g;++S){let W=Math.max(0,Math.ceil((y-S)/f)),ie=Math.min(p.outWidth,(p.inWidth+y-S)/f);for(let Q=0;Q<p.inChannels;++Q)for(let J=0;J<p.outChannels;++J){let G=0;for(let H=0;H<p.batchSize;++H)for(let V=N;V<B;++V){let K=P+V*h-_;for(let pe=W;pe<ie;++pe){let ce=S+pe*f-y;v?G+=I.get(H,K,ce,Q)*A.get(H,V,pe,J):G+=I.get(H,Q,K,ce)*A.get(H,J,V,pe)}}w.set(G,P,S,Q,J)}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}var cre={kernelName:ig,backendName:"cpu",kernelFunc:uOe};function dOe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;be([o,i],"conv2dBackpropInput");let d=x.computeStrides(i.shape),p=x.computeStrides(o.shape),h=O.convertConv2DDataFormat(c),f=O.computeConv2DInfo(s,i.shape,a,1,l,u,!1,h),m=new yn(f.inShape,"float32"),g=m.values,v=e.data.get(o.dataId).values,w=e.data.get(i.dataId).values,[y,_,k]=d,{batchSize:T,filterHeight:I,filterWidth:A,inChannels:P,inHeight:N,inWidth:B,outChannels:S,outHeight:W,outWidth:ie,strideHeight:Q,strideWidth:J}=f;h=f.dataFormat;let G=I-1-f.padInfo.top,H=A-1-f.padInfo.left,V=h==="channelsLast",K=m.strides[0],pe=V?m.strides[1]:m.strides[2],ce=V?m.strides[2]:1,se=V?1:m.strides[1],ye=p[0],Re=V?p[1]:p[2],Oe=V?p[2]:1,Ce=V?1:p[1];for(let et=0;et<T;++et)for(let qe=0;qe<P;++qe)for(let xt=0;xt<N;++xt){let St=xt-G,D=Math.max(0,Math.ceil(St/Q)),we=Math.min(W,(I+St)/Q);for(let he=0;he<B;++he){let q=he-H,j=Math.max(0,Math.ceil(q/J)),oe=Math.min(ie,(A+q)/J),ke=0;for(let de=D;de<we;++de){let We=de*Q-St;for(let tt=j;tt<oe;++tt){let Ke=tt*J-q,mt=ye*et+Re*de+Oe*tt,bn=y*(I-1-We)+_*(A-1-Ke)+k*qe;for(let cn=0;cn<S;++cn){let ho=v[mt+Ce*cn],xs=w[bn+cn];ke+=ho*xs}}}let Fe=K*et+pe*xt+ce*he+se*qe;g[Fe]=ke}}return e.makeTensorInfo(m.shape,m.dtype,m.values)}var ure={kernelName:Nd,backendName:"cpu",kernelFunc:dOe};function pOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r;be([o,i],"conv3d");let c=O.computeConv3DInfo(o.shape,i.shape,s,l,a),{filterDepth:u,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=c,v=g.front,w=g.left,y=g.top,_=new yn(c.outShape,o.dtype),k=e.data.get(o.dataId).values,T=e.data.get(i.dataId).values,I=_.values,A=x.computeStrides(o.shape),P=x.computeStrides(i.shape);for(let N=0;N<c.batchSize;++N){let B=N*A[0],S=N*_.strides[0];for(let W=0;W<c.outDepth;++W){let ie=S+W*_.strides[1],Q=W*c.strideDepth-v;for(let J=0;J<u;++J){let G=Q+J*h;if(G<0||G>=c.inDepth)continue;let H=J*P[0],V=B+G*A[1];for(let K=0;K<c.outHeight;++K){let pe=ie+K*_.strides[2],ce=K*c.strideHeight-y;for(let se=0;se<d;++se){let ye=ce+se*f;if(ye<0||ye>=c.inHeight)continue;let Re=H+se*P[1],Oe=V+ye*A[2];for(let Ce=0;Ce<c.outWidth;++Ce){let et=pe+Ce*c.outChannels,qe=Ce*c.strideWidth-w;for(let xt=0;xt<p;++xt){let St=qe+xt*m;if(St<0||St>=c.inWidth)continue;let D=Re+xt*P[2],we=Oe+St*c.inChannels,he=D;for(let q=0;q<c.inChannels;++q){let j=k[we+q];for(let oe=0;oe<c.outChannels;++oe)I[et+oe]+=j*T[he+oe];he+=c.outChannels}}}}}}}}return e.makeTensorInfo(_.shape,_.dtype,_.values)}var dre={kernelName:Ad,backendName:"cpu",kernelFunc:pOe};function hOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,filterShape:l}=r;be([o,i],"conv3dBackpropFilterV2");let c=x.computeStrides(o.shape),u=x.computeStrides(i.shape),d=O.computeConv3DInfo(o.shape,l,s,1,a),p=d.strideDepth,h=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,w=new yn(d.filterShape,"float32"),y=w.values,[_,k,T,I]=w.strides,A=e.data.get(i.dataId).values,[P,N,B,S]=u,W=e.data.get(o.dataId).values,[ie,Q,J,G]=c,H=d.padInfo.front,V=d.padInfo.left,K=d.padInfo.top;for(let pe=0;pe<m;++pe){let ce=Math.max(0,Math.ceil((H-pe)/p)),se=Math.min(d.outDepth,(d.inDepth+H-pe)/p),ye=pe*_;for(let Re=0;Re<g;++Re){let Oe=Math.max(0,Math.ceil((K-Re)/h)),Ce=Math.min(d.outHeight,(d.inHeight+K-Re)/h),et=Re*k+ye;for(let qe=0;qe<v;++qe){let xt=Math.max(0,Math.ceil((V-qe)/f)),St=Math.min(d.outWidth,(d.inWidth+V-qe)/f),D=qe*T+et;for(let we=0;we<d.inChannels;++we){let he=we*I+D;for(let q=0;q<d.outChannels;++q){let j=0;for(let oe=0;oe<d.batchSize;++oe){let ke=oe*ie,Fe=oe*P;for(let de=ce;de<se;++de){let tt=(pe+de*p-H)*Q+ke,Ke=de*N+Fe;for(let mt=Oe;mt<Ce;++mt){let cn=(Re+mt*h-K)*J+tt,ho=mt*B+Ke;for(let xs=xt;xs<St;++xs){let Ju=(qe+xs*f-V)*G+cn,Tr=xs*S+ho;j+=W[Ju+we]*A[Tr+q]}}}}y[he+q]=j}}}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}var pre={kernelName:sg,backendName:"cpu",kernelFunc:hOe};function fOe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{pad:s,strides:a,inputShape:l}=r;be([o],"conv3dBackpropInputV2");let c=x.computeStrides(o.shape),u=x.computeStrides(i.shape),d=O.computeConv3DInfo(l,i.shape,a,1,s),p=new yn(d.inShape,"float32"),h=p.values,[f,m,g,v]=p.strides,w=e.data.get(o.dataId).values,[y,_,k,T]=c,I=e.data.get(i.dataId).values,[A,P,N,B]=u,{batchSize:S,filterDepth:W,filterHeight:ie,filterWidth:Q,inChannels:J,inDepth:G,inHeight:H,inWidth:V,outChannels:K,outDepth:pe,outHeight:ce,outWidth:se,strideDepth:ye,strideHeight:Re,strideWidth:Oe}=d,Ce=W-1-d.padInfo.front,et=ie-1-d.padInfo.top,qe=Q-1-d.padInfo.left;for(let xt=0;xt<S;++xt)for(let St=0;St<J;++St)for(let D=0;D<G;++D){let we=D-Ce,he=Math.max(0,Math.ceil(we/ye)),q=Math.min(pe,(W+we)/ye);for(let j=0;j<H;++j){let oe=j-et,ke=Math.max(0,Math.ceil(oe/Re)),Fe=Math.min(ce,(ie+oe)/Re);for(let de=0;de<V;++de){let We=de-qe,tt=Math.max(0,Math.ceil(We/Oe)),Ke=Math.min(se,(Q+We)/Oe),mt=0;for(let bn=he;bn<q;++bn){let cn=bn*ye-we;for(let ho=ke;ho<Fe;++ho){let xs=ho*Re-oe;for(let Ei=tt;Ei<Ke;++Ei){let Ju=Ei*Oe-We,Tr=y*xt+_*bn+k*ho+T*Ei,E2=A*(W-1-cn)+P*(ie-1-xs)+N*(Q-1-Ju)+B*St;for(let ih=0;ih<K;++ih){let tl=w[Tr+ih],tC=I[E2+ih];mt+=tl*tC}}}}h[f*xt+m*D+g*j+v*de+St]=mt}}}return e.makeTensorInfo(p.shape,p.dtype,p.values)}var hre={kernelName:ag,backendName:"cpu",kernelFunc:fOe};var mOe=Mt(Bc,t=>Math.cos(t)),fre={kernelName:Bc,backendName:"cpu",kernelFunc:mOe};var gOe=Mt(Lc,t=>Math.cosh(t)),mre={kernelName:Lc,backendName:"cpu",kernelFunc:gOe};function vOe(t){let{inputs:n,backend:e,attrs:r}=t,{image:o,boxes:i,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,p,h]=o.shape,f=i.shape[0],[m,g]=a,v=at([f,m,g,h],"float32"),w=e.data.get(i.dataId).values,y=e.data.get(s.dataId).values,_=e.data.get(o.dataId).values,k=x.computeStrides(o.shape),T=x.computeStrides(v.shape);for(let I=0;I<f;I++){let A=I*4,P=w[A],N=w[A+1],B=w[A+2],S=w[A+3],W=y[I];if(W>=u)continue;let ie=m>1?(B-P)*(d-1)/(m-1):0,Q=g>1?(S-N)*(p-1)/(g-1):0;for(let J=0;J<m;J++){let G=m>1?P*(d-1)+J*ie:.5*(P+B)*(d-1);if(G<0||G>d-1){for(let H=0;H<g;H++)for(let V=0;V<h;V++){let K=V+H*T[2]+J*T[1]+I*T[0];v.values[K]=c}continue}if(l==="bilinear"){let H=Math.floor(G),V=Math.ceil(G),K=G-H;for(let pe=0;pe<g;pe++){let ce=g>1?N*(p-1)+pe*Q:.5*(N+S)*(p-1);if(ce<0||ce>p-1){for(let Oe=0;Oe<h;Oe++){let Ce=Oe+pe*T[2]+J*T[1]+I*T[0];v.values[Ce]=c}continue}let se=Math.floor(ce),ye=Math.ceil(ce),Re=ce-se;for(let Oe=0;Oe<h;Oe++){let Ce=Oe+se*k[2]+H*k[1]+W*k[0],et=_[Ce];Ce=Oe+ye*k[2]+H*k[1]+W*k[0];let qe=_[Ce];Ce=Oe+se*k[2]+V*k[1]+W*k[0];let xt=_[Ce];Ce=Oe+ye*k[2]+V*k[1]+W*k[0];let St=_[Ce],D=et+(qe-et)*Re,we=xt+(St-xt)*Re;Ce=Oe+pe*T[2]+J*T[1]+I*T[0],v.values[Ce]=D+(we-D)*K}}}else for(let H=0;H<g;++H){let V=g>1?N*(p-1)+H*Q:.5*(N+S)*(p-1);if(V<0||V>p-1){for(let ce=0;ce<h;ce++){let se=ce+H*T[2]+J*T[1]+I*T[0];v.values[se]=c}continue}let K=Math.round(V),pe=Math.round(G);for(let ce=0;ce<h;ce++){let se=ce+K*k[2]+pe*k[1]+W*k[0],ye=ce+H*T[2]+J*T[1]+I*T[0];v.values[ye]=_[se]}}}}return e.makeTensorInfo(v.shape,v.dtype,v.values)}var gre={kernelName:cg,backendName:"cpu",kernelFunc:vOe};function wOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;be(o,"cumprod");let l=O.getAxesPermutation([i],o.shape.length),c=o;l!=null&&(c=yr({inputs:{x:o},backend:e,attrs:{perm:l}}));let u=O.getInnerMostAxes(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=Ur(c.dtype,"int32"),p=x.makeOnesTypedArray(x.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=a?(v,w)=>v+f-w-1:(v,w)=>v+w;for(let v=0;v<h.length;v+=f)for(let w=0;w<f;w++){let y=m(v,w);if(w===0)p[y]=s?1:h[y];else{let _=m(v,w-1);p[y]=s?h[_]*p[_]:h[y]*p[_]}}let g=e.makeTensorInfo(c.shape,d,p);if(l!=null){let v=O.getUndoAxesPermutation(l),w=yr({inputs:{x:g},backend:e,attrs:{perm:v}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(c),w}return g}var vre={kernelName:lg,backendName:"cpu",kernelFunc:wOe};function yOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;be(o,"cumsum");let l=O.getAxesPermutation([i],o.shape.length),c=o;l!=null&&(c=yr({inputs:{x:o},backend:e,attrs:{perm:l}}));let u=O.getInnerMostAxes(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=Ur(c.dtype,"int32"),p=x.makeZerosTypedArray(x.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=a?(v,w)=>v+f-w-1:(v,w)=>v+w;for(let v=0;v<h.length;v+=f)for(let w=0;w<f;w++){let y=m(v,w);if(w===0)p[y]=s?0:h[y];else{let _=m(v,w-1);p[y]=s?h[_]+p[_]:h[y]+p[_]}}let g=e.makeTensorInfo(c.shape,d,p);if(l!=null){let v=O.getUndoAxesPermutation(l),w=yr({inputs:{x:g},backend:e,attrs:{perm:v}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(c),w}return g}var wre={kernelName:Rd,backendName:"cpu",kernelFunc:yOe};function xOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s,binaryOutput:a}=r;if(o.shape.length===1){let l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=Zv(l,c,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,u)}else if(o.shape.length===2){let l=e.bufferSync(o),c=e.bufferSync(i),u=XD(l,c,s,a);return e.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var yre={kernelName:ug,backendName:"cpu",kernelFunc:xOe};function _Oe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockSize:i,dataFormat:s}=r;x.assert(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);let a=o.shape[0],l=o.shape[1],c=o.shape[2],u=o.shape[3],d=l*i,p=c*i,h=u/(i*i),f=e.data.get(o.dataId).values,m=new Float32Array(a*d*p*h),g=0;for(let v=0;v<a;++v)for(let w=0;w<d;++w){let y=Math.floor(w/i),_=w%i;for(let k=0;k<p;++k){let T=Math.floor(k/i),I=k%i,A=(_*i+I)*h;for(let P=0;P<h;++P){let B=P+A+u*(T+c*(y+l*v));m[g++]=f[B]}}}return e.makeTensorInfo([a,d,p,h],o.dtype,m)}var xre={kernelName:dg,backendName:"cpu",kernelFunc:_Oe};function l7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r;be([o,i],"depthwiseConv2DNative");let u=x.computeStrides(o.shape),d=x.computeStrides(i.shape),p=l;p==null&&(p=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);let h=O.computeConv2DInfo(o.shape,i.shape,s,p,a,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:w}=h,y=w.left,_=w.top,k=h.outChannels/h.inChannels,T=new yn(h.outShape,o.dtype),I=e.data.get(o.dataId).values,A=e.data.get(i.dataId).values,P=T.values;for(let N=0;N<h.batchSize;++N){let B=N*u[0],S=N*T.strides[0];for(let W=0;W<h.outHeight;++W){let ie=S+W*T.strides[1],Q=W*h.strideHeight-_;for(let J=0;J<f;++J){let G=Q+J*g;if(G<0||G>=h.inHeight)continue;let H=J*d[0],V=B+G*u[1];for(let K=0;K<h.outWidth;++K){let pe=ie+K*T.strides[2],ce=K*h.strideWidth-y;for(let se=0;se<m;++se){let ye=ce+se*v;if(ye<0||ye>=h.inWidth)continue;let Re=H+se*d[1],Oe=V+ye*h.inChannels,Ce=pe,et=Re;for(let qe=0;qe<h.inChannels;++qe){let xt=I[Oe+qe];for(let St=0;St<k;++St)P[Ce+St]+=xt*A[et+St];Ce+=k,et+=k}}}}}}return e.makeTensorInfo(T.shape,T.dtype,T.values)}var _re={kernelName:Od,backendName:"cpu",kernelFunc:l7};function kOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;be([o,i],"depthwiseConv2dNativeBackpropFilter");let d=O.computeConv2DInfo(o.shape,u,s,a,l,c,!0),{strideHeight:p,strideWidth:h,filterHeight:f,filterWidth:m}=d,g=new yn(d.filterShape,"float32"),v=d.padInfo.left,w=d.padInfo.top,y=d.outChannels/d.inChannels,_=e.data.get(o.dataId).values,k=new yn(o.shape,o.dtype,_),T=e.data.get(i.dataId).values,I=new yn(i.shape,i.dtype,T);for(let A=0;A<f;++A){let P=Math.max(0,Math.ceil((w-A)/p)),N=Math.min(d.outHeight,(d.inHeight+w-A)/p);for(let B=0;B<m;++B){let S=Math.max(0,Math.ceil((v-B)/h)),W=Math.min(d.outWidth,(d.inWidth+v-B)/h);for(let ie=0;ie<d.outChannels;++ie){let Q=Math.trunc(ie/y),J=ie%y,G=0;for(let H=0;H<d.batchSize;++H)for(let V=P;V<N;++V){let K=A+V*p-w;for(let pe=S;pe<W;++pe){let ce=B+pe*h-v;G+=k.get(H,K,ce,Q)*I.get(H,V,pe,ie)}}g.set(G,A,B,Q,J)}}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}var kre={kernelName:pg,backendName:"cpu",kernelFunc:kOe};function bOe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;be([o,i],"depthwiseConv2DNativeBackpropInput");let d=x.computeStrides(o.shape),p=x.computeStrides(i.shape),h=O.computeConv2DInfo(u,i.shape,s,a,l,c,!0),f=new yn(h.inShape,"float32"),m=f.values,[g,v,w]=f.strides,y=e.data.get(o.dataId).values,[_,k,T]=d,I=e.data.get(i.dataId).values,[A,P,N]=p,{batchSize:B,filterHeight:S,filterWidth:W,inChannels:ie,inHeight:Q,inWidth:J,outChannels:G,outHeight:H,outWidth:V,strideHeight:K,strideWidth:pe}=h,ce=S-1-h.padInfo.top,se=W-1-h.padInfo.left,ye=G/ie;for(let Re=0;Re<B;++Re)for(let Oe=0;Oe<ie;++Oe)for(let Ce=0;Ce<Q;++Ce){let et=Ce-ce,qe=Math.max(0,Math.ceil(et/K)),xt=Math.min(H,(S+et)/K);for(let St=0;St<J;++St){let D=St-se,we=Math.max(0,Math.ceil(D/pe)),he=Math.min(V,(W+D)/pe),q=0;for(let j=qe;j<xt;++j){let oe=j*K-et;for(let ke=we;ke<he;++ke){let Fe=ke*pe-D,de=_*Re+k*j+T*ke,We=A*(S-1-oe)+P*(W-1-Fe)+N*Oe;for(let tt=0;tt<ye;++tt){let Ke=Oe*ye+tt,mt=y[de+Ke],bn=I[We+tt];q+=mt*bn}}}m[g*Re+v*Ce+w*St+Oe]=q}}return e.makeTensorInfo(f.shape,f.dtype,f.values)}var bre={kernelName:hg,backendName:"cpu",kernelFunc:bOe};function COe(t){let{inputs:n,backend:e}=t,{x:r}=n,o=x.sizeFromShape(r.shape),i=e.data.get(r.dataId).values,s=at([o,o],r.dtype),a=s.values;for(let c=0;c<i.length;c++)a[c*o+c]=i[c];let l=[...r.shape,...r.shape];return e.makeTensorInfo(l,s.dtype,s.values)}var Cre={kernelName:fg,backendName:"cpu",kernelFunc:COe};var Sre={kernelName:Fd,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o}=t,{strides:i,pad:s,dilations:a}=e,l=n,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(o.dataId).values,p=o.shape.length,{batchSize:h,inHeight:f,inWidth:m,inChannels:g,outHeight:v,outWidth:w,padInfo:y,strideHeight:_,strideWidth:k,filterHeight:T,filterWidth:I,dilationHeight:A,dilationWidth:P,outShape:N}=O.computeDilation2DInfo(r.shape,o.shape,i,s,"NHWC",a),B=x.sizeFromShape(N),S=N.length,W=x.getArrayFromDType(r.dtype,B);for(let Q=0;Q<h;++Q)for(let J=0;J<v;++J){let G=J*_-y.top;for(let H=0;H<w;++H){let V=H*k-y.left;for(let K=0;K<g;++K){let pe=Number.MIN_SAFE_INTEGER;for(let se=0;se<T;++se){let ye=G+se*A;if(ye>=0&&ye<f)for(let Re=0;Re<I;++Re){let Oe=V+Re*P;if(Oe>=0&&Oe<m){let Ce=x.locToIndex([Q,ye,Oe,K],u,x.computeStrides(r.shape)),et=x.locToIndex([se,Re,K],p,x.computeStrides(o.shape)),qe=c[Ce]+d[et];qe>pe&&(pe=qe)}}}let ce=x.locToIndex([Q,J,H,K],S,x.computeStrides(N));W[ce]=pe}}}return{dataId:l.write(x.toTypedArray(W,r.dtype),N,r.dtype),shape:N,dtype:r.dtype}}};var Mre={kernelName:K1,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o,dy:i}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=x.toNestedArray(r.shape,c.data.get(r.dataId).values),d=x.toNestedArray(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:w,strideHeight:y,strideWidth:_,filterHeight:k,filterWidth:T,dilationHeight:I,dilationWidth:A,outShape:P}=O.computeDilation2DInfo(r.shape,o.shape,s,a,"NHWC",l);x.assert(i.rank===P.length,()=>`Error in ${K1}, dy must have the same rank as output ${P.length}, but got ${i.rank}`);let N=x.toNestedArray(P,c.data.get(i.dataId).values),B=x.makeZerosNestedTypedArray(o.shape,o.dtype);for(let W=0;W<p;++W)for(let ie=0;ie<g;++ie){let Q=ie*y-w.top;for(let J=0;J<v;++J){let G=J*_-w.left;for(let H=0;H<m;++H){let V=Number.MIN_SAFE_INTEGER,K=0,pe=0;for(let ce=0;ce<k;++ce){let se=Q+ce*I;if(se>=0&&se<h)for(let ye=0;ye<T;++ye){let Re=G+ye*A;if(Re>=0&&Re<f){let Oe=u[W][se][Re][H]+d[ce][ye][H];Oe>V&&(V=Oe,K=ce,pe=ye)}}}B[K][pe][H]+=N[W][ie][J][H]}}}return{dataId:c.write(x.toTypedArray(B,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};var Tre={kernelName:q1,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o,dy:i}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=x.toNestedArray(r.shape,c.data.get(r.dataId).values),d=x.toNestedArray(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:w,strideHeight:y,strideWidth:_,filterHeight:k,filterWidth:T,dilationHeight:I,dilationWidth:A,outShape:P}=O.computeDilation2DInfo(r.shape,o.shape,s,a,"NHWC",l);x.assert(i.rank===P.length,()=>`Error in ${q1}, dy must have the same rank as output ${P.length}, but got ${i.rank}`);let N=x.toNestedArray(P,c.data.get(i.dataId).values),B=x.makeZerosNestedTypedArray(r.shape,r.dtype);for(let W=0;W<p;++W)for(let ie=0;ie<g;++ie){let Q=ie*y-w.top;for(let J=0;J<v;++J){let G=J*_-w.left;for(let H=0;H<m;++H){let V=Number.MIN_SAFE_INTEGER,K=Q<0?0:Q,pe=G<0?0:G;for(let ce=0;ce<k;++ce){let se=Q+ce*I;if(se>=0&&se<h)for(let ye=0;ye<T;++ye){let Re=G+ye*A;if(Re>=0&&Re<f){let Oe=u[W][se][Re][H]+d[ce][ye][H];Oe>V&&(V=Oe,K=se,pe=Re)}}}B[W][K][pe][H]+=N[W][ie][J][H]}}}return{dataId:c.write(x.toTypedArray(B,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function SOe(t){let{inputs:n,backend:e,attrs:r}=t,{image:o}=n,{canvas:i,options:s}=r,{contextOptions:a,imageOptions:l}=s||{},c=l?.alpha||1,u=a?.contextType||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);let d=i.getContext(u,a?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);let[p,h]=o.shape.slice(0,2),f=o.shape.length===2?1:o.shape[2],m=e.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,v=new Uint8ClampedArray(h*p*4);for(let y=0;y<p*h;++y){let _=[0,0,0,255*c];for(let T=0;T<f;T++){let I=m[y*f+T];if(o.dtype==="float32"){if(I<0||I>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${I}.`)}else if(o.dtype==="int32"&&(I<0||I>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${I}.`);f===1?(_[0]=I*g,_[1]=I*g,_[2]=I*g):_[T]=I*g}let k=y*4;v[k+0]=Math.round(_[0]),v[k+1]=Math.round(_[1]),v[k+2]=Math.round(_[2]),v[k+3]=Math.round(_[3])}i.width=h,i.height=p;let w=new ImageData(v,h,p);return d.putImageData(w,0,0),o}var Dre={kernelName:Z1,backendName:"cpu",kernelFunc:SOe};function Hp(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;be(o,"sum");let a;o.dtype==="bool"?a=Ga({inputs:{x:o},backend:e,attrs:{dtype:"int32"}}):a=fi({inputs:{x:o},backend:e});let l=a.shape.length,c=x.parseAxisParam(i,a.shape),u=O.getAxesPermutation(c,l),d=c,p=a;u!=null&&(p=yr({inputs:{x:a},backend:e,attrs:{perm:u}}),d=O.getInnerMostAxes(d.length,l)),O.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,f]=O.computeOutAndReduceShapes(p.shape,d),m=O.upcastType(p.dtype,"int32"),g=qv(e,h,m),v=x.sizeFromShape(f),w=e.data.get(g.dataId).values,y=e.data.get(p.dataId).values;for(let _=0;_<w.length;++_){let k=_*v,T=0;for(let I=0;I<v;++I)T+=y[k+I];w[_]=T}if(s){let _=O.expandShapeToKeepDim(g.shape,c),k=g;g=ln({inputs:{x:g},backend:e,attrs:{shape:_}}),e.disposeIntermediateTensorInfo(k)}return e.disposeIntermediateTensorInfo(a),u!=null&&e.disposeIntermediateTensorInfo(p),g}var Ere={kernelName:sp,backendName:"cpu",kernelFunc:Hp};function MOe(t){let{inputs:n,backend:e,attrs:r}=t,{equation:o}=r,i=n,{allDims:s,summedDims:a,idDims:l}=O.decodeEinsumEquation(o,i.length);O.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=O.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,f=[];for(let m=0;m<d;++m){for(let g of u[m]){let{permutationIndices:v,expandDims:w}=O.getEinsumPermutation(h,l[g]),y;O.isIdentityPermutation(v)?y=i[g]:(y=yr({inputs:{x:i[g]},backend:e,attrs:{perm:v}}),f.push(y));let _=y.shape.slice();for(let k=0;k<w.length;++k)_.splice(w[k],0,1);x.arraysEqual(y.shape,_)||(y=ln({inputs:{x:y},backend:e,attrs:{shape:_}}),f.push(y)),p===null?p=y:(p=Q0({inputs:{a:y,b:p},backend:e}),f.push(p))}m<d-1&&(c[m]>=0&&(p=Hp({inputs:{x:p},backend:e,attrs:{axis:c[m]-(s.length-h),keepDims:!1}}),f.push(p)),h--)}for(let m of f)m!==p&&e.disposeIntermediateTensorInfo(m);return p}var Ire={kernelName:mg,backendName:"cpu",kernelFunc:MOe};function TOe(t){let{inputs:n,backend:e}=t,{dy:r,y:o}=n;be([r,o],"eluGrad");let i=new Float32Array(x.sizeFromShape(o.shape)),s=e.data.get(o.dataId).values,a=e.data.get(r.dataId).values;for(let l=0;l<s.length;++l){let c=s[l];c>=0?i[l]=a[l]:i[l]=a[l]*(c+1)}return e.makeTensorInfo(o.shape,"float32",i)}var Nre={kernelName:gg,backendName:"cpu",kernelFunc:TOe};var DOe=O.ERF_P,EOe=O.ERF_A1,IOe=O.ERF_A2,NOe=O.ERF_A3,AOe=O.ERF_A4,ROe=O.ERF_A5,OOe=Mt(jc,t=>{let n=Math.sign(t),e=Math.abs(t),r=1/(1+DOe*e);return n*(1-((((ROe*r+AOe)*r+NOe)*r+IOe)*r+EOe)*r*Math.exp(-e*e))}),Are={kernelName:jc,backendName:"cpu",kernelFunc:OOe};function Jv(t){let{inputs:n,backend:e,attrs:r}=t,{input:o}=n,{dim:i}=r,s=o.shape.length,a=o.shape.slice(),l=i;return i<0&&(x.assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),a.splice(l,0,1),ln({inputs:{x:o},backend:e,attrs:{shape:a}})}var Rre={kernelName:Pd,backendName:"cpu",kernelFunc:Jv};var FOe=an((t,n)=>t/n),Bk=fn($c,FOe),Lk={kernelName:$c,backendName:"cpu",kernelFunc:Bk};function wE(t,n,e){let r=t.shape,o=r[0],i=r[1],s=e.data.get(t.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[o,i],u=x.sizeFromShape(c),d=x.getTypedArrayFromDType("float32",u),p=x.getTypedArrayFromDType("float32",u);for(let g=0;g<o;g++){let v=qa({inputs:{x:a},backend:e,attrs:{begin:[g,0],size:[1,i]}}),w=qa({inputs:{x:l},backend:e,attrs:{begin:[g,0],size:[1,i]}}),y=xo({inputs:{real:v,imag:w},backend:e}),{real:_,imag:k}=POe(y,n,e),T=O.mergeRealAndImagArrays(_,k);for(let I=0;I<i;I++){let A=O.getComplexWithIndex(T,I);d[g*i+I]=A.real,p[g*i+I]=A.imag}e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(w),e.disposeIntermediateTensorInfo(y)}let h=e.makeTensorInfo(c,"float32",d),f=e.makeTensorInfo(c,"float32",p),m=xo({inputs:{real:h,imag:f},backend:e});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),m}function POe(t,n,e){let r=x.sizeFromShape(t.shape),o=e.data.get(t.dataId),i=e.data.get(o.complexTensorInfos.real.dataId).values,s=e.data.get(o.complexTensorInfos.imag.dataId).values;if(BOe(r)){let a=c7(i,s,r,n,e),l=[t.shape[0],t.shape[1]];if(n){let c=e.makeTensorInfo(l,"float32",a.real),u=e.makeTensorInfo(l,"float32",a.imag),d=e.makeTensorInfo([],"float32",x.createScalarValue(r,"float32")),p=fi({inputs:{x:d},backend:e}),h=Lk.kernelFunc({inputs:{a:c,b:d},backend:e}),f=Lk.kernelFunc({inputs:{a:u,b:p},backend:e}),m=e.data.get(h.dataId).values,g=e.data.get(f.dataId).values;return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),{real:m,imag:g}}return a}else{let a=O.mergeRealAndImagArrays(i,s),l=LOe(a,r,n);return O.splitRealAndImagArrays(l)}}function BOe(t){return(t&t-1)===0}function c7(t,n,e,r,o){if(e===1)return{real:t,imag:n};let i=O.mergeRealAndImagArrays(t,n),s=e/2,a=O.complexWithEvenIndex(i),l=a.real,c=a.imag,u=[l.length],d=o.makeTensorInfo(u,"float32",l),p=o.makeTensorInfo(u,"float32",c),h=xo({inputs:{real:d,imag:p},backend:o}),f=O.complexWithOddIndex(i),m=f.real,g=f.imag,v=[m.length],w=o.makeTensorInfo(v,"float32",m),y=o.makeTensorInfo(v,"float32",g),_=xo({inputs:{real:w,imag:y},backend:o}),k=c7(l,c,s,r,o),T=k.real,I=k.imag,A=[T.length],P=o.makeTensorInfo(A,"float32",T),N=o.makeTensorInfo(A,"float32",I),B=xo({inputs:{real:P,imag:N},backend:o}),S=c7(m,g,s,r,o),W=S.real,ie=S.imag,Q=[W.length],J=o.makeTensorInfo(Q,"float32",W),G=o.makeTensorInfo(Q,"float32",ie),H=xo({inputs:{real:J,imag:G},backend:o}),V=O.exponents(e,r),K=[V.real.length],pe=o.makeTensorInfo(K,"float32",V.real),ce=o.makeTensorInfo(K,"float32",V.imag),se=xo({inputs:{real:pe,imag:ce},backend:o}),ye=Q0({inputs:{a:se,b:H},backend:o}),Re=Lu({inputs:{a:B,b:ye},backend:o}),Oe=Ok({inputs:{a:B,b:ye},backend:o}),Ce=Ua({inputs:{input:Re},backend:o}),et=Ua({inputs:{input:Oe},backend:o}),qe=$u({inputs:{input:Re},backend:o}),xt=$u({inputs:{input:Oe},backend:o}),St=_f({inputs:[Ce,et],backend:o,attrs:{axis:0}}),D=_f({inputs:[qe,xt],backend:o,attrs:{axis:0}}),we=o.data.get(St.dataId).values,he=o.data.get(D.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(_),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(J),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(ce),o.disposeIntermediateTensorInfo(se),o.disposeIntermediateTensorInfo(ye),o.disposeIntermediateTensorInfo(Re),o.disposeIntermediateTensorInfo(Oe),o.disposeIntermediateTensorInfo(Ce),o.disposeIntermediateTensorInfo(qe),o.disposeIntermediateTensorInfo(et),o.disposeIntermediateTensorInfo(xt),o.disposeIntermediateTensorInfo(St),o.disposeIntermediateTensorInfo(D),{real:we,imag:he}}function LOe(t,n,e){let r=new Float32Array(n*2);for(let o=0;o<n;o++){let i=0,s=0;for(let a=0;a<n;a++){let l=O.exponent(o*a,n,e),c=O.getComplexWithIndex(t,a);i+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}e&&(i/=n,s/=n),O.assignToTypedArray(r,i,s,o)}return r}function $Oe(t){let{inputs:n,backend:e}=t,{input:r}=n,o=x.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=ln({inputs:{x:r},backend:e,attrs:{shape:[s,i]}}),l=wE(a,!1,e),c=ln({inputs:{x:l},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var Ore={kernelName:vg,backendName:"cpu",kernelFunc:$Oe};function $k(t){let{backend:n,attrs:e}=t,{shape:r,value:o,dtype:i}=e,s=i||x.inferDtype(o),a=x.getArrayFromDType(s,x.sizeFromShape(r));return VOe(a,o,s),n.makeTensorInfo(r,s,a)}var Fre={kernelName:wg,backendName:"cpu",kernelFunc:$k};function VOe(t,n,e){t.fill(n)}var Pre={kernelName:yg,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,o=e,i=x.getTypedArrayFromDType(r.dtype,x.sizeFromShape(r.shape)),[s,a,l,c]=r.shape,u=o.data.get(r.dataId).values;for(let p=0;p<s;p++){let h=p*l*a*c;for(let f=0;f<a;f++){let m=f*(l*c);for(let g=0;g<l;g++){let v=g*c;for(let w=0;w<c;w++){let y=Math.round(l-g-1),_=h+m+v+w,k=u[_];if(y>=0&&y<l){let T=y*c,I=h+m+T+w;k=u[I]}i[_]=k}}}}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function jOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=a7({inputs:{x:o,filter:i},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let g=m;if(u==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let v=ln({inputs:{x:s},backend:e,attrs:{shape:[s.shape[0],1,1]}});m=Lu({inputs:{a:m,b:v},backend:e}),e.disposeIntermediateTensorInfo(v)}else m=Lu({inputs:{a:m,b:s},backend:e});e.disposeIntermediateTensorInfo(g)}if(h){let g=m;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){let v=ln({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});m=J0(e,m,h,v,f),e.disposeIntermediateTensorInfo(v)}else m=J0(e,m,h,a,f);e.disposeIntermediateTensorInfo(g)}return m}var Bre={kernelName:Uh,backendName:"cpu",kernelFunc:jOe};function zOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=l7({inputs:{x:o,filter:i},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let g=m;m=Lu({inputs:{a:m,b:s},backend:e}),e.disposeIntermediateTensorInfo(g)}if(h){let g=m;m=J0(e,m,h,a,f),e.disposeIntermediateTensorInfo(g)}return m}var Lre={kernelName:Gh,backendName:"cpu",kernelFunc:zOe};function HOe(t){let{inputs:n,backend:e}=t,{params:r,indices:o}=n,i=x.sizeFromShape(r.shape),s=o.shape,a=s[s.length-1],[l,c,u,d]=O.prepareAndValidate(r,o);if(c===0)return e.makeTensorInfo(l,r.dtype,[]);let p=e.data.get(o.dataId).values,h=e.bufferSync(r),f=QD(p,h,r.dtype,c,a,u,d,r.shape,i);return e.makeTensorInfo(l,r.dtype,f.values)}var $re={kernelName:xg,backendName:"cpu",kernelFunc:HOe};function UOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,indices:i}=n,{axis:s,batchDims:a}=r;be([o,i],"gatherV2");let l=x.parseAxisParam(s,o.shape)[0],c=e.data.get(i.dataId).values,u=o.shape[l];for(let _=0;_<c.length;++_){let k=c[_];x.assert(k<=u-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);let p=x.sizeFromShape(i.shape),h=O.segment_util.collectGatherOpShapeInfo(o,i,l,d),f=ln({inputs:{x:o},backend:e,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=ln({inputs:{x:i},backend:e,attrs:{shape:[h.batchSize,p/h.batchSize]}}),g=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],v=e.bufferSync(m),w=e.bufferSync(f),y=JD(w,v,g);return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),e.makeTensorInfo(h.outputShape,y.dtype,y.values)}var Vre={kernelName:Ld,backendName:"cpu",kernelFunc:UOe};function GOe(t){let{inputs:n,backend:e}=t,{input:r}=n,o=x.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=ln({inputs:{x:r},backend:e,attrs:{shape:[s,i]}}),l=wE(a,!0,e),c=ln({inputs:{x:l},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var jre={kernelName:_g,backendName:"cpu",kernelFunc:GOe};var WOe=Mt(qc,t=>Number.isFinite(t)?1:0,"bool"),zre={kernelName:qc,backendName:"cpu",kernelFunc:WOe};var qOe=Mt(Kc,t=>Math.abs(t)===1/0?1:0,"bool"),Hre={kernelName:Kc,backendName:"cpu",kernelFunc:qOe};var KOe=Mt(Zc,t=>Number.isNaN(t)?1:0,"bool"),Ure={kernelName:Zc,backendName:"cpu",kernelFunc:KOe};function ZOe(t){let{backend:n,attrs:e}=t,{start:r,stop:o,num:i}=e,s=eE(r,o,i);return n.makeTensorInfo([s.length],"float32",s)}var Gre={kernelName:bg,backendName:"cpu",kernelFunc:ZOe};var XOe=Mt(Yc,t=>Math.log1p(t)),Wre={kernelName:Yc,backendName:"cpu",kernelFunc:XOe};var YOe=an((t,n)=>t&&n),QOe=fn(Lh,YOe,null,"bool"),qre={kernelName:Lh,backendName:"cpu",kernelFunc:QOe};var JOe=Mt($h,t=>t?0:1,"bool"),Kre={kernelName:$h,backendName:"cpu",kernelFunc:JOe};var eFe=an((t,n)=>t||n),tFe=fn(Vh,eFe,null,"bool"),Zre={kernelName:Vh,backendName:"cpu",kernelFunc:tFe};function nFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{depthRadius:i,bias:s,alpha:a,beta:l}=r;be(o,"LRN");let c=o.shape[3],u=c-1,d=e.data.get(o.dataId).values,p=x.sizeFromShape(o.shape),h=new Float32Array(p);function f(m){let g=m%c,v=m-g+Math.max(0,g-i),w=m-g+Math.min(g+i,u),y=0;for(;v<=w;v++){let _=d[v];y+=_*_}return y}for(let m=0;m<p;m++){let g=f(m),v=d[m]*Math.pow(s+a*g,-l);h[m]=v}return e.makeTensorInfo(o.shape,o.dtype,h)}var Xre={kernelName:Vd,backendName:"cpu",kernelFunc:nFe};function rFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,y:i,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=r;be(s,"LRNGrad");let d=x.sizeFromShape(s.shape),p=s.shape[3],h=e.data.get(s.dataId).values,f=e.data.get(o.dataId).values,m=e.data.get(i.dataId).values,g=new Float32Array(d),v=d;for(let w=0;w<v;w++){let y=w%p,_=w-y+Math.max(0,y-a),k=w-y+Math.min(p,y+a+1),T=0;for(let I=_;I<k;I++)T+=Math.pow(f[I],2);T=c*T+l;for(let I=_;I<k;I++){let A=-2*c*u*f[I]*m[w]/T;w===I&&(A+=Math.pow(T,-u)),A*=h[w],g[I]+=A}}return e.makeTensorInfo(s.shape,o.dtype,g)}var Yre={kernelName:Cg,backendName:"cpu",kernelFunc:rFe};function u7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reductionIndices:i,keepDims:s}=r,a=e,l=o.shape,c=l.length,u=x.parseAxisParam(i,l),d=u,p=O.getAxesPermutation(d,c),h=a.data.get(o.dataId).values;if(p!=null){let _=new Array(c);for(let k=0;k<_.length;k++)_[k]=l[p[k]];h=Xv(h,l,o.dtype,p,_),d=O.getInnerMostAxes(d.length,c),l=_}be(o,"max"),O.assertAxesAreInnerMostDims("max",d,c);let[f,m]=O.computeOutAndReduceShapes(l,d),g=x.sizeFromShape(m),v=tE(h,g,f,o.dtype),w=a.write(v,f,o.dtype),y=f;return s&&(y=O.expandShapeToKeepDim(f,u)),{dataId:w,shape:y,dtype:o.dtype}}var Qre={kernelName:jd,backendName:"cpu",kernelFunc:u7};function oFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;be(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))d=fi({inputs:{x:o},backend:e});else{let p=e.data.get(o.dataId).values,h=x.computeStrides(o.shape),f=Qv(p,o.shape,o.dtype,h,u,"max");d=e.makeTensorInfo(u.outShape,o.dtype,f.values)}return d}var Jre={kernelName:zd,backendName:"cpu",kernelFunc:oFe};function iFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;be(o,"maxPool3d");let u=O.computePool3DInfo(o.shape,i,s,1,a,l,c),d=e.data.get(o.dataId).values,p=vE(d,o.shape,o.dtype,x.computeStrides(o.shape),u,"max");return e.makeTensorInfo(p.shape,"float32",p.values)}var eoe={kernelName:Hd,backendName:"cpu",kernelFunc:iFe};function sFe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;be([o,i],"maxPool3DGrad");let u=O.computePool3DInfo(i.shape,s,a,1,l,c),d=e.bufferSync(i),p=Zne(d,u),h=u.strideDepth,f=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,v=u.dilationHeight,w=u.dilationWidth,y=u.effectiveFilterDepth,_=u.effectiveFilterHeight,k=u.effectiveFilterWidth,T=y-1-u.padInfo.front,I=k-1-u.padInfo.left,A=_-1-u.padInfo.top,P=at(i.shape,"float32"),N=e.bufferSync(o);for(let B=0;B<u.batchSize;++B)for(let S=0;S<u.inChannels;++S)for(let W=0;W<u.inDepth;++W)for(let ie=0;ie<u.inHeight;++ie)for(let Q=0;Q<u.inWidth;++Q){let J=W-T,G=ie-A,H=Q-I,V=0;for(let K=0;K<y;K+=g){let pe=(J+K)/h;if(!(pe<0||pe>=u.outDepth||Math.floor(pe)!==pe))for(let ce=0;ce<_;ce+=v){let se=(G+ce)/f;if(!(se<0||se>=u.outHeight||Math.floor(se)!==se))for(let ye=0;ye<k;ye+=w){let Re=(H+ye)/m;if(Re<0||Re>=u.outWidth||Math.floor(Re)!==Re)continue;let Oe=y*_*k-1-p.get(B,pe,se,Re,S),Ce=K*_*k+ce*k+ye,et=Oe===Ce?1:0;if(et===0)continue;let qe=N.get(B,pe,se,Re,S);V+=qe*et}}}P.set(V,B,W,ie,Q,S)}return e.makeTensorInfo(P.shape,P.dtype,P.values)}var toe={kernelName:Mg,backendName:"cpu",kernelFunc:sFe};function aFe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i,output:s}=n,a=i;be([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=O.computePool2DInfo(a.shape,l,c,1,u,d),h=e.data.get(a.dataId).values,f=at(p.outShape,a.dtype,gE(h,a.shape,a.dtype,p).values),m=p.strideHeight,g=p.strideWidth,v=p.dilationHeight,w=p.dilationWidth,y=p.effectiveFilterHeight,_=p.effectiveFilterWidth,k=_-1-p.padInfo.left,T=y-1-p.padInfo.top,I=at(a.shape,"float32"),A=e.data.get(o.dataId).values,P=at(o.shape,"float32",A);for(let N=0;N<p.batchSize;++N)for(let B=0;B<p.inChannels;++B)for(let S=0;S<p.inHeight;++S)for(let W=0;W<p.inWidth;++W){let ie=S-T,Q=W-k,J=0;for(let G=0;G<y;G+=v){let H=(ie+G)/m;if(!(H<0||H>=p.outHeight||Math.floor(H)!==H))for(let V=0;V<_;V+=w){let K=(Q+V)/g;if(K<0||K>=p.outWidth||Math.floor(K)!==K)continue;let pe=y*_-1-f.get(N,H,K,B),ce=G*_+V,se=pe===ce?1:0;if(se===0)continue;let ye=P.get(N,H,K,B);J+=ye*se}}I.set(J,N,S,W,B)}return e.makeTensorInfo(I.shape,I.dtype,I.values)}var noe={kernelName:Sg,backendName:"cpu",kernelFunc:aFe};function roe(t,n,e,r,o){let i=x.computeStrides(n),s=Qv(t,n,e,i,o,"max"),a=gE(t,n,e,o,!0,r);return[s.values,a.values]}var ooe={kernelName:Tg,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=n,l=e;be(r,"MaxPoolWithArgmax");let c=l.data.get(r.dataId).values,u=O.computePool2DInfo(r.shape,o,i,[1,1],s),[d,p]=roe(c,r.shape,r.dtype,a,u),h=l.write(d,u.outShape,r.dtype),f=l.write(p,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:f,shape:u.outShape,dtype:"int32"}]}};function lFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=x.parseAxisParam(i,o.shape),c=O.computeOutAndReduceShapes(o.shape,a)[1],u=x.sizeFromShape(c),d=[],p=e.makeTensorInfo([],"float32",new Float32Array([u]));d.push(p);let h=Ga({inputs:{x:o},backend:e,attrs:{dtype:"float32"}});d.push(h);let f=Bk({inputs:{a:h,b:p},backend:e});d.push(f);let m=Hp({inputs:{x:f},backend:e,attrs:{axis:i,keepDims:s}});return d.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}var ioe={kernelName:Ud,backendName:"cpu",kernelFunc:lFe};function cFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;be(o,"min");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=yr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("min",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let _=0;_<h;++_){let k=m[w+_];(Number.isNaN(k)||k<y)&&(y=k)}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=ln({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var soe={kernelName:Gd,backendName:"cpu",kernelFunc:cFe};function uFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,mode:s}=r;be(o,"mirrorPad");let a=i.map((y,_)=>y[0]+o.shape[_]+y[1]),l=i.map(y=>y[0]),c=i.map((y,_)=>y[0]+o.shape[_]),u=s==="reflect"?0:1,d=e.data.get(o.dataId).values,p=o.shape.length,h=x.computeStrides(o.shape),f=x.sizeFromShape(a),m=a.length,g=x.computeStrides(a),v=x.getTypedArrayFromDType(o.dtype,f);for(let y=0;y<f;y++){let _=x.indexToLoc(y,m,g);for(let T=0;T<m;T++)_[T]<l[T]?_[T]=l[T]*2-_[T]-u:_[T]>=c[T]&&(_[T]=(c[T]-1)*2-_[T]+u);_=_.map((T,I)=>T-l[I]);let k=x.locToIndex(_,p,h);v[y]=d[k]}return{dataId:e.write(v,a,o.dtype),shape:a,dtype:o.dtype}}var aoe={kernelName:Wd,backendName:"cpu",kernelFunc:uFe};var dFe=an((t,n)=>{let e=t%n;return t<0&&n<0||t>=0&&n>=0?e:(e+n)%n}),pFe=fn(eu,dFe),loe={kernelName:eu,backendName:"cpu",kernelFunc:pFe};var uoe=I2(j_());function d7(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{dim:i}=r,s=o.shape.length,a=i;if(a===-1&&(a=s-1),a!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${a}`);let l=x.parseAxisParam([a],o.shape),c=u7({inputs:{x:o},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),u=O.expandShapeToKeepDim(c.shape,l),d=ln({inputs:{x:c},backend:e,attrs:{shape:u}}),p=Ok({inputs:{a:o,b:d},backend:e}),h=RL({inputs:{x:p},backend:e}),f=Hp({inputs:{x:h},backend:e,attrs:{axis:l,keepDims:!1}}),m=ln({inputs:{x:f},backend:e,attrs:{shape:u}}),g=Bk({inputs:{a:h,b:m},backend:e});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),g}var coe={kernelName:cp,backendName:"cpu",kernelFunc:d7};function hFe(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{numSamples:i,seed:s,normalized:a}=r;be(o,"multinomial");let l=a?o:d7({inputs:{logits:o},backend:e,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=e.data.get(l.dataId).values,p=[c,i],h=x.makeZerosTypedArray(x.sizeFromShape(p),"int32");for(let f=0;f<c;++f){let m=f*u,g=new Float32Array(u-1);g[0]=d[m];for(let y=1;y<g.length;++y)g[y]=g[y-1]+d[m+y];let v=uoe.alea(s.toString()),w=f*i;for(let y=0;y<i;++y){let _=v();h[w+y]=g.length;for(let k=0;k<g.length;k++)if(_<g[k]){h[w+y]=k;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(p,"int32",h)}var doe={kernelName:Dg,backendName:"cpu",kernelFunc:hFe};var fFe=Jo.nonMaxSuppressionV3Impl;function mFe(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r;be(o,"NonMaxSuppression");let c=e.data.get(o.dataId).values,u=e.data.get(i.dataId).values,{selectedIndices:d}=fFe(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var poe={kernelName:Eg,backendName:"cpu",kernelFunc:mFe};var gFe=Jo.nonMaxSuppressionV4Impl;function vFe(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;be(o,"NonMaxSuppressionPadded");let u=e.data.get(o.dataId).values,d=e.data.get(i.dataId).values,{selectedIndices:p,validOutputs:h}=gFe(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var hoe={kernelName:Ig,backendName:"cpu",kernelFunc:vFe};var wFe=Jo.nonMaxSuppressionV5Impl;function yFe(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;be(o,"NonMaxSuppressionWithScore");let u=e.data.get(o.dataId).values,d=e.data.get(i.dataId).values,p=s,h=a,f=l,m=c,{selectedIndices:g,selectedScores:v}=wFe(u,d,p,h,f,m);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var foe={kernelName:Ng,backendName:"cpu",kernelFunc:yFe};function xFe(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o}=n,{dtype:i,depth:s,onValue:a,offValue:l}=r;be(o,"oneHot");let c=x.sizeFromShape(o.shape),u=new Float32Array(c*s);u.fill(l);let d=e.data.get(o.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<s&&(u[p*s+d[p]]=a);return e.makeTensorInfo([...o.shape,s],i,u)}var moe={kernelName:Zd,backendName:"cpu",kernelFunc:xFe};function Vk(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){let o=Ua({inputs:{input:r},backend:e}),i=Vk({inputs:{x:o},backend:e}),s=$u({inputs:{input:r},backend:e}),a=Vk({inputs:{x:s},backend:e}),l=xo({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return $k({backend:e,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var goe={kernelName:pp,backendName:"cpu",kernelFunc:Vk};function voe(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){let o=Ua({inputs:{input:r},backend:e}),i=voe({inputs:{x:o},backend:e}),s=$u({inputs:{input:r},backend:e}),a=Vk({inputs:{x:s},backend:e}),l=xo({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return $k({backend:e,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}var woe={kernelName:Kd,backendName:"cpu",kernelFunc:voe};function p7(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r;if(n.length===1)return Jv({inputs:{input:n[0]},backend:e,attrs:{dim:o}});let i=n[0].shape,s=n[0].dtype;n.forEach(u=>{x.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),x.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=Jv({inputs:{input:u},backend:e,attrs:{dim:o}});return a.push(d),d}),c=_f({inputs:l,backend:e,attrs:{axis:o}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var yoe={kernelName:Xd,backendName:"cpu",kernelFunc:p7};function _Fe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,constantValue:s}=r;be(o,"pad");let a=i.map((w,y)=>w[0]+o.shape[y]+w[1]),l=i.map(w=>w[0]),c=e.data.get(o.dataId).values,u=x.sizeFromShape(o.shape),d=o.shape.length,p=x.computeStrides(o.shape),h=x.sizeFromShape(a),f=a.length,m=x.computeStrides(a),g=x.getTypedArrayFromDType(o.dtype,h);s!==0&&g.fill(s);for(let w=0;w<u;w++){let _=x.indexToLoc(w,d,p).map((T,I)=>T+l[I]),k=x.locToIndex(_,f,m);g[k]=c[w]}return{dataId:e.write(g,a,o.dtype),shape:a,dtype:o.dtype}}var yE={kernelName:Yd,backendName:"cpu",kernelFunc:_Fe};var kFe=an((t,n)=>Math.pow(t,n)),bFe=fn(nu,kFe),xoe={kernelName:nu,backendName:"cpu",kernelFunc:bFe};function CFe(t){let{inputs:n,backend:e,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=n,{outputRaggedRank:a}=r,l=o.map(v=>e.data.get(v.dataId).values),c=o.map(v=>v.shape),u=e.data.get(i.dataId).values,d=e.data.get(s.dataId).values,[p,h,f]=nE(l,c,u,i.shape,i.dtype,d,s.shape,a),m=p.map(v=>e.makeTensorInfo([v.length],"int32",v)),g=e.makeTensorInfo(f,i.dtype,h);return m.concat([g])}var _oe={kernelName:Ag,backendName:"cpu",kernelFunc:CFe};function SFe(t){let{inputs:n,backend:e}=t,{starts:r,limits:o,deltas:i}=n,s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=rE(s,r.shape,r.dtype,a,o.shape,l,i.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],r.dtype,u);return[d,p]}var koe={kernelName:Rg,backendName:"cpu",kernelFunc:SFe};function MFe(t){let{inputs:n,backend:e,attrs:r}=t,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=r,c=e.data.get(o.dataId).values,u=e.data.get(i.dataId).values,d=e.data.get(s.dataId).values,p=a.map(g=>e.data.get(g.dataId).values),h=a.map(g=>g.shape),[f,m]=oE(c,o.shape,u,i.shape,i.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(f,i.dtype,m)}var boe={kernelName:Og,backendName:"cpu",kernelFunc:MFe};function TFe(t){let{backend:n,attrs:e}=t,{start:r,stop:o,dtype:i,step:s}=e,a=iE(r,o,s,i);return n.makeTensorInfo([a.length],i,a)}var Coe={kernelName:Fg,backendName:"cpu",kernelFunc:TFe};var DFe=Mt(ru,t=>1/t),Soe={kernelName:ru,backendName:"cpu",kernelFunc:DFe};function EFe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r;be(o,"resizeBilinear");let l=x.computeStrides(o.shape),[c,u]=a,[d,p,h,f]=o.shape,m=e.data.get(o.dataId).values,g=new Float32Array(x.sizeFromShape([d,c,u,f])),v=[i&&c>1?p-1:p,i&&u>1?h-1:h],w=[i&&c>1?c-1:c,i&&u>1?u-1:u],y=0,_=v[0]/w[0],k=v[1]/w[1];for(let T=0;T<d;T++)for(let I=0;I<c;I++){let A;s?A=_*(I+.5)-.5:A=_*I;let P=Math.max(0,Math.floor(A)),N=A-P,B=Math.min(p-1,Math.ceil(A)),S=T*l[0]+P*l[1],W=T*l[0]+B*l[1];for(let ie=0;ie<u;ie++){let Q;s?Q=k*(ie+.5)-.5:Q=k*ie;let J=Math.max(0,Math.floor(Q)),G=Q-J,H=Math.min(h-1,Math.ceil(Q)),V=S+J*l[2],K=W+J*l[2],pe=S+H*l[2],ce=W+H*l[2];for(let se=0;se<f;se++){let ye=m[V+se],Re=m[K+se],Oe=m[pe+se],Ce=m[ce+se],et=ye+(Oe-ye)*G,qe=Re+(Ce-Re)*G,xt=et+(qe-et)*N;g[y++]=xt}}}return e.makeTensorInfo([d,c,u,f],"float32",g)}var Moe={kernelName:np,backendName:"cpu",kernelFunc:EFe};function IFe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r;be([i,o],"resizeBilinearGrad");let a=x.computeStrides(o.shape),[l,c,u,d]=o.shape,[,p,h]=i.shape,f=new Float32Array(l*c*u*d),m=[s&&p>1?c-1:c,s&&h>1?u-1:u],g=[s&&p>1?p-1:p,s&&h>1?h-1:h],v=m[0]/g[0],w=m[1]/g[1],y=e.data.get(i.dataId).values,_=0;for(let k=0;k<l;k++){let T=k*a[0];for(let I=0;I<p;I++){let A=I*v,P=Math.floor(A),N=Math.min(Math.ceil(A),c-1),B=T+P*a[1],S=T+N*a[1],W=A-P,ie=1-W;for(let Q=0;Q<h;Q++){let J=Q*w,G=Math.floor(J),H=Math.min(Math.ceil(J),u-1),V=J-G,K=1-V,pe=B+G*a[2],ce=B+H*a[2],se=S+G*a[2],ye=S+H*a[2],Re=ie*K,Oe=ie*V,Ce=W*K,et=W*V;for(let qe=0;qe<d;qe++){let xt=y[_++];f[pe+qe]+=xt*Re,f[ce+qe]+=xt*Oe,f[se+qe]+=xt*Ce,f[ye+qe]+=xt*et}}}}return e.makeTensorInfo([l,u,c,d],"float32",f)}var Toe={kernelName:Lg,backendName:"cpu",kernelFunc:IFe};function NFe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r;be(o,"resizeNearestNeighbor");let l=x.computeStrides(o.shape),[c,u]=a,[d,p,h,f]=o.shape,m=e.data.get(o.dataId).values,g=new Float32Array(d*c*u*f),v=[i&&c>1?p-1:p,i&&u>1?h-1:h],w=[i&&c>1?c-1:c,i&&u>1?u-1:u],y=v[0]/w[0],_=v[1]/w[1],k=0;for(let T=0;T<d;T++){let I=T*l[0];for(let A=0;A<c;A++){let P=s?y*(A+.5):y*A,N=Math.min(p-1,i?Math.round(P):Math.floor(P));s&&(N=Math.max(0,N));let B=I+N*l[1];for(let S=0;S<u;S++){let W=s?_*(S+.5):_*S,ie=Math.min(h-1,i?Math.round(W):Math.floor(W));s&&(ie=Math.max(0,ie));let Q=B+ie*l[2];for(let J=0;J<f;J++){let G=m[Q+J];g[k++]=G}}}}return e.makeTensorInfo([d,c,u,f],o.dtype,g)}var Doe={kernelName:tp,backendName:"cpu",kernelFunc:NFe};function AFe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r;be([i,o],"resizeNearestNeighborGrad");let a=x.computeStrides(o.shape),l=x.computeStrides(i.shape),[c,u,d,p]=o.shape,[,h,f]=i.shape,m=new Float32Array(c*u*d*p),g=e.data.get(i.dataId).values,v=[s&&h>1?u-1:u,s&&f>1?d-1:d],w=[s&&h>1?h-1:h,s&&f>1?f-1:f],y=v[0]/w[0],_=v[1]/w[1],k=1/y,T=1/_,I=Math.ceil(k)*2+2,A=Math.ceil(T)*2+2;for(let P=0;P<c;P++){let N=P*a[0];for(let B=0;B<u;B++){let S=N+B*a[1],W=Math.floor(B*k),ie=Math.floor(W-I/2);for(let Q=0;Q<d;Q++){let J=S+Q*a[2],G=Math.floor(Q*T),H=Math.floor(G-A/2);for(let V=0;V<p;V++){let K=0;for(let pe=0;pe<I;pe++){let ce=pe+ie;if(ce<0||ce>=h)continue;let se=N+ce*l[1],ye=ce*y,Re=Math.min(u-1,s?Math.round(ye):Math.floor(ye));if(B===Re)for(let Oe=0;Oe<A;Oe++){let Ce=Oe+H;if(Ce<0||Ce>=f)continue;let et=se+Ce*l[2],qe=Ce*_,xt=Math.min(d-1,s?Math.round(qe):Math.floor(qe));Q===xt&&(K+=g[et+V])}}m[J+V]=K}}}}return e.makeTensorInfo(o.shape,o.dtype,m)}var Eoe={kernelName:Bg,backendName:"cpu",kernelFunc:AFe};function RFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dims:i}=r;be(o,"reverse");let s=o.shape.length,a=x.parseAxisParam(i,o.shape);if(s===0)return fi({inputs:{x:o},backend:e});let l=new yn(o.shape,o.dtype),c=e.bufferSync(o);for(let u=0;u<l.size;u++){let d=l.indexToLoc(u),p=d.slice();a.forEach(h=>p[h]=o.shape[h]-1-p[h]),l.set(c.get(...p),...d)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}var Ioe={kernelName:rp,backendName:"cpu",kernelFunc:RFe};var Noe={kernelName:t0,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,{radians:o,fillValue:i,center:s}=n,a=e,l=x.getTypedArrayFromDType(r.dtype,x.sizeFromShape(r.shape)),[c,u,d,p]=r.shape,[h,f]=O.getImageCenter(s,u,d),m=255,g=Math.sin(o),v=Math.cos(o),w=a.data.get(r.dataId).values;for(let _=0;_<c;_++){let k=_*d*u*p;for(let T=0;T<u;T++){let I=T*(d*p);for(let A=0;A<d;A++){let P=A*p;for(let N=0;N<p;N++){let B=[c,T,A,N],S=B[2],W=B[1],ie=(S-h)*v-(W-f)*g,Q=(S-h)*g+(W-f)*v;ie=Math.round(ie+h),Q=Math.round(Q+f);let J=i;if(typeof i!="number"&&(N===3?J=m:J=i[N]),ie>=0&&ie<d&&Q>=0&&Q<u){let H=Q*(d*p),V=ie*p,K=k+H+V+N;J=w[K]}let G=k+I+P+N;l[G]=J}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var OFe=Mt(su,t=>{let n=Math.floor(t);return t-n<.5?Math.floor(t):t-n>.5?Math.ceil(t):n%2===0?n:n+1}),Aoe={kernelName:su,backendName:"cpu",kernelFunc:OFe};function FFe(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o,updates:i}=n,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(i,o,s),p=!0,h=e.bufferSync(o),f=e.bufferSync(i),m=Wl(h,f,s,d,c,l,a,u,0,p);return e.makeTensorInfo(s,m.dtype,m.values)}var Roe={kernelName:$g,backendName:"cpu",kernelFunc:FFe};function PFe(t,n){let e=0,r=t.length,o=0;for(;e<r;)o=Math.floor((e+r)/2),t[o]<n?e=o+1:r=o;return r}function BFe(t,n){let e=0,r=t.length,o=0;for(;e<r;)o=Math.floor((e+r)/2),t[o]<=n?e=o+1:r=o;return r}function Ooe(t,n,e,r,o,i){let s=x.getArrayFromDType("int32",e*o);for(let a=0;a<e;++a){let l=t.slice(a*r,(a+1)*r),c=a*o;for(let u=0;u<o;++u)s[c+u]=i==="left"?PFe(l,n[u+c]):BFe(l,n[u+c])}return s}function LFe(t){let{inputs:n,backend:e,attrs:r}=t,{sortedSequence:o,values:i}=n,{side:s}=r,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,c=Ooe(a,l,o.shape[0],o.shape[1],i.shape[1],s);return e.makeTensorInfo(i.shape,"int32",c)}var Foe={kernelName:jg,backendName:"cpu",kernelFunc:LFe};function $Fe(t){let{inputs:n,backend:e}=t,{condition:r,t:o,e:i}=n;be([r,o,i],"select");let s=r.shape.length,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=Ur(o.dtype,i.dtype),d=x.makeZerosTypedArray(x.sizeFromShape(o.shape),u),p=0,h=s===0||s>1||o.shape.length===1?1:x.sizeFromShape(o.shape.slice(1));for(let f=0;f<a.length;f++)for(let m=0;m<h;m++)a[f]===1?d[p++]=l[f]:d[p++]=c[f];return e.makeTensorInfo(o.shape,u,d)}var Poe={kernelName:op,backendName:"cpu",kernelFunc:$Fe};var VFe=O.SELU_SCALEALPHA,jFe=O.SELU_SCALE,zFe=Mt(lu,t=>t>=0?jFe*t:VFe*(Math.exp(t)-1)),Boe={kernelName:lu,backendName:"cpu",kernelFunc:zFe};var HFe=Mt(du,t=>t<0?-1:t>0?1:0),Loe={kernelName:du,backendName:"cpu",kernelFunc:HFe};var UFe=Mt(cu,t=>Math.sin(t)),$oe={kernelName:cu,backendName:"cpu",kernelFunc:UFe};var GFe=Mt(uu,t=>Math.sinh(t)),Voe={kernelName:uu,backendName:"cpu",kernelFunc:GFe};var WFe=11920928955078125e-23,joe=Math.log(WFe)+2,qFe=Mt(hu,t=>{let n=t>-joe,e=t<joe,r=Math.exp(t),o;return e?o=r:n?o=t:o=Math.log(1+r),o}),zoe={kernelName:hu,backendName:"cpu",kernelFunc:qFe};function KFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,paddings:s}=r;be([o],"spaceToBatchND");let a=x.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let T=1+i.length;T<o.shape.length;++T)l.push([0,0]);let c=yE.kernelFunc({inputs:{x:o},backend:e,attrs:{paddings:l,constantValue:0}}),u=O.getReshaped(c.shape,i,a,!1),d=O.getPermuted(u.length,i.length,!1),p=O.getReshapedPermuted(c.shape,i,a,!1),m=ln({inputs:{x:c},backend:e,attrs:{shape:u}}),w=yr({inputs:{x:m},backend:e,attrs:{perm:d}}),k=ln({inputs:{x:w},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(w),k}var Hoe={kernelName:ap,backendName:"cpu",kernelFunc:KFe};function ZFe(t){let{inputs:n,backend:e}=t,{indices:r,values:o,denseShape:i,defaultValue:s}=n;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=e.data.get(s.dataId).values[0],[d,p,h,f,m]=sE(a,r.shape,r.dtype,l,o.dtype,c,u);return[e.makeTensorInfo(p,r.dtype,d),e.makeTensorInfo([p[0]],o.dtype,h),e.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),e.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var Uoe={kernelName:zg,backendName:"cpu",kernelFunc:ZFe};function XFe(t){let{inputs:n,backend:e}=t,{inputIndices:r,inputShape:o,newShape:i}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(e.data.get(o.dataId).values),a=e.data.get(r.dataId).values,l=Array.from(e.data.get(i.dataId).values),[c,u,d]=aE(a,r.shape,r.dtype,s,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var Goe={kernelName:Hg,backendName:"cpu",kernelFunc:XFe};function YFe(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=Yv(s,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}var Woe={kernelName:Ug,backendName:"cpu",kernelFunc:YFe};function QFe(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=Yv(s,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}var qoe={kernelName:Gg,backendName:"cpu",kernelFunc:QFe};function JFe(t){let{inputs:n,backend:e,attrs:r}=t,{sparseIndices:o,sparseValues:i,defaultValue:s}=n,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=O.calculateShapes(i,o,a),h=!1,f=e.bufferSync(o),m;switch(i.dtype){case"bool":{let g=e.bufferSync(i),v=!!e.data.get(s.dataId).values[0];m=Wl(f,g,a,p,u,c,l,d,v,h);break}case"float32":{let g=e.bufferSync(i),v=e.data.get(s.dataId).values[0];m=Wl(f,g,a,p,u,c,l,d,v,h);break}case"int32":{let g=e.bufferSync(i),v=e.data.get(s.dataId).values[0];m=Wl(f,g,a,p,u,c,l,d,v,h);break}case"string":{let g=e.bufferSync(i),v=x.decodeString(e.data.get(s.dataId).values[0]);m=Wl(f,g,a,p,u,c,l,d,v,h);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return e.makeTensorInfo(a,m.dtype,m.values)}var Koe={kernelName:Wg,backendName:"cpu",kernelFunc:JFe};function e6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{numOrSizeSplits:i,axis:s}=r,a=x.parseAxisParam(s,o.shape)[0],l=O.prepareSplitSize(o,i,a),c=new Array(o.shape.length).fill(0),u=o.shape.slice();return l.map(d=>{let p=[...u];p[a]=d;let h=qa({inputs:{x:o},backend:e,attrs:{begin:c,size:p}});return c[a]+=d,h})}var Zoe={kernelName:lp,backendName:"cpu",kernelFunc:e6e};var Xoe={kernelName:qg,backendName:"cpu",kernelFunc:({inputs:t,backend:n})=>{let{x:e}=t,r=n;be(e,"square");let o=r.data.get(e.dataId).values,i=new Float32Array(o.length);for(let a=0;a<o.length;++a){let l=o[a];i[a]=l*l}return{dataId:r.write(i,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}};var t6e=Mt(yu,(t,n)=>{let e=n;return isNaN(t)?NaN:t>0?1:e.alpha}),Yoe={kernelName:yu,backendName:"cpu",kernelFunc:t6e};function n6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r;be(o,"stridedSlice");let{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:w,end:y,strides:_}=yo.sliceInfo(o.shape,i,s,a,l,c,u,d,p),k;if(m)k=ln({inputs:{x:o},backend:e,attrs:{shape:f}});else if(g||v){x.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let T=yo.computeOutShape(w,y,_),I=qa({inputs:{x:o},backend:e,attrs:{begin:w,size:T}});k=ln({inputs:{x:I},backend:e,attrs:{shape:f}}),e.disposeIntermediateTensorInfo(I)}else{let T=e.bufferSync(o),I=lE(h,T,_,w);k=e.makeTensorInfo(f,I.dtype,I.values)}return k}var Qoe={kernelName:Kg,backendName:"cpu",kernelFunc:n6e};function r6e(t){let{inputs:n,backend:e,attrs:r}=t,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=n,p=e.data.get(u.dataId).values,h=e.data.get(d.dataId).values,[f,m]=cE(p,h,o,i,s,a,l,c);return[e.makeTensorInfo([f.length],"string",f),e.makeTensorInfo(d.shape,"int32",m)]}var Joe={kernelName:Zg,backendName:"cpu",kernelFunc:r6e};function o6e(t){let{inputs:n,backend:e,attrs:r}=t,{skipEmpty:o}=r,{input:i,delimiter:s}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values[0],[c,u,d]=uE(a,l,o),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var eie={kernelName:Xg,backendName:"cpu",kernelFunc:o6e};function i6e(t){let{inputs:n,backend:e,attrs:r}=t,{numBuckets:o}=r,{input:i}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let s=e.data.get(i.dataId).values,a=dE(s,o);return e.makeTensorInfo(i.shape,"int32",a)}var tie={kernelName:Yg,backendName:"cpu",kernelFunc:i6e};var s6e=Mt(vu,t=>Math.tan(t)),nie={kernelName:vu,backendName:"cpu",kernelFunc:s6e};var a6e=Mt(wu,t=>Math.tanh(t)),rie={kernelName:wu,backendName:"cpu",kernelFunc:a6e};function l6e(t){let{inputs:n,backend:e}=t,{tensor:r,indices:o,updates:i}=n,{sliceRank:s,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=O.calculateShapes(i,o,r.shape),d=!1,p=e.bufferSync(o),h=e.bufferSync(i),f=e.bufferSync(r),m=Wl(p,h,r.shape,u,l,a,s,c,f,d);return e.makeTensorInfo(r.shape,m.dtype,m.values)}var oie={kernelName:Vg,backendName:"cpu",kernelFunc:l6e};function c6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reps:i}=r;be(o,"tile");let s=pE(e.bufferSync(o),i);return e.makeTensorInfo(s.shape,s.dtype,s.values)}var iie={kernelName:kl,backendName:"cpu",kernelFunc:c6e};function u6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{k:i,sorted:s}=r;be(o,"topk");let a=e.data.get(o.dataId).values,[l,c]=hE(a,o.shape,o.dtype,i,s);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(c.shape,c.dtype,c.values)]}var sie={kernelName:Qg,backendName:"cpu",kernelFunc:u6e};function d6e(t){let{inputs:n,attrs:e,backend:r}=t,{image:o,transforms:i}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=e,[u,d,p,h]=o.shape,[f,m]=c??[d,p],g=[u,f,m,h],v=x.computeStrides(o.shape),w=v[0],y=v[1],_=v[2],k=x.computeStrides(g),T=k[0],I=k[1],A=k[2],P=x.getTypedArrayFromDType(o.dtype,x.sizeFromShape(g));P.fill(l);let N=r.data.get(o.dataId).values,B=r.data.get(i.dataId).values;for(let W=0;W<u;++W){let ie=i.shape[0]===1?B:B.subarray(W*8,W*8+8);for(let Q=0;Q<f;++Q)for(let J=0;J<m;++J)for(let G=0;G<h;++G){let H,V=ie[6]*J+ie[7]*Q+1;if(V===0)continue;let K=(ie[0]*J+ie[1]*Q+ie[2])/V,pe=(ie[3]*J+ie[4]*Q+ie[5])/V,ce=aie(K,p,a),se=aie(pe,d,a);switch(s){case"nearest":H=g6e(N,d,p,w,y,_,W,se,ce,G,l);break;case"bilinear":H=v6e(N,d,p,w,y,_,W,se,ce,G,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}let ye=W*T+Q*I+J*A+G;P[ye]=H}return r.makeTensorInfo(g,o.dtype,P)}return{dataId:r.write(P,g,o.dtype),shape:o.shape,dtype:o.dtype}}var lie={kernelName:Jg,backendName:"cpu",kernelFunc:d6e};function aie(t,n,e){switch(e){case"reflect":return p6e(t,n);case"wrap":return h6e(t,n);case"nearest":return m6e(t,n);case"constant":default:return f6e(t,n)}}function p6e(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let r=2*n;e<r&&(e=r*Math.trunc(-e/r)+e),e=e<-n?e+r:-e-1}else if(e>n-1)if(n<=1)e=0;else{let r=2*n;e-=r*Math.trunc(e/r),e>=n&&(e=r-e-1)}return x.clamp(0,e,n-1)}function h6e(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let r=n-1;e+=n*(Math.trunc(-e/r)+1)}else if(e>n-1)if(n<=1)e=0;else{let r=n-1;e-=n*Math.trunc(e/r)}return x.clamp(0,e,n-1)}function f6e(t,n){return t}function m6e(t,n){return x.clamp(0,t,n-1)}function jk(t,n,e,r,o,i,s,a,l,c,u){let d=s*r+a*o+l*i+c;return 0<=a&&a<n&&0<=l&&l<e?t[d]:u}function g6e(t,n,e,r,o,i,s,a,l,c,u){let d=Math.round(a),p=Math.round(l);return jk(t,n,e,r,o,i,s,d,p,c,u)}function v6e(t,n,e,r,o,i,s,a,l,c,u){let d=Math.floor(a),p=Math.floor(l),h=d+1,f=p+1,m=(f-l)*jk(t,n,e,r,o,i,s,d,p,c,u)+(l-p)*jk(t,n,e,r,o,i,s,d,f,c,u),g=(f-l)*jk(t,n,e,r,o,i,s,h,p,c,u)+(l-p)*jk(t,n,e,r,o,i,s,h,f,c,u);return(h-a)*m+(a-d)*g}function w6e(t){let{inputs:n,attrs:e,backend:r}=t,{axis:o}=e,{x:i}=n;be(i,"unique");let s=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:c}=fE(s,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var cie={kernelName:e0,backendName:"cpu",kernelFunc:w6e};function y6e(t){let{inputs:n,backend:e,attrs:r}=t,{value:o}=n,{axis:i}=r;i<0&&(i+=o.shape.length);let s=o.shape.length,a=o.shape[i],l=new Array(s-1),c=0;for(let h=0;h<s;h++)h!==i&&(l[c++]=o.shape[h]);let u=new Array(s).fill(0),d=o.shape.slice();d[i]=1;let p=new Array(a);for(let h=0;h<p.length;h++){u[i]=h;let f=qa({inputs:{x:o},backend:e,attrs:{begin:u,size:d}});p[h]=ln({inputs:{x:f},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(f)}return p}var uie={kernelName:up,backendName:"cpu",kernelFunc:y6e};function x6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,segmentIds:i}=n,{numSegments:s}=r;be(o,"unsortedSegmentSum");let a=o.shape.length,l=i.shape.length,c=[],u=[],d=a-l,p=i;for(let f=0;f<d;++f){let m=Jv({inputs:{input:p},backend:e,attrs:{dim:f+1}});p=m,u.push(m)}for(let f=0;f<s;++f){let m=x.createScalarValue(f,"int32"),g=e.makeTensorInfo([],"int32",m),v=NL({inputs:{a:g,b:p},backend:e}),w=Ga({inputs:{x:v},backend:e,attrs:{dtype:"float32"}}),y=Q0({inputs:{a:w,b:o},backend:e}),_=Hp({inputs:{x:y},backend:e,attrs:{axis:0,keepDims:!1}});c.push(_),u.push(g),u.push(v),u.push(w),u.push(y),u.push(_)}let h=p7({inputs:c,backend:e,attrs:{axis:0}});return u.forEach(f=>e.disposeIntermediateTensorInfo(f)),h}var die={kernelName:dp,backendName:"cpu",kernelFunc:x6e};var _6e=[Pne,Ute,Bne,Lne,Zte,$ne,Vne,jne,zne,Hne,Une,Gne,Wne,qne,Kne,Xne,Yne,Qne,Jne,Fne,ere,tre,nre,Xte,rre,Kte,Yte,ore,Gte,ire,are,lre,cre,ure,dre,pre,hre,fre,mre,gre,vre,wre,yre,xre,_re,kre,bre,Cre,Sre,Mre,Tre,Dre,Ire,Ene,Nre,Qte,Are,Jte,Rre,ene,Ore,Fre,Pre,tne,nne,Bre,Lre,$re,Vre,rne,one,Wte,jre,sre,zre,Hre,Ure,Ine,ine,sne,Gre,ane,Wre,qre,Kre,Zre,Xre,Yre,Qre,lne,Jre,eoe,toe,noe,ooe,ioe,soe,cne,aoe,loe,doe,une,dne,poe,hoe,foe,pne,moe,woe,yoe,yE,xoe,Nne,fne,_oe,koe,boe,Coe,qte,Lk,Soe,Ane,Rne,One,Moe,Toe,Doe,Eoe,Ioe,Noe,Aoe,yne,Roe,Foe,Poe,Boe,_ne,Loe,$oe,Voe,kne,coe,zoe,Hoe,Uoe,Goe,Woe,qoe,Koe,Zoe,Cne,Xoe,Sne,Mne,Yoe,Qoe,Joe,eie,tie,Tne,Ere,nie,rie,oie,iie,sie,lie,hne,cie,uie,die,goe];for(let t of _6e)Q1(t);var r2={};Jt(r2,{assertNotComplex:()=>ql,bindCanvasToFramebuffer:()=>I6e,bindColorTextureToFramebuffer:()=>Gk,bindTextureToProgramUniformSampler:()=>T7,bindTextureUnit:()=>mie,bindVertexBufferToProgramAttribute:()=>ME,callAndCheck:()=>Je,canBeRepresented:()=>m7,createFragmentShader:()=>v7,createFramebuffer:()=>C7,createProgram:()=>w7,createStaticIndexBuffer:()=>_7,createStaticVertexBuffer:()=>x7,createTexture:()=>k7,createVertexShader:()=>g7,getBatchDim:()=>Gp,getExtensionOrThrow:()=>ew,getFramebufferErrorMessage:()=>gie,getMaxTexturesInShader:()=>I7,getNumChannels:()=>D6e,getProgramUniformLocation:()=>M7,getProgramUniformLocationOrThrow:()=>S7,getRowsCols:()=>Wp,getShapeAs3D:()=>nw,getTextureShapeFromLogicalShape:()=>D7,getWebGLDisjointQueryTimerVersion:()=>N7,getWebGLErrorMessage:()=>fie,getWebGLMaxTextureSize:()=>E7,hasExtension:()=>Hs,isCapableOfRenderingToFloatTexture:()=>A7,isDownloadFloatTextureEnabled:()=>R7,isReshapeFree:()=>kf,isWebGLFenceEnabled:()=>O7,isWebGLVersionEnabled:()=>DE,linkProgram:()=>y7,logShaderSourceAndInfoLog:()=>SE,resetMaxTextureSize:()=>N6e,resetMaxTexturesInShader:()=>A6e,unbindColorTextureFromFramebuffer:()=>TE,unbindTextureUnit:()=>E6e,validateFramebuffer:()=>tw,validateProgram:()=>Uk,validateTextureSize:()=>b7});var e2={},xE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function _E(t,n){e2[t]=n}function zs(t,n){if(!(t in e2)||n!=null){let r=b6e(t,n);if(r!==null)e2[t]=r;else return console.log("Could not get context for WebGL version",t),null}let e=e2[t];return e==null||e.isContextLost()?(delete e2[t],zs(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),e2[t])}function k6e(t){if(!ee().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function b6e(t,n){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let e=n??k6e(t);return e.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete e2[t]},!1),ee().getBool("SOFTWARE_WEBGL_ENABLED")&&(xE.failIfMajorPerformanceCaveat=!1),t===1?e.getContext("webgl",xE)||e.getContext("experimental-webgl",xE):e.getContext("webgl2",xE)}var t2=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(t2||{}),Di=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(Di||{}),mi=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(mi||{});function n2(t,n){return[n,t]}function pie(t,n){return t*n}function zk(t){let n=x.sizeFromShape(t),e=Math.ceil(n/4);return x.sizeToSquarishShape(e)}function Vu(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function hie(t,n){let[e,r]=Vu(t,n);return e*r*4}function Hk(t,n){let e=t,r,o,i,s,a,l,c,u,d,p;return ee().getNumber("WEBGL_VERSION")===2?(r=e.R32F,o=e.R16F,i=e.RGBA16F,s=e.RGBA32F,a=e.RED,c=4,u=1,d=e.HALF_FLOAT,p=e.FLOAT,l=e.RGBA8):(r=t.RGBA,o=t.RGBA,i=t.RGBA,s=e.RGBA,a=t.RGBA,c=4,u=4,d=n!=null?n.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:p}}function Je(t,n){let e=n();return ee().getBool("DEBUG")&&C6e(t),e}function C6e(t){let n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+fie(t,n))}var S6e=596e-10,M6e=65504;function m7(t){return!!(ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||S6e<Math.abs(t)&&Math.abs(t)<M6e)}function fie(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}function ew(t,n){return Up(t,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}function g7(t,n){let e=Up(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Je(t,()=>t.shaderSource(e,n)),Je(t,()=>t.compileShader(e)),t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}function v7(t,n){let e=Up(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Je(t,()=>t.shaderSource(e,n)),Je(t,()=>t.compileShader(e)),ee().get("ENGINE_COMPILE_ONLY"))return e;if(t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw SE(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}var T6e=/ERROR: [0-9]+:([0-9]+):/g;function SE(t,n){let e=T6e.exec(n);if(e==null){console.log(`Couldn't parse line number in error: ${n}`),console.log(t);return}let r=+e[1],o=t.split(`
`),i=o.length.toString().length+2,s=o.map((d,p)=>x.rightPad((p+1).toString(),i)+d),a=0;for(let d=0;d<s.length;d++)a=Math.max(s[d].length,a);let l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join(`
`)),console.log(n.split(`
`)[0]),console.log(`%c ${x.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function w7(t){return Up(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function y7(t,n){if(Je(t,()=>t.linkProgram(n)),!ee().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Uk(t,n){if(Je(t,()=>t.validateProgram(n)),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function x7(t,n){let e=Up(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Je(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),Je(t,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function _7(t,n){let e=Up(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Je(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)),Je(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function D6e(){return ee().getNumber("WEBGL_VERSION")===2?1:4}function k7(t){return Up(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function b7(t,n){let e=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){let r=`[${t}x${n}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e){let r=`[${t}x${n}]`,o=`[${e}x${e}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function C7(t){return Up(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function ME(t,n,e,r,o,i,s){let a=t.getAttribLocation(n,e);return a===-1?!1:(Je(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Je(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,i,s)),Je(t,()=>t.enableVertexAttribArray(a)),!0)}function mie(t,n,e){vie(t,e),Je(t,()=>t.activeTexture(t.TEXTURE0+e)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,n))}function E6e(t,n){vie(t,n),Je(t,()=>t.activeTexture(t.TEXTURE0+n)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function S7(t,n,e){return Up(t,()=>t.getUniformLocation(n,e),'uniform "'+e+'" not present in program.')}function M7(t,n,e){return t.getUniformLocation(n,e)}function T7(t,n,e,r){Je(t,()=>mie(t,n,r)),Je(t,()=>t.uniform1i(e,r))}function I6e(t){Je(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Je(t,()=>t.viewport(0,0,t.canvas.width,t.canvas.height)),Je(t,()=>t.scissor(0,0,t.canvas.width,t.canvas.height))}function Gk(t,n,e){Je(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Je(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function TE(t,n){Je(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Je(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function tw(t){let n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+gie(t,n))}function gie(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}function Up(t,n,e){let r=Je(t,()=>n());if(r==null)throw new Error(e);return r}function vie(t,n){let e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e){let o=`[gl.TEXTURE0, gl.TEXTURE${e}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Gp(t,n=2){return x.sizeFromShape(t.slice(0,t.length-n))}function Wp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function nw(t){let n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[Gp(t),...Wp(t)]),n}function D7(t,n=!1){let e=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ee().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ee().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=e/2),n&&(e=e*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?x.nearestLargerEven(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=x.squeezeShape(t).newShape);let o=x.sizeFromShape(t),i=null;t.length<=1&&o<=e?i=[1,o]:t.length===2&&t[0]<=e&&t[1]<=e?i=t:t.length===3&&t[0]*t[1]<=e&&t[2]<=e?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=e&&t[1]*t[2]<=e?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=e&&t[3]<=e?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=e&&t[1]*t[2]*t[3]<=e&&(i=[t[0],t[1]*t[2]*t[3]]);let s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(n?2:1)&&Math.min(...i)>0;if(i==null||s)if(n){let a=Gp(t),l=2,c=2;t.length&&([l,c]=Wp(t)),o=a*(l/2)*(c/2),i=x.sizeToSquarishShape(o).map(u=>u*2)}else i=x.sizeToSquarishShape(o);return i}function kE(t){return t%2===0}function kf(t,n){if(t=t.slice(-2),n=n.slice(-2),x.arraysEqual(t,n)||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){let e=t[t.length-1],r=n[n.length-1];if(e===r||kE(e)&&kE(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&kE(t[0])&&kE(n[0])}var bE,CE;function E7(t){if(bE==null){let n=zs(t);bE=n.getParameter(n.MAX_TEXTURE_SIZE)}return bE}function N6e(){bE=null}function A6e(){CE=null}function I7(t){if(CE==null){let n=zs(t);CE=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,CE)}function N7(t){if(t===0)return 0;let n,e=zs(t);return Hs(e,"EXT_disjoint_timer_query_webgl2")&&t===2?n=2:Hs(e,"EXT_disjoint_timer_query")?n=1:n=0,n}function Hs(t,n){return t.getExtension(n)!=null}function DE(t){try{if(zs(t)!=null)return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function A7(t){if(t===0)return!1;let n=zs(t);if(t===1){if(!Hs(n,"OES_texture_float"))return!1}else if(!Hs(n,"EXT_color_buffer_float"))return!1;return f7(n)}function R7(t){if(t===0)return!1;let n=zs(t);if(t===1){if(!Hs(n,"OES_texture_float")||!Hs(n,"WEBGL_color_buffer_float"))return!1}else{if(Hs(n,"EXT_color_buffer_float"))return f7(n);let r="EXT_color_buffer_half_float";if(Hs(n,r)){let o=n.getExtension(r);return R6e(n,o)}return!1}return f7(n)}function f7(t){let n=Hk(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);let i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(i),s}function R6e(t,n){let e=Hk(t,n),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),a}function O7(t){return t!==2?!1:zs(t).fenceSync!=null}function ql(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&x.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}var vt=ee();vt.registerFlag("HAS_WEBGL",()=>vt.getNumber("WEBGL_VERSION")>0);vt.registerFlag("WEBGL_VERSION",()=>DE(2)?2:DE(1)?1:0);vt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);vt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>vt.get("WEBGL_VERSION")===2);vt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);vt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);vt.registerFlag("WEBGL_PACK",()=>vt.getBool("HAS_WEBGL"));vt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CLIP",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_REDUCE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_LAZILY_UNPACK",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_CONV_IM2COL",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>E7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>I7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=vt.getNumber("WEBGL_VERSION");return t===0?0:N7(t)});vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>vt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!hp.isMobile());vt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>A7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>vt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:vt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));vt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>R7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>O7(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>vt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);vt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});vt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>hp.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});vt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);vt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);vt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);vt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);vt.registerFlag("WEBGL_EXP_CONV",()=>!1);vt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>vt.getBool("IS_TEST"));vt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);vt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);vt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);vt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function xr(){let t,n,e,r,o,i,s,a,l,c;return ee().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",o="texture",i="outputColor",s="out vec4 outputColor;",a=ee().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",o="texture2D",i="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:o,output:i,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function Kl(t,n,e="index"){let r=x.computeStrides(n);return r.map((o,i)=>{let s=`int ${t[i]} = ${e} / ${o}`,a=i===r.length-1?`int ${t[i+1]} = ${e} - ${t[i]} * ${o}`:`index -= ${t[i]} * ${o}`;return`${s}; ${a};`}).join("")}function o2(t,n,e="index"){let r=x.computeStrides(n);return r.map((o,i)=>{let s=`int ${t[i]} = ${e} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${e} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${s}; ${a};`}).join("")}function O6e(t,n){let e=t.length,r=t.map(i=>`${n}[${i}]`),o=new Array(e-1);o[e-2]=r[e-1];for(let i=e-3;i>=0;--i)o[i]=`(${o[i+1]} * ${r[i+1]})`;return o}function wie(t,n,e="index"){let r=t.map((i,s)=>s),o=O6e(r,n);return o.map((i,s)=>{let a=`int ${t[s]} = ${e} / ${o[s]}`,l=s===o.length-1?`int ${t[s+1]} = ${e} - ${t[s]} * ${o[s]}`:`index -= ${t[s]} * ${o[s]}`;return`${a}; ${l};`}).join("")}function rw(t){let n=x.computeStrides(t).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;
  }
`}function ow(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var EE=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:yie}=O;function xie(t,n,e){let r=[];if(t.forEach(h=>{let f=x.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),e.enableShapeUniforms){let{uniformShape:m}=IE(e.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break;default:break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),e.enableShapeUniforms){switch(n.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break;default:break}r.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});let o=r.join(`
`),i=t.map(h=>F6e(h,n,e.packedInputs,e.enableShapeUniforms)).join(`
`),s=n.texShape,a=xr(),l=L6e(a),c,u,d=j6e(a);return n.isPacked?(c=P6e(n.logicalShape,s,e.enableShapeUniforms),u=V6e(a)):(c=B6e(n.logicalShape,s,e.enableShapeUniforms),u=$6e(a)),e.packedInputs&&(d+=G6e),[d,l,u,o,c,i,e.userCode].join(`
`)}function sw(t,n=!1){let e=t.shapeInfo.logicalShape;switch(e.length){case 0:return r8e(t,n);case 1:return i8e(t,n);case 2:return a8e(t,n);case 3:return c8e(t,n);case 4:return d8e(t,n);case 5:return p8e(t);case 6:return h8e(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function _ie(t,n){switch(t.shapeInfo.logicalShape.length){case 0:return n8e(t);case 1:return o8e(t,n);case 2:return s8e(t,n);case 3:return l8e(t,n);default:return u8e(t,n)}}function F6e(t,n,e=!1,r){let o="";e?o+=_ie(t,r):o+=sw(t,r);let i=t.shapeInfo.logicalShape,s=n.logicalShape;return i.length<=s.length&&(e?o+=f8e(t,n):o+=m8e(t,n)),o}function P6e(t,n,e){switch(t.length){case 0:return kie();case 1:return W6e(t,n,e);case 2:return e8e(t,n,e);case 3:return K6e(t,n,e);default:return X6e(t,n,e)}}function B6e(t,n,e){switch(t.length){case 0:return kie();case 1:return q6e(t,n,e);case 2:return t8e(t,n,e);case 3:return Z6e(t,n,e);case 4:return Y6e(t,n,e);case 5:return Q6e(t,n);case 6:return J6e(t,n);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function L6e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function $6e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function V6e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function j6e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${z6e}
    ${H6e}
    ${U6e}
  `}var z6e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,H6e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,U6e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,G6e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function kie(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function W6e(t,n,e){let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return r[0]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function q6e(t,n,e){return n[0]===1?e?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${n[1]}.0);
      }
    `:n[1]===1?e?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${n[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      return resTexRC.x * ${n[1]} + resTexRC.y;
    }
  `}function K6e(t,n,e){if(e)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(t[2]/2),i=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function Z6e(t,n,e){if(e)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${o2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let r=Kl(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function X6e(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(t[t.length-1]/2),i=o*Math.ceil(t[t.length-2]/2),s=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)s*=t[t.length-c-1],a=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Y6e(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${o2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let r=Kl(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Q6e(t,n){let e=Kl(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},
                             ${n[1]}));

      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function J6e(t,n){let e=Kl(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function e8e(t,n,e){let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(x.arraysEqual(t,n))return e?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;let o=Math.ceil(t[1]/2);return e?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function t8e(t,n,e){return x.arraysEqual(t,n)?e?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));
      }
    `:t[1]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:e?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function i2(t){return`offset${t}`}function n8e(t){let n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=xr();return`
    vec4 ${e}() {
      return ${r.texture2D}(${n}, halfCR);
    }
  `}function r8e(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${e};}`;let[o,i]=t.shapeInfo.texShape;if(o===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${e}, halfCR);
      }
    `;let s=i2(e);if(n)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${s});
      return sampleTexture(${e}, uv);
    }
  `;let[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${s});
      return sampleTexture(${e}, uv);
    }
  `}function o8e(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=t.shapeInfo.texShape,i=xr();if(n)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${e}, uv);
    }
  `;let s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${e}, uv);
    }
  `}function i8e(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${aw(t)}
      }
    `;let o=t.shapeInfo.texShape,i=o[0],s=o[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;let a=i2(e);return s===1?n?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${e}, uv);
      }
    `:i===1?n?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:n?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});
      return sampleTexture(${e}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});
      return sampleTexture(${e}, uv);
    }
  `}function s8e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=i[0],a=i[1],l=xr();if(i!=null&&x.arraysEqual(e,i))return n?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(n)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;let c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(e[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function a8e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&x.arraysEqual(e,i)){if(n)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;let p=i[0],h=i[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}let{newShape:s,keptDims:a}=x.squeezeShape(e),l=s;if(l.length<e.length){let p=lw(t,l),h=["row","col"];return`
      ${sw(p,n)}
      float ${o}(int row, int col) {
        return ${o}(${cw(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${aw(t)}
      }
    `;let c=i[0],u=i[1],d=i2(r);return u===1?n?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?n?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:n?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function l8e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(e[0]===1){let p=e.slice(1),h=[1,2],f=lw(t,p),m=["b","row","col"];return`
        ${_ie(f,n)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${cw(m,h)});
        }
      `}let a=xr();if(n)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;let l=s[0],c=s[1],u=Math.ceil(e[2]/2),d=u*Math.ceil(e[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function c8e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e[1]*e[2],s=e[2],{newShape:a,keptDims:l}=x.squeezeShape(e),c=a;if(c.length<e.length){let m=lw(t,c),g=["row","col","depth"];return`
        ${sw(m,n)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${cw(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${aw(t)}
      }
    `;let u=t.shapeInfo.texShape,d=u[0],p=u[1],h=t.shapeInfo.flatOffset;if(p===i&&h==null)return n?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===s&&h==null)return n?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;let f=i2(r);return n?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${f};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${f};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function u8e(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=xr();if(n)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${e}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${e}, uv);
    }
  `;let i=t.shapeInfo.logicalShape,s=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[s-1]/2),p=d*Math.ceil(i[s-2]/2),h="int b, int row, int col",f=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<s-1;m++)h=`int b${m}, `+h,p*=i[s-m-1],f=`b${m} * ${p} + `+f;return`
    vec4 ${r}(${h}) {
      int index = ${f};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${o.texture2D}(${e}, uv);
    }
  `}function d8e(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e[3],s=e[2]*i,a=e[1]*s,{newShape:l,keptDims:c}=x.squeezeShape(e);if(l.length<e.length){let w=lw(t,l),y=["row","col","depth","depth2"];return`
      ${sw(w,n)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${cw(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${i}, 1)));
        ${aw(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&u==null)return n?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${f}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&u==null)return n?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;let v=i2(r);return n?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${f}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function p8e(t){let n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=n[4],i=n[3]*o,s=n[2]*i,a=n[1]*s,{newShape:l,keptDims:c}=x.squeezeShape(n);if(l.length<n.length){let m=lw(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${sw(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${cw(g,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${i}, ${o})) +
          depth3;
        ${aw(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];if(h===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(h===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]},
               ${n[2]*n[3]}, ${n[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;let f=i2(e);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${i} +
          depth2 * ${o} + depth3 + ${f};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${e}, uv);
    }
  `}function h8e(t){let n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:o,keptDims:i}=x.squeezeShape(n);if(o.length<n.length){let g=lw(t,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${sw(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${cw(v,i)});
      }
    `}let s=n[5],a=n[4]*s,l=n[3]*a,c=n[2]*l,u=n[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${aw(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],f=p[1];if(f===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(f===s&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]*n[4]},
               ${n[2]*n[3]*n[4]},
               ${n[3]*n[4]},
               ${n[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;let m=i2(e);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${e}, uv);
    }
  `}function aw(t){let n=t.name,e=x.sizeFromShape(t.shapeInfo.logicalShape);return e<2?`return ${n};`:`
    for (int i = 0; i < ${e}; i++) {
      if (i == index) {
        return ${n}[i];
      }
    }
  `}function f8e(t,n){let e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),o="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=n.logicalShape.length,a=yie(t.shapeInfo.logicalShape,n.logicalShape),l=zt(s),c=s-i,u,d=["x","y","z","w","u","v"];i===0?u="":s<2&&a.length>=1?u="coords = 0;":u=a.map(w=>`coords.${d[w+c]} = 0;`).join(`
`);let p="";s<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((w,y)=>`coords.${d[y+c]}`).join(", ");let h="return outputValue;",m=x.sizeFromShape(t.shapeInfo.logicalShape)===1,v=x.sizeFromShape(n.logicalShape)===1;if(i===1&&!m&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!v)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){let w=i-2,y=i-1;a.indexOf(w)>-1&&a.indexOf(y)>-1?h="return vec4(outputValue.x);":a.indexOf(w)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(y)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${p});
      ${h}
    }
  `}function m8e(t,n){let e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),o="get"+r+"AtOutCoords",i=n.texShape,s=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&x.arraysEqual(s,i))return`
      float ${o}() {
        return sampleTexture(${e}, resultUV);
      }
    `;let c=zt(l),u=yie(t.shapeInfo.logicalShape,n.logicalShape),d=l-a,p,h=["x","y","z","w","u","v"];a===0?p="":l<2&&u.length>=1?p="coords = 0;":p=u.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let f="";return l<2&&a>0?f="coords":f=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${f});
    }
  `}function zt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function IE(t,n,e){let{newShape:r,keptDims:o}=x.squeezeShape(n),i=n.length,s=t&&i===3&&n[0]===1,a=s?n.slice(1):r,l=!t&&i>1&&!x.arraysEqual(n,e)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?a:n,keptDims:o}}function lw(t,n){let e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function cw(t,n){return n.map(e=>t[e]).join(", ")}function Cie(t,n,e,r){let o=e.map((u,d)=>{let p={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(p.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[d],shapeInfo:p}}),i=o.map(u=>u.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=xie(o,s,n),l=v7(t.gl,a),c=t.createProgram(l);return ee().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},F7(t,n,c)))}function F7(t,n,e){let r=[],o=[],i,s,a,l=null,c=null;c=t.getUniformLocation(e,"NAN",!1),ee().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(e,"INFINITY",!1));let u=!1;for(let d of n.variableNames){let p={name:d,uniform:t.getUniformLocation(e,d,u),offset:t.getUniformLocation(e,`offset${d}`,u)};n.enableShapeUniforms&&(p.shape=t.getUniformLocation(e,`${d}Shape`,u),p.texShape=t.getUniformLocation(e,`${d}TexShape`,u)),r.push(p)}if(n.enableShapeUniforms&&(i=t.getUniformLocation(e,"outShape",u),a=t.getUniformLocation(e,"outShapeStrides",u),s=t.getUniformLocation(e,"outTexShape",u)),n.customUniforms)for(let d of n.customUniforms)o.push(t.getUniformLocation(e,d.name,u));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:s}}function bie(t,n){if(t.length!==n.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${n.length} inputs`);t.forEach((e,r)=>{let o=e.logicalShape,i=n[r],s=i.shape;if(!x.arraysEqual(o,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${s} must match`);if(e.isUniform&&i.isUniform)return;let a=e.texShape,l=i.isUniform?null:i.texData.texShape;if(!x.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function Sie(t,n,e,r,o){n.program.enableShapeUniforms||(bie(n.inShapeInfos,e),bie([n.outShapeInfo],[r]));let i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):t.setOutputMatrixTexture(i.texture,s[0],s[1]),t.setProgram(n.webGLProgram),t.bindVertexArray(n.webGLProgram.vao),ee().getNumber("WEBGL_VERSION")===1&&n.infLoc!==null&&t.gl.uniform1f(n.infLoc,1/0),n.nanLoc!==null&&t.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<e.length;++l){let c=e[l],{uniform:u,offset:d,shape:p,texShape:h}=n.variablesLocations[l];if(p){let{uniformShape:f}=IE(n.program.packedInputs,c.shape,c.texData.texShape);switch(f.length){case 1:t.gl.uniform1iv(p,new Int32Array(f));break;case 2:t.gl.uniform2iv(p,new Int32Array(f));break;case 3:t.gl.uniform3iv(p,new Int32Array(f));break;case 4:t.gl.uniform4iv(p,new Int32Array(f));break;default:break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(x.sizeFromShape(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let f=c.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),t.gl.uniform1fv(u,f)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}let a=n.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break;default:break}if(n.outShapeStridesLocation){let l=x.computeStrides(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l));break;default:break}}if(n.outTexShapeLocation&&t.gl.uniform2i(n.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),n.program.customUniforms&&o)for(let l=0;l<n.program.customUniforms.length;++l){let c=n.program.customUniforms[l],u=n.customUniformLocations[l],d=o[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function Mie(t,n,e){let r="";n.concat(e).forEach(s=>{let a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=IE(t.packedInputs,s.shape,l),p="",h="",f="";if(u.length===1&&t.packedInputs){let k=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${k[0]>1}_${k[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){let k=x.computeStrides(u);f=`${k[0]===l[1]}_${k[k.length-1]===l[1]}`}let m=s.shape.length,g=u.length===2&&x.arraysEqual(s.shape,l),v=x.sizeFromShape(s.shape)===1,w=O.getBroadcastDims(s.shape,e.shape),y=!t.packedInputs&&m===e.shape.length&&x.arraysEqual(l,e.texData.texShape),_=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${y}_${c?d:""}_${u.length}_${v}_${w}_${g}_${p}_${h}_${f}_${_}_${a}`}else{let l=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${l}_${a}`}});let o=t.userCode,i=t.constructor.name;return i+="_"+r+"_"+o+`${ee().getNumber("WEBGL_VERSION")}`,i}function Nn(t){return ee().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var NE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=t2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=xr();this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?o2(["r","c","d"],n):Kl(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${e.output} = result;
      }
    `}};var AE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=t2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=xr();this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?o2(["r","c","d"],n):Kl(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${e.output} = result;
      }
    `}};var RE=class{constructor(n){this.variableNames=["A"],this.outTexUsage=Di.DOWNLOAD;let e=xr();this.outputShape=n,this.userCode=`
      ${EE}

      void main() {
        float x = getAAtOutCoords();
        ${e.output} = encode_float(x);
      }
    `}};var OE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Di.DOWNLOAD;let e=xr();this.outputShape=n,this.userCode=`
      ${EE}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${e.output} = encode_float(x);
      }
    `}};var w8e={R:0,G:1,B:2,A:3},Wk=class{constructor(n,e=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=xr();this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length);let i="result";e&&(i="floor(result * 255. + 0.5)");let s="";for(let a=0;a<r.length;a++){let l=r[a];s+=`
          if(offset == ${a}) {
            result = values[${w8e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?ow():rw(n)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${s}
        }
        ${o.output} = vec4(${i}, 0., 0., 0.);
      }
    `}};var FE=class{constructor(n,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=xr();this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length);let o="",i="result";e&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){let l=s*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${n[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${n[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?ow():rw(n)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${i};
        }
    `}};var jE={};Jt(jE,{bindVertexProgramAttributeStreams:()=>U7,createBufferFromOutputTexture:()=>q7,createFloat16MatrixTexture:()=>V7,createFloat16PackedMatrixTexture:()=>H7,createFloat32MatrixTexture:()=>$7,createIndexBuffer:()=>L7,createPackedMatrixTexture:()=>z7,createUnsignedBytesMatrixTexture:()=>j7,createVertexBuffer:()=>B7,createVertexShader:()=>P7,downloadByteEncodedFloatMatrixFromOutputTexture:()=>Z7,downloadFloat32MatrixFromBuffer:()=>K7,downloadMatrixFromPackedOutputTexture:()=>Y7,downloadPackedMatrixFromBuffer:()=>X7,getInternalFormatForFloat16MatrixTexture:()=>BE,getInternalFormatForFloat16PackedMatrixTexture:()=>VE,getInternalFormatForFloat32MatrixTexture:()=>PE,getInternalFormatForPackedMatrixTexture:()=>$E,getInternalFormatForUnsignedBytesMatrixTexture:()=>LE,uploadDenseMatrixToTexture:()=>G7,uploadPixelDataToTexture:()=>W7});function P7(t){let n=xr(),e=`${n.version}
    precision highp float;
    ${n.attribute} vec3 clipSpacePos;
    ${n.attribute} vec2 uv;
    ${n.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return g7(t,e)}function B7(t){let n=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return x7(t,n)}function L7(t){let n=new Uint16Array([0,1,2,2,1,3]);return _7(t,n)}function qk(t,n,e,r,o,i){b7(n,e);let s=k7(t),a=t.TEXTURE_2D;return Je(t,()=>t.bindTexture(a,s)),Je(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Je(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Je(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Je(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),ee().getNumber("WEBGL_VERSION")===1?Je(t,()=>t.texImage2D(a,0,r,n,e,0,o,i,null)):Je(t,()=>t.texStorage2D(a,1,r,n,e)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[e,n]}}function PE(t){return t.internalFormatFloat}function $7(t,n,e,r){let[o,i]=n2(n,e);return qk(t,o,i,PE(r),r.textureFormatFloat,t.FLOAT)}function BE(t){return t.internalFormatHalfFloat}function V7(t,n,e,r){let[o,i]=n2(n,e);return qk(t,o,i,BE(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function LE(t){return t.downloadTextureFormat}function j7(t,n,e,r){let[o,i]=n2(n,e);return qk(t,o,i,LE(r),t.RGBA,t.UNSIGNED_BYTE)}function $E(t){return t.internalFormatPackedFloat}function z7(t,n,e,r){let[o,i]=Vu(n,e);return qk(t,o,i,$E(r),t.RGBA,t.FLOAT)}function VE(t){return t.internalFormatPackedHalfFloat}function H7(t,n,e,r){let[o,i]=Vu(n,e);return qk(t,o,i,VE(r),t.RGBA,r.textureTypeHalfFloat)}function U7(t,n,e){return Je(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),ME(t,n,"clipSpacePos",e,3,20,0)&&ME(t,n,"uv",e,2,20,12)}function G7(t,n,e,r,o,i){Je(t,()=>t.bindTexture(t.TEXTURE_2D,n));let s,a,l;o instanceof Uint8Array?(s=new Uint8Array(e*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(e*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),s.set(o),ee().getNumber("WEBGL_VERSION")===2?Je(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e,r,t.RGBA,a,s)):Je(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,e,r,0,t.RGBA,a,s)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function W7(t,n,e){Je(t,()=>t.bindTexture(t.TEXTURE_2D,n)),e.data instanceof Uint8Array?ee().getNumber("WEBGL_VERSION")===2?Je(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e.data)):Je(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)):ee().getNumber("WEBGL_VERSION")===2?Je(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):Je(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function q7(t,n,e,r){let o=t.createBuffer();Je(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));let a=4*4*n*e;return Je(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Je(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)),Je(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function K7(t,n,e){let r=t,o=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function Z7(t,n,e,r){let[o,i]=n2(n,e),s=4,a=new Uint8Array(pie(n*e,s));return Je(t,()=>t.readPixels(0,0,o,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function X7(t,n,e,r,o,i,s,a){let l=t,c=new Float32Array(hie(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Y7(t,n,e){let r=new Float32Array(n*e*4);return Je(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,r)),r}var bf=class{constructor(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let e=ee().getNumber("WEBGL_VERSION");if(n!=null?(this.gl=n,_E(e,n)):this.gl=zs(e),n=this.gl,ee().getNumber("WEBGL_VERSION")===2){let i=n;this.createVertexArray=()=>Je(i,()=>i.createVertexArray()),this.bindVertexArray=s=>Je(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>Je(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>Je(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(n!=null){let i=n.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Je(n,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>Je(n,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>Je(n,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>Je(n,()=>n.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ee().getNumber("WEBGL_VERSION")===1){let i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=ew(this.gl,i),Hs(this.gl,s))this.textureHalfFloatExtension=ew(this.gl,s);else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Hs(this.gl,o))this.colorBufferHalfFloatExtension=ew(this.gl,o);else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Hs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Hs(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=B7(this.gl),this.indexBuffer=L7(this.gl),this.framebuffer=C7(this.gl),this.textureConfig=Hk(this.gl,this.textureHalfFloatExtension)}get debug(){return ee().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let n=this.gl;Je(n,()=>n.finish()),Je(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),Je(n,()=>n.deleteFramebuffer(this.framebuffer)),Je(n,()=>n.bindBuffer(n.ARRAY_BUFFER,null)),Je(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)),Je(n,()=>n.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(n,e){return this.throwIfDisposed(),$7(this.gl,n,e,this.textureConfig)}createFloat16MatrixTexture(n,e){return this.throwIfDisposed(),V7(this.gl,n,e,this.textureConfig)}createUnsignedBytesMatrixTexture(n,e){return this.throwIfDisposed(),j7(this.gl,n,e,this.textureConfig)}uploadPixelDataToTexture(n,e){this.throwIfDisposed(),W7(this.gl,n,e)}uploadDenseMatrixToTexture(n,e,r,o){this.throwIfDisposed(),G7(this.gl,n,e,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(n,e){return this.throwIfDisposed(),H7(this.gl,n,e,this.textureConfig)}createPackedMatrixTexture(n,e){return this.throwIfDisposed(),z7(this.gl,n,e,this.textureConfig)}deleteMatrixTexture(n){this.throwIfDisposed(),this.outputTexture===n&&(TE(this.gl,this.framebuffer),this.outputTexture=null),Je(this.gl,()=>this.gl.deleteTexture(n))}downloadByteEncodedFloatMatrixFromOutputTexture(n,e,r){return this.downloadMatrixDriver(n,()=>Z7(this.gl,e,r,this.textureConfig))}downloadPackedMatrixFromBuffer(n,e,r,o,i,s){return X7(this.gl,n,e,r,o,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(n,e){return K7(this.gl,n,e)}createBufferFromTexture(n,e,r){this.bindTextureToFrameBuffer(n);let o=q7(this.gl,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){let n=this.createFence(this.gl);return this.pollFence(n)}createFence(n){let e,r;if(ee().getBool("WEBGL_FENCE_API_ENABLED")){let o=n,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=()=>{let s=o.clientWaitSync(i,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=i}else ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(e,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:e,isFencePassed:r}}downloadMatrixFromPackedTexture(n,e,r){return this.downloadMatrixDriver(n,()=>Y7(this.gl,e,r))}createProgram(n){this.throwIfDisposed();let e=this.gl;this.vertexShader==null&&(this.vertexShader=P7(e));let r=w7(e);Je(e,()=>e.attachShader(r,this.vertexShader)),Je(e,()=>e.attachShader(r,n)),y7(e,r);let o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&Uk(e,o),o}buildVao(n){this.setProgram(n),this.bindVertexArray(n.vao);let e=this.gl;Je(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),U7(e,n,this.vertexBuffer)}deleteProgram(n){this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&(Je(this.gl,()=>this.gl.deleteProgram(n)),this.deleteVertexArray(n.vao))}setProgram(n){this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&Uk(this.gl,this.program),Je(this.gl,()=>this.gl.useProgram(n))}getUniformLocation(n,e,r=!0){return this.throwIfDisposed(),r?S7(this.gl,n,e):M7(this.gl,n,e)}getAttributeLocation(n,e){return this.throwIfDisposed(),Je(this.gl,()=>this.gl.getAttribLocation(n,e))}getUniformLocationNoThrow(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)}setInputMatrixTexture(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),T7(this.gl,n,e,r)}setOutputMatrixTexture(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)}setOutputPackedMatrixTexture(n,e,r){this.throwIfDisposed();let[o,i]=Vu(e,r);this.setOutputMatrixTextureDriver(n,o,i)}setOutputMatrixWriteRegion(n,e,r,o){this.setOutputMatrixWriteRegionDriver(r,n,o,e)}setOutputPackedMatrixWriteRegion(n,e,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Uk(this.gl,this.program),tw(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let n=this.gl;if(this.debug){let e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Je(n,()=>n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Je(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=ew(this.gl,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,i),i}let n=this.getQueryTimerExtensionWebGL1(),e=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),e}endQuery(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT);return}let n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(n){return z(this,null,function*(){return yield x.repeatedTry(()=>this.disposed||this.isQueryAvailable(n,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(n,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(n,e){if(e===0)return null;if(e===2){let r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}else{let r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(n,e){if(e===0)return!0;if(e===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{let r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(n,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(n){return new Promise(e=>{this.addItemToPoll(()=>n.isFencePassed(),()=>e())})}pollItems(){let n=y8e(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=n;++e){let{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(n+1)}addItemToPoll(n,e){if(this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ee().platform&&(r=ee().platform.setTimeoutCustom.bind(ee().platform)),x.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(n){this.throwIfDisposed(),Gk(this.gl,n,this.framebuffer),this.debug&&tw(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Gk(this.gl,this.outputTexture,this.framebuffer),this.debug&&tw(this.gl)):TE(this.gl,this.framebuffer)}downloadMatrixDriver(n,e){this.bindTextureToFrameBuffer(n);let r=e();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(n,e,r){this.throwIfDisposed();let o=this.gl;Gk(o,n,this.framebuffer),this.debug&&tw(o),this.outputTexture=n,Je(o,()=>o.viewport(0,0,e,r)),Je(o,()=>o.scissor(0,0,e,r))}setOutputMatrixWriteRegionDriver(n,e,r,o){this.throwIfDisposed(),Je(this.gl,()=>this.gl.scissor(n,e,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function y8e(t){let n=0;for(;n<t.length&&t[n]();++n);return n-1}var{addImpl:Tie,bincountImpl:zE,bincountReduceImpl:Die,bitwiseAndImpl:Eie,castImpl:Iie,ceilImpl:Nie,concatImpl:Aie,equalImpl:Rie,expImpl:Oie,expm1Impl:Fie,floorImpl:Pie,gatherNdImpl:Bie,gatherV2Impl:Lie,greaterImpl:$ie,greaterEqualImpl:Vie,lessImpl:jie,lessEqualImpl:zie,linSpaceImpl:Hie,logImpl:Uie,maxImpl:Gie,maximumImpl:Wie,minimumImpl:qie,multiplyImpl:Kie,negImpl:Zie,notEqualImpl:Xie,prodImpl:Yie,raggedGatherImpl:Qie,raggedRangeImpl:Jie,raggedTensorToTensorImpl:ese,rangeImpl:tse,rsqrtImpl:nse,scatterImpl:rse,sigmoidImpl:ose,simpleAbsImpl:HE,sliceImpl:ise,sparseFillEmptyRowsImpl:sse,sparseReshapeImpl:ase,sparseSegmentReductionImpl:UE,sqrtImpl:lse,staticRegexReplaceImpl:cse,stridedSliceImpl:use,stringNGramsImpl:dse,stringSplitImpl:pse,stringToHashBucketFastImpl:hse,subImpl:fse,tileImpl:mse,topKImpl:gse,transposeImpl:s2,uniqueImpl:vse}=Pk;function Q7(t,n){return["x","y","z","w","u","v"].slice(0,n).map(e=>`${t}.${e}`)}function Pr(t,n){return n===1?[t]:Q7(t,n)}function wse(t,n){if(t===1)return"rc";let e="";for(let r=0;r<t;r++)e+=n[r],r<t-1&&(e+=",");return e}var GE=class{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=Nn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let e=Pr("rc",this.rank),r=zt(this.rank),o=this.getOutOfBoundsCondition(e),i=this.getSetup(e),s=this.getOutput(e);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(n){let e=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let i=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${n[n.length-1-s]},`+i;e.push(i)}return e}getOutOfBoundsCondition(n){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let r=this.rank-2;r<this.rank;r++)e+=`${n[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(e+="||");return e}getSetup(n){if(this.rank===1)return"";let e=n.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${e[0]};
      int c = ${e[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(n){let e=this.getSourceCoordsArr(n);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),
            cEdge ? 0. : getA(${e[1]}),
            rEdge ? 0. : getA(${e[2]}),
            rEdge || cEdge ? 0. : getA(${e[3]})`}};var uw=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length);let r="";for(let o=0;o<4;o++){let i="thisRC = rc;";o%2===1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${x8e(e,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?ow():rw(n)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};

        ${r}

        setOutput(result);
      }
    `}};function x8e(t,n){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${n?wie(["r","c","d"],"inputShape"):Kl(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}var WE=class{constructor(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(n,e,r){let o=xse(e,r),i=_se(n,o,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let s=yse(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return o===mi.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===mi.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===mi.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===mi.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===mi.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(n,e,r,o){if(this.freeTextures==null)return;let i=xse(r,o),s=_se(e,i,o);s in this.freeTextures||(this.freeTextures[s]=[]);let a=yse(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=ee().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(n.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(n),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let c=this.usedTextures[s],u=c&&c.indexOf(n);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${n})`);let e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let n in this.freeTextures)this.freeTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let n in this.usedTextures)this.usedTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function _8e(t,n){let e=t;if(n===e.R32F)return 4;if(n===e.R16F)return 2;if(n===e.RGBA32F)return 16;if(n===t.RGBA)return 16;if(n===e.RGBA16F)return 8;if(n===e.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}function yse(t,n,e,r,o){let i=k8e(n,r),s;if(o){let[l,c]=Vu(t[0],t[1]);s=l*c}else{let[l,c]=n2(t[0],t[1]);s=l*c}let a=_8e(e,i);return s*a}function k8e(t,n){switch(t){case mi.PACKED_2X2_FLOAT32:return $E(n);case mi.PACKED_2X2_FLOAT16:return VE(n);case mi.UNPACKED_FLOAT32:return PE(n);case mi.UNPACKED_FLOAT16:return BE(n);case mi.PACKED_4X1_UNSIGNED_BYTE:return LE(n);default:throw new Error(`Unknown physical texture type ${t}`)}}function b8e(t){return ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?mi.PACKED_2X2_FLOAT32:mi.UNPACKED_FLOAT32:t?mi.PACKED_2X2_FLOAT16:mi.UNPACKED_FLOAT16}function xse(t,n){if(t===Di.UPLOAD)return mi.PACKED_2X2_FLOAT32;if(t===Di.RENDER||t==null)return b8e(n);if(t===Di.DOWNLOAD||t===Di.PIXELS)return mi.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function _se(t,n,e){return`${t[0]}_${t[1]}_${n}_${e}`}var ti=class{constructor(n,e){this.variableNames=["A"],this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${e}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},uo="if (isnan(x)) return x;",kse="return x;",J7="return abs(x);";var bse="return (x >= 0.0) ? x : (exp(x) - 1.0);",Cse=uo+`
  return (x < 0.0) ? 0.0 : x;
`,Sse=uo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,ju="return x;",Mse="return 1.0 / (1.0 + exp(-1.0 * x));";var Dse="return x;",Ese=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Ise=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Nse=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ase="return 1.0 / (1.0 + exp(-1.0 * x));",fs=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${e}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var qE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length);let e=n.length,r=Pr("rc",e),o=zt(e),i=wse(e,r),s=r.slice(-2),a=e<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var S8e=Jo.whereImpl,M8e=1e-7,T8e=1e-4,KE={};function D8e(t){return t in KE||(KE[t]={}),KE[t]}var E8e=ee().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),I8e=600;function N8e(){return ee().global.screen==null?1024:ee().global.screen.height*ee().global.screen.width*window.devicePixelRatio*I8e/1024/1024}var ZE=(()=>{class t extends Sc{nextDataId(){return t.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ee().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let r;if(e!=null){if(e instanceof bf)r=e;else{let o=zs(ee().getNumber("WEBGL_VERSION"),e);r=new bf(o)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let o=zs(ee().getNumber("WEBGL_VERSION"));r=new bf(o),this.binaryCache=D8e(ee().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=r,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new WE(this.gpgpu),this.numMBBeforeWarning=N8e(),this.texData=new Nh(this,ra())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,r,o,i,s,a){let l=this.makeTensorInfo(r,o),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[i,s]},c.texShape=[i,s];let u=nw(r),d=new Wk(u,!1,a),p=this.runWebGLProgram(d,[l],o,[[i,s]]);return p.shape=r,c.texture=null,this.disposeIntermediateTensorInfo(l),p.dataId}write(e,r,o){if((ee().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ee().getBool("DEBUG"))&&this.checkNumericalProblems(e),o==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let i={id:this.nextDataId()};return this.texData.set(i,{shape:r,dtype:o,values:e,usage:Di.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let r=this.texData.get(e);r.refCount++}decRef(e){if(this.texData.has(e)){let r=this.texData.get(e);r.refCount--}}move(e,r,o,i,s){if(ee().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:o,dtype:i,values:r,usage:Di.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let r=this.texData.get(e),{values:o,dtype:i,complexTensorInfos:s,slice:a,shape:l,isPacked:c}=r;if(a!=null){let h;c?h=new fs(l,ju):h=new ti(l,ju);let f=this.runWebGLProgram(h,[{dataId:e,shape:l,dtype:i}],i),m=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(o!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return o;let u=this.activeTimers!=null,d;u&&(d=x.now());let p;if(i==="complex64"){let h=this.readSync(s.real.dataId),f=this.readSync(s.imag.dataId);p=O.mergeRealAndImagArrays(h,f)}else p=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=x.now()-d),this.convertAndCacheOnCPU(e,p)}read(e){return z(this,null,function*(){if(this.pendingRead.has(e)){let m=this.pendingRead.get(e);return new Promise(g=>m.push(g))}let r=this.texData.get(e),{values:o,shape:i,slice:s,dtype:a,complexTensorInfos:l,isPacked:c}=r;if(s!=null){let m;c?m=new fs(i,ju):m=new ti(i,ju);let g=this.runWebGLProgram(m,[{dataId:e,shape:i,dtype:a}],a),v=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),v}if(o!=null)return this.convertAndCacheOnCPU(e);if(ee().getBool("DEBUG")&&!ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ee().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,d;if(a!=="complex64"&&ee().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);let m=this.texData.get(d.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...zk(i))}this.pendingRead.set(e,[]),a!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(a==="complex64"){let m=yield Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]),g=m[0],v=m[1];p=O.mergeRealAndImagArrays(g,v)}else if(u==null)p=this.getValuesFromTexture(e);else{let m=x.sizeFromShape(i);p=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(d!=null&&this.disposeIntermediateTensorInfo(d),u!=null){let m=this.gpgpu.gl;Je(m,()=>m.deleteBuffer(u))}let h=this.convertAndCacheOnCPU(e,p),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(m=>m(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ra().removeDataId(e,this),this.pendingDeletes--),h})}readToGPU(e,r={}){let o=this.texData.get(e),{values:i,shape:s,slice:a,dtype:l,isPacked:c,texture:u}=o;if(l==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let f;c?f=new fs(s,ju):f=new ti(s,ju);let m=this.runWebGLProgram(f,[{dataId:e,shape:s,dtype:l}],l),g=this.readToGPU(m,r);return this.disposeIntermediateTensorInfo(m),g}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(e,r.customTexShape),p=ra().makeTensorFromTensorInfo(d),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}bufferSync(e){let r=this.readSync(e.dataId);if(e.dtype==="string")try{let o=r.map(i=>x.decodeString(i));return at(e.shape,e.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return at(e.shape,e.dtype,r)}checkNumericalProblems(e){if(e!=null)for(let r=0;r<e.length;r++){let o=e[r];if(!m7(o))throw ee().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${o} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${o} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:r,dtype:o,isPacked:i}=this.texData.get(e),s=x.sizeFromShape(r);if(ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let h=this.decode(e),f=this.texData.get(h.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...zk(r)).subarray(0,s);return this.disposeIntermediateTensorInfo(h),m}let a=ee().getBool("WEBGL_PACK")&&i===!0,l=a?nw(r):r,c=a?new OE(l):new RE(l),u=this.runWebGLProgram(c,[{shape:l,dtype:o,dataId:e}],"float32"),d=this.texData.get(u.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),p}timerAvailable(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let r=this.activeTimers,o=[],i=!1;this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,e();let s=x.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=x.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=r,i&&(this.programTimersStack=null);let l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return z(this,null,function*(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(s);l.kernelMs=x.sum(c),l.getExtraProfileInfo=()=>c.map((u,d)=>({name:a[d],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:x.now(),endMs:null}}endTimer(e){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=x.now(),e)}getQueryTime(e){return z(this,null,function*(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let r=e;return r.endMs-r.startMs})}disposeData(e,r=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(r?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!r&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:o}=this.texData.get(e);return o!=null&&(this.disposeData(o.real.dataId,r),this.disposeData(o.imag.dataId,r)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:r,dtype:o,texShape:i,usage:s,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),r!=null&&(this.numBytesInGPU-=this.computeBytes(i,o),this.textureManager.releaseTexture(r,i,s,a)));let d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,r=E8e){return ee().getBool("WEBGL_CPU_FORWARD")&&e.every(o=>this.texData.get(o.dataId).texture==null&&x.sizeFromShape(o.shape)<r)}getGPGPUContext(){return this.gpgpu}where(e){O.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let r=e.dataSync();return S8e(e.shape,r)}packedUnaryOp(e,r,o){let i=new fs(e.shape,r),s=this.compileAndRun(i,[e],o);return ra().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let i=HE(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,J7,e.dtype);let r=new ti(e.shape,J7),o=this.compileAndRun(r,[e]);return ra().makeTensorFromTensorInfo(o)}makeTensorInfo(e,r,o){let i;if(r==="string"&&o!=null&&o.length>0&&x.isString(o[0])){let s=o.map(a=>x.encodeString(a));i=this.write(s,e,r)}else i=this.write(o,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}}makeOutput(e,r,o){return ra().makeTensorFromTensorInfo(this.makeTensorInfo(e,r,o),this)}unpackTensor(e){let r=new qE(e.shape);return this.runWebGLProgram(r,[e],e.dtype)}packTensor(e){let r=new GE(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)}packedReshape(e,r){let o=[Gp(e.shape),...Wp(e.shape)],i={dtype:e.dtype,shape:o,dataId:e.dataId},s=[Gp(r),...Wp(r)],a=new uw(s,o),l=!0,c=[o],u=this.runWebGLProgram(a,[i],e.dtype,c,l);return{dataId:u.dataId,shape:r,dtype:u.dtype}}decode(e,r){let o=this.texData.get(e),{isPacked:i,shape:s,dtype:a}=o;if(r!=null){let h=x.sizeFromShape(s),f=r[0]*r[1]*4;x.assert(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let l=nw(s),c;i?c=new AE(l):c=new NE(l);let u=!0,d=[r??zk(l)],p=this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,u,r);return{dtype:a,shape:s,dataId:p.dataId}}runWebGLProgram(e,r,o,i,s=!1,a){let l=this.makeTensorInfo(e.outputShape,o),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===t2.DENSE){let w=a??zk(e.outputShape);c.texShape=w.map(y=>y*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),x.sizeFromShape(l.shape)===0)return c.values=x.getTypedArrayFromDType(l.dtype,0),l;let u=[],d=r.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(w.dataId);if(y.texture==null){if(!e.packedInputs&&x.sizeFromShape(w.shape)<=ee().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!y.isPacked!=!!e.packedInputs)w=y.isPacked?this.unpackTensor(w):this.packTensor(w),u.push(w),y=this.texData.get(w.dataId);else if(y.isPacked&&!kf(y.shape,w.shape)){let _=w,k=w.shape;w.shape=y.shape,w=this.packedReshape(w,k),u.push(w),y=this.texData.get(w.dataId),_.shape=k}return{shape:w.shape,texData:y,isUniform:!1}});this.uploadToGPU(l.dataId);let p={shape:l.shape,texData:c,isUniform:!1},h=Mie(e,d,p),f=this.getAndSaveBinary(h,()=>Cie(this.gpgpu,e,d,p)),m=this.activeTimers!=null,g;m&&(g=this.startTimer()),ee().get("ENGINE_COMPILE_ONLY")||Sie(this.gpgpu,f,d,p,i),u.forEach(w=>this.disposeIntermediateTensorInfo(w)),m&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));let v=ee().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){let w=x.now();w-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!ee().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){let w=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),w}return l}compileAndRun(e,r,o,i,s=!1){return o=o||r[0].dtype,this.runWebGLProgram(e,r,o,i,s)}getAndSaveBinary(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ee().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(r=>{this.gpgpu.deleteProgram(this.binaryCache[r].webGLProgram),delete this.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ne(()=>{if(!ee().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=ee().getBool("DEBUG");ee().set("DEBUG",!1);let r=this.abs(Ue(1e-8)).dataSync()[0];if(ee().set("DEBUG",e),r>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?M8e:T8e}uploadToGPU(e){let r=this.texData.get(e),{shape:o,dtype:i,values:s,texture:a,usage:l,isPacked:c}=r;if(a!=null)return;let u=this.activeTimers!=null,d;u&&(d=x.now());let p=r.texShape;if(p==null&&(p=D7(o,c),r.texShape=p),s!=null){let h=nw(o),f,m=p[1],g=p[0],v=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(c||!v)&&([m,g]=Vu(p[0],p[1])),c?f=new FE(h,v):f=new Wk(h,v);let w=v?[g,m]:p,y=this.makeTensorInfo(w,i),_=this.texData.get(y.dataId);v?_.usage=Di.PIXELS:_.usage=Di.UPLOAD,_.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),m,g,s);let k=[[g,m]],I=this.runWebGLProgram(f,[y],i,k,!0),A=this.texData.get(I.dataId);r.texShape=A.texShape,r.isPacked=A.isPacked,r.usage=A.usage,ee().get("ENGINE_COMPILE_ONLY")?this.disposeData(I.dataId):(r.texture=A.texture,r.values=null,this.texData.delete(I.dataId)),this.disposeIntermediateTensorInfo(y),u&&(this.uploadWaitMs+=x.now()-d)}else{let h=this.acquireTexture(p,l,i,c);r.texture=h}}convertAndCacheOnCPU(e,r){let o=this.texData.get(e),{dtype:i}=o;return r!=null&&(o.values=A8e(r,i)),o.values}acquireTexture(e,r,o,i){if(this.numBytesInGPU+=this.computeBytes(e,o),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,r,i)}computeBytes(e,r){return e[0]*e[1]*x.bytesPerElement(r)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){return z(this,null,function*(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,r]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(r));return Promise.all(e)}else{for(let[,r]of Object.entries(this.binaryCache)){let o=new Promise(i=>{try{this.checkCompletion_(r),i(!0)}catch(s){throw s}});e.push(o)}return Promise.all(e)}})}checkCompletionAsync_(e){return z(this,null,function*(){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(yield wv(),this.checkCompletionAsync_(e))})}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(SE(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:r,customUniformLocations:o,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=F7(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=r,e.customUniformLocations=o,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,r,o){e.channels=e.channels||"RGBA";let{texture:i,height:s,width:a,channels:l}=e,c=ra().backend;if(!c.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let u=c.writeTexture(i,r,o,s,a,l);return ra().makeTensorFromDataId(u,r,o,c)}}return t.nextDataId=0,t})();function A8e(t,n){if(n==="float32"||n==="complex64")return t;if(n==="int32"||n==="bool"){let e=n==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<e.length;++r)e[r]=Math.round(t[r]);return e}else throw new Error(`Unknown dtype ${n}`)}var XE="4.22.0";function e$(){ee().set("WEBGL_FORCE_F16_TEXTURES",!0)}hp.isBrowser()&&Xx("webgl",()=>new ZE,2);var R8e={forceHalfFloat:e$};var dw=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var ms=class{constructor(n,e,r){this.variableNames=["A","B"],this.outputShape=O.assertAndGetBroadcastShape(e,r),this.enableShapeUniforms=Nn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${n}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};var Gs=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Us=class{constructor(n,e,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=O.assertAndGetBroadcastShape(e,r);let i=this.outputShape.length;this.enableShapeUniforms=Nn(i);let s="";if(o)if(i===0||x.sizeFromShape(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${zt(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let l=Pr("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${n}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}};function Br(t){let{inputs:n,backend:e}=t,{x:r}=n;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var Rse={kernelName:_l,backendName:"webgl",kernelFunc:Br};function gs(t){let{inputs:n,backend:e}=t,{real:r,imag:o}=n,i=e.makeTensorInfo(r.shape,"complex64"),s=e.texData.get(i.dataId),a=Br({inputs:{x:r},backend:e}),l=Br({inputs:{x:o},backend:e});return s.complexTensorInfos={real:a,imag:l},i}var Ose={kernelName:og,backendName:"webgl",kernelFunc:gs};var t$="return (a < 0.) ? b * a : a;",n$=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function O8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{alpha:i}=r,s=e.makeTensorInfo([],"float32",x.createScalarValue(i,"float32")),a=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Us(n$,o.shape,s.shape):new ms(t$,o.shape,s.shape),l=e.runWebGLProgram(a,[o,s],"float32");return e.disposeIntermediateTensorInfo(s),l}var Fse={kernelName:$d,backendName:"webgl",kernelFunc:O8e};var r$="return (a < 0.) ? b * a : a;",o$=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function F8e(t){let{inputs:n,backend:e}=t,{x:r,alpha:o}=n,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Us(o$,r.shape,o.shape):new ms(r$,r.shape,o.shape);return e.runWebGLProgram(i,[r,o],"float32")}var Pse={kernelName:Qd,backendName:"webgl",kernelFunc:F8e};var Ka="if (isnan(x)) return x;";function dt({opSnippet:t,packedOpSnippet:n,cpuKernelImpl:e,dtype:r}){return({inputs:o,backend:i})=>{let{x:s}=o,a=i,l=r||s.dtype;if(a.shouldExecuteOnCPU([s])&&e!=null){let d=a.texData.get(s.dataId),p=e(d.values,l);return a.makeTensorInfo(s.shape,l,p)}let c=ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&n!=null,u;return c?u=new fs(s.shape,n):u=new ti(s.shape,t),a.runWebGLProgram(u,[s],l)}}function Sn({opSnippet:t,packedOpSnippet:n,checkOutOfBounds:e=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:i}){return({inputs:s,backend:a})=>{let{a:l,b:c}=s,u=a;if(r&&l.dtype==="complex64"){let f=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,v]=[[f.complexTensorInfos.real,m.complexTensorInfos.real],[f.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(y=>{let[_,k]=y,T={dataId:_.dataId,dtype:_.dtype,shape:l.shape},I={dataId:k.dataId,dtype:k.dtype,shape:c.shape},A=new ms(t,l.shape,c.shape);return u.runWebGLProgram(A,[T,I],Ur(_.dtype,k.dtype))}),w=gs({inputs:{real:g,imag:v},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(v),w}let d=i||Ur(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&o!=null){let f=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g=l.dtype==="string"?O.fromUint8ToStringArray(f):f,v=l.dtype==="string"?O.fromUint8ToStringArray(m):m,[w,y]=o(l.shape,c.shape,g,v,d),_=u.makeTensorInfo(y,d),k=u.texData.get(_.dataId);return k.values=w,_}let p=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&n!=null,h;return p?h=new Us(n,l.shape,c.shape,e):h=new ms(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function qp(t,n=!1){if(t==="linear")return n?Dse:kse;if(t==="relu")return n?Ise:Cse;if(t==="elu")return n?Ese:bse;if(t==="relu6")return n?Nse:Sse;if(t==="prelu")return n?o$:r$;if(t==="leakyrelu")return n?n$:t$;if(t==="sigmoid")return n?Ase:Mse;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var pw=class{constructor(n,e,r,o=!1,i=!1,s=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Nn(this.outputShape.length);let u=o?n[1]:n[2],d=Math.ceil(u/2),p=o?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",f=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");let w=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let y="rc.x",_="rc.x";n[0]<e[0]?y=`imod(rc.x, ${n[0]})`:e[0]<n[0]&&(_=`imod(rc.x, ${e[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${y};
        int batchB = ${_};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${f[0]} * ${m[0]});
          result += (${f[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${w}

        ${v}

        setOutput(result);
      }
    `}};var i$={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},Kk=class{constructor(n,e,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=O.assertAndGetBroadcastShape(e,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${n}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var Bse="return a * b;";function Zk(t){let{inputs:n,backend:e}=t,{a:r,b:o}=n,i=O.upcastType(r.dtype,o.dtype);if(r.dtype==="complex64"){let a=e.texData.get(r.dataId),l=e.texData.get(o.dataId),c=new Kk(i$.REAL,r.shape,o.shape),u=new Kk(i$.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),f=gs({inputs:{real:p,imag:h},backend:e});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),f}if(e.shouldExecuteOnCPU([r,o])){let a=e.texData.get(r.dataId),l=e.texData.get(o.dataId),[c,u]=Kie(r.shape,o.shape,a.values,l.values,i),d=e.makeTensorInfo(u,i),p=e.texData.get(d.dataId);return p.values=c,d}let s;return ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new Us(Bse,r.shape,o.shape):s=new ms(Bse,r.shape,o.shape),e.runWebGLProgram(s,[r,o],i)}var Lse={kernelName:tu,backendName:"webgl",kernelFunc:Zk};function $se(t,n,e){let r=[Gp(t.shape),...Wp(t.shape)],o={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Gp(n),...Wp(n)],s=new uw(i,r),a=!0,l=[r],c=e.runWebGLProgram(s,[o],t.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}function Ne(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{shape:i}=r,s=e,a=x.sizeFromShape(o.shape),l=x.inferFromImplicitShape(i,a),c=x.sizeFromShape(l);x.assert(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let u=s.texData.get(o.dataId);return u.isPacked&&!kf(o.shape,l)&&!(u.texture!==null&&kf(u.shape,l))?$se(o,l,s):(s.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}var Vse={kernelName:ep,backendName:"webgl",kernelFunc:Ne};var Xk=class{constructor(n,e){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=n;this.outputShape=[o,s];let a=Math.floor(r/4)*4,l=r%4,c="sumValue += dot(values, ones);";if(e!=null){let d=1/e;c=`sumValue += dot(values * ${x.isInt(d)?d.toPrecision(2):d}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var YE=class{constructor(n,e){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=n;this.outputShape=[o,s];let a="0.0",l="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",l="min"):e==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");let u=Math.floor(r/4)*4,d=r%4,p=`
      if (${e==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${e==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${e==="min"} || ${e==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";e==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function B8e(t){let n=[];for(;n.length===0||n[n.length-1].outSize!==1;){let e=n.length?n[n.length-1].outSize:t[1],r=O.computeOptimalWindowSize(e);n.push({inSize:e,windowSize:r,outSize:Math.ceil(e/r)})}return n}function Ws(t,n,e,r){let o=B8e(t.shape),i=t;for(let s=0;s<o.length;s++){let{inSize:a,windowSize:l,outSize:c}=o[s],u,d;e==="mean"?u=s===0?new Xk({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new Xk({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new YE({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},e),d=i,i=r.runWebGLProgram(u,[i],n),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}var QE=class{constructor(n,e){this.variableNames=["A"];let r=new Array(n.length);for(let s=0;s<r.length;s++)r[s]=n[e[s]];this.outputShape=r,this.rank=r.length;let o=zt(this.rank),i=L8e(e);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}};function L8e(t){let n=t.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(n);for(let o=0;o<t.length;o++)r[t[o]]=e[o];return r.join()}var JE=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let r=new Array(n.length);for(let u=0;u<r.length;u++)r[u]=n[e[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let o=zt(this.rank),i=Q7("rc",this.rank),s=new Array(this.rank);for(let u=0;u<e.length;u++)s[e[u]]=i[u];let a=`vec2(${s.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function Cf(t,n,e){let r=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JE(t.shape,n):new QE(t.shape,n);return e.runWebGLProgram(r,[t],t.dtype)}function jse(t,n,e,r){let o=n,i=t.shape.length,s=x.parseAxisParam(o,t.shape),a=s,l=O.getAxesPermutation(a,i),c=l!=null,u=t;c&&(u=Cf(t,l,r),a=O.getInnerMostAxes(a.length,i)),O.assertAxesAreInnerMostDims("sum",a,i);let[d,p]=O.computeOutAndReduceShapes(u.shape,a),h=d;e&&(h=O.expandShapeToKeepDim(d,s));let f=x.sizeFromShape(p),g=x.sizeFromShape(t.shape)/f,v=Ne({inputs:{x:u},attrs:{shape:[g,f]},backend:r}),w=Kh(t.dtype),y=Ws(v,w,"sum",r),_=Ne({inputs:{x:y},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(u),_}function a2(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;return jse(o,i,s,e)}var zse={kernelName:sp,backendName:"webgl",kernelFunc:a2};function ir(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{perm:i}=r,s=e,a=o.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=o.shape[i[u]];let c;if(s.shouldExecuteOnCPU([o])){let d=s.texData.get(o.dataId).values,p=s2(d,o.shape,o.dtype,i,l);c=s.makeTensorInfo(l,o.dtype);let h=s.texData.get(c.dataId);h.values=p}else c=Cf(o,i,s);return c}var Hse={kernelName:bl,backendName:"webgl",kernelFunc:ir};var s$=1e3;function l2({a:t,b:n,transposeA:e,transposeB:r,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let c=t.shape.length,u=n.shape.length,d=e?t.shape[c-2]:t.shape[c-1],p=r?n.shape[u-1]:n.shape[u-2],h=e?t.shape[c-1]:t.shape[c-2],f=r?n.shape[u-2]:n.shape[u-1],m=t.shape.slice(0,-2),g=n.shape.slice(0,-2),v=x.sizeFromShape(m),w=x.sizeFromShape(g),_=ss.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([h,f]);x.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${e} and transposeB=${r} must match.`);let k=e?[v,d,h]:[v,h,d],T=r?[w,f,p]:[w,p,f],I=Ne({inputs:{x:t},backend:o,attrs:{shape:k}}),A=Ne({inputs:{x:n},backend:o,attrs:{shape:T}}),P=[I,A],N=Math.max(v,w),B=e?I.shape[1]:I.shape[2],S=i!=null,W=s!=null,ie=l==="leakyrelu",Q=l!=null?qp(l,!0):null,J=S||W||ie||Q!=null,G;if((h===1||f===1)&&B>s$&&J===!1){let V=I,K=A;e&&(V=ir({inputs:{x:I},backend:o,attrs:{perm:[0,2,1]}}),P.push(V)),r&&(K=ir({inputs:{x:A},backend:o,attrs:{perm:[0,2,1]}}),P.push(K));let pe=f!==1,ce=f===1,se=V;pe&&(se=Ne({inputs:{x:V},backend:o,attrs:{shape:[N,B,1]}}),P.push(se));let ye=f===1?2:1,Re=K;ce&&(Re=Ne({inputs:{x:K},backend:o,attrs:{shape:[N,1,B]}}),P.push(Re));let Oe=Zk({inputs:{a:se,b:Re},backend:o});G=a2({inputs:{x:Oe},backend:o,attrs:{axis:ye,keepDims:!0}}),P.push(Oe)}else{let V=Ur(t.dtype,n.dtype),K=new pw(k,T,[N,h,f],e,r,S,Q,W,ie),pe=[I,A];if(i!=null&&pe.push(i),W&&pe.push(s),ie){let ce=o.makeTensorInfo([],"float32",x.createScalarValue(a,"float32"));pe.push(ce),P.push(ce)}G=o.runWebGLProgram(K,pe,V)}let H=Ne({inputs:{x:G},backend:o,attrs:{shape:_}});P.push(G);for(let V of P)o.disposeIntermediateTensorInfo(V);return H}function $8e(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return l2({a:o,b:i,transposeA:l,transposeB:c,backend:e,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}var Use={kernelName:Hh,backendName:"webgl",kernelFunc:$8e};var Gse="return abs(x);";function V8e(t){let{inputs:n,backend:e}=t,{x:r}=n;if(e.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let i=e.texData.get(r.dataId),s=HE(i.values);return e.makeTensorInfo(r.shape,r.dtype,s)}let o;return ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new fs(r.shape,Gse):o=new ti(r.shape,Gse),e.runWebGLProgram(o,[r],r.dtype)}var Wse={kernelName:xd,backendName:"webgl",kernelFunc:V8e};var j8e=uo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,z8e=dt({opSnippet:j8e}),qse={kernelName:Dc,backendName:"webgl",kernelFunc:z8e};var H8e=uo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,U8e=dt({opSnippet:H8e}),Kse={kernelName:Ec,backendName:"webgl",kernelFunc:U8e};var Zse="return a + b;",G8e=Sn({opSnippet:Zse,packedOpSnippet:Zse,supportsComplex:!0,cpuKernelImpl:Tie}),Xse={kernelName:Sa,backendName:"webgl",kernelFunc:G8e};var eI=class{constructor(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}};var tI=class{constructor(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}};function nI(t){let{inputs:n,backend:e}=t,r=n;if(r.length===1)return Br({inputs:{x:r[0]},backend:e});if(r.length>ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let l=Math.floor(r.length/2),c=nI({inputs:r.slice(0,l),backend:e}),u=nI({inputs:r.slice(l),backend:e});return nI({inputs:[c,u],backend:e})}let o=r.map(l=>l.dtype).reduce((l,c)=>Ur(l,c)),i=r.map(l=>l.shape),a=ee().getBool("WEBGL_PACK")?new tI(r[0].shape,i):new eI(r[0].shape,i);return e.runWebGLProgram(a,r,o)}var Yse={kernelName:_d,backendName:"webgl",kernelFunc:nI};function W8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=ir({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,a)),O.assertAxesAreInnerMostDims("all",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=Ne({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Ws(m,m.dtype,"all",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=Ne({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=Ne({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var Qse={kernelName:Qm,backendName:"webgl",kernelFunc:W8e};function q8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=ir({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,a)),O.assertAxesAreInnerMostDims("any",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=Ne({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Ws(m,m.dtype,"any",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=Ne({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=Ne({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var Jse={kernelName:Jm,backendName:"webgl",kernelFunc:q8e};var rI=class{constructor(n,e,r){this.variableNames=["A"];let{windowSize:o,batchSize:i,outSize:s}=n;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];let a=e==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};var oI=class{constructor(n,e,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,x.assert(n.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);let i=n[n.length-1],s=Math.ceil(i/e);this.outputShape=n.slice(0,-1),s>1&&this.outputShape.push(s),o||this.variableNames.push("bestIndicesA");let a=this.outputShape,l=a.length,c=zt(l),u=Pr("coords",l),d,p;if(s===1){p=l+1;let A=zt(p);d=`
        ${A} sourceLocR = ${A}(${u.join()}, 0);
        ++${u[l-1]};
        ${A} sourceLocG = ${A}(${u.join()}, 0);
        ++${u[l-2]};
        ${A} sourceLocA = ${A}(${u.join()}, 0);
        --${u[l-1]};
        ${A} sourceLocB = ${A}(${u.join()}, 0);
        --${u[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;let h=["x","y","z","w","u","v"].slice(0,p),f="."+h[p-1],m=h.map(A=>"int "+A),g=Pr("sourceLocR",p-1).concat("inIdx.r"),v=Pr("sourceLocG",p-1).concat("inIdx.g"),w=Pr("sourceLocB",p-1).concat("inIdx.b"),y=Pr("sourceLocA",p-1).concat("inIdx.a"),_=r==="max"?"greaterThan":"lessThan",k=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${y.join()})));`,T=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${w.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,I=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${I}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${f}, sourceLocG${f},
          sourceLocB${f}, sourceLocA${f}) * ${e};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${T};

        for (int i = 0; i < ${e}; i++) {
          inIdx = srcIdx;
          ${k}
          vec4 candidate = ${T};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function eae(t,n,e,r=null){let o=n.shape[0],i=n.shape[1];r!=null&&(o=r.shape[0],i=r.shape[1]);let s=O.computeOptimalWindowSize(i),a={windowSize:s,inSize:i,batchSize:o,outSize:Math.ceil(i/s)},l=new rI(a,e,r==null),c=[n];r!=null&&c.push(r);let u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;let d=eae(t,n,e,u);return t.disposeIntermediateTensorInfo(u),d}function tae(t,n,e,r=null){let o=r!=null?r.shape:n.shape,i=o[o.length-1],s=O.computeOptimalWindowSize(i),a=new oI(o,s,e,r==null),l=r==null?[n]:[n,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===n.shape.length){let u=tae(t,n,e,c);return t.disposeIntermediateTensorInfo(c),u}return c}function iI(t,n,e,r){let o=[e];if(O.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,n.shape.length),!ee().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){let i=[],s=t.texData.get(n.dataId),a=s!==null&&s.isPacked,l=n;a&&(l=t.unpackTensor(n),i.push(l));let[c,u]=O.computeOutAndReduceShapes(l.shape,o),d=x.sizeFromShape(u),p=Ne({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);let h=eae(t,p,r);i.push(h);let f=Ne({inputs:{x:h},backend:t,attrs:{shape:c}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),f}return tae(t,n,r)}function K8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r,s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=ir({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),O.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=iI(e,l,s[0],"max");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var nae={kernelName:kd,backendName:"webgl",kernelFunc:K8e};function Z8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r,s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=ir({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),O.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=iI(e,l,s[0],"min");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var rae={kernelName:bd,backendName:"webgl",kernelFunc:Z8e};var X8e=uo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Y8e=dt({opSnippet:X8e}),oae={kernelName:Ic,backendName:"webgl",kernelFunc:Y8e};var Q8e=uo+"return log(x + sqrt(x * x + 1.0));",J8e=dt({opSnippet:Q8e}),iae={kernelName:Nc,backendName:"webgl",kernelFunc:J8e};var ePe=uo+`
  return atan(x);
`,tPe=dt({opSnippet:ePe}),sae={kernelName:Ac,backendName:"webgl",kernelFunc:tPe};var nPe=dw+`
  return atan(a, b);
`,rPe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gs+`
  return result;
`,oPe=Sn({opSnippet:nPe,packedOpSnippet:rPe}),aae={kernelName:Oc,backendName:"webgl",kernelFunc:oPe};var iPe=uo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,sPe=dt({opSnippet:iPe}),lae={kernelName:Rc,backendName:"webgl",kernelFunc:sPe};var Zl=class{constructor(n,e,r,o=!1,i=!1){if(this.variableNames=["x"],e==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,h=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;let m=e==="avg",g=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,v=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`,w="0.0";if(m||(w="-1.0 / 1e-20"),r){let A=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${f});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${A} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?i?g:v:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let y="max",_=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(_="avgValue / max(count, 1.0)");let k=Math.floor(s/4)*4,T=s%4,I=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${y}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${f});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${k}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${I}
          }

          int xC = xCCorner + ${k};
          if (${T===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${I}
          } else if (${T===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${I}
          } else if (${T===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${I}
          }
        }
        setOutput(${_});
      }
    `}},Sf=class{constructor(n,e,r,o=!1,i=!1){if(this.variableNames=["x"],e==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideDepth,l=n.strideHeight,c=n.strideWidth,u=n.dilationDepth,d=n.dilationHeight,p=n.dilationWidth,h=n.effectiveFilterDepth,f=n.effectiveFilterHeight,m=n.effectiveFilterWidth,g=n.padInfo.front,v=n.padInfo.top,w=n.padInfo.left;this.outputShape=n.outShape;let y=e==="avg",_="0.0";if(y||(_="-1.0 / 1e-20"),r){let N=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${g}, ${v}, ${w});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${n.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${f};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${N} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?i?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${f} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let k="max",T=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(T="avgValue / max(count, 1.0)");let I=Math.floor(s/4)*4,A=s%4,P=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${g}, ${v}, ${w});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${I}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${P}
            }

            int xC = xCCorner + ${I};
            if (${A===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${A===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${A===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${P}
            }
          }
        }
        setOutput(${T});
      }
    `}};function aPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;ql(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))return Br({inputs:{x:o},backend:e});let d=new Zl(u,"avg",!1);return e.runWebGLProgram(d,[o],"float32")}var cae={kernelName:Cd,backendName:"webgl",kernelFunc:aPe};function lPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=O.computePool3DInfo(o.shape,i,s,u,a,l,c),p=new Sf(d,"avg",!1);return e.runWebGLProgram(p,[o],"float32")}var uae={kernelName:Sd,backendName:"webgl",kernelFunc:lPe};var sI=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,u=l-1-n.padInfo.top,d=c-1-n.padInfo.left,p=1/(e*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},aI=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterDepth,r=n.filterHeight,o=n.filterWidth,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,h=n.effectiveFilterWidth,f=d-1-n.padInfo.front,m=p-1-n.padInfo.top,g=h-1-n.padInfo.left,v=1/(e*r*o);this.userCode=`
      const ivec3 pads = ivec3(${f}, ${m}, ${g});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function cPe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],p=O.computePool3DInfo(s.shape,a,l,d,c,u),h=new aI(p);return e.runWebGLProgram(h,[o],s.dtype)}var dae={kernelName:tg,backendName:"webgl",kernelFunc:cPe};function uPe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i;ql([o,i],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=r,u=O.computePool2DInfo(s.shape,a,l,1,c),d=new sI(u);return e.runWebGLProgram(d,[o],s.dtype)}var pae={kernelName:eg,backendName:"webgl",kernelFunc:uPe};function dPe(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i}=n,{transposeA:s,transposeB:a}=r;return l2({a:o,b:i,transposeA:s,transposeB:a,backend:e})}var hae={kernelName:Md,backendName:"webgl",kernelFunc:dPe};var lI=class{constructor(n,e,r,o,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],O.assertAndGetBroadcastShape(n,e),O.assertAndGetBroadcastShape(n,r);let a="0.0";o!=null&&(O.assertAndGetBroadcastShape(n,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(O.assertAndGetBroadcastShape(n,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};var cI=class{constructor(n,e,r,o,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],O.assertAndGetBroadcastShape(n,e),O.assertAndGetBroadcastShape(n,r);let a="vec4(0.0)";o!=null&&(O.assertAndGetBroadcastShape(n,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(O.assertAndGetBroadcastShape(n,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var pPe=({inputs:t,backend:n,attrs:e})=>{let{x:r,mean:o,variance:i,offset:s,scale:a}=t;x.assert(o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),x.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),x.assert(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;l==null&&(l=.001);let c=[r,o,i],u=null;s!=null&&(u=s.shape,c.push(s));let d=null;a!=null&&(d=a.shape,c.push(a));let p=ee().getBool("WEBGL_PACK_NORMALIZATION")?new cI(r.shape,o.shape,i.shape,u,d,l):new lI(r.shape,o.shape,i.shape,u,d,l);return n.runWebGLProgram(p,c,c[0].dtype)},fae={kernelName:Bd,backendName:"webgl",kernelFunc:pPe};var uI=class{constructor(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;let e=zt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=hPe(this.rank),o,i=n.map((s,a)=>`sourceLoc.${a$[a]} = start[${a}] + coords.${a$[a]};`);o=`
        ${e} sourceLoc;
        ${e} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}},a$=["x","y","z","w","u","v"];function hPe(t){if(t===1)return"sourceLoc";if(t<=6)return a$.slice(0,t).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var dI=class{constructor(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let e=zt(this.rank),r=Pr("coords",this.rank),o=Pr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,s=`getChannel(getSource(${o.join()}), ${i})`,a=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${n[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${s};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${n[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${n[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${e}(${n.map((u,d)=>`start[${d}]`).join()});`:n.map((u,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${e} coords = getOutputCoords();
        ${e} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}};function fPe(t,n,e,r){let o=r.texData.get(t.dataId),i=r.makeTensorInfo(e,t.dtype),s=r.texData.get(i.dataId);Object.assign(s,o),s.refCount=1,s.shape=e,s.dtype=t.dtype;let a=yo.computeFlatOffset(n,x.computeStrides(t.shape));o.slice&&(a+=o.slice.flatOffset),s.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};let l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}function Xl(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,size:s}=r,[a,l]=yo.parseSliceParams(o,i,s);if(yo.assertParamsValid(o,a,l),x.sizeFromShape(l)===0)return e.makeTensorInfo(l,o.dtype,[]);if(e.shouldExecuteOnCPU([o])||o.dtype==="string"){let d=e.texData.get(o.dataId),p=ise(d.values,a,l,o.shape,o.dtype);return e.makeTensorInfo(l,o.dtype,p)}let{isPacked:c}=e.texData.get(o.dataId),u=yo.isSliceContinous(o.shape,a,l);if(c||!u){let d=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dI(l):new uI(l),p=[a];return e.runWebGLProgram(d,[o],o.dtype,p)}return e.uploadToGPU(o.dataId),fPe(o,a,l,e)}var mae={kernelName:ip,backendName:"webgl",kernelFunc:Xl};var mPe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,crops:s}=r;x.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((w,y)=>w*y),l=O.getReshaped(o.shape,i,a),c=O.getPermuted(l.length,i.length),u=O.getReshapedPermuted(o.shape,i,a),d=O.getSliceBeginCoords(s,i.length),p=O.getSliceSize(u,s,i.length),h=[],f=Ne({inputs:{x:o},backend:e,attrs:{shape:l}}),m=ir({inputs:{x:f},backend:e,attrs:{perm:c}}),g=Ne({inputs:{x:m},backend:e,attrs:{shape:u}}),v=Xl({inputs:{x:g},backend:e,attrs:{begin:d,size:p}});return h.push(f),h.push(m),h.push(g),h.forEach(w=>e.disposeIntermediateTensorInfo(w)),v},gae={kernelName:Td,backendName:"webgl",kernelFunc:mPe};function gPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s}=r,a=e.readSync(o.dataId),l=e.readSync(i.dataId),c=zE(a,l,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,c)}var vae={kernelName:ng,backendName:"webgl",kernelFunc:gPe};var vPe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,wPe=`
  return float(int(a.r) & int(b.r));
`;function yPe(t){let{inputs:n,backend:e}=t,{a:r,b:o}=n,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=ee().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([r,o])||s===1){let l=e.texData.get(r.dataId).values,c=e.texData.get(o.dataId).values,[u,d]=Eie(r.shape,o.shape,l,c,r.dtype),p=e.makeTensorInfo(d,r.dtype),h=e.texData.get(p.dataId);return h.values=u,p}let a;return i?a=new Us(vPe,r.shape,o.shape,!1):a=new ms(wPe,r.shape,o.shape),e.runWebGLProgram(a,[r,o],r.dtype)}var wae={kernelName:Rh,backendName:"webgl",kernelFunc:yPe};function xPe(t){let{inputs:n,backend:e}=t,{s0:r,s1:o}=n,i=e.readSync(r.dataId),s=e.readSync(o.dataId),a=O.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var yae={kernelName:rg,backendName:"webgl",kernelFunc:xPe};var _Pe="return float(a != b);",l$=Sn({opSnippet:_Pe,cpuKernelImpl:Xie,dtype:"bool"}),xae={kernelName:jh,backendName:"webgl",kernelFunc:l$};function Kp(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.texData.get(r.dataId);return Br({inputs:{x:o.complexTensorInfos.real},backend:e})}var _ae={kernelName:Pg,backendName:"webgl",kernelFunc:Kp};var kPe="return float(int(x));";function kae(t,n){let e=new ti(t.shape,kPe),r=n.runWebGLProgram(e,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function c$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return Br({inputs:{x:o},backend:e});let s=Ln(o.shape),a=c$({inputs:{x:o},backend:e,attrs:{dtype:"float32"}}),l=gs({inputs:{real:a,imag:s},backend:e});return s.dispose(),e.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){let s=Kp({inputs:{input:o},backend:e}),a=c$({inputs:{x:s},backend:e,attrs:{dtype:i}});return e.disposeIntermediateTensorInfo(s),a}if(!x.hasEncodingLoss(o.dtype,i)){let s=Br({inputs:{x:o},backend:e});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(e.shouldExecuteOnCPU([o])){let s=e.texData.get(o.dataId).values,[a,l,c]=Iie(s,o.shape,o.dtype,i);return e.makeTensorInfo(a,l,c)}if(i==="int32")return kae(o,e);if(i==="bool"){let s=e.makeTensorInfo([],"bool",x.getTypedArrayFromDType("bool",1)),l=l$({inputs:{a:o,b:s},backend:e});return e.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}var bae={kernelName:xl,backendName:"webgl",kernelFunc:c$};var Cae="return ceil(x);",bPe=dt({opSnippet:Cae,packedOpSnippet:Cae,cpuKernelImpl:Nie}),Sae={kernelName:Fc,backendName:"webgl",kernelFunc:bPe};var pI=class{constructor(n){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var hI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function CPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{clipValueMin:i,clipValueMax:s}=r,a;ee().getBool("WEBGL_PACK_CLIP")?a=new hI(o.shape):a=new pI(o.shape);let l=[[i],[s]];return e.runWebGLProgram(a,[o],o.dtype,l)}var Mae={kernelName:Pc,backendName:"webgl",kernelFunc:CPe};var fI=class{constructor(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function Tae(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}}function SPe(t){let{inputs:n,backend:e}=t,{x:r}=n,o=e.texData.get(r.dataId),i=new fI(r.shape),s=[Tae(r,o.complexTensorInfos.real),Tae(r,o.complexTensorInfos.imag)];return e.runWebGLProgram(i,s,s[0].dtype)}var Dae={kernelName:Dd,backendName:"webgl",kernelFunc:SPe};var mI=class{constructor(n){this.outputShape=[],this.outputShape=O.computeOutShape(n,1),this.variableNames=n.map((s,a)=>`T${a}`);let e=new Array(n.length-1);e[0]=n[0][1];for(let s=1;s<e.length;s++)e[s]=e[s-1]+n[s][1];let r=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<e.length;s++){let a=e[s-1];r.push(`else if (yC < ${e[s]}) setOutput(getT${s}(yR, yC-${a}));`)}let o=e.length,i=e[e.length-1];r.push(`else setOutput(getT${o}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}};var vI=class{constructor(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=O.computeOutShape(n,e);let r=this.outputShape,o=r.length,i=zt(o),s=Pr("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=n.map((m,g)=>`T${g}`);let l=new Array(n.length-1);l[0]=n[0][e];for(let m=1;m<l.length;m++)l[m]=l[m-1]+n[m][e];let c=a[e],u=a.slice(-2),d=a.join(),p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){let g=l[m-1];p+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${gI(a,c,g)}),
            vec2(${gI(u,c,g)}));
        }`}let h=l.length,f=l[l.length-1];p+=`
        return getChannel(
          getT${h}(${gI(a,c,f)}),
          vec2(${gI(u,c,f)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[o-1]} = ${s[o-1]} + 1;
        if (${s[o-1]} < ${r[o-1]}) {
          result.g = getValue(${s});
        }

        ${s[o-2]} = ${s[o-2]} + 1;
        if (${s[o-2]} < ${r[o-2]}) {
          result.a = getValue(${s});
        }

        ${s[o-1]} = ${s[o-1]} - 1;
        if (${s[o-2]} < ${r[o-2]} &&
            ${s[o-1]} < ${r[o-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}};function gI(t,n,e){let r=t.indexOf(n);return t.map((i,s)=>s===r?`${i} - ${e}`:i).join()}function c2(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.texData.get(r.dataId);return Br({inputs:{x:o.complexTensorInfos.imag},backend:e})}var Eae={kernelName:kg,backendName:"webgl",kernelFunc:c2};function hw(t,n,e){let r=t[0].dtype;if(r==="complex64"){let h=t.map(w=>Kp({inputs:{input:w},backend:e})),f=t.map(w=>c2({inputs:{input:w},backend:e})),m=hw(h,n,e),g=hw(f,n,e),v=gs({inputs:{real:m,imag:g},backend:e});return h.forEach(w=>e.disposeIntermediateTensorInfo(w)),f.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),v}let o=e.shouldExecuteOnCPU(t);if(r==="string"&&(o=!0),o){let h=t.map(_=>{let T=[-1,x.sizeFromShape(_.shape.slice(n))];return Ne({inputs:{x:_},backend:e,attrs:{shape:T}})}),f=h.map(_=>({vals:e.readSync(_.dataId),shape:_.shape})),m=O.computeOutShape(h.map(_=>_.shape),1),g=h[0].shape[0]===1,v=Aie(f,m,r,g),w=O.computeOutShape(t.map(_=>_.shape),n),y=e.makeTensorInfo(w,r,v);return h.forEach(_=>e.disposeIntermediateTensorInfo(_)),y}let i=t.filter(h=>x.sizeFromShape(h.shape)>0),s=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){let h=s?new ti(t[0].shape,ju):new fs(t[0].shape,ju);return e.runWebGLProgram(h,t,r)}let a=ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){let h=[];for(let m=0;m<i.length;m+=a){let g=i.slice(m,m+a);h.push(hw(g,n,e))}let f=hw(h,n,e);for(let m of h)e.disposeIntermediateTensorInfo(m);return f}if(s){let h=new vI(i.map(f=>f.shape),n);return e.runWebGLProgram(h,i,r)}let{tensors2D:l,outShape:c}=MPe(i,n,e),u=new mI(l.map(h=>h.shape)),d=e.runWebGLProgram(u,l,r);l.forEach(h=>e.disposeIntermediateTensorInfo(h));let p=Ne({inputs:{x:d},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(d),p}function MPe(t,n,e){let r=O.computeOutShape(t.map(i=>i.shape),n);return{tensors2D:t.map(i=>Ne({inputs:{x:i},attrs:{shape:[-1,x.sizeFromShape(i.shape.slice(n))]},backend:e})),outShape:r}}function u$(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r,i=x.parseAxisParam(o,n[0].shape)[0],s=n.map(c=>c.shape);O.assertParamsConsistent(s,i);let a=O.computeOutShape(n.map(c=>c.shape),i);if(x.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(c=>x.sizeFromShape(c.shape)>0);return l.length===1?Br({inputs:{x:l[0]},backend:e}):hw(l,i,e)}var Iae={kernelName:Ed,backendName:"webgl",kernelFunc:u$};var fw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;let s=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,c=n.strideWidth,u=n.dilationHeight,d=n.dilationWidth,p=n.filterHeight,h=n.filterWidth,f=Math.floor(n.inChannels/4)*4,m=n.inChannels%4,g=n.dataFormat==="channelsLast",v=g?1:2,w=g?2:3,y=g?3:1,_="",k="";r&&(o?_=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?_=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:_=`
          float activation(float x) {
            ${r}
          }
        `,k="result = activation(result);");let T=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${y}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${w}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${n.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${f}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${f}) *
                    getW(wR, wC, ${f}, d2);
              } else {
                dotProd +=
                    getX(batch, ${f}, xR, xC) *
                    getW(wR, wC, ${f}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2),
                getW(wR, wC, ${f} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1),
                  getX(batch, xR, xC, ${f} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC),
                  getX(batch, ${f} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${T}
        ${k}
        setOutput(result);
      }
    `}},wI=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let e=n.padInfo.front,r=n.padInfo.top,o=n.padInfo.left,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.filterDepth,p=n.filterHeight,h=n.filterWidth,f=Math.floor(n.inChannels/4)*4,m=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${a});
      const ivec3 pads = ivec3(${e}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${f}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${f}) *
                  getW(wF, wR, wC, ${f}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1),
                  getX(batch, xF, xR, xC, ${f} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2),
                  getW(wF, wR, wC, ${f} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};var mw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=Nn(this.outputShape.length);let s=n.padInfo.left,a=n.strideWidth,l=n.dilationWidth,c=n.filterHeight,u=n.filterWidth,d=u,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)p+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${n.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)p+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){let v=g*2;if(p+=`
           xC = xCCorner + ${v*l};
           `,a===1){if(v<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?p+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){let w=s%2===0?x.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${w};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:p+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):w===1?p+=`
                     xC${v+1} = xTexelC${v};
                     `:p+=`
                     xCOffset = xC + ${w};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(p+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(p+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${n.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(p+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${n.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let h="",f="";r&&(o?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,f="result = activation(result);");let m=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${f}
         setOutput(result);
       }
     `}};var yI=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=n,this.enableShapeUniforms=Nn(this.outputShape.length);let{dataFormat:r}=e,o=xr(),i=r==="channelsLast",s=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${n[2]} && pos < ${n[1]}) {`,c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${o.output} = result;
      }
    `}};function xI(t,n){let e=t.length;return e>=3?n?[...t.slice(0,-3),t[e-3]*t[e-2],t[e-1]]:[...t.slice(0,-3),t[e-3],t[e-2]*t[e-1]]:!n&&e===1&&t[0]>1?[t[0],1]:null}function _I({x:t,filter:n,convInfo:e,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let l=t.shape,c=r.texData.get(t.dataId),u=e.inChannels,d=l[0]*l[1]*l[2],p=e.outChannels,h=e.dataFormat==="channelsLast",f=!1,m=!1,g,v=[];if(i!=null){let _=xI(i.shape,h);_!=null&&(i=Ne({inputs:{x:i},backend:r,attrs:{shape:_}}),v.push(i))}if(o!=null){let _=xI(o.shape,h);_!=null&&(o=Ne({inputs:{x:o},backend:r,attrs:{shape:_}}),v.push(o))}if(!((d===1||p===1)&&u>s$)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&x.arraysEqual(c.shape.slice(-3),l.slice(-3))){let _=l[0]*l[1]*(l[2]+1),k={dataId:t.dataId,shape:[1,_,e.inChannels],dtype:t.dtype},T=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,x.assert(kf(c.shape,k.shape),()=>`packed reshape ${c.shape} to ${k.shape} isn't free`);let I=Ne({inputs:{x:n},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}});v.push(I);let A=l2({a:k,b:I,backend:r,transposeA:f,transposeB:m,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s}),P=r.texData.get(A.dataId);x.assert(P.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=T,P.shape=e.outShape,g=Br({inputs:{x:A},backend:r}),g.shape=e.outShape,v.push(A)}else{let _=e.outHeight*e.outWidth,k=Ne({inputs:{x:t},backend:r,attrs:{shape:h?[e.batchSize,_,e.inChannels]:[e.batchSize,e.inChannels,_]}}),T=Ne({inputs:{x:n},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}}),I=l2({a:h?k:T,b:h?T:k,transposeA:!h,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s});g=Ne({inputs:{x:I},backend:r,attrs:{shape:e.outShape}}),v.push(k),v.push(T),v.push(I)}for(let _ of v)r.disposeIntermediateTensorInfo(_);return g}function kI({x:t,filter:n,convInfo:e,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:p,dataFormat:h}=e,f=h==="channelsLast",m=l*c*u,g=p*d,v=[e.batchSize,m,g],w=!0,y=!1,_=[];if(i!=null){let H=xI(i.shape,f);H!=null&&(i=Ne({inputs:{x:i},backend:r,attrs:{shape:H}}),_.push(i))}if(o!=null){let H=xI(o.shape,f);H!=null&&(o=Ne({inputs:{x:o},backend:r,attrs:{shape:H}}),_.push(o))}let k=Ne({inputs:{x:n},backend:r,attrs:{shape:[1,m,x.sizeFromShape(n.shape)/m]}});_.push(k);let T=new yI(v,e),I=[t.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]],A=r.runWebGLProgram(T,[t],"float32",I),P=Ne({inputs:{x:A},backend:r,attrs:{shape:v}});_.push(A),_.push(P);let N=o!=null,B=i!=null,S=a==="leakyrelu",W=a?qp(a,!0):null,ie=new pw(f?P.shape:k.shape,f?k.shape:P.shape,f?[e.batchSize,g,e.outChannels]:[e.batchSize,e.outChannels,g],w,y,N,W,B,S),Q=f?[P,k]:[k,P];if(o&&Q.push(o),B&&Q.push(i),S){let H=r.makeTensorInfo([],"float32",x.createScalarValue(s,"float32"));Q.push(H),_.push(H)}let J=r.runWebGLProgram(ie,Q,"float32"),G=Ne({inputs:{x:J},backend:r,attrs:{shape:e.outShape}});_.push(J);for(let H of _)r.disposeIntermediateTensorInfo(H);return G}function TPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,i.shape,s,c,a,u,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=_I({x:o,filter:i,convInfo:p,backend:e});else if(p.strideWidth<=2&&d==="channelsLast"&&ee().getBool("WEBGL_EXP_CONV")){let m=new mw(p),g=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=e.runWebGLProgram(m,[o,i],"float32",g)}else if(ee().getBool("WEBGL_CONV_IM2COL"))h=kI({x:o,filter:i,convInfo:p,backend:e});else{let m=new fw(p);h=e.runWebGLProgram(m,[o,i],"float32")}let f=Ne({inputs:{x:h},backend:e,attrs:{shape:p.outShape}});return e.disposeIntermediateTensorInfo(h),f}var Nae={kernelName:Id,backendName:"webgl",kernelFunc:TPe};var bI=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,r=n.strideWidth,o=n.padInfo.top,i=n.padInfo.left,s=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${o};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},CI=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=n.dataFormat==="channelsLast",a=e-1-n.padInfo.top,l=r-1-n.padInfo.left,c=s?1:2,u=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},SI=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideDepth,r=n.strideHeight,o=n.strideWidth,i=n.padInfo.front,s=n.padInfo.top,a=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yF = 0; yF < ${n.outDepth}; yF++) {
            int xF = wF + yF * ${e} - ${i};

            if (xF < 0 || xF >= ${n.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${n.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${n.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},MI=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterDepth,r=n.filterHeight,o=n.filterWidth,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=e-1-n.padInfo.front,c=r-1-n.padInfo.top,u=o-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${e}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${e} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function DPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,u,s,1,a,c,!1,d),h=new bI(p);return e.runWebGLProgram(h,[o,i],"float32")}var Aae={kernelName:ig,backendName:"webgl",kernelFunc:DPe};var TI=class{constructor(n){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=n.inShape,this.enableShapeUniforms=Nn(this.outputShape.length);let e=n.filterHeight,r=n.filterWidth,o=e-1-n.padInfo.top,i=r-1-n.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${n.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${n.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function EPe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=O.convertConv2DDataFormat(c),p=O.computeConv2DInfo(s,i.shape,a,1,l,u,!1,d);if(ee().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],f=new TI(p);return e.runWebGLProgram(f,[o,i],"float32",h)}else{let h=new CI(p);return e.runWebGLProgram(h,[o,i],"float32")}}var Rae={kernelName:Nd,backendName:"webgl",kernelFunc:EPe};function IPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r,c=O.computeConv3DInfo(o.shape,i.shape,s,l,a),u=new wI(c);return e.runWebGLProgram(u,[o,i],"float32")}var Oae={kernelName:Ad,backendName:"webgl",kernelFunc:IPe};function NPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,filterShape:l}=r,c=O.computeConv3DInfo(o.shape,l,s,1,a),u=new SI(c);return e.runWebGLProgram(u,[o,i],"float32")}var Fae={kernelName:sg,backendName:"webgl",kernelFunc:NPe};function APe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{pad:s,strides:a,inputShape:l}=r,c=O.computeConv3DInfo(l,i.shape,a,1,s),u=new MI(c);return e.runWebGLProgram(u,[o,i],"float32")}var Pae={kernelName:ag,backendName:"webgl",kernelFunc:APe};var RPe=Ka+`
  return cos(x);
`,OPe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Gs}
  return result;
`,FPe=dt({opSnippet:RPe,packedOpSnippet:OPe}),Bae={kernelName:Bc,backendName:"webgl",kernelFunc:FPe};var PPe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,BPe=dt({opSnippet:PPe}),Lae={kernelName:Lc,backendName:"webgl",kernelFunc:BPe};var DI=class{constructor(n,e,r,o,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,a,l,c]=n,[u]=e,[d,p]=r;this.outputShape=[u,d,p,c];let h=o==="bilinear"?1:0,[f,m]=[`${a-1}.0`,`${l-1}.0`],[g,v,w]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${f} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${f}`],[y,_,k]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${y});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${_};

        float in_y = ${w};
        if( in_y < 0.0 || in_y > ${f} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${k};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var LPe=t=>{let{inputs:n,backend:e,attrs:r}=t,{image:o,boxes:i,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=r,u=new DI(o.shape,i.shape,a,l,c);return e.runWebGLProgram(u,[o,i,s],"float32")},$ae={kernelName:cg,backendName:"webgl",kernelFunc:LPe};var gw=function(t){return t.Prod="*",t.Sum="+",t}(gw||{}),Yk=class{constructor(n,e,r,o){this.op=n,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,s=this.op===gw.Prod?"1.0":"0.0",a=r?s:`getX(${Vae(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1],c="",u="";r?(c=o?`end != ${l-1}`:"end != 0",u=o?"end + 1":"end - 1"):(c=o?`end + pow2 < ${l}`:"end >= pow2",u=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${zt(i)} coords = getOutputCoords();
        int end = ${jae(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${jae(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${Vae(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function Vae(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.x, ${n}.y`;if(t===3)return`${n}.x, ${n}.y, ${n}.z`;if(t===4)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function jae(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.y`;if(t===3)return`${n}.z`;if(t===4)return`${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function EI(t,n,e,r,o,i){let s=n.shape.length,a=O.getAxesPermutation([r],s),l=n;a!=null&&(l=ir({inputs:{x:n},backend:e,attrs:{perm:a}}));let c=O.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${r}`);let u=l.shape[c],d=Br({inputs:{x:l},backend:e});for(let p=0;p<=Math.ceil(Math.log2(u))-1;p++){let h=new Yk(t,l.shape,!1,i),f=[[p]],m=d;d=e.runWebGLProgram(h,[d],d.dtype,f),e.disposeIntermediateTensorInfo(m)}if(o){let p=new Yk(t,l.shape,o,i),h=d;d=e.runWebGLProgram(p,[d],d.dtype),e.disposeIntermediateTensorInfo(h)}if(a!=null){let p=O.getUndoAxesPermutation(a),h=ir({inputs:{x:d},backend:e,attrs:{perm:p}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(l),h}return d}function $Pe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;return EI(gw.Prod,o,e,i,s,a)}var zae={kernelName:lg,backendName:"webgl",kernelFunc:$Pe};function VPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;return EI(gw.Sum,o,e,i,s,a)}var Hae={kernelName:Rd,backendName:"webgl",kernelFunc:VPe};function jPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s,binaryOutput:a}=r;if(o.shape.length===1){let l=e.readSync(o.dataId),c=e.readSync(i.dataId),u=zE(l,c,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,u)}else if(o.shape.length===2){let l=e.bufferSync(o),c=e.bufferSync(i),u=Die(l,c,s,a);return e.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var Uae={kernelName:ug,backendName:"webgl",kernelFunc:jPe};var II=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${e};
      int offset_h = imod(h, ${e});
      int in_w = w / ${e};
      int offset_w = imod(w, ${e});
      int offset_d = (offset_h * ${e} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function zPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockSize:i,dataFormat:s}=r,a=o.shape[0],l=s==="NHWC"?o.shape[1]:o.shape[2],c=s==="NHWC"?o.shape[2]:o.shape[3],u=s==="NHWC"?o.shape[3]:o.shape[1],d=l*i,p=c*i,h=u/(i*i),f=s==="NHWC"?[a,d,p,h]:[a,h,d,p],m=new II(f,i,s);return e.runWebGLProgram(m,[o],o.dtype)}var Gae={kernelName:dg,backendName:"webgl",kernelFunc:zPe};var vw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=Nn(this.outputShape.length);let s=n.filterHeight,a=n.filterWidth,l=n.outChannels/n.inChannels,c="",u="";r&&(o?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");let d=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}};var ww=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=Nn(this.outputShape.length);let s=n.outChannels/n.inChannels,a=n.padInfo.left,l=n.strideWidth,c=n.dilationWidth,u=n.filterHeight,d=n.filterWidth,p=d,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(p+1)/2;v++){let w=v*2;if(h+=`
          xC = xCCorner + ${w*c};
          `,l===1){if(w<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }
              `,c===1&&w>0?h+=`
                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                  } else {
                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xC${w} = xTexelC${w};
                `,w+1<d)){let y=a%2===0?x.nearestLargerEven(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${y};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${w+1}.zw = vec2(0.0);
                    }
                    xTexelC${w+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                    } else {
                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                    }
                    `:h+=`
                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                    `):y===1?h+=`
                    xC${w+1} = xTexelC${w};
                    `:h+=`
                    xCOffset = xC + ${y};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${w+1}.zw = vec2(0.0);
                      }
                      xTexelC${w+1}Ready = 1;
                    }

                    xC${w+1} = xTexelC${w+1};
                    `}}else w<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.0);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
              `,w+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(
                  xTexelC${w}.xy, xTexelC${w+1}.xy);
              `,w+1<d&&(h+=`
                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                `)));w<d&&(h+=`
            wTexel = getW(r, ${w}, d1, q);
            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);
          `,w+1<d&&(h+=`
              wTexel = getW(r, ${w+1}, d1, q);
              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let f="",m="";r&&(o?f=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?f=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:f=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");let g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${f}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}};function HPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r,u=l;u==null&&(u=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(s,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let d=O.computeConv2DInfo(o.shape,i.shape,s,u,a,c,!0),p;ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new ww(d):p=new vw(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return e.runWebGLProgram(p,[o,i],"float32",h)}var Wae={kernelName:Od,backendName:"webgl",kernelFunc:HPe};var NI=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,r=n.strideWidth,o=n.padInfo.top,i=n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${o};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},AI=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=e-1-n.padInfo.top,a=r-1-n.padInfo.left,l=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function UPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=O.computeConv2DInfo(o.shape,u,s,a,l,c,!0),p=new NI(d);return e.runWebGLProgram(p,[o,i],"float32")}var qae={kernelName:pg,backendName:"webgl",kernelFunc:UPe};function GPe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=O.computeConv2DInfo(u,i.shape,s,a,l,c,!0),p=new AI(d);return e.runWebGLProgram(p,[o,i],"float32")}var Kae={kernelName:hg,backendName:"webgl",kernelFunc:GPe};var RI=class{constructor(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function WPe(t){let{inputs:n,backend:e}=t,{x:r}=n,o=[...r.shape,...r.shape],i=x.sizeFromShape(r.shape),s=Ne({inputs:{x:r},backend:e,attrs:{shape:[i]}}),a=new RI(i),l=e.runWebGLProgram(a,[s],s.dtype),c=Ne({inputs:{x:l},backend:e,attrs:{shape:o}});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(l),c}var Zae={kernelName:fg,backendName:"webgl",kernelFunc:WPe};var OI=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let{inHeight:e,inWidth:r,padInfo:o,strideHeight:i,strideWidth:s,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=n,{top:d,left:p}=o;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${e}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function qPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r,c=O.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",l),u,d=new OI(c);u=e.runWebGLProgram(d,[o,i],"float32");let p=Ne({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),p}var Xae={kernelName:Fd,backendName:"webgl",kernelFunc:qPe};function KPe(t){let{inputs:n,backend:e,attrs:r}=t,{equation:o}=r,i=n,{allDims:s,summedDims:a,idDims:l}=O.decodeEinsumEquation(o,i.length);O.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=O.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,f=[];for(let m=0;m<d;++m){for(let g of u[m]){let{permutationIndices:v,expandDims:w}=O.getEinsumPermutation(h,l[g]),y;O.isIdentityPermutation(v)?y=i[g]:(y=ir({inputs:{x:i[g]},backend:e,attrs:{perm:v}}),f.push(y));let _=y.shape.slice();for(let k=0;k<w.length;++k)_.splice(w[k],0,1);x.arraysEqual(y.shape,_)||(y=Ne({inputs:{x:y},backend:e,attrs:{shape:_}}),f.push(y)),p===null?p=y:(p=Zk({inputs:{a:y,b:p},backend:e}),f.push(p))}m<d-1&&(c[m]>=0&&(p=a2({inputs:{x:p},backend:e,attrs:{axis:c[m]-(s.length-h),keepDims:!1}}),f.push(p)),h--)}for(let m of f)m!==p&&e.disposeIntermediateTensorInfo(m);return p}var Yae={kernelName:mg,backendName:"webgl",kernelFunc:KPe};var ZPe="return (x >= 0.0) ? x : (exp(x) - 1.0);",XPe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,YPe=dt({opSnippet:ZPe,packedOpSnippet:XPe}),Qae={kernelName:Vc,backendName:"webgl",kernelFunc:YPe};var QPe="return (b >= 0.0) ? a : a * (b + 1.0);",JPe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,eBe=t=>{let{inputs:n,backend:e}=t,{dy:r,y:o}=n,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Us(JPe,r.shape,o.shape):new ms(QPe,r.shape,o.shape);return e.runWebGLProgram(i,[r,o],r.dtype)},Jae={kernelName:gg,backendName:"webgl",kernelFunc:eBe};var tBe=`
  return vec4(equal(a, b));
`,nBe="return float(a == b);",rBe=Sn({opSnippet:nBe,packedOpSnippet:tBe,dtype:"bool",cpuKernelImpl:Rie}),ele={kernelName:Oh,backendName:"webgl",kernelFunc:rBe};var oBe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${O.ERF_P};
  float a1 = ${O.ERF_A1};
  float a2 = ${O.ERF_A2};
  float a3 = ${O.ERF_A3};
  float a4 = ${O.ERF_A4};
  float a5 = ${O.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,iBe=dt({opSnippet:oBe}),tle={kernelName:jc,backendName:"webgl",kernelFunc:iBe};var sBe=Ka+`
  return exp(x);
`,aBe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,d$=dt({opSnippet:sBe,packedOpSnippet:aBe,cpuKernelImpl:Oie,dtype:"float32"}),nle={kernelName:zc,backendName:"webgl",kernelFunc:d$};function FI(t){let{inputs:n,attrs:e,backend:r}=t,{dim:o}=e,{input:i}=n,s=i.shape.length,a=i.shape.slice(),l=o;return o<0&&(x.assert(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+o+1),a.splice(l,0,1),Ne({inputs:{x:i},backend:r,attrs:{shape:a}})}var rle={kernelName:Pd,backendName:"webgl",kernelFunc:FI};var ole="return exp(x) - 1.0;",lBe=dt({opSnippet:ole,packedOpSnippet:ole,cpuKernelImpl:Fie}),ile={kernelName:Hc,backendName:"webgl",kernelFunc:lBe};var Qk=class{constructor(n,e,r){this.variableNames=["real","imag"];let o=e[1];this.outputShape=e;let i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${o}.0`:"1.0",a;if(n==="real")a="return real * expR - imag * expI;";else if(n==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${n}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function PI(t,n,e){let r=e.texData.get(t.dataId),o=x.sizeFromShape(t.shape),i=t.shape[t.shape.length-1],s=o/i,a=Ne({inputs:{x:t},backend:e,attrs:{shape:[s,i]}}),l=a.shape,c=new Qk("real",l,n),u=new Qk("imag",l,n),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),f=gs({inputs:{real:p,imag:h},backend:e});e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h);let m=Ne({inputs:{x:f},backend:e,attrs:{shape:t.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(f),m}function cBe(t){let{inputs:n,backend:e}=t,{input:r}=n;return PI(r,!1,e)}var sle={kernelName:vg,backendName:"webgl",kernelFunc:cBe};var BI=class{constructor(n,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function Zp(t){let{backend:n,attrs:e}=t,{shape:r,value:o}=e,{dtype:i}=e;if(i=i||x.inferDtype(o),i==="string"){let s=x.getArrayFromDType(i,x.sizeFromShape(r));return s.fill(o),n.makeTensorInfo(r,i,s)}else{let s=new BI(r,o),a=[[o]];return n.runWebGLProgram(s,[],i,a)}}var ale={kernelName:wg,backendName:"webgl",kernelFunc:Zp};var LI=class{constructor(n){this.variableNames=["Image"],this.outputShape=[];let e=n[2];this.outputShape=n,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${e} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${e}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var lle={kernelName:yg,backendName:"webgl",kernelFunc:({inputs:t,backend:n})=>{let{image:e}=t,r=n,o=new LI(e.shape);return r.runWebGLProgram(o,[e],e.dtype)}};var cle="return floor(x);",uBe=dt({opSnippet:cle,packedOpSnippet:cle,cpuKernelImpl:Pie}),ule={kernelName:Uc,backendName:"webgl",kernelFunc:uBe};var dBe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,pBe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,hBe=Sn({opSnippet:dBe,packedOpSnippet:pBe,dtype:"int32"}),dle={kernelName:Gc,backendName:"webgl",kernelFunc:hBe};var $I=class{constructor(n){this.variableNames=["A"];let e=xr(),[r,o]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${e.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var VI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let e=xr(),[r,o]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${e.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${e.output} = result;
      }
    `}};var ple={kernelName:X1,backendName:"webgl",kernelFunc:fBe},yw,p$=ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function fBe(t){let{inputs:n,backend:e,attrs:r}=t,{pixels:o}=n,{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,c]=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[c,l],d=[c,l,i];if(a||s){let m=ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(yw==null||m!==p$)&&(p$=m,yw=document.createElement("canvas").getContext("2d",{willReadFrequently:p$})),yw.canvas.width=l,yw.canvas.height=c,yw.drawImage(o,0,0,l,c),o=yw.canvas}let p=e.makeTensorInfo(u,"int32");e.texData.get(p.dataId).usage=Di.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(p.dataId),o);let h=ee().getBool("WEBGL_PACK")?new VI(d):new $I(d),f=e.runWebGLProgram(h,[p],"int32");return e.disposeData(p.dataId),f}function mBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=O.convertConv2DDataFormat(u),g=O.computeConv2DInfo(o.shape,i.shape,l,d,c,p,!1,m),v,w=[],y=s!=null,_=a!=null,k=h==="leakyrelu",T=()=>{let A=[o,i],P=(N,B)=>{if(B==="NCHW"&&N.shape.length===1&&N.shape[0]!==1){let S=Ne({inputs:{x:N},backend:e,attrs:{shape:[N.shape[0],1,1]}});return w.push(S),S}return N};if(y&&A.push(P(s,u)),_&&A.push(P(a,u)),k){let N=e.makeTensorInfo([],"float32",x.createScalarValue(f,"float32"));A.push(N),w.push(N)}return A};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))v=_I({x:o,filter:i,convInfo:g,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:f});else if(g.strideWidth<=2&&m==="channelsLast"&&ee().getBool("WEBGL_EXP_CONV")){let A=h?qp(h,!0):null,P=new mw(g,y,A,_,k),N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],B=T();v=e.runWebGLProgram(P,B,"float32",N)}else if(ee().getBool("WEBGL_CONV_IM2COL"))v=kI({x:o,filter:i,convInfo:g,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:f});else{let A=h?qp(h,!1):null,P=new fw(g,y,A,_,k),N=T();v=e.runWebGLProgram(P,N,"float32")}let I=Ne({inputs:{x:v},backend:e,attrs:{shape:g.outShape}});return w.push(v),w.forEach(A=>e.disposeIntermediateTensorInfo(A)),I}var hle={kernelName:Uh,backendName:"webgl",kernelFunc:mBe};function gBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=r,f=[],m=u;m==null&&(m=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let g=O.computeConv2DInfo(o.shape,i.shape,l,m,c,d,!0),v=ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,w=p?qp(p,v):null,y=[o,i],_=s!=null,k=a!=null,T=p==="leakyrelu";if(_&&y.push(s),k&&y.push(a),T){let N=e.makeTensorInfo([],"float32",x.createScalarValue(h,"float32"));y.push(N),f.push(N)}let I;v?I=new ww(g,_,w,k,T):I=new vw(g,_,w,k,T);let A=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],P=e.runWebGLProgram(I,y,"float32",A);return f.forEach(N=>e.disposeIntermediateTensorInfo(N)),P}var fle={kernelName:Gh,backendName:"webgl",kernelFunc:gBe};var jI=class{constructor(n,e,r,o){this.sliceDim=n,this.strides=e,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;let i=zt(r.length),s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function vBe(t){let{inputs:n,backend:e}=t,{params:r,indices:o}=n,i=o.shape,s=i[i.length-1],a=x.sizeFromShape(r.shape),[l,c,u,d]=O.prepareAndValidate(r,o),p=Ne({inputs:{x:o},backend:e,attrs:{shape:[c,s]}}),h=Ne({inputs:{x:r},backend:e,attrs:{shape:[x.sizeFromShape(r.shape)/u,u]}});if(e.shouldExecuteOnCPU([r,o])||r.dtype==="string"){let v=e.readSync(o.dataId),w=e.bufferSync(r),y=Bie(v,w,r.dtype,c,s,u,d,r.shape,a);return e.makeTensorInfo(l,r.dtype,y.values)}let f=new jI(s,d,[c,u],r.shape),m=e.runWebGLProgram(f,[h,p],h.dtype),g=Ne({inputs:{x:m},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),g}var mle={kernelName:xg,backendName:"webgl",kernelFunc:vBe};var zI=class{constructor(n,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;let r=zt(this.rank),o=wBe(n,2);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${n[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}};function wBe(t,n){let e=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<t.length;o++)o===2?r.push("index"):r.push(`${e[o]}`);return r.join()}function h$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,indices:i}=n,{axis:s,batchDims:a}=r,l=x.parseAxisParam(s,o.shape)[0];if(ee().get("DEBUG")){let w=e.readSync(i.dataId),y=o.shape[l];for(let _=0;_<w.length;++_){let k=w[_];x.assert(k<=y-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${y-1}]`)}}let c=O.segment_util.collectGatherOpShapeInfo(o,i,l,a),u=x.sizeFromShape(i.shape),d=[],p=Ne({inputs:{x:o},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=Ne({inputs:{x:i},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(p),d.push(h);let f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let w=e.bufferSync(h),y=e.bufferSync(p),_=Lie(y,w,f);return d.forEach(k=>e.disposeIntermediateTensorInfo(k)),e.makeTensorInfo(c.outputShape,_.dtype,_.values)}let m=new zI(p.shape,f),g=e.runWebGLProgram(m,[p,h],p.dtype);d.push(g);let v=Ne({inputs:{x:g},backend:e,attrs:{shape:c.outputShape}});return d.forEach(w=>e.disposeIntermediateTensorInfo(w)),v}var gle={kernelName:Ld,backendName:"webgl",kernelFunc:h$};var yBe="return float(a > b);",xBe=`
  return vec4(greaterThan(a, b));
`,_Be=Sn({opSnippet:yBe,packedOpSnippet:xBe,cpuKernelImpl:$ie,dtype:"bool"}),vle={kernelName:Fh,backendName:"webgl",kernelFunc:_Be};var kBe="return float(a >= b);",bBe=`
  return vec4(greaterThanEqual(a, b));
`,CBe=Sn({opSnippet:kBe,packedOpSnippet:bBe,dtype:"bool",cpuKernelImpl:Vie}),wle={kernelName:Wc,backendName:"webgl",kernelFunc:CBe};function SBe(t){let{inputs:n,backend:e}=t,{input:r}=n;return PI(r,!0,e)}var yle={kernelName:_g,backendName:"webgl",kernelFunc:SBe};var MBe="return float(!isnan(x) && !isinf(x));",TBe=dt({opSnippet:MBe,dtype:"bool"}),xle={kernelName:qc,backendName:"webgl",kernelFunc:TBe};var DBe="return float(isinf(x));",EBe=dt({opSnippet:DBe,dtype:"bool"}),_le={kernelName:Kc,backendName:"webgl",kernelFunc:EBe};var IBe="return float(isnan(x));",NBe=dt({opSnippet:IBe,dtype:"bool"}),kle={kernelName:Zc,backendName:"webgl",kernelFunc:NBe};var ABe="return float(a < b);",RBe=`
  return vec4(lessThan(a, b));
`,OBe=Sn({opSnippet:ABe,packedOpSnippet:RBe,cpuKernelImpl:jie,dtype:"bool"}),ble={kernelName:Ph,backendName:"webgl",kernelFunc:OBe};var FBe="return float(a <= b);",PBe=`
  return vec4(lessThanEqual(a, b));
`,BBe=Sn({opSnippet:FBe,packedOpSnippet:PBe,cpuKernelImpl:zie,dtype:"bool"}),Cle={kernelName:Bh,backendName:"webgl",kernelFunc:BBe};function LBe(t){let{backend:n,attrs:e}=t,{start:r,stop:o,num:i}=e,s=Hie(r,o,i);return n.makeTensorInfo([s.length],"float32",s)}var Sle={kernelName:bg,backendName:"webgl",kernelFunc:LBe};var $Be=Ka+`
  return x < 0.0 ? 0./0. : log(x);
`,VBe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,jBe=dt({opSnippet:$Be,packedOpSnippet:VBe,cpuKernelImpl:Uie}),Mle={kernelName:Xc,backendName:"webgl",kernelFunc:jBe};var zBe=Ka+`
  return log(1.0 + x);
`,HBe=dt({opSnippet:zBe}),Tle={kernelName:Yc,backendName:"webgl",kernelFunc:HBe};var UBe="return float(a >= 1.0 && b >= 1.0);",GBe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,WBe=Sn({opSnippet:UBe,packedOpSnippet:GBe,dtype:"bool"}),Dle={kernelName:Lh,backendName:"webgl",kernelFunc:WBe};var qBe="return float(!(x >= 1.0));",KBe=dt({opSnippet:qBe}),Ele={kernelName:$h,backendName:"webgl",kernelFunc:KBe};var ZBe="return float(a >= 1.0 || b >= 1.0);",XBe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,YBe=Sn({opSnippet:ZBe,packedOpSnippet:XBe,dtype:"bool"}),Ile={kernelName:Vh,backendName:"webgl",kernelFunc:YBe};var HI=class{constructor(n,e,r,o,i){this.variableNames=["x"],this.outputShape=[];let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${r}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}};var UI=class{constructor(n,e,r,o,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${r}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}};var QBe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{depthRadius:i,bias:s,alpha:a,beta:l}=r,c=ee().getBool("WEBGL_PACK_NORMALIZATION")?new UI(o.shape,i,s,a,l):new HI(o.shape,i,s,a,l);return e.runWebGLProgram(c,[o],o.dtype)},Nle={kernelName:Vd,backendName:"webgl",kernelFunc:QBe};var GI=class{constructor(n,e,r,o,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=r,this.alpha=o,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${e})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${e} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var JBe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o,y:i,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new GI(o.shape,a,l,c,u);return e.runWebGLProgram(d,[o,i,s],o.dtype)},Ale={kernelName:Cg,backendName:"webgl",kernelFunc:JBe};function Rle(t,n,e,r){let o=x.sizeFromShape(n),s=x.sizeFromShape(t.shape)/o,a=Ne({inputs:{x:t},attrs:{shape:[s,o]},backend:r}),l=Ws(a,t.dtype,"max",r),c=Ne({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}function f$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reductionIndices:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=u!=null,p=e.shouldExecuteOnCPU([o]),h=o;if(d){if(p){let y=e.texData.get(h.dataId).values,_=new Array(a);for(let I=0;I<_.length;I++)_[I]=o.shape[u[I]];let k=s2(y,o.shape,o.dtype,u,_);h=e.makeTensorInfo(_,o.dtype);let T=e.texData.get(h.dataId);T.values=k}else h=Cf(o,u,e);c=O.getInnerMostAxes(c.length,a)}O.assertAxesAreInnerMostDims("max",c,a);let[f,m]=O.computeOutAndReduceShapes(h.shape,c),g=f;s&&(g=O.expandShapeToKeepDim(f,l));let v;if(p){let y=e.texData.get(h.dataId).values,_=Gie(y,x.sizeFromShape(m),g,o.dtype);v=e.makeTensorInfo(g,o.dtype);let k=e.texData.get(v.dataId);k.values=_}else v=Rle(h,m,g,e);return d&&e.disposeIntermediateTensorInfo(h),v}var Ole={kernelName:jd,backendName:"webgl",kernelFunc:f$};var eLe=dw+`
  return max(a, b);
`,tLe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gs+`
  return result;
`,nLe=Sn({opSnippet:eLe,packedOpSnippet:tLe,cpuKernelImpl:Wie}),Fle={kernelName:Qc,backendName:"webgl",kernelFunc:nLe};function rLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;ql(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))return Br({inputs:{x:o},backend:e});let d=new Zl(u,"max",!1);return e.runWebGLProgram(d,[o],o.dtype)}var Ple={kernelName:zd,backendName:"webgl",kernelFunc:rLe};function oLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=O.computePool3DInfo(o.shape,i,s,u,a,c,l),p=new Sf(d,"max",!1);return e.runWebGLProgram(p,[o],o.dtype)}var Ble={kernelName:Hd,backendName:"webgl",kernelFunc:oLe};var WI=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideHeight,r=n.strideWidth,o=n.dilationHeight,i=n.effectiveFilterHeight,s=n.effectiveFilterWidth,a=i-1-n.padInfo.top,l=s-1-n.padInfo.left,c=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${e}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},qI=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideDepth,r=n.strideHeight,o=n.strideWidth,i=n.dilationDepth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,d=l-1-n.padInfo.front,p=c-1-n.padInfo.top,h=u-1-n.padInfo.left,f=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${e}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${f} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function iLe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],p=O.computePool3DInfo(s.shape,a,l,d,c,u),h=new Sf(p,"max",!0),f=e.runWebGLProgram(h,[s],s.dtype),m=new qI(p),g=e.runWebGLProgram(m,[o,f],s.dtype);return e.disposeIntermediateTensorInfo(f),g}var Lle={kernelName:Mg,backendName:"webgl",kernelFunc:iLe};function sLe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i,output:s}=n,a=i;ql([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=O.computePool2DInfo(a.shape,l,c,1,u,d),h=!0,f=new Zl(p,"max",h),m=e.runWebGLProgram(f,[a],a.dtype),g=new WI(p),v=e.runWebGLProgram(g,[o,m],a.dtype);return e.disposeIntermediateTensorInfo(m),v}var $le={kernelName:Sg,backendName:"webgl",kernelFunc:sLe};function Vle(t,n,e,r){let o=new Zl(e,"max",!1),i=r.runWebGLProgram(o,[t],"float32");o=new Zl(e,"max",!0,!0,n);let s=r.runWebGLProgram(o,[t],"float32");return[i,s]}var jle={kernelName:Tg,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=n,l=e;x.assert(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let c=[1,1];x.assert(O.eitherStridesOrDilationsAreOne(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let u=O.computePool2DInfo(r.shape,o,i,c,s),[d,p]=Vle(r,a,u,l);return[d,p]}};function zle(t,n,e,r){let o=x.sizeFromShape(n),s=x.sizeFromShape(t.shape)/o,a=Ne({inputs:{x:t},attrs:{shape:[s,o]},backend:r}),l=Ws(a,"float32","mean",r),c=Ne({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}var Hle={kernelName:Ud,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{keepDims:o,axis:i}=n,s=e,a=r.shape.length,l=x.parseAxisParam(i,r.shape),c=l,u=O.getAxesPermutation(c,a),d=u!=null,p=s.shouldExecuteOnCPU([r]),h=[],f=r;if(d){if(p){let _=s.texData.get(f.dataId).values,k=new Array(a);for(let A=0;A<k.length;A++)k[A]=r.shape[u[A]];let T=s2(_,r.shape,r.dtype,u,k);f=s.makeTensorInfo(k,r.dtype);let I=s.texData.get(f.dataId);I.values=T}else f=Cf(r,u,s);h.push(f),c=O.getInnerMostAxes(c.length,a)}O.assertAxesAreInnerMostDims("sum",c,a);let[m,g]=O.computeOutAndReduceShapes(f.shape,c),v=m;o&&(v=O.expandShapeToKeepDim(m,l));let w=zle(f,g,v,s);for(let y of h)s.disposeIntermediateTensorInfo(y);return w}};function aLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=ir({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,o.shape.length)),O.assertAxesAreInnerMostDims("min",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=Ne({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Ws(m,m.dtype,"min",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=Ne({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=Ne({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var Ule={kernelName:Gd,backendName:"webgl",kernelFunc:aLe};var lLe=dw+`
  return min(a, b);
`,cLe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gs+`
  return result;
`,uLe=Sn({opSnippet:lLe,packedOpSnippet:cLe,cpuKernelImpl:qie}),Gle={kernelName:Jc,backendName:"webgl",kernelFunc:uLe};var KI=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=e.map((u,d)=>u[0]+n[d]+u[1]);let o=n.length,i=zt(o),s=e.map(u=>u[0]).join(","),a=e.map((u,d)=>u[0]+n[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}};var ZI=class{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((f,m)=>f[0]+n[m]+f[1]);let o=n.length,i=zt(o),s=e.map(f=>f[0]).join(","),a=e.map((f,m)=>f[0]+n[m]).join(","),l=Pr("rc",o),c=Pr("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1,h="";if(o===1){let f=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${f}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${f}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let f=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${f}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${f}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${f}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[o-1]} += 1;
          if(${u}) {
            ${f}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var dLe=({inputs:t,backend:n,attrs:e})=>{let{x:r}=t,{paddings:o,mode:i}=e,s=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZI(r.shape,o,i):new KI(r.shape,o,i);return n.runWebGLProgram(s,[r],r.dtype)},Wle={kernelName:Wd,backendName:"webgl",kernelFunc:dLe};var pLe=`if (b == 0.0) return NAN;
  return mod(a, b);`,hLe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Gs+`
  return result;
`,fLe=Sn({opSnippet:pLe,packedOpSnippet:hLe}),qle={kernelName:eu,backendName:"webgl",kernelFunc:fLe};var XI=class{constructor(n,e,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${e-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${e-1}));
      }
    `}};var mLe=`
if (a == b) {
  return 1.0;
};
return a / b;`,gLe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,m$=Sn({opSnippet:mLe,packedOpSnippet:gLe,checkOutOfBounds:!0}),Kle={kernelName:$c,backendName:"webgl",kernelFunc:m$};var Zle="return a - b;",g$=Sn({opSnippet:Zle,packedOpSnippet:Zle,supportsComplex:!0,cpuKernelImpl:fse}),Xle={kernelName:gu,backendName:"webgl",kernelFunc:g$};function v$(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{dim:i}=r,s=x.parseAxisParam([i],o.shape),a=f$({inputs:{x:o},backend:e,attrs:{reductionIndices:s,keepDims:!1}}),l=O.expandShapeToKeepDim(a.shape,s),c=Ne({inputs:{x:a},backend:e,attrs:{shape:l}}),u=g$({inputs:{a:o,b:c},backend:e}),d=d$({inputs:{x:u},backend:e}),p=a2({inputs:{x:d},backend:e,attrs:{axis:s,keepDims:!1}}),h=Ne({inputs:{x:p},backend:e,attrs:{shape:l}}),f=m$({inputs:{a:d,b:h},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),f}var Yle={kernelName:cp,backendName:"webgl",kernelFunc:v$};function vLe(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{numSamples:i,seed:s,normalized:a}=r,l=a?o:v$({inputs:{logits:o},backend:e,attrs:{dim:o.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new XI(c,u,i),p=[[s]],h=e.runWebGLProgram(d,[l],"int32",p);return a||e.disposeIntermediateTensorInfo(l),h}var Qle={kernelName:Dg,backendName:"webgl",kernelFunc:vLe};var wLe=uo+`
  return -x;
`,yLe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function xLe(t){let{inputs:n,backend:e}=t,{x:r}=n;if(e.shouldExecuteOnCPU([r])){let i=e.texData.get(r.dataId),[s,a]=Zie(i.values,r.shape,r.dtype);return e.makeTensorInfo(a,r.dtype,s)}let o;return ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new fs(r.shape,yLe):o=new ti(r.shape,wLe),e.runWebGLProgram(o,[r],r.dtype)}var Jle={kernelName:qd,backendName:"webgl",kernelFunc:xLe};var _Le=Jo.nonMaxSuppressionV3Impl;function kLe(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r,c=e.readSync(o.dataId),u=e.readSync(i.dataId),{selectedIndices:d}=_Le(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var ece={kernelName:Eg,backendName:"webgl",kernelFunc:kLe};var bLe=Jo.nonMaxSuppressionV4Impl;function CLe(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=e.readSync(o.dataId),d=e.readSync(i.dataId),{selectedIndices:p,validOutputs:h}=bLe(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var tce={kernelName:Ig,backendName:"webgl",kernelFunc:CLe};var SLe=Jo.nonMaxSuppressionV5Impl;function MLe(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=e.readSync(o.dataId),d=e.readSync(i.dataId),p=s,h=a,f=l,m=c,{selectedIndices:g,selectedScores:v}=SLe(u,d,p,h,f,m);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var nce={kernelName:Ng,backendName:"webgl",kernelFunc:MLe};var YI=class{constructor(n,e,r,o){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}};var TLe=t=>{let{inputs:n,backend:e,attrs:r}=t,{indices:o}=n,{dtype:i,depth:s,onValue:a,offValue:l}=r,c=x.sizeFromShape(o.shape),u=new YI(c,s,a,l),d=Ne({inputs:{x:o},backend:e,attrs:{shape:[c]}}),p=e.runWebGLProgram(u,[d],i);e.disposeIntermediateTensorInfo(d);let h=[...o.shape,s],f=Ne({inputs:{x:p},backend:e,attrs:{shape:h}});return e.disposeIntermediateTensorInfo(p),f},rce={kernelName:Zd,backendName:"webgl",kernelFunc:TLe};function Jk(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="complex64"){let o=Kp({inputs:{input:r},backend:e}),i=Jk({inputs:{x:o},backend:e}),s=c2({inputs:{input:r},backend:e}),a=Jk({inputs:{x:s},backend:e}),l=gs({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return Zp({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:e})}var oce={kernelName:pp,backendName:"webgl",kernelFunc:Jk};function ice(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let o=Kp({inputs:{input:r},backend:e}),i=ice({inputs:{x:o},backend:e}),s=c2({inputs:{input:r},backend:e}),a=Jk({inputs:{x:s},backend:e}),l=gs({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return Zp({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:e})}var sce={kernelName:Kd,backendName:"webgl",kernelFunc:ice};function DLe(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r;if(n.length===1)return FI({inputs:{input:n[0]},backend:e,attrs:{dim:o}});let i=n[0].shape,s=n[0].dtype;n.forEach(u=>{x.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),x.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=FI({inputs:{input:u},backend:e,attrs:{dim:o}});return a.push(d),d}),c=u$({inputs:l,backend:e,attrs:{axis:o}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var ace={kernelName:Xd,backendName:"webgl",kernelFunc:DLe};var QI=class{constructor(n,e,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+n[u]+c[1]);let o=n.length,i=zt(o),s=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+n[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}};var JI=class{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((m,g)=>m[0]+n[g]+m[1]);let o=n.length,i=zt(o),s=e.map(m=>m[0]).join(","),a=e.map((m,g)=>m[0]+n[g]).join(","),l=Pr("rc",o),c=Pr("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${u}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${u}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="";for(let m=0,g=o===1?2:4;m<g;m++)f+=`
        ${p[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${d});
        }
      `;f+=o===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}};var w$=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,constantValue:s}=r;if(x.sizeFromShape(o.shape)===0){let c=i.map((u,d)=>u[0]+o.shape[d]+u[1]);return Zp({backend:e,attrs:{shape:c,value:s,dtype:o.dtype}})}let a=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JI(o.shape,i,s):new QI(o.shape,i,s),l=[[s]];return e.runWebGLProgram(a,[o],o.dtype,l)},lce={kernelName:Yd,backendName:"webgl",kernelFunc:w$};var ELe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,ILe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Gs+`
  return result;
`,NLe=Sn({opSnippet:ELe,packedOpSnippet:ILe}),cce={kernelName:nu,backendName:"webgl",kernelFunc:NLe};function ALe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=[],c=x.parseAxisParam(i,o.shape),u=c,d=O.getAxesPermutation(u,a),p=o;d!=null&&(p=ir({inputs:{x:o},backend:e,attrs:{perm:d}}),u=O.getInnerMostAxes(u.length,a),l.push(p)),O.assertAxesAreInnerMostDims("prod",u,a);let h;if(e.shouldExecuteOnCPU([p])){let f=e.texData.get(p.dataId).values,{outVals:m,outShape:g,outDtype:v}=Yie(p.shape,p.dtype,f,u);h=e.makeTensorInfo(g,v,m)}else{let[f,m]=O.computeOutAndReduceShapes(p.shape,u),g=x.sizeFromShape(m),v=Ne({inputs:{x:p},backend:e,attrs:{shape:[-1,g]}}),w=Kh(o.dtype),y=Ws(v,w,"prod",e);h=Ne({inputs:{x:y},backend:e,attrs:{shape:f}}),l.push(v),l.push(y)}if(s){l.push(h);let f=O.expandShapeToKeepDim(h.shape,c);h=Ne({inputs:{x:h},backend:e,attrs:{shape:f}})}return l.forEach(f=>e.disposeIntermediateTensorInfo(f)),h}var uce={kernelName:Jd,backendName:"webgl",kernelFunc:ALe};function RLe(t){let{inputs:n,backend:e,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=n,{outputRaggedRank:a}=r,l=o.map(v=>e.readSync(v.dataId)),c=o.map(v=>v.shape),u=e.readSync(i.dataId),d=e.readSync(s.dataId),[p,h,f]=Qie(l,c,u,i.shape,i.dtype,d,s.shape,a),m=p.map(v=>e.makeTensorInfo([v.length],"int32",v)),g=e.makeTensorInfo(f,i.dtype,h);return m.concat([g])}var dce={kernelName:Ag,backendName:"webgl",kernelFunc:RLe};function OLe(t){let{inputs:n,backend:e}=t,{starts:r,limits:o,deltas:i}=n,s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=Jie(s,r.shape,r.dtype,a,o.shape,l,i.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],r.dtype,u);return[d,p]}var pce={kernelName:Rg,backendName:"webgl",kernelFunc:OLe};function FLe(t){let{inputs:n,backend:e,attrs:r}=t,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=r,c=e.readSync(o.dataId),u=e.readSync(i.dataId),d=e.readSync(s.dataId),p=a.map(g=>e.readSync(g.dataId)),h=a.map(g=>g.shape),[f,m]=ese(c,o.shape,u,i.shape,i.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(f,i.dtype,m)}var hce={kernelName:Og,backendName:"webgl",kernelFunc:FLe};var y$=t=>{let{backend:n,attrs:e}=t,{start:r,stop:o,step:i,dtype:s}=e,a=tse(r,o,i,s);return n.makeTensorInfo([a.length],s,a)},fce={kernelName:Fg,backendName:"webgl",kernelFunc:y$};var PLe="return 1.0 / x;",BLe=dt({opSnippet:PLe}),mce={kernelName:ru,backendName:"webgl",kernelFunc:BLe};var LLe=uo+`
  return (x < 0.0) ? 0.0 : x;
`,$Le=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VLe=dt({opSnippet:LLe,packedOpSnippet:$Le}),gce={kernelName:ou,backendName:"webgl",kernelFunc:VLe};var jLe=uo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,zLe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,HLe=dt({opSnippet:jLe,packedOpSnippet:zLe}),vce={kernelName:iu,backendName:"webgl",kernelFunc:HLe};var e3=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var t3=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function ULe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r,[l,c]=a,u=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new t3(o.shape,l,c,i,s):new e3(o.shape,l,c,i,s);return e.runWebGLProgram(u,[o],"float32")}var wce={kernelName:np,backendName:"webgl",kernelFunc:ULe};var n3=class{constructor(n,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,o,i]=e,[,s,a]=n,l=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,f=Math.ceil(p)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${f});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function GLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r,a=new n3(i.shape,o.shape,s);return e.runWebGLProgram(a,[i],i.dtype)}var yce={kernelName:Lg,backendName:"webgl",kernelFunc:GLe};var r3=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p=o?"0.5":"0.0",h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var o3=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p=o?"0.5":"0.0",h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function WLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r,[l,c]=a,u=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new o3(o.shape,l,c,i,s):new r3(o.shape,l,c,i,s);return e.runWebGLProgram(u,[o],o.dtype)}var xce={kernelName:tp,backendName:"webgl",kernelFunc:WLe};var i3=class{constructor(n,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,o,i]=e,[,s,a]=n,l=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,f=Math.ceil(p)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${f});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function qLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r,a=new i3(i.shape,o.shape,s);return e.runWebGLProgram(a,[i],i.dtype)}var _ce={kernelName:Bg,backendName:"webgl",kernelFunc:qLe};var s3=class{constructor(n,e){this.variableNames=["x"];let r=n.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=n,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${n[0]} - coord - 1));
        }
      `;return}let o=a=>e.indexOf(a)!==-1&&n[a]!==1?`${n[a]} - coords[${a}] - 1`:`coords[${a}]`,i=n.map((a,l)=>o(l)).join(","),s=zt(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}};var a3=class{constructor(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let r=n.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=n;let o=Pr("rc",r),i=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=zt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${n[0]} - rc - 1),
            ${n[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),
                ${n[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${i}){
            result.g = ${c(o.slice())};
          }
          if(${s}) {
            result.b = ${u(o.slice())};
            if(${i}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(f){return p(f)}function c(f){return f[r-1]="("+f[r-1]+" + 1)",p(f)}function u(f){return f[r-2]="("+f[r-2]+" + 1)",p(f)}function d(f){return f[r-1]="("+f[r-1]+" + 1)",f[r-2]="("+f[r-2]+" + 1)",p(f)}function p(f){let m=n.map((w,y)=>h(y,f)),g=m.join(","),v=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${v}))`}function h(f,m){return e.indexOf(f)!==-1&&n[f]!==1?`${n[f]} - ${m[f]} - 1`:`${m[f]}`}}};function KLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dims:i}=r,s=o.shape.length,a=x.parseAxisParam(i,o.shape);if(s===0)return Br({inputs:{x:o},backend:e});let l=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a3(o.shape,a):new s3(o.shape,a);return e.runWebGLProgram(l,[o],o.dtype)}var kce={kernelName:rp,backendName:"webgl",kernelFunc:KLe};var l3=class{constructor(n,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let r=n[1],o=n[2];this.outputShape=n;let i="";typeof e=="number"?i=`float outputValue = ${e.toFixed(2)};`:i=`
        vec3 fill = vec3(${e.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var bce={kernelName:t0,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,{radians:o,fillValue:i,center:s}=n,a=e,l=new l3(r.shape,i),[c,u]=O.getImageCenter(s,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};var ZLe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,XLe=dt({opSnippet:ZLe}),Cce={kernelName:su,backendName:"webgl",kernelFunc:XLe};var YLe="return inversesqrt(x);",QLe=dt({opSnippet:YLe,cpuKernelImpl:nse}),Sce={kernelName:au,backendName:"webgl",kernelFunc:QLe};var Mf=class{constructor(n,e,r,o,i,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let c=zt(i.length),u=zt(s.length),d="";r===1?d="i":r===2&&(d="i, j");let p=`getIndices(${d})`,h="";o===1?h="i":o===2&&(h="i, coords[1]");let f=`getUpdates(${h})`,m="";l&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,v=e>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${n}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${e}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}};var c3=class{constructor(n,e,r,o,i,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;let c=zt(i.length),u=zt(s.length),d="";r===1?d="i":r===2&&(d="i, j");let p=`getIndices(${d})`,h="";o===1?h="i":o===2&&(h="i, coords[1]");let f=`getUpdates(${h})`,m="";l&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,v=e>1?"strides[j]":"strides",w=e>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${n}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${e}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${e}) {
                flattenedIndex += index.yw * ${w};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${f};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}};function JLe(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o,updates:i}=n,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(i,o,s),p=[d/c,c];if(d===0)return e.makeTensorInfo(s,o.dtype);let h=Ne({inputs:{x:o},backend:e,attrs:{shape:[l,a]}}),f=Ne({inputs:{x:i},backend:e,attrs:{shape:[l,c]}}),m=e.makeTensorInfo([],"float32",new Float32Array([0])),g;ee().getBool("WEBGL_PACK")?g=new c3(l,a,h.shape.length,f.shape.length,u,p):g=new Mf(l,a,h.shape.length,f.shape.length,u,p);let v=e.runWebGLProgram(g,[f,h,m],f.dtype),w=Ne({inputs:{x:v},backend:e,attrs:{shape:s}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(m),w}var Mce={kernelName:$g,backendName:"webgl",kernelFunc:JLe};var u3=class{constructor(n,e,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[n,r];let i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=ee().getNumber("WEBGL_VERSION")===2?i:s,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function e7e(t){let{inputs:n,backend:e,attrs:r}=t,{sortedSequence:o,values:i}=n,{side:s}=r,a=new u3(o.shape[0],o.shape[1],i.shape[1],s),l=[[o.shape[1]]];return e.runWebGLProgram(a,[o,i],"int32",l)}var Tce={kernelName:jg,backendName:"webgl",kernelFunc:e7e};var d3=class{constructor(n,e,r){this.variableNames=["c","a","b"],this.outputShape=e;let o,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",o="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<n&&l.push(`${a[u]}`);o=l.join(),i=c.join()}let s=zt(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}};function t7e(t){let{inputs:n,backend:e}=t,{condition:r,t:o,e:i}=n,s=new d3(r.shape.length,o.shape,o.shape.length);return e.runWebGLProgram(s,[r,o,i],Ur(o.dtype,i.dtype))}var Dce={kernelName:op,backendName:"webgl",kernelFunc:t7e};var n7e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${O.SELU_SCALEALPHA};
  float scale = ${O.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,r7e=dt({opSnippet:n7e}),Ece={kernelName:lu,backendName:"webgl",kernelFunc:r7e};var o7e=Ka+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,i7e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,s7e=dt({opSnippet:o7e,packedOpSnippet:i7e,cpuKernelImpl:ose}),Ice={kernelName:pu,backendName:"webgl",kernelFunc:s7e};var a7e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,l7e=dt({opSnippet:a7e}),Nce={kernelName:du,backendName:"webgl",kernelFunc:l7e};var c7e=Ka+`
  return sin(x);
`,u7e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Gs}
  return result;
`,d7e=dt({opSnippet:c7e,packedOpSnippet:u7e}),Ace={kernelName:cu,backendName:"webgl",kernelFunc:d7e};var p7e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,h7e=dt({opSnippet:p7e}),Rce={kernelName:uu,backendName:"webgl",kernelFunc:h7e};var f7e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,m7e=dt({opSnippet:f7e}),Oce={kernelName:hu,backendName:"webgl",kernelFunc:m7e};var g7e=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,paddings:s}=r;x.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((v,w)=>v*w),l=[[0,0]];l.push(...s);for(let v=1+i.length;v<o.shape.length;++v)l.push([0,0]);let c=[],u=w$({inputs:{x:o},backend:e,attrs:{paddings:l,constantValue:0}}),d=O.getReshaped(u.shape,i,a,!1),p=O.getPermuted(d.length,i.length,!1),h=O.getReshapedPermuted(u.shape,i,a,!1),f=Ne({inputs:{x:u},backend:e,attrs:{shape:d}}),m=ir({inputs:{x:f},backend:e,attrs:{perm:p}}),g=Ne({inputs:{x:m},backend:e,attrs:{shape:h}});return c.push(u),c.push(f),c.push(m),c.forEach(v=>e.disposeIntermediateTensorInfo(v)),g},Fce={kernelName:ap,backendName:"webgl",kernelFunc:g7e};function v7e(t){let{inputs:n,backend:e}=t,{indices:r,values:o,denseShape:i,defaultValue:s}=n;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.readSync(r.dataId),l=e.readSync(o.dataId),c=e.readSync(i.dataId),u=e.readSync(s.dataId)[0],[d,p,h,f,m]=sse(a,r.shape,r.dtype,l,o.dtype,c,u);return[e.makeTensorInfo(p,r.dtype,d),e.makeTensorInfo([p[0]],o.dtype,h),e.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),e.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var Pce={kernelName:zg,backendName:"webgl",kernelFunc:v7e};function w7e(t){let{inputs:n,backend:e}=t,{inputIndices:r,inputShape:o,newShape:i}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(e.readSync(o.dataId)),a=e.readSync(r.dataId),l=Array.from(e.readSync(i.dataId)),[c,u,d]=ase(a,r.shape,r.dtype,s,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var Bce={kernelName:Hg,backendName:"webgl",kernelFunc:w7e};function y7e(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);let s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=UE(s,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}var Lce={kernelName:Ug,backendName:"webgl",kernelFunc:y7e};function x7e(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);let s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=UE(s,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}var $ce={kernelName:Gg,backendName:"webgl",kernelFunc:x7e};function _7e(t){let{inputs:n,backend:e,attrs:r}=t,{sparseIndices:o,sparseValues:i,defaultValue:s}=n,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=O.calculateShapes(i,o,a),h=!1;if(i.dtype==="string"){let v=e.bufferSync(o),w=e.bufferSync(i),y=x.decodeString(e.readSync(s.dataId)[0]),_=rse(v,w,a,p,u,c,l,d,y,h);return e.makeTensorInfo(a,_.dtype,_.values)}let f=new Mf(c,l,o.shape.length,i.shape.length,d,[p,1],h),m=e.runWebGLProgram(f,[i,o,s],i.dtype),g=Ne({inputs:{x:m},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(m),g}var Vce={kernelName:Wg,backendName:"webgl",kernelFunc:_7e};function k7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{numOrSizeSplits:i,axis:s}=r,a=x.parseAxisParam(s,o.shape)[0],l=O.prepareSplitSize(o,i,a),c=o.shape.length,u=new Array(c).fill(0),d=o.shape.slice();return l.map(p=>{let h=[...d];h[a]=p;let f=Xl({inputs:{x:o},backend:e,attrs:{begin:u,size:h}});return u[a]+=p,f})}var jce={kernelName:lp,backendName:"webgl",kernelFunc:k7e};var zce="return sqrt(x);",b7e=dt({opSnippet:zce,packedOpSnippet:zce,cpuKernelImpl:lse}),Hce={kernelName:fu,backendName:"webgl",kernelFunc:b7e};var C7e="return x * x;",S7e=dt({opSnippet:C7e}),Uce={kernelName:qg,backendName:"webgl",kernelFunc:S7e};var Gce="return (a - b) * (a - b);",M7e=Sn({opSnippet:Gce,packedOpSnippet:Gce}),Wce={kernelName:mu,backendName:"webgl",kernelFunc:M7e};function T7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");let i=e.readSync(o.dataId),s=O.fromUint8ToStringArray(i),a=cse(s,"string",r);return e.makeTensorInfo(o.shape,"string",a)}var qce={kernelName:zh,backendName:"webgl",kernelFunc:T7e};function D7e({inputs:t,attrs:n,backend:e}){let{x:r}=t,o=uo+`
    return x > 0.0 ? 1.0 : float(${n.alpha});
  `,i=new ti(r.shape,o);return e.runWebGLProgram(i,[r],r.dtype)}var Kce={kernelName:yu,backendName:"webgl",kernelFunc:D7e};var p3=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=r;let o=r.length,i=zt(r.length),s=zt(r.length),a="";if(o===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${n});
      ${i} strides = ${i}(${e});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function E7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:w,end:y,strides:_}=yo.sliceInfo(o.shape,i,s,a,l,c,u,d,p),k;if(m)k=Ne({inputs:{x:o},backend:e,attrs:{shape:f}});else if(g||v){x.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let I=yo.computeOutShape(w,y,_),A=Xl({inputs:{x:o},backend:e,attrs:{begin:w,size:I}});k=Ne({inputs:{x:A},backend:e,attrs:{shape:f}}),e.disposeIntermediateTensorInfo(A)}else if(e.shouldExecuteOnCPU([o])){let A=e.readSync(o.dataId),P=at(o.shape,o.dtype,A),N=use(h,P,_,w);k=e.makeTensorInfo(f,o.dtype,N.values)}else{let A=new p3(w,_,h);k=e.runWebGLProgram(A,[o],o.dtype)}let T=Ne({inputs:{x:k},backend:e,attrs:{shape:f}});return e.disposeIntermediateTensorInfo(k),T}var Zce={kernelName:Kg,backendName:"webgl",kernelFunc:E7e};function I7e(t){let{inputs:n,backend:e,attrs:r}=t,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=n,p=e.readSync(u.dataId),h=e.readSync(d.dataId),[f,m]=dse(p,h,o,i,s,a,l,c);return[e.makeTensorInfo([f.length],"string",f),e.makeTensorInfo(d.shape,"int32",m)]}var Xce={kernelName:Zg,backendName:"webgl",kernelFunc:I7e};function N7e(t){let{inputs:n,backend:e,attrs:r}=t,{skipEmpty:o}=r,{input:i,delimiter:s}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.readSync(i.dataId),l=e.readSync(s.dataId)[0],[c,u,d]=pse(a,l,o),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var Yce={kernelName:Xg,backendName:"webgl",kernelFunc:N7e};function A7e(t){let{inputs:n,backend:e,attrs:r}=t,{numBuckets:o}=r,{input:i}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let s=e.readSync(i.dataId),a=hse(s,o);return e.makeTensorInfo(i.shape,"int32",a)}var Qce={kernelName:Yg,backendName:"webgl",kernelFunc:A7e};var R7e="return tan(x);",O7e=dt({opSnippet:R7e}),Jce={kernelName:vu,backendName:"webgl",kernelFunc:O7e};var F7e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,P7e=dt({opSnippet:F7e}),eue={kernelName:wu,backendName:"webgl",kernelFunc:P7e};function B7e(t){let{inputs:n,backend:e,attrs:r}=t,{tensor:o,indices:i,updates:s}=n,{}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(s,i,o.shape),p=[d/c,c];if(d===0)return e.makeTensorInfo(o.shape,i.dtype);let h=Ne({inputs:{x:i},backend:e,attrs:{shape:[l,a]}}),f=Ne({inputs:{x:s},backend:e,attrs:{shape:[l,c]}}),m=Ne({inputs:{x:o},backend:e,attrs:{shape:p}}),g=new Mf(l,a,h.shape.length,f.shape.length,u,p,!1,!0),v=e.runWebGLProgram(g,[f,h,m],m.dtype),w=Ne({inputs:{x:v},backend:e,attrs:{shape:o.shape}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(v),w}var tue={kernelName:Vg,backendName:"webgl",kernelFunc:B7e};var h3=class{constructor(n,e){this.variableNames=["A"];let r=new Array(n.length);for(let s=0;s<r.length;s++)r[s]=n[s]*e[s];this.outputShape=r,this.rank=r.length;let o=zt(this.rank),i=L7e(n);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}};function L7e(t){let n=t.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(n===1)return`imod(resRC, ${t[0]})`;let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<t.length;o++)r.push(`imod(${e[o]}, ${t[o]})`);return r.join()}function x$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reps:i}=r;if(o.dtype==="string"||o.shape.length>5){let l=e.readSync(o.dataId),c=o.dtype==="string"?l.map(p=>x.decodeString(p)):l,u=at(o.shape,o.dtype,c),d=mse(u,i);return e.makeTensorInfo(d.shape,d.dtype,d.values)}let s=new h3(o.shape,i);return e.runWebGLProgram(s,[o],o.dtype)}var nue={kernelName:kl,backendName:"webgl",kernelFunc:x$};var f3=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=n,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},m3=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=n,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function u2(t,n){n!==null&&t.disposeIntermediateTensorInfo(n)}function rue(t){let n=1;for(;n<t;)n*=2;return n}function $7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{k:i,sorted:s}=r,a=ee().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ee().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([o])||u<a||i>l){let N=e.readSync(o.dataId),[B,S]=gse(N,c,o.dtype,i,s);return[e.makeTensorInfo(B.shape,B.dtype,B.values),e.makeTensorInfo(S.shape,S.dtype,S.values)]}if(i===0)return c[c.length-1]=0,[e.makeTensorInfo(c,o.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(u===1)return[o,Zp({attrs:{shape:c,dtype:"int32",value:0},backend:e})];let d=e.texData.get(o.dataId),p=d!==null&&d.isPacked,h=p?e.unpackTensor(o):o,m=x.sizeFromShape(c)/u,g=Ne({inputs:{x:h},attrs:{shape:[m,u]},backend:e});p&&u2(e,h);let v=rue(i),w=rue(u),y=null,_=()=>y===null?[g,g]:[g,y],k=(N,B,S)=>{let W=_(),ie=new f3(S),J=[[u],[y===null?1:0],[Number.NEGATIVE_INFINITY],[N],[B]],G=y;y=e.runWebGLProgram(ie,W,"int32",J),u2(e,G)};for(let N=1;N<v;N*=2){let B=N*2;for(let S=N;S>=1;S/=2)k(B,S,[m,w])}for(let N=w;N>v;N/=2){let B=_(),S=new m3([m,N/2]),ie=[[u],[y===null?1:0],[v]],Q=y;y=e.runWebGLProgram(S,B,"int32",ie),u2(e,Q);let J=v/2,G=J*2;for(let H=J;H>=1;H/=2)k(G,H,y.shape)}let T=y;y=Xl({inputs:{x:y},backend:e,attrs:{begin:0,size:[m,i]}}),u2(e,T);let I=h$({inputs:{x:g,indices:y},backend:e,attrs:{axis:1,batchDims:1}});u2(e,g);let A=c.slice(0,-1);A.push(i),T=y,y=Ne({inputs:{x:y},attrs:{shape:A},backend:e}),u2(e,T);let P=I;return I=Ne({inputs:{x:I},attrs:{shape:A},backend:e}),u2(e,P),[I,y]}var oue={kernelName:Qg,backendName:"webgl",kernelFunc:$7e};var g3=class{constructor(n,e,r,o,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;let a=r==="nearest"?1:2,l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${e}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${e}));
                float mapY = mapCoord(inY, float(${n}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function V7e(t){let{inputs:n,backend:e,attrs:r}=t,{image:o,transforms:i}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,p,h]=o.shape,[f,m]=c??[d,p],g=[u,f,m,h],v=new g3(d,p,s,a,l,g);return e.runWebGLProgram(v,[o,i],"float32")}var iue={kernelName:Jg,backendName:"webgl",kernelFunc:V7e};function j7e(t){let{inputs:n,attrs:e,backend:r}=t,{axis:o}=e,{x:i}=n;ql(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=vse(s,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var sue={kernelName:e0,backendName:"webgl",kernelFunc:j7e};function z7e(t){let{inputs:n,backend:e,attrs:r}=t,{value:o}=n,{axis:i}=r;i<0&&(i+=o.shape.length);let s=o,a=s.shape.length,l=o.shape[i],c=new Array(a-1),u=0;for(let m=0;m<a;m++)m!==i&&(c[u++]=s.shape[m]);let d=[],p=new Array(a).fill(0),h=s.shape.slice();h[i]=1;let f=new Array(l);for(let m=0;m<f.length;m++){p[i]=m;let g=Xl({inputs:{x:s},backend:e,attrs:{begin:p,size:h}}),v=Ne({inputs:{x:g},backend:e,attrs:{shape:c}});f[m]=v,d.push(g)}return d.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}var aue={kernelName:up,backendName:"webgl",kernelFunc:z7e};var v3=class{constructor(n,e){this.variableNames=["x","segmentIds"];let r=n.windowSize,o=n.batchSize,i=n.inSize,s=n.numSegments,a=s*Math.ceil(i/r);this.outputShape=[o,a];let l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `,h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${f}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function H7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,segmentIds:i}=n,{numSegments:s}=r,a=o.shape.length,l=[],c=0,u=O.getAxesPermutation([c],a),d=o;u!=null&&(d=ir({inputs:{x:o},backend:e,attrs:{perm:u}}),l.push(d),c=O.getInnerMostAxes(1,a)[0]);let p=O.segment_util.computeOutShape(d.shape,c,s),h=x.sizeFromShape([d.shape[c]]),f=Ne({inputs:{x:d},backend:e,attrs:{shape:[-1,h]}});l.push(f);let m=Kh(o.dtype),g=(_,k,T,I,A)=>{let P=_.shape[0],N=_.shape[1],B=O.segment_util.segOpComputeOptimalWindowSize(N,A),S={windowSize:B,inSize:N,batchSize:P,numSegments:A},W=new v3(S,k),ie=e.compileAndRun(W,[_,T],I);if(l.push(ie),ie.shape[1]===A)return ie;let Q=y$({backend:e,attrs:{start:0,stop:A,step:1,dtype:"float32"}}),J=x$({inputs:{x:Q},backend:e,attrs:{reps:[N/B]}});return l.push(Q),l.push(J),g(ie,k,J,I,A)},v=g(f,"unsortedSegmentSum",i,m,s),w=Ne({inputs:{x:v},backend:e,attrs:{shape:p}}),y=w;if(u!=null){l.push(w);let _=O.getUndoAxesPermutation(u);y=ir({inputs:{x:y},backend:e,attrs:{perm:_}})}return l.forEach(_=>e.disposeIntermediateTensorInfo(_)),y}var lue={kernelName:dp,backendName:"webgl",kernelFunc:H7e};var U7e=[Use,Wse,qse,Kse,Xse,Yse,Qse,Jse,nae,rae,oae,iae,sae,aae,lae,cae,uae,dae,pae,hae,fae,gae,vae,wae,yae,bae,Sae,Mae,Ose,Dae,Iae,Nae,Aae,Rae,Oae,Fae,Pae,Bae,Lae,$ae,zae,Hae,Uae,Gae,Wae,qae,Kae,Zae,Xae,Yae,Qae,Jae,ele,tle,nle,rle,ile,sle,ale,lle,ule,dle,ple,hle,fle,mle,gle,vle,wle,Rse,yle,Eae,xle,_le,kle,Fse,ble,Cle,Sle,Mle,Tle,Dle,Ele,Ile,Nle,Ale,Ole,Fle,Ple,Ble,Lle,$le,jle,Hle,Ule,Gle,Wle,qle,Qle,Lse,Jle,ece,tce,nce,xae,rce,sce,ace,lce,cce,Pse,uce,dce,pce,hce,fce,_ae,Kle,mce,gce,vce,Vse,wce,yce,xce,_ce,kce,bce,Cce,Sce,Mce,Tce,Dce,Ece,Ice,Nce,Ace,Rce,mae,Yle,Oce,Fce,Pce,Bce,Lce,$ce,Vce,jce,Hce,Uce,Wce,qce,Kce,Zce,Xce,Yce,Qce,Xle,zse,Jce,eue,tue,nue,oue,iue,Hse,sue,aue,lue,oce];for(let t of U7e)Q1(t);var cue="4.22.0";var G7e={"tfjs-core":pT,"tfjs-backend-cpu":mE,"tfjs-backend-webgl":XE,"tfjs-data":KD,"tfjs-layers":mf,"tfjs-converter":AD,tfjs:cue};var pue=I2(due());var b$=t=>z(void 0,null,function*(){let n=yield t.async("blob");return new File([n],t.name,{type:n.type||"application/octet-stream"})}),hue=t=>z(void 0,null,function*(){let n=yield pue.default.loadAsync(t),e=/(^|\/)(__MACOSX|\.DS_Store|\.?_\w+)/,r=n.file(/\.json$/).filter(({name:s})=>!e.test(s)),o=n.file(/\.bin$/).filter(({name:s})=>!e.test(s)),i=n.file(/\.js$/).filter(({name:s})=>!e.test(s));if(r.length!==1||o.length<1||i.length!==1)throw new Error("Invalid zip file");return Promise.all([b$(r[0]),Promise.all(o.map(s=>b$(s))),b$(i[0])])});var Yl=class t{constructor(n){this.config=n;let e=localStorage.getItem("models")?.split(",");e&&e.length>0&&Promise.all(e.map(r=>Nv(`localstorage://${r}_model`))).then(r=>{this._models=e.map((o,i)=>{let s=r[i],a=localStorage.getItem(`${o}_script`),l=EF(a);return{id:o,name:s.name,model:s,script:l}}),this._modelsSubject.next(this._models)}),this._modelsSubject=new Zn(this._models)}static _instance;static get instance(){return t._instance}_models;_modelsSubject;get models(){return this._models}get models$(){return this._modelsSubject.asObservable()}static init(n){return t.instance||(t._instance=new t(n)),t.instance}_load(n){return z(this,null,function*(){let e=[];for(let r of n){let[o,i,s]=yield hue(r),a=yield Nv(to.browserFiles([o,...i])),l=yield s.text(),c=EF(l),u=a.name.toLowerCase().replace(/\s+/g,"_"),d=a.name;e.push({id:u,name:d,model:a,script:c}),a.save(`localstorage://${u}_model`),localStorage.setItem(`${u}_script`,l)}this._models=e,this._modelsSubject.next(this._models),localStorage.setItem("models",e.map(({id:r})=>r).join(","))})}loadFromFile(){Os.promise(Wn.openFile(".zip",!0).then(n=>this._load(n)),{loading:this.config.translate.instant("MODELS_LOADING"),success:()=>this.config.translate.instant("MODELS_LOADED"),error:n=>(console.error(n),this.config.translate.instant("MODELS_NOT_LOADED"))})}deleteFile(){for(let n of this._models??[])to.removeModel(`localstorage://${n.id}_model`),localStorage.removeItem(`${n.id}_script`);localStorage.removeItem("models"),this._models=void 0,this._modelsSubject.next(this._models),Os.success(this.config.translate.instant("MODELS_DELETED"))}static \u0275fac=function(e){return new(e||t)(Qe(Wn))};static \u0275prov=_e({token:t,factory:t.\u0275fac})};var q7e=40,Lr=class t{static _instance;static get instance(){return t._instance}static UseState=n=>class extends n{constructor(...e){super(...e),this.fromObject(t.instance.state),t.instance.state$.subscribe(r=>this.fromObject(r)),t.instance._requestStateSubject.pipe(ma(500)).subscribe(()=>t.instance.setState(this.toObject(),!1))}};static SetState=(n,e,r)=>{let{value:o,set:i}=r;if(o)r.value=function(...s){let a=o.apply(this,s);return t.instance._requestStateSubject.next(),a};else if(i)r.set=function(s){i.apply(this,[s]),t.instance._requestStateSubject.next()};else throw new Error("The setState decorator can only be used on methods or properties that change the state.")};_states;_index;get state(){return this._states[this._index]}_requestStateSubject;_stateSubject;get state$(){return this._stateSubject.asObservable()}get canUndo(){return this._index>0}get canRedo(){return this._index<this._states.length-1}constructor(){let n=sessionStorage.getItem("state");n?this._states=[JSON.parse(n)]:this._states=[{}],this._index=0,this._requestStateSubject=new nd(1),this._stateSubject=new Zn(this._states[this._index])}static init(){return t.instance||(t._instance=new t),t.instance}setState(n,e=!0){this._states=this._states.slice(0,this._index+1),this._states.push(n),this._index++,this._states.length>q7e&&(this._states.shift(),this._index--),e&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}replaceState(n,e=!0){this._states[this._index]=n,e&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}undo(n=!0){this.canUndo&&(this._index--,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state)))}redo(n=!0){this.canRedo&&(this._index++,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state)))}reset(n=!0){this._states=[{}],this._index=0,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})};var Z7e=["frame"],X7e=["*"],Y7e=(t,n)=>({width:t,height:n}),Q7e=(t,n,e,r,o)=>({minWidth:t,maxWidth:n,minHeight:e,maxHeight:r,transform:o}),J7e=t=>({"grid-view":t}),xw=class t{config=M(Wn);frame=bo.required("frame");showGrid=this.config.grid;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-canvas"]],viewQuery:function(e,r){e&1&&So(r.frame,Z7e,5),e&2&&zr()},ngContentSelectors:X7e,decls:5,vars:14,consts:[["frame",""],[1,"frame","fixed","left-0","top-0","h-screen","w-screen","cursor-default","overflow-scroll"],[1,"m-auto","flex","items-center","justify-center","overflow-visible",3,"ngStyle"],[1,"relative","overflow-hidden","transition-transform",3,"ngStyle","ngClass"]],template:function(e,r){e&1&&(Ot(),X(0,"div",1,0)(2,"div",2)(3,"div",3),it(4),re()()()),e&2&&(Y(2),Pe("ngStyle",xh(3,Y7e,r.config.size()*r.config.zoom()+"px",r.config.size()*r.config.zoom()+"px")),Y(),Pe("ngStyle",RU(6,Q7e,r.config.size()+"px",r.config.size()+"px",r.config.size()+"px",r.config.size()+"px","scale("+r.config.zoom()+")"))("ngClass",ya(12,J7e,r.showGrid())))},dependencies:[Cr,Im,Nm],styles:[".frame[_ngcontent-%COMP%]{background-color:hsl(var(--background))}  .high-contrast .frame{background-color:hsl(var(--border))!important}.grid-view[_ngcontent-%COMP%]{background-image:radial-gradient(circle,hsl(var(--border)) 1.5px,transparent 1.5px);background-size:20px 20px}  .high-contrast .grid-view{background-image:radial-gradient(circle,hsl(var(--muted-foreground)) 1.5px,transparent 1.5px)}"]})};function fue(t){var n,e,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(e=fue(t[n]))&&(r&&(r+=" "),r+=e)}else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function w3(){for(var t,n,e=0,r="",o=arguments.length;e<o;e++)(t=arguments[e])&&(n=fue(t))&&(r&&(r+=" "),r+=n);return r}var E$="-",e$e=t=>{let n=n$e(t),{conflictingClassGroups:e,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{let a=s.split(E$);return a[0]===""&&a.length!==1&&a.shift(),yue(a,n)||t$e(s)},getConflictingClassGroupIds:(s,a)=>{let l=e[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},yue=(t,n)=>{if(t.length===0)return n.classGroupId;let e=t[0],r=n.nextPart.get(e),o=r?yue(t.slice(1),r):void 0;if(o)return o;if(n.validators.length===0)return;let i=t.join(E$);return n.validators.find(({validator:s})=>s(i))?.classGroupId},mue=/^\[(.+)\]$/,t$e=t=>{if(mue.test(t)){let n=mue.exec(t)[1],e=n?.substring(0,n.indexOf(":"));if(e)return"arbitrary.."+e}},n$e=t=>{let{theme:n,classGroups:e}=t,r={nextPart:new Map,validators:[]};for(let o in e)M$(e[o],r,o,n);return r},M$=(t,n,e,r)=>{t.forEach(o=>{if(typeof o=="string"){let i=o===""?n:gue(n,o);i.classGroupId=e;return}if(typeof o=="function"){if(r$e(o)){M$(o(r),n,e,r);return}n.validators.push({validator:o,classGroupId:e});return}Object.entries(o).forEach(([i,s])=>{M$(s,gue(n,i),e,r)})})},gue=(t,n)=>{let e=t;return n.split(E$).forEach(r=>{e.nextPart.has(r)||e.nextPart.set(r,{nextPart:new Map,validators:[]}),e=e.nextPart.get(r)}),e},r$e=t=>t.isThemeGetter,o$e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let n=0,e=new Map,r=new Map,o=(i,s)=>{e.set(i,s),n++,n>t&&(n=0,r=e,e=new Map)};return{get(i){let s=e.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){e.has(i)?e.set(i,s):o(i,s)}}},T$="!",D$=":",i$e=D$.length,s$e=t=>{let{prefix:n,experimentalParseClassName:e}=t,r=o=>{let i=[],s=0,a=0,l=0,c;for(let f=0;f<o.length;f++){let m=o[f];if(s===0&&a===0){if(m===D$){i.push(o.slice(l,f)),l=f+i$e;continue}if(m==="/"){c=f;continue}}m==="["?s++:m==="]"?s--:m==="("?a++:m===")"&&a--}let u=i.length===0?o:o.substring(l),d=a$e(u),p=d!==u,h=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:d,maybePostfixModifierPosition:h}};if(n){let o=n+D$,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(e){let o=r;r=i=>e({className:i,parseClassName:o})}return r},a$e=t=>t.endsWith(T$)?t.substring(0,t.length-1):t.startsWith(T$)?t.substring(1):t,l$e=t=>{let n=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;let o=[],i=[];return r.forEach(s=>{s[0]==="["||n[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},c$e=t=>le({cache:o$e(t.cacheSize),parseClassName:s$e(t),sortModifiers:l$e(t)},e$e(t)),u$e=/\s+/,d$e=(t,n)=>{let{parseClassName:e,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=n,s=[],a=t.trim().split(u$e),l="";for(let c=a.length-1;c>=0;c-=1){let u=a[c],{isExternal:d,modifiers:p,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=e(u);if(d){l=u+(l.length>0?" "+l:l);continue}let g=!!m,v=r(g?f.substring(0,m):f);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(f),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}let w=i(p).join(":"),y=h?w+T$:w,_=y+v;if(s.includes(_))continue;s.push(_);let k=o(v,g);for(let T=0;T<k.length;++T){let I=k[T];s.push(y+I)}l=u+(l.length>0?" "+l:l)}return l};function p$e(){let t=0,n,e,r="";for(;t<arguments.length;)(n=arguments[t++])&&(e=xue(n))&&(r&&(r+=" "),r+=e);return r}var xue=t=>{if(typeof t=="string")return t;let n,e="";for(let r=0;r<t.length;r++)t[r]&&(n=xue(t[r]))&&(e&&(e+=" "),e+=n);return e};function h$e(t,...n){let e,r,o,i=s;function s(l){let c=n.reduce((u,d)=>d(u),t());return e=c$e(c),r=e.cache.get,o=e.cache.set,i=a,a(l)}function a(l){let c=r(l);if(c)return c;let u=d$e(l,e);return o(l,u),u}return function(){return i(p$e.apply(null,arguments))}}var ni=t=>{let n=e=>e[t]||[];return n.isThemeGetter=!0,n},_ue=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,kue=/^\((?:(\w[\w-]*):)?(.+)\)$/i,f$e=/^\d+\/\d+$/,m$e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,g$e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,v$e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,w$e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,y$e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_w=t=>f$e.test(t),wn=t=>!!t&&!Number.isNaN(Number(t)),Tf=t=>!!t&&Number.isInteger(Number(t)),C$=t=>t.endsWith("%")&&wn(t.slice(0,-1)),Xp=t=>m$e.test(t),x$e=()=>!0,_$e=t=>g$e.test(t)&&!v$e.test(t),bue=()=>!1,k$e=t=>w$e.test(t),b$e=t=>y$e.test(t),C$e=t=>!wt(t)&&!yt(t),S$e=t=>kw(t,Mue,bue),wt=t=>_ue.test(t),d2=t=>kw(t,Tue,_$e),S$=t=>kw(t,I$e,wn),vue=t=>kw(t,Cue,bue),M$e=t=>kw(t,Sue,b$e),y3=t=>kw(t,Due,k$e),yt=t=>kue.test(t),eb=t=>bw(t,Tue),T$e=t=>bw(t,N$e),wue=t=>bw(t,Cue),D$e=t=>bw(t,Mue),E$e=t=>bw(t,Sue),x3=t=>bw(t,Due,!0),kw=(t,n,e)=>{let r=_ue.exec(t);return r?r[1]?n(r[1]):e(r[2]):!1},bw=(t,n,e=!1)=>{let r=kue.exec(t);return r?r[1]?n(r[1]):e:!1},Cue=t=>t==="position"||t==="percentage",Sue=t=>t==="image"||t==="url",Mue=t=>t==="length"||t==="size"||t==="bg-size",Tue=t=>t==="length",I$e=t=>t==="number",N$e=t=>t==="family-name",Due=t=>t==="shadow";var A$e=()=>{let t=ni("color"),n=ni("font"),e=ni("text"),r=ni("font-weight"),o=ni("tracking"),i=ni("leading"),s=ni("breakpoint"),a=ni("container"),l=ni("spacing"),c=ni("radius"),u=ni("shadow"),d=ni("inset-shadow"),p=ni("text-shadow"),h=ni("drop-shadow"),f=ni("blur"),m=ni("perspective"),g=ni("aspect"),v=ni("ease"),w=ni("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[..._(),yt,wt],T=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],A=()=>[yt,wt,l],P=()=>[_w,"full","auto",...A()],N=()=>[Tf,"none","subgrid",yt,wt],B=()=>["auto",{span:["full",Tf,yt,wt]},Tf,yt,wt],S=()=>[Tf,"auto",yt,wt],W=()=>["auto","min","max","fr",yt,wt],ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Q=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...A()],G=()=>[_w,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],H=()=>[t,yt,wt],V=()=>[..._(),wue,vue,{position:[yt,wt]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],pe=()=>["auto","cover","contain",D$e,S$e,{size:[yt,wt]}],ce=()=>[C$,eb,d2],se=()=>["","none","full",c,yt,wt],ye=()=>["",wn,eb,d2],Re=()=>["solid","dashed","dotted","double"],Oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[wn,C$,wue,vue],et=()=>["","none",f,yt,wt],qe=()=>["none",wn,yt,wt],xt=()=>["none",wn,yt,wt],St=()=>[wn,yt,wt],D=()=>[_w,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xp],breakpoint:[Xp],color:[x$e],container:[Xp],"drop-shadow":[Xp],ease:["in","out","in-out"],font:[C$e],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xp],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xp],shadow:[Xp],spacing:["px",wn],text:[Xp],"text-shadow":[Xp],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",_w,wt,yt,g]}],container:["container"],columns:[{columns:[wn,wt,yt,a]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Tf,"auto",yt,wt]}],basis:[{basis:[_w,"full","auto",a,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wn,_w,"auto","initial","none",wt]}],grow:[{grow:["",wn,yt,wt]}],shrink:[{shrink:["",wn,yt,wt]}],order:[{order:[Tf,"first","last","none",yt,wt]}],"grid-cols":[{"grid-cols":N()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":N()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...ie(),"normal"]}],"justify-items":[{"justify-items":[...Q(),"normal"]}],"justify-self":[{"justify-self":["auto",...Q()]}],"align-content":[{content:["normal",...ie()]}],"align-items":[{items:[...Q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Q(),{baseline:["","last"]}]}],"place-content":[{"place-content":ie()}],"place-items":[{"place-items":[...Q(),"baseline"]}],"place-self":[{"place-self":["auto",...Q()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[a,"screen",...G()]}],"min-w":[{"min-w":[a,"screen","none",...G()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...G()]}],h:[{h:["screen",...G()]}],"min-h":[{"min-h":["screen","none",...G()]}],"max-h":[{"max-h":["screen",...G()]}],"font-size":[{text:["base",e,eb,d2]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,yt,S$]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",C$,wt]}],"font-family":[{font:[T$e,wt,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,yt,wt]}],"line-clamp":[{"line-clamp":[wn,"none",yt,S$]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",yt,wt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",yt,wt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:[wn,"from-font","auto",yt,d2]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[wn,"auto",yt,wt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yt,wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yt,wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:V()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:pe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Tf,yt,wt],radial:["",yt,wt],conic:[Tf,yt,wt]},E$e,M$e]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:ce()}],"gradient-via-pos":[{via:ce()}],"gradient-to-pos":[{to:ce()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Re(),"hidden","none"]}],"divide-style":[{divide:[...Re(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...Re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[wn,yt,wt]}],"outline-w":[{outline:["",wn,eb,d2]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",u,x3,y3]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",d,x3,y3]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[wn,d2]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",p,x3,y3]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[wn,yt,wt]}],"mix-blend":[{"mix-blend":[...Oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[yt,wt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[wn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:V()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:pe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",yt,wt]}],filter:[{filter:["","none",yt,wt]}],blur:[{blur:et()}],brightness:[{brightness:[wn,yt,wt]}],contrast:[{contrast:[wn,yt,wt]}],"drop-shadow":[{"drop-shadow":["","none",h,x3,y3]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",wn,yt,wt]}],"hue-rotate":[{"hue-rotate":[wn,yt,wt]}],invert:[{invert:["",wn,yt,wt]}],saturate:[{saturate:[wn,yt,wt]}],sepia:[{sepia:["",wn,yt,wt]}],"backdrop-filter":[{"backdrop-filter":["","none",yt,wt]}],"backdrop-blur":[{"backdrop-blur":et()}],"backdrop-brightness":[{"backdrop-brightness":[wn,yt,wt]}],"backdrop-contrast":[{"backdrop-contrast":[wn,yt,wt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wn,yt,wt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wn,yt,wt]}],"backdrop-invert":[{"backdrop-invert":["",wn,yt,wt]}],"backdrop-opacity":[{"backdrop-opacity":[wn,yt,wt]}],"backdrop-saturate":[{"backdrop-saturate":[wn,yt,wt]}],"backdrop-sepia":[{"backdrop-sepia":["",wn,yt,wt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",yt,wt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wn,"initial",yt,wt]}],ease:[{ease:["linear","initial",v,yt,wt]}],delay:[{delay:[wn,yt,wt]}],animate:[{animate:["none",w,yt,wt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,yt,wt]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:qe()}],"rotate-x":[{"rotate-x":qe()}],"rotate-y":[{"rotate-y":qe()}],"rotate-z":[{"rotate-z":qe()}],scale:[{scale:xt()}],"scale-x":[{"scale-x":xt()}],"scale-y":[{"scale-y":xt()}],"scale-z":[{"scale-z":xt()}],"scale-3d":["scale-3d"],skew:[{skew:St()}],"skew-x":[{"skew-x":St()}],"skew-y":[{"skew-y":St()}],transform:[{transform:[yt,wt,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:D()}],"translate-x":[{"translate-x":D()}],"translate-y":[{"translate-y":D()}],"translate-z":[{"translate-z":D()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yt,wt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yt,wt]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[wn,eb,d2,S$]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var Eue=h$e(A$e);function _3(t){let n=new Me(t);return[(i={})=>M(n,i),i=>({provide:n,useValue:i}),i=>({provide:n,useExisting:wi(i)}),n]}var[Iue,I$n,Nue,N$n]=_3("@spartan-ng SET_CLASS_TO_CUSTOM_ELEMENT_TOKEN"),Aue=!1,[Rue,A$n,Oue,R$n]=_3("@spartan-ng EXPOSES_SIDE_TOKEN"),[Fue,O$n,I$,F$n]=_3("@spartan-ng EXPOSES_STATE_TOKEN");function Xe(...t){return Eue(w3(t))}var[Pue,P$n,Bue,B$n]=_3("@spartan-ng SET_TABLE_CLASSES_TOKEN");var p2=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmDialogClose",""],["","brnDialogClose","","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var X$n=new Me("Ng Glyph Config");var Y$n=new Me("NgGlyphsToken");function R$e(t){return t==null?"":/^\d+$/.test(t)?`${t}px`:t}var O$e=new Me("Ng Icon Pre Processor"),F$e=new Me("Ng Icon Post Processor");function P$e(){return M(O$e,{optional:!0})??(t=>t)}function B$e(){return M(F$e,{optional:!0})??(()=>{})}var L$e=new Me("Ng Icon Logger"),N$=class{log(n){console.log(n)}warn(n){console.warn(n)}error(n){console.error(n)}};function $$e(){return M(L$e,{optional:!0})??new N$}var V$e=new Me("Ng Icon Config");function j$e(){return M(V$e,{optional:!0})??{}}var z$e=new Me("Ng Icon Loader Token");var H$e=new Me("Ng Icon Cache Token");function U$e(){return M(z$e,{optional:!0})}function G$e(){return M(H$e,{optional:!0})}function sr(t){return[{provide:A$,useFactory:(n=M(A$,{optional:!0,skipSelf:!0}))=>le(le({},n?.reduce((e,r)=>le(le({},e),r),{})),t),multi:!0}]}var A$=new Me("Icons Token");function W$e(){return M(A$,{optional:!0})??[]}function q$e(t){return typeof t=="string"?Promise.resolve(t):bs(t)?t.toPromise():t}function K$e(t){return t.replace(/([^a-zA-Z0-9])+(.)?/g,(n,e,r)=>r?r.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,n=>n.toLowerCase())}var Z$e=0,ar=(()=>{class t{constructor(){this.config=j$e(),this.icons=W$e(),this.loader=U$e(),this.cache=G$e(),this.preProcessor=P$e(),this.postProcessor=B$e(),this.injector=M(Zt),this.renderer=M(Zr),this.platform=M(so),this.elementRef=M(_t),this.uniqueId=Z$e++,this.logger=$$e(),this.name=Z(),this.svg=Z(),this.size=Z(this.config.size,{transform:R$e}),this.strokeWidth=Z(this.config.strokeWidth),this.color=Z(this.config.color),Tt(()=>this.updateIcon()),M(new n1("aria-hidden"),{optional:!0})||this.elementRef.nativeElement.setAttribute("aria-hidden","true")}ngOnDestroy(){this.svgElement=void 0}updateIcon(){return z(this,null,function*(){let e=this.name(),r=this.svg();if(r!==void 0){this.setSvg(r);return}if(e===void 0)return;let o=K$e(e);for(let i of[...this.icons].reverse())if(i[o]){this.setSvg(i[o]);return}if(this.loader){let i=yield this.requestIconFromLoader(e);if(i!==null){this.setSvg(i);return}}this.logger.warn(`No icon named ${e} was found. You may need to import it using the withIcons function.`)})}setSvg(e){if(g1(this.platform)){this.elementRef.nativeElement.innerHTML=e,this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");return}if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===e)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),e===""))return;let r=this.renderer.createElement("template");e=this.replaceIds(e),this.renderer.setProperty(r,"innerHTML",this.preProcessor(e)),this.svgElement=r.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}replaceIds(e){if(!e.includes("ID_PLACEHOLDER_"))return e;let r=/ID_PLACEHOLDER_(\d+)/g,o=new Map,i=new Set(e.match(r));if(i===null)return e;for(let s of i){let a=s.replace("ID_PLACEHOLDER_",""),l=`ng-icon-${this.uniqueId}-${o.size}`;o.set(a,l),e=e.replace(new RegExp(s,"g"),l)}return e}requestIconFromLoader(e){return new Promise(r=>{Ho(this.injector,()=>z(this,null,function*(){if(this.cache){let s=this.cache.get(e);if(typeof s=="string"){r(s);return}if(s instanceof Promise){let a=yield s;r(a);return}}let o=q$e(this.loader(e));this.cache?.set(e,o);let i=yield o;this.cache?.set(e,i),r(i)}))})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ie({type:t,selectors:[["ng-icon"]],hostAttrs:["role","img"],hostVars:6,hostBindings:function(r,o){r&2&&fc("--ng-icon__stroke-width",o.strokeWidth())("--ng-icon__size",o.size())("--ng-icon__color",o.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},decls:0,vars:0,template:function(r,o){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0})}}return t})();var k3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 6 9 17l-5-5"></path></svg>';var b3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m6 9 6 6 6-6"></path></svg>';var Lue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m15 18-6-6 6-6"></path></svg>',C3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m9 18 6-6-6-6"></path></svg>',$ue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m18 15-6-6-6 6"></path></svg>';var Vue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m18 8 4 4-4 4"></path><path d="m6 8-4 4 4 4"></path><path d="M8 12h.01"></path><path d="M12 12h.01"></path><path d="M16 12h.01"></path></svg>';var jue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><circle cx="12" cy="12" r="10"></circle></svg>';var zue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><rect width="16" height="16" x="4" y="4" rx="2"></rect><rect width="6" height="6" x="9" y="9" rx="1"></rect><path d="M15 2v2"></path><path d="M15 20v2"></path><path d="M2 15h2"></path><path d="M2 9h2"></path><path d="M20 15h2"></path><path d="M20 9h2"></path><path d="M9 2v2"></path><path d="M9 20v2"></path></svg>';var Hue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><polyline points="15 17 20 12 15 7"></polyline><path d="M4 18v-2a4 4 0 0 1 4-4h12"></path></svg>';var Cw='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg>';var Uue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M5 22h14"></path><path d="M5 2h14"></path><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"></path><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"></path></svg>';var Gue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16"></path></svg>';var Wue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m17 2 4 4-4 4"></path><path d="M3 11v-1a4 4 0 0 1 4-4h14"></path><path d="m7 22-4-4 4-4"></path><path d="M21 13v1a4 4 0 0 1-4 4H3"></path></svg>';var que='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><polyline points="9 17 4 12 9 7"></polyline><path d="M20 18v-2a4 4 0 0 0-4-4H4"></path></svg>';var Kue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><rect width="20" height="8" x="2" y="14" rx="2"></rect><path d="M6.01 18H6"></path><path d="M10.01 18H10"></path><path d="M15 10v4"></path><path d="M17.84 7.17a4 4 0 0 0-5.66 0"></path><path d="M20.66 4.34a8 8 0 0 0-11.31 0"></path></svg>';var Zue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>';var Xue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path></svg>';var Yue='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M9.3 6.2a4.55 4.55 0 0 0 5.4 0"></path><path d="M7.9 10.7c.9.8 2.4 1.3 4.1 1.3s3.2-.5 4.1-1.3"></path><path d="M13.9 3.5a1.93 1.93 0 0 0-3.8-.1l-3 10c-.1.2-.1.4-.1.6 0 1.7 2.2 3 5 3s5-1.3 5-3c0-.2 0-.4-.1-.5Z"></path><path d="m7.5 12.2-4.7 2.7c-.5.3-.8.7-.8 1.1s.3.8.8 1.1l7.6 4.5c.9.5 2.1.5 3 0l7.6-4.5c.7-.3 1-.7 1-1.1s-.3-.8-.8-1.1l-4.7-2.8"></path></svg>';var Que='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path></svg>';var S3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m19 5 3-3"></path><path d="m2 22 3-3"></path><path d="M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z"></path><path d="M7.5 13.5 10 11"></path><path d="M10.5 16.5 13 14"></path><path d="m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z"></path></svg>';var M3='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>';function Sw(t,n=0){return Jue(t)?Number(t):arguments.length===2?n:0}function Jue(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Yp(t){return t instanceof _t?t.nativeElement:t}function R$(t){return Array.isArray(t)?t:[t]}function _o(t){return t==null?"":typeof t=="string"?t:`${t}px`}var O$;try{O$=typeof Intl<"u"&&Intl.v8BreakIterator}catch{O$=!1}var oo=(()=>{class t{_platformId=M(so);isBrowser=this._platformId?rs(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||O$)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qp(t,n,e,r,o){let i=parseInt(q5.major),s=parseInt(q5.minor);return i>19||i===19&&s>0||i===0&&s===0?t.listen(n,e,r,o):(n.addEventListener(e,r,o),()=>{n.removeEventListener(e,r,o)})}var F$;function X$e(){if(F$==null){let t=typeof document<"u"?document.head:null;F$=!!(t&&(t.createShadowRoot||t.attachShadow))}return F$}function ede(t){if(X$e()){let n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function T3(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function ua(t){return t.composedPath?t.composedPath()[0]:t.target}function P$(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var D3=new WeakMap,h2=(()=>{class t{_appRef;_injector=M(Zt);_environmentInjector=M(io);load(e){let r=this._appRef=this._appRef||this._injector.get(ll),o=D3.get(r);o||(o={loaders:new Set,refs:[]},D3.set(r,o),r.onDestroy(()=>{D3.get(r)?.refs.forEach(i=>i.destroy()),D3.delete(r)})),o.loaders.has(e)||(o.loaders.add(e),o.refs.push(tS(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var tde=new Me("cdk-dir-doc",{providedIn:"root",factory:Y$e});function Y$e(){return M(tn)}var Q$e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function J$e(t){let n=t?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?Q$e.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var gi=(()=>{class t{value="ltr";change=new Qt;constructor(){let e=M(tde,{optional:!0});if(e){let r=e.body?e.body.dir:null,o=e.documentElement?e.documentElement.dir:null;this.value=J$e(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var f2;function nde(){if(f2==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return f2=!1,f2;if("scrollBehavior"in document.documentElement.style)f2=!0;else{let t=Element.prototype.scrollTo;t?f2=!/\{\s*\[native code\]\s*\}/.test(t.toString()):f2=!1}}return f2}function E3(t){return t&&typeof t.connect=="function"&&!(t instanceof lh)}var m2=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(m2||{}),B$=new Me("_ViewRepeater");var tb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})}return t})();var rde=20,Mw=(()=>{class t{_ngZone=M(Rt);_platform=M(oo);_renderer=M(ko).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ot;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=rde){return this._platform.isBrowser?new en(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let o=e>0?this._scrolled.pipe(PC(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):lt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){let o=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(kn(i=>!i||o.indexOf(i)>-1))}getAncestorScrollContainers(e){let r=[];return this.scrollContainers.forEach((o,i)=>{this._scrollableContainsElement(i,e)&&r.push(i)}),r}_scrollableContainsElement(e,r){let o=Yp(r),i=e.getElementRef().nativeElement;do if(o==i)return!0;while(o=o.parentElement);return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ode=20,Jp=(()=>{class t{_platform=M(oo);_listeners;_viewportSize;_change=new ot;_document=M(tn,{optional:!0});constructor(){let e=M(Rt),r=M(ko).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=i=>this._change.next(i);this._listeners=[r.listen("window","resize",o),r.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,r=this._getWindow(),o=e.documentElement,i=o.getBoundingClientRect(),s=-i.top||e.body.scrollTop||r.scrollY||o.scrollTop||0,a=-i.left||e.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:s,left:a}}change(e=ode){return e>0?this._change.pipe(PC(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var I3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})}return t})(),Tw=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({imports:[tb,I3,tb,I3]})}return t})();var Dw=class{_attachedHost;attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},eh=class extends Dw{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(n,e,r,o,i){super(),this.component=n,this.viewContainerRef=e,this.injector=r,this.projectableNodes=i}},zu=class extends Dw{templateRef;viewContainerRef;context;injector;constructor(n,e,r,o){super(),this.templateRef=n,this.viewContainerRef=e,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}},N3=class extends Dw{element;constructor(n){super(),this.element=n instanceof _t?n.nativeElement:n}},g2=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof eh)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof zu)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof N3)return this._attachedPortal=n,this.attachDomPortal(n)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var nb=class extends g2{outletElement;_appRef;_defaultInjector;_document;constructor(n,e,r,o,i){super(),this.outletElement=n,this._appRef=r,this._defaultInjector=o,this._document=i}attachComponentPortal(n){let e;if(n.viewContainerRef){let r=n.injector||n.viewContainerRef.injector,o=r.get(dc,null,{optional:!0})||void 0;e=n.viewContainerRef.createComponent(n.component,{index:n.viewContainerRef.length,injector:r,ngModuleRef:o,projectableNodes:n.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let r=this._appRef,o=n.injector||this._defaultInjector||Zt.NULL,i=o.get(io,r.injector);e=tS(n.component,{elementInjector:o,environmentInjector:i,projectableNodes:n.projectableNodes||void 0}),r.attachView(e.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=n,e}attachTemplatePortal(n){let e=n.viewContainerRef,r=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(o=>this.outletElement.appendChild(o)),r.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(r);o!==-1&&e.remove(o)}),this._attachedPortal=n,r}attachDomPortal=n=>{let e=n.element;e.parentNode;let r=this._document.createComment("dom-portal");e.parentNode.insertBefore(r,e),this.outletElement.appendChild(e),this._attachedPortal=n,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(e,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var A3=(()=>{class t extends g2{_moduleRef=M(dc,{optional:!0});_document=M(tn);_viewContainerRef=M(_r);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new Qt;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let r=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,o=r.createComponent(e.component,{index:r.length,injector:e.injector||r.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=e=>{let r=e.element;r.parentNode;let o=this._document.createComment("dom-portal");e.setAttachedHost(this),r.parentNode.insertBefore(o,r),this._getRootNode().appendChild(r),this._attachedPortal=e,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(r,o)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Mn]})}return t})();var R3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})}return t})();var L$={},Df=(()=>{class t{_appId=M(km);getId(e){return this._appId!=="ng"&&(e+=this._appId),L$.hasOwnProperty(e)||(L$[e]=0),`${e}${L$[e]++}`}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $r(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var ide=nde(),O3=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(n,e){this._viewportRuler=n,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=_o(-this._previousScrollPosition.left),n.style.top=_o(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,e=this._document.body,r=n.style,o=e.style,i=r.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),ide&&(r.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ide&&(r.scrollBehavior=i,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}};var F3=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(n,e,r,o){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=r,this._config=o}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(kn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},rb=class{enable(){}disable(){}attach(){}};function $$(t,n){return n.some(e=>{let r=t.bottom<e.top,o=t.top>e.bottom,i=t.right<e.left,s=t.left>e.right;return r||o||i||s})}function sde(t,n){return n.some(e=>{let r=t.top<e.top,o=t.bottom>e.bottom,i=t.left<e.left,s=t.right>e.right;return r||o||i||s})}var P3=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(n,e,r,o){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=r,this._config=o}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:o}=this._viewportRuler.getViewportSize();$$(e,[{width:r,height:o,bottom:o,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ib=(()=>{class t{_scrollDispatcher=M(Mw);_viewportRuler=M(Jp);_ngZone=M(Rt);_document=M(tn);constructor(){}noop=()=>new rb;close=e=>new F3(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new O3(this._viewportRuler,this._document);reposition=e=>new P3(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hu=class{positionStrategy;scrollStrategy=new rb;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(n){if(n){let e=Object.keys(n);for(let r of e)n[r]!==void 0&&(this[r]=n[r])}}};var B3=class{connectionPair;scrollableViewProperties;constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}};var pde=(()=>{class t{_attachedOverlays=[];_document=M(tn);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hde=(()=>{class t extends pde{_ngZone=M(Rt);_renderer=M(ko).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[o]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fde=(()=>{class t extends pde{_platform=M(oo);_ngZone=M(Rt);_renderer=M(ko).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let r=this._document.body,o={capture:!0};this._cleanups=this._ngZone.runOutsideAngular(()=>[Qp(this._renderer,r,"pointerdown",this._pointerDownListener,o),Qp(this._renderer,r,"click",this._clickListener,o),Qp(this._renderer,r,"auxclick",this._clickListener,o),Qp(this._renderer,r,"contextmenu",this._clickListener,o)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=ua(e)};_clickListener=e=>{let r=ua(e),o=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){let a=i[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(ade(a.overlayElement,r)||ade(a.overlayElement,o))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ade(t,n){let e=typeof ShadowRoot<"u"&&ShadowRoot,r=n;for(;r;){if(r===t)return!0;r=e&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var mde=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,o){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return t})(),sb=(()=>{class t{_platform=M(oo);_containerElement;_document=M(tn);_styleLoader=M(h2);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||P$()){let o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let i=0;i<o.length;i++)o[i].remove()}let r=this._document.createElement("div");r.classList.add(e),P$()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(mde)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),V$=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(n,e,r,o){this._renderer=e,this._ngZone=r,this.element=n.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",o)}detach(){this._ngZone.runOutsideAngular(()=>{let n=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(n,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),n.style.pointerEvents="none",n.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},w2=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ot;_attachments=new ot;_detachments=new ot;_positionStrategy;_scrollStrategy;_locationChanges=Fn.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new ot;_outsidePointerEvents=new ot;_renders=new ot;_afterRenderRef;_afterNextRenderRef;constructor(n,e,r,o,i,s,a,l,c,u=!1,d,p){this._portalOutlet=n,this._host=e,this._pane=r,this._config=o,this._ngZone=i,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=p,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy,this._afterRenderRef=En(()=>k5(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=yi(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=le(le({},this._config),n),this._updateElementSize()}setDirection(n){this._config=ht(le({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=_o(this._config.width),n.height=_o(this._config.height),n.minWidth=_o(this._config.minWidth),n.minHeight=_o(this._config.minHeight),n.maxWidth=_o(this._config.maxWidth),n.maxHeight=_o(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new V$(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(n))}):this._backdropRef.element.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(n,e,r){let o=R$(e||[]).filter(i=>!!i);o.length&&(r?n.classList.add(...o):n.classList.remove(...o))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let n=this._renders.pipe(It(rc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){let n=this._scrollStrategy;n?.disable(),n?.detach?.()}},lde="cdk-overlay-connected-position-bounding-box",eVe=/([A-Za-z%]+)$/,L3=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ot;_resizeSubscription=Fn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(n,e,r,o,i){this._viewportRuler=e,this._document=r,this._platform=o,this._overlayContainer=i,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(lde),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,e=this._overlayRect,r=this._viewportRect,o=this._containerRect,i=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(n,o,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,r)){i.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(i.length){let a=null,l=-1;for(let c of i){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&v2(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(lde),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,r){let o;if(r.originX=="center")o=n.left+n.width/2;else{let s=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;o=r.originX=="start"?s:a}e.left<0&&(o-=e.left);let i;return r.originY=="center"?i=n.top+n.height/2:i=r.originY=="top"?n.top:n.bottom,e.top<0&&(i-=e.top),{x:o,y:i}}_getOverlayPoint(n,e,r){let o;r.overlayX=="center"?o=-e.width/2:r.overlayX==="start"?o=this._isRtl()?-e.width:0:o=this._isRtl()?0:-e.width;let i;return r.overlayY=="center"?i=-e.height/2:i=r.overlayY=="top"?0:-e.height,{x:n.x+o,y:n.y+i}}_getOverlayFit(n,e,r,o){let i=ude(e),{x:s,y:a}=n,l=this._getOffset(o,"x"),c=this._getOffset(o,"y");l&&(s+=l),c&&(a+=c);let u=0-s,d=s+i.width-r.width,p=0-a,h=a+i.height-r.height,f=this._subtractOverflows(i.width,u,d),m=this._subtractOverflows(i.height,p,h),g=f*m;return{visibleArea:g,isCompletelyWithinViewport:i.width*i.height===g,fitsInViewportVertically:m===i.height,fitsInViewportHorizontally:f==i.width}}_canFitWithFlexibleDimensions(n,e,r){if(this._hasFlexibleDimensions){let o=r.bottom-e.y,i=r.right-e.x,s=cde(this._overlayRef.getConfig().minHeight),a=cde(this._overlayRef.getConfig().minWidth),l=n.fitsInViewportVertically||s!=null&&s<=o,c=n.fitsInViewportHorizontally||a!=null&&a<=i;return l&&c}return!1}_pushOverlayOnScreen(n,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let o=ude(e),i=this._viewportRect,s=Math.max(n.x+o.width-i.width,0),a=Math.max(n.y+o.height-i.height,0),l=Math.max(i.top-r.top-n.y,0),c=Math.max(i.left-r.left-n.x,0),u=0,d=0;return o.width<=i.width?u=c||-s:u=n.x<this._viewportMargin?i.left-r.left-n.x:0,o.height<=i.height?d=l||-a:d=n.y<this._viewportMargin?i.top-r.top-n.y:0,this._previousPushAmount={x:u,y:d},{x:n.x+u,y:n.y+d}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!tVe(this._lastScrollVisibility,r)){let o=new B3(n,r);this._positionChanges.next(o)}this._lastScrollVisibility=r}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,o=n.overlayY;n.overlayX==="center"?r="center":this._isRtl()?r=n.overlayX==="start"?"right":"left":r=n.overlayX==="start"?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${r} ${o}`}_calculateBoundingBoxRect(n,e){let r=this._viewportRect,o=this._isRtl(),i,s,a;if(e.overlayY==="top")s=n.y,i=r.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=r.height-n.y+this._viewportMargin*2,i=r.height-a+this._viewportMargin;else{let h=Math.min(r.bottom-n.y+r.top,n.y),f=this._lastBoundingBoxSize.height;i=h*2,s=n.y-h,i>f&&!this._isInitialRender&&!this._growAfterOpen&&(s=n.y-f/2)}let l=e.overlayX==="start"&&!o||e.overlayX==="end"&&o,c=e.overlayX==="end"&&!o||e.overlayX==="start"&&o,u,d,p;if(c)p=r.width-n.x+this._viewportMargin*2,u=n.x-this._viewportMargin;else if(l)d=n.x,u=r.right-n.x;else{let h=Math.min(r.right-n.x+r.left,n.x),f=this._lastBoundingBoxSize.width;u=h*2,d=n.x-h,u>f&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.x-f/2)}return{top:s,left:d,bottom:a,right:p,width:u,height:i}}_setBoundingBoxStyles(n,e){let r=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=_o(r.height),o.top=_o(r.top),o.bottom=_o(r.bottom),o.width=_o(r.width),o.left=_o(r.left),o.right=_o(r.right),e.overlayX==="center"?o.alignItems="center":o.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?o.justifyContent="center":o.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",i&&(o.maxHeight=_o(i)),s&&(o.maxWidth=_o(s))}this._lastBoundingBoxSize=r,v2(this._boundingBox.style,o)}_resetBoundingBoxStyles(){v2(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){v2(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){let r={},o=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let u=this._viewportRuler.getViewportScrollPosition();v2(r,this._getExactOverlayY(e,n,u)),v2(r,this._getExactOverlayX(e,n,u))}else r.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(o?r.maxHeight=_o(s.maxHeight):i&&(r.maxHeight="")),s.maxWidth&&(o?r.maxWidth=_o(s.maxWidth):i&&(r.maxWidth="")),v2(this._pane.style,r)}_getExactOverlayY(n,e,r){let o={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,n);if(this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r)),n.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(i.y+this._overlayRect.height)}px`}else o.top=_o(i.y);return o}_getExactOverlayX(n,e,r){let o={left:"",right:""},i=this._getOverlayPoint(e,this._overlayRect,n);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r));let s;if(this._isRtl()?s=n.overlayX==="end"?"left":"right":s=n.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;o.right=`${a-(i.x+this._overlayRect.width)}px`}else o.left=_o(i.x);return o}_getScrollVisibility(){let n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:sde(n,r),isOriginOutsideView:$$(n,r),isOverlayClipped:sde(e,r),isOverlayOutsideView:$$(e,r)}}_subtractOverflows(n,...e){return e.reduce((r,o)=>r-Math.max(o,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+n-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return e==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&R$(n).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof _t)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let e=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+e,height:r,width:e}}};function v2(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function cde(t){if(typeof t!="number"&&t!=null){let[n,e]=t.split(eVe);return!e||e==="px"?parseFloat(n):null}return t||null}function ude(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function tVe(t,n){return t===n?!0:t.isOriginClipped===n.isOriginClipped&&t.isOriginOutsideView===n.isOriginOutsideView&&t.isOverlayClipped===n.isOverlayClipped&&t.isOverlayOutsideView===n.isOverlayOutsideView}var V3=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],z$=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}],dde="cdk-global-overlay-wrapper",$3=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(n){let e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(dde),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:o,height:i,maxWidth:s,maxHeight:a}=r,l=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(i==="100%"||i==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",h="",f="",m="";l?m="flex-start":u==="center"?(m="center",p?f=d:h=d):p?u==="left"||u==="end"?(m="flex-end",h=d):(u==="right"||u==="start")&&(m="flex-start",f=d):u==="left"||u==="start"?(m="flex-start",h=d):(u==="right"||u==="end")&&(m="flex-end",f=d),n.position=this._cssPosition,n.marginLeft=l?"0":h,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":f,e.justifyContent=m,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(dde),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},ab=(()=>{class t{_viewportRuler=M(Jp);_document=M(tn);_platform=M(oo);_overlayContainer=M(sb);constructor(){}global(){return new $3}flexibleConnectedTo(e){return new L3(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vs=(()=>{class t{scrollStrategies=M(ib);_overlayContainer=M(sb);_positionBuilder=M(ab);_keyboardDispatcher=M(hde);_injector=M(Zt);_ngZone=M(Rt);_document=M(tn);_directionality=M(gi);_location=M(mc);_outsideClickDispatcher=M(fde);_animationsModuleType=M(bm,{optional:!0});_idGenerator=M(Df);_renderer=M(ko).createRenderer(null,null);_appRef;_styleLoader=M(h2);constructor(){}create(e){this._styleLoader.load(mde);let r=this._createHostElement(),o=this._createPaneElement(r),i=this._createPortalOutlet(o),s=new Hu(e);return s.direction=s.direction||this._directionality.value,new w2(i,r,o,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(io),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){let r=this._document.createElement("div");return r.id=this._idGenerator.getId("cdk-overlay-"),r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ll)),new nb(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nVe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],gde=new Me("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=M(vs);return()=>t.scrollStrategies.reposition()}}),ob=(()=>{class t{elementRef=M(_t);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),Ew=(()=>{class t{_overlay=M(vs);_dir=M(gi,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=Fn.EMPTY;_attachSubscription=Fn.EMPTY;_detachSubscription=Fn.EMPTY;_positionSubscription=Fn.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=M(gde);_disposeOnNavigation=!1;_ngZone=M(Rt);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new Qt;positionChange=new Qt;attach=new Qt;detach=new Qt;overlayKeydown=new Qt;overlayOutsideClick=new Qt;constructor(){let e=M(Gn),r=M(_r);this._templatePortal=new zu(e,r),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=nVe);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),r.keyCode===27&&!this.disableClose&&!$r(r)&&(r.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{let o=this._getOriginElement(),i=ua(r);(!o||o!==i&&!o.contains(i))&&this.overlayOutsideClick.next(r)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),r=new Hu({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(r.width=this.width),(this.height||this.height===0)&&(r.height=this.height),(this.minWidth||this.minWidth===0)&&(r.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(e){let r=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof ob?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof ob?this.origin.elementRef.nativeElement:this.origin instanceof _t?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(EA(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",nt],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",nt],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",nt],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",nt],push:[2,"cdkConnectedOverlayPush","push",nt],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",nt]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Dr]})}return t})();function rVe(t){return()=>t.scrollStrategies.reposition()}var oVe={provide:gde,deps:[vs],useFactory:rVe},lb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({providers:[vs,oVe],imports:[tb,R3,Tw,Tw]})}return t})();function vde(t){return t.buttons===0||t.detail===0}function wde(t){let n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var cb;function yde(){if(cb==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cb=!0}))}finally{cb=cb||!1}return cb}function y2(t){return yde()?t:!!t.capture}var xde=new Me("cdk-input-modality-detector-options"),_de={ignoreKeys:[18,17,224,91,16]},kde=650,H$={passive:!0,capture:!0},db=(()=>{class t{_platform=M(oo);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Zn(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(r=>r===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ua(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<kde||(this._modality.next(vde(e)?"keyboard":"mouse"),this._mostRecentTarget=ua(e))};_onTouchstart=e=>{if(wde(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ua(e)};constructor(){let e=M(Rt),r=M(tn),o=M(xde,{optional:!0});if(this._options=le(le({},_de),o),this.modalityDetected=this._modality.pipe(im(1)),this.modalityChanged=this.modalityDetected.pipe(H2()),this._platform.isBrowser){let i=M(ko).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[Qp(i,r,"keydown",this._onKeydown,H$),Qp(i,r,"mousedown",this._onMousedown,H$),Qp(i,r,"touchstart",this._onTouchstart,H$)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ub=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(ub||{}),bde=new Me("cdk-focus-monitor-default-options"),j3=y2({passive:!0,capture:!0}),th=(()=>{class t{_ngZone=M(Rt);_platform=M(oo);_inputModalityDetector=M(db);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=M(tn,{optional:!0});_stopInputModalityDetector=new ot;constructor(){let e=M(bde,{optional:!0});this._detectionMode=e?.detectionMode||ub.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let r=ua(e);for(let o=r;o;o=o.parentElement)e.type==="focus"?this._onFocus(e,o):this._onBlur(e,o)};monitor(e,r=!1){let o=Yp(e);if(!this._platform.isBrowser||o.nodeType!==1)return lt();let i=ede(o)||this._getDocument(),s=this._elementInfo.get(o);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new ot,rootNode:i};return this._elementInfo.set(o,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let r=Yp(e),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(e,r,o){let i=Yp(e),s=this._getDocument().activeElement;i===s?this._getClosestElementsInfo(i).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),typeof i.focus=="function"&&i.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===ub.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused",r==="touch"),e.classList.toggle("cdk-keyboard-focused",r==="keyboard"),e.classList.toggle("cdk-mouse-focused",r==="mouse"),e.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&r,this._detectionMode===ub.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?kde:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(e,r){let o=this._elementInfo.get(r),i=ua(e);!o||!o.checkChildren&&r!==i||this._originChanged(r,this._getFocusOrigin(i),o)}_onBlur(e,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let r=e.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,j3),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,j3)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(It(this._stopInputModalityDetector)).subscribe(i=>{this._setOrigin(i,!0)}))}_removeGlobalListeners(e){let r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,j3),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,j3),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,o){this._setClasses(e,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){let r=[];return this._elementInfo.forEach((o,i)=>{(i===e||o.checkChildren&&i.contains(e))&&r.push([i,o])}),r}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let i=e.labels;if(i){for(let s=0;s<i.length;s++)if(i[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var z3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,o){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return t})();function pVe(t){if(t.type==="characterData"&&t.target instanceof Comment)return!0;if(t.type==="childList"){for(let n=0;n<t.addedNodes.length;n++)if(!(t.addedNodes[n]instanceof Comment))return!1;for(let n=0;n<t.removedNodes.length;n++)if(!(t.removedNodes[n]instanceof Comment))return!1;return!0}return!1}var Cde=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sde=(()=>{class t{_mutationObserverFactory=M(Cde);_observedElements=new Map;_ngZone=M(Rt);constructor(){}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){let r=Yp(e);return new en(o=>{let s=this._observeElement(r).pipe(At(a=>a.filter(l=>!pVe(l))),kn(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{o.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(e))this._observedElements.get(e).count++;else{let r=new ot,o=this._mutationObserverFactory.create(i=>r.next(i));o&&o.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:o,stream:r,count:1})}return this._observedElements.get(e).stream})}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){let{observer:r,stream:o}=this._observedElements.get(e);r&&r.disconnect(),o.complete(),this._observedElements.delete(e)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),U$=(()=>{class t{_contentObserver=M(Sde);_elementRef=M(_t);event=new Qt;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(e){this._debounce=Sw(e),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let e=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?e.pipe(ma(this.debounce)):e).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",nt],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return t})();var W$=(()=>{class t{_platform=M(oo);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return fVe(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let r=hVe(kVe(e));if(r&&(Mde(r)===-1||!this.isVisible(r)))return!1;let o=e.nodeName.toLowerCase(),i=Mde(e);return e.hasAttribute("contenteditable")?i!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!xVe(e)?!1:o==="audio"?e.hasAttribute("controls")?i!==-1:!1:o==="video"?i===-1?!1:i!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,r){return _Ve(e)&&!this.isDisabled(e)&&(r?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hVe(t){try{return t.frameElement}catch{return null}}function fVe(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function mVe(t){let n=t.nodeName.toLowerCase();return n==="input"||n==="select"||n==="button"||n==="textarea"}function gVe(t){return wVe(t)&&t.type=="hidden"}function vVe(t){return yVe(t)&&t.hasAttribute("href")}function wVe(t){return t.nodeName.toLowerCase()=="input"}function yVe(t){return t.nodeName.toLowerCase()=="a"}function Tde(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let n=t.getAttribute("tabindex");return!!(n&&!isNaN(parseInt(n,10)))}function Mde(t){if(!Tde(t))return null;let n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}function xVe(t){let n=t.nodeName.toLowerCase(),e=n==="input"&&t.type;return e==="text"||e==="password"||n==="select"||n==="textarea"}function _Ve(t){return gVe(t)?!1:mVe(t)||vVe(t)||t.hasAttribute("contenteditable")||Tde(t)}function kVe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var G$=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_enabled=!0;constructor(n,e,r,o,i=!1,s){this._element=n,this._checker=e,this._ngZone=r,this._document=o,this._injector=s,i||this.attachAnchors()}destroy(){let n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){let e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return n=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let r=this._getFirstTabbableElement(e);return r?.focus(n),!!r}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){let e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){let e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let r=0;r<e.length;r++){let o=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(o)return o}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let r=e.length-1;r>=0;r--){let o=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(o)return o}return null}_createAnchor(){let n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?yi(n,{injector:this._injector}):setTimeout(n)}},Dde=(()=>{class t{_checker=M(W$);_ngZone=M(Rt);_document=M(tn);_injector=M(Zt);constructor(){M(h2).load(z3)}create(e,r=!1){return new G$(e,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bVe(t,n){}var Iw=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var CVe=(()=>{class t extends g2{_elementRef=M(_t);_focusTrapFactory=M(Dde);_config;_interactivityChecker=M(W$);_ngZone=M(Rt);_overlayRef=M(w2);_focusMonitor=M(th);_renderer=M(Zr);_platform=M(oo);_document=M(tn,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=M(kr);_injector=M(Zt);_isDestroyed=!1;constructor(){super(),this._config=M(Iw,{optional:!0})||new Iw,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let r=this._ariaLabelledByQueue.indexOf(e);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),r}attachTemplatePortal(e){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),r}attachDomPortal=e=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i(),s(),e.removeAttribute("tabindex")},i=this._renderer.listen(e,"blur",o),s=this._renderer.listen(e,"mousedown",o)})),e.focus(r)}_focusByCssSelector(e,r){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,r)}_trapFocus(){this._isDestroyed||yi(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,r=null;if(typeof e=="string"?r=this._document.querySelector(e):typeof e=="boolean"?r=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(r=e),this._config.restoreFocus&&r&&typeof r.focus=="function"){let o=T3(),i=this._elementRef.nativeElement;(!o||o===this._document.body||o===i||i.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,r=T3();return e===r||e.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=T3()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(r&1&&Em(A3,7),r&2){let i;Er(i=Ir())&&(o._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){r&2&&Bt("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Mn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){r&1&&st(0,bVe,0,0,"ng-template",0)},dependencies:[A3],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})(),pb=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new ot;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,e){this.overlayRef=n,this.config=e,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!$r(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(n,e){if(this.containerInstance){let r=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(n),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},SVe=new Me("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=M(vs);return()=>t.scrollStrategies.block()}}),K$=new Me("DialogData"),MVe=new Me("DefaultDialogConfig");var Ede=(()=>{class t{_overlay=M(vs);_injector=M(Zt);_defaultOptions=M(MVe,{optional:!0});_parentDialog=M(t,{optional:!0,skipSelf:!0});_overlayContainer=M(sb);_idGenerator=M(Df);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ot;_afterOpenedAtThisLevel=new ot;_ariaHiddenElements=new Map;_scrollStrategy=M(SVe);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=id(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ga(void 0)));constructor(){}open(e,r){let o=this._defaultOptions||new Iw;r=le(le({},o),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let i=this._getOverlayConfig(r),s=this._overlay.create(i),a=new pb(s,r),l=this._attachContainer(s,a,r);return a.containerInstance=l,this._attachDialogContent(e,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){q$(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){q$(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),q$(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let r=new Hu({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(r.backdropClass=e.backdropClass),r}_attachContainer(e,r,o){let i=o.injector||o.viewContainerRef?.injector,s=[{provide:Iw,useValue:o},{provide:pb,useValue:r},{provide:w2,useValue:e}],a;o.container?typeof o.container=="function"?a=o.container:(a=o.container.type,s.push(...o.container.providers(o))):a=CVe;let l=new eh(a,o.viewContainerRef,Zt.create({parent:i||this._injector,providers:s}));return e.attach(l).instance}_attachDialogContent(e,r,o,i){if(e instanceof Gn){let s=this._createInjector(i,r,o,void 0),a={$implicit:i.data,dialogRef:r};i.templateContext&&(a=le(le({},a),typeof i.templateContext=="function"?i.templateContext():i.templateContext)),o.attachTemplatePortal(new zu(e,null,a,s))}else{let s=this._createInjector(i,r,o,this._injector),a=o.attachComponentPortal(new eh(e,i.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(e,r,o,i){let s=e.injector||e.viewContainerRef?.injector,a=[{provide:K$,useValue:e.data},{provide:pb,useValue:r}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(r,e,o)):a.push(...e.providers)),e.direction&&(!s||!s.get(gi,null,{optional:!0}))&&a.push({provide:gi,useValue:{value:e.direction,change:lt()}}),Zt.create({parent:s||i,providers:a})}_removeOpenDialog(e,r){let o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let r=e.parentElement.children;for(let o=r.length-1;o>-1;o--){let i=r[o];i!==e&&i.nodeName!=="SCRIPT"&&i.nodeName!=="STYLE"&&!i.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function q$(t,n){let e=t.length;for(;e--;)n(t[e])}var TVe=["*"],Nw=(t,n="")=>{if(typeof t=="string"){let e=t.trim().split(" ");return e.length===0?[n]:e}return t??[]},ws=class{_cdkDialogRef;_open;state;dialogId;_options;_closing$=new ot;closing$=this._closing$.asObservable();closed$;_previousTimeout;get open(){return this.state()==="open"}constructor(n,e,r,o,i){this._cdkDialogRef=n,this._open=e,this.state=r,this.dialogId=o,this._options=i,this.closed$=this._cdkDialogRef.closed.pipe(Vr(1))}close(n,e=this._options?.closeDelay??0){!this.open||this._options?.disableClose||(this._closing$.next(),this._open.set(!1),this._previousTimeout&&clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._cdkDialogRef.close(n)},e))}setPanelClass(n){this._cdkDialogRef.config.panelClass=Nw(n)}setOverlayClass(n){this._cdkDialogRef.config.backdropClass=Nw(n)}setAriaDescribedBy(n){this._cdkDialogRef.config.ariaDescribedBy=n}setAriaLabelledBy(n){this._cdkDialogRef.config.ariaLabelledBy=n}setAriaLabel(n){this._cdkDialogRef.config.ariaLabel=n}},Ide=(()=>{class t{_brnDialogRef=M(ws);delay=Z(void 0,{transform:Sw});close(){this._brnDialogRef.close(void 0,this.delay())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["button","brnDialogClose",""]],hostBindings:function(r,o){r&1&&Le("click",function(){return o.close()})},inputs:{delay:[1,"delay"]}})}return t})(),Z$={attachPositions:[],autoFocus:"first-tabbable",closeDelay:100,closeOnBackdropClick:!0,closeOnOutsidePointerEvents:!1,disableClose:!1,hasBackdrop:!0,positionStrategy:null,restoreFocus:!0,role:"dialog",scrollStrategy:null},Nde=new Me("brn-dialog-default-options",{providedIn:"root",factory:()=>Z$});function Ade(t){return{provide:Nde,useValue:le(le({},Z$),t)}}function DVe(){return M(Nde,{optional:!0})??Z$}var EVe=0;var Uu=(t={})=>M(K$,t),X$=(()=>{class t{_cdkDialog=M(Ede);_rendererFactory=M(ko);_renderer=this._rendererFactory.createRenderer(null,null);_positionBuilder=M(ab);_sso=M(ib);_injector=M(Zt);open(e,r,o,i){if(i?.id&&this._cdkDialog.getDialogById(i.id))throw new Error(`Dialog with ID: ${i.id} already exists`);let s=i?.positionStrategy??(i?.attachTo&&i?.attachPositions&&i?.attachPositions?.length>0?this._positionBuilder?.flexibleConnectedTo(i.attachTo).withPositions(i.attachPositions??[]):this._positionBuilder.global().centerHorizontally().centerVertically()),a,l,c=ht(le({},o),{close:(v=void 0)=>a.close(v,i?.closeDelay)}),u=new ot,d=Ze(!0),p=ae(()=>d()?"open":"closed"),h=EVe++,f=this._cdkDialog.open(e,{id:i?.id??`brn-dialog-${h}`,role:i?.role,viewContainerRef:r,templateContext:()=>({$implicit:c}),data:c,hasBackdrop:i?.hasBackdrop,panelClass:Nw(i?.panelClass),backdropClass:Nw(i?.backdropClass,"bg-transparent"),positionStrategy:s,scrollStrategy:i?.scrollStrategy??this._sso?.block(),restoreFocus:i?.restoreFocus,disableClose:!0,autoFocus:i?.autoFocus??"first-tabbable",ariaDescribedBy:i?.ariaDescribedBy??`brn-dialog-description-${h}`,ariaLabelledBy:i?.ariaLabelledBy??`brn-dialog-title-${h}`,ariaLabel:i?.ariaLabel,ariaModal:i?.ariaModal,providers:v=>{a=new ws(v,d,p,h,i),Ho(this._injector,()=>{l=Tt(()=>{m&&this._renderer.setAttribute(m,"data-state",p()),g&&this._renderer.setAttribute(g,"data-state",p())})});let w=[{provide:ws,useValue:a}];return i?.providers&&(typeof i.providers=="function"&&w.push(...i.providers()),Array.isArray(i.providers)&&w.push(...i.providers)),w}}),m=f.overlayRef.overlayElement,g=f.overlayRef.backdropElement;return i?.closeOnOutsidePointerEvents&&f.outsidePointerEvents.pipe(It(u)).subscribe(()=>{a.close(void 0,i?.closeDelay)}),i?.closeOnBackdropClick&&f.backdropClick.pipe(It(u)).subscribe(()=>{a.close(void 0,i?.closeDelay)}),i?.disableClose||f.keydownEvents.pipe(kn(v=>v.key==="Escape"),It(u)).subscribe(()=>{a.close(void 0,i?.closeDelay)}),f.closed.pipe(It(u)).subscribe(()=>{l?.destroy(),u.next()}),a}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),H3=(()=>{class t{_dialogService=M(X$);_vcr=M(_r);positionBuilder=M(ab);ssos=M(ib);_injector=M(Zt);_defaultOptions=DVe();_context={};stateComputed=ae(()=>this._dialogRef()?.state()??"closed");_contentTemplate;_dialogRef=Ze(void 0);_dialogStateEffectRef;_backdropClass=Ze(null);_panelClass=Ze(null);closed=Vn();stateChanged=Vn();state=Z(null);role=Z(this._defaultOptions.role);hasBackdrop=Z(this._defaultOptions.hasBackdrop,{transform:nt});positionStrategy=Z(this._defaultOptions.positionStrategy);mutablePositionStrategy=ae(()=>Ze(this.positionStrategy()));_positionStrategyState=ae(()=>this.mutablePositionStrategy()());scrollStrategy=Z(this._defaultOptions.scrollStrategy);_options=ae(()=>{let e=this.scrollStrategy(),r;return e==="close"?r=this.ssos.close():e==="reposition"?r=this.ssos.reposition():r=e,{role:this.role(),hasBackdrop:this.hasBackdrop(),positionStrategy:this._positionStrategyState(),scrollStrategy:r,restoreFocus:this.restoreFocus(),closeOnOutsidePointerEvents:this._closeOnOutsidePointerEventsState(),closeOnBackdropClick:this.closeOnBackdropClick(),attachTo:this._attachToState(),attachPositions:this._attachPositionsState(),autoFocus:this.autoFocus(),closeDelay:this.closeDelay(),disableClose:this.disableClose(),backdropClass:this._backdropClass()??"",panelClass:this._panelClass()??"",ariaDescribedBy:this._ariaDescribedByState(),ariaLabelledBy:this._ariaLabelledByState(),ariaLabel:this._ariaLabelState(),ariaModal:this._ariaModalState()}});constructor(){Tt(()=>{let e=this.state();e==="open"&&En(()=>this.open()),e==="closed"&&En(()=>this.close())})}restoreFocus=Z(this._defaultOptions.restoreFocus);closeOnOutsidePointerEvents=Z(this._defaultOptions.closeOnOutsidePointerEvents,{transform:nt});mutableCloseOnOutsidePointerEvents=ae(()=>Ze(this.closeOnOutsidePointerEvents()));_closeOnOutsidePointerEventsState=ae(()=>this.mutableCloseOnOutsidePointerEvents()());closeOnBackdropClick=Z(this._defaultOptions.closeOnBackdropClick,{transform:nt});attachTo=Z(null);mutableAttachTo=ae(()=>Ze(this.attachTo()));_attachToState=ae(()=>this.mutableAttachTo()());attachPositions=Z(this._defaultOptions.attachPositions);mutableAttachPositions=ae(()=>Ze(this.attachPositions()));_attachPositionsState=ae(()=>this.mutableAttachPositions()());autoFocus=Z(this._defaultOptions.autoFocus);closeDelay=Z(this._defaultOptions.closeDelay,{transform:_i});disableClose=Z(this._defaultOptions.disableClose,{transform:nt});ariaDescribedBy=Z(null,{alias:"aria-describedby"});_mutableAriaDescribedBy=ae(()=>Ze(this.ariaDescribedBy()));_ariaDescribedByState=ae(()=>this._mutableAriaDescribedBy()());ariaLabelledBy=Z(null,{alias:"aria-labelledby"});_mutableAriaLabelledBy=ae(()=>Ze(this.ariaLabelledBy()));_ariaLabelledByState=ae(()=>this._mutableAriaLabelledBy()());ariaLabel=Z(null,{alias:"aria-label"});_mutableAriaLabel=ae(()=>Ze(this.ariaLabel()));_ariaLabelState=ae(()=>this._mutableAriaLabel()());ariaModal=Z(!0,{alias:"aria-modal",transform:nt});_mutableAriaModal=ae(()=>Ze(this.ariaModal()));_ariaModalState=ae(()=>this._mutableAriaModal()());open(){if(!this._contentTemplate||this._dialogRef())return;this._dialogStateEffectRef?.destroy();let e=this._dialogService.open(this._contentTemplate,this._vcr,this._context,this._options());this._dialogRef.set(e),Ho(this._injector,()=>{this._dialogStateEffectRef=Tt(()=>{let r=e.state();En(()=>this.stateChanged.emit(r))})}),e.closed$.pipe(Vr(1)).subscribe(r=>{this._dialogRef.set(void 0),this.closed.emit(r)})}close(e,r){this._dialogRef()?.close(e,r??this._options().closeDelay)}registerTemplate(e){this._contentTemplate=e}setOverlayClass(e){this._backdropClass.set(e),this._dialogRef()?.setOverlayClass(e)}setPanelClass(e){this._panelClass.set(e??""),this._dialogRef()?.setPanelClass(e)}setContext(e){this._context=le(le({},this._context),e)}setAriaDescribedBy(e){this._mutableAriaDescribedBy().set(e),this._dialogRef()?.setAriaDescribedBy(e)}setAriaLabelledBy(e){this._mutableAriaLabelledBy().set(e),this._dialogRef()?.setAriaLabelledBy(e)}setAriaLabel(e){this._mutableAriaLabel().set(e),this._dialogRef()?.setAriaLabel(e)}setAriaModal(e){this._mutableAriaModal().set(e)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-dialog"]],inputs:{state:[1,"state"],role:[1,"role"],hasBackdrop:[1,"hasBackdrop"],positionStrategy:[1,"positionStrategy"],scrollStrategy:[1,"scrollStrategy"],restoreFocus:[1,"restoreFocus"],closeOnOutsidePointerEvents:[1,"closeOnOutsidePointerEvents"],closeOnBackdropClick:[1,"closeOnBackdropClick"],attachTo:[1,"attachTo"],attachPositions:[1,"attachPositions"],autoFocus:[1,"autoFocus"],closeDelay:[1,"closeDelay"],disableClose:[1,"disableClose"],ariaDescribedBy:[1,"aria-describedby","ariaDescribedBy"],ariaLabelledBy:[1,"aria-labelledby","ariaLabelledBy"],ariaLabel:[1,"aria-label","ariaLabel"],ariaModal:[1,"aria-modal","ariaModal"]},outputs:{closed:"closed",stateChanged:"stateChanged"},exportAs:["brnDialog"],ngContentSelectors:TVe,decls:1,vars:0,template:function(r,o){r&1&&(Ot(),it(0))},encapsulation:2,changeDetection:0})}return t})();var Rde=(()=>{class t{_brnDialogRef=M(ws);_id=Ze(`brn-dialog-description-${this._brnDialogRef?.dialogId}`);constructor(){Tt(()=>{this._brnDialogRef.setAriaDescribedBy(this._id())})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnDialogDescription",""]],hostVars:1,hostBindings:function(r,o){r&2&&Xr("id",o._id())}})}return t})(),Ode=(()=>{class t{_brnDialog=M(H3);className=Z(void 0,{alias:"class"});setClassToCustomElement(e){this._brnDialog.setOverlayClass(e)}constructor(){Tt(()=>{if(!this._brnDialog)return;let e=this.className();En(()=>this._brnDialog.setOverlayClass(e))})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-dialog-overlay"]],inputs:{className:[1,"class","className"]},features:[ut([Nue(()=>t)])],decls:0,vars:0,template:function(r,o){},encapsulation:2,changeDetection:0})}return t})(),Fde=(()=>{class t{_brnDialogRef=M(ws);_id=Ze(`brn-dialog-title-${this._brnDialogRef?.dialogId}`);constructor(){Tt(()=>{this._brnDialogRef.setAriaLabelledBy(this._id())})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnDialogTitle",""]],hostVars:1,hostBindings:function(r,o){r&2&&Xr("id",o._id())}})}return t})();var Pde={role:"dialog",attachPositions:[],attachTo:null,autoFocus:"first-tabbable",backdropClass:"",closeDelay:100,closeOnBackdropClick:!0,closeOnOutsidePointerEvents:!1,hasBackdrop:!0,panelClass:"",positionStrategy:null,restoreFocus:!0,scrollStrategy:null,disableClose:!1,ariaLabel:void 0,ariaModal:!0};var Lde={size:"base"},$de=new Me("HlmIconConfig");function Vde(t){return{provide:$de,useValue:le(le({},Lde),t)}}function jde(){return M($de,{optional:!0})??Lde}var po=class t{_config=jde();size=Z(this._config.size);_computedSize=ae(()=>{let n=this.size();switch(n){case"xs":return"12px";case"sm":return"16px";case"base":return"24px";case"lg":return"32px";case"xl":return"48px";default:return n}});static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["ng-icon","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&fc("--ng-icon__size",r._computedSize())},inputs:{size:[1,"size"]}})};var IVe=["*"];function NVe(t,n){if(t&1&&tr(0,0),t&2){let e=xe();Pe("ngComponentOutlet",e.component)}}function AVe(t,n){t&1&&it(0)}var hb=class t{_dialogRef=M(ws);_dialogContext=Uu({optional:!0});state=ae(()=>this._dialogRef?.state()??"closed");component=this._dialogContext?.$component;_dynamicComponentClass=this._dialogContext?.$dynamicComponentClass;userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("border-border grid w-full max-w-lg relative gap-4 border bg-background p-6 shadow-lg [animation-duration:200] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[2%]  data-[state=open]:slide-in-from-top-[2%] sm:rounded-lg md:w-full",this.userClass(),this._dynamicComponentClass));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-dialog-content"]],hostVars:3,hostBindings:function(e,r){e&2&&(Bt("data-state",r.state()),$e(r._computedClass()))},inputs:{userClass:[1,"class","userClass"]},features:[ut([sr({lucideX:M3})])],ngContentSelectors:IVe,decls:6,vars:1,consts:[[3,"ngComponentOutlet"],["brnDialogClose","","hlm",""],[1,"sr-only"],["hlm","","size","sm","name","lucideX"]],template:function(e,r){e&1&&(Ot(),st(0,NVe,1,1,"ng-container",0)(1,AVe,1,0),X(2,"button",1)(3,"span",2),ue(4,"Close"),re(),Ve(5,"ng-icon",3),re()),e&2&&kt(r.component?0:1)},dependencies:[Jy,Ide,p2,ar,po],encapsulation:2,changeDetection:0})};var fb=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("text-sm text-muted-foreground",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmDialogDescription",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([Rde])]})};var RVe=["*"],x2=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-dialog-footer"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:RVe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var OVe=["*"],Ql=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("flex flex-col space-y-1.5 text-center sm:text-left",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-dialog-header"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:OVe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var Y$="bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",mb=class t{_classSettable=Iue({optional:!0,host:!0});userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(Y$,this.userClass()));constructor(){Tt(()=>{let n=this._computedClass();En(()=>this._classSettable?.setClassToCustomElement(n))})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmDialogOverlay",""],["brn-dialog-overlay","hlm",""]],inputs:{userClass:[1,"class","userClass"]}})};var Jl=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("text-lg font-semibold leading-none tracking-tight",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmDialogTitle",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([Fde])]})};var FVe=["*"],Q$=class t extends H3{static \u0275fac=(()=>{let n;return function(r){return(n||(n=Kr(t)))(r||t)}})();static \u0275cmp=Ie({type:t,selectors:[["hlm-dialog"]],exportAs:["hlmDialog"],features:[ut([{provide:H3,useExisting:wi(()=>t)},Ade({})]),Mn],ngContentSelectors:FVe,decls:2,vars:0,consts:[["hlm",""]],template:function(e,r){e&1&&(Ot(),Ve(0,"brn-dialog-overlay",0),it(1))},dependencies:[Ode,mb],encapsulation:2,changeDetection:0})};var Ef=class t{_brnDialogService=M(X$);open(n,e){let r=ht(le(le({},Pde),e??{}),{backdropClass:Nw(`${Y$} ${e?.backdropClass??""}`),context:ht(le({},e?.context??{}),{$component:n,$dynamicComponentClass:e?.contentClass})});return this._brnDialogService.open(hb,void 0,r.context,r)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})};var Aw=(t,n)=>Math.floor(Math.random()*(n-t+1))+t;var zde=(t,n)=>{let e=Math.random()+Math.random()+Math.random();return Math.max(1,Math.floor(t+n*(e-1.5)))};var gb=class gb{_state;get state(){return this._state}get enabled(){return this._state!=="disabled"&&this._models!==void 0}set enabled(n){this._state=this._models!==void 0&&n?"waiting":"disabled"}_models;get models(){return this._models?Object.values(this._models).map(({id:n,name:e})=>({id:n,name:e})):[]}_model;get model(){return this._model}set model(n){n&&this._models?this._model=n:this._model=void 0,this._state="waiting"}constructor(){this._state="disabled",this._model=void 0,this._models=void 0,Yl.instance.models$.subscribe(n=>this.loadModels(n))}loadModels(n){if(n){this._models={};for(let{id:e,name:r,model:o,script:i}of n)this._models[e]={id:e,name:r,model:o,analyze:i(_$,o).analyze}}else this._state="disabled",this._models=void 0}analyze(n){try{if(this.enabled){let e=this._models?.[this._model??""];if(e){let r=e.analyze(n);typeof r=="boolean"?r?this._state="attack":this._state="safe":this._state="waiting"}}}catch(e){console.error(e)}}toObject(){return{enabled:this._state!=="disabled",model:this.model}}static fromObject(n){let e=new gb;return n.enabled&&(e._state="waiting"),n.model&&(e._model=n.model),e}};_s([Lr.SetState],gb.prototype,"enabled",1),_s([Lr.SetState],gb.prototype,"model",1);var vb=gb;var Rw=class Rw{_queue;_processing;node1;node2;_latency;get latency(){return this._latency}set latency(n){if(n<0)throw new Error("The latency cannot be negative");this._latency=n}_latencyVariation;get latencyVariation(){return this._latencyVariation}set latencyVariation(n){if(n<0)throw new Error("The latency variation cannot be negative");this._latencyVariation=n}_bandwidth;get bandwidth(){return this._bandwidth}set bandwidth(n){if(n<=0)throw new Error("The bandwidth cannot be negative or zero");this._bandwidth=n}_status;get status(){return this._status}_cyberShield;get cyberShield(){return this._cyberShield}constructor(n,e,r,o,i,s){this._queue=[],this._processing=!1,this.node1=n,this.node2=e,this._latency=r??Aw(0,1e3),this._latencyVariation=o??0,this._bandwidth=i??Aw(1e5,1e6),this._status=0,this._cyberShield=s??new vb}_processQueue(){return z(this,null,function*(){if(!(this._processing||this._queue.length===0)){for(this._processing=!0;this._queue.length>0;){let n=this._queue.shift(),e;n.dstIP===this.node2.ip?(this._status=1,e=this.node2):(this._status=2,e=this.node1);let r=zde(this._latency,this._latencyVariation),o=n.totalBytes/this._bandwidth*1e3;yield new Promise(i=>setTimeout(i,r+o)),this.cyberShield.analyze(n),e.receivePacket(n)}this._processing=!1,this._status=0}})}spreadPacket(n){this._queue.push(n),this._processQueue()}toObject(){return{latency:this.latency,latencyVariation:this.latencyVariation,bandwidth:this.bandwidth,cyberShield:this.cyberShield.toObject()}}static fromObject(n,e,r){return new Rw(n,e,r.latency,r.latencyVariation,r.bandwidth,vb.fromObject(r.cyberShield))}};_s([Lr.SetState],Rw.prototype,"latency",1),_s([Lr.SetState],Rw.prototype,"latencyVariation",1),_s([Lr.SetState],Rw.prototype,"bandwidth",1);var Ow=Rw;var Xde=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||t)(qt(Zr),qt(_t))};static \u0275dir=me({type:t})}return t})(),Yde=(()=>{class t extends Xde{static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275dir=me({type:t,features:[Mn]})}return t})(),k2=new Me("");var BVe={provide:k2,useExisting:wi(()=>Nf),multi:!0};function LVe(){let t=xa()?xa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var $Ve=new Me(""),Nf=(()=>{class t extends Xde{_compositionMode;_composing=!1;constructor(e,r,o){super(e,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!LVe())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||t)(qt(Zr),qt(_t),qt($Ve,8))};static \u0275dir=me({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Le("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[ut([BVe]),Mn]})}return t})();var rV=new Me(""),oV=new Me("");function Qde(t){return t!=null}function Jde(t){return Mm(t)?Xn(t):t}function epe(t){let n={};return t.forEach(e=>{n=e!=null?le(le({},n),e):n}),Object.keys(n).length===0?null:n}function tpe(t,n){return n.map(e=>e(t))}function VVe(t){return!t.validate}function npe(t){return t.map(n=>VVe(n)?n:e=>n.validate(e))}function jVe(t){if(!t)return null;let n=t.filter(Qde);return n.length==0?null:function(e){return epe(tpe(e,n))}}function iV(t){return t!=null?jVe(npe(t)):null}function zVe(t){if(!t)return null;let n=t.filter(Qde);return n.length==0?null:function(e){let r=tpe(e,n).map(Jde);return xy(r).pipe(At(epe))}}function sV(t){return t!=null?zVe(npe(t)):null}function Hde(t,n){return t===null?[n]:Array.isArray(t)?[...t,n]:[t,n]}function rpe(t){return t._rawValidators}function ope(t){return t._rawAsyncValidators}function J$(t){return t?Array.isArray(t)?t:[t]:[]}function G3(t,n){return Array.isArray(t)?t.includes(n):t===n}function Ude(t,n){let e=J$(n);return J$(t).forEach(o=>{G3(e,o)||e.push(o)}),e}function Gde(t,n){return J$(n).filter(e=>!G3(t,e))}var W3=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=iV(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=sV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},_2=class extends W3{name;get formDirective(){return null}get path(){return null}},Za=class extends W3{_parent=null;name=null;valueAccessor=null},eV=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},HVe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},tUn=ht(le({},HVe),{"[class.ng-submitted]":"isSubmitted"}),Gu=(()=>{class t extends eV{constructor(e){super(e)}static \u0275fac=function(r){return new(r||t)(qt(Za,2))};static \u0275dir=me({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&dr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Mn]})}return t})();var wb="VALID",U3="INVALID",Fw="PENDING",yb="DISABLED",If=class{},q3=class extends If{value;source;constructor(n,e){super(),this.value=n,this.source=e}},_b=class extends If{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},kb=class extends If{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},Pw=class extends If{status;source;constructor(n,e){super(),this.status=n,this.source=e}},tV=class extends If{source;constructor(n){super(),this.source=n}},nV=class extends If{source;constructor(n){super(),this.source=n}};function ipe(t){return(J3(t)?t.validators:t)||null}function UVe(t){return Array.isArray(t)?iV(t):t||null}function spe(t,n){return(J3(n)?n.asyncValidators:t)||null}function GVe(t){return Array.isArray(t)?sV(t):t||null}function J3(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function WVe(t,n,e){let r=t.controls;if(!(n?Object.keys(r):r).length)throw new Ae(1e3,"");if(!r[e])throw new Ae(1001,"")}function qVe(t,n,e){t._forEachChild((r,o)=>{if(e[o]===void 0)throw new Ae(1002,"")})}var K3=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return En(this.statusReactive)}set status(n){En(()=>this.statusReactive.set(n))}_status=ae(()=>this.statusReactive());statusReactive=Ze(void 0);get valid(){return this.status===wb}get invalid(){return this.status===U3}get pending(){return this.status==Fw}get disabled(){return this.status===yb}get enabled(){return this.status!==yb}errors;get pristine(){return En(this.pristineReactive)}set pristine(n){En(()=>this.pristineReactive.set(n))}_pristine=ae(()=>this.pristineReactive());pristineReactive=Ze(!0);get dirty(){return!this.pristine}get touched(){return En(this.touchedReactive)}set touched(n){En(()=>this.touchedReactive.set(n))}_touched=ae(()=>this.touchedReactive());touchedReactive=Ze(!1);get untouched(){return!this.touched}_events=new ot;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Ude(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Ude(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Gde(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Gde(n,this._rawAsyncValidators))}hasValidator(n){return G3(this._rawValidators,n)}hasAsyncValidator(n){return G3(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(ht(le({},n),{sourceControl:r})),e&&n.emitEvent!==!1&&this._events.next(new kb(!0,r))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=n.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),e&&n.emitEvent!==!1&&this._events.next(new kb(!1,r))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(ht(le({},n),{sourceControl:r})),e&&n.emitEvent!==!1&&this._events.next(new _b(!1,r))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=n.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),e&&n.emitEvent!==!1&&this._events.next(new _b(!0,r))}markAsPending(n={}){this.status=Fw;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Pw(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(ht(le({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=yb,this.errors=null,this._forEachChild(o=>{o.disable(ht(le({},n),{onlySelf:!0}))}),this._updateValue();let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new q3(this.value,r)),this._events.next(new Pw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ht(le({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=wb,this._forEachChild(r=>{r.enable(ht(le({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(ht(le({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wb||this.status===Fw)&&this._runAsyncValidator(r,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new q3(this.value,e)),this._events.next(new Pw(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(ht(le({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yb:wb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=Fw,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=Jde(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(n,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new Pw(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,r)}_initObservables(){this.valueChanges=new Qt,this.statusChanges=new Qt}_calculateStatus(){return this._allControlsDisabled()?yb:this.errors?U3:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fw)?Fw:this._anyControlsHaveStatus(U3)?U3:wb}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),o&&this._events.next(new _b(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new kb(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){J3(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=UVe(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=GVe(this._rawAsyncValidators)}},Z3=class extends K3{constructor(n,e,r){super(ipe(e),spe(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){qVe(this,!0,n),Object.keys(n).forEach(r=>{WVe(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(r=>{let o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n?n[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var eN=new Me("",{providedIn:"root",factory:()=>aV}),aV="always";function KVe(t,n){return[...n.path,t]}function X3(t,n,e=aV){lV(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(t.disabled),XVe(t,n),QVe(t,n),YVe(t,n),ZVe(t,n)}function Wde(t,n,e=!0){let r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),Q3(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Y3(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function ZVe(t,n){if(n.valueAccessor.setDisabledState){let e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}function lV(t,n){let e=rpe(t);n.validator!==null?t.setValidators(Hde(e,n.validator)):typeof e=="function"&&t.setValidators([e]);let r=ope(t);n.asyncValidator!==null?t.setAsyncValidators(Hde(r,n.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let o=()=>t.updateValueAndValidity();Y3(n._rawValidators,o),Y3(n._rawAsyncValidators,o)}function Q3(t,n){let e=!1;if(t!==null){if(n.validator!==null){let o=rpe(t);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==n.validator);i.length!==o.length&&(e=!0,t.setValidators(i))}}if(n.asyncValidator!==null){let o=ope(t);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==n.asyncValidator);i.length!==o.length&&(e=!0,t.setAsyncValidators(i))}}}let r=()=>{};return Y3(n._rawValidators,r),Y3(n._rawAsyncValidators,r),e}function XVe(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ape(t,n)})}function YVe(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ape(t,n),t.updateOn!=="submit"&&t.markAsTouched()})}function ape(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function QVe(t,n){let e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}function lpe(t,n){t==null,lV(t,n)}function JVe(t,n){return Q3(t,n)}function e9e(t,n){if(!t.hasOwnProperty("model"))return!1;let e=t.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function t9e(t){return Object.getPrototypeOf(t.constructor)===Yde}function cpe(t,n){t._syncPendingControls(),n.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function n9e(t,n){if(!n)return null;Array.isArray(n);let e,r,o;return n.forEach(i=>{i.constructor===Nf?e=i:t9e(i)?r=i:o=i}),o||r||e||null}function r9e(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}var o9e={provide:_2,useExisting:wi(()=>bb)},xb=Promise.resolve(),bb=(()=>{class t extends _2{callSetDisabledState;get submitted(){return En(this.submittedReactive)}_submitted=ae(()=>this.submittedReactive());submittedReactive=Ze(!1);_directives=new Set;form;ngSubmit=new Qt;options;constructor(e,r,o){super(),this.callSetDisabledState=o,this.form=new Z3({},iV(e),sV(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){xb.then(()=>{let r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),X3(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){xb.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){xb.then(()=>{let r=this._findContainer(e.path),o=new Z3({});lpe(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){xb.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){xb.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),cpe(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(r){return new(r||t)(qt(rV,10),qt(oV,10),qt(eN,8))};static \u0275dir=me({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&Le("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ut([o9e]),Mn]})}return t})();function qde(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function Kde(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var upe=class extends K3{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,r){super(ipe(e),spe(r,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),J3(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Kde(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){qde(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){qde(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){Kde(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var i9e=t=>t instanceof upe;var s9e={provide:Za,useExisting:wi(()=>ec)},Zde=Promise.resolve(),ec=(()=>{class t extends Za{_changeDetectorRef;callSetDisabledState;control=new upe;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Qt;constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=n9e(this,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),e9e(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){X3(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Zde.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,o=r!==0&&nt(r);Zde.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?KVe(e,this._parent):[e]}static \u0275fac=function(r){return new(r||t)(qt(_2,9),qt(rV,10),qt(oV,10),qt(k2,10),qt(kr,8),qt(eN,8))};static \u0275dir=me({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ut([s9e]),Mn,Dr]})}return t})();var a9e={provide:k2,useExisting:wi(()=>cV),multi:!0},cV=(()=>{class t extends Yde{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275dir=me({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&Le("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[ut([a9e]),Mn]})}return t})();var l9e={provide:_2,useExisting:wi(()=>Cb)},Cb=(()=>{class t extends _2{callSetDisabledState;get submitted(){return En(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=ae(()=>this._submittedReactive());_submittedReactive=Ze(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Qt;constructor(e,r,o){super(),this.callSetDisabledState=o,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Q3(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return X3(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Wde(e.control||null,e,!1),r9e(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),cpe(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new tV(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new nV(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,o=this.form.get(e.path);r!==o&&(Wde(r||null,e),i9e(o)&&(X3(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);lpe(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&JVe(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lV(this.form,this),this._oldForm&&Q3(this._oldForm,this)}static \u0275fac=function(r){return new(r||t)(qt(rV,10),qt(oV,10),qt(eN,8))};static \u0275dir=me({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&Le("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ut([l9e]),Mn,Dr]})}return t})();var c9e=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})}return t})();var Wu=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:eN,useValue:e.callSetDisabledState??aV}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({imports:[c9e]})}return t})();var Mb=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform group-data-[state=checked]:translate-x-5 group-data-[state=unchecked]:translate-x-0",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["brn-switch-thumb","hlm",""],["","hlmSwitchThumb",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var u9e=200,tN=class{_letterKeyStream=new ot;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new ot;selectedItem=this._selectedItem;constructor(n,e){let r=typeof e?.debounceInterval=="number"?e.debounceInterval:u9e;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(Vo(e=>this._pressedLetters.push(e)),ma(n),kn(()=>this._pressedLetters.length>0),At(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let r=1;r<this._items.length+1;r++){let o=(this._selectedItemIndex+r)%this._items.length,i=this._items[o];if(!this._skipPredicateFn?.(i)&&i.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(i);break}}this._pressedLetters=[]})}};var Bw=class{_items;_activeItemIndex=-1;_activeItem=Ze(null);_wrap=!1;_typeaheadSubscription=Fn.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof r1?this._itemChangesSubscription=n.changes.subscribe(r=>this._itemsChanged(r.toArray())):$4(n)&&(this._effectRef=Tt(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new ot;change=new ot;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new tN(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){let e=n.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(i=>!n[i]||this._allowedModifierKeys.indexOf(i)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&o){this.setNextItemActive();break}else return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&o){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&o){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&o){let i=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(i>0?i:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&o){let i=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(i<s?i:s-1,-1);break}else return;default:(o||$r(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),r=typeof n=="number"?n:e.indexOf(n),o=e[r];this._activeItem.set(o??null),this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let r=1;r<=e.length;r++){let o=(this._activeItemIndex+n*r+e.length)%e.length,i=e[o];if(!this._skipPredicateFn(i)){this.setActiveItem(o);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){let r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(n+=e,!r[n])return;this.setActiveItem(n)}}_getItemsArray(){return $4(this._items)?this._items():this._items instanceof r1?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let r=n.indexOf(e);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r))}}};var Eb=class extends Bw{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}};var Af=class extends Bw{_origin="program";setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}};var fpe=" ";function d9e(t,n,e){let r=rN(t,n);e=e.trim(),!r.some(o=>o.trim()===e)&&(r.push(e),t.setAttribute(n,r.join(fpe)))}function p9e(t,n,e){let r=rN(t,n);e=e.trim();let o=r.filter(i=>i!==e);o.length?t.setAttribute(n,o.join(fpe)):t.removeAttribute(n)}function rN(t,n){return t.getAttribute(n)?.match(/\S+/g)??[]}var mpe="cdk-describedby-message",nN="cdk-describedby-host",pV=0,gpe=(()=>{class t{_platform=M(oo);_document=M(tn);_messageRegistry=new Map;_messagesContainer=null;_id=`${pV++}`;constructor(){M(h2).load(z3),this._id=M(km)+"-"+pV++}describe(e,r,o){if(!this._canBeDescribed(e,r))return;let i=dV(r,o);typeof r!="string"?(hpe(r,this._id),this._messageRegistry.set(i,{messageElement:r,referenceCount:0})):this._messageRegistry.has(i)||this._createMessageElement(r,o),this._isElementDescribedByMessage(e,i)||this._addMessageReference(e,i)}removeDescription(e,r,o){if(!r||!this._isElementNode(e))return;let i=dV(r,o);if(this._isElementDescribedByMessage(e,i)&&this._removeMessageReference(e,i),typeof r=="string"){let s=this._messageRegistry.get(i);s&&s.referenceCount===0&&this._deleteMessageElement(i)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${nN}="${this._id}"]`);for(let r=0;r<e.length;r++)this._removeCdkDescribedByReferenceIds(e[r]),e[r].removeAttribute(nN);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,r){let o=this._document.createElement("div");hpe(o,this._id),o.textContent=e,r&&o.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(o),this._messageRegistry.set(dV(e,r),{messageElement:o,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let i=0;i<r.length;i++)r[i].remove();let o=this._document.createElement("div");o.style.visibility="hidden",o.classList.add(e),o.classList.add("cdk-visually-hidden"),this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._messagesContainer=o}_removeCdkDescribedByReferenceIds(e){let r=rN(e,"aria-describedby").filter(o=>o.indexOf(mpe)!=0);e.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(e,r){let o=this._messageRegistry.get(r);d9e(e,"aria-describedby",o.messageElement.id),e.setAttribute(nN,this._id),o.referenceCount++}_removeMessageReference(e,r){let o=this._messageRegistry.get(r);o.referenceCount--,p9e(e,"aria-describedby",o.messageElement.id),e.removeAttribute(nN)}_isElementDescribedByMessage(e,r){let o=rN(e,"aria-describedby"),i=this._messageRegistry.get(r),s=i&&i.messageElement.id;return!!s&&o.indexOf(s)!=-1}_canBeDescribed(e,r){if(!this._isElementNode(e))return!1;if(r&&typeof r=="object")return!0;let o=r==null?"":`${r}`.trim(),i=e.getAttribute("aria-label");return o?!i||i.trim()!==o:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dV(t,n){return typeof t=="string"?`${n||""}/${t}`:t}function hpe(t,n){t.id||(t.id=`${mpe}-${n}-${pV++}`)}function Xa(t){t||(mh(Xa),t=M(Uo));let n=new en(e=>t.onDestroy(e.next.bind(e)));return e=>e.pipe(It(n))}var hV=class{source;destroyed=!1;destroyRef=M(Uo);constructor(n){this.source=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(n){if(this.destroyed)throw new Ae(953,!1);let e=this.source.pipe(Xa(this.destroyRef)).subscribe({next:r=>n(r)});return{unsubscribe:()=>e.unsubscribe()}}};function oN(t,n){return new hV(t)}function Ib(t,n){!n?.injector&&mh(Ib);let e=n?.injector??M(Zt),r=new nd(1),o=Tt(()=>{let i;try{i=t()}catch(s){En(()=>r.error(s));return}En(()=>r.next(i))},{injector:e,manualCleanup:!0});return e.get(Uo).onDestroy(()=>{o.destroy(),r.complete()}),r.asObservable()}function Lw(t,n){let e=!n?.manualCleanup;e&&!n?.injector&&mh(Lw);let r=e?n?.injector?.get(Uo)??M(Uo):null,o=h9e(n?.equal),i;n?.requireSync?i=Ze({kind:0},{equal:o}):i=Ze({kind:1,value:n?.initialValue},{equal:o});let s=t.subscribe({next:a=>i.set({kind:1,value:a}),error:a=>{if(n?.rejectErrors)throw a;i.set({kind:2,error:a})}});if(n?.requireSync&&i().kind===0)throw new Ae(601,!1);return r?.onDestroy(s.unsubscribe.bind(s)),ae(()=>{let a=i();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new Ae(601,!1)}},{equal:n?.equal})}function h9e(t=Object.is){return(n,e)=>n.kind===1&&e.kind===1&&t(n.value,e.value)}var f9e=["checkBox"],m9e=[[["brn-switch-thumb"]]],g9e=["brn-switch-thumb"],v9e=t=>({position:"absolute",width:"1px",height:"1px",padding:"0",margin:t,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"}),vpe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-switch-thumb"]],decls:0,vars:0,template:function(r,o){},encapsulation:2})}return t})(),w9e={provide:k2,useExisting:wi(()=>mV),multi:!0},fV="-switch",mV=(()=>{class t{_destroyRef=M(Uo);_renderer=M(Zr);_isBrowser=rs(M(so));_elementRef=M(_t);_focusMonitor=M(th);_cdr=M(kr);focusVisible=Ze(!1);focused=Ze(!1);checked=si(!1);id=Z(null);name=Z(null);ariaLabel=Z(null,{alias:"aria-label"});ariaLabelledby=Z(null,{alias:"aria-labelledby"});ariaDescribedby=Z(null,{alias:"aria-describedby"});required=Z(!1,{transform:nt});disabled=Z(!1,{transform:nt});_onChange=()=>{};_onTouched=()=>{};checkbox=bo.required("checkBox");changed=Vn();touched=Vn();state=ae(()=>{let e=this.name(),r=this.id();return{disabled:Ze(this.disabled()),name:e?e+fV:null,id:r?r+fV:null}});constructor(){Tt(()=>{let e=this._renderer.parentNode(this._elementRef.nativeElement);if(!e||(e?.tagName==="HLM-SWITCH"&&(e=this._renderer.parentNode(e)),!e))return;if(e?.tagName==="LABEL"){this._renderer.setAttribute(e,"data-disabled",this.state().disabled()?"true":"false");return}if(!this._isBrowser)return;let r=e?.querySelector(`label[for="${this.forChild(this.state().id)}"]`);r&&this._renderer.setAttribute(r,"data-disabled",this.state().disabled()?"true":"false")})}toggle(e){this.state().disabled()||(e.preventDefault(),this.checked.update(r=>!r),this._onChange(this.checked()),this.changed.emit(this.checked()))}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).pipe(Xa(this._destroyRef)).subscribe(e=>{e&&this.focused.set(!0),(e==="keyboard"||e==="program")&&(this.focusVisible.set(!0),this._cdr.markForCheck()),e||Promise.resolve().then(()=>{this.focusVisible.set(!1),this.focused.set(!1),this._onTouched(),this.touched.emit(),this._cdr.markForCheck()})}),this.checkbox()&&(this.checkbox().nativeElement.value=this.checked()?"on":"off",this.checkbox().nativeElement.dispatchEvent(new Event("change")))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}forChild(e){return e?e.replace(fV,""):null}writeValue(e){this.checked.set(!!e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.state().disabled.set(e),this._cdr.markForCheck()}preventScrolling(e){e.preventDefault()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-switch"]],viewQuery:function(r,o){r&1&&So(o.checkbox,f9e,5),r&2&&zr()},hostAttrs:["tabindex","0"],hostVars:9,hostBindings:function(r,o){r&1&&Le("click",function(s){return o.toggle(s)})("keyup.enter",function(s){return o.toggle(s)})("keyup.space",function(s){return o.toggle(s)})("keydown.space",function(s){return o.preventScrolling(s)}),r&2&&Bt("data-state",o.checked()?"checked":"unchecked")("data-focus-visible",o.focusVisible())("data-focus",o.focused())("data-disabled",o.state().disabled())("aria-labelledby",null)("aria-label",null)("aria-describedby",null)("id",o.state().id)("name",o.state().name)},inputs:{checked:[1,"checked"],id:[1,"id"],name:[1,"name"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[1,"aria-describedby","ariaDescribedby"],required:[1,"required"],disabled:[1,"disabled"]},outputs:{checked:"checkedChange",changed:"changed",touched:"touched"},features:[ut([w9e])],ngContentSelectors:g9e,decls:3,vars:11,consts:[["checkBox",""],["tabindex","-1","type","checkbox","role","switch",3,"id","name","value","ngStyle","checked"]],template:function(r,o){if(r&1&&(Ot(m9e),Ve(0,"input",1,0),it(2)),r&2){let i,s;Pe("id",(i=o.forChild(o.state().id))!==null&&i!==void 0?i:"")("name",(s=o.forChild(o.state().name))!==null&&s!==void 0?s:"")("value",o.checked()?"on":"off")("ngStyle",ya(9,v9e,-"1px"))("checked",o.checked()),Bt("aria-label",o.ariaLabel())("aria-labelledby",o.ariaLabelledby())("aria-describedby",o.ariaDescribedby())("aria-required",o.required()||null)}},dependencies:[Nm],encapsulation:2,changeDetection:0})}return t})();var y9e={provide:k2,useExisting:wi(()=>b2),multi:!0},b2=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("group inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",this.disabled()?"cursor-not-allowed opacity-50":"",this.userClass()));checked=si(!1);disabledInput=Z(!1,{transform:nt,alias:"disabled"});id=Z(null);ariaLabel=Z(null,{alias:"aria-label"});ariaLabelledby=Z(null,{alias:"aria-labelledby"});ariaDescribedby=Z(null,{alias:"aria-describedby"});changed=Vn();_writableDisabled=ae(()=>Ze(this.disabledInput()));disabled=ae(()=>this._writableDisabled()());_onChange;_onTouched;handleChange(n){this.checked.set(n),this._onChange?.(n),this.changed.emit(n)}writeValue(n){this.checked.set(!!n)}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this._writableDisabled().set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-switch"]],hostAttrs:[1,"contents"],hostVars:4,hostBindings:function(e,r){e&2&&Bt("id",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{userClass:[1,"class","userClass"],checked:[1,"checked"],disabledInput:[1,"disabled","disabledInput"],id:[1,"id"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[1,"aria-describedby","ariaDescribedby"]},outputs:{checked:"checkedChange",changed:"changed"},features:[ut([y9e])],decls:2,vars:8,consts:[[3,"changed","touched","checked","disabled","id","aria-label","aria-labelledby","aria-describedby"],["hlm",""]],template:function(e,r){e&1&&(X(0,"brn-switch",0),Le("changed",function(i){return r.handleChange(i)})("touched",function(){return r._onTouched==null?null:r._onTouched()}),Ve(1,"brn-switch-thumb",1),re()),e&2&&($e(r._computedClass()),Pe("checked",r.checked())("disabled",r.disabled())("id",r.id())("aria-label",r.ariaLabel())("aria-labelledby",r.ariaLabelledby())("aria-describedby",r.ariaDescribedby()))},dependencies:[vpe,mV,Mb],encapsulation:2})};var $w=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({imports:[b2]})};var _9e=0,qu=(()=>{class t{_ngControl=M(Za,{optional:!0});id=Z(`brn-label-${_9e++}`);_isBrowser=rs(M(so));_element=M(_t).nativeElement;_changes;_dataDisabled=Ze("auto");dataDisabled=this._dataDisabled.asReadonly();ngOnInit(){this._isBrowser&&(this._changes=new MutationObserver(e=>{e.forEach(r=>{if(r.attributeName!=="data-disabled")return;let o=r.target.attributes.getNamedItem(r.attributeName)?.value==="true";this._dataDisabled.set(o??"auto")})}),this._changes?.observe(this._element,{attributes:!0,childList:!0,characterData:!0}))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnLabel",""]],hostVars:9,hostBindings:function(r,o){r&2&&(Xr("id",o.id()),dr("ng-invalid",(o._ngControl==null?null:o._ngControl.invalid)||null)("ng-dirty",(o._ngControl==null?null:o._ngControl.dirty)||null)("ng-valid",(o._ngControl==null?null:o._ngControl.valid)||null)("ng-touched",(o._ngControl==null?null:o._ngControl.touched)||null))},inputs:{id:[1,"id"]}})}return t})();var ype=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})}return t})();var iN=(()=>{class t{ngControl=null;errorState=Ze(!1);static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t})}return t})();var sN=(()=>{class t{isInvalid(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vw=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;errorState=Ze(!1);matcher=null;constructor(n,e,r,o){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=r,this._parentForm=o}updateErrorState(){let n=this.errorState(),e=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,o=this.ngControl?this.ngControl.control:null,i=r?.isInvalid(o,e)??!1;i!==n&&this.errorState.set(i)}};var k9e=["viewport"],b9e=["*",[["hlm-select-scroll-up"]],[["brnSelectScrollUp"]],[["brnSelectScrollDown"]],[["hlm-select-scroll-down"]]],C9e=["*","hlm-select-scroll-up","brnSelectScrollUp","brnSelectScrollDown","hlm-select-scroll-down"];function S9e(t,n){t&1&&(it(0,1),it(1,2))}function M9e(t,n){t&1&&tr(0)}function T9e(t,n){t&1&&(it(0,3),it(1,4))}function D9e(t,n){t&1&&tr(0)}var E9e=t=>({$implicit:t});function I9e(t,n){if(t&1&&tr(0,2),t&2){let e,r=xe(),o=pr(5);Pe("ngTemplateOutlet",(e=(e=r.customPlaceholderTemplate())==null?null:e.templateRef)!==null&&e!==void 0?e:o)}}function N9e(t,n){if(t&1&&tr(0,3),t&2){let e,r=xe(),o=pr(3);Pe("ngTemplateOutlet",(e=(e=r.customValueTemplate())==null?null:e.templateRef)!==null&&e!==void 0?e:o)("ngTemplateOutletContext",ya(2,E9e,r._select.value()))}}function A9e(t,n){if(t&1&&ue(0),t&2){let e=xe();ct(e.value())}}function R9e(t,n){if(t&1&&ue(0),t&2){let e=xe();ct(e.placeholder())}}var O9e=[[["hlm-select-trigger"],["","brnSelectTrigger",""]],[["label","hlmLabel",""],["label","brnLabel",""]],"*"],F9e=["hlm-select-trigger,[brnSelectTrigger]","label[hlmLabel],label[brnLabel]","*"];function P9e(t,n){if(t&1&&(X(0,"label",1),ue(1),re()),t&2){let e=xe();Bt("id",e.labelId()),Y(),ct(e.placeholder())}}function B9e(t,n){t&1&&it(0,1)}function L9e(t,n){t&1&&it(0,2)}var bpe=new Me("BrnSelectContentToken");function $9e(){return M(bpe)}function V9e(t){return{provide:bpe,useExisting:t}}var Cpe=new Me("BrnSelectToken");function cN(){return M(Cpe)}function j9e(t){return{provide:Cpe,useExisting:t}}var z9e=0,Rf=(()=>{class t{_select=cN();_content=$9e();elementRef=M(_t);id=Z(`brn-option-${z9e++}`);value=Z();_disabled=Z(!1,{alias:"disabled",transform:nt});get disabled(){return this._disabled()}selected=ae(()=>this.value()!==void 0&&this._select.isSelected(this.value()));_active=Ze(!1);checkedState=ae(()=>this.selected()?"checked":"unchecked");dir=this._select.dir;select(){if(!this._disabled()){if(this._select.multiple()){this._select.toggleSelect(this.value());return}this._select.selectOption(this.value())}}getLabel(){return this.elementRef.nativeElement.textContent?.trim()??""}setActiveStyles(){this._active.set(!0),this.elementRef.nativeElement.scrollIntoView({block:"nearest"})}setInactiveStyles(){this._active.set(!1)}activate(){this._disabled()||this._content.setActiveOption(this)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnOption",""]],hostAttrs:["role","option"],hostVars:6,hostBindings:function(r,o){r&1&&Le("click",function(){return o.select()})("mouseenter",function(){return o.activate()}),r&2&&(Xr("id",o.id()),Bt("aria-selected",o.selected())("aria-disabled",o._disabled())("dir",o._select.dir())("data-active",o._active()?"":void 0)("data-disabled",o._disabled()?"":void 0))},inputs:{id:[1,"id"],value:[1,"value"],_disabled:[1,"disabled","_disabled"]}})}return t})(),aN=100,xpe=(()=>{class t{_el=M(_t);_selectContent=M(qs);_endReached=new ot;_destroyRef=M(Uo);startEmittingEvents(){let e=ol(this._el.nativeElement,"mouseleave");FC(100).pipe(It(e),It(this._endReached),Xa(this._destroyRef)).subscribe(()=>this._selectContent.moveFocusUp())}stopEmittingEvents(){this._endReached.next(!0)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectScrollUp",""],["brn-select-scroll-up"],["hlm-select-scroll-up",5,"noHlm"]],hostAttrs:["aria-hidden","true"],hostBindings:function(r,o){r&1&&Le("mouseenter",function(){return o.startEmittingEvents()})}})}return t})(),_pe=(()=>{class t{_el=M(_t);_selectContent=M(qs);_endReached=new ot;_destroyRef=M(Uo);startEmittingEvents(){let e=ol(this._el.nativeElement,"mouseleave");FC(100).pipe(It(e),It(this._endReached),Xa(this._destroyRef)).subscribe(()=>this._selectContent.moveFocusDown())}stopEmittingEvents(){this._endReached.next(!0)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectScrollDown",""],["brn-select-scroll-down"],["hlm-select-scroll-down",5,"noHlm"]],hostAttrs:["aria-hidden","true"],hostBindings:function(r,o){r&1&&Le("mouseenter",function(){return o.startEmittingEvents()})}})}return t})(),qs=(()=>{class t{_elementRef=M(_t);_injector=M(Zt);_select=cN();canScrollUp=Ze(!1);canScrollDown=Ze(!1);viewport=bo.required("viewport");scrollUpBtn=hd(xpe);scrollDownBtn=hd(_pe);_options=Sm(Rf,{descendants:!0});keyManager=null;constructor(){Tt(()=>{this._select.open()&&yi(()=>this.updateArrowDisplay(),{injector:this._injector})})}ngAfterContentInit(){this.keyManager=new Eb(this._options,this._injector).withHomeAndEnd().withVerticalOrientation().withTypeAhead().withAllowedModifierKeys(["shiftKey"]).withWrap().skipPredicate(e=>e._disabled()),Tt(()=>{let e=this._select.open(),r=this._options();!e||!r.length||En(()=>{let o=r.find(i=>i.selected());o?this.keyManager?.setActiveItem(o):this.keyManager?.setFirstItemActive()})},{injector:this._injector})}updateArrowDisplay(){let{scrollTop:e,scrollHeight:r,clientHeight:o}=this.viewport().nativeElement;this.canScrollUp.set(e>0);let i=r-o;this.canScrollDown.set(Math.ceil(e)<i)}handleScroll(){this.updateArrowDisplay()}focusList(){this._elementRef.nativeElement.focus()}moveFocusUp(){this.viewport().nativeElement.scrollBy({top:-aN,behavior:"smooth"}),this.viewport().nativeElement.scrollTop===0&&this.scrollUpBtn()?.stopEmittingEvents()}moveFocusDown(){this.viewport().nativeElement.scrollBy({top:aN,behavior:"smooth"});let e=this._elementRef.nativeElement.scrollHeight,r=this.viewport().nativeElement.scrollTop;e+r+aN>this.viewport().nativeElement.scrollHeight+aN/2&&this.scrollDownBtn()?.stopEmittingEvents()}setActiveOption(e){let r=this._options().findIndex(o=>o===e);r!==-1&&this.keyManager?.setActiveItem(r)}selectActiveItem(e){e.preventDefault();let r=this.keyManager?.activeItem;r&&this._select.selectOption(r.value())}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-select-content"],["hlm-select-content",5,"noHlm"]],contentQueries:function(r,o,i){r&1&&(ts(i,o.scrollUpBtn,xpe,5),ts(i,o.scrollDownBtn,_pe,5),ts(i,o._options,Rf,5)),r&2&&zr(3)},viewQuery:function(r,o){r&1&&So(o.viewport,k9e,5),r&2&&zr()},hostAttrs:["role","listbox","tabindex","0","aria-orientation","vertical"],hostVars:7,hostBindings:function(r,o){r&1&&Le("keydown",function(s){return o.keyManager==null?null:o.keyManager.onKeydown(s)})("keydown.enter",function(s){return o.selectActiveItem(s)})("keydown.space",function(s){return o.selectActiveItem(s)}),r&2&&(Xr("id",o._select.id()+"--content"),Bt("aria-multiselectable",o._select.multiple())("aria-disabled",o._select.disabled()||o._select._formDisabled())("aria-activedescendant",o.keyManager==null||o.keyManager.activeItem==null?null:o.keyManager.activeItem.id())("aria-labelledBy",o._select.labelId())("aria-controlledBy",o._select.id()+"--trigger")("dir",o._select.dir()))},features:[ut([V9e(t)])],ngContentSelectors:C9e,decls:9,vars:2,consts:[["scrollUp",""],["viewport",""],["scrollDown",""],[4,"ngTemplateOutlet"],["data-brn-select-viewport","",2,"flex","1 1 0%","position","relative","width","100%","overflow","auto","min-height","36px","padding-bottom","2px","margin-bottom","-2px",3,"scroll"]],template:function(r,o){if(r&1){let i=gn();Ot(b9e),st(0,S9e,2,0,"ng-template",null,0,mo)(2,M9e,1,0,"ng-container",3),X(3,"div",4,1),Le("scroll",function(){return ze(i),He(o.handleScroll())}),it(5),re(),st(6,T9e,2,0,"ng-template",null,2,mo)(8,D9e,1,0,"ng-container",3)}if(r&2){let i=pr(1),s=pr(7);Y(2),Pe("ngTemplateOutlet",o.canScrollUp()&&o.scrollUpBtn()?i:null),Y(6),Pe("ngTemplateOutlet",o.canScrollDown()&&o.scrollDownBtn()?s:null)}},dependencies:[gc],styles:["[_nghost-%COMP%]{display:flex;box-sizing:border-box;flex-direction:column;outline:none;pointer-events:auto}[data-brn-select-viewport][_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch}[data-brn-select-viewport][_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"],changeDetection:0})}return t})(),gV=(()=>{class t{labelledBy=Ze("");static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectGroup",""]],hostAttrs:["role","group"],hostVars:1,hostBindings:function(r,o){r&2&&Bt("aria-labelledby",o.labelledBy())}})}return t})(),Spe=(()=>{class t{_group=M(gV,{optional:!0});_label=M(qu,{host:!0});constructor(){this._group?.labelledBy.set(this._label.id())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectLabel",""]],features:[Pt([qu])]})}return t})(),kpe=(()=>{class t{templateRef=M(Gn);static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectPlaceholder",""],["","hlmSelectPlaceholder",""]]})}return t})(),Mpe=(()=>{class t{_elementRef=M(_t);_select=cN();_ngControl=M(Za,{optional:!0});_platform=M(so);_triggerId=ae(()=>`${this._select.id()}--trigger`);_contentId=ae(()=>`${this._select.id()}--content`);_disabled=ae(()=>this._select.disabled()||this._select._formDisabled());_labelledBy=ae(()=>{let e=this._select.value();return Array.isArray(e)&&e.length>0?`${this._select.labelId()} ${this._select.id()}--value`:this._select.labelId()});_resizeObserver;constructor(){this._select.trigger.set(this)}ngAfterViewInit(){this._select.triggerWidth.set(this._elementRef.nativeElement.offsetWidth),rs(this._platform)&&(this._resizeObserver=new ResizeObserver(()=>this._select.triggerWidth.set(this._elementRef.nativeElement.offsetWidth)),this._resizeObserver.observe(this._elementRef.nativeElement))}ngOnDestroy(){this._resizeObserver?.disconnect()}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectTrigger",""]],hostAttrs:["type","button","role","combobox","aria-autocomplete","none"],hostVars:18,hostBindings:function(r,o){r&1&&Le("keydown.ArrowDown",function(){return o._select.show()}),r&2&&(Xr("disabled",o._disabled()),Bt("id",o._triggerId())("aria-expanded",o._select.open())("aria-controls",o._contentId())("aria-labelledBy",o._labelledBy())("dir",o._select.dir()),dr("ng-invalid",(o._ngControl==null?null:o._ngControl.invalid)||null)("ng-dirty",(o._ngControl==null?null:o._ngControl.dirty)||null)("ng-valid",(o._ngControl==null?null:o._ngControl.valid)||null)("ng-touched",(o._ngControl==null?null:o._ngControl.touched)||null)("ng-untouched",(o._ngControl==null?null:o._ngControl.untouched)||null)("ng-pristine",(o._ngControl==null?null:o._ngControl.pristine)||null))}})}return t})(),lN=(()=>{class t{templateRef=M(Gn);static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnSelectValue",""],["","hlmSelectValue",""]]})}return t})(),Ku=(()=>{class t{_select=cN();id=ae(()=>`${this._select.id()}--value`);placeholder=ae(()=>this._select.placeholder());_showPlaceholder=ae(()=>this.value()===null||this.value()===void 0||this.value()==="");customValueTemplate=hd(lN,{descendants:!0});customPlaceholderTemplate=hd(kpe,{descendants:!0});value=ae(()=>{let e=this._values();if(e.length===0)return null;let o=e.filter(s=>this._select.options().some(a=>this._select.compareWith()(a.value(),s))).map(s=>this._select.options().find(a=>this._select.compareWith()(a.value(),s)));if(o.length===0)return null;let i=o.map(s=>s?.getLabel());return this._select.dir()==="rtl"&&i.reverse(),this.transformFn()(i)});_values=ae(()=>Array.isArray(this._select.value())?this._select.value():[this._select.value()]);transformFn=Z(e=>(e??[]).join(", "));static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-select-value"],["hlm-select-value"]],contentQueries:function(r,o,i){r&1&&(ts(i,o.customValueTemplate,lN,5),ts(i,o.customPlaceholderTemplate,kpe,5)),r&2&&zr(2)},hostVars:2,hostBindings:function(r,o){r&2&&(Xr("id",o.id()),Bt("data-placeholder",o._showPlaceholder()?"":null))},inputs:{transformFn:[1,"transformFn"]},decls:6,vars:1,consts:[["defaultValueTemplate",""],["defaultPlaceholderTemplate",""],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,o){r&1&&st(0,I9e,1,1,"ng-container",2)(1,N9e,1,4,"ng-container",3)(2,A9e,1,1,"ng-template",null,0,mo)(4,R9e,1,1,"ng-template",null,1,mo),r&2&&kt(o._showPlaceholder()?0:1)},dependencies:[gc],styles:["[_nghost-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;white-space:nowrap;pointer-events:none}"],changeDetection:0})}return t})(),H9e=0,da=(()=>{class t{_defaultErrorStateMatcher=M(sN);_parentForm=M(bb,{optional:!0});_injector=M(Zt);_parentFormGroup=M(Cb,{optional:!0});ngControl=M(Za,{optional:!0,self:!0});id=Z(`brn-select-${H9e++}`);multiple=Z(!1,{transform:nt});placeholder=Z("");disabled=Z(!1,{transform:nt});dir=Z("ltr");closeDelay=Z(100,{transform:_i});open=si(!1);value=si();compareWith=Z((e,r)=>e===r);_formDisabled=Ze(!1);selectLabel=hd(qu,{descendants:!1});selectContent=hd.required(qs);options=Sm(Rf,{descendants:!0});selectedOptions=ae(()=>this.options().filter(e=>e.selected()));_overlayDir=bo.required(Ew);trigger=Ze(null);triggerWidth=Ze(0);_delayedExpanded=Lw(Ib(this.open).pipe(jr(e=>e?lt(e):lt(e).pipe(CA(this.closeDelay()))),Xa()),{initialValue:!1});state=ae(()=>this.open()?"open":"closed");_positionChanges$=new ot;side=Lw(this._positionChanges$.pipe(At(e=>e.connectionPair.originY==="center"?e.connectionPair.originX==="start"?"left":"right":e.connectionPair.originY)),{initialValue:"bottom"});labelId=ae(()=>this.selectLabel()?.id??`${this.id()}--label`);_onChange=()=>{};_onTouched=()=>{};_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}];errorStateTracker;errorState=ae(()=>this.errorStateTracker.errorState());constructor(){this.ngControl!==null&&(this.ngControl.valueAccessor=this),this.errorStateTracker=new Vw(this._defaultErrorStateMatcher,this.ngControl,this._parentFormGroup,this._parentForm)}ngDoCheck(){this.errorStateTracker.updateErrorState()}toggle(){this.open()?this.hide():this.show()}show(){this.open()||this.disabled()||this._formDisabled()||this.options()?.length==0||(this.open.set(!0),yi(()=>this.selectContent().focusList(),{injector:this._injector}))}hide(){this.open()&&(this.open.set(!1),this._onTouched(),this.trigger()?.focus())}writeValue(e){this.value.set(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._formDisabled.set(e)}selectOption(e){if(this.multiple()){let r=this.value(),o=r?[...r,e]:[e];this.value.set(o)}else this.value.set(e);this._onChange?.(this.value()),this.multiple()||this.hide()}deselectOption(e){if(this.multiple()){let o=this.value().filter(s=>!this.compareWith()(s,e)),i=o.length?o:null;this.value.set(i)}else this.value.set(null);this._onChange?.(this.value())}toggleSelect(e){this.isSelected(e)?this.deselectOption(e):this.selectOption(e)}isSelected(e){let r=this.value();return Array.isArray(r)?r.some(o=>this.compareWith()(o,e)):e!==void 0?this.compareWith()(r,e):!1}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-select"],["hlm-select"]],contentQueries:function(r,o,i){r&1&&(ts(i,o.selectLabel,qu,4),ts(i,o.selectContent,qs,5),ts(i,o.options,Rf,5)),r&2&&zr(3)},viewQuery:function(r,o){r&1&&So(o._overlayDir,Ew,5),r&2&&zr()},inputs:{id:[1,"id"],multiple:[1,"multiple"],placeholder:[1,"placeholder"],disabled:[1,"disabled"],dir:[1,"dir"],closeDelay:[1,"closeDelay"],open:[1,"open"],value:[1,"value"],compareWith:[1,"compareWith"]},outputs:{open:"openChange",value:"valueChange"},features:[ut([Oue(()=>t),I$(()=>t),j9e(t),{provide:iN,useExisting:t}])],ngContentSelectors:F9e,decls:6,vars:5,consts:[["trigger","cdkOverlayOrigin"],[1,"hidden"],["cdk-overlay-origin","",3,"click"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","detach","positionChange","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"]],template:function(r,o){if(r&1){let i=gn();Ot(O9e),st(0,P9e,2,2,"label",1)(1,B9e,1,0),X(2,"div",2,0),Le("click",function(){return ze(i),He(o.toggle())}),it(4),re(),st(5,L9e,1,0,"ng-template",3),Le("backdropClick",function(){return ze(i),He(o.hide())})("detach",function(){return ze(i),He(o.hide())})("positionChange",function(a){return ze(i),He(o._positionChanges$.next(a))})}if(r&2){let i=pr(3);kt(!o.selectLabel()&&o.placeholder()?0:1),Y(5),Pe("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",o._delayedExpanded())("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayWidth",o.triggerWidth()>0?o.triggerWidth():"auto")}},dependencies:[lb,Ew,ob,ype],encapsulation:2,changeDetection:0})}return t})();var Of=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({imports:[da]})}return t})();var Tpe=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Dpe=w3,lr=(t,n)=>e=>{var r;if(n?.variants==null)return Dpe(t,e?.class,e?.className);let{variants:o,defaultVariants:i}=n,s=Object.keys(o).map(c=>{let u=e?.[c],d=i?.[c];if(u===null)return null;let p=Tpe(u)||Tpe(d);return o[c][p]}),a=e&&Object.entries(e).reduce((c,u)=>{let[d,p]=u;return p===void 0||(c[d]=p),c},{}),l=n==null||(r=n.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let f=u,{class:d,className:p}=f,h=qf(f,["class","className"]);return Object.entries(h).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes(le(le({},i),a)[g]):le(le({},i),a)[g]===v})?[...c,d,p]:c},[]);return Dpe(t,s,l,e?.class,e?.className)};var YGn=lr("text-destructive text-sm font-medium",{variants:{},defaultVariants:{}});var U9e=lr("flex rounded-md border font-normal border-input bg-transparent text-base md:text-sm ring-offset-background file:border-0 file:text-foreground file:bg-transparent file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{size:{default:"h-10 py-2 px-4 file:max-md:py-0",sm:"h-9 px-3 file:md:py-2 file:max-md:py-1.5",lg:"h-11 px-8 file:md:py-3 file:max-md:py-2.5"},error:{auto:"[&.ng-invalid.ng-touched]:text-destructive [&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:focus-visible:ring-destructive",true:"text-destructive border-destructive focus-visible:ring-destructive"}},defaultVariants:{size:"default",error:"auto"}}),Pf=class t{size=Z("default");error=Z("auto");state=ae(()=>({error:Ze(this.error())}));userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(U9e({size:this.size(),error:this.state().error()}),this.userClass()));_injector=M(Zt);ngControl=this._injector.get(Za,null);_errorStateTracker;_defaultErrorStateMatcher=M(sN);_parentForm=M(bb,{optional:!0});_parentFormGroup=M(Cb,{optional:!0});errorState=ae(()=>this._errorStateTracker.errorState());constructor(){this._errorStateTracker=new Vw(this._defaultErrorStateMatcher,this.ngControl,this._parentFormGroup,this._parentForm),Tt(()=>{let n=this._errorStateTracker.errorState();En(()=>{this.ngControl&&this.setError(n)})})}ngDoCheck(){this._errorStateTracker.updateErrorState()}setError(n){this.state().error.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmInput",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{size:[1,"size"],error:[1,"error"],userClass:[1,"class","userClass"]},features:[ut([{provide:iN,useExisting:t}])]})};var jw=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})};var W9e=lr("text-sm font-medium leading-none [&>[hlmInput]]:my-1 [&:has([hlmInput]:disabled)]:cursor-not-allowed [&:has([hlmInput]:disabled)]:opacity-70",{variants:{variant:{default:""},error:{auto:"[&:has([hlmInput].ng-invalid.ng-touched)]:text-destructive",true:"text-destructive"},disabled:{auto:"[&:has([hlmInput]:disabled)]:opacity-70",true:"opacity-70",false:""}},defaultVariants:{variant:"default",error:"auto"}}),Ya=class t{_brn=M(qu,{host:!0});userClass=Z("",{alias:"class"});variant=Z("default");error=Z("auto");state=ae(()=>({error:Ze(this.error())}));_computedClass=ae(()=>Xe(W9e({variant:this.variant(),error:this.state().error(),disabled:this._brn?.dataDisabled()??"auto"}),"[&.ng-invalid.ng-touched]:text-destructive",this.userClass()));setError(n){this.state().error.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmLabel",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"],variant:[1,"variant"],error:[1,"error"]},features:[Pt([{directive:qu,inputs:["id","id"]}])]})};var Bf=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})};var ys=class t{userClass=Z("",{alias:"class"});stickyLabels=Z(!1);_stateProvider=Fue({optional:!0});_sideProvider=Rue({optional:!0});_computedClass=ae(()=>Xe("w-full relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md p-1 data-[side=bottom]:top-[2px] data-[side=top]:bottom-[2px] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmSelectContent",""],["hlm-select-content"]],hostVars:4,hostBindings:function(e,r){if(e&2){let o,i;Bt("data-state",(o=r._stateProvider==null?null:r._stateProvider.state())!==null&&o!==void 0?o:"open")("data-side",(i=r._sideProvider==null?null:r._sideProvider.side())!==null&&i!==void 0?i:"bottom"),$e(r._computedClass())}},inputs:{userClass:[1,"class","userClass"],stickyLabels:[1,"stickyLabels"]}})};var wV=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmSelectGroup",""],["hlm-select-group"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([gV])]})};var yV=class t{_selectContent=M(ys);_stickyLabels=ae(()=>this._selectContent.stickyLabels());userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("pl-8 pr-2 text-sm font-semibold rtl:pl-2 rtl:pr-8",this._stickyLabels()?"sticky top-0 bg-popover block z-[2]":"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmSelectLabel",""],["hlm-select-label"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([Spe])]})};var q9e=["*"];function K9e(t,n){t&1&&Ve(0,"ng-icon",1)}var Ks=class t{_brnSelectOption=M(Rf,{host:!0});userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 rtl:flex-reverse rtl:pr-8 rtl:pl-2 text-sm outline-none data-[active]:bg-accent data-[active]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-option"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ut([sr({lucideCheck:k3})]),Pt([{directive:Rf,inputs:["disabled","disabled","value","value"]}])],ngContentSelectors:q9e,decls:3,vars:3,consts:[[1,"absolute","left-2","flex","h-3.5","w-3.5","items-center","justify-center","rtl:left-auto","rtl:right-2"],["hlm","","size","sm","aria-hidden","true","name","lucideCheck"]],template:function(e,r){e&1&&(Ot(),it(0),X(1,"span",0),st(2,K9e,1,0,"ng-icon",1),re()),e&2&&(Y(),Bt("dir",r._brnSelectOption.dir())("data-state",r._brnSelectOption.checkedState()),Y(),kt(r._brnSelectOption.selected()?2:-1))},dependencies:[ar,po],encapsulation:2,changeDetection:0})};var uN=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-select-scroll-down"]],hostAttrs:[1,"flex","cursor-default","items-center","justify-center","py-1"],features:[ut([sr({lucideChevronDown:b3})])],decls:1,vars:0,consts:[["hlm","","size","sm","name","lucideChevronDown",1,"ml-2"]],template:function(e,r){e&1&&Ve(0,"ng-icon",0)},dependencies:[ar,po],encapsulation:2})};var dN=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-select-scroll-up"]],hostAttrs:[1,"flex","cursor-default","items-center","justify-center","py-1"],features:[ut([sr({lucideChevronUp:$ue})])],decls:1,vars:0,consts:[["hlm","","size","sm","name","lucideChevronUp",1,"ml-2"]],template:function(e,r){e&1&&Ve(0,"ng-icon",0)},dependencies:[ar,po],encapsulation:2})};var Z9e=["*",[["ng-icon"]]],X9e=["*","ng-icon"];function Y9e(t,n){t&1&&it(0,1)}function Q9e(t,n){t&1&&Ve(0,"ng-icon",2)}var J9e=lr("flex items-center justify-between rounded-md border border-input bg-background text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{size:{default:"h-10 py-2 px-4",sm:"h-9 px-3",lg:"h-11 px-8"},error:{auto:"[&.ng-invalid.ng-touched]:text-destructive [&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:focus-visible:ring-destructive",true:"text-destructive border-destructive focus-visible:ring-destructive"}},defaultVariants:{size:"default",error:"auto"}}),Zs=class t{icon=hd(po);brnSelect=M(da,{optional:!0});_size=Z("default");userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(J9e({size:this._size(),error:this.brnSelect?.errorState()}),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-select-trigger"]],contentQueries:function(e,r,o){e&1&&ts(o,r.icon,po,5),e&2&&zr()},inputs:{_size:[1,"_size"],userClass:[1,"class","userClass"]},features:[ut([sr({lucideChevronDown:b3})])],ngContentSelectors:X9e,decls:5,vars:3,consts:[["button",""],["hlmInput","","brnSelectTrigger","","type","button"],["hlm","","size","sm","name","lucideChevronDown",1,"ml-2","flex-none"]],template:function(e,r){e&1&&(Ot(Z9e),X(0,"button",1,0),it(2),st(3,Y9e,1,0)(4,Q9e,1,0,"ng-icon",2),re()),e&2&&($e(r._computedClass()),Y(3),kt(r.icon()?3:4))},dependencies:[Mpe,ar,po],encapsulation:2})};var pa=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("!inline-block ltr:text-left rtl:text-right border-border w-[calc(100%)]] min-w-0 pointer-events-none truncate data-[placeholder]:text-muted-foreground",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["hlm-select-value"],["","hlmSelectValue",""],["brn-select-value","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var Xi=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({imports:[Zs,Ks,dN,uN]})};function eje(t,n){if(t&1&&(X(0,"hlm-option",11),ue(1),re()),t&2){let e=n.$implicit;Pe("value",e.id),Y(),Ye(" ",e.name," ")}}function tje(t,n){if(t&1){let e=gn();X(0,"div",2)(1,"label",3),ue(2),Te(3,"translate"),re(),X(4,"brn-select",9),Te(5,"translate"),Oi("ngModelChange",function(o){ze(e);let i=xe();return ns(i.connection.cyberShield.model,o)||(i.connection.cyberShield.model=o),He(o)}),X(6,"hlm-select-trigger",10),Ve(7,"hlm-select-value"),re(),X(8,"hlm-select-content"),Go(9,eje,2,2,"hlm-option",11,Ds),re()()()}if(t&2){let e=xe();Y(2),ct(De(3,4,"MODEL")),Y(2),Ri("ngModel",e.connection.cyberShield.model),Pe("disabled",e.connection.cyberShield.models.length===0)("placeholder",De(5,6,"SELECT_MODEL")),Y(5),Wo(e.context.connection.cyberShield.models)}}var pN=class t{Math=Math;context=Uu();connection=this.context.connection;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-edit-connection-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],decls:27,vars:21,consts:[["hlmDialogTitle",""],[1,"grid","gap-4","py-4"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"text-right"],["hlmInput","","type","number","placeholder","ms",1,"col-span-3",3,"ngModelChange","ngModel"],["hlmInput","","type","number",1,"col-span-3",3,"ngModelChange","ngModel"],["hlmInput","","type","number","placeholder","Bytes/s",1,"col-span-3",3,"ngModelChange","ngModel"],[1,"col-span-3","inline-flex","items-center","justify-end"],[3,"ngModelChange","ngModel","disabled"],[1,"col-span-3","inline-block","w-full",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"w-full"],[3,"value"]],template:function(e,r){e&1&&(X(0,"hlm-dialog-header")(1,"h3",0),ue(2),Te(3,"translate"),re()(),X(4,"div",1)(5,"div",2)(6,"label",3),ue(7),Te(8,"translate"),re(),X(9,"input",4),Le("ngModelChange",function(i){return r.connection.latency=r.Math.max(i,0)}),re()(),X(10,"div",2)(11,"label",3),ue(12),Te(13,"translate"),re(),X(14,"input",5),Le("ngModelChange",function(i){return r.connection.latencyVariation=r.Math.max(i,0)}),re()(),X(15,"div",2)(16,"label",3),ue(17),Te(18,"translate"),re(),X(19,"input",6),Le("ngModelChange",function(i){return r.connection.bandwidth=r.Math.max(i,1)}),re()(),X(20,"div",2)(21,"label",3),ue(22),Te(23,"translate"),re(),X(24,"div",7)(25,"hlm-switch",8),Oi("ngModelChange",function(i){return ns(r.connection.cyberShield.enabled,i)||(r.connection.cyberShield.enabled=i),i}),re()()(),st(26,tje,11,8,"div",2),re()),e&2&&(Y(2),ct(De(3,11,"MODIFY_CONNECTION")),Y(5),ct(De(8,13,"LATENCY")),Y(2),Pe("ngModel",r.connection.latency),Y(3),ct(De(13,15,"VARIABILITY")),Y(2),Pe("ngModel",r.connection.latencyVariation),Y(3),ct(De(18,17,"BANDWIDTH")),Y(2),Pe("ngModel",r.connection.bandwidth),Y(3),ct(De(23,19,"CYBER_SHIELD")),Y(3),Ri("ngModel",r.connection.cyberShield.enabled),Pe("disabled",r.connection.cyberShield.models.length===0),Y(),kt(r.connection.cyberShield.enabled?26:-1))},dependencies:[Cr,Wu,Nf,cV,Gu,ec,ao,To,Of,da,qs,Ku,Ql,Jl,Pf,Ya,Xi,ys,Zs,Ks,pa,$w,b2],encapsulation:2})};var nje=(t,n,e,r)=>({left:t,top:n,width:e,height:r}),rje=(t,n)=>({animate:t,reverse:n}),oje=t=>({animate:t}),hN=class t{dialog=M(Ef);connection=Z.required();get animate(){return this.connection().status!==0}get reverse(){return this.connection().status===2}get node1(){return this.connection().node1.position}get node2(){return this.connection().node2.position}get point(){let e=this.node2.x-this.node1.x,r=this.node2.y-this.node1.y,o=Math.sqrt(e*e+r*r);return o===0?{x:this.node1.x,y:this.node1.y}:{x:this.node1.x+e/o*Math.min(60,o/2),y:this.node1.y+r/o*Math.min(60,o/2)}}get w(){return Math.abs(this.node2.x-this.node1.x)+60}get h(){return Math.abs(this.node2.y-this.node1.y)+60}get t(){return{x:(this.node1.x+this.node2.x)/2-this.w/2,y:(this.node1.y+this.node2.y)/2+this.h/2}}onClick(){this.dialog.open(pN,{context:{connection:this.connection()}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-connection"]],hostAttrs:[1,"contents"],inputs:{connection:[1,"connection"]},decls:4,vars:27,consts:[[1,"pointer-events-none","absolute","z-0","origin-center","-translate-x-1/2","-translate-y-1/2"],["hlmTooltipTrigger","",1,"pseudo-connection",3,"click"],[1,"connection",3,"ngClass"],["r","5",3,"ngClass"]],template:function(e,r){e&1&&(vh(),X(0,"svg",0)(1,"line",1),Le("click",function(){return r.onClick()}),re(),Ve(2,"line",2)(3,"circle",3),re()),e&2&&(dl(AU(17,nje,"calc(50% + "+(r.node1.x+r.node2.x)/2+"px)","calc(50% - "+(r.node1.y+r.node2.y)/2+"px)",r.w+"px",r.h+"px")),Y(),Bt("x1",r.node1.x-r.t.x)("y1",r.t.y-r.node1.y)("x2",r.node2.x-r.t.x)("y2",r.t.y-r.node2.y),Y(),Pe("ngClass",xh(22,rje,r.animate,r.reverse)),Bt("x1",r.node1.x-r.t.x)("y1",r.t.y-r.node1.y)("x2",r.node2.x-r.t.x)("y2",r.t.y-r.node2.y),Y(),MU("cyber-shield ",r.connection().cyberShield.enabled&&r.connection().cyberShield.model?r.connection().cyberShield.state:"disabled",""),Pe("ngClass",ya(25,oje,r.animate)),Bt("cx",r.point.x-r.t.x)("cy",r.t.y-r.point.y))},dependencies:[Cr,Im],styles:[".connection[_ngcontent-%COMP%]{stroke:hsl(var(--border));stroke-width:1;transition-property:stroke-width,stroke-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;stroke-linecap:round}  .high-contrast .connection{stroke:hsl(var(--primary))!important}.connection.animate[_ngcontent-%COMP%]{stroke:hsl(var(--primary));stroke-width:2;stroke-dasharray:10;animation:5s linear 0ms infinite forwards normal _ngcontent-%COMP%_dash}.connection.animate.reverse[_ngcontent-%COMP%]{animation-direction:reverse}.cyber-shield[_ngcontent-%COMP%]{fill:transparent;opacity:0;transition-property:opacity,fill-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.cyber-shield.waiting[_ngcontent-%COMP%]{fill:#2563eb;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.waiting[_ngcontent-%COMP%]{fill:#60a5fa}}  .high-contrast .cyber-shield.waiting{fill:#1d4ed8}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.waiting{fill:#3b82f6}}.cyber-shield.safe[_ngcontent-%COMP%]{fill:#16a34a;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.safe[_ngcontent-%COMP%]{fill:#4ade80}}  .high-contrast .cyber-shield.safe{fill:#15803d}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.safe{fill:#22c55e}}.cyber-shield.attack[_ngcontent-%COMP%]{fill:#dc2626;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.attack[_ngcontent-%COMP%]{fill:#f87171}}  .high-contrast .cyber-shield.attack{fill:#b91c1c}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.attack{fill:#ef4444}}.cyber-shield.animate[_ngcontent-%COMP%]{animation:.8s ease-in-out 0ms infinite alternate _ngcontent-%COMP%_pulse}.pseudo-connection[_ngcontent-%COMP%]{pointer-events:auto;cursor:pointer;stroke:transparent;stroke-width:20}.pseudo-connection[_ngcontent-%COMP%]:hover ~ .connection[_ngcontent-%COMP%]{stroke-width:4}@keyframes _ngcontent-%COMP%_dash{0%{stroke-dashoffset:100%}to{stroke-dashoffset:0%}}@keyframes _ngcontent-%COMP%_pulse{0%{r:5}to{r:7}}"]})};var Zu;(a=>(a.ICMPEchoRequest=(l,c,u="Ping request")=>{let p=new TextEncoder().encode(u).length;return{srcIP:l,dstIP:c,transportProtocol:1,payload:u,totalBytes:8+p,headerSize:8,payloadSize:p,timestamp:new Date,ttl:64,type:8,code:0,identifier:Math.floor(Math.random()*65535),sequence:Math.floor(Math.random()*65535)}},a.ICMPEchoReply=(l,c,u,d,p="Pong response")=>{let f=new TextEncoder().encode(p).length;return{srcIP:l,dstIP:c,transportProtocol:1,payload:p,totalBytes:8+f,headerSize:8,payloadSize:f,timestamp:new Date,ttl:64,type:0,code:0,identifier:u,sequence:d}},a.TCP=(l,c,u,d,p,h,f,m="")=>{let v=new TextEncoder().encode(m).length;return{srcIP:l,dstIP:c,srcPort:u,dstPort:d,transportProtocol:6,payload:m,totalBytes:20+v,headerSize:20,payloadSize:v,timestamp:new Date,ttl:64,sequence:p,ack:h,tcpFlags:f}},a.TCPSYN=(l,c,u,d)=>(0,a.TCP)(l,c,u,d,Math.floor(Math.random()*1e3),0,2),a.TCPSYNACK=(l,c,u,d,p)=>(0,a.TCP)(l,c,u,d,Math.floor(Math.random()*1e3),p+1,18),a.TCPACK=(l,c,u,d,p,h)=>(0,a.TCP)(l,c,u,d,h+1,p+1,16),a.UDP=(l,c,u,d,p="")=>{let f=new TextEncoder().encode(p).length;return{srcIP:l,dstIP:c,srcPort:u,dstPort:d,transportProtocol:17,payload:p,totalBytes:8+f,headerSize:8,payloadSize:f,timestamp:new Date,ttl:64}}))(Zu||={});var C2=class{constructor(n,e){this.node=n;this.interceptor=e}library;internalCommands=[{id:"ping",name:"Ping",multiple:!1},{id:"threeWayHandshake",name:"Three-Way Handshake",multiple:!1}];_externalCommands=[];get externalCommands(){return[...this._externalCommands]}ping(n){this.node.sendPacket(Zu.ICMPEchoRequest(this.node.ip,n))}threeWayHandshake(n,e,r){this.node.sendPacket(Zu.TCPSYN(this.node.ip,n,e,r))}loadLibrary(n){if(!n){this.library=void 0,this._externalCommands=[];return}let e=Object.keys(n).filter(r=>r.startsWith("cmd_"));this.library={},this._externalCommands=[];for(let r of e)this.library[r]=(...o)=>n[r]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:i=>this.node.sendPacket(i)},...o),this._externalCommands.push({id:r,name:r.substring(4).replaceAll("_"," "),multiple:_M(n[r])===1/0})}execute(n,...e){if(this.library&&this.library[n])try{this.library[n](...e)}catch(r){console.error(r)}}};var fN=class{constructor(n){this.node=n}_intercept=new Zn(null);get intercept$(){return this._intercept}_externalInterceptor;_interceptICMP(n){switch(n.type){case 8:this.node.sendPacket(Zu.ICMPEchoReply(this.node.ip??"",n.srcIP,n.identifier,n.sequence));break;case 0:break}}_interceptTCP(n){switch(n.tcpFlags){case 2:this.node.sendPacket(Zu.TCPSYNACK(this.node.ip,n.srcIP,n.dstPort,n.srcPort,n.sequence));break;case 18:this.node.sendPacket(Zu.TCPACK(this.node.ip,n.srcIP,n.dstPort,n.srcPort,n.sequence,n.ack));break;case 16:break}}intercept(n){if(this._externalInterceptor)try{if(this._externalInterceptor(le({},n))!==void 0)return}catch(e){console.error(e)}switch(this._intercept.next(le({},n)),n.transportProtocol){case 1:this._interceptICMP(n);break;case 6:this._interceptTCP(n);break;case 17:break}}loadLibrary(n){if(!n){this._externalInterceptor=void 0;return}let e=Object.keys(n).find(r=>r===`intcp_${this.node.type}`)??Object.keys(n).find(r=>r==="intcp");e&&(this._externalInterceptor=r=>n[e]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:o=>this.node.sendPacket(o)},r))}};var zw=class extends C2{internalAttacks=[{id:"dos",name:"Denial of Service (DoS)",multiple:!1}];_externalAttacks=[];get externalAttacks(){return[...this._externalAttacks]}dos(n,e,r,o){for(let i=0;i<o;i++){let s=Zu.TCPSYN(this.node.ip,n,Aw(1024,65535),e);s.ttl=Aw(r[0],r[1]),this.node.sendPacket(s)}}loadLibrary(n){if(!n){super.loadLibrary(n),this._externalAttacks=[];return}let e=Object.keys(n).filter(r=>r.startsWith("atk_"));super.loadLibrary(n),this._externalAttacks=[];for(let r of e)this.library[r]=(...o)=>n[r]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:i=>this.node.sendPacket(i)},...o),this._externalAttacks.push({id:r,name:r.substring(4).replaceAll("_"," "),multiple:_M(n[r])===1/0})}attack(n,...e){this.execute(n,...e)}};var ije=/^([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})$/,Ipe=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/,Kn=(r=>(r.ROUTER="router",r.COMPUTER="computer",r.IOT="iot",r))(Kn||{});(s=>(s.Types=["router","computer","iot"],s.RouterTypes=["router"],s.DeviceTypes=["computer","iot"],s.AttackerTypes=["computer"],s.getTypes=a=>{switch(a){case"router":return s.RouterTypes;case"computer":case"iot":return s.DeviceTypes;default:return s.Types}},s.toString=a=>{switch(a){case"router":return"ROUTER";case"computer":return"COMPUTER";case"iot":return"IOT_DEVICE"}}))(Kn||={});var Xu=class{_mac;get mac(){return this._mac}_ip;get ip(){return this._ip}set ip(n){if(n!==void 0&&(typeof n!="string"||!Ipe.test(n)))throw new Error("Invalid IP address");this._ip=n}_name;get name(){return this._name}set name(n){this._name!==n&&(this._name=n)}_type;get type(){return this._type}set type(n){if(this._type!==n){if(!Kn.Types.includes(n))throw new Error("Invalid node type");if(this._type==="router"&&n!=="router")throw new Error("Cannot change the type of a router");if(this._type!=="router"&&n==="router")throw new Error("Cannot change the type of a device to a router");Kn.AttackerTypes.includes(n)?this._generator=new zw(this,this.interceptor):this._generator instanceof zw&&(this._generator=new C2(this,this.interceptor)),this._generator.loadLibrary(this._library),this._type=n}}_library;interceptor;_generator;get generator(){return this._generator}_traffic;get traffic(){return this._traffic.map(n=>le({},n))}_position;get position(){return le({},this._position)}constructor(n,e,r={x:0,y:0}){this._mac=this._generateMac(),this._ip=void 0,this._name=n,this._type=e,this.interceptor=new fN(this),this._generator=Kn.AttackerTypes.includes(e)?new zw(this,this.interceptor):new C2(this,this.interceptor),this._traffic=[],this._position={x:Math.min(Math.max(r.x,-Cc/2),Cc/2),y:Math.min(Math.max(r.y,-Cc/2),Cc/2)},wl.instance.library$.subscribe(o=>this.loadLibrary(o))}init(n,e,r){if(n&&!ije.test(n))throw new Error("Invalid MAC address");if(n&&(this._mac=n),e&&!Ipe.test(e))throw new Error("Invalid IP address");return e&&(this._ip=e),r&&(this._traffic=r.map(o=>le({},o))),this}_generateMac(){return"XX:XX:XX:XX:XX:XX".replace(/X/g,()=>Math.floor(Math.random()*16).toString(16))}loadLibrary(n){this._library=n?n():void 0,this.interceptor.loadLibrary(this._library),this.generator.loadLibrary(this._library)}logTraffic(n){this._traffic.push(n)}clearTraffic(){this._traffic=[]}move(n,e,r=!1){!r&&this._position.x===n&&this._position.y===e||(r&&(n=this._position.x+n,e=this._position.y+e),this._position={x:Math.min(Math.max(n,-Cc/2),Cc/2),y:Math.min(Math.max(e,-Cc/2),Cc/2)})}static fromObject(n){throw new Error("Method not implemented")}};_s([Lr.SetState],Xu.prototype,"ip",1),_s([Lr.SetState],Xu.prototype,"name",1),_s([Lr.SetState],Xu.prototype,"type",1),_s([Lr.SetState],Xu.prototype,"move",1);var nh=class t extends Xu{_connection;get connected(){return this._connection!==void 0}get communicating(){return this._connection!==void 0&&this._connection.status!==0}constructor(n,e,r){super(n,e,r)}connect(n,e){let r=n.acceptConnection(this,e);if(!r)throw new Error(`${this.mac} could not connect to router`);let[o,i]=r;this.ip!==o&&(this.ip=o),this._connection=i}disconnect(n){n.removeConnection(this)&&(this._connection=void 0,this.ip=void 0)}sendPacket(n){if(this._connection===void 0)throw new Error(`${this.mac} is not connected to a router`);this.logTraffic(n),this._connection.spreadPacket(n)}receivePacket(n){if(this.ip!==n.dstIP)throw new Error(`Packet is not addressed to ${this.mac}`);this.logTraffic(n),this.interceptor.intercept(n)}static fromObject(n){return new t(n.name,n.type,n.position).init(n.mac,n.ip,n.traffic)}toObject(){let n=this.traffic;return{name:this.name,mac:this.mac,ip:this.ip,type:this.type,position:this.position,connection:this._connection?.toObject(),traffic:n.length>0?n:void 0}}};var xV=class{_table;get connections(){return[...this._table.values()]}constructor(){this._table=new Map}get(n){return this._table.get(n)}add(n,e){this._table.set(n,e)}remove(n){return this._table.delete(n)}has(n){return this._table.has(n)}clear(){this._table.clear()}size(){return this._table.size}},_V=class{_availableIPs;_assignedIPs;get leasedIPs(){return le({},this._assignedIPs)}constructor(n,e,r){this._availableIPs=new Set,this._assignedIPs=new Map;for(let o=e;o<=r;o++)this._availableIPs.add(`${n}.${o}`)}requestIP(n){if(this._assignedIPs.has(n))return this._assignedIPs.get(n);let e=this._availableIPs.values().next().value;return e?(this._availableIPs.delete(e),this._assignedIPs.set(n,e),e):null}releaseIP(n){let e=this._assignedIPs.get(n);e&&(this._assignedIPs.delete(n),this._availableIPs.add(e))}registerFixedIP(n,e){this._availableIPs.delete(e),this._assignedIPs.set(n,e)}},Hw=class t extends Xu{_arpTable;_dhcpServer;get connections(){return this._arpTable.connections}get connected(){return this.connections.length>0}get communicating(){return this.connections.some(n=>n.status!==0)}constructor(n,e){super(n,"router",e),this.init(void 0,"192.168.0.1"),this._arpTable=new xV,this._dhcpServer=new _V("192.168.0",2,254)}_forwardPacket(n){let e=this._arpTable.get(n.dstIP);if(e)this.logTraffic(n),n=ht(le({},n),{ttl:(n.ttl??1)-1}),n.ttl>0&&e.spreadPacket(n);else throw new Error(`Impossible to forward the packet ${JSON.stringify(n,null,2)}, destination IP not found`)}acceptConnection(n,e){n.ip&&this._dhcpServer.registerFixedIP(n.mac,n.ip);let r=n.ip??this._dhcpServer.requestIP(n.mac);return r?(e||(e=new Ow(this,n)),this._arpTable.add(r,e),[r,e]):null}removeConnection(n){return this._arpTable.get(n.ip??"")?(this._arpTable.remove(n.ip??""),this._dhcpServer.releaseIP(n.mac),!0):!1}removeAllConnections(){for(let n of this._arpTable.connections)n.node1 instanceof nh?n.node1.disconnect(this):n.node2 instanceof nh&&n.node2.disconnect(this);return this._arpTable.size()===0}sendPacket(n){this._forwardPacket(n)}receivePacket(n){n.dstIP===this.ip?(this.logTraffic(n),this.interceptor.intercept(n)):this._forwardPacket(n)}static fromObject(n){return new t(n.name,n.position).init(n.mac,n.ip,n.traffic)}toObject(){let n=this.traffic;return{name:this.name,mac:this.mac,ip:this.ip,position:le({},this.position),traffic:n.length>0?n:void 0}}};var Uw=class{_nodes=new Map;get nodes(){return[...this._nodes.values()]}_router;get router(){return this._router}get devices(){let n=this.nodes.filter(({type:e})=>!Kn.RouterTypes.includes(e));return n.length>0?n:void 0}reset(){this._nodes.clear(),this._router=void 0}addNode(n){if(this._router&&Kn.RouterTypes.includes(n.type))throw new Error("Cannot add more than one router to the network");return Kn.RouterTypes.includes(n.type)&&(this._router=n),this._nodes.set(n.mac,n),n}deleteNode(n){let e=this._nodes.get(n);if(!e)throw new Error("Does not exist a node with the specified MAC address");return Kn.RouterTypes.includes(e.type)?(this._router=void 0,e.removeAllConnections()):this._router&&e.disconnect(this._router),this._nodes.delete(e.mac),!0}getNode(n){return this._nodes.get(n)}getConnectedNodes(n){return this.nodes.filter(e=>e.ip&&n!==e.mac)}toObject(){return{exportedAt:new Date().toISOString(),router:this.router?.toObject(),devices:this.devices?.map(n=>n.toObject())}}fromObject(n){this.reset(),n.router&&this.addNode(Hw.fromObject(n.router)),n.devices&&n.devices.forEach(e=>{let r=this.addNode(nh.fromObject(e));e.connection&&r.connect(this.router,Ow.fromObject(this.router,r,e.connection))})}};Uw=_s([Lr.UseState],Uw);var sje={variant:"default",size:"default"},aje=new Me("BrnButtonConfig");function Npe(){return M(aje,{optional:!0})??sje}var kV=lr("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Qa=class t{_config=Npe();_additionalClasses=Ze("");userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(kV({variant:this.variant(),size:this.size()}),this.userClass(),this._additionalClasses()));variant=Z(this._config.variant);size=Z(this._config.size);setClass(n){this._additionalClasses.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmBtn",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"],variant:[1,"variant"],size:[1,"size"]},exportAs:["hlmBtn"]})};var Ja=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})};function lje(t,n){if(t&1&&(X(0,"hlm-option",7),ue(1),Te(2,"translate"),re()),t&2){let e=n.$implicit,r=xe();Pe("value",e),Y(),ct(De(2,2,r.NodeType.toString(e)))}}var mN=class t{NodeType=Kn;ref=M(ws);context=Uu();types=ae(()=>Array.isArray(this.context.type)?this.context.type:[this.context.type]);name=si(null);type=si(this.types().length===1?this.types()[0]:null);submit(){this.ref.close({name:this.name(),type:this.type()})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-add-node-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],inputs:{name:[1,"name"],type:[1,"type"]},outputs:{name:"nameChange",type:"typeChange"},decls:25,vars:19,consts:[["hlmDialogTitle",""],[1,"grid","gap-4","py-4"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"text-right"],["hlmInput","",1,"col-span-3",3,"ngModelChange","ngModel"],[1,"col-span-3","inline-block",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"w-full"],[3,"value"],["hlmBtn","",3,"click","disabled"]],template:function(e,r){e&1&&(X(0,"hlm-dialog-header")(1,"h3",0),ue(2),Te(3,"translate"),re()(),X(4,"div",1)(5,"div",2)(6,"label",3),ue(7),Te(8,"translate"),re(),X(9,"input",4),Oi("ngModelChange",function(i){return ns(r.name,i)||(r.name=i),i}),re()(),X(10,"div",2)(11,"label",3),ue(12),Te(13,"translate"),re(),X(14,"brn-select",5),Te(15,"translate"),Oi("ngModelChange",function(i){return ns(r.type,i)||(r.type=i),i}),X(16,"hlm-select-trigger",6),Ve(17,"hlm-select-value"),re(),X(18,"hlm-select-content"),Go(19,lje,3,4,"hlm-option",7,Ds),re()()()(),X(21,"hlm-dialog-footer")(22,"button",8),Le("click",function(){return r.submit()}),ue(23),Te(24,"translate"),re()()),e&2&&(Y(2),ct(De(3,9,"ADD_NODE")),Y(5),ct(De(8,11,"NAME")),Y(2),Ri("ngModel",r.name),Y(3),ct(De(13,13,"TYPE")),Y(2),Ri("ngModel",r.type),Pe("placeholder",De(15,15,"SELECT_DEVICE_TYPE"))("disabled",r.types().length===1),Y(5),Wo(r.types()),Y(3),Pe("disabled",!(r.name()&&r.type())),Y(),Ye(" ",De(24,17,"ADD")," "))},dependencies:[Cr,Wu,Nf,Gu,ec,ao,To,da,qs,Ku,Qa,Ql,Jl,x2,Pf,Ya,Xi,ys,Zs,Ks,pa],encapsulation:2})};var cje=t=>({name:t}),gN=class t{ref=M(ws);context=Uu();name=ae(()=>this.context.node.name);cancel(){this.ref.close()}delete(){this.ref.close({node:this.context.node})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-delete-node-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],decls:14,vars:15,consts:[["hlmDialogTitle",""],["hlmDialogDescription",""],["hlmBtn","","variant","outline",3,"click"],["hlmBtn","","variant","destructive",3,"click"]],template:function(e,r){e&1&&(X(0,"hlm-dialog-header")(1,"h3",0),ue(2),Te(3,"translate"),re()(),X(4,"p",1),ue(5),Te(6,"translate"),re(),X(7,"hlm-dialog-footer")(8,"button",2),Le("click",function(){return r.cancel()}),ue(9),Te(10,"translate"),re(),X(11,"button",3),Le("click",function(){return r.delete()}),ue(12),Te(13,"translate"),re()()),e&2&&(Y(2),Ye(" ",LU(3,4,"DELETE_NODE",ya(13,cje,r.name()))," "),Y(3),Ye(" ",De(6,7,"DELETE_DESC")," "),Y(4),Ye(" ",De(10,9,"CANCEL")," "),Y(3),Ye(" ",De(13,11,"DELETE")," "))},dependencies:[Cr,ao,To,Qa,fb,Ql,Jl,x2,Xi],encapsulation:2})};function qpe(t){return typeof t>"u"||t===null}function uje(t){return typeof t=="object"&&t!==null}function dje(t){return Array.isArray(t)?t:qpe(t)?[]:[t]}function pje(t,n){var e,r,o,i;if(n)for(i=Object.keys(n),e=0,r=i.length;e<r;e+=1)o=i[e],t[o]=n[o];return t}function hje(t,n){var e="",r;for(r=0;r<n;r+=1)e+=t;return e}function fje(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var mje=qpe,gje=uje,vje=dje,wje=hje,yje=fje,xje=pje,ri={isNothing:mje,isObject:gje,toArray:vje,repeat:wje,isNegativeZero:yje,extend:xje};function Kpe(t,n){var e="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(e+='in "'+t.mark.name+'" '),e+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!n&&t.mark.snippet&&(e+=`

`+t.mark.snippet),r+" "+e):r}function Pb(t,n){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=n,this.message=Kpe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Pb.prototype=Object.create(Error.prototype);Pb.prototype.constructor=Pb;Pb.prototype.toString=function(n){return this.name+": "+Kpe(this,n)};var Xs=Pb;function CV(t,n,e,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-n>a&&(i=" ... ",n=r-a+i.length),e-r>a&&(s=" ...",e=r+a-s.length),{str:i+t.slice(n,e).replace(/\t/g,"\u2192")+s,pos:r-n+i.length}}function SV(t,n){return ri.repeat(" ",n-t.length)+t}function _je(t,n){if(n=Object.create(n||null),!t.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var e=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=e.exec(t.buffer);)o.push(i.index),r.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",l,c,u=Math.min(t.line+n.linesAfter,o.length).toString().length,d=n.maxLength-(n.indent+u+3);for(l=1;l<=n.linesBefore&&!(s-l<0);l++)c=CV(t.buffer,r[s-l],o[s-l],t.position-(r[s]-r[s-l]),d),a=ri.repeat(" ",n.indent)+SV((t.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=CV(t.buffer,r[s],o[s],t.position,d),a+=ri.repeat(" ",n.indent)+SV((t.line+1).toString(),u)+" | "+c.str+`
`,a+=ri.repeat("-",n.indent+u+3+c.pos)+`^
`,l=1;l<=n.linesAfter&&!(s+l>=o.length);l++)c=CV(t.buffer,r[s+l],o[s+l],t.position-(r[s]-r[s+l]),d),a+=ri.repeat(" ",n.indent)+SV((t.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var kje=_je,bje=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Cje=["scalar","sequence","mapping"];function Sje(t){var n={};return t!==null&&Object.keys(t).forEach(function(e){t[e].forEach(function(r){n[String(r)]=e})}),n}function Mje(t,n){if(n=n||{},Object.keys(n).forEach(function(e){if(bje.indexOf(e)===-1)throw new Xs('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.options=n,this.tag=t,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(e){return e},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=Sje(n.styleAliases||null),Cje.indexOf(this.kind)===-1)throw new Xs('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Yi=Mje;function Ape(t,n){var e=[];return t[n].forEach(function(r){var o=e.length;e.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),e[o]=r}),e}function Tje(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,e;function r(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(n=0,e=arguments.length;n<e;n+=1)arguments[n].forEach(r);return t}function TV(t){return this.extend(t)}TV.prototype.extend=function(n){var e=[],r=[];if(n instanceof Yi)r.push(n);else if(Array.isArray(n))r=r.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(e=e.concat(n.implicit)),n.explicit&&(r=r.concat(n.explicit));else throw new Xs("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(i){if(!(i instanceof Yi))throw new Xs("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new Xs("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new Xs("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof Yi))throw new Xs("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(TV.prototype);return o.implicit=(this.implicit||[]).concat(e),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=Ape(o,"implicit"),o.compiledExplicit=Ape(o,"explicit"),o.compiledTypeMap=Tje(o.compiledImplicit,o.compiledExplicit),o};var Dje=TV,Eje=new Yi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Ije=new Yi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Nje=new Yi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Aje=new Dje({explicit:[Eje,Ije,Nje]});function Rje(t){if(t===null)return!0;var n=t.length;return n===1&&t==="~"||n===4&&(t==="null"||t==="Null"||t==="NULL")}function Oje(){return null}function Fje(t){return t===null}var Pje=new Yi("tag:yaml.org,2002:null",{kind:"scalar",resolve:Rje,construct:Oje,predicate:Fje,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Bje(t){if(t===null)return!1;var n=t.length;return n===4&&(t==="true"||t==="True"||t==="TRUE")||n===5&&(t==="false"||t==="False"||t==="FALSE")}function Lje(t){return t==="true"||t==="True"||t==="TRUE"}function $je(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Vje=new Yi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Bje,construct:Lje,predicate:$je,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function jje(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function zje(t){return 48<=t&&t<=55}function Hje(t){return 48<=t&&t<=57}function Uje(t){if(t===null)return!1;var n=t.length,e=0,r=!1,o;if(!n)return!1;if(o=t[e],(o==="-"||o==="+")&&(o=t[++e]),o==="0"){if(e+1===n)return!0;if(o=t[++e],o==="b"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(!jje(t.charCodeAt(e)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(!zje(t.charCodeAt(e)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;e<n;e++)if(o=t[e],o!=="_"){if(!Hje(t.charCodeAt(e)))return!1;r=!0}return!(!r||o==="_")}function Gje(t){var n=t,e=1,r;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),r=n[0],(r==="-"||r==="+")&&(r==="-"&&(e=-1),n=n.slice(1),r=n[0]),n==="0")return 0;if(r==="0"){if(n[1]==="b")return e*parseInt(n.slice(2),2);if(n[1]==="x")return e*parseInt(n.slice(2),16);if(n[1]==="o")return e*parseInt(n.slice(2),8)}return e*parseInt(n,10)}function Wje(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ri.isNegativeZero(t)}var qje=new Yi("tag:yaml.org,2002:int",{kind:"scalar",resolve:Uje,construct:Gje,predicate:Wje,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Kje=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Zje(t){return!(t===null||!Kje.test(t)||t[t.length-1]==="_")}function Xje(t){var n,e;return n=t.replace(/_/g,"").toLowerCase(),e=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:e*parseFloat(n,10)}var Yje=/^[-+]?[0-9]+e/;function Qje(t,n){var e;if(isNaN(t))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ri.isNegativeZero(t))return"-0.0";return e=t.toString(10),Yje.test(e)?e.replace("e",".e"):e}function Jje(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ri.isNegativeZero(t))}var eze=new Yi("tag:yaml.org,2002:float",{kind:"scalar",resolve:Zje,construct:Xje,predicate:Jje,represent:Qje,defaultStyle:"lowercase"}),tze=Aje.extend({implicit:[Pje,Vje,qje,eze]}),nze=tze,Zpe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Xpe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function rze(t){return t===null?!1:Zpe.exec(t)!==null||Xpe.exec(t)!==null}function oze(t){var n,e,r,o,i,s,a,l=0,c=null,u,d,p;if(n=Zpe.exec(t),n===null&&(n=Xpe.exec(t)),n===null)throw new Error("Date resolve error");if(e=+n[1],r=+n[2]-1,o=+n[3],!n[4])return new Date(Date.UTC(e,r,o));if(i=+n[4],s=+n[5],a=+n[6],n[7]){for(l=n[7].slice(0,3);l.length<3;)l+="0";l=+l}return n[9]&&(u=+n[10],d=+(n[11]||0),c=(u*60+d)*6e4,n[9]==="-"&&(c=-c)),p=new Date(Date.UTC(e,r,o,i,s,a,l)),c&&p.setTime(p.getTime()-c),p}function ize(t){return t.toISOString()}var sze=new Yi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:rze,construct:oze,instanceOf:Date,represent:ize});function aze(t){return t==="<<"||t===null}var lze=new Yi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:aze}),AV=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function cze(t){if(t===null)return!1;var n,e,r=0,o=t.length,i=AV;for(e=0;e<o;e++)if(n=i.indexOf(t.charAt(e)),!(n>64)){if(n<0)return!1;r+=6}return r%8===0}function uze(t){var n,e,r=t.replace(/[\r\n=]/g,""),o=r.length,i=AV,s=0,a=[];for(n=0;n<o;n++)n%4===0&&n&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(n));return e=o%4*6,e===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):e===18?(a.push(s>>10&255),a.push(s>>2&255)):e===12&&a.push(s>>4&255),new Uint8Array(a)}function dze(t){var n="",e=0,r,o,i=t.length,s=AV;for(r=0;r<i;r++)r%3===0&&r&&(n+=s[e>>18&63],n+=s[e>>12&63],n+=s[e>>6&63],n+=s[e&63]),e=(e<<8)+t[r];return o=i%3,o===0?(n+=s[e>>18&63],n+=s[e>>12&63],n+=s[e>>6&63],n+=s[e&63]):o===2?(n+=s[e>>10&63],n+=s[e>>4&63],n+=s[e<<2&63],n+=s[64]):o===1&&(n+=s[e>>2&63],n+=s[e<<4&63],n+=s[64],n+=s[64]),n}function pze(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var hze=new Yi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:cze,construct:uze,predicate:pze,represent:dze}),fze=Object.prototype.hasOwnProperty,mze=Object.prototype.toString;function gze(t){if(t===null)return!0;var n=[],e,r,o,i,s,a=t;for(e=0,r=a.length;e<r;e+=1){if(o=a[e],s=!1,mze.call(o)!=="[object Object]")return!1;for(i in o)if(fze.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(n.indexOf(i)===-1)n.push(i);else return!1}return!0}function vze(t){return t!==null?t:[]}var wze=new Yi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:gze,construct:vze}),yze=Object.prototype.toString;function xze(t){if(t===null)return!0;var n,e,r,o,i,s=t;for(i=new Array(s.length),n=0,e=s.length;n<e;n+=1){if(r=s[n],yze.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[n]=[o[0],r[o[0]]]}return!0}function _ze(t){if(t===null)return[];var n,e,r,o,i,s=t;for(i=new Array(s.length),n=0,e=s.length;n<e;n+=1)r=s[n],o=Object.keys(r),i[n]=[o[0],r[o[0]]];return i}var kze=new Yi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:xze,construct:_ze}),bze=Object.prototype.hasOwnProperty;function Cze(t){if(t===null)return!0;var n,e=t;for(n in e)if(bze.call(e,n)&&e[n]!==null)return!1;return!0}function Sze(t){return t!==null?t:{}}var Mze=new Yi("tag:yaml.org,2002:set",{kind:"mapping",resolve:Cze,construct:Sze}),Ype=nze.extend({implicit:[sze,lze],explicit:[hze,wze,kze,Mze]}),$f=Object.prototype.hasOwnProperty,vN=1,Qpe=2,Jpe=3,wN=4,MV=1,Tze=2,Rpe=3,Dze=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Eze=/[\x85\u2028\u2029]/,Ize=/[,\[\]\{\}]/,ehe=/^(?:!|!!|![a-z\-]+!)$/i,the=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ope(t){return Object.prototype.toString.call(t)}function Yu(t){return t===10||t===13}function M2(t){return t===9||t===32}function Ys(t){return t===9||t===32||t===10||t===13}function Ww(t){return t===44||t===91||t===93||t===123||t===125}function Nze(t){var n;return 48<=t&&t<=57?t-48:(n=t|32,97<=n&&n<=102?n-97+10:-1)}function Aze(t){return t===120?2:t===117?4:t===85?8:0}function Rze(t){return 48<=t&&t<=57?t-48:-1}function Fpe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Oze(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var nhe=new Array(256),rhe=new Array(256);for(S2=0;S2<256;S2++)nhe[S2]=Fpe(S2)?1:0,rhe[S2]=Fpe(S2);var S2;function Fze(t,n){this.input=t,this.filename=n.filename||null,this.schema=n.schema||Ype,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ohe(t,n){var e={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return e.snippet=kje(e),new Xs(n,e)}function Nt(t,n){throw ohe(t,n)}function yN(t,n){t.onWarning&&t.onWarning.call(null,ohe(t,n))}var Ppe={YAML:function(n,e,r){var o,i,s;n.version!==null&&Nt(n,"duplication of %YAML directive"),r.length!==1&&Nt(n,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Nt(n,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Nt(n,"unacceptable YAML version of the document"),n.version=r[0],n.checkLineBreaks=s<2,s!==1&&s!==2&&yN(n,"unsupported YAML version of the document")},TAG:function(n,e,r){var o,i;r.length!==2&&Nt(n,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],ehe.test(o)||Nt(n,"ill-formed tag handle (first argument) of the TAG directive"),$f.call(n.tagMap,o)&&Nt(n,'there is a previously declared suffix for "'+o+'" tag handle'),the.test(i)||Nt(n,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Nt(n,"tag prefix is malformed: "+i)}n.tagMap[o]=i}};function Lf(t,n,e,r){var o,i,s,a;if(n<e){if(a=t.input.slice(n,e),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Nt(t,"expected valid JSON character");else Dze.test(a)&&Nt(t,"the stream contains non-printable characters");t.result+=a}}function Bpe(t,n,e,r){var o,i,s,a;for(ri.isObject(e)||Nt(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(e),s=0,a=o.length;s<a;s+=1)i=o[s],$f.call(n,i)||(n[i]=e[i],r[i]=!0)}function qw(t,n,e,r,o,i,s,a,l){var c,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),c=0,u=o.length;c<u;c+=1)Array.isArray(o[c])&&Nt(t,"nested arrays are not supported inside keys"),typeof o=="object"&&Ope(o[c])==="[object Object]"&&(o[c]="[object Object]");if(typeof o=="object"&&Ope(o)==="[object Object]"&&(o="[object Object]"),o=String(o),n===null&&(n={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(c=0,u=i.length;c<u;c+=1)Bpe(t,n,i[c],e);else Bpe(t,n,i,e);else!t.json&&!$f.call(e,o)&&$f.call(n,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,Nt(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(n,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):n[o]=i,delete e[o];return n}function RV(t){var n;n=t.input.charCodeAt(t.position),n===10?t.position++:n===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Nt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Po(t,n,e){for(var r=0,o=t.input.charCodeAt(t.position);o!==0;){for(;M2(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(n&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(Yu(o))for(RV(t),o=t.input.charCodeAt(t.position),r++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return e!==-1&&r!==0&&t.lineIndent<e&&yN(t,"deficient indentation"),r}function kN(t){var n=t.position,e;return e=t.input.charCodeAt(n),!!((e===45||e===46)&&e===t.input.charCodeAt(n+1)&&e===t.input.charCodeAt(n+2)&&(n+=3,e=t.input.charCodeAt(n),e===0||Ys(e)))}function OV(t,n){n===1?t.result+=" ":n>1&&(t.result+=ri.repeat(`
`,n-1))}function Pze(t,n,e){var r,o,i,s,a,l,c,u,d=t.kind,p=t.result,h;if(h=t.input.charCodeAt(t.position),Ys(h)||Ww(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(o=t.input.charCodeAt(t.position+1),Ys(o)||e&&Ww(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;h!==0;){if(h===58){if(o=t.input.charCodeAt(t.position+1),Ys(o)||e&&Ww(o))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Ys(r))break}else{if(t.position===t.lineStart&&kN(t)||e&&Ww(h))break;if(Yu(h))if(l=t.line,c=t.lineStart,u=t.lineIndent,Po(t,!1,-1),t.lineIndent>=n){a=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(Lf(t,i,s,!1),OV(t,t.line-l),i=s=t.position,a=!1),M2(h)||(s=t.position+1),h=t.input.charCodeAt(++t.position)}return Lf(t,i,s,!1),t.result?!0:(t.kind=d,t.result=p,!1)}function Bze(t,n){var e,r,o;if(e=t.input.charCodeAt(t.position),e!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=o=t.position;(e=t.input.charCodeAt(t.position))!==0;)if(e===39)if(Lf(t,r,t.position,!0),e=t.input.charCodeAt(++t.position),e===39)r=t.position,t.position++,o=t.position;else return!0;else Yu(e)?(Lf(t,r,o,!0),OV(t,Po(t,!1,n)),r=o=t.position):t.position===t.lineStart&&kN(t)?Nt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);Nt(t,"unexpected end of the stream within a single quoted scalar")}function Lze(t,n){var e,r,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,e=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Lf(t,e,t.position,!0),t.position++,!0;if(a===92){if(Lf(t,e,t.position,!0),a=t.input.charCodeAt(++t.position),Yu(a))Po(t,!1,n);else if(a<256&&nhe[a])t.result+=rhe[a],t.position++;else if((s=Aze(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=Nze(a))>=0?i=(i<<4)+s:Nt(t,"expected hexadecimal character");t.result+=Oze(i),t.position++}else Nt(t,"unknown escape sequence");e=r=t.position}else Yu(a)?(Lf(t,e,r,!0),OV(t,Po(t,!1,n)),e=r=t.position):t.position===t.lineStart&&kN(t)?Nt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Nt(t,"unexpected end of the stream within a double quoted scalar")}function $ze(t,n){var e=!0,r,o,i,s=t.tag,a,l=t.anchor,c,u,d,p,h,f=Object.create(null),m,g,v,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,h=!1,a=[];else if(w===123)u=125,h=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(Po(t,!0,n),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=s,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=a,!0;e?w===44&&Nt(t,"expected the node content, but found ','"):Nt(t,"missed comma between flow collection entries"),g=m=v=null,d=p=!1,w===63&&(c=t.input.charCodeAt(t.position+1),Ys(c)&&(d=p=!0,t.position++,Po(t,!0,n))),r=t.line,o=t.lineStart,i=t.position,Kw(t,n,vN,!1,!0),g=t.tag,m=t.result,Po(t,!0,n),w=t.input.charCodeAt(t.position),(p||t.line===r)&&w===58&&(d=!0,w=t.input.charCodeAt(++t.position),Po(t,!0,n),Kw(t,n,vN,!1,!0),v=t.result),h?qw(t,a,f,g,m,v,r,o,i):d?a.push(qw(t,null,f,g,m,v,r,o,i)):a.push(m),Po(t,!0,n),w=t.input.charCodeAt(t.position),w===44?(e=!0,w=t.input.charCodeAt(++t.position)):e=!1}Nt(t,"unexpected end of the stream within a flow collection")}function Vze(t,n){var e,r,o=MV,i=!1,s=!1,a=n,l=0,c=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)MV===o?o=d===43?Rpe:Tze:Nt(t,"repeat of a chomping mode identifier");else if((u=Rze(d))>=0)u===0?Nt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Nt(t,"repeat of an indentation width identifier"):(a=n+u-1,s=!0);else break;if(M2(d)){do d=t.input.charCodeAt(++t.position);while(M2(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Yu(d)&&d!==0)}for(;d!==0;){for(RV(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Yu(d)){l++;continue}if(t.lineIndent<a){o===Rpe?t.result+=ri.repeat(`
`,i?1+l:l):o===MV&&i&&(t.result+=`
`);break}for(r?M2(d)?(c=!0,t.result+=ri.repeat(`
`,i?1+l:l)):c?(c=!1,t.result+=ri.repeat(`
`,l+1)):l===0?i&&(t.result+=" "):t.result+=ri.repeat(`
`,l):t.result+=ri.repeat(`
`,i?1+l:l),i=!0,s=!0,l=0,e=t.position;!Yu(d)&&d!==0;)d=t.input.charCodeAt(++t.position);Lf(t,e,t.position,!1)}return!0}function Lpe(t,n){var e,r=t.tag,o=t.anchor,i=[],s,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Nt(t,"tab characters must not be used in indentation")),!(l!==45||(s=t.input.charCodeAt(t.position+1),!Ys(s))));){if(a=!0,t.position++,Po(t,!0,-1)&&t.lineIndent<=n){i.push(null),l=t.input.charCodeAt(t.position);continue}if(e=t.line,Kw(t,n,Jpe,!1,!0),i.push(t.result),Po(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===e||t.lineIndent>n)&&l!==0)Nt(t,"bad indentation of a sequence entry");else if(t.lineIndent<n)break}return a?(t.tag=r,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function jze(t,n,e){var r,o,i,s,a,l,c=t.tag,u=t.anchor,d={},p=Object.create(null),h=null,f=null,m=null,g=!1,v=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);w!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Nt(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),i=t.line,(w===63||w===58)&&Ys(r))w===63?(g&&(qw(t,d,p,h,f,null,s,a,l),h=f=m=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):Nt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=r;else{if(s=t.line,a=t.lineStart,l=t.position,!Kw(t,e,Qpe,!1,!0))break;if(t.line===i){for(w=t.input.charCodeAt(t.position);M2(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),Ys(w)||Nt(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(qw(t,d,p,h,f,null,s,a,l),h=f=m=null),v=!0,g=!1,o=!1,h=t.tag,f=t.result;else if(v)Nt(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(v)Nt(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===i||t.lineIndent>n)&&(g&&(s=t.line,a=t.lineStart,l=t.position),Kw(t,n,wN,!0,o)&&(g?f=t.result:m=t.result),g||(qw(t,d,p,h,f,m,s,a,l),h=f=m=null),Po(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>n)&&w!==0)Nt(t,"bad indentation of a mapping entry");else if(t.lineIndent<n)break}return g&&qw(t,d,p,h,f,null,s,a,l),v&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),v}function zze(t){var n,e=!1,r=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Nt(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(e=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",n=t.position,e){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(n,t.position),s=t.input.charCodeAt(++t.position)):Nt(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ys(s);)s===33&&(r?Nt(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(n-1,t.position+1),ehe.test(o)||Nt(t,"named tag handle cannot contain such characters"),r=!0,n=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(n,t.position),Ize.test(i)&&Nt(t,"tag suffix cannot contain flow indicator characters")}i&&!the.test(i)&&Nt(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Nt(t,"tag name is malformed: "+i)}return e?t.tag=i:$f.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:Nt(t,'undeclared tag handle "'+o+'"'),!0}function Hze(t){var n,e;if(e=t.input.charCodeAt(t.position),e!==38)return!1;for(t.anchor!==null&&Nt(t,"duplication of an anchor property"),e=t.input.charCodeAt(++t.position),n=t.position;e!==0&&!Ys(e)&&!Ww(e);)e=t.input.charCodeAt(++t.position);return t.position===n&&Nt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(n,t.position),!0}function Uze(t){var n,e,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),n=t.position;r!==0&&!Ys(r)&&!Ww(r);)r=t.input.charCodeAt(++t.position);return t.position===n&&Nt(t,"name of an alias node must contain at least one character"),e=t.input.slice(n,t.position),$f.call(t.anchorMap,e)||Nt(t,'unidentified alias "'+e+'"'),t.result=t.anchorMap[e],Po(t,!0,-1),!0}function Kw(t,n,e,r,o){var i,s,a,l=1,c=!1,u=!1,d,p,h,f,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=wN===e||Jpe===e,r&&Po(t,!0,-1)&&(c=!0,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)),l===1)for(;zze(t)||Hze(t);)Po(t,!0,-1)?(c=!0,a=i,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)):a=!1;if(a&&(a=c||o),(l===1||wN===e)&&(vN===e||Qpe===e?m=n:m=n+1,g=t.position-t.lineStart,l===1?a&&(Lpe(t,g)||jze(t,g,m))||$ze(t,m)?u=!0:(s&&Vze(t,m)||Bze(t,m)||Lze(t,m)?u=!0:Uze(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Nt(t,"alias node should not have any properties")):Pze(t,m,vN===e)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=a&&Lpe(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Nt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,p=t.implicitTypes.length;d<p;d+=1)if(f=t.implicitTypes[d],f.resolve(t.result)){t.result=f.construct(t.result),t.tag=f.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if($f.call(t.typeMap[t.kind||"fallback"],t.tag))f=t.typeMap[t.kind||"fallback"][t.tag];else for(f=null,h=t.typeMap.multi[t.kind||"fallback"],d=0,p=h.length;d<p;d+=1)if(t.tag.slice(0,h[d].tag.length)===h[d].tag){f=h[d];break}f||Nt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&f.kind!==t.kind&&Nt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+f.kind+'", not "'+t.kind+'"'),f.resolve(t.result,t.tag)?(t.result=f.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Nt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function Gze(t){var n=t.position,e,r,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Po(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),e=t.position;s!==0&&!Ys(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(e,t.position),o=[],r.length<1&&Nt(t,"directive name must not be less than one character in length");s!==0;){for(;M2(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Yu(s));break}if(Yu(s))break;for(e=t.position;s!==0&&!Ys(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(e,t.position))}s!==0&&RV(t),$f.call(Ppe,r)?Ppe[r](t,r,o):yN(t,'unknown document directive "'+r+'"')}if(Po(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Po(t,!0,-1)):i&&Nt(t,"directives end mark is expected"),Kw(t,t.lineIndent-1,wN,!1,!0),Po(t,!0,-1),t.checkLineBreaks&&Eze.test(t.input.slice(n,t.position))&&yN(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&kN(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Po(t,!0,-1));return}if(t.position<t.length-1)Nt(t,"end of the stream or a document separator is expected");else return}function ihe(t,n){t=String(t),n=n||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var e=new Fze(t,n),r=t.indexOf("\0");for(r!==-1&&(e.position=r,Nt(e,"null byte is not allowed in input")),e.input+="\0";e.input.charCodeAt(e.position)===32;)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)Gze(e);return e.documents}function Wze(t,n,e){n!==null&&typeof n=="object"&&typeof e>"u"&&(e=n,n=null);var r=ihe(t,e);if(typeof n!="function")return r;for(var o=0,i=r.length;o<i;o+=1)n(r[o])}function qze(t,n){var e=ihe(t,n);if(e.length!==0){if(e.length===1)return e[0];throw new Xs("expected a single document in the stream, but found more")}}var Kze=Wze,Zze=qze,she={loadAll:Kze,load:Zze},ahe=Object.prototype.toString,lhe=Object.prototype.hasOwnProperty,FV=65279,Xze=9,Bb=10,Yze=13,Qze=32,Jze=33,eHe=34,DV=35,tHe=37,nHe=38,rHe=39,oHe=42,che=44,iHe=45,xN=58,sHe=61,aHe=62,lHe=63,cHe=64,uhe=91,dhe=93,uHe=96,phe=123,dHe=124,hhe=125,Qi={};Qi[0]="\\0";Qi[7]="\\a";Qi[8]="\\b";Qi[9]="\\t";Qi[10]="\\n";Qi[11]="\\v";Qi[12]="\\f";Qi[13]="\\r";Qi[27]="\\e";Qi[34]='\\"';Qi[92]="\\\\";Qi[133]="\\N";Qi[160]="\\_";Qi[8232]="\\L";Qi[8233]="\\P";var pHe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],hHe=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function fHe(t,n){var e,r,o,i,s,a,l;if(n===null)return{};for(e={},r=Object.keys(n),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(n[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=t.compiledTypeMap.fallback[s],l&&lhe.call(l.styleAliases,a)&&(a=l.styleAliases[a]),e[s]=a;return e}function mHe(t){var n,e,r;if(n=t.toString(16).toUpperCase(),t<=255)e="x",r=2;else if(t<=65535)e="u",r=4;else if(t<=4294967295)e="U",r=8;else throw new Xs("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+e+ri.repeat("0",r-n.length)+n}var gHe=1,Lb=2;function vHe(t){this.schema=t.schema||Ype,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ri.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=fHe(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Lb:gHe,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function $pe(t,n){for(var e=ri.repeat(" ",n),r=0,o=-1,i="",s,a=t.length;r<a;)o=t.indexOf(`
`,r),o===-1?(s=t.slice(r),r=a):(s=t.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=e),i+=s;return i}function EV(t,n){return`
`+ri.repeat(" ",t.indent*n)}function wHe(t,n){var e,r,o;for(e=0,r=t.implicitTypes.length;e<r;e+=1)if(o=t.implicitTypes[e],o.resolve(n))return!0;return!1}function _N(t){return t===Qze||t===Xze}function $b(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==FV||65536<=t&&t<=1114111}function Vpe(t){return $b(t)&&t!==FV&&t!==Yze&&t!==Bb}function jpe(t,n,e){var r=Vpe(t),o=r&&!_N(t);return(e?r:r&&t!==che&&t!==uhe&&t!==dhe&&t!==phe&&t!==hhe)&&t!==DV&&!(n===xN&&!o)||Vpe(n)&&!_N(n)&&t===DV||n===xN&&o}function yHe(t){return $b(t)&&t!==FV&&!_N(t)&&t!==iHe&&t!==lHe&&t!==xN&&t!==che&&t!==uhe&&t!==dhe&&t!==phe&&t!==hhe&&t!==DV&&t!==nHe&&t!==oHe&&t!==Jze&&t!==dHe&&t!==sHe&&t!==aHe&&t!==rHe&&t!==eHe&&t!==tHe&&t!==cHe&&t!==uHe}function xHe(t){return!_N(t)&&t!==xN}function Fb(t,n){var e=t.charCodeAt(n),r;return e>=55296&&e<=56319&&n+1<t.length&&(r=t.charCodeAt(n+1),r>=56320&&r<=57343)?(e-55296)*1024+r-56320+65536:e}function fhe(t){var n=/^\n* /;return n.test(t)}var mhe=1,IV=2,ghe=3,vhe=4,Gw=5;function _He(t,n,e,r,o,i,s,a){var l,c=0,u=null,d=!1,p=!1,h=r!==-1,f=-1,m=yHe(Fb(t,0))&&xHe(Fb(t,t.length-1));if(n||s)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Fb(t,l),!$b(c))return Gw;m=m&&jpe(c,u,a),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Fb(t,l),c===Bb)d=!0,h&&(p=p||l-f-1>r&&t[f+1]!==" ",f=l);else if(!$b(c))return Gw;m=m&&jpe(c,u,a),u=c}p=p||h&&l-f-1>r&&t[f+1]!==" "}return!d&&!p?m&&!s&&!o(t)?mhe:i===Lb?Gw:IV:e>9&&fhe(t)?Gw:s?i===Lb?Gw:IV:p?vhe:ghe}function kHe(t,n,e,r,o){t.dump=function(){if(n.length===0)return t.quotingType===Lb?'""':"''";if(!t.noCompatMode&&(pHe.indexOf(n)!==-1||hHe.test(n)))return t.quotingType===Lb?'"'+n+'"':"'"+n+"'";var i=t.indent*Math.max(1,e),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&e>=t.flowLevel;function l(c){return wHe(t,c)}switch(_He(n,a,t.indent,s,l,t.quotingType,t.forceQuotes&&!r,o)){case mhe:return n;case IV:return"'"+n.replace(/'/g,"''")+"'";case ghe:return"|"+zpe(n,t.indent)+Hpe($pe(n,i));case vhe:return">"+zpe(n,t.indent)+Hpe($pe(bHe(n,s),i));case Gw:return'"'+CHe(n)+'"';default:throw new Xs("impossible error: invalid scalar style")}}()}function zpe(t,n){var e=fhe(t)?String(n):"",r=t[t.length-1]===`
`,o=r&&(t[t.length-2]===`
`||t===`
`),i=o?"+":r?"":"-";return e+i+`
`}function Hpe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function bHe(t,n){for(var e=/(\n+)([^\n]*)/g,r=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,e.lastIndex=c,Upe(t.slice(0,c),n)}(),o=t[0]===`
`||t[0]===" ",i,s;s=e.exec(t);){var a=s[1],l=s[2];i=l[0]===" ",r+=a+(!o&&!i&&l!==""?`
`:"")+Upe(l,n),o=i}return r}function Upe(t,n){if(t===""||t[0]===" ")return t;for(var e=/ [^ ]/g,r,o=0,i,s=0,a=0,l="";r=e.exec(t);)a=r.index,a-o>n&&(i=s>o?s:a,l+=`
`+t.slice(o,i),o=i+1),s=a;return l+=`
`,t.length-o>n&&s>o?l+=t.slice(o,s)+`
`+t.slice(s+1):l+=t.slice(o),l.slice(1)}function CHe(t){for(var n="",e=0,r,o=0;o<t.length;e>=65536?o+=2:o++)e=Fb(t,o),r=Qi[e],!r&&$b(e)?(n+=t[o],e>=65536&&(n+=t[o+1])):n+=r||mHe(e);return n}function SHe(t,n,e){var r="",o=t.tag,i,s,a;for(i=0,s=e.length;i<s;i+=1)a=e[i],t.replacer&&(a=t.replacer.call(e,String(i),a)),(rh(t,n,a,!1,!1)||typeof a>"u"&&rh(t,n,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}function Gpe(t,n,e,r){var o="",i=t.tag,s,a,l;for(s=0,a=e.length;s<a;s+=1)l=e[s],t.replacer&&(l=t.replacer.call(e,String(s),l)),(rh(t,n+1,l,!0,!0,!1,!0)||typeof l>"u"&&rh(t,n+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=EV(t,n)),t.dump&&Bb===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function MHe(t,n,e){var r="",o=t.tag,i=Object.keys(e),s,a,l,c,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=i[s],c=e[l],t.replacer&&(c=t.replacer.call(e,l,c)),rh(t,n,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),rh(t,n,c,!1,!1)&&(u+=t.dump,r+=u));t.tag=o,t.dump="{"+r+"}"}function THe(t,n,e,r){var o="",i=t.tag,s=Object.keys(e),a,l,c,u,d,p;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Xs("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)p="",(!r||o!=="")&&(p+=EV(t,n)),c=s[a],u=e[c],t.replacer&&(u=t.replacer.call(e,c,u)),rh(t,n+1,c,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&Bb===t.dump.charCodeAt(0)?p+="?":p+="? "),p+=t.dump,d&&(p+=EV(t,n)),rh(t,n+1,u,!0,d)&&(t.dump&&Bb===t.dump.charCodeAt(0)?p+=":":p+=": ",p+=t.dump,o+=p));t.tag=i,t.dump=o||"{}"}function Wpe(t,n,e){var r,o,i,s,a,l;for(o=e?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof n=="object"&&n instanceof a.instanceOf)&&(!a.predicate||a.predicate(n))){if(e?a.multi&&a.representName?t.tag=a.representName(n):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,ahe.call(a.represent)==="[object Function]")r=a.represent(n,l);else if(lhe.call(a.represent,l))r=a.represent[l](n,l);else throw new Xs("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=r}return!0}return!1}function rh(t,n,e,r,o,i,s){t.tag=null,t.dump=e,Wpe(t,e,!1)||Wpe(t,e,!0);var a=ahe.call(t.dump),l=r,c;r&&(r=t.flowLevel<0||t.flowLevel>n);var u=a==="[object Object]"||a==="[object Array]",d,p;if(u&&(d=t.duplicates.indexOf(e),p=d!==-1),(t.tag!==null&&t.tag!=="?"||p||t.indent!==2&&n>0)&&(o=!1),p&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&p&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(THe(t,n,t.dump,o),p&&(t.dump="&ref_"+d+t.dump)):(MHe(t,n,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&n>0?Gpe(t,n-1,t.dump,o):Gpe(t,n,t.dump,o),p&&(t.dump="&ref_"+d+t.dump)):(SHe(t,n,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&kHe(t,t.dump,n,i,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Xs("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function DHe(t,n){var e=[],r=[],o,i;for(NV(t,e,r),o=0,i=r.length;o<i;o+=1)n.duplicates.push(e[r[o]]);n.usedDuplicates=new Array(i)}function NV(t,n,e){var r,o,i;if(t!==null&&typeof t=="object")if(o=n.indexOf(t),o!==-1)e.indexOf(o)===-1&&e.push(o);else if(n.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)NV(t[o],n,e);else for(r=Object.keys(t),o=0,i=r.length;o<i;o+=1)NV(t[r[o]],n,e)}function EHe(t,n){n=n||{};var e=new vHe(n);e.noRefs||DHe(t,e);var r=t;return e.replacer&&(r=e.replacer.call({"":r},"",r)),rh(e,0,r,!0,!0)?e.dump+`
`:""}var IHe=EHe,NHe={dump:IHe};function PV(t,n){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var whe=she.load,vZn=she.loadAll,yhe=NHe.dump;var wZn=PV("safeLoad","load"),yZn=PV("safeLoadAll","loadAll"),xZn=PV("safeDump","dump");var Bo=class t{constructor(n,e,r,o,i,s){this.navigationRouter=n;this.dialog=e;this.config=r;this.state=o;this.focusedNode=Lw(this.navigationRouter.events.pipe(kn(a=>a instanceof os),At(({url:a})=>a.split("/").length>1?a.split("/")[1]:void 0),At(a=>this._network.getNode(a??""))))}_network=new Uw;get nodes(){return this._network.nodes}get router(){return this._network.router}get devices(){return this._network.devices}focusedNode;new(){this._network.reset(),this.focusedNode()&&this.navigationRouter.navigate([""]),this.state.reset(!1),Os.success(this.config.translate.instant("PROJECT_CREATED"))}loadFromFile(){Os.promise(Wn.openFile(".yaml"),{loading:this.config.translate.instant("PROJECT_IMPORTING"),success:n=>{try{this._network.fromObject(whe(n))}catch(e){throw this._network.reset(),this.state.reset(!1),e}return this.focusedNode()&&!this._network.getNode(this.focusedNode().mac??"")&&this.navigationRouter.navigate([""]),this.state.reset(!1),this.state.setState(this._network.toObject(),!1),this.config.translate.instant("PROJECT_IMPORTED")},error:()=>this.config.translate.instant("PROJECT_NOT_IMPORTED")})}saveToFile(){Os.promise(new Promise((n,e)=>{let r=["iot","simulator",...new Date().toISOString().split(/T|\./g,2)].join("_").replace(/-|:/g,"").concat(".yaml"),o=yhe(this._network.toObject(),{noCompatMode:!0,forceQuotes:!0});n([r,o,"application/x-yaml"])}).then(([n,e,r])=>Wn.saveFile(n,e,r)),{loading:this.config.translate.instant("PROJECT_EXPORTING"),success:()=>(this.state.replaceState(this._network.toObject(),!1),this.config.translate.instant("PROJECT_EXPORTED")),error:()=>this.config.translate.instant("PROJECT_NOT_EXPORTED")})}addNode(n,e){return new Promise((r,o)=>{if(this._network.router&&(Array.isArray(n)?Kn.RouterTypes.some(i=>n.includes(i)):Kn.RouterTypes.includes(n)))return Os.error(this.config.translate.instant("ROUTER_EXISTS")),o();this.dialog.open(mN,{context:{type:n}}).closed$.subscribe(i=>i?(this._network.addNode(Kn.RouterTypes.includes(i.type)?new Hw(i.name,e):new nh(i.name,i.type,e)),this.state.setState(this._network.toObject(),!1),Os.success(this.config.translate.instant("NODE_ADDED",{name:i.name})),r(!0)):r(!1))})}deleteNode(n){return new Promise((e,r)=>{let o=this._network.getNode(n);if(!o)return Os.error(this.config.translate.instant("NODE_NOT_FOUND",{name:n})),r();this.dialog.open(gN,{context:{node:o}}).closed$.subscribe(i=>i?(this._network.deleteNode(i.node.mac),this.focusedNode()?.mac===o.mac&&this.navigationRouter.navigate([""]),this.state.setState(this._network.toObject(),!1),Os.success(this.config.translate.instant("NODE_DELETED",{name:i.node.name})),e(!0)):e(!1))})}getNode(n){return this._network.getNode(n)}getConnectedNodes(n){return this._network.getConnectedNodes(n)}static \u0275fac=function(e){return new(e||t)(Qe(Ko),Qe(Ef),Qe(Wn),Qe(Lr),Qe(Yl),Qe(wl))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})};var bN=(()=>{class t{_listeners=[];notify(e,r){for(let o of this._listeners)o(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var zb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenuGroup",""]],hostAttrs:["role","group",1,"cdk-menu-group"],exportAs:["cdkMenuGroup"],features:[ut([{provide:bN,useClass:bN}])]})}return t})(),CN=new Me("cdk-menu"),tc=function(t){return t[t.nextItem=0]="nextItem",t[t.previousItem=1]="previousItem",t[t.currentItem=2]="currentItem",t}(tc||{}),Qu=new Me("cdk-menu-stack"),AHe={provide:Qu,deps:[[new l1,new By,new D4(Qu)]],useFactory:t=>t||new SN},RHe=t=>({provide:Qu,deps:[[new l1,new By,new D4(Qu)]],useFactory:n=>n||SN.inline(t)}),SN=(()=>{class t{id=M(Df).getId("cdk-menu-stack-");_elements=[];_close=new ot;_empty=new ot;_hasFocus=new ot;closed=this._close;hasFocus=this._hasFocus.pipe(ga(!1),ma(0),H2());emptied=this._empty;_inlineMenuOrientation=null;static inline(e){let r=new t;return r._inlineMenuOrientation=e,r}push(e){this._elements.push(e)}close(e,r){let{focusNextOnEmpty:o,focusParentTrigger:i}=le({},r);if(this._elements.indexOf(e)>=0){let s;do s=this._elements.pop(),this._close.next({item:s,focusParentTrigger:i});while(s!==e);this.isEmpty()&&this._empty.next(o)}}closeSubMenuOf(e){let r=!1;if(this._elements.indexOf(e)>=0)for(r=this.peek()!==e;this.peek()!==e;)this._close.next({item:this._elements.pop()});return r}closeAll(e){let{focusNextOnEmpty:r,focusParentTrigger:o}=le({},e);if(!this.isEmpty()){for(;!this.isEmpty();){let i=this._elements.pop();i&&this._close.next({item:i,focusParentTrigger:o})}this._empty.next(r)}}isEmpty(){return!this._elements.length}length(){return this._elements.length}peek(){return this._elements[this._elements.length-1]}hasInlineMenu(){return this._inlineMenuOrientation!=null}inlineMenuOrientation(){return this._inlineMenuOrientation}setHasFocus(e){this._hasFocus.next(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),MN=new Me("cdk-menu-trigger"),OHe=new Me("cdk-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=M(vs);return()=>t.scrollStrategies.reposition()}}),xhe=(()=>{class t{injector=M(Zt);viewContainerRef=M(_r);menuStack=M(Qu);menuScrollStrategy=M(OHe);menuPosition;opened=new Qt;closed=new Qt;menuTemplateRef;menuData;overlayRef=null;destroyed=new ot;stopOutsideClicksListener=rc(this.closed,this.destroyed);childMenu;_menuPortal;_childMenuInjector;ngOnDestroy(){this._destroyOverlay(),this.destroyed.next(),this.destroyed.complete()}isOpen(){return!!this.overlayRef?.hasAttached()}registerChildMenu(e){this.childMenu=e}getMenuContentPortal(){let e=this.menuTemplateRef!==this._menuPortal?.templateRef;return this.menuTemplateRef&&(!this._menuPortal||e)&&(this._menuPortal=new zu(this.menuTemplateRef,this.viewContainerRef,this.menuData,this._getChildMenuInjector())),this._menuPortal}isElementInsideMenuStack(e){for(let r=e;r;r=r?.parentElement??null)if(r.getAttribute("data-cdk-menu-stack-id")===this.menuStack.id)return!0;return!1}_destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}_getChildMenuInjector(){return this._childMenuInjector=this._childMenuInjector||Zt.create({providers:[{provide:MN,useValue:this},{provide:Qu,useValue:this.menuStack}],parent:this.injector}),this._childMenuInjector}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,hostVars:2,hostBindings:function(r,o){r&2&&Bt("aria-controls",o.childMenu==null?null:o.childMenu.id)("data-cdk-menu-stack-id",o.menuStack.id)}})}return t})();var LV=new Me("cdk-menu-aim");function _he(t,n){if(!n.isTrusted)return!1;let e=t.nativeElement,r=n.keyCode;return e.nodeName==="BUTTON"&&!e.disabled?r===13||r===32:e.nodeName==="A"?r===13:!1}var Hb=(()=>{class t extends xhe{_elementRef=M(_t);_overlay=M(vs);_ngZone=M(Rt);_changeDetectorRef=M(kr);_inputModalityDetector=M(db);_directionality=M(gi,{optional:!0});_renderer=M(Zr);_cleanupMouseenter;_parentMenu=M(CN,{optional:!0});_menuAim=M(LV,{optional:!0});constructor(){super(),this._setRole(),this._registerCloseHandler(),this._subscribeToMenuStackClosed(),this._subscribeToMouseEnter(),this._subscribeToMenuStackHasFocus(),this._setType()}toggle(){this.isOpen()?this.close():this.open()}open(){!this.isOpen()&&this.menuTemplateRef!=null&&(this.opened.next(),this.overlayRef=this.overlayRef||this._overlay.create(this._getOverlayConfig()),this.overlayRef.attach(this.getMenuContentPortal()),this._changeDetectorRef.markForCheck(),this._subscribeToOutsideClicks())}close(){this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this._changeDetectorRef.markForCheck()),this._closeSiblingTriggers()}getMenu(){return this.childMenu}ngOnChanges(e){e.menuPosition&&this.overlayRef&&this.overlayRef.updatePositionStrategy(this._getOverlayPositionStrategy())}ngOnDestroy(){this._cleanupMouseenter(),super.ngOnDestroy()}_toggleOnKeydown(e){let r=this._parentMenu?.orientation==="vertical";switch(e.keyCode){case 32:case 13:!$r(e)&&!_he(this._elementRef,e)&&(this.toggle(),this.childMenu?.focusFirstItem("keyboard"));break;case 39:$r(e)||this._parentMenu&&r&&this._directionality?.value!=="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 37:$r(e)||this._parentMenu&&r&&this._directionality?.value==="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 40:case 38:$r(e)||r||(e.preventDefault(),this.open(),e.keyCode===40?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusLastItem("keyboard"));break}}_handleClick(){this.toggle(),this.childMenu?.focusFirstItem("mouse")}_setHasFocus(e){this._parentMenu||this.menuStack.setHasFocus(e)}_subscribeToMouseEnter(){this._cleanupMouseenter=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"mouseenter",()=>{if(this._inputModalityDetector.mostRecentModality!=="touch"&&!this.menuStack.isEmpty()&&!this.isOpen()){let e=()=>this._ngZone.run(()=>{this._closeSiblingTriggers(),this.open()});this._menuAim?this._menuAim.toggle(e):e()}}))}_closeSiblingTriggers(){this._parentMenu?!this.menuStack.closeSubMenuOf(this._parentMenu)&&this.menuStack.peek()!==this._parentMenu&&this.menuStack.closeAll():this.menuStack.closeAll()}_getOverlayConfig(){return new Hu({positionStrategy:this._getOverlayPositionStrategy(),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._elementRef).withLockedPosition().withFlexibleDimensions(!1).withPositions(this._getOverlayPositions())}_getOverlayPositions(){return this.menuPosition??(!this._parentMenu||this._parentMenu.orientation==="horizontal"?V3:z$)}_registerCloseHandler(){this._parentMenu||this.menuStack.closed.pipe(It(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.close()})}_subscribeToOutsideClicks(){this.overlayRef&&this.overlayRef.outsidePointerEvents().pipe(It(this.stopOutsideClicksListener)).subscribe(e=>{let r=ua(e),o=this._elementRef.nativeElement;r!==o&&!o.contains(r)&&(this.isElementInsideMenuStack(r)?this._closeSiblingTriggers():this.menuStack.closeAll())})}_subscribeToMenuStackHasFocus(){this._parentMenu||this.menuStack.hasFocus.pipe(It(this.destroyed)).subscribe(e=>{e||this.menuStack.closeAll()})}_subscribeToMenuStackClosed(){this._parentMenu||this.menuStack.closed.subscribe(({focusParentTrigger:e})=>{e&&!this.menuStack.length()&&this._elementRef.nativeElement.focus()})}_setRole(){this._parentMenu||this._elementRef.nativeElement.setAttribute("role","button")}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenuTriggerFor",""]],hostAttrs:[1,"cdk-menu-trigger"],hostVars:2,hostBindings:function(r,o){r&1&&Le("focusin",function(){return o._setHasFocus(!0)})("focusout",function(){return o._setHasFocus(!1)})("keydown",function(s){return o._toggleOnKeydown(s)})("click",function(){return o._handleClick()}),r&2&&Bt("aria-haspopup",o.menuTemplateRef?"menu":null)("aria-expanded",o.menuTemplateRef==null?null:o.isOpen())},inputs:{menuTemplateRef:[0,"cdkMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkMenuPosition","menuPosition"],menuData:[0,"cdkMenuTriggerData","menuData"]},outputs:{opened:"cdkMenuOpened",closed:"cdkMenuClosed"},exportAs:["cdkMenuTriggerFor"],features:[ut([{provide:MN,useExisting:t},AHe]),Mn,Dr]})}return t})(),Vf=(()=>{class t{_dir=M(gi,{optional:!0});_elementRef=M(_t);_ngZone=M(Rt);_inputModalityDetector=M(db);_renderer=M(Zr);_cleanupMouseEnter;_menuAim=M(LV,{optional:!0});_menuStack=M(Qu);_parentMenu=M(CN,{optional:!0});_menuTrigger=M(Hb,{optional:!0,self:!0});disabled=!1;typeaheadLabel;triggered=new Qt;get hasMenu(){return this._menuTrigger?.menuTemplateRef!=null}_tabindex=-1;closeOnSpacebarTrigger=!0;destroyed=new ot;constructor(){this._setupMouseEnter(),this._setType(),this._isStandaloneItem()&&(this._tabindex=0)}ngOnDestroy(){this._cleanupMouseEnter?.(),this.destroyed.next(),this.destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}trigger(e){let{keepOpen:r}=le({},e);!this.disabled&&!this.hasMenu&&(this.triggered.next(),r||this._menuStack.closeAll({focusParentTrigger:!0}))}isMenuOpen(){return!!this._menuTrigger?.isOpen()}getMenu(){return this._menuTrigger?.getMenu()}getMenuTrigger(){return this._menuTrigger}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}_resetTabIndex(){this._isStandaloneItem()||(this._tabindex=-1)}_setTabIndex(e){this.disabled||(!e||!this._menuStack.isEmpty())&&(this._tabindex=0)}_onKeydown(e){switch(e.keyCode){case 32:case 13:if(!$r(e)&&!_he(this._elementRef,e)){let r=this._elementRef.nativeElement.nodeName;r!=="A"&&r!=="BUTTON"&&e.preventDefault(),this.trigger({keepOpen:e.keyCode===32&&!this.closeOnSpacebarTrigger})}break;case 39:$r(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._forwardArrowPressed(e):this._backArrowPressed(e));break;case 37:$r(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._backArrowPressed(e):this._forwardArrowPressed(e));break}}_isStandaloneItem(){return!this._parentMenu}_backArrowPressed(e){let r=this._parentMenu;(this._menuStack.hasInlineMenu()||this._menuStack.length()>1)&&(e.preventDefault(),this._menuStack.close(r,{focusNextOnEmpty:this._menuStack.inlineMenuOrientation()==="horizontal"?tc.previousItem:tc.currentItem,focusParentTrigger:!0}))}_forwardArrowPressed(e){!this.hasMenu&&this._menuStack.inlineMenuOrientation()==="horizontal"&&(e.preventDefault(),this._menuStack.closeAll({focusNextOnEmpty:tc.nextItem,focusParentTrigger:!0}))}_setupMouseEnter(){if(!this._isStandaloneItem()){let e=()=>this._ngZone.run(()=>this._menuStack.closeSubMenuOf(this._parentMenu));this._cleanupMouseEnter=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"mouseenter",()=>{this._inputModalityDetector.mostRecentModality!=="touch"&&!this._menuStack.isEmpty()&&!this.hasMenu&&(this._menuAim?this._menuAim.toggle(e):e())}))}}_isParentVertical(){return this._parentMenu?.orientation==="vertical"}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenuItem",""]],hostAttrs:["role","menuitem",1,"cdk-menu-item"],hostVars:2,hostBindings:function(r,o){r&1&&Le("blur",function(){return o._resetTabIndex()})("focus",function(){return o._setTabIndex()})("click",function(){return o.trigger()})("keydown",function(s){return o._onKeydown(s)}),r&2&&(Xr("tabindex",o._tabindex),Bt("aria-disabled",o.disabled||null))},inputs:{disabled:[2,"cdkMenuItemDisabled","disabled",nt],typeaheadLabel:[0,"cdkMenuitemTypeaheadLabel","typeaheadLabel"]},outputs:{triggered:"cdkMenuItemTriggered"},exportAs:["cdkMenuItem"]})}return t})(),BV=class{_renderer;_items;_eventCleanups;_itemsSubscription;entered=new ot;exited=new ot;activeElement;previousElement;constructor(n,e){this._renderer=n,this._items=e,this._bindEvents(),this.entered.subscribe(r=>this.activeElement=r),this.exited.subscribe(()=>{this.previousElement=this.activeElement,this.activeElement=void 0})}destroy(){this._cleanupEvents(),this._itemsSubscription?.unsubscribe()}_bindEvents(){this._itemsSubscription=this._items.changes.pipe(ga(this._items)).subscribe(()=>{this._cleanupEvents(),this._eventCleanups=[],this._items.forEach(n=>{let e=n._elementRef.nativeElement;this._eventCleanups.push(this._renderer.listen(e,"mouseenter",()=>{this.entered.next(n)}),this._renderer.listen(e,"mouseout",()=>{this.exited.next(n)}))})})}_cleanupEvents(){this._eventCleanups?.forEach(n=>n()),this._eventCleanups=void 0}},khe=(()=>{class t extends zb{_focusMonitor=M(th);ngZone=M(Rt);_renderer=M(Zr);nativeElement=M(_t).nativeElement;menuStack=M(Qu);menuAim=M(LV,{optional:!0,self:!0});dir=M(gi,{optional:!0});id=M(Df).getId("cdk-menu-");items;orientation="vertical";isInline=!1;keyManager;destroyed=new ot;triggerItem;pointerTracker;_menuStackHasFocus=Ze(!1);_tabIndexSignal=ae(()=>{let e=this._menuStackHasFocus()?-1:0;return this.isInline?e:null});ngAfterContentInit(){this.isInline||this.menuStack.push(this),this._setKeyManager(),this._handleFocus(),this._subscribeToMenuStackHasFocus(),this._subscribeToMenuOpen(),this._subscribeToMenuStackClosed(),this._setUpPointerTracker()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.nativeElement),this.keyManager?.destroy(),this.destroyed.next(),this.destroyed.complete(),this.pointerTracker?.destroy()}focusFirstItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setFirstItemActive()}focusLastItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setLastItemActive()}_getTabIndex(){return this._tabIndexSignal()}closeOpenMenu(e,r){let{focusParentTrigger:o}=le({},r),i=this.keyManager,s=this.triggerItem;e===s?.getMenuTrigger()?.getMenu()&&(s?.getMenuTrigger()?.close(),o&&(s?i.setActiveItem(s):i.setFirstItemActive()))}_setKeyManager(){this.keyManager=new Af(this.items).withWrap().withTypeAhead().withHomeAndEnd(),this.orientation==="horizontal"?this.keyManager.withHorizontalOrientation(this.dir?.value||"ltr"):this.keyManager.withVerticalOrientation()}_subscribeToMenuOpen(){let e=rc(this.items.changes,this.destroyed);this.items.changes.pipe(ga(this.items),cr(r=>r.filter(o=>o.hasMenu).map(o=>o.getMenuTrigger().opened.pipe(_y(o),It(e)))),ha(),jr(r=>(this.triggerItem=r,r.getMenuTrigger().closed)),It(this.destroyed)).subscribe(()=>this.triggerItem=void 0)}_subscribeToMenuStackClosed(){this.menuStack.closed.pipe(It(this.destroyed)).subscribe(({item:e,focusParentTrigger:r})=>this.closeOpenMenu(e,{focusParentTrigger:r}))}_subscribeToMenuStackHasFocus(){this.isInline&&this.menuStack.hasFocus.pipe(It(this.destroyed)).subscribe(e=>{this._menuStackHasFocus.set(e)})}_setUpPointerTracker(){this.menuAim&&(this.ngZone.runOutsideAngular(()=>{this.pointerTracker=new BV(this._renderer,this.items)}),this.menuAim.initialize(this,this.pointerTracker))}_handleFocus(){this._focusMonitor.monitor(this.nativeElement,!1).pipe(It(this.destroyed)).subscribe(e=>{e!==null&&e!=="mouse"&&this.focusFirstItem(e)})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275dir=me({type:t,contentQueries:function(r,o,i){if(r&1&&Co(i,Vf,5),r&2){let s;Er(s=Ir())&&(o.items=s)}},hostAttrs:["role","menu"],hostVars:4,hostBindings:function(r,o){r&1&&Le("focusin",function(){return o.menuStack.setHasFocus(!0)})("focusout",function(){return o.menuStack.setHasFocus(!1)}),r&2&&(Xr("tabindex",o._getTabIndex())("id",o.id),Bt("aria-orientation",o.orientation)("data-cdk-menu-stack-id",o.menuStack.id))},inputs:{id:"id"},features:[Mn]})}return t})(),TN=(()=>{class t extends khe{_parentTrigger=M(MN,{optional:!0});closed=new Qt;orientation="vertical";isInline=!this._parentTrigger;constructor(){super(),this.destroyed.subscribe(this.closed),this._parentTrigger?.registerChildMenu(this)}ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}ngOnDestroy(){super.ngOnDestroy(),this.closed.complete()}_handleKeyEvent(e){let r=this.keyManager;switch(e.keyCode){case 37:case 39:$r(e)||(e.preventDefault(),r.setFocusOrigin("keyboard"),r.onKeydown(e));break;case 27:$r(e)||(e.preventDefault(),this.menuStack.close(this,{focusNextOnEmpty:tc.currentItem,focusParentTrigger:!0}));break;case 9:$r(e,"altKey","metaKey","ctrlKey")||this.menuStack.closeAll({focusParentTrigger:!0});break;default:r.onKeydown(e)}}_toggleMenuFocus(e){let r=this.keyManager;switch(e){case tc.nextItem:r.setFocusOrigin("keyboard"),r.setNextItemActive();break;case tc.previousItem:r.setFocusOrigin("keyboard"),r.setPreviousItemActive();break;case tc.currentItem:r.activeItem&&(r.setFocusOrigin("keyboard"),r.setActiveItem(r.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack.emptied.pipe(It(this.destroyed)).subscribe(e=>this._toggleMenuFocus(e))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenu",""]],hostAttrs:["role","menu",1,"cdk-menu"],hostVars:2,hostBindings:function(r,o){r&1&&Le("keydown",function(s){return o._handleKeyEvent(s)}),r&2&&dr("cdk-menu-inline",o.isInline)},outputs:{closed:"closed"},exportAs:["cdkMenu"],features:[ut([{provide:zb,useExisting:t},{provide:CN,useExisting:t},RHe("vertical")]),Mn]})}return t})(),bhe=(()=>{class t extends khe{orientation="horizontal";isInline=!0;ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}_handleKeyEvent(e){let r=this.keyManager;switch(e.keyCode){case 38:case 40:case 37:case 39:if(!$r(e)&&(e.keyCode===37||e.keyCode===39)){e.preventDefault();let i=r.activeItem?.isMenuOpen();r.activeItem?.getMenuTrigger()?.close(),r.setFocusOrigin("keyboard"),r.onKeydown(e),i&&r.activeItem?.getMenuTrigger()?.open()}break;case 27:$r(e)||(e.preventDefault(),r.activeItem?.getMenuTrigger()?.close());break;case 9:$r(e,"altKey","metaKey","ctrlKey")||r.activeItem?.getMenuTrigger()?.close();break;default:r.onKeydown(e)}}_toggleOpenMenu(e){let r=this.keyManager;switch(e){case tc.nextItem:r.setFocusOrigin("keyboard"),r.setNextItemActive(),r.activeItem?.getMenuTrigger()?.open();break;case tc.previousItem:r.setFocusOrigin("keyboard"),r.setPreviousItemActive(),r.activeItem?.getMenuTrigger()?.open();break;case tc.currentItem:r.activeItem&&(r.setFocusOrigin("keyboard"),r.setActiveItem(r.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack?.emptied.pipe(It(this.destroyed)).subscribe(e=>this._toggleOpenMenu(e))}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275dir=me({type:t,selectors:[["","cdkMenuBar",""]],hostAttrs:["role","menubar",1,"cdk-menu-bar"],hostBindings:function(r,o){r&1&&Le("keydown",function(s){return o._handleKeyEvent(s)})},exportAs:["cdkMenuBar"],features:[ut([{provide:zb,useExisting:t},{provide:CN,useExisting:t},{provide:Qu,useFactory:()=>SN.inline("horizontal")}]),Mn]})}return t})(),Zw=(()=>{class t extends Vf{checked=!1;closeOnSpacebarTrigger=!1;static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275dir=me({type:t,hostVars:2,hostBindings:function(r,o){r&2&&Bt("aria-checked",!!o.checked)("aria-disabled",o.disabled||null)},inputs:{checked:[2,"cdkMenuItemChecked","checked",nt]},features:[Mn]})}return t})(),DN=(()=>{class t extends Zw{_selectionDispatcher=M(bN);_id=M(Df).getId("cdk-menu-item-radio-");_removeDispatcherListener;constructor(){super(),this._registerDispatcherListener()}ngOnDestroy(){super.ngOnDestroy(),this._removeDispatcherListener()}trigger(e){super.trigger(e),this.disabled||this._selectionDispatcher.notify(this._id,"")}_registerDispatcherListener(){this._removeDispatcherListener=this._selectionDispatcher.listen(e=>{this.checked=this._id===e})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkMenuItemRadio",""]],hostAttrs:["role","menuitemradio"],hostVars:2,hostBindings:function(r,o){r&2&&dr("cdk-menu-item-radio",!0)},exportAs:["cdkMenuItemRadio"],features:[ut([{provide:Zw,useExisting:t},{provide:Vf,useExisting:Zw}]),Mn]})}return t})(),EN=(()=>{class t extends Zw{trigger(e){super.trigger(e),this.disabled||(this.checked=!this.checked)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Kr(t)))(o||t)}})();static \u0275dir=me({type:t,selectors:[["","cdkMenuItemCheckbox",""]],hostAttrs:["role","menuitemcheckbox"],hostVars:2,hostBindings:function(r,o){r&2&&dr("cdk-menu-item-checkbox",!0)},exportAs:["cdkMenuItemCheckbox"],features:[ut([{provide:Zw,useExisting:t},{provide:Vf,useExisting:Zw}]),Mn]})}return t})(),FHe=V3.map(t=>{let n=t.overlayX==="start"?2:-2,e=t.overlayY==="top"?2:-2;return ht(le({},t),{offsetX:n,offsetY:e})}),PHe=(()=>{class t{static _openContextMenuTrigger;update(e){t._openContextMenuTrigger!==e&&(t._openContextMenuTrigger?.close(),t._openContextMenuTrigger=e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IN=(()=>{class t extends xhe{_overlay=M(vs);_directionality=M(gi,{optional:!0});_contextMenuTracker=M(PHe);_changeDetectorRef=M(kr);disabled=!1;constructor(){super(),this._setMenuStackCloseListener()}open(e){this._open(null,e),this._changeDetectorRef.markForCheck()}close(){this.menuStack.closeAll()}_openOnContextMenu(e){this.disabled||(e.preventDefault(),e.stopPropagation(),this._contextMenuTracker.update(this),this._open(e,{x:e.clientX,y:e.clientY}),e.button===2?this.childMenu?.focusFirstItem("mouse"):e.button===0?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusFirstItem("program"))}_getOverlayConfig(e){return new Hu({positionStrategy:this._getOverlayPositionStrategy(e),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(e){return this._overlay.position().flexibleConnectedTo(e).withLockedPosition().withGrowAfterOpen().withPositions(this.menuPosition??FHe)}_setMenuStackCloseListener(){this.menuStack.closed.pipe(It(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this.childMenu=void 0,this._changeDetectorRef.markForCheck())})}_subscribeToOutsideClicks(e){if(this.overlayRef){let r=this.overlayRef.outsidePointerEvents();if(e){let[o,i]=kA(r,({type:s})=>s==="auxclick");r=rc(i.pipe(DA((s,a)=>e.ctrlKey&&a===0&&s.ctrlKey)),o.pipe(im(1)))}r.pipe(It(this.stopOutsideClicksListener)).subscribe(o=>{this.isElementInsideMenuStack(ua(o))||this.menuStack.closeAll()})}}_open(e,r){this.disabled||(this.isOpen()?(this.menuStack.closeSubMenuOf(this.childMenu),this.overlayRef.getConfig().positionStrategy.setOrigin(r),this.overlayRef.updatePosition()):(this.opened.next(),this.overlayRef?(this.overlayRef.getConfig().positionStrategy.setOrigin(r),this.overlayRef.updatePosition()):this.overlayRef=this._overlay.create(this._getOverlayConfig(r)),this.overlayRef.attach(this.getMenuContentPortal()),this._subscribeToOutsideClicks(e)))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkContextMenuTriggerFor",""]],hostVars:1,hostBindings:function(r,o){r&1&&Le("contextmenu",function(s){return o._openOnContextMenu(s)}),r&2&&Bt("data-cdk-menu-stack-id",null)},inputs:{menuTemplateRef:[0,"cdkContextMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkContextMenuPosition","menuPosition"],menuData:[0,"cdkContextMenuTriggerData","menuData"],disabled:[2,"cdkContextMenuDisabled","disabled",nt]},outputs:{opened:"cdkContextMenuOpened",closed:"cdkContextMenuClosed"},exportAs:["cdkContextMenuTriggerFor"],features:[ut([{provide:MN,useExisting:t},{provide:Qu,useClass:SN}]),Mn]})}return t})();var Che=t=>[{originX:t,originY:"bottom",overlayX:t,overlayY:"top"},{originX:t,originY:"top",overlayX:t,overlayY:"bottom"}],$V=(()=>{class t{_cdkTrigger=M(IN,{host:!0});brnCtxMenuTriggerFor=Z(null);brnCtxMenuTriggerData=Z(void 0);align=Z(void 0);constructor(){this._cdkTrigger.opened.pipe(Xa()).subscribe(()=>setTimeout(()=>this._cdkTrigger._spartanLastPosition=this._cdkTrigger.overlayRef._positionStrategy._lastPosition)),Tt(()=>this._cdkTrigger.menuTemplateRef=this.brnCtxMenuTriggerFor()),Tt(()=>this._cdkTrigger.menuData=this.brnCtxMenuTriggerData()),Tt(()=>{let e=this.align();e&&(this._cdkTrigger.menuPosition=Che(e))})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnCtxMenuTriggerFor",""]],inputs:{brnCtxMenuTriggerFor:[1,"brnCtxMenuTriggerFor"],brnCtxMenuTriggerData:[1,"brnCtxMenuTriggerData"],align:[1,"align"]},features:[Pt([IN])]})}return t})(),VV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuBar",""]],features:[Pt([bhe])]})}return t})(),jV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuGroup",""]],features:[Pt([zb])]})}return t})(),zV=(()=>{class t{_cdkMenuItem=M(EN);checked=Z(this._cdkMenuItem.checked,{transform:nt});disabled=Z(this._cdkMenuItem.disabled,{transform:nt});triggered=oN(this._cdkMenuItem.triggered);constructor(){Tt(()=>this._cdkMenuItem.disabled=this.disabled()),Tt(()=>this._cdkMenuItem.checked=this.checked())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuItemCheckbox",""]],hostVars:3,hostBindings:function(r,o){r&2&&(Xr("disabled",o.disabled()),dr("checked",o.checked()))},inputs:{checked:[1,"checked"],disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[Pt([EN])]})}return t})(),HV=(()=>{class t{_cdkMenuItem=M(DN);checked=Z(this._cdkMenuItem.checked,{transform:nt});disabled=Z(this._cdkMenuItem.disabled,{transform:nt});triggered=oN(this._cdkMenuItem.triggered);constructor(){Tt(()=>this._cdkMenuItem.disabled=this.disabled()),Tt(()=>this._cdkMenuItem.checked=this.checked())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuItemRadio",""]],hostVars:3,hostBindings:function(r,o){r&2&&(Xr("disabled",o.disabled()),dr("checked",o.checked()))},inputs:{checked:[1,"checked"],disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[Pt([DN])]})}return t})(),Ub=(()=>{class t{_cdkMenuItem=M(Vf);disabled=Z(this._cdkMenuItem.disabled,{transform:nt});triggered=oN(this._cdkMenuItem.triggered);constructor(){Tt(()=>this._cdkMenuItem.disabled=this.disabled())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuItem",""]],hostVars:1,hostBindings:function(r,o){r&2&&Xr("disabled",o.disabled())},inputs:{disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[Pt([Vf])]})}return t})(),UV=(()=>{class t{_cdkTrigger=M(Hb,{host:!0});align=Z(void 0);constructor(){this._cdkTrigger.opened.pipe(Xa()).subscribe(()=>setTimeout(()=>this._cdkTrigger._spartanLastPosition=this._cdkTrigger.overlayRef._positionStrategy._lastPosition)),Tt(()=>{let e=this.align();e&&(this._cdkTrigger.menuPosition=Che(e))})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenuTriggerFor",""]],inputs:{align:[1,"align"]},features:[Pt([{directive:Hb,inputs:["cdkMenuTriggerFor","brnMenuTriggerFor","cdkMenuTriggerData","brnMenuTriggerData"],outputs:["cdkMenuOpened","brnMenuOpened","cdkMenuClosed","brnMenuClosed"]}])]})}return t})(),Gb=(()=>{class t{_host=M(TN);_state=Ze("open");_side=Ze("top");constructor(){this.setSideWithDarkMagic(),this._host.closed.pipe(Xa()).subscribe(()=>this._state.set("closed"))}setSideWithDarkMagic(){let e=this._host.menuStack.peek()===void 0;setTimeout(()=>{let r=this._host._parentTrigger._spartanLastPosition;if(!r){this._side.set(e?"top":"left");return}let o=e?r.originY:r.originX==="end"?"right":"left";this._side.set(o)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnMenu",""],["","brnSubMenu",""]],hostVars:2,hostBindings:function(r,o){r&2&&Bt("data-state",o._state())("data-side",o._side())},features:[Pt([TN])]})}return t})(),LHe=[jV,Ub,HV,zV],She=[UV,Gb,...LHe],pXn=[...She,VV],hXn=[...She,$V];var Xw=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground aria-expanded:bg-accent aria-expanded:text-accent-foreground",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuBarItem",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([Ub])]})};var $He=["*"],Yw=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("border-border flex h-10 items-center space-x-1 rounded-md border bg-background p-1",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu-bar"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([VV])],ngContentSelectors:$He,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var VHe=["*"],zf=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu-group"]],hostAttrs:[1,"block"],features:[Pt([jV])],ngContentSelectors:VHe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var Qw=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("group-[.checked]:opacity-100 opacity-0 absolute left-2 flex h-3.5 w-3.5 items-center justify-center",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu-item-check"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ut([sr({lucideCheck:k3})])],decls:1,vars:0,consts:[["hlm","","size","1rem","name","lucideCheck"]],template:function(e,r){e&1&&Ve(0,"ng-icon",0)},dependencies:[ar,po],encapsulation:2})};var Jw=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("group w-full relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground disabled:pointer-events-none disabled:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuItemCheckbox",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([{directive:zV,inputs:["disabled","disabled","checked","checked"],outputs:["triggered","triggered"]}])]})};var ey=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("mr-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuIcon",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ut([Vde({size:"sm"})])]})};var NN=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("group-[.checked]:opacity-100 opacity-0 absolute left-2 flex h-3.5 w-3.5 items-center justify-center",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu-item-radio"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ut([sr({lucideCircle:jue})])],decls:1,vars:0,consts:[["hlm","","size","0.5rem","name","lucideCircle",1,"*:*:fill-current"]],template:function(e,r){e&1&&Ve(0,"ng-icon",0)},dependencies:[ar,po],encapsulation:2})};var AN=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("group w-full relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground disabled:pointer-events-none disabled:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuItemRadio",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([{directive:HV,inputs:["disabled","disabled","checked","checked"],outputs:["triggered","triggered"]}])]})};var ty=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("inline-block ml-auto h-4 w-4",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu-item-sub-indicator"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[ut([sr({lucideChevronRight:C3})])],decls:1,vars:0,consts:[["hlm","","size","1rem","name","lucideChevronRight",1,"h-full","w-full"]],template:function(e,r){e&1&&Ve(0,"ng-icon",0)},dependencies:[ar,po],encapsulation:2})};var jHe=lr("group w-full relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground disabled:pointer-events-none disabled:opacity-50",{variants:{inset:{true:"pl-8",false:""}},defaultVariants:{inset:!1}}),Hf=class t{_inset=Ze(!1);userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(jHe({inset:this._inset()}),this.userClass()));set inset(n){this._inset.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmMenuItem",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"],inset:[2,"inset","inset",nt]},features:[Pt([{directive:Ub,inputs:["disabled","disabled"],outputs:["triggered","triggered"]}])]})};var zHe=["*"],RN=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("block px-2 py-1.5 text-sm font-semibold",this._inset()&&"pl-8",this.userClass()));_inset=Ze(!1);set inset(n){this._inset.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu-label"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"],inset:[2,"inset","inset",nt]},ngContentSelectors:zHe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var el=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("block -mx-1 my-1 h-px bg-muted",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu-separator"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},decls:0,vars:0,template:function(e,r){},encapsulation:2})};var HHe=["*"],Uf=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("ml-auto font-light text-xs tracking-widest opacity-60",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu-shortcut"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:HHe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var UHe=["*"],GHe=lr("block border-border min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",{variants:{variant:{default:"my-0.5",menubar:"my-2"}},defaultVariants:{variant:"default"}}),Gf=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(GHe({variant:this._variant()}),this.userClass()));_variant=Ze("default");set variant(n){this._variant.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-menu"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"],variant:"variant"},features:[Pt([Gb])],ngContentSelectors:UHe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var WHe=["*"],ny=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("border-border min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-sub-menu"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Pt([Gb])],ngContentSelectors:WHe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var qHe=[Hf,ey,zf,ty,NN,Qw,Uf,Jw,AN],KHe=[RN,el],ZHe=[...qHe,...KHe,Gf,ny],qYn=[...ZHe,Yw,Xw];var The="iot_simulator";var Dhe="1.0.2";function XHe(t,n){if(t&1&&(X(0,"button",12),ue(1),Te(2,"translate"),Ve(3,"hlm-menu-item-sub-indicator"),re()),t&2){xe(2);let e=pr(19);Pe("brnMenuTriggerFor",e),Y(),Ye(" ",De(2,2,"EXTERNAL_LIBRARY")," ")}}function YHe(t,n){if(t&1){let e=gn();X(0,"button",11),Le("click",function(){ze(e);let o=xe(2);return He(o.handleOnLoadExternalLibrary())}),ue(1),Te(2,"translate"),re()}t&2&&(Y(),Ye(" ",De(2,1,"IMPORT_EXTERNAL_LIBRARY")," "))}function QHe(t,n){if(t&1&&(X(0,"button",12),ue(1),Te(2,"translate"),Ve(3,"hlm-menu-item-sub-indicator"),re()),t&2){xe(2);let e=pr(21);Pe("brnMenuTriggerFor",e),Y(),Ye(" ",De(2,2,"MODELS")," ")}}function JHe(t,n){if(t&1){let e=gn();X(0,"button",11),Le("click",function(){ze(e);let o=xe(2);return He(o.handleOnLoadModels())}),ue(1),Te(2,"translate"),re()}t&2&&(Y(),Ye(" ",De(2,1,"IMPORT_MODELS")," "))}function eUe(t,n){if(t&1){let e=gn();X(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnNewFile())}),ue(3),Te(4,"translate"),X(5,"hlm-menu-shortcut"),ue(6,"\u2318N"),re()(),X(7,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnOpenFile())}),ue(8),Te(9,"translate"),X(10,"hlm-menu-shortcut"),ue(11,"\u2318O"),re()()(),Ve(12,"hlm-menu-separator"),X(13,"hlm-menu-group"),st(14,XHe,4,4,"button",12)(15,YHe,3,3,"button",13)(16,QHe,4,4,"button",12)(17,JHe,3,3,"button",13),re(),Ve(18,"hlm-menu-separator"),X(19,"hlm-menu-group")(20,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnSaveFile())}),ue(21),Te(22,"translate"),X(23,"hlm-menu-shortcut"),ue(24,"\u2318S"),re()()()()}if(t&2){let e=xe();Y(3),Ye(" ",De(4,5,"NEW_FILE")," "),Y(5),Ye(" ",De(9,7,"OPEN")," "),Y(6),kt(e.externalLibrary()?14:15),Y(2),kt(e.models()?16:17),Y(5),Ye(" ",De(22,9,"SAVE")," ")}}function tUe(t,n){if(t&1){let e=gn();X(0,"hlm-sub-menu")(1,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnLoadExternalLibrary())}),ue(2),Te(3,"translate"),re(),X(4,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnDeleteExternalLibrary())}),ue(5),Te(6,"translate"),re()()}t&2&&(Y(2),Ye(" ",De(3,2,"IMPORT_EXTERNAL_LIBRARY")," "),Y(3),Ye(" ",De(6,4,"DELETE_EXTERNAL_LIBRARY")," "))}function nUe(t,n){if(t&1){let e=gn();X(0,"hlm-sub-menu")(1,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnLoadModels())}),ue(2),Te(3,"translate"),re(),X(4,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnDeleteModels())}),ue(5),Te(6,"translate"),re()()}t&2&&(Y(2),Ye(" ",De(3,2,"IMPORT_MODELS")," "),Y(3),Ye(" ",De(6,4,"DELETE_MODELS")," "))}function rUe(t,n){if(t&1){let e=gn();X(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",14),Le("click",function(){ze(e);let o=xe();return He(o.handleOnUndo())}),ue(3),Te(4,"translate"),X(5,"hlm-menu-shortcut"),ue(6,"\u2318Z"),re()(),X(7,"button",14),Le("click",function(){ze(e);let o=xe();return He(o.handleOnRedo())}),ue(8),Te(9,"translate"),X(10,"hlm-menu-shortcut"),ue(11,"\u21E7\u2318Z"),re()()()()}if(t&2){let e=xe();Y(2),Pe("disabled",!e.canUndo),Y(),Ye(" ",De(4,4,"UNDO")," "),Y(4),Pe("disabled",!e.canRedo),Y(),Ye(" ",De(9,6,"REDO")," ")}}function oUe(t,n){if(t&1){let e=gn();X(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",14),Le("click",function(){ze(e);let o=xe();return He(o.handleOnInsertRouter())}),ue(3),Te(4,"translate"),X(5,"hlm-menu-shortcut"),ue(6,"\u2318\u21E7R"),re()(),X(7,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnInsertDevice())}),ue(8),Te(9,"translate"),X(10,"hlm-menu-shortcut"),ue(11,"\u2318\u21E7D"),re()()()()}if(t&2){let e=xe();Y(2),Pe("disabled",!e.canInsertRouter),Y(),Ye(" ",De(4,3,"ROUTER")," "),Y(5),Ye(" ",De(9,5,"DEVICE")," ")}}function iUe(t,n){if(t&1){let e=gn();X(0,"hlm-menu",10)(1,"button",15),ue(2),Te(3,"translate"),Ve(4,"hlm-menu-item-sub-indicator"),re(),Ve(5,"hlm-menu-separator"),X(6,"hlm-menu-group")(7,"button",16),Le("click",function(){ze(e);let o=xe();return He(o.handleOnHighContrast())}),Ve(8,"hlm-menu-item-check"),ue(9),Te(10,"translate"),re(),X(11,"button",16),Le("click",function(){ze(e);let o=xe();return He(o.handleOnGrid())}),Ve(12,"hlm-menu-item-check"),ue(13),Te(14,"translate"),re()(),Ve(15,"hlm-menu-separator"),X(16,"button",17),Le("click",function(){ze(e);let o=xe();return He(o.handleOnCenter())}),ue(17),Te(18,"translate"),X(19,"hlm-menu-shortcut"),ue(20,"\u23250"),re()(),Ve(21,"hlm-menu-separator"),X(22,"hlm-menu-group")(23,"button",17),Le("click",function(){ze(e);let o=xe();return He(o.handleOnZoomReset())}),ue(24),Te(25,"translate"),X(26,"hlm-menu-shortcut"),ue(27,"\u23180"),re()(),X(28,"button",17),Le("click",function(){ze(e);let o=xe();return He(o.handleOnZoomIn())}),ue(29),Te(30,"translate"),X(31,"hlm-menu-shortcut"),ue(32,"\u2318+"),re()(),X(33,"button",17),Le("click",function(){ze(e);let o=xe();return He(o.handleOnZoomOut())}),ue(34),Te(35,"translate"),X(36,"hlm-menu-shortcut"),ue(37,"\u2318-"),re()()()()}if(t&2){let e=xe(),r=pr(29);Y(),Pe("brnMenuTriggerFor",r),Y(),Ye(" ",De(3,10,"LANGUAGE")," "),Y(5),Pe("checked",e.highContrast()),Y(2),Ye(" ",De(10,12,"HIGH_CONTRAST")," "),Y(2),Pe("checked",e.showGrid()),Y(2),Ye(" ",De(14,14,"SHOW_GRID")," "),Y(4),Ye(" ",De(18,16,"CENTER")," "),Y(7),Ye(" ",De(25,18,"ORIGINAL_ZOOM")," "),Y(5),Ye(" ",De(30,20,"ZOOM_IN")," "),Y(5),Ye(" ",De(35,22,"ZOOM_OUT")," ")}}function sUe(t,n){if(t&1){let e=gn();X(0,"hlm-sub-menu")(1,"button",16),Le("click",function(){ze(e);let o=xe();return He(o.handleOnLanguage("de"))}),Ve(2,"hlm-menu-item-check"),ue(3," Deutsch "),re(),X(4,"button",16),Le("click",function(){ze(e);let o=xe();return He(o.handleOnLanguage("en"))}),Ve(5,"hlm-menu-item-check"),ue(6," English "),re(),X(7,"button",16),Le("click",function(){ze(e);let o=xe();return He(o.handleOnLanguage("es"))}),Ve(8,"hlm-menu-item-check"),ue(9," Espa\xF1ol "),re(),X(10,"button",16),Le("click",function(){ze(e);let o=xe();return He(o.handleOnLanguage("fr"))}),Ve(11,"hlm-menu-item-check"),ue(12," Fran\xE7ais "),re(),X(13,"button",16),Le("click",function(){ze(e);let o=xe();return He(o.handleOnLanguage("it"))}),Ve(14,"hlm-menu-item-check"),ue(15," Italiano "),re(),X(16,"button",16),Le("click",function(){ze(e);let o=xe();return He(o.handleOnLanguage("pt"))}),Ve(17,"hlm-menu-item-check"),ue(18," Portugu\xEAs "),re()()}if(t&2){let e=xe();Y(),Pe("checked",e.language()==="de"),Y(3),Pe("checked",e.language()==="en"),Y(3),Pe("checked",e.language()==="es"),Y(3),Pe("checked",e.language()==="fr"),Y(3),Pe("checked",e.language()==="it"),Y(3),Pe("checked",e.language()==="pt")}}function aUe(t,n){if(t&1){let e=gn();X(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",11),Le("click",function(){ze(e);let o=xe();return He(o.handleOnSourceCode())}),ue(3),Te(4,"translate"),re(),X(5,"button",18),ue(6),re()()()}if(t&2){let e=xe();Y(3),Ye(" ",De(4,2,"SOURCE_CODE")," "),Y(3),Ye(" ",e.versionName," ")}}var ON=class t{config=M(Wn);state=M(Lr);network=M(Bo);onNewFile=Vn();onOpenFile=Vn();externalLibrary=Z.required();onLoadExternalLibrary=Vn();onDeleteExternalLibrary=Vn();models=Z.required();onLoadModels=Vn();onDeleteModels=Vn();onSaveFile=Vn();onUndo=Vn();get canUndo(){return this.state.canUndo}onRedo=Vn();get canRedo(){return this.state.canRedo}onInsertRouter=Vn();onInsertDevice=Vn();get canInsertRouter(){return!this.network.router}language=Z.required();onChangeLanguage=Vn();highContrast=Z.required();onHighContrast=Vn();showGrid=Z.required();onShowGrid=Vn();onCenter=Vn();onZoomReset=Vn();onZoomIn=Vn();get canZoomIn(){return this.config.zoom()<2}onZoomOut=Vn();get canZoomOut(){return this.config.zoom()>.5}versionName=`${The} v${Dhe}`;handleOnNewFile(){this.onNewFile.emit()}handleOnOpenFile(){this.onOpenFile.emit()}handleOnLoadExternalLibrary(){this.onLoadExternalLibrary.emit()}handleOnDeleteExternalLibrary(){this.onDeleteExternalLibrary.emit()}handleOnLoadModels(){this.onLoadModels.emit()}handleOnDeleteModels(){this.onDeleteModels.emit()}handleOnSaveFile(){this.onSaveFile.emit()}handleOnUndo(){this.onUndo.emit()}handleOnRedo(){this.onRedo.emit()}handleOnInsertRouter(){this.onInsertRouter.emit()}handleOnInsertDevice(){this.onInsertDevice.emit()}handleOnLanguage(n){this.onChangeLanguage.emit(n)}handleOnHighContrast(){this.onHighContrast.emit()}handleOnGrid(){this.onShowGrid.emit()}handleOnCenter(){this.onCenter.emit()}handleOnZoomReset(){this.onZoomReset.emit()}handleOnZoomIn(){this.onZoomIn.emit()}handleOnZoomOut(){this.onZoomOut.emit()}handleOnSourceCode(){window.open("https://github.com/AlejaDiez/iot_attack_detection","_blank","noopener noreferrer")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-menu-bar"]],inputs:{externalLibrary:[1,"externalLibrary"],models:[1,"models"],language:[1,"language"],highContrast:[1,"highContrast"],showGrid:[1,"showGrid"]},outputs:{onNewFile:"onNewFile",onOpenFile:"onOpenFile",onLoadExternalLibrary:"onLoadExternalLibrary",onDeleteExternalLibrary:"onDeleteExternalLibrary",onLoadModels:"onLoadModels",onDeleteModels:"onDeleteModels",onSaveFile:"onSaveFile",onUndo:"onUndo",onRedo:"onRedo",onInsertRouter:"onInsertRouter",onInsertDevice:"onInsertDevice",onChangeLanguage:"onChangeLanguage",onHighContrast:"onHighContrast",onShowGrid:"onShowGrid",onCenter:"onCenter",onZoomReset:"onZoomReset",onZoomIn:"onZoomIn",onZoomOut:"onZoomOut"},decls:32,vars:20,consts:[["file",""],["librarySubmenu",""],["modelsSubmenu",""],["edit",""],["insert",""],["view",""],["languageSubmenu",""],["help",""],[1,"w-fit"],["hlmMenuBarItem","",3,"brnMenuTriggerFor"],["variant","menubar",1,"w-48"],["hlmMenuItem","",3,"click"],["hlmMenuItem","",3,"brnMenuTriggerFor"],["hlmMenuItem",""],["hlmMenuItem","",3,"click","disabled"],["inset","","hlmMenuItem","",3,"brnMenuTriggerFor"],["hlmMenuItemCheckbox","",3,"click","checked"],["inset","","hlmMenuItem","",3,"click"],["hlmMenuItem","","disabled",""]],template:function(e,r){if(e&1&&(X(0,"hlm-menu-bar",8)(1,"button",9),ue(2),Te(3,"translate"),re(),X(4,"button",9),ue(5),Te(6,"translate"),re(),X(7,"button",9),ue(8),Te(9,"translate"),re(),X(10,"button",9),ue(11),Te(12,"translate"),re(),X(13,"button",9),ue(14),Te(15,"translate"),re()(),st(16,eUe,25,11,"ng-template",null,0,mo)(18,tUe,7,6,"ng-template",null,1,mo)(20,nUe,7,6,"ng-template",null,2,mo)(22,rUe,12,8,"ng-template",null,3,mo)(24,oUe,12,7,"ng-template",null,4,mo)(26,iUe,38,24,"ng-template",null,5,mo)(28,sUe,19,6,"ng-template",null,6,mo)(30,aUe,7,4,"ng-template",null,7,mo)),e&2){let o=pr(17),i=pr(23),s=pr(25),a=pr(27),l=pr(31);Y(),Pe("brnMenuTriggerFor",o),Y(),Ye(" ",De(3,10,"FILE")," "),Y(2),Pe("brnMenuTriggerFor",i),Y(),Ye(" ",De(6,12,"EDIT")," "),Y(2),Pe("brnMenuTriggerFor",s),Y(),Ye(" ",De(9,14,"INSERT")," "),Y(2),Pe("brnMenuTriggerFor",a),Y(),Ye(" ",De(12,16,"VIEW")," "),Y(2),Pe("brnMenuTriggerFor",l),Y(),Ye(" ",De(15,18,"HELP")," ")}},dependencies:[Cr,ao,To,UV,Gf,Yw,ny,Hf,ty,Uf,el,Xw,Qw,zf,Jw],encapsulation:2})};var lUe=lr("p-6 pt-0",{variants:{},defaultVariants:{}}),Wb=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(lUe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCardContent",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var uUe=lr("text-sm text-muted-foreground",{variants:{},defaultVariants:{}}),qb=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(uUe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCardDescription",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var RQn=lr("flex p-6 pt-0",{variants:{direction:{row:"flex-row items-center space-x-1.5",column:"flex-col space-y-1.5"}},defaultVariants:{direction:"row"}});var pUe=lr("flex p-6",{variants:{direction:{row:"flex-row items-center space-x-1.5",column:"flex-col space-y-1.5"}},defaultVariants:{direction:"column"}}),Kb=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(pUe({direction:this.direction()}),this.userClass()));direction=Z("column");static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCardHeader",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"],direction:[1,"direction"]}})};var fUe=lr("text-lg font-semibold leading-none tracking-tight",{variants:{},defaultVariants:{}}),Zb=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(fUe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCardTitle",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var gUe=lr("rounded-lg border border-border bg-card focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-card-foreground shadow-sm",{variants:{},defaultVariants:{}}),T2=class t{userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(gUe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmCard",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var ry=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})};var yUe=(t,n,e)=>({focused:t,dragging:n,communicating:e}),Ehe=(t,n)=>({left:t,top:n}),xUe=(t,n)=>({dragging:t,communicating:n});function _Ue(t,n){t&1&&Ve(0,"ng-icon",1)}function kUe(t,n){t&1&&Ve(0,"ng-icon",2)}function bUe(t,n){t&1&&Ve(0,"ng-icon",6)(1,"ng-icon",7)}var FN=class t{router=M(Ko);config=M(Wn);network=M(Bo);NodeType=Kn;node=Z.required();focused=ae(()=>this.network.focusedNode()?.mac===this.node().mac);clicked=!1;dragging=!1;_mouseDown(n){n.preventDefault(),n.button===0&&(this.clicked=!0)}_mouseMove(n){n.preventDefault(),this.clicked&&Math.sqrt(n.movementX**2+n.movementY**2)>1&&(this.dragging=!0,this.router.navigate([""])),this.dragging&&(this.clicked=!1,this.node().move(n.movementX/this.config.zoom(),-n.movementY/this.config.zoom(),!0))}_mouseUp(n){if(n.preventDefault(),this.clicked)if(this.focused())this.router.navigate([""]);else{let e=this.router.url.split("/").length>2?this.router.url.split("/")[2]:"network-traffic";this.router.navigate([this.node().mac,e])}this.dragging&&this.node().move(Math.round(this.node().position.x/20)*20,Math.round(this.node().position.y/20)*20),this.clicked=!1,this.dragging=!1}_supr(n){n.preventDefault(),this.focused()&&this.network.deleteNode(this.node().mac)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-node"]],hostAttrs:[1,"contents"],hostBindings:function(e,r){e&1&&Le("mousedown",function(i){return r._mouseDown(i)})("mousemove",function(i){return r._mouseMove(i)},!1,xi)("mouseup",function(i){return r._mouseUp(i)},!1,xi)("keydown.delete",function(i){return r._supr(i)},!1,xi)("keydown.meta.backspace",function(i){return r._supr(i)},!1,xi)},inputs:{node:[1,"node"]},features:[ut([sr({lucideCpu:zue,lucideGhost:Cw,lucideLaptop:Gue,lucideRouter:Kue,lucideShield:Xue})])],decls:9,vars:20,consts:[["hlmCard","",1,"node",3,"ngClass","ngStyle"],["name","lucideRouter","size","24"],["name","lucideCpu","size","24"],[1,"node-info",3,"ngClass","ngStyle"],[1,"name","text-lg","font-bold"],[1,"ip","text-sm","text-muted-foreground","opacity-60"],["name","lucideLaptop","size","24"],["name","lucideGhost","size","1rem",1,"phantom-attacker"]],template:function(e,r){if(e&1&&(X(0,"div",0),st(1,_Ue,1,0,"ng-icon",1)(2,kUe,1,0,"ng-icon",2)(3,bUe,2,0),re(),X(4,"div",3)(5,"span",4),ue(6),re(),X(7,"span",5),ue(8),re()()),e&2){let o;Pe("ngClass",NU(7,yUe,r.focused(),r.dragging,r.node().communicating))("ngStyle",xh(11,Ehe,"calc(50% + "+r.node().position.x+"px)","calc(50% - "+r.node().position.y+"px)")),Y(),kt((o=r.node().type)===r.NodeType.ROUTER?1:o===r.NodeType.IOT?2:o===r.NodeType.COMPUTER?3:-1),Y(3),Pe("ngClass",xh(14,xUe,r.dragging,r.node().communicating))("ngStyle",xh(17,Ehe,"calc(50% + "+r.node().position.x+"px)","calc(50% - "+r.node().position.y+"px)")),Y(2),ct(r.node().name),Y(2),ct(r.node().ip)}},dependencies:[Fx,Cr,Im,Nm,ry,T2,ar],styles:[".node[_ngcontent-%COMP%]{display:flex;position:absolute;justify-content:center;align-items:center;z-index:20;width:60px;height:60px;border-radius:.75rem;transform:translate(-50%,-50%);transform-origin:center;transition:top .1s,left .1s,border .1s,color .1s,background-color .1s,transform .1s;cursor:pointer}.node[_ngcontent-%COMP%]   .phantom-attacker[_ngcontent-%COMP%]{position:absolute;transform:translate(8px,8px)}.node[_ngcontent-%COMP%]     .phantom-attacker svg{stroke-width:2.5px!important;fill:hsl(var(--card-foreground));color:hsl(var(--card))}.node[_ngcontent-%COMP%]:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 0px}.node.dragging[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.2);z-index:30;transition:transform .1s;cursor:grabbing}.node.focused[_ngcontent-%COMP%]{z-index:30;border-width:0px;border-color:hsl(var(--primary));color:hsl(var(--primary-foreground));background-color:hsl(var(--primary))}.node.focused[_ngcontent-%COMP%]     .phantom-attacker svg{fill:hsl(var(--primary-foreground));color:hsl(var(--primary))}.node.communicating[_ngcontent-%COMP%]{z-index:30;border-width:2px;border-color:hsl(var(--primary))}.node-info[_ngcontent-%COMP%]{display:flex;position:absolute;flex-direction:column;justify-content:center;align-items:flex-start;transform:translateY(-50%);transform-origin:center;z-index:10;transition:top .1s,left .1s,opacity .1s;margin-left:42px;width:auto;height:60px;pointer-events:none;-webkit-user-select:none;user-select:none}  .high-contrast .node-info{margin-left:34px}  .high-contrast .node-info{border-radius:calc(var(--radius) - 2px)!important}  .high-contrast .node-info{background-color:hsl(var(--card))!important}  .high-contrast .node-info{padding-left:.5rem!important;padding-right:.5rem!important}  .high-contrast .node-info{padding-top:.25rem!important;padding-bottom:.25rem!important}  .high-contrast .node-info *{color:hsl(var(--primary))!important}  .high-contrast .node-info *{opacity:1!important}.node-info.dragging[_ngcontent-%COMP%]{opacity:0;transition:opacity .1s}"]})};var PN=class t{invert=Z(!1,{transform:nt});theme=Z("light");position=Z("bottom-right");hotKey=Z(["altKey","KeyT"]);richColors=Z(!1,{transform:nt});expand=Z(!1,{transform:nt});duration=Z(4e3,{transform:_i});visibleToasts=Z(3,{transform:_i});closeButton=Z(!1,{transform:nt});toastOptions=Z({classes:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}});offset=Z(null);dir=Z("auto");userClass=Z("",{alias:"class"});userStyle=Z({},{alias:"style"});_computedClass=ae(()=>Xe("toaster group",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-toaster"]],inputs:{invert:[1,"invert"],theme:[1,"theme"],position:[1,"position"],hotKey:[1,"hotKey"],richColors:[1,"richColors"],expand:[1,"expand"],duration:[1,"duration"],visibleToasts:[1,"visibleToasts"],closeButton:[1,"closeButton"],toastOptions:[1,"toastOptions"],offset:[1,"offset"],dir:[1,"dir"],userClass:[1,"class","userClass"],userStyle:[1,"style","userStyle"]},decls:1,vars:16,consts:[[3,"invert","theme","position","hotKey","richColors","expand","duration","visibleToasts","closeButton","toastOptions","offset","dir"]],template:function(e,r){e&1&&Ve(0,"ngx-sonner-toaster",0),e&2&&(dl(r.userStyle()),$e(r._computedClass()),Pe("invert",r.invert())("theme",r.theme())("position",r.position())("hotKey",r.hotKey())("richColors",r.richColors())("expand",r.expand())("duration",r.duration())("visibleToasts",r.visibleToasts())("closeButton",r.closeButton())("toastOptions",r.toastOptions())("offset",r.offset())("dir",r.dir()))},dependencies:[Jq],encapsulation:2,changeDetection:0})};var Ihe=kS("floatAnimation",[k1("_ => *",[Pm(":enter",[Is({transform:"translateX(100%) translateY(-50%)",opacity:0}),_1("0.5s ease-in-out",Is({transform:"translateX(0) translateY(-50%)",opacity:1}))],{optional:!0})]),k1("* => _",[Pm(":leave",[Is({transform:"translateX(0) translateY(-50%)",opacity:1}),_1("0.5s ease-in-out",Is({transform:"translateX(100%) translateY(-50%)",opacity:0}))],{optional:!0})])]),Nhe=kS("fadeAnimation",[k1("_ <=> *",[]),k1("* => *",[Pm(":enter",[Is({display:"none",opacity:0})],{optional:!0}),Pm(":leave",[_1("0.25s ease-in-out",Is({opacity:0})),Is({display:"none"})],{optional:!0}),Pm(":enter",[Is({display:"flex"}),_1("0.25s ease-in-out",Is({opacity:1}))],{optional:!0})])]);var CUe=t=>({$implicit:t}),SUe=(t,n)=>n.mac,MUe=(t,n)=>`${n.node1.mac}::${n.node2.mac}`;function TUe(t,n){if(t&1&&Ve(0,"app-node",8),t&2){let e=n.$implicit;xe();let r=pr(14);Pe("node",e)("brnCtxMenuTriggerFor",r)("brnCtxMenuTriggerData",ya(3,CUe,e))}}function DUe(t,n){if(t&1&&Ve(0,"app-connection",9),t&2){let e=n.$implicit;Pe("connection",e)}}function EUe(t,n){if(t&1){let e=gn();X(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",11),Le("click",function(o){ze(e);let i=xe();return He(i.onInsertNode(i.NodeType.RouterTypes,o))}),ue(3),Te(4,"translate"),X(5,"hlm-menu-shortcut"),ue(6,"\u2318\u21E7R"),re()(),X(7,"button",12),Le("click",function(o){ze(e);let i=xe();return He(i.onInsertNode(i.NodeType.DeviceTypes,o))}),ue(8),Te(9,"translate"),X(10,"hlm-menu-shortcut"),ue(11,"\u2318\u21E7D"),re()()()()}if(t&2){let e=xe();Y(2),Pe("disabled",e.router),Y(),Ye(" ",De(4,3,"INSERT_ROUTER")," "),Y(5),Ye(" ",De(9,5,"INSERT_DEVICE")," ")}}function IUe(t,n){if(t&1){let e=gn();X(0,"button",12),Le("click",function(o){ze(e);let i=xe().$implicit,s=xe();return He(s.onNodeAttack(i.mac,o))}),Ve(1,"ng-icon",18),ue(2),Te(3,"translate"),re()}t&2&&(Y(2),Ye(" ",De(3,1,"PHANTOM_ATTACKER")," "))}function NUe(t,n){if(t&1){let e=gn();X(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",12),Le("click",function(o){let i=ze(e).$implicit,s=xe();return He(s.onNodeTraffic(i.mac,o))}),Ve(3,"ng-icon",13),ue(4),Te(5,"translate"),re(),st(6,IUe,4,3,"button",14),X(7,"button",12),Le("click",function(o){let i=ze(e).$implicit,s=xe();return He(s.onNodeConfig(i.mac,o))}),Ve(8,"ng-icon",15),ue(9),Te(10,"translate"),re()(),Ve(11,"hlm-menu-separator"),X(12,"hlm-menu-group")(13,"button",16),Le("click",function(o){let i=ze(e).$implicit,s=xe();return He(s.onDeleteNode(i.mac,o))}),Ve(14,"ng-icon",17),ue(15),Te(16,"translate"),re()()()}if(t&2){let e=n.$implicit,r=xe();Y(4),Ye(" ",De(5,4,"NETWORK_TRAFFIC")," "),Y(2),kt(r.NodeType.AttackerTypes.includes(e.type)?6:-1),Y(3),Ye(" ",De(10,6,"CONFIGURATION")," "),Y(6),Ye(" ",De(16,8,"DELETE")," ")}}var BN=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,r){},encapsulation:2})},LN=class t{navigationRouter=M(Ko);config=M(Wn);state=M(Lr);network=M(Bo);library=M(wl);model=M(Yl);NodeType=Kn;canvas=bo.required(xw);get nodes(){return this.network.nodes}get router(){return this.network.router}get connections(){return this.router?.connections??[]}ngAfterViewInit(){this.onCenter("instant")}getAnimationData(n){return n&&!n.isActivated?"_":n.activatedRoute.snapshot.params.mac??"_"}onNewFile(n){n?.preventDefault(),this.network.new()}onOpenFile(n){n?.preventDefault(),this.network.loadFromFile()}onLoadExternalLibrary(n){n?.preventDefault(),this.library.loadFromFile()}onDeleteExternalLibrary(n){n?.preventDefault(),this.library.deleteFile()}onLoadModels(n){n?.preventDefault(),this.model.loadFromFile()}onDeleteModels(n){n?.preventDefault(),this.model.deleteFile()}onSaveFile(n){n?.preventDefault(),this.network.saveToFile()}onUndo(n){n?.preventDefault(),this.state.undo()}onRedo(n){n?.preventDefault(),this.state.redo()}onInsertNode(n,e){let{scrollWidth:r,scrollHeight:o,scrollLeft:i,scrollTop:s}=this.canvas().frame().nativeElement,{left:a,top:l,width:c,height:u}=this.canvas().frame().nativeElement.getBoundingClientRect(),d=r/2,p=o/2;if(e?.preventDefault(),e instanceof MouseEvent){let{clientX:h,clientY:f}=e;this.network.addNode(n,{x:(h-a+i-d)/this.config.zoom(),y:(p-(f-l+s))/this.config.zoom()})}else this.network.addNode(n,{x:(c/2-a+i-d)/this.config.zoom(),y:(p-(u/2-l+s))/this.config.zoom()})}onChangeLanguage(n){this.config.language.set(n)}onHighContrast(){this.config.highContrast.update(n=>!n)}onShowGrid(){this.config.grid.update(n=>!n)}onCenter(n,e){let r=this.canvas().frame().nativeElement,{scrollHeight:o,clientHeight:i,scrollWidth:s,clientWidth:a}=r;e?.preventDefault(),r.scrollTo({top:(o-i)/2,left:(s-a)/2,behavior:n})}onZoomReset(n){n?.preventDefault(),this.config.resetZoom()}onZoomIn(n){n?.preventDefault(),this.config.zoomIn()}onZoomOut(n){n?.preventDefault(),this.config.zoomOut()}onDeleteNode(n,e){e?.preventDefault(),this.network.deleteNode(n)}onNodeTraffic(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"network-traffic"])}onNodeAttack(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"attack"])}onNodeConfig(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"configuration"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-root"]],viewQuery:function(e,r){e&1&&So(r.canvas,xw,5),e&2&&zr()},hostVars:2,hostBindings:function(e,r){e&1&&Le("keydown.meta.n",function(i){return r.onNewFile(i)},!1,xi)("keydown.meta.o",function(i){return r.onOpenFile(i)},!1,xi)("keydown.meta.s",function(i){return r.onSaveFile(i)},!1,xi)("keydown.meta.z",function(i){return r.onUndo(i)},!1,xi)("keydown.meta.shift.z",function(i){return r.onRedo(i)},!1,xi)("keydown.meta.shift.r",function(i){return r.onInsertNode(r.NodeType.RouterTypes,i)},!1,xi)("keydown.meta.shift.d",function(i){return r.onInsertNode(r.NodeType.DeviceTypes,i)},!1,xi)("keydown.alt.0",function(i){return r.onCenter("smooth",i)},!1,xi)("keydown.meta.0",function(i){return r.onZoomReset(i)},!1,xi)("keydown.meta.+",function(i){return r.onZoomIn(i)},!1,xi)("keydown.meta.-",function(i){return r.onZoomOut(i)},!1,xi),e&2&&dr("high-contrast",r.config.highContrast())},features:[ut([sr({lucideChevronsLeftRightEllipsis:Vue,lucideGhost:Cw,lucideSettings:Zue,lucideTrash:Que})])],decls:15,vars:7,consts:[["outlet","outlet"],["canvas",""],["canvasContextMenu",""],["nodeContextMenu",""],[1,"fixed","left-5","top-5","z-inf",3,"onNewFile","onOpenFile","onLoadExternalLibrary","onDeleteExternalLibrary","onLoadModels","onDeleteModels","onSaveFile","onUndo","onRedo","onInsertRouter","onInsertDevice","onChangeLanguage","onHighContrast","onShowGrid","onCenter","onZoomReset","onZoomIn","onZoomOut","externalLibrary","models","language","highContrast","showGrid"],[1,"relative","z-inf"],["richColors","","theme","system"],[3,"brnCtxMenuTriggerFor"],[3,"node","brnCtxMenuTriggerFor","brnCtxMenuTriggerData"],[3,"connection"],[1,"w-64"],["hlmMenuItem","",3,"click","disabled"],["hlmMenuItem","",3,"click"],["hlmMenuIcon","","name","lucideChevronsLeftRightEllipsis"],["hlmMenuItem",""],["hlmMenuIcon","","name","lucideSettings"],["hlmMenuItem","",1,"text-red-500","hover:bg-red-50","hover:text-red-600","dark:text-red-400","dark:hover:bg-red-950","dark:hover:text-red-300",3,"click"],["hlmMenuIcon","","name","lucideTrash"],["hlmMenuIcon","","name","lucideGhost"]],template:function(e,r){if(e&1){let o=gn();X(0,"app-menu-bar",4),Le("onNewFile",function(){return ze(o),He(r.onNewFile())})("onOpenFile",function(){return ze(o),He(r.onOpenFile())})("onLoadExternalLibrary",function(){return ze(o),He(r.onLoadExternalLibrary())})("onDeleteExternalLibrary",function(){return ze(o),He(r.onDeleteExternalLibrary())})("onLoadModels",function(){return ze(o),He(r.onLoadModels())})("onDeleteModels",function(){return ze(o),He(r.onDeleteModels())})("onSaveFile",function(){return ze(o),He(r.onSaveFile())})("onUndo",function(){return ze(o),He(r.onUndo())})("onRedo",function(){return ze(o),He(r.onRedo())})("onInsertRouter",function(){return ze(o),He(r.onInsertNode(r.NodeType.RouterTypes))})("onInsertDevice",function(){return ze(o),He(r.onInsertNode(r.NodeType.DeviceTypes))})("onChangeLanguage",function(s){return ze(o),He(r.onChangeLanguage(s))})("onHighContrast",function(){return ze(o),He(r.onHighContrast())})("onShowGrid",function(){return ze(o),He(r.onShowGrid())})("onCenter",function(){return ze(o),He(r.onCenter("smooth"))})("onZoomReset",function(){return ze(o),He(r.onZoomReset())})("onZoomIn",function(){return ze(o),He(r.onZoomIn())})("onZoomOut",function(){return ze(o),He(r.onZoomOut())}),re(),X(1,"div",5),Ve(2,"router-outlet",null,0),re(),Ve(4,"hlm-toaster",6),X(5,"app-canvas",7,1),Go(7,TUe,1,5,"app-node",8,SUe),Go(9,DUe,1,1,"app-connection",9,MUe),re(),st(11,EUe,12,7,"ng-template",null,2,mo)(13,NUe,17,10,"ng-template",null,3,mo)}if(e&2){let o=pr(3),i=pr(12);Pe("externalLibrary",r.library.library!==void 0)("models",r.model.models!==void 0)("language",r.config.language())("highContrast",r.config.highContrast())("showGrid",r.config.grid()),Y(),Pe("@floatAnimation",r.getAnimationData(o)),Y(4),Pe("brnCtxMenuTriggerFor",i),Y(2),Wo(r.nodes),Y(2),Wo(r.connections)}},dependencies:[Wm,$V,xw,hN,Ja,Gf,zf,Hf,ey,el,Uf,PN,ON,FN,ar,ao,To],encapsulation:2,data:{animation:[Ihe]}})};var Ahe=(t,n)=>{let e=M(Ko),r=M(Bo),{mac:o}=t.parent.params,i=r.getNode(o);return Kn.AttackerTypes.includes(i.type)?!0:new Th(e.parseUrl(`/${o}/network-traffic`))};var Rhe=(t,n)=>{let e=M(Bo),{mac:r}=t.params;return!!e.getNode(r)};function AUe(t,n){t&1&&Ve(0,"hlm-menu-separator")}function RUe(t,n){if(t&1&&(X(0,"hlm-option",5),ue(1),re()),t&2){let e=xe().$implicit;Pe("value",e),Y(),ct(e.name)}}function OUe(t,n){if(t&1&&st(0,AUe,1,0,"hlm-menu-separator")(1,RUe,2,2,"hlm-option",5),t&2){let e=n.$implicit;kt(e==="---"?0:1)}}function FUe(t,n){t&1&&(X(0,"hlm-option",3),ue(1),Te(2,"translate"),re()),t&2&&(Y(),Ye(" ",De(2,1,"NO_ATTACKS")," "))}function PUe(t,n){if(t&1&&(X(0,"hlm-option",5),ue(1),re()),t&2){let e=n.$implicit;Pe("value",e.ip),Y(),ct(e.ip)}}function BUe(t,n){if(t&1){let e=gn();X(0,"label",0),ue(1),Te(2,"translate"),X(3,"brn-select",1),Te(4,"translate"),Oi("ngModelChange",function(o){ze(e);let i=xe();return ns(i.attack,o)||(i.attack=o),He(o)}),X(5,"hlm-select-trigger",2),Ve(6,"hlm-select-value"),re(),X(7,"hlm-select-content"),Go(8,OUe,2,1,null,null,Ds,!1,FUe,3,3,"hlm-option",3),re()()(),X(11,"label",0),ue(12),Te(13,"translate"),X(14,"brn-select",4),Te(15,"translate"),Oi("ngModelChange",function(o){ze(e);let i=xe();return ns(i.target,o)||(i.target=o),He(o)}),X(16,"hlm-select-trigger",2),Ve(17,"hlm-select-value"),re(),X(18,"hlm-select-content"),Go(19,PUe,2,2,"hlm-option",5,Ds),re()()(),X(21,"button",6),Le("click",function(){ze(e);let o=xe();return He(o.execute())}),ue(22),Te(23,"translate"),re()}if(t&2){let e=xe();Y(),Ye(" ",De(2,10,"ATTACK")," "),Y(2),Ri("ngModel",e.attack),Pe("placeholder",De(4,12,"SELECT_ATTACK")),Y(5),Wo(e.attacks),Y(4),Ye(" ",De(13,14,e.multipleTargets()?"TARGETS":"TARGET")," "),Y(2),Ri("ngModel",e.target),Pe("placeholder",De(15,16,e.multipleTargets()?"TARGETS_IP":"TARGET_IP"))("multiple",e.multipleTargets()),Y(5),Wo(e.connectedNodes),Y(2),Pe("disabled",!(e.attack()&&e.target())),Y(),Ye(" ",De(23,18,"LAUNCH_ATTACK")," ")}}function LUe(t,n){t&1&&(Ve(0,"ng-icon",7),X(1,"p",8),ue(2),Te(3,"translate"),re()),t&2&&(Y(2),Ye(" ",De(3,1,"ATTACKER_NOT_CONNECTED")," "))}var $N=class t{network=M(Bo);node=Z.required();attack=si(null);target=si(null);multipleTargets=ae(()=>this.attack()?.multiple??!1);get canConnect(){return this.network.router!==void 0}get attacks(){let n=this.node().generator.internalAttacks,e=this.node().generator.externalAttacks;return n.length>0&&e.length>0?[...n,"---",...e]:[...n,...e]}get connectedNodes(){return this.network.getConnectedNodes(this.node().mac)}constructor(){Tt(()=>{this.multipleTargets()?this.target.update(n=>n&&!Array.isArray(n)?[n]:n):this.target.update(n=>n&&Array.isArray(n)?n[0]:n)})}ngOnChanges(n){this.attack.set(null),this.target.set(null)}connect(){this.node().connect(this.network.router)}execute(){switch(this.attack().id){case"dos":this.node().generator.dos(this.target(),53,[32,128],200);break;default:this.node().generator.attack(this.attack().id,...Array.isArray(this.target())?this.target():[this.target()]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4"],inputs:{node:[1,"node"],attack:[1,"attack"],target:[1,"target"]},outputs:{attack:"attackChange",target:"targetChange"},features:[ut([sr({lucideUnplug:S3})]),Dr],decls:2,vars:1,consts:[["hlmLabel",""],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder"],[1,"w-full"],["disabled","",1,"px-2"],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","multiple"],[3,"value"],["hlmBtn","",3,"click","disabled"],["name","lucideUnplug","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"w-96","self-center","text-center","text-sm","text-muted-foreground"]],template:function(e,r){e&1&&st(0,BUe,24,20)(1,LUe,4,3),e&2&&kt(r.node().connected?0:1)},dependencies:[Cr,Wu,Gu,ec,ao,To,Of,da,qs,Ku,Ja,Qa,Bf,Ya,el,Xi,ys,Zs,Ks,pa,ar],encapsulation:2})};function $Ue(t,n){if(t&1&&(Tm(0),ue(1),Te(2,"translate"),Dm()),t&2){let e=n.$implicit,r=xe();Y(),Ye(" ",De(2,1,r.NodeType.toString(e))," ")}}function VUe(t,n){if(t&1&&(X(0,"hlm-option",6),ue(1),re()),t&2){let e=n.$implicit,r=xe();Pe("value",e),Y(),Ye(" ",r.config.translate.instant(r.NodeType.toString(e))," ")}}var VN=class t{config=M(Wn);network=M(Bo);NodeType=Kn;node=Z.required();delete(){this.network.deleteNode(this.node().mac)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4"],inputs:{node:[1,"node"]},decls:24,vars:25,consts:[["hlmLabel",""],["hlmInput","","type","text",1,"!mt-2","w-full",3,"ngModelChange","ngModel","placeholder"],["hlmInput","","type","text","disabled","",1,"!mt-2","w-full",3,"ngModel","placeholder"],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"w-full"],[4,"brnSelectValue"],[3,"value"],["hlmBtn","","variant","destructive",3,"click"]],template:function(e,r){e&1&&(X(0,"label",0),ue(1),Te(2,"translate"),X(3,"input",1),Te(4,"translate"),Oi("ngModelChange",function(i){return ns(r.node().name,i)||(r.node().name=i),i}),re()(),X(5,"label",0),ue(6),Te(7,"translate"),Ve(8,"input",2),Te(9,"translate"),re(),X(10,"label",0),ue(11),Te(12,"translate"),X(13,"brn-select",3),Te(14,"translate"),Oi("ngModelChange",function(i){return ns(r.node().type,i)||(r.node().type=i),i}),X(15,"hlm-select-trigger",4)(16,"hlm-select-value"),st(17,$Ue,3,3,"ng-container",5),re()(),X(18,"hlm-select-content"),Go(19,VUe,2,2,"hlm-option",6,Ds),re()()(),X(21,"button",7),Le("click",function(){return r.delete()}),ue(22),Te(23,"translate"),re()),e&2&&(Y(),Ye(" ",De(2,11,"NAME")," "),Y(2),Ri("ngModel",r.node().name),Pe("placeholder",De(4,13,"DEVICE_NAME")),Y(3),Ye(" ",De(7,15,"IP")," "),Y(2),Pe("ngModel",r.node().ip)("placeholder",De(9,17,"DEVICE_IP")),Y(3),Ye(" ",De(12,19,"TYPE")," "),Y(2),Ri("ngModel",r.node().type),Pe("placeholder",De(14,21,"SELECT_DEVICE_TYPE"))("disabled",r.NodeType.getTypes(r.node().type).length<=1),Y(6),Wo(r.NodeType.getTypes(r.node().type)),Y(3),Ye(" ",De(23,23,"DELETE"),`
`))},dependencies:[Cr,Wu,Nf,Gu,ec,ao,To,Of,da,qs,Ku,lN,Ja,Qa,jw,Pf,Bf,Ya,Xi,ys,Zs,Ks,pa,$w],encapsulation:2})};var jUe=["tooltip"];function zUe(t,n){if(t&1&&ue(0),t&2){let e=xe();Ye(" ",e.content," ")}}function HUe(t,n){if(t&1&&tr(0,2),t&2){let e=xe();Pe("ngTemplateOutlet",e.content)}}var UUe=(()=>{class t{_cdr=M(kr);_isBrowser=rs(M(so));_renderer2=M(Zr);_contentHovered=Ze(!1);_tooltipClasses=Ze("");side=Ze("above");content=null;_showTimeoutId;_hideTimeoutId;_animateTimeoutId;_triggerElement;_mouseLeaveHideDelay=0;_exitAnimationDuration=0;_tooltip=bo("tooltip",{read:_t});_closeOnInteraction=!1;_isVisible=!1;_onHide=new ot;afterHidden=this._onHide.asObservable();show(e){this._hideTimeoutId!==null&&clearTimeout(this._hideTimeoutId),this._animateTimeoutId!==null&&clearTimeout(this._animateTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleDataAttributes(!0,this.side()),this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e,r){this._showTimeoutId!==null&&clearTimeout(this._showTimeoutId),this._animateTimeoutId=setTimeout(()=>{this._animateTimeoutId=void 0,!this._contentHovered()&&this._toggleDataAttributes(!1,this.side())},Math.max(e,0)),this._hideTimeoutId=setTimeout(()=>{this._hideTimeoutId=void 0,!this._contentHovered()&&this._toggleVisibility(!1)},e+r)}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=void 0}_isTypeOfString(e){return typeof e=="string"}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0,0)}_markForCheck(){this._cdr.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement?.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay,this._exitAnimationDuration):this._finalize(!1)),this._contentHovered.set(!1)}_cancelPendingAnimations(){this._showTimeoutId!==null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!==null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalize(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let r=this._tooltip()?.nativeElement;!r||!this._isBrowser||(this._renderer2.setStyle(r,"visibility",e?"visible":"hidden"),e?this._renderer2.removeStyle(r,"display"):this._renderer2.setStyle(r,"display","none"),this._isVisible=e)}_toggleDataAttributes(e,r){let o=this._tooltip()?.nativeElement;!o||!this._isBrowser||(this._renderer2.setAttribute(o,"data-side",r),this._renderer2.setAttribute(o,"data-state",e?"open":"closed"))}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-tooltip-content"]],viewQuery:function(r,o){r&1&&So(o._tooltip,jUe,5,_t),r&2&&zr()},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(r,o){r&1&&Le("mouseleave",function(s){return o._handleMouseLeave(s)}),r&2&&fc("zoom",o.isVisible()?1:null)},decls:4,vars:5,consts:[["tooltip",""],[3,"mouseenter","mouseleave"],[3,"ngTemplateOutlet"]],template:function(r,o){if(r&1){let i=gn();X(0,"div",1,0),Le("mouseenter",function(){return ze(i),He(o._contentHovered.set(!0))})("mouseleave",function(){return ze(i),He(o._contentHovered.set(!1))}),st(2,zUe,1,1)(3,HUe,1,1,"ng-container",2),re()}r&2&&($e(o._tooltipClasses()),fc("visibility","hidden"),Y(2),kt(o._isTypeOfString(o.content)?2:3))},dependencies:[gc],encapsulation:2,changeDetection:0})}return t})(),jN=(()=>{class t{tooltipTemplate=Ze(null);static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTooltip",""]]})}return t})(),Phe=(()=>{class t{_brnTooltipDirective=M(jN,{optional:!0});_tpl=M(Gn);constructor(){!this._brnTooltipDirective||!this._tpl||this._brnTooltipDirective.tooltipTemplate.set(this._tpl)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTooltipContent",""]]})}return t})(),GV={showDelay:0,hideDelay:0,exitAnimationDuration:0,touchendHideDelay:1500},Bhe=new Me("brn-tooltip-default-options",{providedIn:"root",factory:()=>GV});function Lhe(t){return{provide:Bhe,useValue:le(le({},GV),t)}}function GUe(){return M(Bhe,{optional:!0})??GV}function WUe(t){let n=null,e=En(()=>t());return ae(()=>{n=t();let r=e;return e=n,r})}var qUe=20;function Ohe(t){return Error(`Tooltip position "${t}" is invalid.`)}var $he=new Me("brn-tooltip-scroll-strategy"),KUe={provide:$he,deps:[vs],useFactory:t=>()=>t.scrollStrategies.reposition({scrollThrottle:qUe})},ZUe="tooltip-panel",Fhe=y2({passive:!0}),XUe=500,YUe=8,QUe=8,Vhe=(()=>{class t{_tooltipDirective=M(jN,{optional:!0});_tooltipComponent=UUe;_cssClassPrefix="brn";_destroyed=new ot;_passiveListeners=[];_defaultOptions=GUe();_overlay=M(vs);_elementRef=M(_t);_scrollDispatcher=M(Mw);_viewContainerRef=M(_r);_ngZone=M(Rt);_platform=M(oo);_ariaDescriber=M(gpe);_focusMonitor=M(th);_dir=M(gi);_scrollStrategy=M($he);_document=M(tn);_portal;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_viewportMargin=8;_currentPosition;_touchstartTimeout;_overlayRef=null;_tooltipInstance=null;position=Z(this._defaultOptions?.position??"above");positionAtOrigin=Z(this._defaultOptions?.positionAtOrigin??!1,{transform:nt});brnTooltipDisabled=Z(!1,{transform:nt});showDelay=Z(this._defaultOptions?.showDelay??0,{transform:_i});hideDelay=Z(this._defaultOptions?.hideDelay??0,{transform:_i});exitAnimationDuration=Z(this._defaultOptions?.exitAnimationDuration??0,{transform:_i});_tooltipContentClasses=Z(this._defaultOptions?.tooltipContentClasses??"",{alias:"tooltipContentClasses"});tooltipContentClasses=ae(()=>Ze(this._tooltipContentClasses()));touchGestures=Z(this._defaultOptions?.touchGestures??"auto");_ariaDescribedBy=Z("",{alias:"aria-describedby"});ariaDescribedBy=ae(()=>Ze(this._ariaDescribedBy()));ariaDescribedByPrevious=WUe(this.ariaDescribedBy);brnTooltipTrigger=Z(null);brnTooltipTriggerState=ae(()=>this._tooltipDirective?this._tooltipDirective.tooltipTemplate():this.brnTooltipTrigger());constructor(){this._dir.change.pipe(It(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=YUe,this._initBrnTooltipTriggerEffect(),this._initAriaDescribedByPreviousEffect(),this._initTooltipContentClassesEffect(),this._initPositionEffect(),this._initPositionAtOriginEffect(),this._initBrnTooltipDisabledEffect(),this._initExitAnimationDurationEffect(),this._initHideDelayEffect()}setTooltipContentClasses(e){this.tooltipContentClasses().set(e)}setAriaDescribedBy(e){this.ariaDescribedBy().set(e)}_initPositionEffect(){Tt(()=>{this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition())})}_initBrnTooltipDisabledEffect(){Tt(()=>{this.brnTooltipDisabled()?this.hide(0):this._setupPointerEnterEventsIfNeeded()})}_initPositionAtOriginEffect(){Tt(()=>{let e=this.positionAtOrigin();this._detach(),this._overlayRef=null})}_initTooltipContentClassesEffect(){Tt(()=>{this._tooltipInstance&&this._tooltipInstance._tooltipClasses.set(this.tooltipContentClasses()()??"")})}_initAriaDescribedByPreviousEffect(){Tt(()=>{let e=this.ariaDescribedBy()();this._ariaDescriber.removeDescription(this._elementRef.nativeElement,En(()=>this.ariaDescribedByPrevious()()),"tooltip"),e&&!this._isTooltipVisible()&&this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,e,"tooltip")})})})}_initBrnTooltipTriggerEffect(){Tt(()=>{let e=this.brnTooltipTriggerState(),r=this._isTooltipVisible();En(()=>{!e&&r?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipContent())})})}_initExitAnimationDurationEffect(){Tt(()=>{this._tooltipInstance&&(this._tooltipInstance._exitAnimationDuration=this.exitAnimationDuration())})}_initHideDelayEffect(){Tt(()=>{this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this.hideDelay())})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(It(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))}),Aue&&!this.ariaDescribedBy()&&console.warn('BrnTooltip: "aria-describedby" attribute is required for accessibility')}ngOnDestroy(){let e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([r,o])=>e.removeEventListener(r,o,Fhe)),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.ariaDescribedBy()(),"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay(),r){if(this.brnTooltipDisabled()||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let o=this._createOverlay(r);this._detach(),this._portal=this._portal||new eh(this._tooltipComponent,this._viewContainerRef);let i=this._tooltipInstance=o.attach(this._portal).instance;i._triggerElement=this._elementRef.nativeElement,i._mouseLeaveHideDelay=this.hideDelay(),i._tooltipClasses.set(this.tooltipContentClasses()()),i._exitAnimationDuration=this.exitAnimationDuration(),i.side.set(this._currentPosition??"above"),i.afterHidden.pipe(It(this._destroyed)).subscribe(()=>this._detach()),this._updateTooltipContent(),i.show(e)}hide(e=this.hideDelay(),r=this.exitAnimationDuration()){let o=this._tooltipInstance;o&&(o.isVisible()?o.hide(e,r):(o._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let i=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin()||!e)&&i._origin instanceof _t)return this._overlayRef;this._detach()}let r=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),o=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin()?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(r);return o.positionChanges.pipe(It(this._destroyed)).subscribe(i=>{this._updateCurrentPositionClass(i.connectionPair),this._tooltipInstance&&i.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:o,panelClass:`${this._cssClassPrefix}-${ZUe}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(It(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(It(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(It(this._destroyed)).subscribe(i=>{this._isTooltipVisible()&&i.key==="Escape"&&!$r(i)&&(i.preventDefault(),i.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef?.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let r=e.getConfig().positionStrategy,o=this._getOrigin(),i=this._getOverlayPosition();r.withPositions([this._addOffset(le(le({},o.main),i.main)),this._addOffset(le(le({},o.fallback),i.fallback))])}_addOffset(e){let r=QUe,o=!this._dir||this._dir.value==="ltr";return e.originY==="top"?e.offsetY=-r:e.originY==="bottom"?e.offsetY=r:e.originX==="start"?e.offsetX=o?-r:r:e.originX==="end"&&(e.offsetX=o?r:-r),e}_getOrigin(){let e=!this._dir||this._dir.value==="ltr",r=this.position(),o;if(r==="above"||r==="below")o={originX:"center",originY:r==="above"?"top":"bottom"};else if(r==="before"||r==="left"&&e||r==="right"&&!e)o={originX:"start",originY:"center"};else if(r==="after"||r==="right"&&e||r==="left"&&!e)o={originX:"end",originY:"center"};else if(typeof Wy()>"u"||Wy())throw Ohe(r);let{x:i,y:s}=this._invertPosition(o.originX,o.originY);return{main:o,fallback:{originX:i,originY:s}}}_getOverlayPosition(){let e=!this._dir||this._dir.value==="ltr",r=this.position(),o;if(r==="above")o={overlayX:"center",overlayY:"bottom"};else if(r==="below")o={overlayX:"center",overlayY:"top"};else if(r==="before"||r==="left"&&e||r==="right"&&!e)o={overlayX:"end",overlayY:"center"};else if(r==="after"||r==="right"&&e||r==="left"&&!e)o={overlayX:"start",overlayY:"center"};else if(typeof Wy()>"u"||Wy())throw Ohe(r);let{x:i,y:s}=this._invertPosition(o.overlayX,o.overlayY);return{main:o,fallback:{overlayX:i,overlayY:s}}}_updateTooltipContent(){this._tooltipInstance&&(this._tooltipInstance.content=this.brnTooltipTriggerState(),this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Vr(1),It(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef?.updatePosition()}))}_invertPosition(e,r){return this.position()==="above"||this.position()==="below"?r==="top"?r="bottom":r==="bottom"&&(r="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:r}}_updateCurrentPositionClass(e){let{overlayY:r,originX:o,originY:i}=e,s;r==="center"?this._dir&&this._dir.value==="rtl"?s=o==="end"?"left":"right":s=o==="start"?"left":"right":s=r==="bottom"&&i==="top"?"above":"below",s!==this._currentPosition&&(this._tooltipInstance?.side.set(s),this._currentPosition=s)}_setupPointerEnterEventsIfNeeded(){this.brnTooltipDisabled()||!this.brnTooltipTriggerState()||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let r;e.x!==void 0&&e.y!==void 0&&(r=e),this.show(void 0,r)}]):this.touchGestures()!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let r=e.targetTouches?.[0],o=r?{x:r.clientX,y:r.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,o),XUe)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",r=>{let o=r.relatedTarget;(!o||!this._overlayRef?.overlayElement.contains(o))&&this.hide()}],["wheel",r=>this._wheelListener(r)]);else if(this.touchGestures()!=="off"){this._disableNativeGesturesIfNecessary();let r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};e.push(["touchend",r],["touchcancel",r])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([r,o])=>{this._elementRef.nativeElement.addEventListener(r,o,Fhe)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let r=this._document.elementFromPoint(e.clientX,e.clientY),o=this._elementRef.nativeElement;r!==o&&!o.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures();if(e!=="off"){let r=this._elementRef.nativeElement,o=r.style;(e==="on"||r.nodeName!=="INPUT"&&r.nodeName!=="TEXTAREA")&&(o.userSelect=o.msUserSelect=o.webkitUserSelect=o.MozUserSelect="none"),(e==="on"||!r.draggable)&&(o.webkitUserDrag="none"),o.touchAction="none",o.webkitTapHighlightColor="transparent"}}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTooltipTrigger",""]],hostAttrs:[1,"brn-tooltip-trigger"],hostVars:2,hostBindings:function(r,o){r&2&&dr("brn-tooltip-disabled",o.brnTooltipDisabled())},inputs:{position:[1,"position"],positionAtOrigin:[1,"positionAtOrigin"],brnTooltipDisabled:[1,"brnTooltipDisabled"],showDelay:[1,"showDelay"],hideDelay:[1,"hideDelay"],exitAnimationDuration:[1,"exitAnimationDuration"],_tooltipContentClasses:[1,"tooltipContentClasses","_tooltipContentClasses"],touchGestures:[1,"touchGestures"],_ariaDescribedBy:[1,"aria-describedby","_ariaDescribedBy"],brnTooltipTrigger:[1,"brnTooltipTrigger"]},exportAs:["brnTooltipTrigger"],features:[ut([KUe])]})}return t})();var JUe="overflow-hidden rounded-md border border-border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md fade-in-0 zoom-in-95 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=below]:slide-in-from-top-2 data-[side=above]:slide-in-from-bottom-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 ",Xb=class t{static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmTooltipTrigger",""]],features:[ut([Lhe({showDelay:150,hideDelay:300,exitAnimationDuration:150,tooltipContentClasses:JUe})]),Pt([{directive:Vhe,inputs:["brnTooltipDisabled","hlmTooltipDisabled","brnTooltipTrigger","hlmTooltipTrigger","aria-describedby","aria-describedby","position","position","positionAtOrigin","positionAtOrigin","hideDelay","hideDelay","showDelay","showDelay","exitAnimationDuration","exitAnimationDuration","touchGestures","touchGestures"]}])]})};var eGe=()=>({display:"contents"}),tGe=["*"],Yb=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-tooltip"]],hostVars:3,hostBindings:function(e,r){e&2&&dl(Z4(2,eGe))},features:[Pt([jN])],ngContentSelectors:tGe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2,changeDetection:0})};function nGe(t,n){if(t&1&&(X(0,"span",7),ue(1),re()),t&2){let e=xe();Y(),Ye(" ",e.context.packet.payload," ")}}function rGe(t,n){if(t&1&&(X(0,"div",2)(1,"label",3),ue(2),Te(3,"translate"),re(),X(4,"span",4),ue(5),re()()),t&2){let e=xe();Y(2),ct(De(3,2,"PACKET_TYPE")),Y(3),ct(e.context.packet.type)}}function oGe(t,n){if(t&1&&(X(0,"div",2)(1,"label",3),ue(2),Te(3,"translate"),re(),X(4,"span",4),ue(5),re()()),t&2){let e=xe();Y(2),ct(De(3,2,"PACKET_CODE")),Y(3),ct(e.context.packet.code)}}function iGe(t,n){if(t&1&&(X(0,"div",2)(1,"label",3),ue(2),Te(3,"translate"),re(),X(4,"span",4),ue(5),re()()),t&2){let e=xe();Y(2),ct(De(3,2,"PACKET_IDENTIFIER")),Y(3),ct(e.context.packet.identifier)}}function sGe(t,n){if(t&1&&(X(0,"div",2)(1,"label",3),ue(2),Te(3,"translate"),re(),X(4,"span",4),ue(5),re()()),t&2){let e=xe();Y(2),ct(De(3,2,"PACKET_SEQUENCE")),Y(3),ct(e.context.packet.sequence)}}function aGe(t,n){if(t&1&&(X(0,"div",2)(1,"label",3),ue(2),Te(3,"translate"),re(),X(4,"span",4),ue(5),re()()),t&2){let e=xe();Y(2),ct(De(3,2,"PACKET_TCP_FLAGS")),Y(3),ct(e.context.packet.tcpFlags)}}function lGe(t,n){if(t&1&&(X(0,"div",2)(1,"label",3),ue(2),Te(3,"translate"),re(),X(4,"span",4),ue(5),re()()),t&2){let e=xe();Y(2),ct(De(3,2,"PACKET_ACK")),Y(3),ct(e.context.packet.ack)}}var zN=class t{config=M(Wn);ref=M(ws);context=Uu();ngOnInit(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["app-show-packet-dialog"]],hostAttrs:[1,"min-w-96","max-h-[80vh]","flex","flex-col","gap-4"],decls:86,vars:62,consts:[["hlmDialogTitle",""],[1,"grid","gap-4","py-4","overflow-y-auto"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"items-center","text-right","text-sm","font-medium","text-muted-foreground"],[1,"col-span-3","overflow-hidden","text-ellipsis"],["hlmTooltipTrigger","","showDelay","500",1,"col-span-3","inline-block","truncate"],["class","overflow-hidden whitespace-normal break-words break-all",4,"brnTooltipContent"],[1,"overflow-hidden","whitespace-normal","break-words","break-all"]],template:function(e,r){e&1&&(X(0,"hlm-dialog-header")(1,"h3",0),ue(2),Te(3,"translate"),re()(),X(4,"div",1)(5,"div",2)(6,"label",3),ue(7),Te(8,"translate"),re(),X(9,"span",4),ue(10),re()(),X(11,"div",2)(12,"label",3),ue(13),Te(14,"translate"),re(),X(15,"span",4),ue(16),re()(),X(17,"div",2)(18,"label",3),ue(19),Te(20,"translate"),re(),X(21,"span",4),ue(22),re()(),X(23,"div",2)(24,"label",3),ue(25),Te(26,"translate"),re(),X(27,"span",4),ue(28),re()(),X(29,"div",2)(30,"label",3),ue(31),Te(32,"translate"),re(),X(33,"span",4),ue(34),re()(),X(35,"div",2)(36,"label",3),ue(37),Te(38,"translate"),re(),X(39,"span",4),ue(40),re()(),X(41,"div",2)(42,"label",3),ue(43),Te(44,"translate"),re(),X(45,"hlm-tooltip")(46,"span",5),ue(47),re(),st(48,nGe,2,1,"span",6),re()(),X(49,"div",2)(50,"label",3),ue(51),Te(52,"translate"),re(),X(53,"span",4),ue(54),re()(),X(55,"div",2)(56,"label",3),ue(57),Te(58,"translate"),re(),X(59,"span",4),ue(60),re()(),X(61,"div",2)(62,"label",3),ue(63),Te(64,"translate"),re(),X(65,"span",4),ue(66),re()(),X(67,"div",2)(68,"label",3),ue(69),Te(70,"translate"),re(),X(71,"span",4),ue(72),Te(73,"date"),re()(),X(74,"div",2)(75,"label",3),ue(76),Te(77,"translate"),re(),X(78,"span",4),ue(79),re()(),st(80,rGe,6,4,"div",2)(81,oGe,6,4,"div",2)(82,iGe,6,4,"div",2)(83,sGe,6,4,"div",2)(84,aGe,6,4,"div",2)(85,lGe,6,4,"div",2),re()),e&2&&(Y(2),ct(De(3,31,"PACKET_DETAILS")),Y(5),ct(De(8,33,"PACKET_SRC_IP")),Y(3),ct(r.context.packet.srcIP),Y(3),ct(De(14,35,"PACKET_DST_IP")),Y(3),ct(r.context.packet.dstIP),Y(3),ct(De(20,37,"PACKET_SRC_PORT")),Y(3),ct(r.context.packet.srcPort),Y(3),ct(De(26,39,"PACKET_DST_PORT")),Y(3),ct(r.context.packet.dstPort),Y(3),ct(De(32,41,"PACKET_TRANSPORT_PROTOCOL")),Y(3),ct(r.context.packet.transportProtocol),Y(3),ct(De(38,43,"PACKET_APPLICATION_PROTOCOL")),Y(3),ct(r.context.packet.applicationProtocol),Y(3),ct(De(44,45,"PACKET_PAYLOAD")),Y(4),Ye(" ",r.context.packet.payload," "),Y(4),ct(De(52,47,"PACKET_TOTAL_BYTES")),Y(3),ct(r.context.packet.totalBytes),Y(3),ct(De(58,49,"PACKET_HEADER_SIZE")),Y(3),ct(r.context.packet.headerSize),Y(3),ct(De(64,51,"PACKET_PAYLOAD_SIZE")),Y(3),ct(r.context.packet.payloadSize),Y(3),ct(De(70,53,"PACKET_TIMESTAMP")),Y(3),ct(VU(73,55,r.context.packet.timestamp,"medium",void 0,r.config.language())),Y(4),ct(De(77,60,"PACKET_TTL")),Y(3),ct(r.context.packet.ttl),Y(),kt(r.context.packet.type?80:-1),Y(),kt(r.context.packet.code?81:-1),Y(),kt(r.context.packet.identifier?82:-1),Y(),kt(r.context.packet.sequence?83:-1),Y(),kt(r.context.packet.tcpFlags?84:-1),Y(),kt(r.context.packet.ack?85:-1))},dependencies:[Cr,nO,ao,To,Yb,Xb,Phe,Ql,Jl,Xi],encapsulation:2})};var HN=class{applyChanges(n,e,r,o,i){n.forEachOperation((s,a,l)=>{let c,u;if(s.previousIndex==null){let d=r(s,a,l);c=e.createEmbeddedView(d.templateRef,d.context,d.index),u=m2.INSERTED}else l==null?(e.remove(a),u=m2.REMOVED):(c=e.get(a),e.move(c,l),u=m2.MOVED);i&&i({context:c?.context,operation:u,record:s})})}detach(){}};var cGe=[[["caption"]],[["colgroup"],["col"]],"*"],uGe=["caption","colgroup, col","*"];function dGe(t,n){t&1&&it(0,2)}function pGe(t,n){t&1&&(X(0,"thead",0),tr(1,1),re(),X(2,"tbody",0),tr(3,2)(4,3),re(),X(5,"tfoot",0),tr(6,4),re())}function hGe(t,n){t&1&&tr(0,1)(1,2)(2,3)(3,4)}var oh=new Me("CDK_TABLE");var qV=(()=>{class t{template=M(Gn);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkCellDef",""]]})}return t})(),KV=(()=>{class t{template=M(Gn);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkHeaderCellDef",""]]})}return t})(),ZV=(()=>{class t{template=M(Gn);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkFooterCellDef",""]]})}return t})(),Qb=(()=>{class t{_table=M(oh,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(e){this._setNameInput(e)}_name;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(r,o,i){if(r&1&&(Co(i,qV,5),Co(i,KV,5),Co(i,ZV,5)),r&2){let s;Er(s=Ir())&&(o.cell=s.first),Er(s=Ir())&&(o.headerCell=s.first),Er(s=Ir())&&(o.footerCell=s.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",nt],stickyEnd:[2,"stickyEnd","stickyEnd",nt]},features:[ut([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}])]})}return t})();var GN=class{tasks=[];endTasks=[]},zhe=new Me("_COALESCED_STYLE_SCHEDULER"),fGe=(()=>{class t{_currentSchedule=null;_ngZone=M(Rt);constructor(){}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new GN,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let e=this._currentSchedule;this._currentSchedule=new GN;for(let r of e.tasks)r();for(let r of e.endTasks)r()}this._currentSchedule=null})))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var XV=(()=>{class t{template=M(Gn);_differs=M(fd);columns;_columnsDiffer;constructor(){}ngOnChanges(e){if(!this._columnsDiffer){let r=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof qN?e.headerCell.template:this instanceof Whe?e.footerCell.template:e.cell.template}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,features:[Dr]})}return t})(),qN=(()=>{class t extends XV{_table=M(oh,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(M(Gn),M(fd))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",nt]},features:[Mn,Dr]})}return t})(),Whe=(()=>{class t extends XV{_table=M(oh,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(M(Gn),M(fd))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",nt]},features:[Mn,Dr]})}return t})(),Jb=(()=>{class t extends XV{_table=M(oh,{optional:!0});when;constructor(){super(M(Gn),M(fd))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[Mn]})}return t})(),WN=(()=>{class t{_viewContainer=M(_r);cells;context;static mostRecentCellOutlet=null;constructor(){t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","cdkCellOutlet",""]]})}return t})(),qhe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,o){r&1&&tr(0,0)},dependencies:[WN],encapsulation:2})}return t})();var Khe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,o){r&1&&tr(0,0)},dependencies:[WN],encapsulation:2})}return t})(),YV=(()=>{class t{templateRef=M(Gn);_contentClassName="cdk-no-data-row";constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["ng-template","cdkNoDataRow",""]]})}return t})(),Hhe=["top","bottom","left","right"],WV=class{_isNativeHtmlTable;_stickCellCss;direction;_coalescedStyleScheduler;_isBrowser;_needsPositionStickyOnElement;_positionListener;_tableInjector;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(n=>this._updateCachedSizes(n)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;_destroyed=!1;constructor(n,e,r,o,i=!0,s=!0,a,l){this._isNativeHtmlTable=n,this._stickCellCss=e,this.direction=r,this._coalescedStyleScheduler=o,this._isBrowser=i,this._needsPositionStickyOnElement=s,this._positionListener=a,this._tableInjector=l,this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(n);let r=[];for(let o of n)o.nodeType===o.ELEMENT_NODE&&r.push(o,...Array.from(o.children));this._afterNextRender({write:()=>{for(let o of r)this._removeStickyStyle(o,e)}})}updateStickyColumns(n,e,r,o=!0,i=!0){if(!n.length||!this._isBrowser||!(e.some(g=>g)||r.some(g=>g))){this._positionListener?.stickyColumnsUpdated({sizes:[]}),this._positionListener?.stickyEndColumnsUpdated({sizes:[]});return}let s=n[0],a=s.children.length,l=this.direction==="rtl",c=l?"right":"left",u=l?"left":"right",d=e.lastIndexOf(!0),p=r.indexOf(!0),h,f,m;i&&this._updateStickyColumnReplayQueue({rows:[...n],stickyStartStates:[...e],stickyEndStates:[...r]}),this._afterNextRender({earlyRead:()=>{h=this._getCellWidths(s,o),f=this._getStickyStartColumnPositions(h,e),m=this._getStickyEndColumnPositions(h,r)},write:()=>{for(let g of n)for(let v=0;v<a;v++){let w=g.children[v];e[v]&&this._addStickyStyle(w,c,f[v],v===d),r[v]&&this._addStickyStyle(w,u,m[v],v===p)}this._positionListener&&h.some(g=>!!g)&&(this._positionListener.stickyColumnsUpdated({sizes:d===-1?[]:h.slice(0,d+1).map((g,v)=>e[v]?g:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:p===-1?[]:h.slice(p).map((g,v)=>r[v+p]?g:null).reverse()}))}})}stickRows(n,e,r){if(!this._isBrowser)return;let o=r==="bottom"?n.slice().reverse():n,i=r==="bottom"?e.slice().reverse():e,s=[],a=[],l=[];this._afterNextRender({earlyRead:()=>{for(let c=0,u=0;c<o.length;c++){if(!i[c])continue;s[c]=u;let d=o[c];l[c]=this._isNativeHtmlTable?Array.from(d.children):[d];let p=this._retrieveElementSize(d).height;u+=p,a[c]=p}},write:()=>{let c=i.lastIndexOf(!0);for(let u=0;u<o.length;u++){if(!i[u])continue;let d=s[u],p=u===c;for(let h of l[u])this._addStickyStyle(h,r,d,p)}r==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:s,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:s,elements:l})}})}updateStickyFooterContainer(n,e){this._isNativeHtmlTable&&this._afterNextRender({write:()=>{let r=n.querySelector("tfoot");r&&(e.some(o=>!o)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1))}})}destroy(){this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._resizeObserver?.disconnect(),this._destroyed=!0}_removeStickyStyle(n,e){if(!n.classList.contains(this._stickCellCss))return;for(let o of e)n.style[o]="",n.classList.remove(this._borderCellCss[o]);Hhe.some(o=>e.indexOf(o)===-1&&n.style[o])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,r,o){n.classList.add(this._stickCellCss),o&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${r}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){let e={top:100,bottom:10,left:1,right:1},r=0;for(let o of Hhe)n.style[o]&&(r+=e[o]);return r?`${r}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let r=[],o=n.children;for(let i=0;i<o.length;i++){let s=o[i];r.push(this._retrieveElementSize(s).width)}return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(n,e){let r=[],o=0;for(let i=0;i<n.length;i++)e[i]&&(r[i]=o,o+=n[i]);return r}_getStickyEndColumnPositions(n,e){let r=[],o=0;for(let i=n.length;i>0;i--)e[i]&&(r[i]=o,o+=n[i]);return r}_retrieveElementSize(n){let e=this._elemSizeCache.get(n);if(e)return e;let r=n.getBoundingClientRect(),o={width:r.width,height:r.height};return this._resizeObserver&&(this._elemSizeCache.set(n,o),this._resizeObserver.observe(n,{box:"border-box"})),o}_updateStickyColumnReplayQueue(n){this._removeFromStickyColumnReplayQueue(n.rows),this._stickyColumnsReplayTimeout||this._updatedStickyColumnsParamsToReplay.push(n)}_removeFromStickyColumnReplayQueue(n){let e=new Set(n);for(let r of this._updatedStickyColumnsParamsToReplay)r.rows=r.rows.filter(o=>!e.has(o));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(r=>!!r.rows.length)}_updateCachedSizes(n){let e=!1;for(let r of n){let o=r.borderBoxSize?.length?{width:r.borderBoxSize[0].inlineSize,height:r.borderBoxSize[0].blockSize}:{width:r.contentRect.width,height:r.contentRect.height};o.width!==this._elemSizeCache.get(r.target)?.width&&mGe(r.target)&&(e=!0),this._elemSizeCache.set(r.target,o)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{if(!this._destroyed){for(let r of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(r.rows,r.stickyStartStates,r.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null}},0))}_afterNextRender(n){this._tableInjector?yi(n,{injector:this._tableInjector}):this._coalescedStyleScheduler.schedule(()=>{n.earlyRead?.(),n.write()})}};function mGe(t){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(n=>t.classList.contains(n))}var Uhe=new Me("CDK_SPL");var gGe=(()=>{class t{viewContainer=M(_r);elementRef=M(_t);constructor(){let e=M(oh);e._rowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","rowOutlet",""]]})}return t})(),vGe=(()=>{class t{viewContainer=M(_r);elementRef=M(_t);constructor(){let e=M(oh);e._headerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","headerRowOutlet",""]]})}return t})(),wGe=(()=>{class t{viewContainer=M(_r);elementRef=M(_t);constructor(){let e=M(oh);e._footerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","footerRowOutlet",""]]})}return t})(),yGe=(()=>{class t{viewContainer=M(_r);elementRef=M(_t);constructor(){let e=M(oh);e._noDataRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","noDataRowOutlet",""]]})}return t})();var KN=(()=>{class t{_differs=M(fd);_changeDetectorRef=M(kr);_elementRef=M(_t);_dir=M(gi,{optional:!0});_platform=M(oo);_viewRepeater=M(B$);_coalescedStyleScheduler=M(zhe);_viewportRuler=M(Jp);_stickyPositioningListener=M(Uhe,{optional:!0,skipSelf:!0});_document=M(tn);_data;_onDestroy=new ot;_renderRows;_renderChangeSubscription;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}_trackByFn;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;contentChanged=new Qt;viewChange=new Zn({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;_injector=M(Zt);constructor(){M(new n1("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE",this._dataDiffer=this._differs.find([]).create((r,o)=>this.trackBy?this.trackBy(o.dataIndex,o.data):o)}ngOnInit(){this._setupStickyStyler(),this._viewportRuler.change().pipe(It(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){this._stickyStyler?.destroy(),[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),E3(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,r,(o,i,s)=>this._getEmbeddedViewArgs(o.item,s),o=>o.item.data,o=>{o.operation===m2.INSERTED&&o.context&&this._renderCellTemplateForItem(o.record.item.rowDef,o.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);i.context.$implicit=o.item.data}),this._updateNoDataRow(),this.contentChanged.next(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let o=Ghe(this._headerRowOutlet,"thead");o&&(o.style.display=e.length?"":"none")}let r=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,r,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let o=Ghe(this._footerRowOutlet,"tfoot");o&&(o.style.display=e.length?"":"none")}let r=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,r,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,r),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),o=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...r,...o],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((i,s)=>{this._addStickyColumnStyles([i],this._headerRowDefs[s])}),this._rowDefs.forEach(i=>{let s=[];for(let a=0;a<r.length;a++)this._renderRows[a].rowDef===i&&s.push(r[a]);this._addStickyColumnStyles(s,i)}),o.forEach((i,s)=>{this._addStickyColumnStyles([i],this._footerRowDefs[s])}),Array.from(this._columnDefsByName.values()).forEach(i=>i.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],r=this._cachedRenderRowsMap;if(this._cachedRenderRowsMap=new Map,!this._data)return e;for(let o=0;o<this._data.length;o++){let i=this._data[o],s=this._getRenderRowsForData(i,o,r.get(i));this._cachedRenderRowsMap.has(i)||this._cachedRenderRowsMap.set(i,new WeakMap);for(let a=0;a<s.length;a++){let l=s[a],c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,r,o){return this._getRowDefs(e,r).map(s=>{let a=o&&o.has(s)?o.get(s):[];if(a.length){let l=a.shift();return l.dataIndex=r,l}else return{data:e,rowDef:s,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),UN(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=UN(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=UN(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=UN(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(r=>!r.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(s,a)=>{let l=!!a.getColumnsDiff();return s||l},r=this._rowDefs.reduce(e,!1);r&&this._forceRenderDataRows();let o=this._headerRowDefs.reduce(e,!1);o&&this._forceRenderHeaderRows();let i=this._footerRowDefs.reduce(e,!1);return i&&this._forceRenderFooterRows(),r||o||i}_switchDataSource(e){this._data=[],E3(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;E3(this.dataSource)?e=this.dataSource.connect(this):bs(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=lt(this.dataSource)),this._renderChangeSubscription=e.pipe(It(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,r)=>this._renderRow(this._headerRowOutlet,e,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,r)=>this._renderRow(this._footerRowOutlet,e,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,r){let o=Array.from(r?.columns||[]).map(a=>{let l=this._columnDefsByName.get(a);return l}),i=o.map(a=>a.sticky),s=o.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,i,s,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let r=[];for(let o=0;o<e.viewContainer.length;o++){let i=e.viewContainer.get(o);r.push(i.rootNodes[0])}return r}_getRowDefs(e,r){if(this._rowDefs.length==1)return[this._rowDefs[0]];let o=[];if(this.multiTemplateDataRows)o=this._rowDefs.filter(i=>!i.when||i.when(r,e));else{let i=this._rowDefs.find(s=>s.when&&s.when(r,e))||this._defaultRowDef;i&&o.push(i)}return o.length,o}_getEmbeddedViewArgs(e,r){let o=e.rowDef,i={$implicit:e.data};return{templateRef:o.template,context:i,index:r}}_renderRow(e,r,o,i={}){let s=e.viewContainer.createEmbeddedView(r.template,i,o);return this._renderCellTemplateForItem(r,i),s}_renderCellTemplateForItem(e,r){for(let o of this._getCellTemplates(e))WN.mostRecentCellOutlet&&WN.mostRecentCellOutlet._viewContainer.createEmbeddedView(o,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let r=0,o=e.length;r<o;r++){let s=e.get(r).context;s.count=o,s.first=r===0,s.last=r===o-1,s.even=r%2===0,s.odd=!s.even,this.multiTemplateDataRows?(s.dataIndex=this._renderRows[r].dataIndex,s.renderIndex=r):s.index=this._renderRows[r].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,r=>{let o=this._columnDefsByName.get(r);return e.extractCellTemplate(o)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(r,o)=>r||o.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new WV(this._isNativeHtmlTable,this.stickyCssClass,e,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener,this._injector),(this._dir?this._dir.change:lt()).pipe(It(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let r=this._rowOutlet.viewContainer.length===0;if(r===this._isShowingNoDataRow)return;let o=this._noDataRowOutlet.viewContainer;if(r){let i=o.createEmbeddedView(e.templateRef),s=i.rootNodes[0];i.rootNodes.length===1&&s?.nodeType===this._document.ELEMENT_NODE&&(s.setAttribute("role","row"),s.classList.add(e._contentClassName))}else o.clear();this._isShowingNoDataRow=r,this._changeDetectorRef.markForCheck()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(r,o,i){if(r&1&&(Co(i,YV,5),Co(i,Qb,5),Co(i,Jb,5),Co(i,qN,5),Co(i,Whe,5)),r&2){let s;Er(s=Ir())&&(o._noDataRow=s.first),Er(s=Ir())&&(o._contentColumnDefs=s),Er(s=Ir())&&(o._contentRowDefs=s),Er(s=Ir())&&(o._contentHeaderRowDefs=s),Er(s=Ir())&&(o._contentFooterRowDefs=s)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(r,o){r&2&&dr("cdk-table-fixed-layout",o.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",nt],fixedLayout:[2,"fixedLayout","fixedLayout",nt]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[ut([{provide:oh,useExisting:t},{provide:B$,useClass:HN},{provide:zhe,useClass:fGe},{provide:Uhe,useValue:null}])],ngContentSelectors:uGe,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,o){r&1&&(Ot(cGe),it(0),it(1,1),st(2,dGe,1,0)(3,pGe,7,0)(4,hGe,4,0)),r&2&&(Y(2),kt(o._isServer?2:-1),Y(),kt(o._isNativeHtmlTable?3:4))},dependencies:[vGe,gGe,yGe,wGe],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return t})();function UN(t,n){return t.concat(Array.from(n))}function Ghe(t,n){let e=n.toUpperCase(),r=t.viewContainer.element.nativeElement;for(;r;){let o=r.nodeType===1?r.nodeName:null;if(o===e)return r;if(o==="TABLE")break;r=r.parentNode}return null}var QV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({imports:[Tw]})}return t})();var _Ge=[[["","brnHeaderDef",""]],[["","brnCellDef",""]],[["","brnFooterDef",""]]],kGe=["[brnHeaderDef]","[brnCellDef]","[brnFooterDef]"],bGe=["cdkTable"],CGe=["*",[["","brnNoDataRow",""]]],SGe=["*","[brnNoDataRow]"];function MGe(t,n){if(t&1&&Ve(0,"cdk-header-row"),t&2){let e=xe();$e(e.headerRowClasses)}}function TGe(t,n){if(t&1){let e=gn();X(0,"cdk-row",6),Le("keydown.enter",function(){let o=ze(e).$implicit,i=xe(2);return He(!!i.onRowClick&&i.onRowClick(o))})("click",function(){let o=ze(e).$implicit,i=xe(2);return He(!!i.onRowClick&&i.onRowClick(o))}),re()}if(t&2){let e=xe(2);$e(e.bodyRowClasses),dr("row-interactive",!!e.onRowClick),Pe("tabindex",e.onRowClick?0:-1),Bt("role",e.onRowClick?"button":"row")}}function DGe(t,n){if(t&1&&st(0,TGe,1,6,"cdk-row",5),t&2){let e=xe();Pe("cdkRowDefColumns",e.displayedColumns)}}function EGe(t,n){t&1&&it(0,1)}var JV=(()=>{class t extends qV{template;constructor(){let e=M(Gn);super(e),this.template=e}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnCellDef",""]],exportAs:["brnCellDef"],features:[Mn]})}return t})(),IGe=(()=>{class t extends ZV{template;constructor(){let e=M(Gn);super(e),this.template=e}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnFooterDef",""]],exportAs:["brnFooterDef"],features:[Mn]})}return t})(),e9=(()=>{class t extends KV{template;constructor(){let e=M(Gn);super(e),this.template=e}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnHeaderDef",""]],exportAs:["brnHeaderDef"],features:[Mn]})}return t})(),Wf=(()=>{class t{get columnDef(){return this._columnDef}get cell(){return this._columnDef.cell}_name="";get name(){return this._name}set name(e){this._name=e,this._columnDef&&(this._columnDef.name=e)}class=Z("");_columnDef;_cellDef;_footerCellDef;_headerCellDef;ngAfterContentChecked(){this._columnDef.name=this.name,this._cellDef&&(this._columnDef.cell=this._cellDef),this._headerCellDef&&(this._columnDef.headerCell=this._headerCellDef),this._footerCellDef&&(this._columnDef.footerCell=this._footerCellDef)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-column-def"]],contentQueries:function(r,o,i){if(r&1&&(Co(i,JV,7),Co(i,IGe,7),Co(i,e9,7)),r&2){let s;Er(s=Ir())&&(o._cellDef=s.first),Er(s=Ir())&&(o._footerCellDef=s.first),Er(s=Ir())&&(o._headerCellDef=s.first)}},viewQuery:function(r,o){if(r&1&&Em(Qb,7),r&2){let i;Er(i=Ir())&&(o._columnDef=i.first)}},inputs:{name:"name",class:[1,"class"]},ngContentSelectors:kGe,decls:4,vars:1,consts:[[3,"cdkColumnDef"]],template:function(r,o){r&1&&(Ot(_Ge),Tm(0,0),it(1),it(2,1),it(3,2),Dm()),r&2&&Pe("cdkColumnDef",o.name)},dependencies:[QV,Qb],encapsulation:2,changeDetection:0})}return t})();var t9=(()=>{class t{_cdkTable;dataSource=[];fixedLayout=!1;multiTemplateDataRows=!1;displayedColumns=[];_trackBy;get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e,this._cdkTable&&(this._cdkTable.trackBy=this._trackBy)}contentChanged=new Qt;customTemplateDataRows=!1;onRowClick;stickyHeader=!1;tableClasses="";headerRowClasses="";bodyRowClasses="";columnDefComponents;rowDefs;ngAfterContentInit(){this.columnDefComponents.forEach(e=>{this._cdkTable&&e.cell&&this._cdkTable.addColumnDef(e.columnDef)}),this.rowDefs.forEach(e=>{this._cdkTable&&this._cdkTable.addRowDef(e)})}setTableClasses({table:e,headerRow:r,bodyRow:o}){e&&(this.tableClasses=e),r&&(this.headerRowClasses=r),o&&(this.bodyRowClasses=o)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ie({type:t,selectors:[["brn-table"]],contentQueries:function(r,o,i){if(r&1&&(Co(i,Wf,4),Co(i,Jb,4)),r&2){let s;Er(s=Ir())&&(o.columnDefComponents=s),Er(s=Ir())&&(o.rowDefs=s)}},viewQuery:function(r,o){if(r&1&&Em(bGe,7,KN),r&2){let i;Er(i=Ir())&&(o._cdkTable=i.first)}},inputs:{dataSource:"dataSource",fixedLayout:[2,"fixedLayout","fixedLayout",nt],multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",nt],displayedColumns:"displayedColumns",trackBy:"trackBy",customTemplateDataRows:[2,"customTemplateDataRows","customTemplateDataRows",nt],onRowClick:"onRowClick",stickyHeader:[2,"stickyHeader","stickyHeader",nt],tableClasses:"tableClasses",headerRowClasses:"headerRowClasses",bodyRowClasses:"bodyRowClasses"},outputs:{contentChanged:"contentChanged"},features:[ut([Bue(()=>t)])],ngContentSelectors:SGe,decls:6,vars:8,consts:[["cdkTable",""],[3,"contentChanged","dataSource","fixedLayout","multiTemplateDataRows"],[3,"class",4,"cdkHeaderRowDef","cdkHeaderRowDefSticky"],[3,"tabindex","row-interactive","class"],["cdkNoDataRow",""],[3,"tabindex","row-interactive","class","keydown.enter","click",4,"cdkRowDef","cdkRowDefColumns"],[3,"keydown.enter","click","tabindex"]],template:function(r,o){if(r&1){let i=gn();Ot(CGe),X(0,"cdk-table",1,0),Le("contentChanged",function(){return ze(i),He(o.contentChanged.emit())}),it(2),st(3,MGe,1,2,"cdk-header-row",2)(4,DGe,1,1,"cdk-row",3)(5,EGe,1,0,"ng-template",4),re()}r&2&&($e(o.tableClasses),Pe("dataSource",o.dataSource)("fixedLayout",o.fixedLayout)("multiTemplateDataRows",o.multiTemplateDataRows),Y(3),Pe("cdkHeaderRowDef",o.displayedColumns)("cdkHeaderRowDefSticky",o.stickyHeader),Y(),kt(o.customTemplateDataRows?-1:4))},dependencies:[QV,KN,Jb,Khe,qhe,qN,YV],encapsulation:2,changeDetection:0})}return t})();var Zhe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({imports:[Wf,t9]})}return t})();var oy=class t{_tableClassesSettable=Pue({host:!0,optional:!0});constructor(){this._tableClassesSettable?.setTableClasses({table:"flex flex-col text-sm [&_cdk-row:last-child]:border-0",headerRow:"flex min-w-[100%] w-fit border-b border-border [&.cdk-table-sticky]:bg-background [&.cdk-table-sticky>*]:z-[101] [&.cdk-table-sticky]:before:z-0 [&.cdk-table-sticky]:before:block [&.cdk-table-sticky]:hover:before:bg-muted/50 [&.cdk-table-sticky]:before:absolute [&.cdk-table-sticky]:before:inset-0",bodyRow:"flex min-w-[100%] w-fit border-b border-border transition-[background-color] hover:bg-muted/50 [&:has([role=checkbox][aria-checked=true])]:bg-muted"})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmTable",""],["brn-table","hlm",""]]})};var RGe=["*"];function OGe(t,n){t&1&&it(0)}function FGe(t,n){if(t&1&&(X(0,"span",1),tr(1,2),re()),t&2){xe();let e=pr(1);Y(),Pe("ngTemplateOutlet",e)}}function PGe(t,n){if(t&1&&tr(0,2),t&2){xe();let e=pr(1);Pe("ngTemplateOutlet",e)}}var iy=class t{_columnDef=M(Wf,{optional:!0});truncate=Z(!1,{transform:nt});userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("flex flex-none p-4 items-center [&:has([role=checkbox])]:pr-0",this._columnDef?.class(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-td"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{truncate:[1,"truncate"],userClass:[1,"class","userClass"]},ngContentSelectors:RGe,decls:4,vars:1,consts:[["content",""],[1,"flex-1","truncate"],[3,"ngTemplateOutlet"]],template:function(e,r){e&1&&(Ot(),st(0,OGe,1,0,"ng-template",null,0,mo)(2,FGe,2,1,"span",1)(3,PGe,1,1,"ng-container",2)),e&2&&(Y(2),kt(r.truncate()?2:3))},dependencies:[gc],encapsulation:2,changeDetection:0})};var LGe=["*"];function $Ge(t,n){t&1&&it(0)}function VGe(t,n){if(t&1&&(X(0,"span",1),tr(1,2),re()),t&2){xe();let e=pr(1);Y(),Pe("ngTemplateOutlet",e)}}function jGe(t,n){if(t&1&&tr(0,2),t&2){xe();let e=pr(1);Pe("ngTemplateOutlet",e)}}var sy=class t{_columnDef=M(Wf,{optional:!0});truncate=Z(!1,{transform:nt});userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("flex flex-none h-12 px-4 text-sm items-center font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",this._columnDef?.class(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-th"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{truncate:[1,"truncate"],userClass:[1,"class","userClass"]},ngContentSelectors:LGe,decls:4,vars:1,consts:[["content",""],[1,"flex-1","truncate"],[3,"ngTemplateOutlet"]],template:function(e,r){e&1&&(Ot(),st(0,$Ge,1,0,"ng-template",null,0,mo)(2,VGe,2,1,"span",1)(3,jGe,1,1,"ng-container",2)),e&2&&(Y(2),kt(r.truncate()?2:3))},dependencies:[gc],encapsulation:2,changeDetection:0})};var ZN=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({})};var n9=class{_box;_destroyed=new ot;_resizeSubject=new ot;_resizeObserver;_elementObservables=new Map;constructor(n){this._box=n,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new en(e=>{let r=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),r.unsubscribe(),this._elementObservables.delete(n)}}).pipe(kn(e=>e.some(r=>r.target===n)),om({bufferSize:1,refCount:!0}),It(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Yhe=(()=>{class t{_cleanupErrorListener;_observers=new Map;_ngZone=M(Rt);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(e,r){let o=r?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new n9(o)),this._observers.get(o).observe(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Jhe=(()=>{class t{_root=M(ay);_elementRef=M(_t);contentFor=Z.required({alias:"brnTabsContent"});_isSelected=ae(()=>this._root.$activeTab()===this.contentFor());contentId=ae(()=>`brn-tabs-content-${this.contentFor()}`);labelId=ae(()=>`brn-tabs-label-${this.contentFor()}`);constructor(){Tt(()=>{let e=this.contentFor();En(()=>this._root.registerContent(e,this))})}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTabsContent",""]],hostAttrs:["role","tabpanel","tabindex","0"],hostVars:3,hostBindings:function(r,o){r&2&&(Xr("id",o.contentId())("hidden",o._isSelected()===!1),Bt("aria-labelledby",o.labelId()))},inputs:{contentFor:[1,"brnTabsContent","contentFor"]},exportAs:["brnTabsContent"]})}return t})(),ay=(()=>{class t{orientation=Z("horizontal");$orientation=this.orientation;direction=Z("ltr");$direction=this.direction;_activeTab=si(void 0,{alias:"brnTabs"});$activeTab=this._activeTab.asReadonly();activationMode=Z("automatic");$activationMode=this.activationMode;tabActivated=Vn();_tabs=Ze({});$tabs=this._tabs.asReadonly();registerTrigger(e,r){this._tabs.update(o=>ht(le({},o),{[e]:{trigger:r,content:o[e]?.content}}))}registerContent(e,r){this._tabs.update(o=>ht(le({},o),{[e]:{trigger:o[e]?.trigger,content:r}}))}emitTabActivated(e){this.tabActivated.emit(e)}setActiveTab(e){this._activeTab.set(e)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTabs",""]],hostVars:2,hostBindings:function(r,o){r&2&&Bt("data-orientation",o.orientation())("dir",o.direction())},inputs:{orientation:[1,"orientation"],direction:[1,"direction"],_activeTab:[1,"brnTabs","_activeTab"],activationMode:[1,"activationMode"]},outputs:{_activeTab:"brnTabsChange",tabActivated:"tabActivated"},exportAs:["brnTabs"]})}return t})(),D2=(()=>{class t{elementRef=M(_t);_root=M(ay);_orientation=this._root.$orientation;triggerFor=Z.required({alias:"brnTabsTrigger"});selected=ae(()=>this._root.$activeTab()===this.triggerFor());contentId=ae(()=>`brn-tabs-content-${this.triggerFor()}`);labelId=ae(()=>`brn-tabs-label-${this.triggerFor()}`);disabled=!1;constructor(){Tt(()=>{let e=this.triggerFor();En(()=>this._root.registerTrigger(e,this))})}focus(){this.elementRef.nativeElement.focus(),this._root.$activationMode()==="automatic"&&this.activate()}activate(){this.triggerFor()&&(this._root.setActiveTab(this.triggerFor()),this._root.emitTabActivated(this.triggerFor()))}get key(){return this.triggerFor()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["button","brnTabsTrigger",""]],hostAttrs:["type","button","role","tab"],hostVars:7,hostBindings:function(r,o){r&1&&Le("click",function(){return o.activate()}),r&2&&(Xr("id",o.labelId())("tabindex",o.selected()?"0":"-1"),Bt("aria-selected",o.selected())("aria-controls",o.contentId())("data-state",o.selected()?"active":"inactive")("data-orientation",o._orientation())("data-disabled",o.disabled?"":void 0))},inputs:{triggerFor:[1,"brnTabsTrigger","triggerFor"],disabled:"disabled"},exportAs:["brnTabsTrigger"]})}return t})(),efe=(()=>{class t{_root=M(ay);_orientation=this._root.$orientation;_direction=this._root.$direction;_activeTab=this._root.$activeTab;_tabs=this._root.$tabs;_elementRef=M(_t);_keyDownListener=ol(this._elementRef.nativeElement,"keydown");_keyManager;triggers=Sm(D2,{descendants:!0});ngAfterContentInit(){this._keyManager=new Af(this.triggers()).withHorizontalOrientation(this._direction()).withHomeAndEnd().withPageUpDown().withWrap(),this._keyDownListener.pipe(Vr(1)).subscribe(()=>{let e=this._activeTab(),r=this._tabs(),o=0;if(e){let i=r[e];i&&(o=this.triggers().indexOf(i.trigger))}this._keyManager?.setActiveItem(o)}),this._keyDownListener.subscribe(e=>{"key"in e&&(this._orientation()==="horizontal"&&(e.key==="ArrowUp"||e.key==="ArrowDown")||this._orientation()==="vertical"&&(e.key==="ArrowLeft"||e.key==="ArrowRight"))||this._keyManager?.onKeydown(e)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,selectors:[["","brnTabsList",""]],contentQueries:function(r,o,i){r&1&&ts(i,o.triggers,D2,5),r&2&&zr()},hostAttrs:["role","tablist"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("aria-orientation",o._orientation())("data-orientation",o._orientation())},exportAs:["brnTabsList"]})}return t})();var Qhe=y2({passive:!0}),GGe=650,WGe=100,tfe=(()=>{class t{_scrollDistance=0;_selectedIndexChanged=!1;_root=M(ay);_activeTab=this._root.$activeTab;_tabs=this._root.$tabs;_destroyed=new ot;_showPaginationControls=Ze(!1);_disableScrollAfter=!0;_disableScrollBefore=!0;_tabLabelCount;_scrollDistanceChanged;_keyManager;_currentTextContent;_stopScrolling=new ot;disablePagination=Z(!1,{transform:nt});_selectedIndex=ae(()=>{let e=this._activeTab(),r=this._tabs(),o=0;if(e&&this._items()){let i=r[e];i&&(o=this._items().indexOf(i.trigger))}return o});selectFocusedIndex=Vn();indexFocused=Vn();_sharedResizeObserver=M(Yhe);_injector=M(Zt);_elementRef=M(_t);_changeDetectorRef=M(kr);_viewportRuler=M(Jp);_dir=M(gi,{optional:!0});_ngZone=M(Rt);_platform=M(oo);_animationMode=M(bm,{optional:!0});constructor(){this._ngZone.runOutsideAngular(()=>{ol(this._elementRef.nativeElement,"mouseleave").pipe(It(this._destroyed)).subscribe(()=>{this._stopInterval()})}),Tt(()=>{let e=this._selectedIndex();e!==0&&(this._selectedIndexChanged=!0,this._keyManager&&this._keyManager.updateActiveItem(e))})}ngAfterViewInit(){ol(this._previousPaginator().nativeElement,"touchstart",Qhe).pipe(It(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),ol(this._nextPaginator().nativeElement,"touchstart",Qhe).pipe(It(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let e=this._dir?this._dir.change:lt("ltr"),r=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(ma(32),It(this._destroyed)),o=this._viewportRuler.change(150).pipe(It(this._destroyed)),i=()=>{this.updatePagination()};this._keyManager=new Af(this._items()).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex()),yi(i,{injector:this._injector}),rc(e,o,r,this._itemsChanges,this._itemsResized()).pipe(It(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),i()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?ii:this._itemsChanges.pipe(ga(this._items()),jr(e=>new en(r=>this._ngZone.runOutsideAngular(()=>{let o=new ResizeObserver(i=>r.next(i));for(let i of e)o.observe(i.elementRef.nativeElement);return()=>{o.disconnect()}}))),im(1),kn(e=>e.some(r=>r.contentRect.width>0&&r.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!==this._items().length&&(this.updatePagination(),this._tabLabelCount=this._items().length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex()),this._checkScrollingControls(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!$r(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this._selectedIndex()){let r=this._items()[this.focusIndex];r&&!r.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex??0:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items()?!!this._items()[e]:!0}_setTabFocus(e){if(this._showPaginationControls()&&this._scrollToLabel(e),this._items()?.length){this._items()[e].focus();let r=this._tabListContainer().nativeElement;this._getLayoutDirection()==="ltr"?r.scrollLeft=0:r.scrollLeft=r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination())return;let e=this.scrollDistance,r=this._getLayoutDirection()==="ltr"?-e:e;this._tabList().nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer().nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let r=this._tabListContainer().nativeElement.offsetWidth,o=(e==="before"?-1:1)*r/3;return this._scrollTo(this._scrollDistance+o)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination())return;let r=this._items()?this._items()[e]:null;if(!r)return;let o=this._tabListContainer().nativeElement.offsetWidth,{offsetLeft:i,offsetWidth:s}=r.elementRef.nativeElement,a,l;this._getLayoutDirection()==="ltr"?(a=i,l=a+s):(l=this._tabListInner().nativeElement.offsetWidth-i,a=l-s);let c=this.scrollDistance,u=this.scrollDistance+o;a<c?this.scrollDistance-=c-a:l>u&&(this.scrollDistance+=Math.min(l-u,a-c))}_checkPaginationEnabled(){if(this.disablePagination())this._showPaginationControls.set(!1);else{let e=this._tabListInner().nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls()&&this._changeDetectorRef.markForCheck(),this._showPaginationControls.set(e)}}_checkScrollingControls(){this.disablePagination()?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance===0,this._disableScrollAfter=this.scrollDistance===this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner().nativeElement.scrollWidth,r=this._tabListContainer().nativeElement.offsetWidth;return e-r||0}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,r){r&&r.button!==null&&r.button!==0||(this._stopInterval(),sd(GGe,WGe).pipe(It(rc(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:o,distance:i}=this._scrollHeader(e);(i===0||i>=o)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination())return{maxScrollDistance:0,distance:0};let r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}static \u0275fac=function(r){return new(r||t)};static \u0275dir=me({type:t,inputs:{disablePagination:[1,"disablePagination"]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}})}return t})();var r9=class t{contentFor=Z.required({alias:"hlmTabsContent"});userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmTabsContent",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{contentFor:[1,"hlmTabsContent","contentFor"],userClass:[1,"class","userClass"]},features:[Pt([{directive:Jhe,inputs:["brnTabsContent","hlmTabsContent"]}])]})};var qGe=["*"],i9=lr("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",{variants:{orientation:{horizontal:"h-10 space-x-1",vertical:"mt-2 flex-col h-fit space-y-1"}},defaultVariants:{orientation:"horizontal"}}),o9=class t{orientation=Z("horizontal");userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe(i9({orientation:this.orientation()}),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-tabs-list"]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{orientation:[1,"orientation"],userClass:[1,"class","userClass"]},features:[Pt([efe])],ngContentSelectors:qGe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var KGe=["tabListContainer"],ZGe=["tabList"],XGe=["tabListInner"],YGe=["nextPaginator"],QGe=["previousPaginator"],JGe=["*"],YN=class t extends tfe{_items=Sm(D2,{descendants:!1});_itemsChanges=Ib(this._items);_tabListContainer=bo.required("tabListContainer");_tabList=bo.required("tabList");_tabListInner=bo.required("tabListInner");_nextPaginator=bo.required("nextPaginator");_previousPaginator=bo.required("previousPaginator");userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("flex overflow-hidden relative gap-1 flex-shrink-0",this.userClass()));tabLisClass=Z("",{alias:"class"});_tabListClass=ae(()=>Xe(i9(),this.tabLisClass()));paginationButtonClass=Z("",{alias:"class"});_paginationButtonClass=ae(()=>Xe("relative z-[2] select-none disabled:cursor-default",kV({variant:"ghost",size:"icon"}),this.paginationButtonClass()));_itemSelected(n){n.preventDefault()}static \u0275fac=(()=>{let n;return function(r){return(n||(n=Kr(t)))(r||t)}})();static \u0275cmp=Ie({type:t,selectors:[["hlm-paginated-tabs-list"]],contentQueries:function(e,r,o){e&1&&ts(o,r._items,D2,4),e&2&&zr()},viewQuery:function(e,r){e&1&&(So(r._tabListContainer,KGe,5),So(r._tabList,ZGe,5),So(r._tabListInner,XGe,5),So(r._nextPaginator,YGe,5),So(r._previousPaginator,QGe,5)),e&2&&zr(5)},hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{userClass:[1,"class","userClass"],tabLisClass:[1,"class","tabLisClass"],paginationButtonClass:[1,"class","paginationButtonClass"]},features:[ut([sr({lucideChevronRight:C3,lucideChevronLeft:Lue})]),Mn],ngContentSelectors:JGe,decls:13,vars:16,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["data-pagination","previous","type","button","aria-hidden","true","tabindex","-1",3,"click","mousedown","touchend","disabled"],["hlm","","size","base","name","lucideChevronLeft"],[1,"z-[1]","flex","grow","overflow-hidden",3,"keydown"],["role","tablist",1,"relative","grow","transition-transform",3,"cdkObserveContent"],["data-pagination","next","type","button","aria-hidden","true","tabindex","-1",3,"click","mousedown","touchend","disabled"],["hlm","","size","base","name","lucideChevronRight"]],template:function(e,r){if(e&1){let o=gn();Ot(),X(0,"button",5,0),Le("click",function(){return ze(o),He(r._handlePaginatorClick("before"))})("mousedown",function(s){return ze(o),He(r._handlePaginatorPress("before",s))})("touchend",function(){return ze(o),He(r._stopInterval())}),Ve(2,"ng-icon",6),re(),X(3,"div",7,1),Le("keydown",function(s){return ze(o),He(r._handleKeydown(s))}),X(5,"div",8,2),Le("cdkObserveContent",function(){return ze(o),He(r._onContentChanges())}),X(7,"div",null,3),it(9),re()()(),X(10,"button",9,4),Le("click",function(){return ze(o),He(r._handlePaginatorClick("after"))})("mousedown",function(s){return ze(o),He(r._handlePaginatorPress("after",s))})("touchend",function(){return ze(o),He(r._stopInterval())}),Ve(12,"ng-icon",10),re()}e&2&&($e(r._paginationButtonClass()),dr("flex",r._showPaginationControls())("hidden",!r._showPaginationControls()),Pe("disabled",r._disableScrollBefore||null),Y(7),$e(r._tabListClass()),Y(3),$e(r._paginationButtonClass()),dr("flex",r._showPaginationControls())("hidden",!r._showPaginationControls()),Pe("disabled",r._disableScrollAfter||null))},dependencies:[U$,ar,po],encapsulation:2})};var s9=class t{triggerFor=Z.required({alias:"hlmTabsTrigger"});userClass=Z("",{alias:"class"});_computedClass=ae(()=>Xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=me({type:t,selectors:[["","hlmTabsTrigger",""]],hostVars:2,hostBindings:function(e,r){e&2&&$e(r._computedClass())},inputs:{triggerFor:[1,"hlmTabsTrigger","triggerFor"],userClass:[1,"class","userClass"]},features:[Pt([{directive:D2,inputs:["brnTabsTrigger","hlmTabsTrigger","disabled","disabled"]}])]})};var eWe=["*"],a9=class t{tab=Z.required();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["hlm-tabs"]],inputs:{tab:[1,"tab"]},features:[Pt([{directive:ay,inputs:["orientation","orientation","direction","direction","activationMode","activationMode","brnTabs","tab"],outputs:["tabActivated","tabActivated"]}])],ngContentSelectors:eWe,decls:1,vars:0,template:function(e,r){e&1&&(Ot(),it(0))},encapsulation:2})};var QN=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Et({type:t});static \u0275inj=Dt({imports:[YN]})};function tWe(t,n){t&1&&Ve(0,"hlm-th")}function nWe(t,n){t&1&&Ve(0,"ng-icon",19)}function rWe(t,n){t&1&&Ve(0,"ng-icon",20)}function oWe(t,n){t&1&&Ve(0,"ng-icon",21)}function iWe(t,n){if(t&1&&(X(0,"hlm-td"),st(1,nWe,1,0,"ng-icon",19)(2,rWe,1,0,"ng-icon",20)(3,oWe,1,0,"ng-icon",21),re()),t&2){let e,r=n.$implicit,o=xe(3);Y(),kt((e=o.node().ip)===r.srcIP?1:e===r.dstIP?2:3)}}function sWe(t,n){t&1&&(X(0,"hlm-th"),ue(1),Te(2,"translate"),re()),t&2&&(Y(),ct(De(2,1,"SOURCE")))}function aWe(t,n){if(t&1&&(X(0,"hlm-td"),ue(1),re()),t&2){let e=n.$implicit;Y(),Ye(" ",e.srcIP," ")}}function lWe(t,n){t&1&&(X(0,"hlm-th"),ue(1),Te(2,"translate"),re()),t&2&&(Y(),ct(De(2,1,"DESTINATION")))}function cWe(t,n){if(t&1&&(X(0,"hlm-td"),ue(1),re()),t&2){let e=n.$implicit;Y(),Ye(" ",e.dstIP," ")}}function uWe(t,n){t&1&&(X(0,"hlm-th"),ue(1),Te(2,"translate"),re()),t&2&&(Y(),ct(De(2,1,"BYTES")))}function dWe(t,n){if(t&1&&(X(0,"hlm-td",22),ue(1),re()),t&2){let e=n.$implicit;Y(),Ye(" ",e.totalBytes," ")}}function pWe(t,n){t&1&&(X(0,"hlm-th"),ue(1),Te(2,"translate"),re()),t&2&&(Y(),ct(De(2,1,"DATA")))}function hWe(t,n){if(t&1&&(X(0,"hlm-td",23),ue(1),re()),t&2){let e=n.$implicit;Y(),Ye(" ",e.payload," ")}}function fWe(t,n){if(t&1&&(X(0,"brn-table",0)(1,"brn-column-def",10),st(2,tWe,1,0,"hlm-th",11)(3,iWe,4,1,"hlm-td",12),re(),X(4,"brn-column-def",13),st(5,sWe,3,3,"hlm-th",11)(6,aWe,2,1,"hlm-td",12),re(),X(7,"brn-column-def",14),st(8,lWe,3,3,"hlm-th",11)(9,cWe,2,1,"hlm-td",12),re(),X(10,"brn-column-def",15),st(11,uWe,3,3,"hlm-th",11)(12,dWe,2,1,"hlm-td",16),re(),X(13,"brn-column-def",17),st(14,pWe,3,3,"hlm-th",11)(15,hWe,2,1,"hlm-td",18),re()()),t&2){let e=xe(2);Pe("dataSource",e.node().traffic.slice(-50))("displayedColumns",e.displayedColumns())("onRowClick",e.viewPacket.bind(e))}}function mWe(t,n){t&1&&(Ve(0,"ng-icon",24),X(1,"p",25),ue(2),Te(3,"translate"),re()),t&2&&(Y(2),Ye(" ",De(3,1,"NO_TRAFFIC")," "))}function gWe(t,n){t&1&&Ve(0,"hlm-menu-separator")}function vWe(t,n){if(t&1&&(X(0,"hlm-option",8),ue(1),re()),t&2){let e=xe().$implicit;Pe("value",e),Y(),ct(e.name)}}function wWe(t,n){if(t&1&&st(0,gWe,1,0,"hlm-menu-separator")(1,vWe,2,2,"hlm-option",8),t&2){let e=n.$implicit;kt(e==="---"?0:1)}}function yWe(t,n){t&1&&(X(0,"hlm-option",5),ue(1),Te(2,"translate"),re()),t&2&&(Y(),Ye(" ",De(2,1,"NO_COMMANDS")," "))}function xWe(t,n){if(t&1&&(X(0,"hlm-option",8),ue(1),re()),t&2){let e=n.$implicit;Pe("value",e.ip),Y(),ct(e.ip)}}function _We(t,n){if(t&1){let e=gn();st(0,fWe,16,3,"brn-table",0)(1,mWe,4,3),X(2,"div",1)(3,"label",2),ue(4),Te(5,"translate"),X(6,"brn-select",3),Te(7,"translate"),Oi("ngModelChange",function(o){ze(e);let i=xe();return ns(i.command,o)||(i.command=o),He(o)}),X(8,"hlm-select-trigger",4),Ve(9,"hlm-select-value"),re(),X(10,"hlm-select-content"),Go(11,wWe,2,1,null,null,Ds,!1,yWe,3,3,"hlm-option",5),re()()(),X(14,"label",6),ue(15),Te(16,"translate"),X(17,"brn-select",7),Te(18,"translate"),Oi("ngModelChange",function(o){ze(e);let i=xe();return ns(i.target,o)||(i.target=o),He(o)}),X(19,"hlm-select-trigger",4),Ve(20,"hlm-select-value"),re(),X(21,"hlm-select-content"),Go(22,xWe,2,2,"hlm-option",8,Ds),re()()(),X(24,"button",9),Le("click",function(){ze(e);let o=xe();return He(o.execute())}),ue(25),Te(26,"translate"),re()()}if(t&2){let e=xe();kt(e.node().traffic.length>0?0:1),Y(4),Ye(" ",De(5,11,"COMMAND")," "),Y(2),Ri("ngModel",e.command),Pe("placeholder",De(7,13,"SELECT_COMMAND")),Y(5),Wo(e.commands),Y(4),Ye(" ",De(16,15,e.multipleTargets()?"TARGETS":"TARGET")," "),Y(2),Ri("ngModel",e.target),Pe("placeholder",De(18,17,e.multipleTargets()?"TARGETS_IP":"TARGET_IP"))("multiple",e.multipleTargets()),Y(5),Wo(e.connectedNodes),Y(2),Pe("disabled",!(e.command()&&e.target())),Y(),Ye(" ",De(26,19,"LAUNCH_COMMAND")," ")}}function kWe(t,n){t&1&&(Ve(0,"ng-icon",26),X(1,"p",27),ue(2),Te(3,"translate"),re()),t&2&&(Y(2),Ye(" ",De(3,1,"NO_CONNECTED_DEVICES")," "))}function bWe(t,n){if(t&1){let e=gn();Ve(0,"ng-icon",28),X(1,"p",27),ue(2),Te(3,"translate"),re(),X(4,"button",29),Le("click",function(){ze(e);let o=xe(2);return He(o.connect())}),ue(5),Te(6,"translate"),re()}if(t&2){let e=xe(2);Y(2),Ye(" ",De(3,3,"NO_ROUTER")," "),Y(2),Pe("disabled",!e.canConnect),Y(),Ye(" ",De(6,5,"CONNECT")," ")}}function CWe(t,n){if(t&1&&st(0,kWe,4,3)(1,bWe,7,7),t&2){let e=xe();kt(e.NodeType.RouterTypes.includes(e.node().type)?0:1)}}var JN=class t{dialog=M(Ef);network=M(Bo);node=Z.required();NodeType=Kn;displayedColumns=ae(()=>["icon","source","destination","size","data"]);command=si(null);target=si(null);multipleTargets=ae(()=>this.command()?.multiple??!1);get canConnect(){return this.network.router!==void 0}get commands(){let n=this.node().generator.internalCommands,e=this.node().generator.externalCommands;return n.length>0&&e.length>0?[...n,"---",...e]:[...n,...e]}get connectedNodes(){return this.network.getConnectedNodes(this.node().mac)}constructor(){Tt(()=>{this.multipleTargets()?this.target.update(n=>n&&!Array.isArray(n)?[n]:n):this.target.update(n=>n&&Array.isArray(n)?n[0]:n)})}ngOnChanges(n){this.command.set(null),this.target.set(null)}connect(){this.node().connect(this.network.router)}viewPacket(n){this.dialog.open(zN,{context:{packet:n}})}execute(){switch(this.command().id){case"ping":this.node().generator.ping(this.target());break;case"threeWayHandshake":this.node().generator.threeWayHandshake(this.target(),80,80);break;default:this.node().generator.execute(this.command().id,...Array.isArray(this.target())?this.target():[this.target()]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ie({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4"],inputs:{node:[1,"node"],command:[1,"command"],target:[1,"target"]},outputs:{command:"commandChange",target:"targetChange"},features:[ut([sr({lucideForward:Hue,lucideHourglass:Uue,lucideUnplug:S3,lucideRepeat:Wue,lucideReply:que,lucideTrafficCone:Yue})]),Dr],decls:2,vars:1,consts:[["hlm","","stickyHeader","",1,"block","max-h-64","min-h-44","overflow-auto","rounded-md","border","border-border",3,"dataSource","displayedColumns","onRowClick"],[1,"flex","w-[584px]","flex-row","items-center","justify-end","gap-2"],["hlmLabel","",1,"w-40"],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder"],[1,"w-full"],["disabled","",1,"px-2"],["hlmLabel","",1,"grow"],[1,"!mt-2","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","multiple"],[3,"value"],["hlmBtn","",1,"self-end",3,"click","disabled"],["name","icon",1,"w-12","pointer-events-none"],[4,"brnHeaderDef"],[4,"brnCellDef"],["name","source",1,"w-28","pointer-events-none"],["name","destination",1,"w-28","pointer-events-none"],["name","size",1,"w-[86px]","pointer-events-none"],["class","justify-center",4,"brnCellDef"],["name","data",1,"w-56","pointer-events-none"],["truncate","",4,"brnCellDef"],["name","lucideReply","size","1rem",1,"text-red-600","dark:text-red-400"],["name","lucideForward","size","1rem",1,"text-green-600","dark:text-green-400"],["name","lucideRepeat","size","1rem",1,"text-yellow-600","dark:text-yellow-400"],[1,"justify-center"],["truncate",""],["name","lucideTrafficCone","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"mb-4","w-96","self-center","text-center","text-sm","text-muted-foreground"],["name","lucideHourglass","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"w-96","self-center","text-center","text-sm","text-muted-foreground"],["name","lucideUnplug","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],["hlmBtn","",3,"click","disabled"]],template:function(e,r){e&1&&st(0,_We,27,21)(1,CWe,2,1),e&2&&kt(r.node().connected?0:1)},dependencies:[Cr,Wu,Gu,ec,ao,To,Of,da,qs,Ku,Zhe,JV,Wf,e9,t9,Ja,Qa,jw,Bf,Ya,el,Xi,ys,Zs,Ks,pa,ZN,oy,sy,iy,QN,ar],encapsulation:2})};function SWe(t,n){t&1&&(X(0,"button",8),Ve(1,"ng-icon",11),ue(2),Te(3,"translate"),re()),t&2&&(Y(2),Ye(" ",De(3,1,"PHANTOM_ATTACKER")," "))}var eA=class t{constructor(n){this.cdr=n}node=Z.required();NodeType=Kn;_loaded=!1;ngAfterViewInit(){this._loaded=!0,this.cdr.detectChanges()}getAnimationData(n){return n&&!n.isActivated||!this._loaded?"_":n.activatedRoute.snapshot.url[0]?.path??"_"}static \u0275fac=function(e){return new(e||t)(qt(kr))};static \u0275cmp=Ie({type:t,selectors:[["app-panel-node"]],hostAttrs:[1,"fixed","right-5","top-1/2","flex","flex-col","max-h-[calc(100%-2.5rem)]","min-w-[512px]","max-w-[calc(100%-2.5rem)]","-translate-y-1/2","rounded-xl","overflow-hidden"],inputs:{node:[1,"node"]},features:[ut([sr({lucideGhost:Cw,lucideX:M3})]),Pt([T2])],decls:18,vars:10,consts:[["outlet","outlet"],["routerLink","/","hlmDialogClose",""],["name","lucideX","size","1rem"],["hlmCardHeader",""],["hlmCardTitle",""],["hlmCardDescription",""],[1,"mx-6","mb-4","inline-flex","h-10","items-center","justify-center","space-x-1","rounded-md","bg-muted","p-1","text-muted-foreground"],["routerLink","network-traffic","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["routerLink","attack","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","gap-1","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["routerLink","configuration","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["hlmCardContent","",1,"overflow-scroll"],["name","lucideGhost","size","1rem"]],template:function(e,r){if(e&1&&(X(0,"button",1),Ve(1,"ng-icon",2),re(),X(2,"div",3)(3,"h3",4),ue(4),re(),X(5,"p",5),ue(6),re()(),X(7,"div",6)(8,"button",7),ue(9),Te(10,"translate"),re(),st(11,SWe,4,3,"button",8),X(12,"button",9),ue(13),Te(14,"translate"),re()(),X(15,"div",10),Ve(16,"router-outlet",null,0),re()),e&2){let o=pr(17);Y(4),ct(r.node().name),Y(2),ct(r.node().ip),Y(3),Ye(" ",De(10,6,"NETWORK_TRAFFIC")," "),Y(2),kt(r.NodeType.AttackerTypes.includes(r.node().type)?11:-1),Y(2),Ye(" ",De(14,8,"CONFIGURATION")," "),Y(2),Pe("@fadeAnimation",r.getAnimationData(o))}},dependencies:[Cr,Fx,Wm,L1,gF,ao,To,Ja,ry,Kb,Zb,qb,Wb,p2,ar],encapsulation:2,data:{animation:[Nhe]}})};var eC=(t,n)=>{let e=M(Bo),r=t.params.mac;return r||(r=t.parent.params.mac),e.getNode(r)};var nfe=[{path:"",title:"IoT Simulator",component:BN},{path:":mac",canActivate:[Rhe],resolve:{node:eC},title:"Dispositivo",component:eA,children:[{path:"network-traffic",resolve:{node:eC},title:"Tr\xE1fico de red",component:JN},{path:"attack",canActivate:[Ahe],resolve:{node:eC},title:"Phantom Attacker",component:$N},{path:"configuration",resolve:{node:eC},title:"Configuraci\xF3n",component:VN}]},{path:"**",redirectTo:""}];Rm(EG,"de");Rm(IG,"en");Rm(NG,"es");Rm(AG,"fr");Rm(RG,"it");Rm(OG,"pt");var MWe={providers:[zU({eventCoalescing:!0}),vF(nfe,yF(),wM()),sO(),jW(),JR(ao.forRoot({loader:{provide:Ih,useFactory:t=>new Gq(t,"./assets/i18n/",".json"),deps:[x1]}})),{provide:Lr,useFactory:()=>Lr.init()},{provide:wl,useFactory:t=>wl.init(t),deps:[Wn]},{provide:Yl,useFactory:t=>Yl.init(t),deps:[Wn]}]};hO(LN,MWe).catch(t=>console.error(t));
